{"version":3,"sources":["../node_modules/fabric/dist/fabric.js","../node_modules/buffer/index.js","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/isarray/index.js","../node_modules/jquery/dist/jquery.js"],"names":["proto","fabric","version","exports","document","window","HTMLDocument","Document","implementation","createHTMLDocument","virtualWindow","require","JSDOM","decodeURIComponent","features","FetchExternalResources","resources","jsdomImplForWrapper","implForWrapper","nodeCanvas","Canvas","DOMParser","copyGLTo2DDrawImage","gl","pipelineState","glCanvas","canvas","targetCanvas","ctx","getContext","translate","height","scale","sourceY","drawImage","width","copyGLTo2DPutImageData","dWidth","destinationWidth","dHeight","destinationHeight","numBytes","u8","Uint8Array","this","imageBuffer","u8Clamped","Uint8ClampedArray","readPixels","RGBA","UNSIGNED_BYTE","imgData","ImageData","putImageData","isTouchSupported","navigator","maxTouchPoints","isLikelyNode","Buffer","SHARED_ATTRIBUTES","DPI","reNum","commaWsp","rePathCommand","reNonWord","fontPaths","iMatrix","svgNS","perfLimitSizeTotal","maxCacheSideLimit","minCacheSideLimit","charWidthsCache","textureSize","disableStyleCopyPaste","enableGLFiltering","devicePixelRatio","webkitDevicePixelRatio","mozDevicePixelRatio","browserShadowBlurConstant","arcToSegmentsCache","boundsOfCurveCache","cachesBoundsOfCurve","forceGLPutImageData","initFilterBackend","isWebglSupported","console","log","maxTextureSize","WebglFilterBackend","tileSize","Canvas2dFilterBackend","_removeEventListener","eventName","handler","__eventListeners","eventListener","indexOf","util","array","fill","Observable","fire","options","listenersForEvent","i","len","length","call","filter","value","on","arguments","prop","push","off","Collection","_objects","add","apply","_onObjectAdded","renderOnAddRemove","requestRenderAll","insertAt","object","index","nonSplicing","objects","splice","remove","somethingRemoved","_onObjectRemoved","forEachObject","callback","context","getObjects","type","concat","o","item","isEmpty","size","contains","complexity","reduce","memo","current","CommonMethods","_setOptions","set","_initGradient","filler","property","colorStops","Gradient","_initPattern","source","Pattern","_setObject","obj","_set","key","toggle","get","global","sqrt","Math","atan2","pow","PiBy180","PI","PiBy2","cos","angle","sin","sign","removeFromArray","idx","getRandomInt","min","max","floor","random","degreesToRadians","degrees","radiansToDegrees","radians","rotatePoint","point","origin","subtractEquals","v","rotateVector","Point","x","y","addEquals","vector","transformPoint","p","t","ignoreOffset","makeBoundingBoxFromPoints","points","transform","xPoints","minX","yPoints","minY","left","top","invertTransform","a","r","toFixed","number","fractionDigits","parseFloat","Number","parseUnit","fontSize","unit","exec","Text","DEFAULT_SVG_FONT_SIZE","falseFunction","getKlass","namespace","string","camelize","charAt","toUpperCase","slice","resolveNamespace","getSvgAttributes","attributes","parts","split","loadImage","url","crossOrigin","img","createImage","onLoadCallback","onload","onerror","src","undefined","substring","loadImageInDom","div","createElement","style","position","appendChild","querySelector","parentNode","removeChild","enlivenObjects","reviver","enlivenedObjects","numLoadedObjects","numTotalObjects","onLoaded","forEach","fromObject","error","enlivenPatterns","patterns","numLoadedPatterns","numPatterns","enlivenedPatterns","pattern","groupSVGElements","elements","path","centerPoint","Group","sourcePath","populateWithProperties","destination","properties","Object","prototype","toString","drawDashedLine","x2","y2","da","dx","dy","rot","dc","di","draw","save","moveTo","rotate","restore","createCanvasElement","copyCanvasElement","newCanvas","toDataURL","canvasEl","format","quality","multiplyTransformMatrices","b","is2x2","qrDecompose","denom","scaleX","scaleY","skewX","skewY","translateX","translateY","calcRotateMatrix","theta","calcDimensionsMatrix","scaleMatrix","flipX","flipY","multiply","tan","composeMatrix","matrix","resetObjectTransform","target","saveObjectTransform","isTransparent","tolerance","_isTransparent","imageData","getImageData","l","data","parsePreserveAspectRatioAttribute","attribute","align","meetOrSlice","aspectRatioAttrs","pop","alignX","alignY","clearFabricFontCache","fontFamily","toLowerCase","limitDimsByArea","ar","maximumArea","roughWidth","perfLimitSizeY","capValue","findScaleToFit","findScaleToCover","matrixToSVG","map","NUM_FRACTION_DIGITS","join","removeTransformFromObject","inverted","finalTransform","calcOwnMatrix","applyTransformToObject","addTransformToObject","center","setPositionByOrigin","sizeAfterTransform","dimX","dimY","transformMatrix","bbox","_join","Array","commandLengths","m","h","c","s","q","repeatedCommands","M","segmentToBezier","th2","th3","cosTh","sinTh","rx","ry","cx1","cy1","mT","fromX","fromY","costh2","sinth2","costh3","sinth3","toX","toY","arcToSegments","large","sweep","rotateX","th","px","py","rx2","abs","ry2","py2","px2","pl","root","cx","cy","mTheta","calcVectorAngle","dtheta","segments","ceil","result","mDelta","ux","uy","vx","vy","ta","tb","getBoundsOfCurve","x0","y0","x1","y1","x3","y3","argsString","t1","t2","b2ac","sqrtb2ac","tvalues","bounds","mt","j","jlen","fromArcToBeziers","fx","fy","coords","segsNorm","calcLineLength","getPointOnCubicBezierIterator","p1x","p1y","p2x","p2y","p3x","p3y","p4x","p4y","pct","c1","c2","CB2","c3","CB3","c4","CB4","getTangentCubicIterator","invT","tangentX","tangentY","getPointOnQuadraticBezierIterator","QB2","QB3","getTangentQuadraticIterator","pathIterator","iterator","perc","tempP","tmpLen","findPercentageForDistance","segInfo","distance","nextLen","lastPerc","nextStep","angleFinder","getPathSegmentsInfo","tempInfo","totalLength","info","command","destX","destY","parsePath","pathString","currentPath","parsed","match","coordsStr","re","rNumber","rNumberCommaWsp","rFlagCommaWsp","regArcArgumentSequence","RegExp","coordsParsed","trim","args","isNaN","commandLength","repeatedCommand","k","klen","makePathSimpler","converted","previous","controlX","controlY","destinationPath","fromArcToBeizers","getPointOnPath","infos","segPercent","segment","lerp","getBoundsOfArc","tx","ty","bound","segs","drawArc","unshift","bezier","bezierCurveTo","find","byProperty","condition","invoke","method","value1","value2","extend","deep","Element","hasOwnProperty","clone","getWholeChar","str","code","charCodeAt","next","prev","replace","character","capitalize","firstLetterOnly","escapeXml","graphemeSplit","textstring","chr","graphemes","emptyFunction","IS_DONTENUM_BUGGY","addMethods","klass","parent","superclass","constructor","returnValue","valueOf","Subclass","callSuper","methodName","parentMethod","_this","superClassMethod","createClass","initialize","shift","subclasses","couldUseAttachEvent","attachEvent","touchEvents","addListener","element","addEventListener","removeListener","removeEventListener","getPointer","event","scroll","getScrollLeftTop","_evt","touchProp","changedTouches","getTouchInfo","clientX","clientY","isTouchEvent","pointerType","parseEl","supportsOpacity","opacity","supportsFilters","reOpacity","setOpacity","es","currentStyle","hasLayout","zoom","test","setStyle","styles","elementStyle","cssText","styleFloat","_slice","sliceCanConvertNodelists","getElementStyle","toArray","arrayLike","childNodes","err","makeElement","tagName","el","className","htmlFor","setAttribute","docElement","documentElement","body","scrollLeft","scrollTop","host","nodeType","arr","defaultView","getComputedStyle","attr","selectProp","makeElementUnselectable","onselectstart","unselectable","makeElementSelectable","setImageSmoothing","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","getById","id","getElementById","addClass","wrapElement","wrapper","replaceChild","getElementOffset","docElem","scrollLeftTop","doc","ownerDocument","box","offset","offsetAttributes","borderLeftWidth","borderTopWidth","paddingLeft","paddingTop","parseInt","getBoundingClientRect","clientLeft","clientTop","getNodeCanvas","impl","_canvas","_image","cleanUpJsdomNode","_currentSrc","_attributes","_classList","emptyFn","request","onComplete","xhr","XMLHttpRequest","parameters","onreadystatechange","readyState","param","addParamToUrl","open","setRequestHeader","send","warn","noop","defaultEasing","d","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","_cancelAnimFrame","cancelAnimationFrame","clearTimeout","requestAnimFrame","animate","timestamp","time","start","Date","duration","finish","onChange","abort","easing","startValue","endValue","byValue","onStart","tick","ticktime","currentTime","timePerc","valuePerc","cancelAnimFrame","calculateColor","begin","end","pos","color","animateColor","fromColor","toColor","startColor","Color","getSource","endColor","originalOnComplete","originalOnChange","colorEasing","isArray","normalize","asin","elastic","opts","easeInBounce","easeOutBounce","ease","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInOutBounce","attributesMap","display","visibility","colorAttributes","stroke","fSize","cPath","normalizeAttr","normalizeValue","parentAttributes","parseTransformAttribute","visible","fillIndex","strokeIndex","getSvgRegex","_getMultipleNodes","nodeNames","nodeName","nodeList","nodeArray","getElementsByTagName","elementMatchesRule","selectors","firstMatching","parentMatching","selectorMatches","selector","doesSomeParentMatch","matcher","classNames","getAttribute","elementById","node","nodelist","svgValidTagNamesRegEx","svgViewBoxElementsRegEx","svgInvalidAncestorsRegEx","svgValidParentsRegEx","cssRules","gradientDefs","clipPaths","skewMatrix","reTransformList","reTransform","attributeValue","matrices","operation","translateMatrix","rotateMatrix","multiplierX","multiplierY","combinedMatrix","reViewBoxAttrValue","applyViewboxTransform","viewBoxWidth","viewBoxHeight","viewBoxAttr","widthAttr","heightAttr","preserveAspectRatio","missingViewBox","missingDimAttr","toBeParsed","parsedDim","widthDiff","heightDiff","removeAttribute","createElementNS","firstChild","recursivelyParseGradientsXlink","gradient","xlinkAttr","referencedGradient","substr","hasAttribute","children","referenceClone","cloneNode","parseSVGDocument","parsingOptions","attrs","xlink","el2","currentTrans","oldLength","el3","setAttributeNS","nodeValue","parseUseDirectives","svgUid","__uid","descendants","selectNodes","hasAncestorWithNodeName","getGradientDefs","getCSSRules","parseElements","instances","reFontDeclaration","parseFontDeclaration","oStyle","fontStyle","fontWeight","lineHeight","elList","parseAttributes","parentFontSize","ownAttributes","cssAttrs","rule","getGlobalStylesForElement","parseStyleAttribute","normalizedAttr","normalizedValue","normalizedStyle","font","mergedAttrs","setAlpha","getAlpha","toRgba","_setStrokeFillOpacity","ElementsParser","parse","chunk","pair","parseStyleString","parseStyleObject","parsePointsAttribute","parsedPoints","allRules","styleContents","textContent","ruleObj","propertyValuePairs","_rule","loadSVGFromURL","xml","responseXML","results","_options","allElements","loadSVGFromString","parseFromString","regexUrl","numElements","createObjects","createObject","findTag","fromElement","createCallback","checkIfDone","resolveGradient","Image","_originalElement","_removeTransformMatrix","resolveClipPath","extractPropertyDefinition","storage","regex","lastIndex","gradientDef","opacityAttr","createClipPathCallback","container","_newObj","fillRule","clipRule","usingElement","objTransformInv","gTransform","clipPath","calcTransformMatrix","clipPathTag","clipPathOwner","that","scalarAdd","scalar","scalarAddEquals","subtract","scalarSubtract","scalarSubtractEquals","multiplyEquals","divide","divideEquals","eq","lt","lte","gt","gte","distanceFrom","midPointFrom","setXY","setX","setY","setFromPoint","swap","Intersection","status","appendPoint","appendPoints","intersectLineLine","a1","a2","b1","b2","uaT","ubT","uB","ua","ub","intersectLinePolygon","inter","intersectPolygonPolygon","points1","points2","intersectPolygonRectangle","r1","r2","topRight","bottomLeft","inter1","inter2","inter3","inter4","_tryParsingColor","setSource","hue2rgb","colorNameMap","sourceFromHex","sourceFromRgb","sourceFromHsl","_rgbToHsl","g","round","_source","toRgb","toHsl","hsl","toHsla","toHex","toHexa","alpha","toGrayscale","average","currentAlpha","toBlackWhite","threshold","overlayWith","otherColor","otherSource","reRGBa","reHSLa","reHex","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","fromRgb","fromSource","fromRgba","fromHsl","fromHsla","fromHex","isShortNotation","isRGBa","oColor","scaleMap","skewMap","controls","LEFT","TOP","RIGHT","BOTTOM","CENTER","opposite","bottom","right","findCornerQuadrant","fabricObject","control","cornerAngle","fireEvent","canvasOptions","scaleIsProportional","eventData","uniformIsToggled","uniScaleKey","uniformScaling","isTransformCentered","originX","originY","scalingIsForbidden","by","scaleProportionally","lockX","lockScalingX","lockY","lockScalingY","commonEventInfo","e","pointer","wrapWithFixedAnchor","actionHandler","getCenterPoint","constraint","translateToOriginPoint","actionPerformed","getLocalPoint","corner","getZoom","padding","localPoint","toLocalPoint","offsetX","offsetY","targetHasOneFlip","compensateScaleForSkew","oppositeSkew","scaleToCompensate","axis","reference","newValue","_getTransformedDimensions","skewObjectX","newSkew","dimNoSkew","totalSkewSize","currentSkew","hasSkewed","dimBeforeSkewing","skewObjectY","scaleObject","newPoint","dim","signX","signY","forbidScaling","gestureScale","lockScalingFlip","hasScaled","original","oldScaleX","oldScaleY","scaleCursorStyleHandler","n","skewCursorStyleHandler","notAllowed","lockSkewingY","lockSkewingX","scaleSkewCursorStyleHandler","altActionKey","rotationWithSnapping","pivotPoint","lockRotation","hasRotated","lastAngle","ey","ex","curAngle","snapAngle","snapThreshold","rightAngleLocked","leftAngleLocked","scalingEqually","scalingX","scalingY","scalingYOrSkewingX","skewHandlerX","scalingXOrSkewingY","skewHandlerY","changeWidth","hasResized","strokePadding","strokeWidth","strokeUniform","multiplier","oldWidth","newWidth","finalHandler","dragHandler","newLeft","newTop","moveX","moveY","scaleOrSkewActionName","isAlternative","rotationStyleHandler","cursorStyle","controlsUtils","renderCircleControl","styleOverride","xSize","sizeX","cornerSize","ySize","sizeY","transparentCorners","cornerStrokeColor","myLeft","myTop","fillStyle","cornerColor","strokeStyle","lineWidth","beginPath","arc","renderSquareControl","xSizeBy2","ySizeBy2","strokeRect","Control","actionName","touchSizeX","touchSizeY","withConnection","mouseDownHandler","mouseUpHandler","getActionHandler","getMouseDownHandler","getMouseUpHandler","cursorStyleHandler","getActionName","getVisibility","controlKey","objectVisibility","_controlsVisibility","setVisibility","positionHandler","finalMatrix","calcCornerCoords","objectAngle","objectCornerSize","centerX","centerY","isTouch","cosHalfOffset","sinHalfOffset","cosHalfOffsetComp","sinHalfOffsetComp","controlTriangleAngle","cornerHypotenuse","newTheta","newThetaComp","tl","tr","bl","br","render","cornerStyle","getColorStop","colorAlpha","keyValuePairs","gradientTransform","gradientUnits","keys","option","addColorStop","toObject","propertiesToInclude","toSVG","markup","commonAttributes","needsSwap","withViewport","additionalTransform","sort","pathOffset","reverse","minRadius","percentageShift","colorStop","toLive","createLinearGradient","createRadialGradient","instance","svgOptions","colorStopEls","getLinearCoords","getRadialCoords","propValue","finalValue","__convertPercentUnitsToValues","repeat","patternTransform","setOptions","isError","patternSource","patternWidth","patternHeight","patternOffsetX","patternOffsetY","patternImgSrc","complete","naturalWidth","naturalHeight","createPattern","Shadow","blur","affectStroke","includeDefaultValues","nonScaling","_parseShadow","shadow","shadowStr","offsetsAndBlur","reOffsetsAndBlur","fBoxX","fBoxY","StaticCanvas","CANVAS_INIT_ERROR","Error","renderAndResetBound","renderAndReset","bind","requestRenderAllBound","_initStatic","backgroundColor","backgroundImage","overlayColor","overlayImage","stateful","controlsAboveOverlay","allowTouchScrolling","viewportTransform","backgroundVpt","overlayVpt","enableRetinaScaling","vptCoords","skipOffscreen","cb","_createLowerCanvas","_initOptions","interactive","_initRetinaScaling","setOverlayImage","setBackgroundImage","setBackgroundColor","setOverlayColor","calcOffset","_isRetinaScaling","getRetinaScaling","scaleRatio","__initRetinaScaling","lowerCanvasEl","contextContainer","upperCanvasEl","contextTop","_offset","image","__setBgOverlayImage","__setBgOverlayColor","_createCanvasElement","_applyCanvasStyle","getWidth","getHeight","setWidth","setDimensions","setHeight","dimensions","cssValue","cssOnly","_setBackstoreDimension","hasLostContext","backstoreOnly","_setCssDimension","_isCurrentlyDrawing","freeDrawingBrush","_setBrushStyles","cacheCanvasEl","wrapperEl","setViewportTransform","vpt","activeObject","_activeObject","backgroundObject","overlayObject","group","setCoords","calcViewportBoundaries","zoomToPoint","before","after","setZoom","absolutePan","relativePan","getElement","setupState","clearContext","clearRect","clear","_hasITextHandlers","_mouseUpITextHandler","_iTextInstances","renderAll","canvasToDrawOn","renderCanvas","isRendering","iVpt","cancelRequestedRender","_renderBackground","_renderObjects","drawControls","shouldCache","_transformDone","renderCache","forClipping","drawClipPathOnCanvas","_renderOverlay","globalCompositeOperation","zoomX","zoomY","_cacheCanvas","cacheTranslationX","cacheTranslationY","_renderBackgroundOrOverlay","needsVpt","lineTo","closePath","getCenter","centerObjectH","_centerObject","centerObjectV","centerObject","viewportCenterObject","vpCenter","getVpCenter","viewportCenterObjectH","viewportCenterObjectV","toDatalessJSON","toDatalessObject","_toObjectMethod","_toObjects","_toObject","__serializeBgOverlay","excludeFromExport","originalValue","bgImage","overlay","background","svgViewportTransformation","_setSVGPreamble","_setSVGHeader","clipPathId","_setSVGBgOverlayColor","_setSVGBgOverlayImage","_setSVGObjects","suppressPreamble","encoding","viewBox","createSVGFontFacesMarkup","createSVGRefElementsMarkup","createSVGClipPathMarkup","toClipPathSVG","shouldTransform","row","rowIndex","charIndex","fontList","_setSVGObject","finalWidth","finalHeight","sendToBack","objs","activeSelection","bringToFront","sendBackwards","intersecting","newIdx","objsMoved","_findNewLowerIndex","intersectsWithObject","isContainedWithinObject","bringForward","_findNewUpperIndex","dispose","DataURLExporter","EMPTY_JSON","supports","setLineDash","toJSON","createPNGStream","createJPEGStream","BaseBrush","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeDashArray","limitedToCanvasSize","lineCap","miterLimit","lineJoin","_saveAndTransform","_setShadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","needsFullRender","_resetShadow","_isOutSideCanvas","PencilBrush","decimate","_points","_drawSegment","p1","p2","midPoint","quadraticCurveTo","onMouseDown","_isMainEvent","_prepareForDrawing","_captureDrawingPath","_render","onMouseMove","oldEnd","onMouseUp","_finalizeAndAddPath","_reset","_addPoint","pointerPoint","convertPointsToSVGPath","multSignX","multSignY","manyPoints","createPath","pathData","Path","decimatePoints","adjustedDistance","lastPoint","newPoints","CircleBrush","drawDot","addPoint","dot","radius","originalRenderOnAddRemove","circles","circle","Circle","circleRadius","circleColor","SprayBrush","density","dotWidth","dotWidthVariance","randomOpacity","optimizeOverlapping","sprayChunks","addSprayChunk","sprayChunkPoints","rects","ilen","sprayChunk","rect","Rect","_getOptimizedRects","uniqueRects","uniqueRectsArray","globalAlpha","fillRect","PatternBrush","getPatternSrc","patternCanvas","patternCtx","getPatternSrcFunction","String","getPattern","topLeft","_getLeftTopCoords","supportLineDash","STROKE_OFFSET","_initInteractive","_createCacheCanvas","centeredScaling","centeredRotation","centeredKey","selection","selectionKey","altSelectionKey","selectionColor","selectionDashArray","selectionBorderColor","selectionLineWidth","selectionFullyContained","hoverCursor","moveCursor","defaultCursor","freeDrawingCursor","rotationCursor","notAllowedCursor","containerClass","perPixelTargetFind","targetFindTolerance","skipTargetFind","isDrawingMode","preserveObjectStacking","stopContextMenu","fireRightClick","fireMiddleClick","targets","_hoveredTarget","_hoveredTargets","_currentTransform","_groupSelector","_initWrapperElement","_createUpperCanvas","_initEventListeners","_chooseObjectsToRender","objsToRender","activeGroupObjects","activeObjects","getActiveObjects","contextTopDirty","renderTopLayer","_drawSelection","renderTop","_normalizePointer","invertedM","vptPointer","restorePointerVpt","isTargetTransparent","normalizedPointer","targetRelativeX","targetRelativeY","_cacheContext","contextCache","originalColor","selectionBackgroundColor","_isSelectionKeyPressed","_shouldClearSelection","evented","selectable","_shouldCenterTransform","action","altKey","centerTransform","_getOriginFromCorner","_getActionFromCorner","alreadySelected","_setupCurrentTransform","__corner","lastX","lastY","shiftKey","_beforeTransform","setCursor","cursor","groupSelector","aleft","atop","_setLineDash","findTarget","skipGroup","activeTarget","activeTargetSubs","aObjects","shouldLookForActive","_findTargetCorner","_searchPossibleTargets","_checkTarget","globalPointer","containsPoint","isEditing","subTarget","objToCheck","pointerToUse","subTargetCheck","ignoreZoom","_absolutePointer","_pointer","cssScale","boundsWidth","boundsHeight","retinaScaling","lowerCanvasClass","_copyCanvasStyle","fromEl","toEl","getSelectionContext","getSelectionElement","getActiveObject","active","_discardActiveObject","_fireSelectionEvents","oldObjects","somethingChanged","added","removed","oldObject","selected","deselected","updated","setActiveObject","currentActives","_setActiveObject","onSelect","onDeselect","discardActiveObject","removeListeners","_renderControls","originalProperties","_realizeGroupTransformOnObject","_unwindGroupTransformOnObject","originalValues","clearContextTop","addEventOptions","passive","checkClick","button","mainTouchId","_bindEvents","addOrRemove","_getEventPrefix","enablePointerEvents","functor","eventjsFunctor","canvasElement","eventTypePrefix","_onResize","_onMouseDown","_onMouseMove","_onMouseOut","_onMouseEnter","_onMouseWheel","_onContextMenu","_onDoubleClick","_onDragOver","_onDragEnter","_onDragLeave","_onDrop","_onTouchStart","eventjs","_onGesture","_onDrag","_onOrientationChange","_onShake","_onLongPress","_onMouseUp","_onTouchEnd","eventsBound","_simpleEventHandler","self","__onTransformGesture","__onDrag","__onMouseWheel","_target","hiddenTextarea","focus","__onOrientationChange","__onShake","__onLongPress","preventDefault","_fireEnterLeaveEvents","stopPropagation","_cacheTransformEventData","_handleEvent","_resetTransformEventData","getPointerId","evt","identifier","pointerId","isPrimary","touches","__onMouseDown","__onMouseUp","_willAddMouseDown","__onMouseMove","_shouldRender","shouldRender","isClick","_onMouseUpInDrawingMode","_finalizeCurrentTransform","targetWasActive","_maybeGroupObjects","activeOn","isMoving","_setCursorFromEvent","eventType","subTargets","absolutePointer","currentTarget","currentSubTargets","_scaling","hasStateChanged","_addEventOptions","_fire","_onMouseDownInDrawingMode","_onMouseMoveInDrawingMode","_previousPointer","shouldGroup","_shouldGroup","_handleGrouping","saveState","_transformObject","_fireOverOutEvents","fireSyntheticInOutEvents","oldTarget","evtOut","canvasEvtOut","evtIn","canvasEvtIn","_draggedoverTarget","config","inOpt","outOpt","inFires","targetChanged","previousTarget","nextTarget","reset","_performTransformAction","getCornerCursor","_updateActiveSelection","_createActiveSelection","currentActiveObjects","removeWithUpdate","addWithUpdate","_createGroup","groupObjects","exitEditing","ActiveSelection","_groupSelectedObjects","aGroup","_collectObjects","currentObject","selectionX1Y1","selectionX2Y2","allowIntersect","intersectsWithRect","isContainedWithinRect","toCanvasElement","cropping","scaledWidth","scaledHeight","originalWidth","originalHeight","newZoom","vp","originalInteractive","newVp","originalRetina","originalContextTop","loadFromJSON","json","serialized","JSON","_enlivenObjects","_setBgOverlay","enlivenedCanvasClip","__setupCanvas","loaded","cbIfLoaded","__setBgOverlay","enlivedObject","_toDataURL","_toDataURLWithMultiplier","toDataURLWithMultiplier","stringify","cloneWithoutData","backgroundImageOpacity","backgroundImageStretch","supportsLineDash","objectCaching","touchCornerSize","borderColor","borderDashArray","cornerDashArray","strokeDashOffset","borderOpacityWhenMoving","borderScaleFactor","minScaleLimit","hasControls","hasBorders","lockMovementX","lockMovementY","statefullCache","noScaleCache","dirty","paintFirst","stateProperties","cacheProperties","colorProperties","absolutePositioned","_cacheProperties","_updateCacheCanvas","_limitCacheSize","dims","limitedDims","capped","_getCacheCanvasDimensions","objectScale","getTotalObjectScaling","neededX","neededY","drawingWidth","drawingHeight","minCacheSize","dimensionsChanged","cacheWidth","cacheHeight","zoomChanged","shouldRedraw","additionalWidth","additionalHeight","shouldResizeCanvas","canvasWidth","canvasHeight","sizeGrowing","setTransform","needFullTransform","_removeDefaultValues","getObjectScaling","retina","getObjectOpacity","shouldConstrainValue","isChanged","groupNeedsUpdate","_constrainScale","isOnACache","setOnGroup","getViewportTransform","isNotVisible","isOnScreen","_setupCompositeOperation","drawSelectionBackground","_setOpacity","drawCacheOnCanvas","_removeCacheCanvas","drawObject","propertySet","isCacheDirty","hasStroke","hasFill","needsItsOwnCache","ownCaching","willDrawShadow","drawClipPathOnCache","originalFill","originalStroke","_setClippingProperties","_drawClipPath","skipCanvas","_getNonTransformedDimensions","_removeShadow","_setStrokeStyles","decl","lineDashOffset","gradientTrasnform","_applyPatternForTransformedGradient","_applyPatternGradientTransform","_setFillStyles","dashArray","alternative","drawBorders","forActiveSelection","drawBordersInGroup","scaling","multX","multY","_renderPaintInOrder","_renderStroke","_renderFill","_renderDashedStroke","pCtx","pCanvas","_findCenterFromElement","_assignTransformMatrixProps","preserveAspectRatioOptions","cropX","cropY","offsetLeft","offsetTop","objectForm","_fromObject","cloneAsImage","utils","origParams","originalGroup","originalShadow","withoutTransform","withoutShadow","boundingRect","getBoundingRect","shadowOffset","originalCanvas","isType","shouldCenterOrigin","_setOriginToCenter","_resetOrigin","centerH","viewportCenterH","centerV","viewportCenterV","viewportCenter","getLocalPointer","pClicked","objectLeftTop","createAccessors","extraParam","enlivedProps","originXOffset","originYOffset","translateToGivenOrigin","fromOriginX","fromOriginY","toOriginX","toOriginY","translateToCenterPoint","leftTop","getPointByOrigin","adjustPosition","to","offsetFrom","offsetTo","hypotFull","getScaledWidth","xFull","yFull","_originalOriginX","_originalOriginY","originPoint","multiplyMatrices","oCoords","aCoords","lineCoords","ownMatrixCache","matrixCache","_getCoords","absolute","calculate","calcACoords","calcLineCoords","getCoords","pointTL","pointBR","other","otherCoords","lines","_getImageLines","_findCrossPoints","some","_containsCenterOfCanvas","isPartiallyOnScreen","every","topline","rightline","bottomline","leftline","xi","iLine","xcount","lineKey","getScaledHeight","scaleToWidth","boundingRectFactor","scaleToHeight","calcCoords","calcOCoords","cosP","sinP","cosPSinP","cosPMinusSinP","_calcRotateMatrix","_calcTranslateMatrix","startMatrix","_calculateCurrentDimensions","forEachControl","w","skipCorners","_setCornerCoords","transformMatrixKey","sep","prefix","cache","tMatrix","_calcDimensionsTransformMatrix","flipping","noSkew","_finalizeDimensions","getSvgColorString","getSvgStyles","skipShadow","getSvgFilter","getSvgSpanStyles","useWhiteSpace","term","textDecoration","getSvgTextDecoration","deltaY","decoration","getSvgCommons","getSvgTransform","full","_setSVGBg","textBgRects","_getFillAttributes","_createBaseSVGMarkup","_toSVG","_createBaseClipPathSVGMarkup","objectMarkup","commonPieces","clipPathMarkup","noStyle","styleInfo","shadowInfo","withShadow","vectorEffect","absoluteClipPath","addPaintOrder","originalSet","saveProps","props","tmpObj","_isEqual","origValue","currentValue","firstPass","dashedPropertySet","forTouch","isControlVisible","touchCorner","fn","controlObject","wh","shouldStroke","setControlVisible","setControlsVisibility","FX_DURATION","fxCenterObjectH","callbacks","empty","fxCenterObjectV","fxRemove","skipCallbacks","propsToAnimate","_animate","propPair","propIsColor","from","valueProgress","timeProgress","coordProps","makeEdgeToOriginGetter","propertyNames","originValues","axis1","axis2","dimension","nearest","farthest","Line","_setWidthHeight","_getLeftToOriginX","_getTopToOriginY","calcLinePoints","origStrokeStyle","xMult","yMult","ATTRIBUTE_NAMES","parsedAttributes","pi","startAngle","endAngle","setRadius","svgString","startX","startY","endX","endY","largeFlag","getRadiusX","getRadiusY","Triangle","widthBy2","heightBy2","piBy2","Ellipse","getRx","getRy","_initRxRy","isRounded","Polyline","_setPositionDimensions","correctLeftTop","calcDim","_calcDimensions","fromSVG","diffX","diffY","commonRender","fromElementGenerator","_class","Polygon","_toString","fromArray","_renderPathCommands","subpathStartX","subpathStartY","_getOffsetTransform","digits","aX","aY","pathUrl","useSetOnGroup","isAlreadyGrouped","_updateObjectsACoords","_calcBounds","_updateObjectsCoords","_updateObjectCoords","objectLeft","objectTop","nested","_restoreObjectsState","_includeDefaultValues","objsToObject","originalDefaults","_obj","ownCache","groupMatrix","realizeTransform","parentMatrix","destroy","toActiveSelection","ungroupOnCanvas","setObjectsCoords","onlyWidthHeight","iLen","jLen","_getBounds","minXY","maxXY","enlivedClipPath","toGroup","newGroup","childrenOverride","srcFromAttribute","_lastScaleX","_lastScaleY","_filterScalingX","_filterScalingY","minimumScaleTrigger","cacheKey","imageSmoothing","filters","_initElement","_element","setElement","removeTexture","_initConfig","applyFilters","resizeFilter","applyResizeFilters","backend","filterBackend","evictCachesForKey","getCrossOrigin","getOriginalSize","_stroke","filterObj","getSrc","hasCrop","strokeSvg","imageMarkup","imageRendering","getSvgSrc","origFill","filtered","setSrc","minimumScale","elementToFilter","_filteredEl","sourceWidth","sourceHeight","isNeutralState","imgElement","_needsResize","elementToDraw","elWidth","elHeight","sX","sY","sW","sH","maxDestW","maxDestH","_resetWidthHeight","CSS_CANVAS","_initFilters","pAR","rWidth","rHeight","pWidth","pHeight","_object","resizeFilters","fromURL","imgOptions","_getAngleValueForStraighten","straighten","fxStraighten","straightenObject","fxStraightenObject","testPrecision","precision","fragmentSource","fragmentShader","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","setupGLContext","captureGPUInfo","isSupported","getParameter","MAX_TEXTURE_SIZE","precisions","webGlPrecision","createWebGLCanvas","aPosition","Float32Array","chooseFastestCopyGLTo2DMethod","canUseImageData","canMeasurePerf","performance","canUseArrayBuffer","ArrayBuffer","canUseUint8Clamped","copyGLTo2D","startTime","drawImageTime","testContext","now","glOptions","premultipliedAlpha","depth","stencil","antialias","clearColor","cachedTexture","getCachedTexture","sourceTexture","createTexture","targetTexture","originalTexture","passes","webgl","programCache","pass","tempFbo","createFramebuffer","bindFramebuffer","FRAMEBUFFER","applyTo","resizeCanvasIfNeeded","bindTexture","TEXTURE_2D","deleteTexture","deleteFramebuffer","clearWebGLCaches","textureCache","textureImageSource","texture","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","uniqueId","gpuInfo","renderer","vendor","ext","getExtension","UNMASKED_RENDERER_WEBGL","UNMASKED_VENDOR_WEBGL","sourceElement","originalEl","originalImageData","BaseFilter","vertexSource","createProgram","vertexShader","VERTEX_SHADER","getShaderInfoLog","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","attributeLocations","getAttributeLocations","uniformLocations","getUniformLocations","uStepW","getUniformLocation","uStepH","getAttribLocation","sendAttributeData","aPositionData","attributeLocation","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","bufferData","STATIC_DRAW","_setupFrameBuffer","framebufferTexture2D","COLOR_ATTACHMENT0","_swapTextures","temp","main","mainParameter","applyToWebGL","applyTo2d","retrieveShader","shader","useProgram","uniform1f","sendUniformData","viewport","drawArrays","TRIANGLE_STRIP","bindAdditionalTexture","textureUnit","activeTexture","TEXTURE0","unbindAdditionalTexture","getMainParameter","setMainParameter","createHelpLayer","helpLayer","mainP","ColorMatrix","colorsOnly","uColorMatrix","uConstants","constants","uniformMatrix4fv","uniform4fv","Brightness","brightness","uBrightness","Convolute","opaque","Convolute_3_1","Convolute_3_0","Convolute_5_1","Convolute_5_0","Convolute_7_1","Convolute_7_0","Convolute_9_1","Convolute_9_0","dstOff","scx","scy","srcOff","wt","weights","side","halfSide","sw","sh","output","createImageData","dst","alphaFac","uMatrix","uOpaque","uHalfSize","uSize","uniform1fv","Grayscale","lightness","luminosity","mode","uMode","uniform1i","Invert","invert","uInvert","Noise","noise","rand","uNoise","uSeed","Pixelate","blocksize","_i","_j","_iLen","_jLen","uBlocksize","RemoveColor","useAlpha","lowC","highC","uLow","uHigh","Brownie","Vintage","Kodachrome","Technicolor","Polaroid","Sepia","BlackWhite","BlendColor","screen","diff","lighten","darken","exclusion","tint","buildSource","tg","alpha1","uColor","BlendImage","mask","TEXTURE1","calculateMatrix","canvas1","blendData","blendImage","uTransformMatrix","uImage","uniformMatrix3fv","Resize","resizeType","lanczosLobes","uDelta","uTaps","uniform2fv","horizontal","taps","filterWindow","getFilterWindow","generateShader","tempScale","getTaps","lobeFunction","lanczosCreate","offsets","fragmentSourceTOP","dW","dH","lobes","xx","rcpScaleX","rcpScaleY","newData","oW","oH","sliceByTwo","hermiteFastResize","bilinearFiltering","lanczosResize","tmpCanvas","mult","doneW","doneH","stepW","stepH","dX","dY","srcData","destImg","destData","lanczos","ratioX","ratioY","rcpRatioX","rcpRatioY","range2X","range2Y","cacheLanc","icenter","process","u","weight","fX","fY","xDiff","yDiff","chnl","origPix","w4","pixels","destImage","destPixels","ratioW","ratioH","ratioWHalf","ratioHHalf","img2","data2","weightsAlpha","gxR","gxG","gxB","gxA","yy","w0","Contrast","contrast","contrastF","uContrast","Saturation","saturation","adjust","uSaturation","Blur","aspectRatio","simpleBlur","canvas2","blurLayer1","blurLayer2","percent","ctx1","ctx2","nSamples","newImageData","delta","chooseRightDelta","blurScale","Gamma","gamma","rInv","gInv","bInv","rVals","gVals","bVals","uGamma","uniform3fv","Composed","subFilters","HueRotation","rotation","rad","aThird","aThirdSqtSin","OneMinusCos","additionalProps","_dimensionAffectingProps","_reNewline","_reSpacesAndTabs","_reSpaceAndTab","_reWords","underline","overline","linethrough","textAlign","superscript","baseline","subscript","textBackgroundColor","_fontSizeFraction","_fontSizeMult","charSpacing","_measuringContext","_styleProperties","__charBounds","CACHE_FONT_SIZE","MIN_TEXT_WIDTH","text","__skipDimension","setPathInfo","initDimensions","segmentsInfo","getMeasuringContext","_splitText","newLines","_splitTextIntoLines","textLines","_textLines","graphemeLines","_unwrappedTextLines","_unwrappedLines","_text","graphemeText","_clearCache","calcTextWidth","cursorWidth","calcTextHeight","enlargeSpaces","diffSpace","currentLineWidth","numberOfSpaces","accumulatedSpace","line","charBound","spaces","isEndOfWrapping","getLineWidth","kernedWidth","lineIndex","missingNewlineOffset","_setTextStyles","_renderTextLinesBackground","_renderTextDecoration","_renderText","_renderTextStroke","_renderTextFill","charStyle","forMeasuring","textBaseline","_getFontDeclaration","maxWidth","_renderTextLine","_renderChars","styleHas","heightOfLine","lineLeftOffset","lastColor","charBox","currentColor","leftOffset","_getLeftOffset","lineTopOffset","_getTopOffset","boxStart","boxWidth","getHeightOfLine","_getLineLeftOffset","getValueOfPropertyAt","renderLeft","getFontCache","cacheProp","_measureChar","_char","previousChar","prevCharStyle","coupleWidth","previousWidth","fontCache","couple","stylesAreEqual","fontMultiplier","measureText","getHeightOfChar","measureLine","lineInfo","_measureLine","_getWidthOfCharSpacing","grapheme","prevGrapheme","graphemeInfo","startingPoint","totalPathLength","lineBounds","positionInPath","_getGraphemeBox","_setGraphemeOnPath","numOfSpaces","centerPosition","skipLeft","getCompleteStyleDeclaration","prevStyle","previousBox","__lineHeights","maxHeight","_renderTextCommon","lineHeights","isEmptyStyles","actualStyle","nextStyle","timeToRender","isJustify","charsToRender","shortCut","_renderChar","_hasStyleChanged","_applyPatternGradientTransformText","handleFiller","fillOffsets","strokeOffsets","_getStyleDeclaration","fullDecl","shouldFill","fillText","strokeText","setSuperscript","_setScript","setSubscript","schema","loc","get2DCursorLocation","setSelectionStyles","thisStyle","_hasStyleChangedForSvg","__lineWidths","_shouldClearDimensionCache","shouldClear","_forceClearCache","_size","_dy","lastDecoration","currentDecoration","currentFill","lastFill","topOffset","styleObject","family","fontIsGeneric","genericFonts","newLine","newText","additionalProperties","needsDims","isAddingPath","_key","parsedAnchor","textAnchor","originalStrokeWidth","textHeightScaleFactor","scaledDiff","textHeight","offX","objectCopy","textInstance","pathInstance","p3","0","cleanStyle","letterCount","stylePropertyValue","stylesCount","allStyleObjectPropertiesMatch","graphemeCount","removeStyle","lineNum","charNum","_extendStyles","_getLineStyle","_setLineStyle","_setStyleDeclaration","selectionStart","skipWrapping","getSelectionStyles","startIndex","endIndex","selectionEnd","getStyleAtPosition","lineStyle","_deleteStyleDeclaration","_deleteLineStyle","parseDecoration","IText","editable","editingBorderColor","cursorColor","cursorDelay","cursorDuration","caching","_reSpace","_currentCursorOpacity","_selectionDirection","_abortCursorAnimation","__widthOfSpace","inCompositionMode","initBehavior","setSelectionStart","_updateAndFire","setSelectionEnd","_fireSelectionChanged","_updateTextarea","initDelayedCursor","cursorOffsetCache","renderCursorOrSelection","skipRestore","_clearTextArea","boundaries","_getCursorBoundaries","renderCursor","renderSelection","_getCursorBoundariesOffsets","cursorPosition","cursorLocation","charHeight","__isMousedown","startLine","endLine","startChar","endChar","realLineHeight","lineOffset","boxEnd","compositionColor","getCurrentCharFontSize","cp","_getCurrentCharIndex","getCurrentCharColor","initAddedHandler","initRemovedHandler","initCursorSelectionHandlers","initDoubleClickSimulation","mouseMoveHandler","_initCanvasHandlers","_removeCanvasHandlers","_tick","_currentTickState","_animateCursor","targetOpacity","completeMethod","tickState","isAborted","_onTickComplete","_cursorTimeout1","_currentTickCompleteState","restart","delay","abortCursorAnimation","_cursorTimeout2","selectAll","getSelectedText","findWordBoundaryLeft","startFrom","findWordBoundaryRight","findLineBoundaryLeft","findLineBoundaryRight","searchWordBoundary","direction","selectWord","newSelectionStart","newSelectionEnd","selectLine","enterEditing","exitEditingOnOthers","initHiddenTextarea","_saveEditingProps","_setEditingProps","_textBeforeEdit","initMouseMoveHandler","getSelectionStartFromPointer","currentStart","currentEnd","__selectionStartOnMouseDown","restartCursorIfNeeded","fromStringToGraphemeSelection","smallerTextStart","graphemeStart","smallerTextEnd","fromGraphemeToStringSelection","newSelection","updateTextareaPosition","updateFromTextArea","_calcTextareaPosition","desiredPosition","compositionStart","upperCanvas","upperCanvasWidth","upperCanvasHeight","clientWidth","clientHeight","_savedProps","_restoreEditingProps","isTextChanged","_removeExtraneousStyles","removeStyleFromTo","styleObj","cursorStart","cursorEnd","lineStart","charStart","lineEnd","charEnd","shiftLineStyles","numericChar","clonedStyles","numericLine","insertNewlineStyleObject","qty","copiedStyle","currentCharStyle","newLineStyles","somethingAdded","isEndOfLine","numIndex","styleCarriedOver","insertCharStyleObject","quantity","currentLineStyles","currentLineStylesCloned","numericIndex","newStyle","insertNewStyleBlock","insertedText","cursorLoc","addedLines","linesLength","setSelectionStartEndWithShift","setSelectionInBoundaries","__lastClickTime","__lastLastClickTime","__lastPointer","__newClickTime","newPointer","isTripleClick","_stopEvent","__lastIsEditing","__lastSelected","initMousedownHandler","initMouseupHandler","initClicks","doubleClickHandler","tripleClickHandler","_mouseDownHandler","setCursorByClick","_mouseDownHandlerBefore","currentActive","mouseOffset","prevWidth","_getNewSelectionStartFromOffset","distanceBtwLastCharAndCursor","distanceBtwNextCharAndCursor","onKeyDown","onKeyUp","onInput","copy","paste","onCompositionStart","onCompositionUpdate","onCompositionEnd","_clickHandlerInitialized","onClick","keysMap","9","27","33","34","35","36","37","38","39","40","ctrlKeysMapUp","67","88","ctrlKeysMapDown","65","keyCode","ctrlKey","metaKey","stopImmediatePropagation","_copyDone","fromPaste","removedText","removeFrom","removeTo","nextText","charCount","nextCharCount","charDiff","textareaSelection","backDelete","copiedText","copiedTextStyle","compositionEnd","_getClipboardData","clipboardData","_getWidthBeforeCursor","widthBeforeCursor","getDownCursorOffset","isRight","selectionProp","_getSelectionForOffset","indexOnOtherLine","_getIndexOnLine","getUpCursorOffset","textBeforeCursor","charWidth","foundMatch","widthOfCharsOnLine","indexOnLine","leftEdge","rightEdge","offsetFromLeftEdge","moveCursorDown","_moveCursorUpOrDown","moveCursorUp","moveCursorWithShift","moveCursorWithoutShift","moveCursorLeft","_moveCursorLeftOrRight","_move","_moveLeft","_moveRight","moveCursorLeftWithoutShift","change","moveCursorLeftWithShift","moveCursorRight","moveCursorRightWithShift","moveCursorRightWithoutShift","changed","removeChars","insertChars","multipleSpacesRegex","_getSVGLeftTopOffsets","textAndBg","_getSVGTextAndBg","textTop","textLeft","_wrapSVGTextAndBg","lineTop","textSpans","textTopOffset","textLeftOffset","_setSVGTextLineBg","_setSVGTextLineText","_createTextCharSpan","styleDecl","shouldUseWhitespace","styleProps","fillStyles","dySpan","_pushTextBgRect","fillColor","_getSVGLineTopOffset","lastHeight","Textbox","minWidth","dynamicMinWidth","__cachedLines","_wordJoiners","splitByGrapheme","_styleMap","_generateStyleMap","textInfo","realLineCount","realLineCharCount","isWrapping","nextOffset","shouldLimit","mapNextLine","_wrapText","desiredWidth","wrapped","_wrapLine","_measureWord","word","charOffset","_line","reservedSpace","words","infix","wordWidth","infixWidth","largestWordWidth","lineJustStarted","additionalSpace","getMinWidth","linesToKeep","scaleSkewStyleHandler","scaleStyleHandler","objectControls","ml","mr","mb","mtr","textBoxControls","base64","ieee754","kMaxLength","TYPED_ARRAY_SUPPORT","RangeError","__proto__","arg","encodingOrOffset","allocUnsafe","TypeError","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","isEncoding","actual","write","fromString","isBuffer","checked","val","assertSize","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","read","buf","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","latin1Write","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","MAX_ARGUMENTS_LENGTH","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","foo","subarray","typedArraySupport","poolSize","_augment","Symbol","species","defineProperty","configurable","allocUnsafeSlow","_isBuffer","compare","list","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","includes","isFinite","_arr","ret","out","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","Infinity","leadSurrogate","toByteArray","stringtrim","base64clean","b64","lens","getLens","validLen","placeHoldersLen","tmp","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","num","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","module","factory","noGlobal","getProto","getPrototypeOf","flat","class2type","hasOwn","fnToString","ObjectFunctionString","support","isFunction","isWindow","preservedScriptAttributes","nonce","noModule","DOMEval","script","head","toType","jQuery","init","isArrayLike","jquery","pushStack","elems","merge","prevObject","each","elem","first","last","even","grep","_elem","odd","name","copyIsArray","isPlainObject","expando","isReady","msg","Ctor","isEmptyObject","globalEval","makeArray","inArray","second","matches","callbackExpect","guid","Sizzle","Expr","getText","isXML","tokenize","compile","select","outermostContext","sortInput","hasDuplicate","setDocument","documentIsHTML","rbuggyQSA","rbuggyMatches","preferredDoc","dirruns","done","classCache","createCache","tokenCache","compilerCache","nonnativeSelectorCache","sortOrder","pushNative","booleans","whitespace","pseudos","rwhitespace","rtrim","rcomma","rcombinators","rdescend","rpseudo","ridentifier","matchExpr","rhtml","rinputs","rheader","rnative","rquickExpr","rsibling","runescape","funescape","escape","nonHex","high","rcssescape","fcssescape","ch","asCodePoint","unloadHandler","inDisabledFieldset","addCombinator","disabled","els","seed","nid","groups","newSelector","newContext","getElementsByClassName","qsa","scope","toSelector","querySelectorAll","qsaError","cacheLength","markFunction","assert","addHandle","attrHandle","siblingCheck","cur","sourceIndex","nextSibling","createInputPseudo","createButtonPseudo","createDisabledPseudo","isDisabled","createPositionalPseudo","argument","matchIndexes","namespaceURI","hasCompare","subWindow","createComment","getElementsByName","attrId","getAttributeNode","tag","input","innerHTML","matchesSelector","webkitMatchesSelector","mozMatchesSelector","oMatchesSelector","msMatchesSelector","disconnectedMatch","compareDocumentPosition","adown","bup","sortDetached","aup","ap","bp","expr","specified","sel","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","relative","preFilter","excess","unquoted","nodeNameSelector","operator","check","what","_argument","simple","forward","ofType","_context","uniqueCache","outerCache","nodeIndex","useCache","lastChild","uniqueID","pseudo","setFilters","matched","unmatched","lang","elemLang","hash","location","activeElement","hasFocus","href","tabIndex","selectedIndex","_matchIndexes","radio","checkbox","file","password","submit","tokens","combinator","base","skip","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","preMap","postMap","preexisting","contexts","multipleContexts","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","parseOnly","soFar","preFilters","cached","setMatchers","elementMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","matcherFromGroupMatchers","token","compiled","_name","defaultValue","unique","isXMLDoc","escapeSelector","until","truncate","is","siblings","rneedsContext","needsContext","rsingleTag","winnow","qualifier","not","rootjQuery","parseHTML","ready","rparentsprev","guaranteedUnique","contents","sibling","has","closest","prevAll","addBack","parents","parentsUntil","nextAll","nextUntil","prevUntil","contentDocument","content","rnothtmlwhite","Identity","Thrower","adoptValue","resolve","reject","noValue","promise","fail","then","Callbacks","_","flag","createOptions","firing","memory","fired","locked","queue","firingIndex","once","stopOnFalse","disable","lock","fireWith","Deferred","func","tuples","state","always","deferred","pipe","fns","newDefer","tuple","returned","progress","notify","onFulfilled","onRejected","onProgress","maxDepth","special","mightThrow","notifyWith","resolveWith","exceptionHook","stackTrace","rejectWith","getStackHook","stateString","when","singleValue","resolveContexts","resolveValues","primary","updateFunc","rerrorNames","stack","message","readyException","readyList","completed","catch","readyWait","wait","doScroll","access","chainable","emptyGet","raw","bulk","rmsPrefix","rdashAlpha","fcamelCase","_all","letter","camelCase","acceptData","owner","Data","uid","hasData","dataPriv","dataUser","rbrace","rmultiDash","dataAttr","getData","removeData","_data","_removeData","dequeue","startLength","hooks","_queueHooks","stop","setter","clearQueue","count","defer","pnum","rcssNum","cssExpand","isAttached","composed","getRootNode","isHiddenWithinTree","css","adjustCSS","valueParts","tween","adjusted","maxIterations","initial","cssNumber","initialInUnit","defaultDisplayMap","getDefaultDisplay","showHide","show","values","hide","rcheckableType","rtagName","rscriptType","createDocumentFragment","checkClone","noCloneChecked","wrapMap","thead","col","td","_default","getAll","setGlobalEval","refElements","tbody","tfoot","colgroup","caption","optgroup","buildFragment","scripts","ignored","wrap","attached","fragment","nodes","htmlPrefilter","createTextNode","rtypenamespace","returnTrue","returnFalse","expectSync","safeActiveElement","types","one","origFn","leverageNative","notAsync","saved","isTrigger","delegateType","trigger","Event","handleObjIn","eventHandle","events","handleObj","handlers","namespaces","origType","elemData","create","handle","triggered","dispatch","bindType","delegateCount","setup","mappedTypes","origCount","teardown","removeEvent","nativeEvent","handlerQueue","fix","delegateTarget","preDispatch","isPropagationStopped","isImmediatePropagationStopped","rnamespace","postDispatch","matchedHandlers","matchedSelectors","addProp","hook","enumerable","originalEvent","writable","load","noBubble","click","beforeunload","isDefaultPrevented","defaultPrevented","relatedTarget","timeStamp","isSimulated","bubbles","cancelable","detail","eventPhase","pageX","pageY","view","charCode","buttons","screenX","screenY","targetTouches","toElement","which","mouseenter","mouseleave","pointerenter","pointerleave","orig","related","rnoInnerhtml","rchecked","rcleanScript","manipulationTarget","disableScript","restoreScript","cloneCopyEvent","dest","udataOld","udataCur","fixInput","domManip","collection","hasScripts","iNoClone","valueIsFunction","html","_evalUrl","keepData","cleanData","dataAndEvents","deepDataAndEvents","srcElements","destElements","inPage","detach","append","prepend","insertBefore","replaceWith","appendTo","prependTo","insertAfter","replaceAll","insert","rnumnonpx","getStyles","opener","old","rboxStyle","curCSS","computed","getPropertyValue","pixelBoxStyles","addGetHookIf","conditionFn","hookFn","computeStyleTests","divStyle","pixelPositionVal","reliableMarginLeftVal","roundPixelMeasures","marginLeft","pixelBoxStylesVal","boxSizingReliableVal","scrollboxSizeVal","offsetWidth","measure","reliableTrDimensionsVal","backgroundClip","clearCloneStyle","boxSizingReliable","pixelPosition","reliableMarginLeft","scrollboxSize","reliableTrDimensions","table","trChild","trStyle","borderBottomWidth","offsetHeight","cssPrefixes","emptyStyle","vendorProps","finalPropName","final","cssProps","capName","vendorPropName","rdisplayswap","rcustomProp","cssShow","cssNormalTransform","letterSpacing","setPositiveNumber","boxModelAdjustment","isBorderBox","computedVal","extra","getWidthOrHeight","valueIsBorderBox","offsetProp","getClientRects","Tween","cssHooks","origName","isCustomProp","setProperty","scrollboxSizeBuggy","margin","border","suffix","expand","expanded","propHooks","run","eased","step","linear","swing","fxNow","inProgress","rfxtypes","rrun","schedule","hidden","interval","createFxNow","genFx","includeWidth","createTween","animation","Animation","tweeners","stopped","prefilters","tweens","specialEasing","originalOptions","gotoEnd","propFilter","timer","anim","tweener","oldfire","propTween","restoreDisplay","isBox","dataShow","unqueued","overflow","overflowX","overflowY","prefilter","speed","opt","speeds","fadeTo","optall","doAnimation","stopQueue","timers","cssFn","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle","slow","fast","timeout","checkOn","optSelected","radioValue","boolHook","removeAttr","nType","attrHooks","bool","attrNames","getter","lowercaseName","rfocusable","rclickable","stripAndCollapse","getClass","classesToArray","removeProp","propFix","tabindex","classes","curValue","clazz","removeClass","toggleClass","stateVal","isValidValue","hasClass","rreturn","valHooks","optionSet","focusin","rfocusMorph","stopPropagationCallback","onlyHandlers","bubbleType","ontype","lastElement","eventPath","parentWindow","simulate","triggerHandler","attaches","rquery","parseXML","parserErrorElem","rbracket","rCRLF","rsubmitterTypes","rsubmittable","buildParams","traditional","valueOrFunction","encodeURIComponent","serialize","serializeArray","r20","rhash","rantiCache","rheaders","rnoContent","rprotocol","transports","allTypes","originAnchor","addToPrefiltersOrTransports","structure","dataTypeExpression","dataType","dataTypes","inspectPrefiltersOrTransports","jqXHR","inspected","seekingTransport","prefilterOrFactory","dataTypeOrTransport","ajaxExtend","flatOptions","ajaxSettings","lastModified","etag","isLocal","protocol","processData","async","contentType","accepts","responseFields","converters","ajaxSetup","settings","ajaxPrefilter","ajaxTransport","ajax","transport","cacheURL","responseHeadersString","responseHeaders","timeoutTimer","urlAnchor","fireGlobals","uncached","callbackContext","globalEventContext","completeDeferred","statusCode","requestHeaders","requestHeadersNames","strAbort","getResponseHeader","getAllResponseHeaders","overrideMimeType","mimeType","statusText","finalText","crossDomain","hasContent","ifModified","headers","beforeSend","success","nativeStatusText","responses","isSuccess","response","modified","ct","finalDataType","firstDataType","ajaxHandleResponses","conv2","conv","dataFilter","throws","ajaxConvert","getJSON","getScript","wrapAll","firstElementChild","wrapInner","htmlIsFunction","unwrap","xhrSuccessStatus","1223","xhrSupported","cors","errorCallback","username","xhrFields","onabort","ontimeout","responseType","responseText","binary","scriptAttrs","charset","scriptCharset","oldCallbacks","rjsonp","jsonp","jsonpCallback","originalSettings","callbackName","overwritten","responseContainer","jsonProp","keepScripts","params","animated","setOffset","curPosition","curLeft","curCSSTop","curTop","curOffset","curCSSLeft","curElem","using","win","pageYOffset","pageXOffset","offsetParent","parentOffset","scrollTo","Height","Width","defaultExtra","funcName","unbind","delegate","undelegate","hover","fnOver","fnOut","proxy","holdReady","hold","parseJSON","isNumeric","_jQuery","_$","$","noConflict"],"mappings":";uGAAA,YAGA,IAg5JUA,EAh5JNC,EAASA,GAAU,CAAEC,QAAS,SASlC,GAPEC,EAAQF,OAASA,EAOK,qBAAbG,UAA8C,qBAAXC,OACxCD,oBAA6C,qBAAjBE,aAA+BA,aAAeC,UAC5EN,EAAOG,SAAWA,SAGlBH,EAAOG,SAAWA,SAASI,eAAeC,mBAAmB,IAE/DR,EAAOI,OAASA,WAEb,CAEH,IACIK,EAAgB,IADRC,EAAQ,IACUC,OAC5BC,mBAAmB,8FACnB,CACEC,SAAU,CACRC,uBAAwB,CAAC,QAE3BC,UAAW,WACVX,OACLJ,EAAOG,SAAWM,EAAcN,SAChCH,EAAOgB,oBAAsBN,EAAQ,IAA0CO,eAC/EjB,EAAOkB,WAAaR,EAAQ,IAAyBS,OACrDnB,EAAOI,OAASK,EAChBW,UAAYpB,EAAOI,OAAOgB,UAonqB5B,SAASC,EAAoBC,EAAIC,GAC/B,IAAIC,EAAWF,EAAGG,OAAQC,EAAeH,EAAcG,aACnDC,EAAMD,EAAaE,WAAW,MAClCD,EAAIE,UAAU,EAAGH,EAAaI,QAC9BH,EAAII,MAAM,GAAI,GAEd,IAAIC,EAAUR,EAASM,OAASJ,EAAaI,OAC7CH,EAAIM,UAAUT,EAAU,EAAGQ,EAASN,EAAaQ,MAAOR,EAAaI,OAAQ,EAAG,EAC9EJ,EAAaQ,MAAOR,EAAaI,QAWrC,SAASK,EAAuBb,EAAIC,GAClC,IAA+CI,EAA5BJ,EAAcG,aAAiCE,WAAW,MACzEQ,EAASb,EAAcc,iBACvBC,EAAUf,EAAcgB,kBACxBC,EAAWJ,EAASE,EAAU,EAG9BG,EAAK,IAAIC,WAAWC,KAAKC,YAAa,EAAGJ,GAEzCK,EAAY,IAAIC,kBAAkBH,KAAKC,YAAa,EAAGJ,GAE3DlB,EAAGyB,WAAW,EAAG,EAAGX,EAAQE,EAAShB,EAAG0B,KAAM1B,EAAG2B,cAAeR,GAChE,IAAIS,EAAU,IAAIC,UAAUN,EAAWT,EAAQE,GAC/CX,EAAIyB,aAAaF,EAAS,EAAG,GA7oqB/BlD,EAAOqD,iBAAmB,iBAAkBrD,EAAOI,QAAU,iBAAkBJ,EAAOG,UACnFH,EAAOI,QAAUJ,EAAOI,OAAOkD,WAAatD,EAAOI,OAAOkD,UAAUC,eAAiB,EAMxFvD,EAAOwD,aAAiC,qBAAXC,GACW,qBAAXrD,OAO7BJ,EAAO0D,kBAAoB,CACzB,UACA,YACA,OAAQ,eAAgB,YACxB,UACA,SAAU,mBAAoB,iBAAkB,oBAChD,kBAAmB,oBACnB,iBAAkB,eAClB,KAAM,cAAe,gBACrB,sBAAuB,aAOzB1D,EAAO2D,IAAM,GACb3D,EAAO4D,MAAQ,kDACf5D,EAAO6D,SAAW,uBAClB7D,EAAO8D,cAAgB,yDACvB9D,EAAO+D,UAAY,iBACnB/D,EAAOgE,UAAY,GACnBhE,EAAOiE,QAAU,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GACjCjE,EAAOkE,MAAQ,6BAQflE,EAAOmE,mBAAqB,QAQ5BnE,EAAOoE,kBAAoB,KAQ3BpE,EAAOqE,kBAAoB,IAK3BrE,EAAOsE,gBAAkB,GASzBtE,EAAOuE,YAAc,KASrBvE,EAAOwE,uBAAwB,EAU/BxE,EAAOyE,mBAAoB,EAM3BzE,EAAO0E,iBAAmB1E,EAAOI,OAAOsE,kBACd1E,EAAOI,OAAOuE,wBACd3E,EAAOI,OAAOwE,qBACd,EAe1B5E,EAAO6E,0BAA4B,EAMnC7E,EAAO8E,mBAAqB,GAU5B9E,EAAO+E,mBAAqB,GAM5B/E,EAAOgF,qBAAsB,EAS7BhF,EAAOiF,qBAAsB,EAE7BjF,EAAOkF,kBAAoB,WACzB,OAAIlF,EAAOyE,mBAAqBzE,EAAOmF,kBAAoBnF,EAAOmF,iBAAiBnF,EAAOuE,cACxFa,QAAQC,IAAI,qBAAuBrF,EAAOsF,gBAClC,IAAItF,EAAOuF,mBAAmB,CAAEC,SAAUxF,EAAOuE,eAElDvE,EAAOyF,sBACN,IAAIzF,EAAOyF,2BADhB,GAMiB,qBAAbtF,UAA8C,qBAAXC,SAE5CA,OAAOJ,OAASA,GAIlB,WAOE,SAAS0F,EAAqBC,EAAWC,GACvC,GAAKjD,KAAKkD,iBAAiBF,GAA3B,CAGA,IAAIG,EAAgBnD,KAAKkD,iBAAiBF,GACtCC,EACFE,EAAcA,EAAcC,QAAQH,KAAY,EAGhD5F,EAAOgG,KAAKC,MAAMC,KAAKJ,GAAe,IAiG1C9F,EAAOmG,WAAa,CAClBC,KAzBF,SAAcT,EAAWU,GACvB,IAAK1D,KAAKkD,iBACR,OAAOlD,KAGT,IAAI2D,EAAoB3D,KAAKkD,iBAAiBF,GAC9C,IAAKW,EACH,OAAO3D,KAGT,IAAK,IAAI4D,EAAI,EAAGC,EAAMF,EAAkBG,OAAQF,EAAIC,EAAKD,IACvDD,EAAkBC,IAAMD,EAAkBC,GAAGG,KAAK/D,KAAM0D,GAAW,IAKrE,OAHA1D,KAAKkD,iBAAiBF,GAAaW,EAAkBK,QAAO,SAASC,GACnE,OAAiB,IAAVA,KAEFjE,MAUPkE,GAtFF,SAAYlB,EAAWC,GAKrB,GAJKjD,KAAKkD,mBACRlD,KAAKkD,iBAAmB,IAGD,IAArBiB,UAAUL,OACZ,IAAK,IAAIM,KAAQpB,EACfhD,KAAKkE,GAAGE,EAAMpB,EAAUoB,SAIrBpE,KAAKkD,iBAAiBF,KACzBhD,KAAKkD,iBAAiBF,GAAa,IAErChD,KAAKkD,iBAAiBF,GAAWqB,KAAKpB,GAExC,OAAOjD,MAuEPsE,IA1DF,SAAatB,EAAWC,GACtB,IAAKjD,KAAKkD,iBACR,OAAOlD,KAIT,GAAyB,IAArBmE,UAAUL,OACZ,IAAKd,KAAahD,KAAKkD,iBACrBH,EAAqBgB,KAAK/D,KAAMgD,QAI/B,GAAyB,IAArBmB,UAAUL,QAAwC,kBAAjBK,UAAU,GAClD,IAAK,IAAIC,KAAQpB,EACfD,EAAqBgB,KAAK/D,KAAMoE,EAAMpB,EAAUoB,SAIlDrB,EAAqBgB,KAAK/D,KAAMgD,EAAWC,GAE7C,OAAOjD,OA9EX,GA4HA3C,EAAOkH,WAAa,CAElBC,SAAU,GAcVC,IAAK,WAEH,GADAzE,KAAKwE,SAASH,KAAKK,MAAM1E,KAAKwE,SAAUL,WACpCnE,KAAK2E,eACP,IAAK,IAAIf,EAAI,EAAGE,EAASK,UAAUL,OAAQF,EAAIE,EAAQF,IACrD5D,KAAK2E,eAAeR,UAAUP,IAIlC,OADA5D,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAeT8E,SAAU,SAAUC,EAAQC,EAAOC,GACjC,IAAIC,EAAUlF,KAAKwE,SASnB,OARIS,EACFC,EAAQF,GAASD,EAGjBG,EAAQC,OAAOH,EAAO,EAAGD,GAE3B/E,KAAK2E,gBAAkB3E,KAAK2E,eAAeI,GAC3C/E,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MASToF,OAAQ,WAIN,IAHA,IACIJ,EADAE,EAAUlF,KAAKwE,SACRa,GAAmB,EAErBzB,EAAI,EAAGE,EAASK,UAAUL,OAAQF,EAAIE,EAAQF,KAItC,KAHfoB,EAAQE,EAAQ9B,QAAQe,UAAUP,OAIhCyB,GAAmB,EACnBH,EAAQC,OAAOH,EAAO,GACtBhF,KAAKsF,kBAAoBtF,KAAKsF,iBAAiBnB,UAAUP,KAK7D,OADA5D,KAAK4E,mBAAqBS,GAAoBrF,KAAK6E,mBAC5C7E,MAeTuF,cAAe,SAASC,EAAUC,GAEhC,IADA,IAAIP,EAAUlF,KAAK0F,aACV9B,EAAI,EAAGC,EAAMqB,EAAQpB,OAAQF,EAAIC,EAAKD,IAC7C4B,EAASzB,KAAK0B,EAASP,EAAQtB,GAAIA,EAAGsB,GAExC,OAAOlF,MAUT0F,WAAY,SAASC,GACnB,MAAoB,qBAATA,EACF3F,KAAKwE,SAASoB,SAEhB5F,KAAKwE,SAASR,QAAO,SAAS6B,GACnC,OAAOA,EAAEF,OAASA,MAStBG,KAAM,SAAUd,GACd,OAAOhF,KAAKwE,SAASQ,IAOvBe,QAAS,WACP,OAAgC,IAAzB/F,KAAKwE,SAASV,QAOvBkC,KAAM,WACJ,OAAOhG,KAAKwE,SAASV,QAQvBmC,SAAU,SAASlB,GACjB,OAAO/E,KAAKwE,SAASpB,QAAQ2B,IAAW,GAO1CmB,WAAY,WACV,OAAOlG,KAAKwE,SAAS2B,QAAO,SAAUC,EAAMC,GAE1C,OADAD,GAAQC,EAAQH,WAAaG,EAAQH,aAAe,IAEnD,KAQP7I,EAAOiJ,cAAgB,CAMrBC,YAAa,SAAS7C,GACpB,IAAK,IAAIU,KAAQV,EACf1D,KAAKwG,IAAIpC,EAAMV,EAAQU,KAS3BqC,cAAe,SAASC,EAAQC,IAC1BD,IAAUA,EAAOE,YAAgBF,aAAkBrJ,EAAOwJ,UAC5D7G,KAAKwG,IAAIG,EAAU,IAAItJ,EAAOwJ,SAASH,KAU3CI,aAAc,SAASJ,EAAQC,EAAUnB,IACnCkB,IAAUA,EAAOK,QAAYL,aAAkBrJ,EAAO2J,QAIxDxB,GAAYA,IAHZxF,KAAKwG,IAAIG,EAAU,IAAItJ,EAAO2J,QAAQN,EAAQlB,KAUlDyB,WAAY,SAASC,GACnB,IAAK,IAAI9C,KAAQ8C,EACflH,KAAKmH,KAAK/C,EAAM8C,EAAI9C,KAWxBoC,IAAK,SAASY,EAAKnD,GAOjB,MANmB,kBAARmD,EACTpH,KAAKiH,WAAWG,GAGhBpH,KAAKmH,KAAKC,EAAKnD,GAEVjE,MAGTmH,KAAM,SAASC,EAAKnD,GAClBjE,KAAKoH,GAAOnD,GASdoD,OAAQ,SAASV,GACf,IAAI1C,EAAQjE,KAAKsH,IAAIX,GAIrB,MAHqB,mBAAV1C,GACTjE,KAAKwG,IAAIG,GAAW1C,GAEfjE,MAQTsH,IAAK,SAASX,GACZ,OAAO3G,KAAK2G,KAKhB,SAAUY,GAER,IAAIC,EAAOC,KAAKD,KACZE,EAAQD,KAAKC,MACbC,EAAMF,KAAKE,IACXC,EAAUH,KAAKI,GAAK,IACpBC,EAAQL,KAAKI,GAAK,EAKtBxK,EAAOgG,KAAO,CASZ0E,IAAK,SAASC,GACZ,GAAc,IAAVA,EAAe,OAAO,EAM1B,OALIA,EAAQ,IAEVA,GAASA,GAEMA,EAAQF,GAEvB,KAAK,EAAG,KAAK,EAAG,OAAO,EACvB,KAAK,EAAG,OAAQ,EAElB,OAAOL,KAAKM,IAAIC,IAUlBC,IAAK,SAASD,GACZ,GAAc,IAAVA,EAAe,OAAO,EAC1B,IAAgCE,EAAO,EAKvC,OAJIF,EAAQ,IAEVE,GAAQ,GAHOF,EAAQF,GAMvB,KAAK,EAAG,OAAOI,EACf,KAAK,EAAG,OAAO,EACf,KAAK,EAAG,OAAQA,EAElB,OAAOT,KAAKQ,IAAID,IAYlBG,gBAAiB,SAAS7E,EAAOW,GAC/B,IAAImE,EAAM9E,EAAMF,QAAQa,GAIxB,OAHa,IAATmE,GACF9E,EAAM6B,OAAOiD,EAAK,GAEb9E,GAWT+E,aAAc,SAASC,EAAKC,GAC1B,OAAOd,KAAKe,MAAMf,KAAKgB,UAAYF,EAAMD,EAAM,IAAMA,GAUvDI,iBAAkB,SAASC,GACzB,OAAOA,EAAUf,GAUnBgB,iBAAkB,SAASC,GACzB,OAAOA,EAAUjB,GAYnBkB,YAAa,SAASC,EAAOC,EAAQH,GACnCE,EAAME,eAAeD,GACrB,IAAIE,EAAI7L,EAAOgG,KAAK8F,aAAaJ,EAAOF,GACxC,OAAO,IAAIxL,EAAO+L,MAAMF,EAAEG,EAAGH,EAAEI,GAAGC,UAAUP,IAW9CG,aAAc,SAASK,EAAQX,GAC7B,IAAIZ,EAAM5K,EAAOgG,KAAK4E,IAAIY,GACtBd,EAAM1K,EAAOgG,KAAK0E,IAAIc,GAG1B,MAAO,CACLQ,EAHOG,EAAOH,EAAItB,EAAMyB,EAAOF,EAAIrB,EAInCqB,EAHOE,EAAOH,EAAIpB,EAAMuB,EAAOF,EAAIvB,IAgBvC0B,eAAgB,SAASC,EAAGC,EAAGC,GAC7B,OAAIA,EACK,IAAIvM,EAAO+L,MAChBO,EAAE,GAAKD,EAAEL,EAAIM,EAAE,GAAKD,EAAEJ,EACtBK,EAAE,GAAKD,EAAEL,EAAIM,EAAE,GAAKD,EAAEJ,GAGnB,IAAIjM,EAAO+L,MAChBO,EAAE,GAAKD,EAAEL,EAAIM,EAAE,GAAKD,EAAEJ,EAAIK,EAAE,GAC5BA,EAAE,GAAKD,EAAEL,EAAIM,EAAE,GAAKD,EAAEJ,EAAIK,EAAE,KAUhCE,0BAA2B,SAASC,EAAQC,GAC1C,GAAIA,EACF,IAAK,IAAInG,EAAI,EAAGA,EAAIkG,EAAOhG,OAAQF,IACjCkG,EAAOlG,GAAKvG,EAAOgG,KAAKoG,eAAeK,EAAOlG,GAAImG,GAGtD,IAAIC,EAAU,CAACF,EAAO,GAAGT,EAAGS,EAAO,GAAGT,EAAGS,EAAO,GAAGT,EAAGS,EAAO,GAAGT,GAC5DY,EAAO5M,EAAOgG,KAAKC,MAAMgF,IAAI0B,GAE7BzK,EADOlC,EAAOgG,KAAKC,MAAMiF,IAAIyB,GACdC,EACfC,EAAU,CAACJ,EAAO,GAAGR,EAAGQ,EAAO,GAAGR,EAAGQ,EAAO,GAAGR,EAAGQ,EAAO,GAAGR,GAC5Da,EAAO9M,EAAOgG,KAAKC,MAAMgF,IAAI4B,GAIjC,MAAO,CACLE,KAAMH,EACNI,IAAKF,EACL5K,MAAOA,EACPJ,OAPS9B,EAAOgG,KAAKC,MAAMiF,IAAI2B,GACbC,IAiBtBG,gBAAiB,SAASX,GACxB,IAAIY,EAAI,GAAKZ,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAChCa,EAAI,CAACD,EAAIZ,EAAE,IAAKY,EAAIZ,EAAE,IAAKY,EAAIZ,EAAE,GAAIY,EAAIZ,EAAE,IAC3C9D,EAAIxI,EAAOgG,KAAKoG,eAAe,CAAEJ,EAAGM,EAAE,GAAIL,EAAGK,EAAE,IAAMa,GAAG,GAG5D,OAFAA,EAAE,IAAM3E,EAAEwD,EACVmB,EAAE,IAAM3E,EAAEyD,EACHkB,GAWTC,QAAS,SAASC,EAAQC,GACxB,OAAOC,WAAWC,OAAOH,GAAQD,QAAQE,KAU3CG,UAAW,SAAS7G,EAAO8G,GACzB,IAAIC,EAAO,WAAWC,KAAKhH,GACvByG,EAASE,WAAW3G,GAIxB,OAHK8G,IACHA,EAAW1N,EAAO6N,KAAKC,uBAEjBH,EAAK,IACX,IAAK,KACH,OAAON,EAASrN,EAAO2D,IAAM,KAE/B,IAAK,KACH,OAAO0J,EAASrN,EAAO2D,IAAM,KAE/B,IAAK,KACH,OAAO0J,EAASrN,EAAO2D,IAEzB,IAAK,KACH,OAAO0J,EAASrN,EAAO2D,IAAM,GAE/B,IAAK,KACH,OAAO0J,EAASrN,EAAO2D,IAAM,GAAK,GAEpC,IAAK,KACH,OAAO0J,EAASK,EAElB,QACE,OAAOL,IAUbU,cAAe,WACb,OAAO,GAUTC,SAAU,SAAS1F,EAAM2F,GAGvB,OADA3F,EAAOtI,EAAOgG,KAAKkI,OAAOC,SAAS7F,EAAK8F,OAAO,GAAGC,cAAgB/F,EAAKgG,MAAM,IACtEtO,EAAOgG,KAAKuI,iBAAiBN,GAAW3F,IASjDkG,iBAAkB,SAASlG,GACzB,IAAImG,EAAa,CACf,sBACA,QACA,KACA,SAEF,OAAQnG,GACN,IAAK,iBACHmG,EAAaA,EAAWlG,OAAO,CAAC,KAAM,KAAM,KAAM,KAAM,gBAAiB,sBACzE,MACF,IAAK,iBACHkG,EAAaA,EAAWlG,OAAO,CAAC,gBAAiB,oBAAqB,KAAM,KAAM,IAAK,KAAM,KAAM,OACnG,MACF,IAAK,OACHkG,EAAaA,EAAWlG,OAAO,CAAC,SAAU,aAAc,iBAG5D,OAAOkG,GASTF,iBAAkB,SAASN,GACzB,IAAKA,EACH,OAAOjO,EAGT,IACwBuG,EADpBmI,EAAQT,EAAUU,MAAM,KACxBnI,EAAMkI,EAAMjI,OACZoD,EAAMK,GAAUlK,EAAOI,OAE3B,IAAKmG,EAAI,EAAGA,EAAIC,IAAOD,EACrBsD,EAAMA,EAAI6E,EAAMnI,IAGlB,OAAOsD,GAWT+E,UAAW,SAASC,EAAK1G,EAAUC,EAAS0G,GAC1C,GAAKD,EAAL,CAKA,IAAIE,EAAM/O,EAAOgG,KAAKgJ,cAGlBC,EAAiB,WACnB9G,GAAYA,EAASzB,KAAK0B,EAAS2G,GAAK,GACxCA,EAAMA,EAAIG,OAASH,EAAII,QAAU,MAGnCJ,EAAIG,OAASD,EAEbF,EAAII,QAAU,WACZnP,EAAOqF,IAAI,iBAAmB0J,EAAIK,KAClCjH,GAAYA,EAASzB,KAAK0B,EAAS,MAAM,GACzC2G,EAAMA,EAAIG,OAASH,EAAII,QAAU,MAQP,IAAxBN,EAAI9I,QAAQ,cACEsJ,IAAhBP,GACgB,OAAhBA,IACAC,EAAID,YAAcA,GAMQ,mBAAxBD,EAAIS,UAAU,EAAE,MAClBP,EAAIG,OAAS,KACblP,EAAOgG,KAAKuJ,eAAeR,EAAKE,IAGlCF,EAAIK,IAAMP,OAvCR1G,GAAYA,EAASzB,KAAK0B,EAASyG,IAiDvCU,eAAgB,SAASR,EAAKE,GAC5B,IAAIO,EAAMxP,EAAOG,SAASsP,cAAc,OACxCD,EAAIE,MAAMxN,MAAQsN,EAAIE,MAAM5N,OAAS,MACrC0N,EAAIE,MAAM3C,KAAOyC,EAAIE,MAAM1C,IAAM,QACjCwC,EAAIE,MAAMC,SAAW,WACrBH,EAAII,YAAYb,GAChB/O,EAAOG,SAAS0P,cAAc,QAAQD,YAAYJ,GAMlDT,EAAIG,OAAS,WACXD,IACAO,EAAIM,WAAWC,YAAYP,GAC3BA,EAAM,OAcVQ,eAAgB,SAASnI,EAASM,EAAU8F,EAAWgC,GAGrD,IAAIC,EAAmB,GACnBC,EAAmB,EACnBC,GAJJvI,EAAUA,GAAW,IAISpB,OAE9B,SAAS4J,MACDF,IAAqBC,GACzBjI,GAAYA,EAAS+H,EAAiBvJ,QAAO,SAASkD,GAEpD,OAAOA,MAKRuG,EAKLvI,EAAQyI,SAAQ,SAAU9H,EAAGb,GAEtBa,GAAMA,EAAEF,KAIDtI,EAAOgG,KAAKgI,SAASxF,EAAEF,KAAM2F,GACnCsC,WAAW/H,GAAG,SAAUqB,EAAK2G,GACjCA,IAAUN,EAAiBvI,GAASkC,GACpCoG,GAAWA,EAAQzH,EAAGqB,EAAK2G,GAC3BH,OAPAA,OAPFlI,GAAYA,EAAS+H,IA2BzBO,gBAAiB,SAASC,EAAUvI,GAGlC,SAASkI,MACDM,IAAsBC,GAC1BzI,GAAYA,EAAS0I,GAIzB,IAAIA,EAAoB,GACpBF,EAAoB,EACpBC,GAVJF,EAAWA,GAAY,IAUIjK,OAEtBmK,EAKLF,EAASJ,SAAQ,SAAUjE,EAAG1E,GACxB0E,GAAKA,EAAE3C,OACT,IAAI1J,EAAO2J,QAAQ0C,GAAG,SAASyE,GAC7BD,EAAkBlJ,GAASmJ,EAC3BT,QAIFQ,EAAkBlJ,GAAS0E,EAC3BgE,QAbFlI,GAAYA,EAAS0I,IA2BzBE,iBAAkB,SAASC,EAAU3K,EAAS4K,GAC5C,IAAIvJ,EACJ,OAAIsJ,GAAgC,IAApBA,EAASvK,OAChBuK,EAAS,IAEd3K,IACEA,EAAQnE,OAASmE,EAAQvE,OAC3BuE,EAAQ6K,YAAc,CACpBlF,EAAG3F,EAAQnE,MAAQ,EACnB+J,EAAG5F,EAAQvE,OAAS,WAIfuE,EAAQnE,aACRmE,EAAQvE,SAGnB4F,EAAS,IAAI1H,EAAOmR,MAAMH,EAAU3K,GAChB,qBAAT4K,IACTvJ,EAAO0J,WAAaH,GAEfvJ,IAWT2J,uBAAwB,SAAS3H,EAAQ4H,EAAaC,GACpD,GAAIA,GAA6D,mBAA/CC,OAAOC,UAAUC,SAAShL,KAAK6K,GAC/C,IAAK,IAAIhL,EAAI,EAAGC,EAAM+K,EAAW9K,OAAQF,EAAIC,EAAKD,IAC5CgL,EAAWhL,KAAMmD,IACnB4H,EAAYC,EAAWhL,IAAMmD,EAAO6H,EAAWhL,MAmBvDoL,eAAgB,SAAShQ,EAAKqK,EAAGC,EAAG2F,EAAIC,EAAIC,GAC1C,IAAIC,EAAKH,EAAK5F,EACVgG,EAAKH,EAAK5F,EACVzF,EAAM2D,EAAK4H,EAAKA,EAAKC,EAAKA,GAC1BC,EAAM5H,EAAM2H,EAAID,GAChBG,EAAKJ,EAAGrL,OACR0L,EAAK,EACLC,GAAO,EAQX,IANAzQ,EAAI0Q,OACJ1Q,EAAIE,UAAUmK,EAAGC,GACjBtK,EAAI2Q,OAAO,EAAG,GACd3Q,EAAI4Q,OAAON,GAEXjG,EAAI,EACGxF,EAAMwF,IACXA,GAAK8F,EAAGK,IAAOD,IACP1L,IACNwF,EAAIxF,GAEN7E,EAAIyQ,EAAO,SAAW,UAAUpG,EAAG,GACnCoG,GAAQA,EAGVzQ,EAAI6Q,WASNC,oBAAqB,WACnB,OAAOzS,EAAOG,SAASsP,cAAc,WAUvCiD,kBAAmB,SAASjR,GAC1B,IAAIkR,EAAY3S,EAAOgG,KAAKyM,sBAI5B,OAHAE,EAAUzQ,MAAQT,EAAOS,MACzByQ,EAAU7Q,OAASL,EAAOK,OAC1B6Q,EAAU/Q,WAAW,MAAMK,UAAUR,EAAQ,EAAG,GACzCkR,GAYTC,UAAW,SAASC,EAAUC,EAAQC,GACpC,OAAOF,EAASD,UAAU,SAAWE,EAAQC,IAS/C/D,YAAa,WACX,OAAOhP,EAAOG,SAASsP,cAAc,QAYvCuD,0BAA2B,SAAS9F,EAAG+F,EAAGC,GAExC,MAAO,CACLhG,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAAK+F,EAAE,GACvB/F,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAAK+F,EAAE,GACvB/F,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAAK+F,EAAE,GACvB/F,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAAK+F,EAAE,GACvBC,EAAQ,EAAIhG,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAC1CgG,EAAQ,EAAIhG,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,GAAK+F,EAAE,GAAK/F,EAAE,KAW9CiG,YAAa,SAASjG,GACpB,IAAIvC,EAAQN,EAAM6C,EAAE,GAAIA,EAAE,IACtBkG,EAAQ9I,EAAI4C,EAAE,GAAI,GAAK5C,EAAI4C,EAAE,GAAI,GACjCmG,EAASlJ,EAAKiJ,GACdE,GAAUpG,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMmG,EACvCE,EAAQlJ,EAAM6C,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAG,GAAIkG,GAC9C,MAAO,CACLzI,MAAOA,EAAQJ,EACf8I,OAAQA,EACRC,OAAQA,EACRC,MAAOA,EAAQhJ,EACfiJ,MAAO,EACPC,WAAYvG,EAAE,GACdwG,WAAYxG,EAAE,KAclByG,iBAAkB,SAAStN,GACzB,IAAKA,EAAQsE,MACX,OAAO3K,EAAOiE,QAAQsE,SAExB,IAAIqL,EAAQ5T,EAAOgG,KAAKqF,iBAAiBhF,EAAQsE,OAC7CD,EAAM1K,EAAOgG,KAAK0E,IAAIkJ,GACtBhJ,EAAM5K,EAAOgG,KAAK4E,IAAIgJ,GAC1B,MAAO,CAAClJ,EAAKE,GAAMA,EAAKF,EAAK,EAAG,IAoBlCmJ,qBAAsB,SAASxN,GAC7B,IAAIgN,EAAmC,qBAAnBhN,EAAQgN,OAAyB,EAAIhN,EAAQgN,OAC7DC,EAAmC,qBAAnBjN,EAAQiN,OAAyB,EAAIjN,EAAQiN,OAC7DQ,EAAc,CACZzN,EAAQ0N,OAASV,EAASA,EAC1B,EACA,EACAhN,EAAQ2N,OAASV,EAASA,EAC1B,EACA,GACFW,EAAWjU,EAAOgG,KAAKgN,0BACvB3H,EAAmBrL,EAAOgG,KAAKqF,iBAanC,OAZIhF,EAAQkN,QACVO,EAAcG,EACZH,EACA,CAAC,EAAG,EAAG1J,KAAK8J,IAAI7I,EAAiBhF,EAAQkN,QAAS,IAClD,IAEAlN,EAAQmN,QACVM,EAAcG,EACZH,EACA,CAAC,EAAG1J,KAAK8J,IAAI7I,EAAiBhF,EAAQmN,QAAS,EAAG,IAClD,IAEGM,GAqBTK,cAAe,SAAS9N,GACtB,IAAI+N,EAAS,CAAC,EAAG,EAAG,EAAG,EAAG/N,EAAQoN,YAAc,EAAGpN,EAAQqN,YAAc,GACrEO,EAAWjU,EAAOgG,KAAKgN,0BAQ3B,OAPI3M,EAAQsE,QACVyJ,EAASH,EAASG,EAAQpU,EAAOgG,KAAK2N,iBAAiBtN,MAElC,IAAnBA,EAAQgN,QAAmC,IAAnBhN,EAAQiN,QAChCjN,EAAQkN,OAASlN,EAAQmN,OAASnN,EAAQ0N,OAAS1N,EAAQ2N,SAC7DI,EAASH,EAASG,EAAQpU,EAAOgG,KAAK6N,qBAAqBxN,KAEtD+N,GASTC,qBAAsB,SAAUC,GAC9BA,EAAOjB,OAAS,EAChBiB,EAAOhB,OAAS,EAChBgB,EAAOf,MAAQ,EACfe,EAAOd,MAAQ,EACfc,EAAOP,OAAQ,EACfO,EAAON,OAAQ,EACfM,EAAO/B,OAAO,IAUhBgC,oBAAqB,SAAUD,GAC7B,MAAO,CACLjB,OAAQiB,EAAOjB,OACfC,OAAQgB,EAAOhB,OACfC,MAAOe,EAAOf,MACdC,MAAOc,EAAOd,MACd7I,MAAO2J,EAAO3J,MACdoC,KAAMuH,EAAOvH,KACbgH,MAAOO,EAAOP,MACdC,MAAOM,EAAON,MACdhH,IAAKsH,EAAOtH,MAYhBwH,cAAe,SAAS7S,EAAKqK,EAAGC,EAAGwI,GAI7BA,EAAY,IACVzI,EAAIyI,EACNzI,GAAKyI,EAGLzI,EAAI,EAEFC,EAAIwI,EACNxI,GAAKwI,EAGLxI,EAAI,GAIR,IAA2B1F,EAAvBmO,GAAiB,EACjBC,EAAYhT,EAAIiT,aAAa5I,EAAGC,EAAgB,EAAZwI,GAAkB,EAAgB,EAAZA,GAAkB,GAC5EI,EAAIF,EAAUG,KAAKrO,OAGvB,IAAKF,EAAI,EAAGA,EAAIsO,IAGS,KADvBH,EADOC,EAAUG,KAAKvO,IACG,GAFRA,GAAK,GAUxB,OAFAoO,EAAY,KAELD,GAQTK,kCAAmC,SAASC,GAC1C,IAC6CC,EADzCC,EAAc,OACdC,EAAmBH,EAAUrG,MAAM,KAevC,OAbIwG,GAAoBA,EAAiB1O,SAEnB,UADpByO,EAAcC,EAAiBC,QACe,UAAhBF,GAC5BD,EAAQC,EACRA,EAAc,QAEPC,EAAiB1O,SACxBwO,EAAQE,EAAiBC,QAMtB,CACLF,YAAaA,EACbG,OAJiB,SAAVJ,EAAmBA,EAAM3G,MAAM,EAAG,GAAK,OAK9CgH,OAJiB,SAAVL,EAAmBA,EAAM3G,MAAM,EAAG,GAAK,SAoBlDiH,qBAAsB,SAASC,IAC7BA,GAAcA,GAAc,IAAIC,eAIvBzV,EAAOsE,gBAAgBkR,WACvBxV,EAAOsE,gBAAgBkR,GAH9BxV,EAAOsE,gBAAkB,IAgB7BoR,gBAAiB,SAASC,EAAIC,GAC5B,IAAIC,EAAazL,KAAKD,KAAKyL,EAAcD,GACrCG,EAAiB1L,KAAKe,MAAMyK,EAAcC,GAC9C,MAAO,CAAE7J,EAAG5B,KAAKe,MAAM0K,GAAa5J,EAAG6J,IAGzCC,SAAU,SAAS9K,EAAKrE,EAAOsE,GAC7B,OAAOd,KAAKc,IAAID,EAAKb,KAAKa,IAAIrE,EAAOsE,KAgBvC8K,eAAgB,SAAStM,EAAQ4H,GAC/B,OAAOlH,KAAKa,IAAIqG,EAAYpP,MAAQwH,EAAOxH,MAAOoP,EAAYxP,OAAS4H,EAAO5H,SAgBhFmU,iBAAkB,SAASvM,EAAQ4H,GACjC,OAAOlH,KAAKc,IAAIoG,EAAYpP,MAAQwH,EAAOxH,MAAOoP,EAAYxP,OAAS4H,EAAO5H,SAUhFoU,YAAa,SAASxJ,GACpB,MAAO,UAAYA,EAAUyJ,KAAI,SAASvP,GACxC,OAAO5G,EAAOgG,KAAKoH,QAAQxG,EAAO5G,EAAOwR,OAAO4E,wBAC/CC,KAAK,KAAO,KAejBC,0BAA2B,SAAS5O,EAAQgF,GAC1C,IAAI6J,EAAWvW,EAAOgG,KAAKiH,gBAAgBP,GACvC8J,EAAiBxW,EAAOgG,KAAKgN,0BAA0BuD,EAAU7O,EAAO+O,iBAC5EzW,EAAOgG,KAAK0Q,uBAAuBhP,EAAQ8O,IAY7CG,qBAAsB,SAASjP,EAAQgF,GACrC1M,EAAOgG,KAAK0Q,uBACVhP,EACA1H,EAAOgG,KAAKgN,0BAA0BtG,EAAWhF,EAAO+O,mBAU5DC,uBAAwB,SAAShP,EAAQgF,GACvC,IAAIrG,EAAUrG,EAAOgG,KAAKmN,YAAYzG,GAClCkK,EAAS,IAAI5W,EAAO+L,MAAM1F,EAAQoN,WAAYpN,EAAQqN,YAC1DhM,EAAOqM,OAAQ,EACfrM,EAAOsM,OAAQ,EACftM,EAAOyB,IAAI,SAAU9C,EAAQgN,QAC7B3L,EAAOyB,IAAI,SAAU9C,EAAQiN,QAC7B5L,EAAO6L,MAAQlN,EAAQkN,MACvB7L,EAAO8L,MAAQnN,EAAQmN,MACvB9L,EAAOiD,MAAQtE,EAAQsE,MACvBjD,EAAOmP,oBAAoBD,EAAQ,SAAU,WAmB/CE,mBAAoB,SAAS5U,EAAOJ,EAAQuE,GAC1C,IAAI0Q,EAAO7U,EAAQ,EAAG8U,EAAOlV,EAAS,EAClC2K,EAAS,CACP,CACET,GAAI+K,EACJ9K,GAAI+K,GAEN,CACEhL,EAAG+K,EACH9K,GAAI+K,GAEN,CACEhL,GAAI+K,EACJ9K,EAAG+K,GAEL,CACEhL,EAAG+K,EACH9K,EAAG+K,IAEPC,EAAkBjX,EAAOgG,KAAK6N,qBAAqBxN,GACnD6Q,EAAOlX,EAAOgG,KAAKwG,0BAA0BC,EAAQwK,GACzD,MAAO,CACLjL,EAAGkL,EAAKhV,MACR+J,EAAGiL,EAAKpV,UAviChB,CA2iCoC5B,GAGpC,WACE,IAAIiX,EAAQC,MAAM3F,UAAU4E,KACxBgB,EAAiB,CACfC,EAAG,EACHzC,EAAG,EACH0C,EAAG,EACH1L,EAAG,EACH2L,EAAG,EACHC,EAAG,EACHC,EAAG,EACHpL,EAAG,EACHY,EAAG,GAELyK,EAAmB,CACjBL,EAAG,IACHM,EAAG,KAET,SAASC,EAAgBC,EAAKC,EAAKC,EAAOC,EAAOC,EAAIC,EAAIC,EAAKC,EAAKC,EAAIC,EAAOC,GAC5E,IAAIC,EAASzY,EAAOgG,KAAK0E,IAAIoN,GACzBY,EAAS1Y,EAAOgG,KAAK4E,IAAIkN,GACzBa,EAAS3Y,EAAOgG,KAAK0E,IAAIqN,GACzBa,EAAS5Y,EAAOgG,KAAK4E,IAAImN,GACzBc,EAAMb,EAAQE,EAAKS,EAASV,EAAQE,EAAKS,EAASR,EAClDU,EAAMb,EAAQC,EAAKS,EAASX,EAAQG,EAAKS,EAASP,EAMtD,MAAO,CAAC,IALGE,EAAQD,IAAQN,EAAQE,EAAKQ,EAAST,EAAQE,EAAKM,GACnDD,EAAQF,IAAQL,EAAQC,EAAKQ,EAASV,EAAQG,EAAKM,GACnDI,EAAMP,GAAON,EAAQE,EAAKU,EAASX,EAAQE,EAAKQ,GAChDG,EAAMR,GAAOL,EAAQC,EAAKU,EAASZ,EAAQG,EAAKQ,GAKzDE,EAAKC,GAQT,SAASC,EAAcF,EAAKC,EAAKZ,EAAIC,EAAIa,EAAOC,EAAOC,GACrD,IAAI1O,EAAKJ,KAAKI,GAAI2O,EAAKD,EAAU1O,EAAK,IAClCyN,EAAQjY,EAAOgG,KAAK4E,IAAIuO,GACxBnB,EAAQhY,EAAOgG,KAAK0E,IAAIyO,GACxBZ,EAAQ,EAAGC,EAAQ,EAKnBY,GAAMpB,EAAQa,EAAM,GAAMZ,EAAQa,EAAM,GACxCO,GAAMrB,EAAQc,EAAM,GAAMb,EAAQY,EAAM,GACxCS,GALJpB,EAAK9N,KAAKmP,IAAIrB,IAKCA,EAAIsB,GAJnBrB,EAAK/N,KAAKmP,IAAIpB,IAIgBA,EAAIsB,EAAMJ,EAAKA,EAAIK,EAAMN,EAAKA,EACxDO,EAAKL,EAAME,EAAMF,EAAMG,EAAMD,EAAME,EACnCE,EAAO,EAEX,GAAID,EAAK,EAAG,CACV,IAAIlC,EAAIrN,KAAKD,KAAK,EAAIwP,GAAML,EAAME,IAClCtB,GAAMT,EACNU,GAAMV,OAGNmC,GAAQZ,IAAUC,GAAS,EAAM,GACzB7O,KAAKD,KAAMwP,GAAML,EAAMG,EAAMD,EAAME,IAG7C,IAAIG,EAAKD,EAAO1B,EAAKmB,EAAKlB,EACtB2B,GAAMF,EAAOzB,EAAKiB,EAAKlB,EACvBE,EAAMJ,EAAQ6B,EAAK5B,EAAQ6B,EAAW,GAANjB,EAChCR,EAAMJ,EAAQ4B,EAAK7B,EAAQ8B,EAAW,GAANhB,EAChCiB,EAASC,EAAgB,EAAG,GAAIZ,EAAKS,GAAM3B,GAAKmB,EAAKS,GAAM3B,GAC3D8B,EAASD,GAAiBZ,EAAKS,GAAM3B,GAAKmB,EAAKS,GAAM3B,IAAMiB,EAAKS,GAAM3B,IAAMmB,EAAKS,GAAM3B,GAE7E,IAAVc,GAAegB,EAAS,EAC1BA,GAAU,EAAIzP,EAEG,IAAVyO,GAAegB,EAAS,IAC/BA,GAAU,EAAIzP,GAShB,IALA,IAAI0P,EAAW9P,KAAK+P,KAAK/P,KAAKmP,IAAIU,EAASzP,EAAK,IAC5C4P,EAAS,GAAIC,EAASJ,EAASC,EAC/B5B,EAAK,EAAI,EAAIlO,KAAKQ,IAAIyP,EAAS,GAAKjQ,KAAKQ,IAAIyP,EAAS,GAAKjQ,KAAKQ,IAAIyP,EAAS,GAC7EtC,EAAMgC,EAASM,EAEV9T,EAAI,EAAGA,EAAI2T,EAAU3T,IAC5B6T,EAAO7T,GAAKsR,EAAgBkC,EAAQhC,EAAKC,EAAOC,EAAOC,EAAIC,EAAIC,EAAKC,EAAKC,EAAIC,EAAOC,GACpFD,EAAQ6B,EAAO7T,GAAG,GAClBiS,EAAQ4B,EAAO7T,GAAG,GAClBwT,EAAShC,EACTA,GAAOsC,EAET,OAAOD,EAMT,SAASJ,EAAgBM,EAAIC,EAAIC,EAAIC,GACnC,IAAIC,EAAKtQ,KAAKC,MAAMkQ,EAAID,GACpBK,EAAKvQ,KAAKC,MAAMoQ,EAAID,GACxB,OAAIG,GAAMD,EACDC,EAAKD,EAGL,EAAItQ,KAAKI,IAAMkQ,EAAKC,GAiB/B,SAASC,EAAiBC,EAAIC,EAAIC,EAAIC,EAAIpJ,EAAIC,EAAIoJ,EAAIC,GACpD,IAAIC,EACJ,GAAInb,EAAOgF,sBACTmW,EAAahE,EAAMzQ,KAAKI,WACpB9G,EAAO+E,mBAAmBoW,IAC5B,OAAOnb,EAAO+E,mBAAmBoW,GAIrC,IAIIjO,EAAG+F,EAAGuE,EAAGlL,EAAG8O,EAAIC,EAAIC,EAAMC,EAJ1BpR,EAAOC,KAAKD,KACZc,EAAMb,KAAKa,IAAKC,EAAMd,KAAKc,IAC3BqO,EAAMnP,KAAKmP,IAAKiC,EAAU,GAC1BC,EAAS,CAAC,GAAI,IAGlBxI,EAAI,EAAI4H,EAAK,GAAKE,EAAK,EAAInJ,EAC3B1E,GAAK,EAAI2N,EAAK,EAAIE,EAAK,EAAInJ,EAAK,EAAIqJ,EACpCzD,EAAI,EAAIuD,EAAK,EAAIF,EAEjB,IAAK,IAAItU,EAAI,EAAGA,EAAI,IAAKA,EAOvB,GANIA,EAAI,IACN0M,EAAI,EAAI6H,EAAK,GAAKE,EAAK,EAAInJ,EAC3B3E,GAAK,EAAI4N,EAAK,EAAIE,EAAK,EAAInJ,EAAK,EAAIqJ,EACpC1D,EAAI,EAAIwD,EAAK,EAAIF,GAGfvB,EAAIrM,GAAK,MAAb,CACE,GAAIqM,EAAItG,GAAK,MACX,SAGE,GADJ3G,GAAKkL,EAAIvE,IACI3G,EAAI,GACfkP,EAAQxU,KAAKsF,QAIjBgP,EAAOrI,EAAIA,EAAI,EAAIuE,EAAItK,GACZ,IAKP,GADJkO,IAAOnI,GADPsI,EAAWpR,EAAKmR,MACQ,EAAIpO,KACdkO,EAAK,GACjBI,EAAQxU,KAAKoU,GAGX,GADJC,IAAOpI,EAAIsI,IAAa,EAAIrO,KACdmO,EAAK,GACjBG,EAAQxU,KAAKqU,IAKjB,IADA,IAAIrP,EAAGC,EAAiCyP,EAA9BC,EAAIH,EAAQ/U,OAAQmV,EAAOD,EAC9BA,KAGL3P,GADA0P,EAAK,GADLpP,EAAIkP,EAAQG,KAEFD,EAAKA,EAAKb,EAAO,EAAIa,EAAKA,EAAKpP,EAAIyO,EAAO,EAAIW,EAAKpP,EAAIA,EAAIsF,EAAOtF,EAAIA,EAAIA,EAAI2O,EACxFQ,EAAO,GAAGE,GAAK3P,EAEfC,EAAKyP,EAAKA,EAAKA,EAAKZ,EAAO,EAAIY,EAAKA,EAAKpP,EAAI0O,EAAO,EAAIU,EAAKpP,EAAIA,EAAIuF,EAAOvF,EAAIA,EAAIA,EAAI4O,EACxFO,EAAO,GAAGE,GAAK1P,EAGjBwP,EAAO,GAAGG,GAAQf,EAClBY,EAAO,GAAGG,GAAQd,EAClBW,EAAO,GAAGG,EAAO,GAAKX,EACtBQ,EAAO,GAAGG,EAAO,GAAKV,EACtB,IAAId,EAAS,CACX,CACEpO,EAAGf,EAAI5D,MAAM,KAAMoU,EAAO,IAC1BxP,EAAGhB,EAAI5D,MAAM,KAAMoU,EAAO,KAE5B,CACEzP,EAAGd,EAAI7D,MAAM,KAAMoU,EAAO,IAC1BxP,EAAGf,EAAI7D,MAAM,KAAMoU,EAAO,MAM9B,OAHIzb,EAAOgF,sBACThF,EAAO+E,mBAAmBoW,GAAcf,GAEnCA,EAST,SAASyB,EAAiBC,EAAIC,EAAIC,GAUhC,IATA,IAAI9D,EAAK8D,EAAO,GACZ7D,EAAK6D,EAAO,GACZ/J,EAAM+J,EAAO,GACbhD,EAAQgD,EAAO,GACf/C,EAAQ+C,EAAO,GAGfC,EAAWlD,EAFNiD,EAAO,GAEkBF,EADzBE,EAAO,GAC2BD,EAAI7D,EAAIC,EAAIa,EAAOC,EAAOhH,GAE5D1L,EAAI,EAAGC,EAAMyV,EAASxV,OAAQF,EAAIC,EAAKD,IAC9C0V,EAAS1V,GAAG,IAAMuV,EAClBG,EAAS1V,GAAG,IAAMwV,EAClBE,EAAS1V,GAAG,IAAMuV,EAClBG,EAAS1V,GAAG,IAAMwV,EAClBE,EAAS1V,GAAG,IAAMuV,EAClBG,EAAS1V,GAAG,IAAMwV,EAEpB,OAAOE,EAwLT,SAASC,EAAenB,EAAIC,EAAIpJ,EAAIC,GAClC,OAAOzH,KAAKD,MAAMyH,EAAKmJ,IAAOnJ,EAAKmJ,IAAOlJ,EAAKmJ,IAAOnJ,EAAKmJ,IAkB7D,SAASmB,EAA8BC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GACxE,OAAO,SAASC,GACd,IAfStQ,EAeLuQ,GAfKvQ,EAeIsQ,GAdJtQ,EAAIA,EAcMwQ,EAZvB,SAAaxQ,GACX,OAAO,EAAIA,EAAIA,GAAK,EAAIA,GAWEyQ,CAAIH,GAAMI,EATtC,SAAa1Q,GACX,OAAO,EAAIA,GAAK,EAAIA,IAAM,EAAIA,GAQW2Q,CAAIL,GAAMM,EANrD,SAAa5Q,GACX,OAAQ,EAAIA,IAAM,EAAIA,IAAM,EAAIA,GAKwB6Q,CAAIP,GAC1D,MAAO,CACL5Q,EAAG0Q,EAAMG,EAAKL,EAAMM,EAAKR,EAAMU,EAAKZ,EAAMc,EAC1CjR,EAAG0Q,EAAME,EAAKJ,EAAMK,EAAKP,EAAMS,EAAKX,EAAMa,IAKhD,SAASE,EAAwBhB,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAClE,OAAO,SAAUC,GACf,IAAIS,EAAO,EAAIT,EACXU,EAAY,EAAID,EAAOA,GAAQf,EAAMF,GAAS,EAAIiB,EAAOT,GAAOJ,EAAMF,GACrE,EAAIM,EAAMA,GAAOF,EAAMF,GACxBe,EAAY,EAAIF,EAAOA,GAAQd,EAAMF,GAAS,EAAIgB,EAAOT,GAAOH,EAAMF,GACrE,EAAIK,EAAMA,GAAOD,EAAMF,GAC5B,OAAOrS,KAAKC,MAAMkT,EAAUD,IAgBhC,SAASE,EAAkCpB,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAClE,OAAO,SAASG,GACd,IAdStQ,EAcLuQ,GAdKvQ,EAcIsQ,GAbJtQ,EAaUwQ,EAVvB,SAAaxQ,GACX,OAAO,EAAIA,GAAK,EAAIA,GASMmR,CAAIb,GAAMI,EANtC,SAAa1Q,GACX,OAAQ,EAAIA,IAAM,EAAIA,GAKmBoR,CAAId,GAC3C,MAAO,CACL5Q,EAAGwQ,EAAMK,EAAKP,EAAMQ,EAAKV,EAAMY,EAC/B/Q,EAAGwQ,EAAMI,EAAKN,EAAMO,EAAKT,EAAMW,IAKrC,SAASW,EAA4BvB,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAC5D,OAAO,SAAUG,GACf,IAAIS,EAAO,EAAIT,EACXU,EAAY,EAAID,GAAQf,EAAMF,GAAS,EAAIQ,GAAOJ,EAAMF,GACxDiB,EAAY,EAAIF,GAAQd,EAAMF,GAAS,EAAIO,GAAOH,EAAMF,GAC5D,OAAOnS,KAAKC,MAAMkT,EAAUD,IAOhC,SAASM,EAAaC,EAAU9C,EAAIC,GAClC,IAA8B3O,EAAeyR,EAAzCC,EAAQ,CAAE/R,EAAG+O,EAAI9O,EAAG+O,GAASgD,EAAS,EAC1C,IAAKF,EAAO,IAAMA,GAAQ,EAAGA,GAAQ,IACnCzR,EAAIwR,EAASC,GACbE,GAAU9B,EAAe6B,EAAM/R,EAAG+R,EAAM9R,EAAGI,EAAEL,EAAGK,EAAEJ,GAClD8R,EAAQ1R,EAEV,OAAO2R,EAWT,SAASC,EAA0BC,EAASC,GAK1C,IAJA,IACI9R,EAAG+R,EAA6DC,EADhEP,EAAO,EAAGE,EAAS,EAAGH,EAAWK,EAAQL,SAAUE,EAAQ,CAAE/R,EAAGkS,EAAQlS,EAAGC,EAAGiS,EAAQjS,GAC1EqS,EAAW,IAAMC,EAAcL,EAAQK,YAGhDP,EAASG,GAAYL,GAAQ,GAAKQ,EAAW,MAClDjS,EAAIwR,EAASC,GACbO,EAAWP,GACXM,EAAUlC,EAAe6B,EAAM/R,EAAG+R,EAAM9R,EAAGI,EAAEL,EAAGK,EAAEJ,IAEnC+R,EAAUG,EAGvBL,GADAQ,GAAY,GAIZP,EAAQ1R,EACRyR,GAAQQ,EACRN,GAAUI,GAId,OADA/R,EAAE1B,MAAQ4T,EAAYF,GACfhS,EAST,SAASmS,EAAoBvN,GAK3B,IAJA,IAAwCjI,EAGO6U,EAAUY,EAAUF,EAH/DG,EAAc,EAAGlY,EAAMyK,EAAKxK,OAG5BsU,EAAK,EAAGC,EAAK,EAAGpJ,EAAK,EAAGC,EAAK,EAAG8M,EAAO,GAClCpY,EAAI,EAAGA,EAAIC,EAAKD,IAAK,CAO5B,OALAkY,EAAW,CACTzS,EAAG+O,EACH9O,EAAG+O,EACH4D,SAJF5V,EAAUiI,EAAK1K,IAII,IAEXyC,EAAQ,IACd,IAAK,IACHyV,EAAShY,OAAS,EAClBmL,EAAKmJ,EAAK/R,EAAQ,GAClB6I,EAAKmJ,EAAKhS,EAAQ,GAClB,MACF,IAAK,IACHyV,EAAShY,OAASyV,EAAenB,EAAIC,EAAIhS,EAAQ,GAAIA,EAAQ,IAC7D+R,EAAK/R,EAAQ,GACbgS,EAAKhS,EAAQ,GACb,MACF,IAAK,IACH6U,EAAW1B,EACTpB,EACAC,EACAhS,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IAEVuV,EAAcnB,EACZrC,EACAC,EACAhS,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IAEVyV,EAASZ,SAAWA,EACpBY,EAASF,YAAcA,EACvBE,EAAShY,OAASmX,EAAaC,EAAU9C,EAAIC,GAC7CD,EAAK/R,EAAQ,GACbgS,EAAKhS,EAAQ,GACb,MACF,IAAK,IACH6U,EAAWL,EACTzC,EACAC,EACAhS,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IAEVuV,EAAcZ,EACZ5C,EACAC,EACAhS,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IAEVyV,EAASZ,SAAWA,EACpBY,EAASF,YAAcA,EACvBE,EAAShY,OAASmX,EAAaC,EAAU9C,EAAIC,GAC7CD,EAAK/R,EAAQ,GACbgS,EAAKhS,EAAQ,GACb,MACF,IAAK,IACL,IAAK,IAEHyV,EAASI,MAAQjN,EACjB6M,EAASK,MAAQjN,EACjB4M,EAAShY,OAASyV,EAAenB,EAAIC,EAAIpJ,EAAIC,GAC7CkJ,EAAKnJ,EACLoJ,EAAKnJ,EAGT6M,GAAeD,EAAShY,OACxBkY,EAAK3X,KAAKyX,GAGZ,OADAE,EAAK3X,KAAK,CAAEP,OAAQiY,EAAa1S,EAAG+O,EAAI9O,EAAG+O,IACpC2D,EAyJT3e,EAAOgG,KAAK+Y,UAhHZ,SAAmBC,GACjB,IAEIC,EACAC,EAQAC,EACAC,EAEAnO,EAdAmJ,EAAS,GACT4B,EAAS,GAGTqD,EAAKrf,EAAO8D,cACZwb,EAAU,sDACVC,EAAkB,IAAMD,EAAU,IAAMtf,EAAO6D,SAC/C2b,EAAgB,SAAWxf,EAAO6D,SAAW,IAG7C4b,EAAyB,IAAIC,OAFnBH,EAAkB,IAAMA,EAAkB,IAAMA,EAAkBC,EAAgBA,EAC1FD,EAAkB,KAAOD,EAAU,IACQ,KAKjD,IAAKN,IAAeA,EAAWG,MAC7B,OAAO/E,EAIT,IAAK,IAAWuF,EAAPpZ,EAAI,EAAiBC,GAF9ByK,EAAO+N,EAAWG,MAAM,iCAEiB1Y,OAAQF,EAAIC,EAAKD,IAAK,CAG7D6Y,GAFAH,EAAchO,EAAK1K,IAEK+H,MAAM,GAAGsR,OACjC5D,EAAOvV,OAAS,EAEhB,IAAImY,EAAUK,EAAY7Q,OAAO,GAGjC,GAFAuR,EAAe,CAACf,GAEc,MAA1BA,EAAQnJ,cAEV,IAAK,IAAIoK,EAAOA,EAAOJ,EAAuB7R,KAAKwR,IACjD,IAAK,IAAIzD,EAAI,EAAGA,EAAIkE,EAAKpZ,OAAQkV,IAC/BK,EAAOhV,KAAK6Y,EAAKlE,SAKrB,KAAQwD,EAAQE,EAAGzR,KAAKwR,IACtBpD,EAAOhV,KAAKmY,EAAM,IAIbxD,EAAI,EAAb,IAAK,IAAWC,EAAOI,EAAOvV,OAAQkV,EAAIC,EAAMD,IAC9CuD,EAAS3R,WAAWyO,EAAOL,IACtBmE,MAAMZ,IACTS,EAAa3Y,KAAKkY,GAItB,IAAIa,EAAgB1I,EAAeuH,EAAQnJ,eACvCuK,EAAkBrI,EAAiBiH,IAAYA,EAEnD,GAAIe,EAAalZ,OAAS,EAAIsZ,EAC5B,IAAK,IAAIE,EAAI,EAAGC,EAAOP,EAAalZ,OAAQwZ,EAAIC,EAAMD,GAAKF,EACzD3F,EAAOpT,KAAK,CAAC4X,GAASrW,OAAOoX,EAAarR,MAAM2R,EAAGA,EAAIF,KACvDnB,EAAUoB,OAIZ5F,EAAOpT,KAAK2Y,GAIhB,OAAOvF,GAgDTpa,EAAOgG,KAAKma,gBA1hBZ,SAAyBlP,GAIvB,IAIoBjI,EAASzC,EAAG6Z,EAGNC,EAAUC,EAAUC,EAP1CvU,EAAI,EAAGC,EAAI,EAAGzF,EAAMyK,EAAKxK,OAIzBsU,EAAK,EAAGC,EAAK,EAGbwF,EAAkB,GACtB,IAAKja,EAAI,EAAGA,EAAIC,IAAOD,EAAG,CAGxB,OAFA6Z,GAAY,GACZpX,EAAUiI,EAAK1K,GAAG+H,MAAM,IACR,IACd,IAAK,IACHtF,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IACHD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ,MACF,IAAK,IACHA,EAAQ,IAAMgD,EAEhB,IAAK,IACHhD,EAAQ,GAAK,IACbA,EAAQ,GAAKiD,EACbD,EAAIhD,EAAQ,GACZ,MACF,IAAK,IACHA,EAAQ,IAAMiD,EAEhB,IAAK,IACHjD,EAAQ,GAAK,IACbiD,EAAIjD,EAAQ,GACZA,EAAQ,GAAKgD,EACbhD,EAAQ,GAAKiD,EACb,MACF,IAAK,IACHjD,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IACHD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ+R,EAAK/R,EAAQ,GACbgS,EAAKhS,EAAQ,GACb,MACF,IAAK,IACHA,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EACdjD,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EACdjD,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IACHqU,EAAWtX,EAAQ,GACnBuX,EAAWvX,EAAQ,GACnBgD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ,MACF,IAAK,IACHA,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EACdjD,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IAEc,MAAboU,GAEFC,EAAW,EAAItU,EAAIsU,EACnBC,EAAW,EAAItU,EAAIsU,IAKnBD,EAAWtU,EACXuU,EAAWtU,GAEbD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZA,EAAQ,GAAK,IACbA,EAAQ,GAAKA,EAAQ,GACrBA,EAAQ,GAAKA,EAAQ,GACrBA,EAAQ,GAAKA,EAAQ,GACrBA,EAAQ,GAAKA,EAAQ,GACrBA,EAAQ,GAAKsX,EACbtX,EAAQ,GAAKuX,EAGbD,EAAWtX,EAAQ,GACnBuX,EAAWvX,EAAQ,GACnB,MACF,IAAK,IACHA,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EACdjD,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IACHqU,EAAWtX,EAAQ,GACnBuX,EAAWvX,EAAQ,GACnBgD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ,MACF,IAAK,IACHA,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IACc,MAAboU,GAEFC,EAAW,EAAItU,EAAIsU,EACnBC,EAAW,EAAItU,EAAIsU,IAKnBD,EAAWtU,EACXuU,EAAWtU,GAEbjD,EAAQ,GAAK,IACbgD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZA,EAAQ,GAAKsX,EACbtX,EAAQ,GAAKuX,EACbvX,EAAQ,GAAKgD,EACbhD,EAAQ,GAAKiD,EACb,MACF,IAAK,IACHjD,EAAQ,GAAK,IACbA,EAAQ,IAAMgD,EACdhD,EAAQ,IAAMiD,EAEhB,IAAK,IACHmU,GAAY,EACZI,EAAkBA,EAAgBjY,OAAOsT,EAAiB7P,EAAGC,EAAGjD,IAChEgD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ,MACF,IAAK,IACL,IAAK,IACHgD,EAAI+O,EACJ9O,EAAI+O,EAIHoF,GACHI,EAAgBxZ,KAAKgC,GAEvBqX,EAAWrX,EAAQ,GAErB,OAAOwX,GAwXTxgB,EAAOgG,KAAKwY,oBAAsBA,EAClCxe,EAAOgG,KAAK6V,iBAAmBA,EAM/B7b,EAAOgG,KAAKya,iBAAmB5E,EAC/B7b,EAAOgG,KAAK4U,iBAAmBA,EAC/B5a,EAAOgG,KAAK0a,eAjKZ,SAAwBzP,EAAMkN,EAAUwC,GACjCA,IACHA,EAAQnC,EAAoBvN,IAG9B,IADA,IAAI1K,EAAI,EACA4X,EAAWwC,EAAMpa,GAAGE,OAAS,GAAMF,EAAKoa,EAAMla,OAAS,GAC7D0X,GAAYwC,EAAMpa,GAAGE,OACrBF,IAGF,IACkDoY,EAD9CT,EAAUyC,EAAMpa,GAAIqa,EAAazC,EAAWD,EAAQzX,OACpDmY,EAAUV,EAAQU,QAASiC,EAAU5P,EAAK1K,GAE9C,OAAQqY,GACN,IAAK,IACH,MAAO,CAAE5S,EAAGkS,EAAQlS,EAAGC,EAAGiS,EAAQjS,EAAGtB,MAAO,GAC9C,IAAK,IACL,IAAK,IAMH,OALAgU,EAAO,IAAI3e,EAAO+L,MAAMmS,EAAQlS,EAAGkS,EAAQjS,GAAG6U,KAC5C,IAAI9gB,EAAO+L,MAAMmS,EAAQW,MAAOX,EAAQY,OACxC8B,IAEGjW,MAAQP,KAAKC,MAAM6T,EAAQY,MAAQZ,EAAQjS,EAAGiS,EAAQW,MAAQX,EAAQlS,GACpE2S,EACT,IAAK,IAMH,OALAA,EAAO,IAAI3e,EAAO+L,MAAMmS,EAAQlS,EAAGkS,EAAQjS,GAAG6U,KAC5C,IAAI9gB,EAAO+L,MAAM8U,EAAQ,GAAIA,EAAQ,IACrCD,IAEGjW,MAAQP,KAAKC,MAAMwW,EAAQ,GAAK3C,EAAQjS,EAAG4U,EAAQ,GAAK3C,EAAQlS,GAC9D2S,EACT,IAAK,IAEL,IAAK,IACH,OAAOV,EAA0BC,EAASC,KAkIhDne,EAAOgG,KAAK+a,eA7CZ,SAAwBjF,EAAIC,EAAI7D,EAAIC,EAAIlG,EAAK+G,EAAOC,EAAO+H,EAAIC,GAK7D,IAHA,IAA0BC,EAAtB3I,EAAQ,EAAGC,EAAQ,EAAUiD,EAAS,GACtC0F,EAAOpI,EAAciI,EAAKlF,EAAImF,EAAKlF,EAAI7D,EAAIC,EAAIa,EAAOC,EAAOhH,GAExD1L,EAAI,EAAGC,EAAM2a,EAAK1a,OAAQF,EAAIC,EAAKD,IAC1C2a,EAAQtG,EAAiBrC,EAAOC,EAAO2I,EAAK5a,GAAG,GAAI4a,EAAK5a,GAAG,GAAI4a,EAAK5a,GAAG,GAAI4a,EAAK5a,GAAG,GAAI4a,EAAK5a,GAAG,GAAI4a,EAAK5a,GAAG,IAC3GkV,EAAOzU,KAAK,CAAEgF,EAAGkV,EAAM,GAAGlV,EAAI8P,EAAI7P,EAAGiV,EAAM,GAAGjV,EAAI8P,IAClDN,EAAOzU,KAAK,CAAEgF,EAAGkV,EAAM,GAAGlV,EAAI8P,EAAI7P,EAAGiV,EAAM,GAAGjV,EAAI8P,IAClDxD,EAAQ4I,EAAK5a,GAAG,GAChBiS,EAAQ2I,EAAK5a,GAAG,GAElB,OAAOkV,GAkCTzb,EAAOgG,KAAKob,QAvBZ,SAAiBzf,EAAKma,EAAIC,EAAIC,GAEdH,EAAiBC,EAAIC,EADnCC,EAASA,EAAO1N,MAAM,GAAG+S,QAAQ,MAEzB/Q,SAAQ,SAASgR,GACvB3f,EAAI4f,cAAcla,MAAM1F,EAAK2f,EAAOhT,MAAM,QAnwBhD,GA0xBA,WAEE,IAAIA,EAAQ8I,MAAM3F,UAAUnD,MAyD5B,SAASkT,EAAKvb,EAAOwb,EAAYC,GAC/B,GAAKzb,GAA0B,IAAjBA,EAAMQ,OAApB,CAIA,IAAIF,EAAIN,EAAMQ,OAAS,EACnB2T,EAASqH,EAAaxb,EAAMM,GAAGkb,GAAcxb,EAAMM,GACvD,GAAIkb,EACF,KAAOlb,KACDmb,EAAUzb,EAAMM,GAAGkb,GAAarH,KAClCA,EAASnU,EAAMM,GAAGkb,SAKtB,KAAOlb,KACDmb,EAAUzb,EAAMM,GAAI6T,KACtBA,EAASnU,EAAMM,IAIrB,OAAO6T,GAMTpa,EAAOgG,KAAKC,MAAQ,CAClBC,KAvCF,SAAcD,EAAOW,GAEnB,IADA,IAAIqZ,EAAIha,EAAMQ,OACPwZ,KACLha,EAAMga,GAAKrZ,EAEb,OAAOX,GAmCP0b,OA7EF,SAAgB1b,EAAO2b,GAErB,IADA,IAAI/B,EAAOvR,EAAM5H,KAAKI,UAAW,GAAIsT,EAAS,GACrC7T,EAAI,EAAGC,EAAMP,EAAMQ,OAAQF,EAAIC,EAAKD,IAC3C6T,EAAO7T,GAAKsZ,EAAKpZ,OAASR,EAAMM,GAAGqb,GAAQva,MAAMpB,EAAMM,GAAIsZ,GAAQ5Z,EAAMM,GAAGqb,GAAQlb,KAAKT,EAAMM,IAEjG,OAAO6T,GAyEPnP,IAlDF,SAAahF,EAAOwb,GAClB,OAAOD,EAAKvb,EAAOwb,GAAY,SAASI,EAAQC,GAC9C,OAAOD,EAASC,MAiDlB5W,IAhEF,SAAajF,EAAOwb,GAClB,OAAOD,EAAKvb,EAAOwb,GAAY,SAASI,EAAQC,GAC9C,OAAOD,GAAUC,OA5BvB,GAgGA,WAaE,SAASC,EAAOzQ,EAAa5H,EAAQsY,GAInC,GAAIA,EACF,IAAKhiB,EAAOwD,cAAgBkG,aAAkBuY,QAE5C3Q,EAAc5H,OAEX,GAAIA,aAAkB0N,MAAO,CAChC9F,EAAc,GACd,IAAK,IAAI/K,EAAI,EAAGC,EAAMkD,EAAOjD,OAAQF,EAAIC,EAAKD,IAC5C+K,EAAY/K,GAAKwb,EAAO,GAAKrY,EAAOnD,GAAIyb,QAGvC,GAAItY,GAA4B,kBAAXA,EACxB,IAAK,IAAIJ,KAAYI,EACF,WAAbJ,GAAsC,UAAbA,EAG3BgI,EAAYhI,GAAY,KAEjBI,EAAOwY,eAAe5Y,KAC7BgI,EAAYhI,GAAYyY,EAAO,GAAKrY,EAAOJ,GAAW0Y,SAM1D1Q,EAAc5H,OAIhB,IAAK,IAAIJ,KAAYI,EACnB4H,EAAYhI,GAAYI,EAAOJ,GAGnC,OAAOgI,EAeTtR,EAAOgG,KAAK0B,OAAS,CACnBqa,OAAQA,EACRI,MAPF,SAAeza,EAAQsa,GACrB,OAAOD,EAAO,GAAKra,EAAQsa,KAQ7BhiB,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOgG,KAAMhG,EAAOmG,YArEhD,GAyEA,WA4DE,SAASic,EAAaC,EAAK9b,GACzB,IAAI+b,EAAOD,EAAIE,WAAWhc,GAE1B,GAAIuZ,MAAMwC,GACR,MAAO,GAET,GAAIA,EAAO,OAAUA,EAAO,MAC1B,OAAOD,EAAIjU,OAAO7H,GAKpB,GAAI,OAAU+b,GAAQA,GAAQ,MAAQ,CACpC,GAAID,EAAI5b,QAAWF,EAAI,EACrB,KAAM,iDAER,IAAIic,EAAOH,EAAIE,WAAWhc,EAAI,GAC9B,GAAI,MAASic,GAAQA,EAAO,MAC1B,KAAM,iDAER,OAAOH,EAAIjU,OAAO7H,GAAK8b,EAAIjU,OAAO7H,EAAI,GAGxC,GAAU,IAANA,EACF,KAAM,iDAER,IAAIkc,EAAOJ,EAAIE,WAAWhc,EAAI,GAI9B,GAAI,MAASkc,GAAQA,EAAO,MAC1B,KAAM,iDAIR,OAAO,EAQTziB,EAAOgG,KAAKkI,OAAS,CACnBC,SAhGF,SAAkBD,GAChB,OAAOA,EAAOwU,QAAQ,WAAW,SAASvD,EAAOwD,GAC/C,OAAOA,EAAYA,EAAUtU,cAAgB,OA+F/CuU,WAlFF,SAAoB1U,EAAQ2U,GAC1B,OAAO3U,EAAOE,OAAO,GAAGC,eACrBwU,EAAkB3U,EAAOI,MAAM,GAAKJ,EAAOI,MAAM,GAAGmH,gBAiFvDqN,UAxEF,SAAmB5U,GACjB,OAAOA,EAAOwU,QAAQ,KAAM,SACzBA,QAAQ,KAAM,UACdA,QAAQ,KAAM,UACdA,QAAQ,KAAM,QACdA,QAAQ,KAAM,SAoEjBK,cA3DF,SAAuBC,GACrB,IAAWC,EAAP1c,EAAI,EAAQ2c,EAAY,GAC5B,IAAK3c,EAAI,EAAQA,EAAIyc,EAAWvc,OAAQF,KACM,KAAvC0c,EAAMb,EAAaY,EAAYzc,KAGpC2c,EAAUlc,KAAKic,GAEjB,OAAOC,IAxDX,GAgHA,WAEE,IAAI5U,EAAQ8I,MAAM3F,UAAUnD,MAAO6U,EAAgB,aAE/CC,EAAqB,WACnB,IAAK,IAAI/W,IAAK,CAAEqF,SAAU,GACxB,GAAU,aAANrF,EACF,OAAO,EAGX,OAAO,EANY,GAUrBgX,EAAa,SAASC,EAAO5Z,EAAQ6Z,GACnC,IAAK,IAAIja,KAAYI,EAEfJ,KAAYga,EAAM7R,WACmB,oBAA9B6R,EAAM7R,UAAUnI,KACtBI,EAAOJ,GAAY,IAAIvD,QAAQ,cAAgB,EAElDud,EAAM7R,UAAUnI,GAAa,SAASA,GACpC,OAAO,WAEL,IAAIka,EAAa7gB,KAAK8gB,YAAYD,WAClC7gB,KAAK8gB,YAAYD,WAAaD,EAC9B,IAAIG,EAAcha,EAAOJ,GAAUjC,MAAM1E,KAAMmE,WAG/C,GAFAnE,KAAK8gB,YAAYD,WAAaA,EAEb,eAAbla,EACF,OAAOoa,GATgB,CAY1Bpa,GAGHga,EAAM7R,UAAUnI,GAAYI,EAAOJ,GAGjC8Z,IACE1Z,EAAOgI,WAAaF,OAAOC,UAAUC,WACvC4R,EAAM7R,UAAUC,SAAWhI,EAAOgI,UAEhChI,EAAOia,UAAYnS,OAAOC,UAAUkS,UACtCL,EAAM7R,UAAUkS,QAAUja,EAAOia,WAM7C,SAASC,KAET,SAASC,EAAUC,GAKjB,IAJA,IAAIC,EAAe,KACfC,EAAQrhB,KAGLqhB,EAAMP,YAAYD,YAAY,CACnC,IAAIS,EAAmBD,EAAMP,YAAYD,WAAW/R,UAAUqS,GAC9D,GAAIE,EAAMF,KAAgBG,EAAkB,CAC1CF,EAAeE,EACf,MAGFD,EAAQA,EAAMP,YAAYD,WAAW/R,UAGvC,OAAKsS,EAIGjd,UAAUL,OAAS,EACvBsd,EAAa1c,MAAM1E,KAAM2L,EAAM5H,KAAKI,UAAW,IAC/Cid,EAAard,KAAK/D,MALbyC,QAAQC,IAAI,sBAAwBye,EAAa,wCAAyCnhB,MA6CrG3C,EAAOgG,KAAKke,YA9BZ,WACE,IAAIX,EAAS,KACThS,EAAajD,EAAM5H,KAAKI,UAAW,GAKvC,SAASwc,IACP3gB,KAAKwhB,WAAW9c,MAAM1E,KAAMmE,WAJD,oBAAlByK,EAAW,KACpBgS,EAAShS,EAAW6S,SAMtBd,EAAME,WAAaD,EACnBD,EAAMe,WAAa,GAEfd,IACFK,EAASnS,UAAY8R,EAAO9R,UAC5B6R,EAAM7R,UAAY,IAAImS,EACtBL,EAAOc,WAAWrd,KAAKsc,IAEzB,IAAK,IAAI/c,EAAI,EAAGE,EAAS8K,EAAW9K,OAAQF,EAAIE,EAAQF,IACtD8c,EAAWC,EAAO/R,EAAWhL,GAAIgd,GAOnC,OALKD,EAAM7R,UAAU0S,aACnBb,EAAM7R,UAAU0S,WAAahB,GAE/BG,EAAM7R,UAAUgS,YAAcH,EAC9BA,EAAM7R,UAAUoS,UAAYA,EACrBP,GA9GX,GAqHA,WAEE,IAAIgB,IAAwBtkB,EAAOG,SAASsP,cAAc,OAAO8U,YAC7DC,EAAc,CAAC,aAAc,YAAa,YAS9CxkB,EAAOgG,KAAKye,YAAc,SAASC,EAAS/e,EAAWC,EAASS,GAC9Dqe,GAAWA,EAAQC,iBAAiBhf,EAAWC,GAAS0e,GAA8Bje,IAWxFrG,EAAOgG,KAAK4e,eAAiB,SAASF,EAAS/e,EAAWC,EAASS,GACjEqe,GAAWA,EAAQG,oBAAoBlf,EAAWC,GAAS0e,GAA8Bje,IAW3FrG,EAAOgG,KAAK8e,WAAa,SAASC,GAChC,IAAIL,EAAUK,EAAMzQ,OAChB0Q,EAAShlB,EAAOgG,KAAKif,iBAAiBP,GACtCQ,EAXN,SAAsBH,GACpB,IAAII,EAAYJ,EAAMK,eACtB,OAAID,GAAaA,EAAU,GAClBA,EAAU,GAEZJ,EAMIM,CAAaN,GACxB,MAAO,CACL/Y,EAAGkZ,EAAKI,QAAUN,EAAOjY,KACzBd,EAAGiZ,EAAKK,QAAUP,EAAOhY,MAI7BhN,EAAOgG,KAAKwf,aAAe,SAAST,GAClC,OAAOP,EAAYze,QAAQgf,EAAMzc,OAAS,GAA2B,UAAtByc,EAAMU,aA/CzD,GAoDA,WAkCE,IAAIC,EAAU1lB,EAAOG,SAASsP,cAAc,OACxCkW,EAAmD,kBAA1BD,EAAQhW,MAAMkW,QACvCC,EAAkD,kBAAzBH,EAAQhW,MAAM/I,OACvCmf,EAAY,wCAGZC,EAAa,SAAUrB,GAAW,OAAOA,GAEzCiB,EAEFI,EAAa,SAASrB,EAAS9d,GAE7B,OADA8d,EAAQhV,MAAMkW,QAAUhf,EACjB8d,GAGFmB,IAEPE,EAAa,SAASrB,EAAS9d,GAC7B,IAAIof,EAAKtB,EAAQhV,MAWjB,OAVIgV,EAAQuB,eAAiBvB,EAAQuB,aAAaC,YAChDF,EAAGG,KAAO,GAERL,EAAUM,KAAKJ,EAAGrf,SACpBC,EAAQA,GAAS,MAAS,GAAM,iBAA4B,IAARA,EAAe,IACnEof,EAAGrf,OAASqf,EAAGrf,OAAO+b,QAAQoD,EAAWlf,IAGzCof,EAAGrf,QAAU,kBAA6B,IAARC,EAAe,IAE5C8d,IAIX1kB,EAAOgG,KAAKqgB,SA1DZ,SAAkB3B,EAAS4B,GACzB,IAAIC,EAAe7B,EAAQhV,MAC3B,IAAK6W,EACH,OAAO7B,EAET,GAAsB,kBAAX4B,EAET,OADA5B,EAAQhV,MAAM8W,SAAW,IAAMF,EACxBA,EAAOvgB,QAAQ,YAAc,EAChCggB,EAAWrB,EAAS4B,EAAOnH,MAAM,0BAA0B,IAC3DuF,EAEN,IAAK,IAAIpb,KAAYgd,EAAQ,CAC3B,GAAiB,YAAbhd,EACFyc,EAAWrB,EAAS4B,EAAOhd,SAM3Bid,EAHuC,UAAbjd,GAAqC,aAAbA,EACV,qBAA5Bid,EAAaE,WAA6B,WAAa,aAC/Dnd,GAC+Bgd,EAAOhd,GAG9C,OAAOob,GA/BX,GAwEA,WAEE,IAAIgC,EAAStP,MAAM3F,UAAUnD,MAY7B,IAAIqY,EAyKAC,EAlKAC,EAAU,SAASC,GACjB,OAAOJ,EAAOhgB,KAAKogB,EAAW,IAGpC,IACEH,EAA2BE,EAAQ7mB,EAAOG,SAAS4mB,sBAAuB3P,MAE5E,MAAO4P,IAmBP,SAASC,EAAYC,EAASzY,GAC5B,IAAI0Y,EAAKnnB,EAAOG,SAASsP,cAAcyX,GACvC,IAAK,IAAIngB,KAAQ0H,EACF,UAAT1H,EACFogB,EAAGC,UAAY3Y,EAAW1H,GAEV,QAATA,EACPogB,EAAGE,QAAU5Y,EAAW1H,GAGxBogB,EAAGG,aAAavgB,EAAM0H,EAAW1H,IAGrC,OAAOogB,EAwCT,SAASlC,EAAiBP,GAaxB,IAXA,IAAI3X,EAAO,EACPC,EAAM,EACNua,EAAavnB,EAAOG,SAASqnB,gBAC7BC,EAAOznB,EAAOG,SAASsnB,MAAQ,CAC7BC,WAAY,EAAGC,UAAW,GAOzBjD,IAAYA,EAAQ5U,YAAc4U,EAAQkD,SAG/ClD,EAAUA,EAAQ5U,YAAc4U,EAAQkD,QAExB5nB,EAAOG,UACrB4M,EAAO0a,EAAKC,YAAcH,EAAWG,YAAc,EACnD1a,EAAMya,EAAKE,WAAcJ,EAAWI,WAAa,IAGjD5a,GAAQ2X,EAAQgD,YAAc,EAC9B1a,GAAO0X,EAAQiD,WAAa,GAGL,IAArBjD,EAAQmD,UAA6C,UAA3BnD,EAAQhV,MAAMC,YAK9C,MAAO,CAAE5C,KAAMA,EAAMC,IAAKA,GAtGvB2Z,IACHE,EAAU,SAASC,GAEjB,IADA,IAAIgB,EAAM,IAAI1Q,MAAM0P,EAAUrgB,QAASF,EAAIugB,EAAUrgB,OAC9CF,KACLuhB,EAAIvhB,GAAKugB,EAAUvgB,GAErB,OAAOuhB,IAqJTlB,EADE5mB,EAAOG,SAAS4nB,aAAe/nB,EAAOG,SAAS4nB,YAAYC,iBAC3C,SAAStD,EAASuD,GAClC,IAAIvY,EAAQ1P,EAAOG,SAAS4nB,YAAYC,iBAAiBtD,EAAS,MAClE,OAAOhV,EAAQA,EAAMuY,QAAQ5Y,GAIb,SAASqV,EAASuD,GAClC,IAAIrhB,EAAQ8d,EAAQhV,MAAMuY,GAI1B,OAHKrhB,GAAS8d,EAAQuB,eACpBrf,EAAQ8d,EAAQuB,aAAagC,IAExBrhB,GAIX,WACE,IAAI8I,EAAQ1P,EAAOG,SAASqnB,gBAAgB9X,MACxCwY,EAAa,eAAgBxY,EACzB,aACA,kBAAmBA,EACjB,gBACA,qBAAsBA,EACpB,mBACA,oBAAqBA,EACnB,kBACA,GAwCd1P,EAAOgG,KAAKmiB,wBAhCZ,SAAiCzD,GAU/B,MATqC,qBAA1BA,EAAQ0D,gBACjB1D,EAAQ0D,cAAgBpoB,EAAOgG,KAAK+H,eAElCma,EACFxD,EAAQhV,MAAMwY,GAAc,OAEW,kBAAzBxD,EAAQ2D,eACtB3D,EAAQ2D,aAAe,MAElB3D,GAuBT1kB,EAAOgG,KAAKsiB,sBAdZ,SAA+B5D,GAU7B,MATqC,qBAA1BA,EAAQ0D,gBACjB1D,EAAQ0D,cAAgB,MAEtBF,EACFxD,EAAQhV,MAAMwY,GAAc,GAEW,kBAAzBxD,EAAQ2D,eACtB3D,EAAQ2D,aAAe,IAElB3D,GA/CX,GAwFA1kB,EAAOgG,KAAKuiB,kBAdZ,SAA2B5mB,EAAKiF,GAC9BjF,EAAI6mB,sBAAwB7mB,EAAI6mB,uBAAyB7mB,EAAI8mB,6BACxD9mB,EAAI+mB,0BAA4B/mB,EAAIgnB,yBAA2BhnB,EAAIinB,uBACxEjnB,EAAI6mB,sBAAwB5hB,GAY9B5G,EAAOgG,KAAK6iB,QAvRZ,SAAiBC,GACf,MAAqB,kBAAPA,EAAkB9oB,EAAOG,SAAS4oB,eAAeD,GAAMA,GAuRvE9oB,EAAOgG,KAAK6gB,QAAUA,EACtB7mB,EAAOgG,KAAKgjB,SA9NZ,SAAkBtE,EAAS0C,GACrB1C,IAA+E,KAAnE,IAAMA,EAAQ0C,UAAY,KAAKrhB,QAAQ,IAAMqhB,EAAY,OACvE1C,EAAQ0C,YAAc1C,EAAQ0C,UAAY,IAAM,IAAMA,IA6N1DpnB,EAAOgG,KAAKihB,YAAcA,EAC1BjnB,EAAOgG,KAAKijB,YAlNZ,SAAqBvE,EAASwE,EAASza,GAQrC,MAPuB,kBAAZya,IACTA,EAAUjC,EAAYiC,EAASza,IAE7BiW,EAAQ5U,YACV4U,EAAQ5U,WAAWqZ,aAAaD,EAASxE,GAE3CwE,EAAQtZ,YAAY8U,GACbwE,GA2MTlpB,EAAOgG,KAAKif,iBAAmBA,EAC/BjlB,EAAOgG,KAAKojB,iBAzJZ,SAA0B1E,GACxB,IAAI2E,EAIAC,EAHAC,EAAM7E,GAAWA,EAAQ8E,cACzBC,EAAM,CAAE1c,KAAM,EAAGC,IAAK,GACtB0c,EAAS,CAAE3c,KAAM,EAAGC,IAAK,GAEzB2c,EAAmB,CACjBC,gBAAiB,OACjBC,eAAiB,MACjBC,YAAiB,OACjBC,WAAiB,OAGvB,IAAKR,EACH,OAAOG,EAGT,IAAK,IAAIzB,KAAQ0B,EACfD,EAAOC,EAAiB1B,KAAU+B,SAASpD,EAAgBlC,EAASuD,GAAO,KAAO,EAUpF,OAPAoB,EAAUE,EAAI/B,gBACgC,qBAAlC9C,EAAQuF,wBAClBR,EAAM/E,EAAQuF,yBAGhBX,EAAgBrE,EAAiBP,GAE1B,CACL3X,KAAM0c,EAAI1c,KAAOuc,EAAcvc,MAAQsc,EAAQa,YAAc,GAAKR,EAAO3c,KACzEC,IAAKyc,EAAIzc,IAAMsc,EAActc,KAAOqc,EAAQc,WAAa,GAAMT,EAAO1c,MA4H1EhN,EAAOgG,KAAKokB,cA1CZ,SAAuB1F,GACrB,IAAI2F,EAAOrqB,EAAOgB,oBAAoB0jB,GACtC,OAAO2F,EAAKC,SAAWD,EAAKE,QAyC9BvqB,EAAOgG,KAAKwkB,iBAtCZ,SAA0B9F,GACxB,GAAK1kB,EAAOwD,aAAZ,CAGA,IAAI6mB,EAAOrqB,EAAOgB,oBAAoB0jB,GAClC2F,IACFA,EAAKE,OAAS,KACdF,EAAKC,QAAU,KAEfD,EAAKI,YAAc,KACnBJ,EAAKK,YAAc,KACnBL,EAAKM,WAAa,QA9QxB,GA8SA,WAME,SAASC,KA8CT5qB,EAAOgG,KAAK6kB,QAjCZ,SAAiBhc,EAAKxI,GACpBA,IAAYA,EAAU,IAEtB,IAAIub,EAASvb,EAAQub,OAASvb,EAAQub,OAAOvT,cAAgB,MACzDyc,EAAazkB,EAAQykB,YAAc,aACnCC,EAAM,IAAI/qB,EAAOI,OAAO4qB,eACxBvD,EAAOphB,EAAQohB,MAAQphB,EAAQ4kB,WAwBnC,OArBAF,EAAIG,mBAAqB,WACA,IAAnBH,EAAII,aACNL,EAAWC,GACXA,EAAIG,mBAAqBN,IAId,QAAXhJ,IACF6F,EAAO,KAC2B,kBAAvBphB,EAAQ4kB,aACjBpc,EApCN,SAAuBA,EAAKuc,GAC1B,OAAOvc,GAAO,KAAKuX,KAAKvX,GAAO,IAAM,KAAOuc,EAmClCC,CAAcxc,EAAKxI,EAAQ4kB,cAIrCF,EAAIO,KAAK1J,EAAQ/S,GAAK,GAEP,SAAX+S,GAAgC,QAAXA,GACvBmJ,EAAIQ,iBAAiB,eAAgB,qCAGvCR,EAAIS,KAAK/D,GACFsD,GAjDX,GA4DA/qB,EAAOqF,IAAMD,QAAQC,IAMrBrF,EAAOyrB,KAAOrmB,QAAQqmB,KAGtB,WAEE,SAASC,IACP,OAAO,EAGT,SAASC,EAAcrf,EAAG2G,EAAGuE,EAAGoU,GAC9B,OAAQpU,EAAIpN,KAAKM,IAAI4B,EAAIsf,GAAKxhB,KAAKI,GAAK,IAAMgN,EAAIvE,EA2DpD,IAAI4Y,EAAoB7rB,EAAOI,OAAO0rB,uBACd9rB,EAAOI,OAAO2rB,6BACd/rB,EAAOI,OAAO4rB,0BACdhsB,EAAOI,OAAO6rB,wBACdjsB,EAAOI,OAAO8rB,yBACd,SAAS/jB,GACP,OAAOnI,EAAOI,OAAO+rB,WAAWhkB,EAAU,IAAO,KAGvEikB,EAAmBpsB,EAAOI,OAAOisB,sBAAwBrsB,EAAOI,OAAOksB,aAS3E,SAASC,IACP,OAAOV,EAAkBxkB,MAAMrH,EAAOI,OAAQ0G,WAOhD9G,EAAOgG,KAAKwmB,QArEZ,SAAiBnmB,GAEfkmB,GAAiB,SAASE,GACxBpmB,IAAYA,EAAU,IAEtB,IAE+BqmB,EAF3BC,EAAQF,IAAc,IAAIG,KAC1BC,EAAWxmB,EAAQwmB,UAAY,IAC/BC,EAASH,EAAQE,EACjBE,EAAW1mB,EAAQ0mB,UAAYrB,EAC/BsB,EAAQ3mB,EAAQ2mB,OAAStB,EACzBZ,EAAazkB,EAAQykB,YAAcY,EACnCuB,EAAS5mB,EAAQ4mB,QAAUtB,EAC3BuB,EAAa,eAAgB7mB,EAAUA,EAAQ6mB,WAAa,EAC5DC,EAAW,aAAc9mB,EAAUA,EAAQ8mB,SAAW,IACtDC,EAAU/mB,EAAQ+mB,SAAWD,EAAWD,EAE5C7mB,EAAQgnB,SAAWhnB,EAAQgnB,UAE3B,SAAUC,EAAKC,GAIb,IAAIC,GADJd,EAAOa,IAAa,IAAIX,MACCE,EAASD,EAAYH,EAAOC,EACjDc,EAAWD,EAAcX,EACzB7jB,EAAUikB,EAAOO,EAAaN,EAAYE,EAASP,GACnDa,EAAYtjB,KAAKmP,KAAKvQ,EAAUkkB,GAAcE,GAClD,IAAIJ,IAIJ,OAAIN,EAAOI,GACTC,EAASI,EAAU,EAAG,QACtBrC,EAAWqC,EAAU,EAAG,KAIxBJ,EAAS/jB,EAAS0kB,EAAWD,QAC7BlB,EAAiBe,IAVjBxC,EAAWqC,EAAU,EAAG,GAT5B,CAqBGR,OA+BP3sB,EAAOgG,KAAKumB,iBAAmBA,EAC/BvsB,EAAOgG,KAAK2nB,gBANZ,WACE,OAAOvB,EAAiB/kB,MAAMrH,EAAOI,OAAQ0G,YAzFjD,GAkGA,WAIE,SAAS8mB,EAAeC,EAAOC,EAAKC,GAClC,IAAIC,EAAQ,QACNhE,SAAU6D,EAAM,GAAKE,GAAOD,EAAI,GAAKD,EAAM,IAAM,IAAM,IACvD7D,SAAU6D,EAAM,GAAKE,GAAOD,EAAI,GAAKD,EAAM,IAAM,IAAM,IACvD7D,SAAU6D,EAAM,GAAKE,GAAOD,EAAI,GAAKD,EAAM,IAAM,IAIvD,OAFAG,GAAS,KAAOH,GAASC,EAAMvgB,WAAWsgB,EAAM,GAAKE,GAAOD,EAAI,GAAKD,EAAM,KAAO,GAClFG,GAAS,IA2DXhuB,EAAOgG,KAAKioB,aA3CZ,SAAsBC,EAAWC,EAAStB,EAAUxmB,GAClD,IAAI+nB,EAAa,IAAIpuB,EAAOquB,MAAMH,GAAWI,YACzCC,EAAW,IAAIvuB,EAAOquB,MAAMF,GAASG,YACrCE,EAAqBnoB,EAAQykB,WAC7B2D,EAAmBpoB,EAAQ0mB,SAC/B1mB,EAAUA,GAAW,GAErBrG,EAAOgG,KAAKwmB,QAAQxsB,EAAOgG,KAAK0B,OAAOqa,OAAO1b,EAAS,CACrDwmB,SAAUA,GAAY,IACtBK,WAAYkB,EACZjB,SAAUoB,EACVnB,QAASmB,EACTtB,OAAQ,SAAUO,EAAaN,EAAYE,EAASP,GAIlD,OAAOe,EAAeV,EAAYE,EAHnB/mB,EAAQqoB,YACnBroB,EAAQqoB,YAAYlB,EAAaX,GACjC,EAAIziB,KAAKM,IAAI8iB,EAAcX,GAAYziB,KAAKI,GAAK,MAIvDsgB,WAAY,SAAS9hB,EAAS0kB,EAAWD,GACvC,GAAIe,EACF,OAAOA,EACLZ,EAAeW,EAAUA,EAAU,GACnCb,EACAD,IAINV,SAAU,SAAS/jB,EAAS0kB,EAAWD,GACrC,GAAIgB,EAAkB,CACpB,GAAIrX,MAAMuX,QAAQ3lB,GAChB,OAAOylB,EACLb,EAAe5kB,EAASA,EAAS,GACjC0kB,EACAD,GAGJgB,EAAiBzlB,EAAS0kB,EAAWD,SAhE/C,GA2EA,WAEE,SAASmB,EAAU1hB,EAAGsK,EAAGnL,EAAGoL,GAc1B,OAbIvK,EAAI9C,KAAKmP,IAAI/B,IACftK,EAAIsK,EACJC,EAAIpL,EAAI,GAKNoL,EADQ,IAAND,GAAiB,IAANtK,EACTb,GAAK,EAAIjC,KAAKI,IAAMJ,KAAKykB,KAAK,GAG9BxiB,GAAK,EAAIjC,KAAKI,IAAMJ,KAAKykB,KAAKrX,EAAItK,GAGnC,CAAEA,EAAGA,EAAGsK,EAAGA,EAAGnL,EAAGA,EAAGoL,EAAGA,GAGhC,SAASqX,EAAQC,EAAMziB,EAAGsf,GACxB,OAAOmD,EAAK7hB,EACV9C,KAAKE,IAAI,EAAG,IAAMgC,GAAK,IACvBlC,KAAKQ,KAAM0B,EAAIsf,EAAImD,EAAKtX,IAAM,EAAIrN,KAAKI,IAAMukB,EAAK1iB,GA8QtD,SAAS2iB,EAAa1iB,EAAG2G,EAAGuE,EAAGoU,GAC7B,OAAOpU,EAAIyX,EAAerD,EAAItf,EAAG,EAAGkL,EAAGoU,GAAK3Y,EAO9C,SAASgc,EAAc3iB,EAAG2G,EAAGuE,EAAGoU,GAC9B,OAAKtf,GAAKsf,GAAM,EAAI,KACXpU,GAAK,OAASlL,EAAIA,GAAK2G,EAEvB3G,EAAK,EAAI,KACTkL,GAAK,QAAUlL,GAAM,IAAM,MAASA,EAAI,KAAQ2G,EAEhD3G,EAAK,IAAM,KACXkL,GAAK,QAAUlL,GAAM,KAAO,MAASA,EAAI,OAAU2G,EAGnDuE,GAAK,QAAUlL,GAAM,MAAQ,MAASA,EAAI,SAAY2G,EAoBjEjT,EAAOgG,KAAKkpB,KAAO,CAMjBC,WAAY,SAAS7iB,EAAG2G,EAAGuE,EAAGoU,GAC5B,OAAOpU,GAAKlL,GAAKsf,GAAKtf,EAAI2G,GAO5Bmc,YAAa,SAAS9iB,EAAG2G,EAAGuE,EAAGoU,GAC7B,OAAQpU,GAAKlL,GAAKsf,IAAMtf,EAAI,GAAK2G,GAOnCoc,cAAe,SAAS/iB,EAAG2G,EAAGuE,EAAGoU,GAE/B,OADAtf,GAAMsf,EAAI,GACF,EACCpU,EAAI,EAAIlL,EAAIA,EAAI2G,GAEjBuE,EAAI,KAAQlL,GAAMA,EAAI,GAAK,GAAK2G,GAO1Cqc,YAAa,SAAShjB,EAAG2G,EAAGuE,EAAGoU,GAC7B,OAAOpU,GAAKlL,GAAKsf,GAAKtf,EAAIA,EAAI2G,GAGhCsc,aApVF,SAAsBjjB,EAAG2G,EAAGuE,EAAGoU,GAC7B,OAAOpU,IAAMlL,EAAIA,EAAIsf,EAAI,GAAKtf,EAAIA,EAAI,GAAK2G,GAoV3Cuc,eA7UF,SAAwBljB,EAAG2G,EAAGuE,EAAGoU,GAE/B,OADAtf,GAAKsf,EAAI,GACD,EACCpU,EAAI,EAAIlL,EAAIA,EAAIA,EAAI2G,EAEtBuE,EAAI,IAAMlL,GAAK,GAAKA,EAAIA,EAAI,GAAK2G,GAyUxCwc,YAlUF,SAAqBnjB,EAAG2G,EAAGuE,EAAGoU,GAC5B,OAAOpU,GAAKlL,GAAKsf,GAAKtf,EAAIA,EAAIA,EAAI2G,GAkUlCyc,aA3TF,SAAsBpjB,EAAG2G,EAAGuE,EAAGoU,GAC7B,OAAQpU,IAAMlL,EAAIA,EAAIsf,EAAI,GAAKtf,EAAIA,EAAIA,EAAI,GAAK2G,GA2ThD0c,eApTF,SAAwBrjB,EAAG2G,EAAGuE,EAAGoU,GAE/B,OADAtf,GAAKsf,EAAI,GACD,EACCpU,EAAI,EAAIlL,EAAIA,EAAIA,EAAIA,EAAI2G,GAEzBuE,EAAI,IAAMlL,GAAK,GAAKA,EAAIA,EAAIA,EAAI,GAAK2G,GAgT7C2c,YAzSF,SAAqBtjB,EAAG2G,EAAGuE,EAAGoU,GAC5B,OAAOpU,GAAKlL,GAAKsf,GAAKtf,EAAIA,EAAIA,EAAIA,EAAI2G,GAyStC4c,aAlSF,SAAsBvjB,EAAG2G,EAAGuE,EAAGoU,GAC7B,OAAOpU,IAAMlL,EAAIA,EAAIsf,EAAI,GAAKtf,EAAIA,EAAIA,EAAIA,EAAI,GAAK2G,GAkSnD6c,eA3RF,SAAwBxjB,EAAG2G,EAAGuE,EAAGoU,GAE/B,OADAtf,GAAKsf,EAAI,GACD,EACCpU,EAAI,EAAIlL,EAAIA,EAAIA,EAAIA,EAAIA,EAAI2G,EAE9BuE,EAAI,IAAMlL,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAAK2G,GAuRhD8c,WAhRF,SAAoBzjB,EAAG2G,EAAGuE,EAAGoU,GAC3B,OAAQpU,EAAIpN,KAAKM,IAAI4B,EAAIsf,GAAKxhB,KAAKI,GAAK,IAAMgN,EAAIvE,GAgRlD+c,YAzQF,SAAqB1jB,EAAG2G,EAAGuE,EAAGoU,GAC5B,OAAOpU,EAAIpN,KAAKQ,IAAI0B,EAAIsf,GAAKxhB,KAAKI,GAAK,IAAMyI,GAyQ7Cgd,cAlQF,SAAuB3jB,EAAG2G,EAAGuE,EAAGoU,GAC9B,OAAQpU,EAAI,GAAKpN,KAAKM,IAAIN,KAAKI,GAAK8B,EAAIsf,GAAK,GAAK3Y,GAkQlDid,WA3PF,SAAoB5jB,EAAG2G,EAAGuE,EAAGoU,GAC3B,OAAc,IAANtf,EAAW2G,EAAIuE,EAAIpN,KAAKE,IAAI,EAAG,IAAMgC,EAAIsf,EAAI,IAAM3Y,GA2P3Dkd,YApPF,SAAqB7jB,EAAG2G,EAAGuE,EAAGoU,GAC5B,OAAQtf,IAAMsf,EAAK3Y,EAAIuE,EAAIA,GAAiC,EAA3BpN,KAAKE,IAAI,GAAI,GAAKgC,EAAIsf,IAAU3Y,GAoPjEmd,cA7OF,SAAuB9jB,EAAG2G,EAAGuE,EAAGoU,GAC9B,OAAU,IAANtf,EACK2G,EAEL3G,IAAMsf,EACD3Y,EAAIuE,GAEblL,GAAKsf,EAAI,GACD,EACCpU,EAAI,EAAIpN,KAAKE,IAAI,EAAG,IAAMgC,EAAI,IAAM2G,EAEtCuE,EAAI,GAA+B,EAAzBpN,KAAKE,IAAI,GAAI,KAAOgC,IAAU2G,GAmO/Cod,WA5NF,SAAoB/jB,EAAG2G,EAAGuE,EAAGoU,GAC3B,OAAQpU,GAAKpN,KAAKD,KAAK,GAAKmC,GAAKsf,GAAKtf,GAAK,GAAK2G,GA4NhDqd,YArNF,SAAqBhkB,EAAG2G,EAAGuE,EAAGoU,GAC5B,OAAOpU,EAAIpN,KAAKD,KAAK,GAAKmC,EAAIA,EAAIsf,EAAI,GAAKtf,GAAK2G,GAqNhDsd,cA9MF,SAAuBjkB,EAAG2G,EAAGuE,EAAGoU,GAE9B,OADAtf,GAAKsf,EAAI,GACD,GACEpU,EAAI,GAAKpN,KAAKD,KAAK,EAAImC,EAAIA,GAAK,GAAK2G,EAExCuE,EAAI,GAAKpN,KAAKD,KAAK,GAAKmC,GAAK,GAAKA,GAAK,GAAK2G,GA0MnDud,cAnMF,SAAuBlkB,EAAG2G,EAAGuE,EAAGoU,GAC9B,IAAiBvf,EAAI,EACrB,OAAU,IAANC,EACK2G,EAGC,KADV3G,GAAKsf,GAEI3Y,EAAIuE,GAERnL,IACHA,EAAQ,GAAJuf,IAGEkD,EADGF,EAXiBpX,EAWJA,EAAGnL,EAXnB,SAYcC,EAAGsf,GAAK3Y,IAuL9Bwd,eAhLF,SAAwBnkB,EAAG2G,EAAGuE,EAAGoU,GAC/B,IAAiBvf,EAAI,EACrB,GAAU,IAANC,EACF,OAAO2G,EAGT,GAAU,KADV3G,GAAKsf,GAEH,OAAO3Y,EAAIuE,EAERnL,IACHA,EAAQ,GAAJuf,GAEN,IAAImD,EAAOH,EAXiBpX,EAWJA,EAAGnL,EAXnB,SAYR,OAAO0iB,EAAK7hB,EAAI9C,KAAKE,IAAI,GAAI,GAAKgC,GAAKlC,KAAKQ,KAAK0B,EAAIsf,EAAImD,EAAKtX,IAAM,EAAIrN,KAAKI,IAAMukB,EAAK1iB,GAAM0iB,EAAKvX,EAAIvE,GAoKvGyd,iBA7JF,SAA0BpkB,EAAG2G,EAAGuE,EAAGoU,GACjC,IAAiBvf,EAAI,EACrB,GAAU,IAANC,EACF,OAAO2G,EAGT,GAAU,KADV3G,GAAKsf,EAAI,GAEP,OAAO3Y,EAAIuE,EAERnL,IACHA,EAAIuf,GAAK,GAAM,MAEjB,IAAImD,EAAOH,EAXiBpX,EAWJA,EAAGnL,EAXnB,SAYR,OAAIC,EAAI,GACE,GAAMwiB,EAAQC,EAAMziB,EAAGsf,GAAK3Y,EAE/B8b,EAAK7hB,EAAI9C,KAAKE,IAAI,GAAI,IAAMgC,GAAK,IACtClC,KAAKQ,KAAK0B,EAAIsf,EAAImD,EAAKtX,IAAM,EAAIrN,KAAKI,IAAMukB,EAAK1iB,GAAM,GAAM0iB,EAAKvX,EAAIvE,GA6IxE0d,WAtIF,SAAoBrkB,EAAG2G,EAAGuE,EAAGoU,EAAGnU,GAI9B,YAHUpI,IAANoI,IACFA,EAAI,SAECD,GAAKlL,GAAKsf,GAAKtf,IAAMmL,EAAI,GAAKnL,EAAImL,GAAKxE,GAmI9C2d,YA5HF,SAAqBtkB,EAAG2G,EAAGuE,EAAGoU,EAAGnU,GAI/B,YAHUpI,IAANoI,IACFA,EAAI,SAECD,IAAMlL,EAAIA,EAAIsf,EAAI,GAAKtf,IAAMmL,EAAI,GAAKnL,EAAImL,GAAK,GAAKxE,GAyH3D4d,cAlHF,SAAuBvkB,EAAG2G,EAAGuE,EAAGoU,EAAGnU,GAKjC,YAJUpI,IAANoI,IACFA,EAAI,UAENnL,GAAKsf,EAAI,GACD,EACCpU,EAAI,GAAKlL,EAAIA,IAAuB,GAAhBmL,GAAM,QAAenL,EAAImL,IAAMxE,EAErDuE,EAAI,IAAMlL,GAAK,GAAKA,IAAuB,GAAhBmL,GAAM,QAAenL,EAAImL,GAAK,GAAKxE,GA2GrE+b,aAAcA,EACdC,cAAeA,EACf6B,gBA3EF,SAAyBxkB,EAAG2G,EAAGuE,EAAGoU,GAChC,OAAItf,EAAIsf,EAAI,EAC6B,GAAhCoD,EAAkB,EAAJ1iB,EAAO,EAAGkL,EAAGoU,GAAW3Y,EAEJ,GAApCgc,EAAkB,EAAJ3iB,EAAQsf,EAAG,EAAGpU,EAAGoU,GAAe,GAAJpU,EAAUvE,IAnU/D,GAgZA,SAAU/I,GAER,aAOA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BI,EAAQniB,EAAOgG,KAAK0B,OAAOya,MAC3B/U,EAAUpN,EAAOgG,KAAKoH,QACtBK,EAAYzN,EAAOgG,KAAKyH,UACxBuF,EAA4BhT,EAAOgG,KAAKgN,0BAQxC+d,EAAgB,CACdlX,GAAsB,OACtB7N,EAAsB,OACtBmB,EAAsB,SACtB2M,GAAsB,MACtB7N,EAAsB,MACtB+kB,QAAsB,UACtBC,WAAsB,UACtBvkB,UAAsB,kBACtB,eAAsB,cACtB,YAAsB,WACtB,cAAsB,aACtB,YAAsB,WACtB,aAAsB,YACtB,cAAsB,aACtB,iBAAsB,cACtB,cAAsB,aACtB,mBAAsB,kBACtB,oBAAsB,mBACtB,iBAAsB,gBACtB,kBAAsB,iBACtB,oBAAsB,mBACtB,iBAAsB,gBACtB,eAAsB,cACtB,kBAAsB,iBACtB,cAAsB,aACtBkZ,QAAsB,UACtB,YAAsB,WACtB,YAAsB,WACtB,gBAAsB,gBACtB,kBAAsB,kBAGxBsL,EAAkB,CAChBC,OAAQ,gBACRjrB,KAAQ,eAGVkrB,EAAQ,YAAaC,EAAQ,YAWjC,SAASC,EAAcrJ,GAErB,OAAIA,KAAQ8I,EACHA,EAAc9I,GAEhBA,EAGT,SAASsJ,EAAetJ,EAAMrhB,EAAO4qB,EAAkB9jB,GACrD,IACIwR,EADAyP,EAAoD,mBAA1Cnd,OAAOC,UAAUC,SAAShL,KAAKE,GAG7C,GAAc,SAATqhB,GAA4B,WAATA,GAAgC,SAAVrhB,EAGzC,IAAa,kBAATqhB,EACP,MAAkB,uBAAVrhB,EAEL,GAAa,oBAATqhB,EAELrhB,EADY,SAAVA,EACM,KAGAA,EAAM8b,QAAQ,KAAM,KAAK/T,MAAM,OAAOwH,IAAI5I,iBAGjD,GAAa,oBAAT0a,EAELrhB,EADE4qB,GAAoBA,EAAiBva,gBAC/BjE,EACNwe,EAAiBva,gBAAiBjX,EAAOyxB,wBAAwB7qB,IAG3D5G,EAAOyxB,wBAAwB7qB,QAGtC,GAAa,YAATqhB,EACPrhB,EAAkB,SAAVA,GAA8B,WAAVA,EAExB4qB,IAAiD,IAA7BA,EAAiBE,UACvC9qB,GAAQ,QAGP,GAAa,YAATqhB,EACPrhB,EAAQ2G,WAAW3G,GACf4qB,GAAwD,qBAA7BA,EAAiB5L,UAC9Chf,GAAS4qB,EAAiB5L,cAGzB,GAAa,eAATqC,EACPrhB,EAAkB,UAAVA,EAAoB,OAAmB,QAAVA,EAAkB,QAAU,cAE9D,GAAa,gBAATqhB,EAEP/I,EAASzR,EAAU7G,EAAO8G,GAAYA,EAAW,SAE9C,GAAa,eAATua,EAAuB,CAC9B,IAAI0J,EAAY/qB,EAAMb,QAAQ,QAC1B6rB,EAAchrB,EAAMb,QAAQ,UAC5Ba,EAAQ,QACR+qB,GAAa,GAAKC,GAAe,GAAKA,EAAcD,IAGhC,IAAfA,GAAoBC,GAAe,KAF1ChrB,EAAQ,cAMP,IAAa,SAATqhB,GAA4B,eAATA,GAAkC,SAATA,EACnD,OAAOrhB,EAEJ,GAAa,mBAATqhB,EACP,MAAkB,oBAAVrhB,EAGRsY,EAASyP,EAAU/nB,EAAMuP,IAAI1I,GAAaA,EAAU7G,EAAO8G,SA5D3D9G,EAAQ,GA+DV,OAAS+nB,GAAW7O,MAAMZ,GAAUtY,EAAQsY,EAM9C,SAAS2S,EAAY/J,GACnB,OAAO,IAAIpI,OAAO,KAAOoI,EAAIzR,KAAK,KAAO,OAAQ,KAkCnD,SAASyb,EAAkBvI,EAAKwI,GAC9B,IAAIC,EAA0BC,EAAU1rB,EAAGC,EAA7B0rB,EAAY,GAC1B,IAAK3rB,EAAI,EAAGC,EAAMurB,EAAUtrB,OAAQF,EAAIC,EAAKD,IAC3CyrB,EAAWD,EAAUxrB,GACrB0rB,EAAW1I,EAAI4I,qBAAqBH,GACpCE,EAAYA,EAAU3pB,OAAO6O,MAAM3F,UAAUnD,MAAM5H,KAAKurB,IAE1D,OAAOC,EA6MT,SAASE,EAAmB1N,EAAS2N,GACnC,IAAIC,EAAeC,GAAiB,EAMpC,OAJAD,EAAgBE,EAAgB9N,EAAS2N,EAAUjd,SAC9Bid,EAAU5rB,SAC7B8rB,EAKJ,SAA6B7N,EAAS2N,GACpC,IAAII,EAAUF,GAAiB,EAC/B,KAAO7N,EAAQ5U,YAA8C,IAAhC4U,EAAQ5U,WAAW+X,UAAkBwK,EAAU5rB,QACtE8rB,IACFE,EAAWJ,EAAUjd,OAGvBmd,EAAiBC,EADjB9N,EAAUA,EAAQ5U,WACwB2iB,GAE5C,OAA4B,IAArBJ,EAAU5rB,OAdEisB,CAAoBhO,EAAS2N,IAEzCC,GAAiBC,GAAwC,IAArBF,EAAU5rB,OAkBvD,SAAS+rB,EAAgB9N,EAAS+N,GAChC,IAEqCE,EAASpsB,EAF1CyrB,EAAWtN,EAAQsN,SACnBY,EAAalO,EAAQmO,aAAa,SAClC/J,EAAKpE,EAAQmO,aAAa,MAS9B,GANAF,EAAU,IAAIjT,OAAO,IAAMsS,EAAU,KACrCS,EAAWA,EAAS/P,QAAQiQ,EAAS,IACjC7J,GAAM2J,EAAShsB,SACjBksB,EAAU,IAAIjT,OAAO,IAAMoJ,EAAK,mBAAoB,KACpD2J,EAAWA,EAAS/P,QAAQiQ,EAAS,KAEnCC,GAAcH,EAAShsB,OAEzB,IAAKF,GADLqsB,EAAaA,EAAWjkB,MAAM,MACVlI,OAAQF,KAC1BosB,EAAU,IAAIjT,OAAO,MAAQkT,EAAWrsB,GAAK,mBAAoB,KACjEksB,EAAWA,EAAS/P,QAAQiQ,EAAS,IAGzC,OAA2B,IAApBF,EAAShsB,OAOlB,SAASqsB,EAAYvJ,EAAKT,GACxB,IAAI3B,EAEJ,GADAoC,EAAIR,iBAAmB5B,EAAKoC,EAAIR,eAAeD,IAC3C3B,EACF,OAAOA,EAET,IAAI4L,EAAMxsB,EAAGC,EAAKwsB,EAAWzJ,EAAI4I,qBAAqB,KACtD,IAAK5rB,EAAI,EAAGC,EAAMwsB,EAASvsB,OAAQF,EAAIC,EAAKD,IAE1C,GAAIuiB,KADJiK,EAAOC,EAASzsB,IACAssB,aAAa,MAC3B,OAAOE,EA/Yb/yB,EAAOizB,sBAAwBpB,EA9CR,CAAC,OAAQ,SAAU,UAAW,WAAY,UAAW,OAAQ,OAC9E,QAAS,SA8Cf7xB,EAAOkzB,wBAA0BrB,EA7CR,CAAC,SAAU,QAAS,SAAU,UAAW,OAAQ,QA8C1E7xB,EAAOmzB,yBAA2BtB,EA7CR,CAAC,UAAW,OAAQ,SAAU,WAAY,WAAY,OAAQ,SA8CxF7xB,EAAOozB,qBAAuBvB,EA7CR,CAAC,SAAU,IAAK,IAAK,MAAO,WAAY,SA+C9D7xB,EAAOqzB,SAAW,GAClBrzB,EAAOszB,aAAe,GACtBtzB,EAAOuzB,UAAY,GAyInBvzB,EAAOyxB,wBAA2B,WAyBhC,SAAS+B,EAAWpf,EAAQyL,EAAMkO,GAChC3Z,EAAO2Z,GAAO3jB,KAAK8J,IAAIlU,EAAOgG,KAAKqF,iBAAiBwU,EAAK,KAW3D,IAAI5b,EAAUjE,EAAOiE,QAGjBoJ,EAASrN,EAAO4D,MAEhBC,EAAW7D,EAAO6D,SAyBlB6I,EAAY,OATH,0BACOW,EAAS,IAAMxJ,EACrB,IAAMwJ,EAAS,IAAMxJ,EACrB,IAAMwJ,EAAS,IAAMxJ,EACrB,IAAMwJ,EAAS,IAAMxJ,EACrB,IAAMwJ,EAAS,IAAMxJ,EACrB,IAAMwJ,EANP,aAUY,KAbT,6BAA+BA,EAAS,OACxCxJ,EAAW,IAAMwJ,EAAS,eAad,KAjBhB,yBAA2BA,EAAS,OAChCxJ,EAAW,IAAMwJ,EAAS,eAiBlB,KAtBX,0BAA4BA,EAAS,OAClCxJ,EAAW,IAAMwJ,EAAS,IAC1BxJ,EAAW,IAAMwJ,EAAS,eAqBjB,KA3Bb,yBAA2BA,EAAS,aA4BxB,KA1BZ,yBAA2BA,EAAS,aA4BhC,IAOZomB,EAAkB,IAAI/T,OAHN,YAFH,MAAQhT,EAAY,MAAQ7I,EAAW,IAAM6I,EAA7C,OAE6B,WAM1CgnB,EAAc,IAAIhU,OAAOhT,EAAW,KAExC,OAAO,SAASinB,GAGd,IAAIvf,EAASnQ,EAAQsE,SACjBqrB,EAAW,GAIf,IAAKD,GAAmBA,IAAmBF,EAAgBrN,KAAKuN,GAC9D,OAAOvf,EAGTuf,EAAejR,QAAQgR,GAAa,SAASvU,GAE3C,IAAI7H,EAAI,IAAIoI,OAAOhT,GAAWkB,KAAKuR,GAAOxY,QAAO,SAAUwY,GAErD,QAAUA,KAEZ0U,EAAYvc,EAAE,GACduI,EAAOvI,EAAEhJ,MAAM,GAAG6H,IAAI5I,YAE1B,OAAQsmB,GACN,IAAK,aA/EX,SAAyBzf,EAAQyL,GAC/BzL,EAAO,GAAKyL,EAAK,GACG,IAAhBA,EAAKpZ,SACP2N,EAAO,GAAKyL,EAAK,IA6EbiU,CAAgB1f,EAAQyL,GACxB,MACF,IAAK,SACHA,EAAK,GAAK7f,EAAOgG,KAAKqF,iBAAiBwU,EAAK,IA/GpD,SAAsBzL,EAAQyL,GAC5B,IAAInV,EAAM1K,EAAOgG,KAAK0E,IAAImV,EAAK,IAAKjV,EAAM5K,EAAOgG,KAAK4E,IAAIiV,EAAK,IAC3D7T,EAAI,EAAGC,EAAI,EACK,IAAhB4T,EAAKpZ,SACPuF,EAAI6T,EAAK,GACT5T,EAAI4T,EAAK,IAGXzL,EAAO,GAAK1J,EACZ0J,EAAO,GAAKxJ,EACZwJ,EAAO,IAAMxJ,EACbwJ,EAAO,GAAK1J,EACZ0J,EAAO,GAAKpI,GAAKtB,EAAMsB,EAAIpB,EAAMqB,GACjCmI,EAAO,GAAKnI,GAAKrB,EAAMoB,EAAItB,EAAMuB,GAmG3B8nB,CAAa3f,EAAQyL,GACrB,MACF,IAAK,SAlGX,SAAqBzL,EAAQyL,GAC3B,IAAImU,EAAcnU,EAAK,GACnBoU,EAA+B,IAAhBpU,EAAKpZ,OAAgBoZ,EAAK,GAAKA,EAAK,GAEvDzL,EAAO,GAAK4f,EACZ5f,EAAO,GAAK6f,EA8FNngB,CAAYM,EAAQyL,GACpB,MACF,IAAK,QACH2T,EAAWpf,EAAQyL,EAAM,GACzB,MACF,IAAK,QACH2T,EAAWpf,EAAQyL,EAAM,GACzB,MACF,IAAK,SACHzL,EAASyL,EAKb+T,EAAS5sB,KAAKoN,EAAO7L,UAErB6L,EAASnQ,EAAQsE,YAInB,IADA,IAAI2rB,EAAiBN,EAAS,GACvBA,EAASntB,OAAS,GACvBmtB,EAASxP,QACT8P,EAAiBl0B,EAAOgG,KAAKgN,0BAA0BkhB,EAAgBN,EAAS,IAElF,OAAOM,GA5IuB,GA6TlC,IAAIC,EAAqB,IAAIzU,OAC3B,SACU1f,EAAO4D,MADjB,gBAEU5D,EAAO4D,MAFjB,gBAGU5D,EAAO4D,MAHjB,gBAIU5D,EAAO4D,MAJjB,WAWF,SAASwwB,EAAsB1P,GAC7B,GAAK1kB,EAAOkzB,wBAAwB9M,KAAK1B,EAAQsN,UAAjD,CAGA,IAGIplB,EACAE,EACAunB,EAAcC,EAAelgB,EAAQ+S,EALrCoN,EAAc7P,EAAQmO,aAAa,WACnCxf,EAAS,EACTC,EAAS,EAITkhB,EAAY9P,EAAQmO,aAAa,SACjC4B,EAAa/P,EAAQmO,aAAa,UAClC7mB,EAAI0Y,EAAQmO,aAAa,MAAQ,EACjC5mB,EAAIyY,EAAQmO,aAAa,MAAQ,EACjC6B,EAAsBhQ,EAAQmO,aAAa,wBAA0B,GACrE8B,GAAmBJ,KAAiBA,EAAcA,EAAYpV,MAAMgV,IACpES,GAAmBJ,IAAcC,GAA4B,SAAdD,GAAuC,SAAfC,EACvEI,EAAaF,GAAkBC,EAC/BE,EAAY,GAAKhB,EAAkB,GAAIiB,EAAY,EAAGC,EAAa,EAgBvE,GAdAF,EAAU5yB,MAAQ,EAClB4yB,EAAUhzB,OAAS,EACnBgzB,EAAUD,WAAaA,EAEnBF,IACI3oB,GAAKC,IAAsC,cAAhCyY,EAAQ5U,WAAWkiB,WAClC8B,EAAkB,cAAgBrmB,EAAUzB,GAAK,IAAMyB,EAAUxB,GAAK,KACtEmI,GAAUsQ,EAAQmO,aAAa,cAAgB,IAAMiB,EACrDpP,EAAQ4C,aAAa,YAAalT,GAClCsQ,EAAQuQ,gBAAgB,KACxBvQ,EAAQuQ,gBAAgB,MAIxBJ,EACF,OAAOC,EAGT,GAAIH,EAIF,OAHAG,EAAU5yB,MAAQuL,EAAU+mB,GAC5BM,EAAUhzB,OAAS2L,EAAUgnB,GAEtBK,EAiDT,GA/CAloB,GAAQW,WAAWgnB,EAAY,IAC/BznB,GAAQS,WAAWgnB,EAAY,IAC/BF,EAAe9mB,WAAWgnB,EAAY,IACtCD,EAAgB/mB,WAAWgnB,EAAY,IACvCO,EAAUloB,KAAOA,EACjBkoB,EAAUhoB,KAAOA,EACjBgoB,EAAUT,aAAeA,EACzBS,EAAUR,cAAgBA,EACrBM,GAOHE,EAAU5yB,MAAQmyB,EAClBS,EAAUhzB,OAASwyB,IAPnBQ,EAAU5yB,MAAQuL,EAAU+mB,GAC5BM,EAAUhzB,OAAS2L,EAAUgnB,GAC7BphB,EAASyhB,EAAU5yB,MAAQmyB,EAC3B/gB,EAASwhB,EAAUhzB,OAASwyB,GASK,UADnCI,EAAsB10B,EAAOgG,KAAK+O,kCAAkC2f,IAC5Crf,SAEkB,SAApCqf,EAAoBxf,cACtB5B,EAASD,EAAUA,EAASC,EAASA,EAASD,GAGR,UAApCqhB,EAAoBxf,cACtB5B,EAASD,EAAUA,EAASC,EAASD,EAASC,GAGhDyhB,EAAYD,EAAU5yB,MAAQmyB,EAAehhB,EAC7C2hB,EAAaF,EAAUhzB,OAASwyB,EAAgBjhB,EACb,QAA/BqhB,EAAoBrf,SACtB0f,GAAa,GAEoB,QAA/BL,EAAoBpf,SACtB0f,GAAc,GAEmB,QAA/BN,EAAoBrf,SACtB0f,EAAY,GAEqB,QAA/BL,EAAoBpf,SACtB0f,EAAa,IAIF,IAAX3hB,GAA2B,IAAXC,GAAyB,IAAT1G,GAAuB,IAATE,GAAoB,IAANd,GAAiB,IAANC,EACzE,OAAO6oB,EAcT,IAZK9oB,GAAKC,IAAsC,cAAhCyY,EAAQ5U,WAAWkiB,WACjC8B,EAAkB,cAAgBrmB,EAAUzB,GAAK,IAAMyB,EAAUxB,GAAK,MAGxEmI,EAAS0f,EAAkB,WAAazgB,EAA/BygB,QAGKxgB,EAAS,KACR1G,EAAOyG,EAAS0hB,GAAa,KAC7BjoB,EAAOwG,EAAS0hB,GAAc,KAGpB,QAArBtQ,EAAQsN,SAAoB,CAG9B,IAFA7K,EAAKzC,EAAQ8E,cAAc0L,gBAAgBl1B,EAAOkE,MAAO,KAElDwgB,EAAQyQ,YACbhO,EAAGvX,YAAY8U,EAAQyQ,YAEzBzQ,EAAQ9U,YAAYuX,QAGpBA,EAAKzC,GACFuQ,gBAAgB,KACnB9N,EAAG8N,gBAAgB,KACnB7gB,EAAS+S,EAAG0L,aAAa,aAAeze,EAG1C,OADA+S,EAAGG,aAAa,YAAalT,GACtB0gB,GAiFT,SAASM,EAA+B7L,EAAK8L,GAC3C,IACIC,EAAY,aAEZC,EAAqBzC,EAAYvJ,EADzB8L,EAASxC,aAAayC,GAAWE,OAAO,IAUpD,GARID,GAAsBA,EAAmB1C,aAAayC,IACxDF,EAA+B7L,EAAKgM,GALjB,CAAC,oBAAqB,KAAM,KAAM,KAAM,KAAM,gBAAiB,KAAM,KAAM,IAAK,KAAM,MAO5FjlB,SAAQ,SAAS2X,GAC1BsN,IAAuBF,EAASI,aAAaxN,IAASsN,EAAmBE,aAAaxN,IACxFoN,EAAS/N,aAAaW,EAAMsN,EAAmB1C,aAAa5K,QAG3DoN,EAASK,SAASjvB,OAErB,IADA,IAAIkvB,EAAiBJ,EAAmBK,WAAU,GAC3CD,EAAeR,YACpBE,EAASzlB,YAAY+lB,EAAeR,YAGxCE,EAASJ,gBAAgBK,GA3E3Bt1B,EAAO61B,iBAAmB,SAAStM,EAAKphB,EAAU8H,EAAS6lB,GACzD,GAAKvM,EAAL,EArNF,SAA4BA,GAE1B,IADA,IAAIyJ,EAAWlB,EAAkBvI,EAAK,CAAC,MAAO,YAAahjB,EAAI,EACxDysB,EAASvsB,QAAUF,EAAIysB,EAASvsB,QAAQ,CAC7C,IAM6CwhB,EAAMtM,EAAGoa,EAAOvvB,EANzD2gB,EAAK6L,EAASzsB,GACdyvB,GAAS7O,EAAG0L,aAAa,eAAiB1L,EAAG0L,aAAa,SAAS2C,OAAO,GAC1ExpB,EAAImb,EAAG0L,aAAa,MAAQ,EAC5B5mB,EAAIkb,EAAG0L,aAAa,MAAQ,EAC5BoD,EAAMnD,EAAYvJ,EAAKyM,GAAOJ,WAAU,GACxCM,GAAgBD,EAAIpD,aAAa,cAAgB,IAAM,cAAgB7mB,EAAI,KAAOC,EAAI,IAC1EkqB,EAAYnD,EAASvsB,OAA6BwH,EAAYjO,EAAOkE,MAGrF,GADAkwB,EAAsB6B,GAClB,SAAS7P,KAAK6P,EAAIjE,UAAW,CAC/B,IAAIoE,EAAMH,EAAIzM,cAAc0L,gBAAgBjnB,EAAW,KACvD,IAAK0N,EAAI,EAA2BnV,GAAxBuvB,EAAQE,EAAIxnB,YAAwBhI,OAAQkV,EAAInV,EAAKmV,IAC/DsM,EAAO8N,EAAMttB,KAAKkT,GAClBya,EAAIC,eAAepoB,EAAWga,EAAK+J,SAAU/J,EAAKqO,WAGpD,KAAOL,EAAId,YACTiB,EAAIxmB,YAAYqmB,EAAId,YAEtBc,EAAMG,EAGR,IAAKza,EAAI,EAA0BnV,GAAvBuvB,EAAQ5O,EAAG1Y,YAAwBhI,OAAQkV,EAAInV,EAAKmV,IAExC,OADtBsM,EAAO8N,EAAMttB,KAAKkT,IACTqW,UAAsC,MAAlB/J,EAAK+J,UACd,eAAlB/J,EAAK+J,UAA+C,SAAlB/J,EAAK+J,WAInB,cAAlB/J,EAAK+J,SACPkE,EAAejO,EAAKqO,UAAY,IAAMJ,EAGtCD,EAAI3O,aAAaW,EAAK+J,SAAU/J,EAAKqO,YAIzCL,EAAI3O,aAAa,YAAa4O,GAC9BD,EAAI3O,aAAa,sBAAuB,KACxC2O,EAAIhB,gBAAgB,MACP9N,EAAGrX,WACLqZ,aAAa8M,EAAK9O,GAEzB6L,EAASvsB,SAAW0vB,GACtB5vB,KA0KJgwB,CAAmBhN,GAEnB,IAAqChjB,EAAGC,EAApCgwB,EAAUx2B,EAAOwR,OAAOilB,QACxBpwB,EAAU+tB,EAAsB7K,GAChCmN,EAAc12B,EAAOgG,KAAK6gB,QAAQ0C,EAAI4I,qBAAqB,MAI/D,GAHA9rB,EAAQyI,YAAcgnB,GAAkBA,EAAehnB,YACvDzI,EAAQmwB,OAASA,EAEU,IAAvBE,EAAYjwB,QAAgBzG,EAAOwD,aAAc,CAInD,IAAIskB,EAAM,GACV,IAAKvhB,EAAI,EAAGC,GAFZkwB,EAAcnN,EAAIoN,YAAY,wBAEAlwB,OAAQF,EAAIC,EAAKD,IAC7CuhB,EAAIvhB,GAAKmwB,EAAYnwB,GAEvBmwB,EAAc5O,EAGhB,IAAI9W,EAAW0lB,EAAY/vB,QAAO,SAASwgB,GAEzC,OADAiN,EAAsBjN,GACfnnB,EAAOizB,sBAAsB7M,KAAKe,EAAG6K,SAAStP,QAAQ,OAAQ,OAhDzE,SAAiCgC,EAASsN,GACxC,KAAOtN,IAAYA,EAAUA,EAAQ5U,aACnC,GAAI4U,EAAQsN,UAAYA,EAAS5L,KAAK1B,EAAQsN,SAAStP,QAAQ,OAAQ,OACjEgC,EAAQmO,aAAa,uBACzB,OAAO,EAGX,OAAO,EA0CE+D,CAAwBzP,EAAInnB,EAAOmzB,6BAE5C,IAAKniB,GAAaA,IAAaA,EAASvK,OACtC0B,GAAYA,EAAS,GAAI,QAD3B,CAIA,IAAIorB,EAAY,GAChBmD,EAAY/vB,QAAO,SAASwgB,GAC1B,MAA2C,aAApCA,EAAG6K,SAAStP,QAAQ,OAAQ,OAClCpS,SAAQ,SAAS6W,GAClB,IAAI2B,EAAK3B,EAAG0L,aAAa,MACzBU,EAAUzK,GAAM9oB,EAAOgG,KAAK6gB,QAAQM,EAAGgL,qBAAqB,MAAMxrB,QAAO,SAASwgB,GAChF,OAAOnnB,EAAOizB,sBAAsB7M,KAAKe,EAAG6K,SAAStP,QAAQ,OAAQ,WAGzE1iB,EAAOszB,aAAakD,GAAUx2B,EAAO62B,gBAAgBtN,GACrDvpB,EAAOqzB,SAASmD,GAAUx2B,EAAO82B,YAAYvN,GAC7CvpB,EAAOuzB,UAAUiD,GAAUjD,EAE3BvzB,EAAO+2B,cAAc/lB,GAAU,SAASgmB,EAAWhmB,GAC7C7I,IACFA,EAAS6uB,EAAW3wB,EAAS2K,EAAU0lB,UAChC12B,EAAOszB,aAAakD,UACpBx2B,EAAOqzB,SAASmD,UAChBx2B,EAAOuzB,UAAUiD,MAEzBrU,EAAM9b,GAAU4J,EAAS6lB,MAyB9B,IAAImB,EAAoB,IAAIvX,OAC1B,qHAEE1f,EAAO4D,MACT,2CAA6C5D,EAAO4D,MAAQ,eAE9Dme,EAAO/hB,EAAQ,CASbk3B,qBAAsB,SAAStwB,EAAOuwB,GACpC,IAAIhY,EAAQvY,EAAMuY,MAAM8X,GAExB,GAAK9X,EAAL,CAGA,IAAIiY,EAAYjY,EAAM,GAGlBkY,EAAalY,EAAM,GACnBzR,EAAWyR,EAAM,GACjBmY,EAAanY,EAAM,GACnB3J,EAAa2J,EAAM,GAEnBiY,IACFD,EAAOC,UAAYA,GAEjBC,IACFF,EAAOE,WAAavX,MAAMvS,WAAW8pB,IAAeA,EAAa9pB,WAAW8pB,IAE1E3pB,IACFypB,EAAOzpB,SAAWD,EAAUC,IAE1B8H,IACF2hB,EAAO3hB,WAAaA,GAElB8hB,IACFH,EAAOG,WAA4B,WAAfA,EAA0B,EAAIA,KAYtDT,gBAAiB,SAAStN,GACxB,IAMIpC,EADAoQ,EAASzF,EAAkBvI,EALhB,CACT,iBACA,iBACA,qBACA,uBAEE5N,EAAI,EAAG2X,EAAe,GAE9B,IADA3X,EAAI4b,EAAO9wB,OACJkV,MACLwL,EAAKoQ,EAAO5b,IACLkX,aAAa,eAClBuC,EAA+B7L,EAAKpC,GAEtCmM,EAAanM,EAAG0L,aAAa,OAAS1L,EAExC,OAAOmM,GAYTkE,gBAAiB,SAAS9S,EAASjW,EAAY+nB,GAE7C,GAAK9R,EAAL,CAIA,IAAI9d,EAEA8G,EAAU+pB,EADVjG,EAAmB,GAGD,qBAAXgF,IACTA,EAAS9R,EAAQmO,aAAa,WAG5BnO,EAAQ5U,YAAc9P,EAAOozB,qBAAqBhN,KAAK1B,EAAQ5U,WAAWkiB,YAC5ER,EAAmBxxB,EAAOw3B,gBAAgB9S,EAAQ5U,WAAYrB,EAAY+nB,IAG5E,IAAIkB,EAAgBjpB,EAAW3F,QAAO,SAASC,EAAMkf,GAKnD,OAJArhB,EAAQ8d,EAAQmO,aAAa5K,MAE3Blf,EAAKkf,GAAQrhB,GAERmC,IACN,IAGC4uB,EAAW5V,EAnenB,SAAmC2C,EAAS8R,GAC1C,IAAIlQ,EAAS,GACb,IAAK,IAAIsR,KAAQ53B,EAAOqzB,SAASmD,GAC/B,GAAIpE,EAAmB1N,EAASkT,EAAKjpB,MAAM,MACzC,IAAK,IAAIrF,KAAYtJ,EAAOqzB,SAASmD,GAAQoB,GAC3CtR,EAAOhd,GAAYtJ,EAAOqzB,SAASmD,GAAQoB,GAAMtuB,GAIvD,OAAOgd,EA2dHuR,CAA0BnT,EAAS8R,GACnCx2B,EAAO83B,oBAAoBpT,IAE7BgT,EAAgB3V,EACd2V,EACAC,GAEEA,EAAStG,IACX3M,EAAQ4C,aAAa+J,EAAOsG,EAAStG,IAEvC3jB,EAAW+pB,EAAiBjG,EAAiB9jB,UAAY1N,EAAO6N,KAAKC,sBACjE4pB,EAActG,KAEhBsG,EAActG,GAAS1jB,EAAWD,EAAUiqB,EAActG,GAAQqG,IAGpE,IAAIM,EAAgBC,EAAiBC,EAAkB,GACvD,IAAK,IAAIhQ,KAAQyP,EAEfM,EAAkBzG,EADlBwG,EAAiBzG,EAAcrJ,GACkByP,EAAczP,GAAOuJ,EAAkB9jB,GACxFuqB,EAAgBF,GAAkBC,EAEhCC,GAAmBA,EAAgBC,MACrCl4B,EAAOk3B,qBAAqBe,EAAgBC,KAAMD,GAEpD,IAAIE,EAAcpW,EAAOyP,EAAkByG,GAC3C,OAAOj4B,EAAOozB,qBAAqBhN,KAAK1B,EAAQsN,UAAYmG,EA9tBhE,SAA+B1pB,GAC7B,IAAK,IAAIwZ,KAAQiJ,EAEf,GAAiD,qBAAtCziB,EAAWyiB,EAAgBjJ,KAA+C,KAArBxZ,EAAWwZ,GAA3E,CAIA,GAAgC,qBAArBxZ,EAAWwZ,GAAuB,CAC3C,IAAKjoB,EAAOwR,OAAOC,UAAUwW,GAC3B,SAEFxZ,EAAWwZ,GAAQjoB,EAAOwR,OAAOC,UAAUwW,GAG7C,GAAyC,IAArCxZ,EAAWwZ,GAAMliB,QAAQ,QAA7B,CAIA,IAAIioB,EAAQ,IAAIhuB,EAAOquB,MAAM5f,EAAWwZ,IACxCxZ,EAAWwZ,GAAQ+F,EAAMoK,SAAShrB,EAAQ4gB,EAAMqK,WAAa5pB,EAAWyiB,EAAgBjJ,IAAQ,IAAIqQ,UAEtG,OAAO7pB,EAysBqE8pB,CAAsBJ,KAYlGpB,cAAe,SAAS/lB,EAAU7I,EAAU9B,EAAS4J,EAAS6lB,GAC5D,IAAI91B,EAAOw4B,eAAexnB,EAAU7I,EAAU9B,EAAS4J,EAAS6lB,GAAgB2C,SAUlFX,oBAAqB,SAASpT,GAC5B,IAAIyS,EAAS,GACTznB,EAAQgV,EAAQmO,aAAa,SAEjC,OAAKnjB,GAIgB,kBAAVA,EA7jBf,SAA0BA,EAAOynB,GAC/B,IAAIlP,EAAMrhB,EACV8I,EAAMgT,QAAQ,QAAS,IAAI/T,MAAM,KAAK2B,SAAQ,SAAUooB,GACtD,IAAIC,EAAOD,EAAM/pB,MAAM,KAEvBsZ,EAAO0Q,EAAK,GAAG/Y,OAAOnK,cACtB7O,EAAS+xB,EAAK,GAAG/Y,OAEjBuX,EAAOlP,GAAQrhB,KAsjBbgyB,CAAiBlpB,EAAOynB,GA/iB9B,SAA0BznB,EAAOynB,GAC/B,IAAIlP,EAAMrhB,EACV,IAAK,IAAIG,KAAQ2I,EACY,qBAAhBA,EAAM3I,KAIjBkhB,EAAOlhB,EAAK0O,cACZ7O,EAAQ8I,EAAM3I,GAEdowB,EAAOlP,GAAQrhB,GAwiBbiyB,CAAiBnpB,EAAOynB,GAGnBA,GAVEA,GAoBX2B,qBAAsB,SAASrsB,GAG7B,IAAKA,EACH,OAAO,KAOT,IAAuBlG,EAAGC,EAAtBuyB,EAAe,GAEnB,IAAKxyB,EAAI,EAAGC,GAHZiG,GAFAA,EAASA,EAAOiW,QAAQ,KAAM,KAAK9C,QAEnBjR,MAAM,QAGGlI,OAAQF,EAAIC,EAAKD,GAAK,EAC7CwyB,EAAa/xB,KAAK,CAChBgF,EAAGuB,WAAWd,EAAOlG,IACrB0F,EAAGsB,WAAWd,EAAOlG,EAAI,MAS7B,OAAOwyB,GAWTjC,YAAa,SAASvN,GACpB,IAAgDhjB,EAAGC,EAA/C8f,EAASiD,EAAI4I,qBAAqB,SAClC6G,EAAW,GAGf,IAAKzyB,EAAI,EAAGC,EAAM8f,EAAO7f,OAAQF,EAAIC,EAAKD,IAAK,CAC7C,IAAI0yB,EAAgB3S,EAAO/f,GAAG2yB,YAID,MAD7BD,EAAgBA,EAAcvW,QAAQ,oBAAqB,KACzC9C,QAGVqZ,EAAc9Z,MAAM,sBACdhJ,KAAI,SAASyhB,GAAQ,OAAOA,EAAKhY,UAEzCtP,SAAQ,SAASsnB,GAErB,IAAIzY,EAAQyY,EAAKzY,MAAM,4BACnBga,EAAU,GACVC,EAD6Bja,EAAM,GAAGS,OACL8C,QAAQ,KAAM,IAAI/T,MAAM,WAE7D,IAAKpI,EAAI,EAAGC,EAAM4yB,EAAmB3yB,OAAQF,EAAIC,EAAKD,IAAK,CACzD,IAAIoyB,EAAOS,EAAmB7yB,GAAGoI,MAAM,WACnCrF,EAAWqvB,EAAK,GAChB/xB,EAAQ+xB,EAAK,GACjBQ,EAAQ7vB,GAAY1C,GAEtBgxB,EAAOzY,EAAM,IACRxQ,MAAM,KAAK2B,SAAQ,SAAS+oB,GAEjB,MADdA,EAAQA,EAAM3W,QAAQ,QAAS,IAAI9C,UAI/BoZ,EAASK,GACXr5B,EAAOgG,KAAK0B,OAAOqa,OAAOiX,EAASK,GAAQF,GAG3CH,EAASK,GAASr5B,EAAOgG,KAAK0B,OAAOya,MAAMgX,UAKnD,OAAOH,GAaTM,eAAgB,SAASzqB,EAAK1G,EAAU8H,EAAS5J,GAE/CwI,EAAMA,EAAI6T,QAAQ,SAAU,IAAI9C,OAChC,IAAI5f,EAAOgG,KAAK6kB,QAAQhc,EAAK,CAC3B+S,OAAQ,MACRkJ,WAGF,SAAoB3d,GAElB,IAAIosB,EAAMpsB,EAAEqsB,YACZ,IAAKD,IAAQA,EAAI/R,gBAEf,OADArf,GAAYA,EAAS,OACd,EAGTnI,EAAO61B,iBAAiB0D,EAAI/R,iBAAiB,SAAUiS,EAASC,EAAU1oB,EAAU2oB,GAClFxxB,GAAYA,EAASsxB,EAASC,EAAU1oB,EAAU2oB,KACjD1pB,EAAS5J,OAahBuzB,kBAAmB,SAAS1rB,EAAQ/F,EAAU8H,EAAS5J,GACrD,IACIkjB,GADS,IAAIvpB,EAAOI,OAAOgB,WACdy4B,gBAAgB3rB,EAAO0R,OAAQ,YAChD5f,EAAO61B,iBAAiBtM,EAAI/B,iBAAiB,SAAUiS,EAASC,EAAU1oB,EAAU2oB,GAClFxxB,EAASsxB,EAASC,EAAU1oB,EAAU2oB,KACrC1pB,EAAS5J,MA/iClB,CAmjCoCnG,GAGpCF,EAAOw4B,eAAiB,SAASxnB,EAAU7I,EAAU9B,EAAS4J,EAAS6lB,EAAgBvM,GACrF5mB,KAAKqO,SAAWA,EAChBrO,KAAKwF,SAAWA,EAChBxF,KAAK0D,QAAUA,EACf1D,KAAKsN,QAAUA,EACftN,KAAK6zB,OAAUnwB,GAAWA,EAAQmwB,QAAW,EAC7C7zB,KAAKmzB,eAAiBA,EACtBnzB,KAAKm3B,SAAW,+BAChBn3B,KAAK4mB,IAAMA,IAGHxpB,EA4IPC,EAAOw4B,eAAe/mB,WA3IjBgnB,MAAQ,WACZ91B,KAAKq0B,UAAY,IAAI5f,MAAMzU,KAAKqO,SAASvK,QACzC9D,KAAKo3B,YAAcp3B,KAAKqO,SAASvK,OACjC9D,KAAKq3B,iBAGPj6B,EAAMi6B,cAAgB,WACpB,IAAIhW,EAAQrhB,KACZA,KAAKqO,SAASV,SAAQ,SAASoU,EAASne,GACtCme,EAAQ4C,aAAa,SAAUtD,EAAMwS,QACrCxS,EAAMiW,aAAavV,EAASne,OAIhCxG,EAAMm6B,QAAU,SAAS/S,GACvB,OAAOnnB,EAAOA,EAAOgG,KAAKkI,OAAO0U,WAAWuE,EAAGD,QAAQxE,QAAQ,OAAQ,OAGzE3iB,EAAMk6B,aAAe,SAAS9S,EAAIxf,GAChC,IAAI2b,EAAQ3gB,KAAKu3B,QAAQ/S,GACzB,GAAI7D,GAASA,EAAM6W,YACjB,IACE7W,EAAM6W,YAAYhT,EAAIxkB,KAAKy3B,eAAezyB,EAAOwf,GAAKxkB,KAAK0D,SAE7D,MAAO2gB,GACLhnB,EAAOqF,IAAI2hB,QAIbrkB,KAAK03B,eAITt6B,EAAMq6B,eAAiB,SAASzyB,EAAOwf,GACrC,IAAInD,EAAQrhB,KACZ,OAAO,SAASkH,GACd,IAAI6vB,EACJ1V,EAAMsW,gBAAgBzwB,EAAKsd,EAAI,QAC/BnD,EAAMsW,gBAAgBzwB,EAAKsd,EAAI,UAC3Btd,aAAe7J,EAAOu6B,OAAS1wB,EAAI2wB,mBACrCd,EAAW7vB,EAAIkL,kCAAkCoS,IAEnDtd,EAAI4wB,uBAAuBf,GAC3B1V,EAAM0W,gBAAgB7wB,EAAKsd,GAC3BnD,EAAM/T,SAAW+T,EAAM/T,QAAQkX,EAAItd,GACnCma,EAAMgT,UAAUrvB,GAASkC,EACzBma,EAAMqW,gBAIVt6B,EAAM46B,0BAA4B,SAAS9wB,EAAKP,EAAUsxB,GACxD,IAAIh0B,EAAQiD,EAAIP,GAAWuxB,EAAQl4B,KAAKm3B,SACxC,GAAKe,EAAMzU,KAAKxf,GAAhB,CAGAi0B,EAAMC,UAAY,EAClB,IAAIhS,EAAK+R,EAAMjtB,KAAKhH,GAAO,GAE3B,OADAi0B,EAAMC,UAAY,EACX96B,EAAO46B,GAASj4B,KAAK6zB,QAAQ1N,KAGtC/oB,EAAMu6B,gBAAkB,SAASzwB,EAAKsd,EAAI7d,GACxC,IAAIyxB,EAAcp4B,KAAKg4B,0BAA0B9wB,EAAKP,EAAU,gBAChE,GAAIyxB,EAAa,CACf,IAAIC,EAAc7T,EAAG0L,aAAavpB,EAAW,YACzC+rB,EAAWr1B,EAAOwJ,SAAS2wB,YAAYY,EAAalxB,EAAKmxB,EAAar4B,KAAK0D,SAC/EwD,EAAIV,IAAIG,EAAU+rB,KAItBt1B,EAAMk7B,uBAAyB,SAASpxB,EAAKqxB,GAC3C,OAAO,SAASC,GACdA,EAAQV,yBACRU,EAAQC,SAAWD,EAAQE,SAC3BH,EAAUl0B,KAAKm0B,KAInBp7B,EAAM26B,gBAAkB,SAAS7wB,EAAKyxB,GACpC,IACI5W,EAAgB6W,EAAiBL,EAAWM,EAD5CC,EAAW94B,KAAKg4B,0BAA0B9wB,EAAK,WAAY,aAE/D,GAAI4xB,EAAU,CACZP,EAAY,GACZK,EAAkBv7B,EAAOgG,KAAKiH,gBAAgBpD,EAAI6xB,uBAIlD,IAFA,IAAIC,EAAcF,EAAS,GAAG3rB,WAC1B8rB,EAAgBN,EACbM,EAAc9rB,YAAc8rB,EAAc/I,aAAa,eAAiBhpB,EAAI4xB,UACjFG,EAAgBA,EAAc9rB,WAEhC8rB,EAAc9rB,WAAWF,YAAY+rB,GACrC,IAAK,IAAIp1B,EAAI,EAAGA,EAAIk1B,EAASh1B,OAAQF,IACnCme,EAAU+W,EAASl1B,GACX5D,KAAKu3B,QAAQxV,GACfyV,YACJzV,EACA/hB,KAAKs4B,uBAAuBpxB,EAAKqxB,GACjCv4B,KAAK0D,SAIPo1B,EADuB,IAArBP,EAAUz0B,OACDy0B,EAAU,GAGV,IAAIl7B,EAAOmR,MAAM+pB,GAE9BM,EAAax7B,EAAOgG,KAAKgN,0BACvBuoB,EACAE,EAASC,uBAEPD,EAASA,UACX94B,KAAK+3B,gBAAgBe,EAAUG,GAEjC,IAAIv1B,EAAUrG,EAAOgG,KAAKmN,YAAYqoB,GACtCC,EAAS1nB,OAAQ,EACjB0nB,EAASznB,OAAQ,EACjBynB,EAAStyB,IAAI,SAAU9C,EAAQgN,QAC/BooB,EAAStyB,IAAI,SAAU9C,EAAQiN,QAC/BmoB,EAAS9wB,MAAQtE,EAAQsE,MACzB8wB,EAASloB,MAAQlN,EAAQkN,MACzBkoB,EAASjoB,MAAQ,EACjBioB,EAAS5kB,oBAAoB,CAAE7K,EAAG3F,EAAQoN,WAAYxH,EAAG5F,EAAQqN,YAAc,SAAU,UACzF7J,EAAI4xB,SAAWA,cAIR5xB,EAAI4xB,UAIf17B,EAAMs6B,YAAc,WACS,MAArB13B,KAAKo3B,cACTp3B,KAAKq0B,UAAYr0B,KAAKq0B,UAAUrwB,QAAO,SAASwgB,GAE9C,OAAa,MAANA,KAETxkB,KAAKwF,SAASxF,KAAKq0B,UAAWr0B,KAAKqO,YAMzC,SAAU9G,GAER,aAIA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAkB/C,SAAS+L,EAAMC,EAAGC,GAChBtJ,KAAKqJ,EAAIA,EACTrJ,KAAKsJ,EAAIA,EAlBPjM,EAAO+L,MACT/L,EAAOyrB,KAAK,oCAIdzrB,EAAO+L,MAAQA,EAgBfA,EAAM0F,UAAiD,CAErDnJ,KAAM,QAENmb,YAAa1X,EAOb3E,IAAK,SAAUy0B,GACb,OAAO,IAAI9vB,EAAMpJ,KAAKqJ,EAAI6vB,EAAK7vB,EAAGrJ,KAAKsJ,EAAI4vB,EAAK5vB,IASlDC,UAAW,SAAU2vB,GAGnB,OAFAl5B,KAAKqJ,GAAK6vB,EAAK7vB,EACfrJ,KAAKsJ,GAAK4vB,EAAK5vB,EACRtJ,MAQTm5B,UAAW,SAAUC,GACnB,OAAO,IAAIhwB,EAAMpJ,KAAKqJ,EAAI+vB,EAAQp5B,KAAKsJ,EAAI8vB,IAS7CC,gBAAiB,SAAUD,GAGzB,OAFAp5B,KAAKqJ,GAAK+vB,EACVp5B,KAAKsJ,GAAK8vB,EACHp5B,MAQTs5B,SAAU,SAAUJ,GAClB,OAAO,IAAI9vB,EAAMpJ,KAAKqJ,EAAI6vB,EAAK7vB,EAAGrJ,KAAKsJ,EAAI4vB,EAAK5vB,IASlDL,eAAgB,SAAUiwB,GAGxB,OAFAl5B,KAAKqJ,GAAK6vB,EAAK7vB,EACfrJ,KAAKsJ,GAAK4vB,EAAK5vB,EACRtJ,MAQTu5B,eAAgB,SAAUH,GACxB,OAAO,IAAIhwB,EAAMpJ,KAAKqJ,EAAI+vB,EAAQp5B,KAAKsJ,EAAI8vB,IAS7CI,qBAAsB,SAAUJ,GAG9B,OAFAp5B,KAAKqJ,GAAK+vB,EACVp5B,KAAKsJ,GAAK8vB,EACHp5B,MASTsR,SAAU,SAAU8nB,GAClB,OAAO,IAAIhwB,EAAMpJ,KAAKqJ,EAAI+vB,EAAQp5B,KAAKsJ,EAAI8vB,IAU7CK,eAAgB,SAAUL,GAGxB,OAFAp5B,KAAKqJ,GAAK+vB,EACVp5B,KAAKsJ,GAAK8vB,EACHp5B,MAST05B,OAAQ,SAAUN,GAChB,OAAO,IAAIhwB,EAAMpJ,KAAKqJ,EAAI+vB,EAAQp5B,KAAKsJ,EAAI8vB,IAU7CO,aAAc,SAAUP,GAGtB,OAFAp5B,KAAKqJ,GAAK+vB,EACVp5B,KAAKsJ,GAAK8vB,EACHp5B,MAQT45B,GAAI,SAAUV,GACZ,OAAQl5B,KAAKqJ,IAAM6vB,EAAK7vB,GAAKrJ,KAAKsJ,IAAM4vB,EAAK5vB,GAQ/CuwB,GAAI,SAAUX,GACZ,OAAQl5B,KAAKqJ,EAAI6vB,EAAK7vB,GAAKrJ,KAAKsJ,EAAI4vB,EAAK5vB,GAQ3CwwB,IAAK,SAAUZ,GACb,OAAQl5B,KAAKqJ,GAAK6vB,EAAK7vB,GAAKrJ,KAAKsJ,GAAK4vB,EAAK5vB,GAS7CywB,GAAI,SAAUb,GACZ,OAAQl5B,KAAKqJ,EAAI6vB,EAAK7vB,GAAKrJ,KAAKsJ,EAAI4vB,EAAK5vB,GAQ3C0wB,IAAK,SAAUd,GACb,OAAQl5B,KAAKqJ,GAAK6vB,EAAK7vB,GAAKrJ,KAAKsJ,GAAK4vB,EAAK5vB,GAS7C6U,KAAM,SAAU+a,EAAMvvB,GAKpB,MAJiB,qBAANA,IACTA,EAAI,IAENA,EAAIlC,KAAKc,IAAId,KAAKa,IAAI,EAAGqB,GAAI,GACtB,IAAIP,EAAMpJ,KAAKqJ,GAAK6vB,EAAK7vB,EAAIrJ,KAAKqJ,GAAKM,EAAG3J,KAAKsJ,GAAK4vB,EAAK5vB,EAAItJ,KAAKsJ,GAAKK,IAQhFswB,aAAc,SAAUf,GACtB,IAAI9pB,EAAKpP,KAAKqJ,EAAI6vB,EAAK7vB,EACnBgG,EAAKrP,KAAKsJ,EAAI4vB,EAAK5vB,EACvB,OAAO7B,KAAKD,KAAK4H,EAAKA,EAAKC,EAAKA,IAQlC6qB,aAAc,SAAUhB,GACtB,OAAOl5B,KAAKme,KAAK+a,IAQnB5wB,IAAK,SAAU4wB,GACb,OAAO,IAAI9vB,EAAM3B,KAAKa,IAAItI,KAAKqJ,EAAG6vB,EAAK7vB,GAAI5B,KAAKa,IAAItI,KAAKsJ,EAAG4vB,EAAK5vB,KAQnEf,IAAK,SAAU2wB,GACb,OAAO,IAAI9vB,EAAM3B,KAAKc,IAAIvI,KAAKqJ,EAAG6vB,EAAK7vB,GAAI5B,KAAKc,IAAIvI,KAAKsJ,EAAG4vB,EAAK5vB,KAOnEyF,SAAU,WACR,OAAO/O,KAAKqJ,EAAI,IAAMrJ,KAAKsJ,GAS7B6wB,MAAO,SAAU9wB,EAAGC,GAGlB,OAFAtJ,KAAKqJ,EAAIA,EACTrJ,KAAKsJ,EAAIA,EACFtJ,MAQTo6B,KAAM,SAAU/wB,GAEd,OADArJ,KAAKqJ,EAAIA,EACFrJ,MAQTq6B,KAAM,SAAU/wB,GAEd,OADAtJ,KAAKsJ,EAAIA,EACFtJ,MAQTs6B,aAAc,SAAUpB,GAGtB,OAFAl5B,KAAKqJ,EAAI6vB,EAAK7vB,EACdrJ,KAAKsJ,EAAI4vB,EAAK5vB,EACPtJ,MAOTu6B,KAAM,SAAUrB,GACd,IAAI7vB,EAAIrJ,KAAKqJ,EACTC,EAAItJ,KAAKsJ,EACbtJ,KAAKqJ,EAAI6vB,EAAK7vB,EACdrJ,KAAKsJ,EAAI4vB,EAAK5vB,EACd4vB,EAAK7vB,EAAIA,EACT6vB,EAAK5vB,EAAIA,GAOXkW,MAAO,WACL,OAAO,IAAIpW,EAAMpJ,KAAKqJ,EAAGrJ,KAAKsJ,MA5UpC,CAgVoC/L,GAGpC,SAAUgK,GAER,aAGA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAa/C,SAASm9B,EAAaC,GACpBz6B,KAAKy6B,OAASA,EACdz6B,KAAK8J,OAAS,GAbZzM,EAAOm9B,aACTn9B,EAAOyrB,KAAK,2CAedzrB,EAAOm9B,aAAeA,EAEtBn9B,EAAOm9B,aAAa1rB,UAAwD,CAE1EgS,YAAa0Z,EAQbE,YAAa,SAAU3xB,GAErB,OADA/I,KAAK8J,OAAOzF,KAAK0E,GACV/I,MAST26B,aAAc,SAAU7wB,GAEtB,OADA9J,KAAK8J,OAAS9J,KAAK8J,OAAOlE,OAAOkE,GAC1B9J,OAcX3C,EAAOm9B,aAAaI,kBAAoB,SAAUC,EAAIC,EAAIC,EAAIC,GAC5D,IAAIvjB,EACAwjB,GAAOD,EAAG3xB,EAAI0xB,EAAG1xB,IAAMwxB,EAAGvxB,EAAIyxB,EAAGzxB,IAAM0xB,EAAG1xB,EAAIyxB,EAAGzxB,IAAMuxB,EAAGxxB,EAAI0xB,EAAG1xB,GACjE6xB,GAAOJ,EAAGzxB,EAAIwxB,EAAGxxB,IAAMwxB,EAAGvxB,EAAIyxB,EAAGzxB,IAAMwxB,EAAGxxB,EAAIuxB,EAAGvxB,IAAMuxB,EAAGxxB,EAAI0xB,EAAG1xB,GACjE8xB,GAAMH,EAAG1xB,EAAIyxB,EAAGzxB,IAAMwxB,EAAGzxB,EAAIwxB,EAAGxxB,IAAM2xB,EAAG3xB,EAAI0xB,EAAG1xB,IAAMyxB,EAAGxxB,EAAIuxB,EAAGvxB,GACpE,GAAW,IAAP6xB,EAAU,CACZ,IAAIC,EAAKH,EAAME,EACXE,EAAKH,EAAMC,EACX,GAAKC,GAAMA,GAAM,GAAK,GAAKC,GAAMA,GAAM,GACzC5jB,EAAS,IAAI+iB,EAAa,iBACnBE,YAAY,IAAIr9B,EAAO+L,MAAMyxB,EAAGxxB,EAAI+xB,GAAMN,EAAGzxB,EAAIwxB,EAAGxxB,GAAIwxB,EAAGvxB,EAAI8xB,GAAMN,EAAGxxB,EAAIuxB,EAAGvxB,KAGtFmO,EAAS,IAAI+iB,OAKb/iB,EAAS,IAAI+iB,EADH,IAARS,GAAqB,IAARC,EACW,aAGA,YAG9B,OAAOzjB,GAaTpa,EAAOm9B,aAAac,qBAAuB,SAAST,EAAIC,EAAIhxB,GAC1D,IAEIixB,EAAIC,EAAIO,EAAO33B,EAFf6T,EAAS,IAAI+iB,EACb12B,EAASgG,EAAOhG,OAGpB,IAAKF,EAAI,EAAGA,EAAIE,EAAQF,IACtBm3B,EAAKjxB,EAAOlG,GACZo3B,EAAKlxB,GAAQlG,EAAI,GAAKE,GACtBy3B,EAAQf,EAAaI,kBAAkBC,EAAIC,EAAIC,EAAIC,GAEnDvjB,EAAOkjB,aAAaY,EAAMzxB,QAK5B,OAHI2N,EAAO3N,OAAOhG,OAAS,IACzB2T,EAAOgjB,OAAS,gBAEXhjB,GAUTpa,EAAOm9B,aAAagB,wBAA0B,SAAUC,EAASC,GAC/D,IAC6B93B,EADzB6T,EAAS,IAAI+iB,EACb12B,EAAS23B,EAAQ33B,OAErB,IAAKF,EAAI,EAAGA,EAAIE,EAAQF,IAAK,CAC3B,IAAIi3B,EAAKY,EAAQ73B,GACbk3B,EAAKW,GAAS73B,EAAI,GAAKE,GACvBy3B,EAAQf,EAAac,qBAAqBT,EAAIC,EAAIY,GAEtDjkB,EAAOkjB,aAAaY,EAAMzxB,QAK5B,OAHI2N,EAAO3N,OAAOhG,OAAS,IACzB2T,EAAOgjB,OAAS,gBAEXhjB,GAWTpa,EAAOm9B,aAAamB,0BAA4B,SAAU7xB,EAAQ8xB,EAAIC,GACpE,IAAIvzB,EAAMszB,EAAGtzB,IAAIuzB,GACbtzB,EAAMqzB,EAAGrzB,IAAIszB,GACbC,EAAW,IAAIz+B,EAAO+L,MAAMb,EAAIc,EAAGf,EAAIgB,GACvCyyB,EAAa,IAAI1+B,EAAO+L,MAAMd,EAAIe,EAAGd,EAAIe,GACzC0yB,EAASxB,EAAac,qBAAqBhzB,EAAKwzB,EAAUhyB,GAC1DmyB,EAASzB,EAAac,qBAAqBQ,EAAUvzB,EAAKuB,GAC1DoyB,EAAS1B,EAAac,qBAAqB/yB,EAAKwzB,EAAYjyB,GAC5DqyB,EAAS3B,EAAac,qBAAqBS,EAAYzzB,EAAKwB,GAC5D2N,EAAS,IAAI+iB,EAUjB,OARA/iB,EAAOkjB,aAAaqB,EAAOlyB,QAC3B2N,EAAOkjB,aAAasB,EAAOnyB,QAC3B2N,EAAOkjB,aAAauB,EAAOpyB,QAC3B2N,EAAOkjB,aAAawB,EAAOryB,QAEvB2N,EAAO3N,OAAOhG,OAAS,IACzB2T,EAAOgjB,OAAS,gBAEXhjB,IAxKX,CA2KoCla,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAiB/C,SAASquB,EAAML,GACRA,EAIHrrB,KAAKo8B,iBAAiB/Q,GAHtBrrB,KAAKq8B,UAAU,CAAC,EAAG,EAAG,EAAG,IA0b7B,SAASC,EAAQ5yB,EAAGqL,EAAGpL,GAOrB,OANIA,EAAI,IACNA,GAAK,GAEHA,EAAI,IACNA,GAAK,GAEHA,EAAI,EAAI,EACHD,EAAc,GAATqL,EAAIrL,GAASC,EAEvBA,EAAI,GACCoL,EAELpL,EAAI,EAAI,EACHD,GAAKqL,EAAIrL,IAAM,EAAI,EAAIC,GAAK,EAE9BD,EA3dLrM,EAAOquB,MACTruB,EAAOyrB,KAAK,qCAuBdzrB,EAAOquB,MAAQA,EAEfruB,EAAOquB,MAAM5c,UAAiD,CAM5DstB,iBAAkB,SAAS/Q,GACzB,IAAItkB,EAEAskB,KAASK,EAAM6Q,eACjBlR,EAAQK,EAAM6Q,aAAalR,IAGf,gBAAVA,IACFtkB,EAAS,CAAC,IAAK,IAAK,IAAK,IAGtBA,IACHA,EAAS2kB,EAAM8Q,cAAcnR,IAE1BtkB,IACHA,EAAS2kB,EAAM+Q,cAAcpR,IAE1BtkB,IACHA,EAAS2kB,EAAMgR,cAAcrR,IAE1BtkB,IAEHA,EAAS,CAAC,EAAG,EAAG,EAAG,IAEjBA,GACF/G,KAAKq8B,UAAUt1B,IAYnB41B,UAAW,SAASnyB,EAAGoyB,EAAGtsB,GACxB9F,GAAK,IAAKoyB,GAAK,IAAKtsB,GAAK,IAEzB,IAAIsE,EAAGE,EAAG5C,EACN3J,EAAMlL,EAAOgG,KAAKC,MAAMiF,IAAI,CAACiC,EAAGoyB,EAAGtsB,IACnChI,EAAMjL,EAAOgG,KAAKC,MAAMgF,IAAI,CAACkC,EAAGoyB,EAAGtsB,IAIvC,GAFA4B,GAAK3J,EAAMD,GAAO,EAEdC,IAAQD,EACVsM,EAAIE,EAAI,MAEL,CACH,IAAImU,EAAI1gB,EAAMD,EAEd,OADAwM,EAAI5C,EAAI,GAAM+W,GAAK,EAAI1gB,EAAMD,GAAO2gB,GAAK1gB,EAAMD,GACvCC,GACN,KAAKiC,EACHoK,GAAKgoB,EAAItsB,GAAK2Y,GAAK2T,EAAItsB,EAAI,EAAI,GAC/B,MACF,KAAKssB,EACHhoB,GAAKtE,EAAI9F,GAAKye,EAAI,EAClB,MACF,KAAK3Y,EACHsE,GAAKpK,EAAIoyB,GAAK3T,EAAI,EAGtBrU,GAAK,EAGP,MAAO,CACLnN,KAAKo1B,MAAU,IAAJjoB,GACXnN,KAAKo1B,MAAU,IAAJ/nB,GACXrN,KAAKo1B,MAAU,IAAJ3qB,KAQfyZ,UAAW,WACT,OAAO3rB,KAAK88B,SAOdT,UAAW,SAASt1B,GAClB/G,KAAK88B,QAAU/1B,GAOjBg2B,MAAO,WACL,IAAIh2B,EAAS/G,KAAK2rB,YAClB,MAAO,OAAS5kB,EAAO,GAAK,IAAMA,EAAO,GAAK,IAAMA,EAAO,GAAK,KAOlE4uB,OAAQ,WACN,IAAI5uB,EAAS/G,KAAK2rB,YAClB,MAAO,QAAU5kB,EAAO,GAAK,IAAMA,EAAO,GAAK,IAAMA,EAAO,GAAK,IAAMA,EAAO,GAAK,KAOrFi2B,MAAO,WACL,IAAIj2B,EAAS/G,KAAK2rB,YACdsR,EAAMj9B,KAAK28B,UAAU51B,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAEtD,MAAO,OAASk2B,EAAI,GAAK,IAAMA,EAAI,GAAK,KAAOA,EAAI,GAAK,MAO1DC,OAAQ,WACN,IAAIn2B,EAAS/G,KAAK2rB,YACdsR,EAAMj9B,KAAK28B,UAAU51B,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAEtD,MAAO,QAAUk2B,EAAI,GAAK,IAAMA,EAAI,GAAK,KAAOA,EAAI,GAAK,KAAOl2B,EAAO,GAAK,KAO9Eo2B,MAAO,WACL,IAA+B3yB,EAAGoyB,EAAGtsB,EAAjCvJ,EAAS/G,KAAK2rB,YAWlB,OARAnhB,EAAkB,KADlBA,EAAIzD,EAAO,GAAGgI,SAAS,KAChBjL,OAAiB,IAAM0G,EAAKA,EAGnCoyB,EAAkB,KADlBA,EAAI71B,EAAO,GAAGgI,SAAS,KAChBjL,OAAiB,IAAM84B,EAAKA,EAGnCtsB,EAAkB,KADlBA,EAAIvJ,EAAO,GAAGgI,SAAS,KAChBjL,OAAiB,IAAMwM,EAAKA,EAE5B9F,EAAEkB,cAAgBkxB,EAAElxB,cAAgB4E,EAAE5E,eAO/C0xB,OAAQ,WACN,IAA+B7yB,EAA3BxD,EAAS/G,KAAK2rB,YAMlB,OAFAphB,EAAkB,KADlBA,GADAA,EAAI9C,KAAKo1B,MAAkB,IAAZ91B,EAAO,KAChBgI,SAAS,KACRjL,OAAiB,IAAMyG,EAAKA,EAE5BvK,KAAKm9B,QAAU5yB,EAAEmB,eAO1BgqB,SAAU,WACR,OAAO11B,KAAK2rB,YAAY,IAQ1B8J,SAAU,SAAS4H,GACjB,IAAIt2B,EAAS/G,KAAK2rB,YAGlB,OAFA5kB,EAAO,GAAKs2B,EACZr9B,KAAKq8B,UAAUt1B,GACR/G,MAOTs9B,YAAa,WACX,IAAIv2B,EAAS/G,KAAK2rB,YACd4R,EAAUlW,UAAsB,GAAZtgB,EAAO,GAAuB,IAAZA,EAAO,GAAwB,IAAZA,EAAO,IAAW0D,QAAQ,GAAI,IACvF+yB,EAAez2B,EAAO,GAE1B,OADA/G,KAAKq8B,UAAU,CAACkB,EAASA,EAASA,EAASC,IACpCx9B,MAQTy9B,aAAc,SAASC,GACrB,IAAI32B,EAAS/G,KAAK2rB,YACd4R,GAAuB,GAAZx2B,EAAO,GAAuB,IAAZA,EAAO,GAAwB,IAAZA,EAAO,IAAW0D,QAAQ,GAC1E+yB,EAAez2B,EAAO,GAM1B,OAJA22B,EAAYA,GAAa,IAEzBH,EAAW1yB,OAAO0yB,GAAW1yB,OAAO6yB,GAAc,EAAI,IACtD19B,KAAKq8B,UAAU,CAACkB,EAASA,EAASA,EAASC,IACpCx9B,MAQT29B,YAAa,SAASC,GACdA,aAAsBlS,IAC1BkS,EAAa,IAAIlS,EAAMkS,IAGzB,IAI0Ch6B,EAJtC6T,EAAS,GACT4lB,EAAQr9B,KAAK01B,WAEb3uB,EAAS/G,KAAK2rB,YACdkS,EAAcD,EAAWjS,YAE7B,IAAK/nB,EAAI,EAAGA,EAAI,EAAGA,IACjB6T,EAAOpT,KAAKoD,KAAKo1B,MAAO,GAAA91B,EAAOnD,GALhB,GAK0Ci6B,EAAYj6B,KAKvE,OAFA6T,EAAO,GAAK4lB,EACZr9B,KAAKq8B,UAAU5kB,GACRzX,OAWX3C,EAAOquB,MAAMoS,OAAS,oIAQtBzgC,EAAOquB,MAAMqS,OAAS,gGAQtB1gC,EAAOquB,MAAMsS,MAAQ,yDASrB3gC,EAAOquB,MAAM6Q,aAAe,CAC1B0B,UAAsB,UACtBC,aAAsB,UACtBC,KAAsB,UACtBC,WAAsB,UACtBC,MAAsB,UACtBC,MAAsB,UACtBC,OAAsB,UACtBC,MAAsB,UACtBC,eAAsB,UACtBC,KAAsB,UACtBC,WAAsB,UACtBC,MAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,WAAsB,UACtBC,UAAsB,UACtBC,MAAsB,UACtBC,eAAsB,UACtBC,SAAsB,UACtBC,QAAsB,UACtBC,KAAsB,UACtBC,SAAsB,UACtBC,SAAsB,UACtBC,cAAsB,UACtBC,SAAsB,UACtBC,SAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,YAAsB,UACtBC,eAAsB,UACtBC,WAAsB,UACtBC,WAAsB,UACtBC,QAAsB,UACtBC,WAAsB,UACtBC,aAAsB,UACtBC,cAAsB,UACtBC,cAAsB,UACtBC,cAAsB,UACtBC,cAAsB,UACtBC,WAAsB,UACtBC,SAAsB,UACtBC,YAAsB,UACtBC,QAAsB,UACtBC,QAAsB,UACtBC,WAAsB,UACtBC,UAAsB,UACtBC,YAAsB,UACtBC,YAAsB,UACtBC,QAAsB,UACtBC,UAAsB,UACtBC,WAAsB,UACtBC,KAAsB,UACtBC,UAAsB,UACtBC,KAAsB,UACtBC,KAAsB,UACtBC,MAAsB,UACtBC,YAAsB,UACtBC,SAAsB,UACtBC,QAAsB,UACtBC,UAAsB,UACtBC,OAAsB,UACtBC,MAAsB,UACtBC,MAAsB,UACtBC,SAAsB,UACtBC,cAAsB,UACtBC,UAAsB,UACtBC,aAAsB,UACtBC,UAAsB,UACtBC,WAAsB,UACtBC,UAAsB,UACtBC,qBAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,WAAsB,UACtBC,UAAsB,UACtBC,YAAsB,UACtBC,cAAsB,UACtBC,aAAsB,UACtBC,eAAsB,UACtBC,eAAsB,UACtBC,eAAsB,UACtBC,YAAsB,UACtBC,KAAsB,UACtBC,UAAsB,UACtBC,MAAsB,UACtBC,QAAsB,UACtBC,OAAsB,UACtBC,iBAAsB,UACtBC,WAAsB,UACtBC,aAAsB,UACtBC,aAAsB,UACtBC,eAAsB,UACtBC,gBAAsB,UACtBC,kBAAsB,UACtBC,gBAAsB,UACtBC,gBAAsB,UACtBC,aAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,SAAsB,UACtBC,YAAsB,UACtBC,KAAsB,UACtBC,QAAsB,UACtBC,MAAsB,UACtBC,UAAsB,UACtBC,OAAsB,UACtBC,UAAsB,UACtBC,OAAsB,UACtBC,cAAsB,UACtBC,UAAsB,UACtBC,cAAsB,UACtBC,cAAsB,UACtBC,WAAsB,UACtBC,UAAsB,UACtBC,KAAsB,UACtBC,KAAsB,UACtBC,KAAsB,UACtBC,WAAsB,UACtBC,OAAsB,UACtBC,cAAsB,UACtBC,IAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,YAAsB,UACtBC,OAAsB,UACtBC,WAAsB,UACtBC,SAAsB,UACtBC,SAAsB,UACtBC,OAAsB,UACtBC,OAAsB,UACtBC,QAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,UAAsB,UACtBC,KAAsB,UACtBC,YAAsB,UACtBC,UAAsB,UACtBl1B,IAAsB,UACtBm1B,KAAsB,UACtBC,QAAsB,UACtBC,OAAsB,UACtBC,UAAsB,UACtBC,OAAsB,UACtBC,MAAsB,UACtBC,MAAsB,UACtBC,WAAsB,UACtBC,OAAsB,UACtBC,YAAsB,WAmCxB9pC,EAAOquB,MAAM0b,QAAU,SAAS/b,GAC9B,OAAOK,EAAM2b,WAAW3b,EAAM+Q,cAAcpR,KAS9ChuB,EAAOquB,MAAM+Q,cAAgB,SAASpR,GACpC,IAAI7O,EAAQ6O,EAAM7O,MAAMkP,EAAMoS,QAC9B,GAAIthB,EAAO,CACT,IAAIhS,EAAI6c,SAAS7K,EAAM,GAAI,KAAO,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,IAAM,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,GAC5FogB,EAAIvV,SAAS7K,EAAM,GAAI,KAAO,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,IAAM,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,GAC5FlM,EAAI+W,SAAS7K,EAAM,GAAI,KAAO,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,IAAM,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,GAEhG,MAAO,CACL6K,SAAS7c,EAAG,IACZ6c,SAASuV,EAAG,IACZvV,SAAS/W,EAAG,IACZkM,EAAM,GAAK5R,WAAW4R,EAAM,IAAM,KAaxCnf,EAAOquB,MAAM4b,SAAW5b,EAAM0b,QAQ9B/pC,EAAOquB,MAAM6b,QAAU,SAASlc,GAC9B,OAAOK,EAAM2b,WAAW3b,EAAMgR,cAAcrR,KAW9ChuB,EAAOquB,MAAMgR,cAAgB,SAASrR,GACpC,IAAI7O,EAAQ6O,EAAM7O,MAAMkP,EAAMqS,QAC9B,GAAKvhB,EAAL,CAIA,IAGIhS,EAAGoyB,EAAGtsB,EAHNsE,GAAOhK,WAAW4R,EAAM,IAAM,IAAO,KAAO,IAAO,IACnD1H,EAAIlK,WAAW4R,EAAM,KAAO,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,GACxDtK,EAAItH,WAAW4R,EAAM,KAAO,KAAKiH,KAAKjH,EAAM,IAAM,IAAM,GAG5D,GAAU,IAAN1H,EACFtK,EAAIoyB,EAAItsB,EAAI4B,MAET,CACH,IAAI6C,EAAI7C,GAAK,GAAMA,GAAK4C,EAAI,GAAK5C,EAAI4C,EAAI5C,EAAI4C,EACzCpL,EAAQ,EAAJwI,EAAQ6C,EAEhBvK,EAAI8xB,EAAQ5yB,EAAGqL,EAAGH,EAAI,EAAI,GAC1BgoB,EAAIN,EAAQ5yB,EAAGqL,EAAGH,GAClBtE,EAAIgsB,EAAQ5yB,EAAGqL,EAAGH,EAAI,EAAI,GAG5B,MAAO,CACLnN,KAAKo1B,MAAU,IAAJryB,GACX/C,KAAKo1B,MAAU,IAAJD,GACXn1B,KAAKo1B,MAAU,IAAJvsB,GACXkM,EAAM,GAAK5R,WAAW4R,EAAM,IAAM,KAYtCnf,EAAOquB,MAAM8b,SAAW9b,EAAM6b,QAS9BlqC,EAAOquB,MAAM+b,QAAU,SAASpc,GAC9B,OAAOK,EAAM2b,WAAW3b,EAAM8Q,cAAcnR,KAU9ChuB,EAAOquB,MAAM8Q,cAAgB,SAASnR,GACpC,GAAIA,EAAM7O,MAAMkP,EAAMsS,OAAQ,CAC5B,IAAI/5B,EAAQonB,EAAM1f,MAAM0f,EAAMjoB,QAAQ,KAAO,GACzCskC,EAAoC,IAAjBzjC,EAAMH,QAAiC,IAAjBG,EAAMH,OAC/C6jC,EAA2B,IAAjB1jC,EAAMH,QAAiC,IAAjBG,EAAMH,OACtC0G,EAAIk9B,EAAmBzjC,EAAMwH,OAAO,GAAKxH,EAAMwH,OAAO,GAAMxH,EAAM0I,UAAU,EAAG,GAC/EiwB,EAAI8K,EAAmBzjC,EAAMwH,OAAO,GAAKxH,EAAMwH,OAAO,GAAMxH,EAAM0I,UAAU,EAAG,GAC/E2D,EAAIo3B,EAAmBzjC,EAAMwH,OAAO,GAAKxH,EAAMwH,OAAO,GAAMxH,EAAM0I,UAAU,EAAG,GAC/EpC,EAAIo9B,EAAUD,EAAmBzjC,EAAMwH,OAAO,GAAKxH,EAAMwH,OAAO,GAAMxH,EAAM0I,UAAU,EAAG,GAAM,KAEnG,MAAO,CACL0a,SAAS7c,EAAG,IACZ6c,SAASuV,EAAG,IACZvV,SAAS/W,EAAG,IACZ1F,YAAYyc,SAAS9c,EAAG,IAAM,KAAKE,QAAQ,OAYjDpN,EAAOquB,MAAM2b,WAAa,SAAStgC,GACjC,IAAI6gC,EAAS,IAAIlc,EAEjB,OADAkc,EAAOvL,UAAUt1B,GACV6gC,IAxnBX,CA2nBoCrqC,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3CwqC,EAAW,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,KACxDC,EAAU,CAAC,KAAM,OAAQ,KAAM,QAC/BC,EAAW,GACXC,EAAO,OAAQC,EAAM,MAAOC,EAAQ,QAASC,EAAS,SAAUC,EAAS,SACzEC,EAAW,CACTh+B,IAAK89B,EACLG,OAAQL,EACR79B,KAAM89B,EACNK,MAAOP,EACP/zB,OAAQm0B,GACPx/B,EAAmBvL,EAAOgG,KAAKuF,iBAClCV,EAAQT,KAAKS,MAAQ,SAASmB,GAAK,OAASA,EAAI,IAAMA,EAAI,KAAQA,GAStE,SAASm/B,EAAmBC,EAAcC,GACxC,IAAIC,EAAcF,EAAazgC,MAAQY,EAAiBnB,KAAKC,MAAMghC,EAAQp/B,EAAGo/B,EAAQr/B,IAAM,IAC5F,OAAO5B,KAAKo1B,MAAO8L,EAAc,IAAO,IAG1C,SAASC,EAAU5lC,EAAWU,GAC5B,IAAIiO,EAASjO,EAAQqG,UAAU4H,OAC3B7S,EAAS6S,EAAO7S,OAChB+pC,EAAgBxrC,EAAOgG,KAAK0B,OAAOya,MAAM9b,GAC7CmlC,EAAcl3B,OAASA,EACvB7S,GAAUA,EAAO2E,KAAK,UAAYT,EAAW6lC,GAC7Cl3B,EAAOlO,KAAKT,EAAWU,GASzB,SAASolC,EAAoBC,EAAWN,GACtC,IAAI3pC,EAAS2pC,EAAa3pC,OACtBkqC,EAAmBD,EADyBjqC,EAAOmqC,aAEvD,OAAQnqC,EAAOoqC,iBAAmBF,IAChClqC,EAAOoqC,gBAAkBF,EAQ7B,SAASG,EAAoBp/B,GAC3B,OAAOA,EAAUq/B,UAAYhB,GAAUr+B,EAAUs/B,UAAYjB,EAU/D,SAASkB,EAAmBb,EAAcc,EAAIC,GAC5C,IAAIC,EAAQhB,EAAaiB,aAAcC,EAAQlB,EAAamB,aAC5D,SAAIH,IAASE,OAGRJ,IAAOE,IAASE,IAAUH,QAG3BC,GAAgB,MAAPF,OAGTI,GAAgB,MAAPJ,KAiGf,SAASM,EAAgBd,EAAWh/B,EAAWV,EAAGC,GAChD,MAAO,CACLwgC,EAAGf,EACHh/B,UAAWA,EACXggC,QAAS,CACP1gC,EAAGA,EACHC,EAAGA,IAWT,SAAS0gC,EAAoBC,GAC3B,OAAO,SAASlB,EAAWh/B,EAAWV,EAAGC,GACvC,IAAIqI,EAAS5H,EAAU4H,OAAQpD,EAAcoD,EAAOu4B,iBAChDC,EAAax4B,EAAOy4B,uBAAuB77B,EAAaxE,EAAUq/B,QAASr/B,EAAUs/B,SACrFgB,EAAkBJ,EAAclB,EAAWh/B,EAAWV,EAAGC,GAE7D,OADAqI,EAAOuC,oBAAoBi2B,EAAYpgC,EAAUq/B,QAASr/B,EAAUs/B,SAC7DgB,GAcX,SAASC,EAAcvgC,EAAWq/B,EAASC,EAAShgC,EAAGC,GACrD,IAAIqI,EAAS5H,EAAU4H,OACnB+2B,EAAU/2B,EAAOo2B,SAASh+B,EAAUwgC,QACpC/mB,EAAO7R,EAAO7S,OAAO0rC,UACrBC,EAAU94B,EAAO84B,QAAUjnB,EAC3BknB,EAAa/4B,EAAOg5B,aAAa,IAAIttC,EAAO+L,MAAMC,EAAGC,GAAI8/B,EAASC,GAetE,OAdIqB,EAAWrhC,GAAKohC,IAClBC,EAAWrhC,GAAKohC,GAEdC,EAAWrhC,IAAMohC,IACnBC,EAAWrhC,GAAKohC,GAEdC,EAAWphC,GAAKmhC,IAClBC,EAAWphC,GAAKmhC,GAEdC,EAAWphC,GAAKmhC,IAClBC,EAAWphC,GAAKmhC,GAElBC,EAAWrhC,GAAKq/B,EAAQkC,QACxBF,EAAWphC,GAAKo/B,EAAQmC,QACjBH,EAQT,SAASI,EAAiBn5B,GACxB,OAAOA,EAAOP,QAAUO,EAAON,MAOjC,SAAS05B,EAAuBp5B,EAAQq5B,EAAcC,EAAmBC,EAAMC,GAC7E,GAA6B,IAAzBx5B,EAAOq5B,GAAqB,CAC9B,IACII,EAAWD,EADFx5B,EAAO05B,4BAA4BH,GACZv5B,EAAOs5B,GAC3Ct5B,EAAOnL,IAAIykC,EAAmBG,IAQlC,SAASE,EAAYvC,EAAWh/B,EAAWV,EAAGC,GAC5C,IAQgCiiC,EAR5B55B,EAAS5H,EAAU4H,OAEnB65B,EAAY75B,EAAO05B,0BAA0B,EAAG15B,EAAOd,OACvD65B,EAAaJ,EAAcvgC,EAAWA,EAAUq/B,QAASr/B,EAAUs/B,QAAShgC,EAAGC,GAI/EmiC,EAAgBhkC,KAAKmP,IAAmB,EAAf8zB,EAAWrhC,GAASmiC,EAAUniC,EACvDqiC,EAAc/5B,EAAOf,MACrB66B,EAAgB,EAElBF,EAAU,GAGVA,EAAU3iC,EACRnB,KAAKC,MAAO+jC,EAAgB95B,EAAOjB,OAAU86B,EAAUliC,EAAIqI,EAAOhB,SAIhE5G,EAAUq/B,UAAYpB,GAAQj+B,EAAUs/B,UAAYlB,IACtDoD,GAAWA,GAETxhC,EAAUq/B,UAAYlB,GAASn+B,EAAUs/B,UAAYpB,IACvDsD,GAAWA,GAETT,EAAiBn5B,KACnB45B,GAAWA,IAGf,IAAII,EAAYD,IAAgBH,EAChC,GAAII,EAAW,CACb,IAAIC,EAAmBj6B,EAAO05B,4BAA4B/hC,EAC1DqI,EAAOnL,IAAI,QAAS+kC,GACpBR,EAAuBp5B,EAAQ,QAAS,SAAU,IAAKi6B,GACvDhD,EAAU,UAAWiB,EAAgBd,EAAWh/B,EAAWV,EAAGC,IAEhE,OAAOqiC,EAOT,SAASE,EAAY9C,EAAWh/B,EAAWV,EAAGC,GAC5C,IAQgCiiC,EAR5B55B,EAAS5H,EAAU4H,OAEnB65B,EAAY75B,EAAO05B,0BAA0B15B,EAAOf,MAAO,GAC3D85B,EAAaJ,EAAcvgC,EAAWA,EAAUq/B,QAASr/B,EAAUs/B,QAAShgC,EAAGC,GAI/EmiC,EAAgBhkC,KAAKmP,IAAmB,EAAf8zB,EAAWphC,GAASkiC,EAAUliC,EACvDoiC,EAAc/5B,EAAOd,MACrB46B,EAAgB,EAElBF,EAAU,GAGVA,EAAU3iC,EACRnB,KAAKC,MAAO+jC,EAAgB95B,EAAOhB,OAAU66B,EAAUniC,EAAIsI,EAAOjB,SAIhE3G,EAAUq/B,UAAYpB,GAAQj+B,EAAUs/B,UAAYlB,IACtDoD,GAAWA,GAETxhC,EAAUq/B,UAAYlB,GAASn+B,EAAUs/B,UAAYpB,IACvDsD,GAAWA,GAETT,EAAiBn5B,KACnB45B,GAAWA,IAGf,IAAII,EAAYD,IAAgBH,EAChC,GAAII,EAAW,CACb,IAAIC,EAAmBj6B,EAAO05B,4BAA4BhiC,EAC1DsI,EAAOnL,IAAI,QAAS+kC,GACpBR,EAAuBp5B,EAAQ,QAAS,SAAU,IAAKi6B,GACvDhD,EAAU,UAAWiB,EAAgBd,EAAWh/B,EAAWV,EAAGC,IAEhE,OAAOqiC,EAuKT,SAASG,EAAY/C,EAAWh/B,EAAWV,EAAGC,EAAG5F,GAC/CA,EAAUA,GAAW,GACrB,IAEqBqoC,EAAUr7B,EAAQC,EAAQq7B,EAG3CC,EAAOC,EALPv6B,EAAS5H,EAAU4H,OACnB+3B,EAAe/3B,EAAO+3B,aAAcE,EAAej4B,EAAOi4B,aAC1DL,EAAK7lC,EAAQ6lC,GACbC,EAAsBV,EAAoBC,EAAWp3B,GACrDw6B,EAAgB7C,EAAmB33B,EAAQ43B,EAAIC,GACjC4C,EAAeriC,EAAUqiC,aAE3C,GAAID,EACF,OAAO,EAET,GAAIC,EACF17B,EAAS3G,EAAU2G,OAAS07B,EAC5Bz7B,EAAS5G,EAAU4G,OAASy7B,MAEzB,CAgBH,GAfAL,EAAWzB,EAAcvgC,EAAWA,EAAUq/B,QAASr/B,EAAUs/B,QAAShgC,EAAGC,GAM7E2iC,EAAe,MAAP1C,EAAarhC,EAAK6jC,EAAS1iC,GAAK,EACxC6iC,EAAe,MAAP3C,EAAarhC,EAAK6jC,EAASziC,GAAK,EACnCS,EAAUkiC,QACbliC,EAAUkiC,MAAQA,GAEfliC,EAAUmiC,QACbniC,EAAUmiC,MAAQA,GAGhBv6B,EAAO06B,kBACRtiC,EAAUkiC,QAAUA,GAASliC,EAAUmiC,QAAUA,GAElD,OAAO,EAKT,GAFAF,EAAMr6B,EAAO05B,4BAET7B,IAAwBD,EAAI,CAE9B,IAIyC+C,EAJrC9wB,EAAW/T,KAAKmP,IAAIm1B,EAAS1iC,GAAK5B,KAAKmP,IAAIm1B,EAASziC,GACpDijC,EAAWxiC,EAAUwiC,SAGrBntC,EAAQoc,GAFW/T,KAAKmP,IAAIo1B,EAAI3iC,EAAIkjC,EAAS77B,OAASiB,EAAOjB,QAC3DjJ,KAAKmP,IAAIo1B,EAAI1iC,EAAIijC,EAAS57B,OAASgB,EAAOhB,SAEhDD,EAAS67B,EAAS77B,OAAStR,EAC3BuR,EAAS47B,EAAS57B,OAASvR,OAG3BsR,EAASjJ,KAAKmP,IAAIm1B,EAAS1iC,EAAIsI,EAAOjB,OAASs7B,EAAI3iC,GACnDsH,EAASlJ,KAAKmP,IAAIm1B,EAASziC,EAAIqI,EAAOhB,OAASq7B,EAAI1iC,GAGjD6/B,EAAoBp/B,KACtB2G,GAAU,EACVC,GAAU,GAER5G,EAAUkiC,QAAUA,GAAgB,MAAP1C,IAC/Bx/B,EAAUq/B,QAAUf,EAASt+B,EAAUq/B,SACvC14B,IAAW,EACX3G,EAAUkiC,MAAQA,GAEhBliC,EAAUmiC,QAAUA,GAAgB,MAAP3C,IAC/Bx/B,EAAUs/B,QAAUhB,EAASt+B,EAAUs/B,SACvC14B,IAAW,EACX5G,EAAUmiC,MAAQA,GAItB,IAAIM,EAAY76B,EAAOjB,OAAQ+7B,EAAY96B,EAAOhB,OAclD,OAbK44B,GAMI,MAAPA,GAAc53B,EAAOnL,IAAI,SAAUkK,GAC5B,MAAP64B,GAAc53B,EAAOnL,IAAI,SAAUmK,MANlC+4B,GAAgB/3B,EAAOnL,IAAI,SAAUkK,IACrCk5B,GAAgBj4B,EAAOnL,IAAI,SAAUmK,KAOxC27B,EAAYE,IAAc76B,EAAOjB,QAAU+7B,IAAc96B,EAAOhB,SAE9Di4B,EAAU,UAAWiB,EAAgBd,EAAWh/B,EAAWV,EAAGC,IAEzDgjC,EA0HTvE,EAAS2E,wBAhnBT,SAAiC3D,EAAWL,EAASD,GACnD,IACIe,EAAsBV,EAAoBC,EAAWN,GACrDc,EAAK,GAOT,GANkB,IAAdb,EAAQr/B,GAAyB,IAAdq/B,EAAQp/B,EAC7BigC,EAAK,IAEgB,IAAdb,EAAQr/B,GAAyB,IAAdq/B,EAAQp/B,IAClCigC,EAAK,KAEHD,EAAmBb,EAAcc,EAAIC,GACvC,MAVe,cAYjB,IAAImD,EAAInE,EAAmBC,EAAcC,GACzC,OAAOb,EAAS8E,GAAK,WAmmBvB5E,EAAS6E,uBAzlBT,SAAgC7D,EAAWL,EAASD,GAClD,IAAIoE,EAAa,cACjB,GAAkB,IAAdnE,EAAQr/B,GAAWo/B,EAAaqE,aAClC,OAAOD,EAET,GAAkB,IAAdnE,EAAQp/B,GAAWm/B,EAAasE,aAClC,OAAOF,EAET,IAAIF,EAAInE,EAAmBC,EAAcC,GAAW,EACpD,OAAOZ,EAAQ6E,GAAK,WAilBtB5E,EAASiF,4BAvkBT,SAAqCjE,EAAWL,EAASD,GACvD,OAAIM,EAAUN,EAAa3pC,OAAOmuC,cACzBlF,EAAS6E,uBAAuB7D,EAAWL,EAASD,GAEtDV,EAAS2E,wBAAwB3D,EAAWL,EAASD,IAokB9DV,EAASmF,qBAAuBlD,GAxQhC,SAA8BjB,EAAWh/B,EAAWV,EAAGC,GACrD,IAAIK,EAAII,EACJ4H,EAAShI,EAAEgI,OACXw7B,EAAax7B,EAAOy4B,uBAAuBz4B,EAAOu4B,iBAAkBvgC,EAAEy/B,QAASz/B,EAAE0/B,SAErF,GAAI13B,EAAOy7B,aACT,OAAO,EAGT,IAGIC,EAHAC,EAAY7lC,KAAKC,MAAMiC,EAAE4jC,GAAKJ,EAAW7jC,EAAGK,EAAE6jC,GAAKL,EAAW9jC,GAC9DokC,EAAWhmC,KAAKC,MAAM4B,EAAI6jC,EAAW7jC,EAAGD,EAAI8jC,EAAW9jC,GACvDrB,EAAQY,EAAiB6kC,EAAWH,EAAY3jC,EAAEsH,OAGtD,GAAIU,EAAO+7B,UAAY,EAAG,CACxB,IAAIA,EAAa/7B,EAAO+7B,UACpBC,EAAiBh8B,EAAOg8B,eAAiBD,EACzCE,EAAmBnmC,KAAK+P,KAAKxP,EAAQ0lC,GAAaA,EAClDG,EAAkBpmC,KAAKe,MAAMR,EAAQ0lC,GAAaA,EAElDjmC,KAAKmP,IAAI5O,EAAQ6lC,GAAmBF,EACtC3lC,EAAQ6lC,EAEDpmC,KAAKmP,IAAI5O,EAAQ4lC,GAAoBD,IAC5C3lC,EAAQ4lC,GAeZ,OAVI5lC,EAAQ,IACVA,EAAQ,IAAMA,GAEhBA,GAAS,IAETqlC,EAAa17B,EAAO3J,QAAUA,EAC9B2J,EAAO3J,MAAQA,EACXqlC,GACFzE,EAAU,WAAYiB,EAAgBd,EAAWh/B,EAAWV,EAAGC,IAE1D+jC,KAkOTtF,EAAS+F,eAAiB9D,GAlH1B,SAA+BjB,EAAWh/B,EAAWV,EAAGC,GACtD,OAAOwiC,EAAY/C,EAAWh/B,EAAWV,EAAGC,MAkH9Cy+B,EAASgG,SAAW/D,GAtGpB,SAAsBjB,EAAWh/B,EAAWV,EAAGC,GAC7C,OAAOwiC,EAAY/C,EAAWh/B,EAAWV,EAAGC,EAAI,CAAEigC,GAAI,SAsGxDxB,EAASiG,SAAWhE,GA1FpB,SAAsBjB,EAAWh/B,EAAWV,EAAGC,GAC7C,OAAOwiC,EAAY/C,EAAWh/B,EAAWV,EAAGC,EAAI,CAAEigC,GAAI,SA0FxDxB,EAASkG,mBA9ET,SAA4BlF,EAAWh/B,EAAWV,EAAGC,GAEnD,OAAIy/B,EAAUh/B,EAAU4H,OAAO7S,OAAOmuC,cAC7BlF,EAASmG,aAAanF,EAAWh/B,EAAWV,EAAGC,GAEjDy+B,EAASiG,SAASjF,EAAWh/B,EAAWV,EAAGC,IA0EpDy+B,EAASoG,mBA9DT,SAA4BpF,EAAWh/B,EAAWV,EAAGC,GAEnD,OAAIy/B,EAAUh/B,EAAU4H,OAAO7S,OAAOmuC,cAC7BlF,EAASqG,aAAarF,EAAWh/B,EAAWV,EAAGC,GAEjDy+B,EAASgG,SAAShF,EAAWh/B,EAAWV,EAAGC,IA0DpDy+B,EAASsG,YAAcrE,GA9CvB,SAAqBjB,EAAWh/B,EAAWV,EAAGC,GAC5C,IAG6BglC,EAHzB38B,EAAS5H,EAAU4H,OAAQ+4B,EAAaJ,EAAcvgC,EAAWA,EAAUq/B,QAASr/B,EAAUs/B,QAAShgC,EAAGC,GAC1GilC,EAAgB58B,EAAO68B,aAAe78B,EAAO88B,cAAgB98B,EAAOjB,OAAS,GAC7Eg+B,EAAavF,EAAoBp/B,GAAa,EAAI,EAClD4kC,EAAWh9B,EAAOpS,MAClBqvC,EAAWnnC,KAAKmP,IAAI8zB,EAAWrhC,EAAIqlC,EAAa/8B,EAAOjB,QAAU69B,EAMrE,OALA58B,EAAOnL,IAAI,QAASiB,KAAKc,IAAIqmC,EAAU,KACvCN,EAAaK,IAAaC,IAExBhG,EAAU,WAAYiB,EAAgBd,EAAWh/B,EAAWV,EAAGC,IAE1DglC,KAoCTvG,EAASmG,aApXT,SAAsBnF,EAAWh/B,EAAWV,EAAGC,GAO7C,IAA2D8/B,EAAvDz3B,EAAS5H,EAAU4H,OAAQ+5B,EAAc/5B,EAAOf,MAAgBy4B,EAAUt/B,EAAUs/B,QACxF,OAAI13B,EAAOo7B,eAGS,IAAhBrB,EAIAtC,EAHyBkB,EAAcvgC,EAAWq+B,EAAQA,EAAQ/+B,EAAGC,GAC9CD,EAAI,EAEjB2+B,EAIAE,GAIRwD,EAAc,IAChBtC,EAAUC,IAAYpB,EAAMD,EAAOE,GAEjCwD,EAAc,IAChBtC,EAAUC,IAAYpB,EAAMC,EAAQF,GAGlC8C,EAAiBn5B,KACnBy3B,EAAUA,IAAYpB,EAAOE,EAAQF,IAKzCj+B,EAAUq/B,QAAUA,EACDY,EAAoBsB,EAChCuD,CAAa9F,EAAWh/B,EAAWV,EAAGC,KA+U/Cy+B,EAASqG,aAnUT,SAAsBrF,EAAWh/B,EAAWV,EAAGC,GAO7C,IAA2D+/B,EAAvD13B,EAAS5H,EAAU4H,OAAQ+5B,EAAc/5B,EAAOd,MAAgBu4B,EAAUr/B,EAAUq/B,QACxF,OAAIz3B,EAAOm7B,eAGS,IAAhBpB,EAIArC,EAHyBiB,EAAcvgC,EAAWq+B,EAAQA,EAAQ/+B,EAAGC,GAC9CA,EAAI,EAEjB2+B,EAIAE,GAIRuD,EAAc,IAChBrC,EAAUD,IAAYpB,EAAOC,EAAME,GAEjCuD,EAAc,IAChBrC,EAAUD,IAAYpB,EAAOG,EAASF,GAGpC6C,EAAiBn5B,KACnB03B,EAAUA,IAAYpB,EAAME,EAASF,IAKzCl+B,EAAUs/B,QAAUA,EACDW,EAAoB6B,EAChCgD,CAAa9F,EAAWh/B,EAAWV,EAAGC,KA8R/Cy+B,EAAS+G,YA1BT,SAAqB/F,EAAWh/B,EAAWV,EAAGC,GAC5C,IAAIqI,EAAS5H,EAAU4H,OACnBo9B,EAAU1lC,EAAIU,EAAU6gC,QACxBoE,EAAS1lC,EAAIS,EAAU8gC,QACvBoE,GAASt9B,EAAOrK,IAAI,kBAAoBqK,EAAOvH,OAAS2kC,EACxDG,GAASv9B,EAAOrK,IAAI,kBAAoBqK,EAAOtH,MAAQ2kC,EAM3D,OALAC,GAASt9B,EAAOnL,IAAI,OAAQuoC,GAC5BG,GAASv9B,EAAOnL,IAAI,MAAOwoC,IACvBC,GAASC,IACXtG,EAAU,SAAUiB,EAAgBd,EAAWh/B,EAAWV,EAAGC,IAExD2lC,GAASC,GAgBlBnH,EAASoH,sBApkBT,SAA+BpG,EAAWL,EAASD,GACjD,IAAI2G,EAAgBrG,EAAUN,EAAa3pC,OAAOmuC,cAClD,OAAkB,IAAdvE,EAAQr/B,EAEH+lC,EAAgB,QAAU,SAEjB,IAAd1G,EAAQp/B,EAEH8lC,EAAgB,QAAU,cAFnC,GA+jBFrH,EAASsH,qBAjjBT,SAA8BtG,EAAWL,EAASD,GAChD,OAAIA,EAAa2E,aACR,cAEF1E,EAAQ4G,aA8iBjBvH,EAASa,UAAYA,EACrBb,EAASiC,oBAAsBA,EAC/BjC,EAASuC,cAAgBA,EACzBjtC,EAAOkyC,cAAgBxH,EA9tBzB,CAguBoCxqC,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3CqL,EAAmBrL,EAAOgG,KAAKqF,iBAC/Bq/B,EAAW1qC,EAAOkyC,cAyFtBxH,EAASyH,oBA5ET,SAA8BxwC,EAAKoL,EAAMC,EAAKolC,EAAehH,GAC3DgH,EAAgBA,GAAiB,GACjC,IAOiBzpC,EAPb0pC,EAAQ1vC,KAAK2vC,OAASF,EAAcG,YAAcnH,EAAamH,WAC/DC,EAAQ7vC,KAAK8vC,OAASL,EAAcG,YAAcnH,EAAamH,WAC/DG,EAAiE,qBAArCN,EAAcM,mBACxCN,EAAcM,mBAAqB/vC,KAAK+vC,mBAC1C5uB,EAAa4uB,EAAqB,SAAW,OAC7CvhB,GAAUuhB,IAAuBN,EAAcO,mBAAqBvH,EAAauH,mBACjFC,EAAS7lC,EACT8lC,EAAQ7lC,EACZrL,EAAI0Q,OACJ1Q,EAAImxC,UAAYV,EAAcW,aAAe3H,EAAa2H,YAC1DpxC,EAAIqxC,YAAcZ,EAAcO,mBAAqBvH,EAAauH,kBAE9DN,EAAQG,GACV7pC,EAAO0pC,EACP1wC,EAAII,MAAM,EAAKywC,EAAQH,GACvBQ,EAAQ7lC,EAAMqlC,EAAQG,GAEfA,EAAQH,GACf1pC,EAAO6pC,EACP7wC,EAAII,MAAMswC,EAAQG,EAAO,GACzBI,EAAS7lC,EAAOylC,EAAQH,GAGxB1pC,EAAO0pC,EAGT1wC,EAAIsxC,UAAY,EAChBtxC,EAAIuxC,YACJvxC,EAAIwxC,IAAIP,EAAQC,EAAOlqC,EAAO,EAAG,EAAG,EAAIyB,KAAKI,IAAI,GACjD7I,EAAImiB,KACAqN,GACFxvB,EAAIwvB,SAENxvB,EAAI6Q,WA0CNk4B,EAAS0I,oBA5BT,SAA6BzxC,EAAKoL,EAAMC,EAAKolC,EAAehH,GAC1DgH,EAAgBA,GAAiB,GACjC,IAAIC,EAAQ1vC,KAAK2vC,OAASF,EAAcG,YAAcnH,EAAamH,WAC/DC,EAAQ7vC,KAAK8vC,OAASL,EAAcG,YAAcnH,EAAamH,WAC/DG,EAAiE,qBAArCN,EAAcM,mBACxCN,EAAcM,mBAAqBtH,EAAasH,mBAClD5uB,EAAa4uB,EAAqB,SAAW,OAC7CvhB,GAAUuhB,IACRN,EAAcO,mBAAqBvH,EAAauH,mBAC/CU,EAAWhB,EAAQ,EAAGiB,EAAWd,EAAQ,EAChD7wC,EAAI0Q,OACJ1Q,EAAImxC,UAAYV,EAAcW,aAAe3H,EAAa2H,YAC1DpxC,EAAIqxC,YAAcZ,EAAcO,mBAAqBvH,EAAauH,kBAElEhxC,EAAIsxC,UAAY,EAChBtxC,EAAIE,UAAUkL,EAAMC,GACpBrL,EAAI4Q,OAAOlH,EAAiB+/B,EAAazgC,QAIzChJ,EAAImiB,EAAa,SAASuvB,GAAWC,EAAUjB,EAAOG,GAClDrhB,GACFxvB,EAAI4xC,YAAYF,GAAWC,EAAUjB,EAAOG,GAE9C7wC,EAAI6Q,WA5FR,CAkGoCtS,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAQ/CA,EAAOwzC,QANP,SAAiBntC,GACf,IAAK,IAAIE,KAAKF,EACZ1D,KAAK4D,GAAKF,EAAQE,IAMtBvG,EAAOwzC,QAAQ/hC,UAAmD,CAUhEigB,SAAS,EAaT+hB,WAAY,QASZ9oC,MAAO,EASPqB,EAAG,EASHC,EAAG,EAcHshC,QAAS,EAQTC,QAAS,EAQT8E,MAAO,KAQPG,MAAO,KAQPiB,WAAY,KAQZC,WAAY,KAQZ1B,YAAa,YAQb2B,gBAAgB,EAUhBhH,cAAe,aAUfiH,iBAAkB,aAUlBC,eAAgB,aAShBC,iBAAkB,WAChB,OAAOpxC,KAAKiqC,eAUdoH,oBAAqB,WACnB,OAAOrxC,KAAKkxC,kBAUdI,kBAAmB,WACjB,OAAOtxC,KAAKmxC,gBAYdI,mBAAoB,SAASxI,EAAWL,GACtC,OAAOA,EAAQ4G,aAUjBkC,cAAe,SAASzI,EAAWL,GACjC,OAAOA,EAAQoI,YASjBW,cAAe,SAAShJ,EAAciJ,GACpC,IAAIC,EAAmBlJ,EAAamJ,oBACpC,OAAID,GAA4D,qBAAjCA,EAAiBD,GACvCC,EAAiBD,GAEnB1xC,KAAK+uB,SAQd8iB,cAAe,SAASvjB,GACtBtuB,KAAK+uB,QAAUT,GAIjBwjB,gBAAiB,SAAS9F,EAAK+F,GAI7B,OAHY10C,EAAOgG,KAAKoG,eAAe,CACrCJ,EAAGrJ,KAAKqJ,EAAI2iC,EAAI3iC,EAAIrJ,KAAK4qC,QACzBthC,EAAGtJ,KAAKsJ,EAAI0iC,EAAI1iC,EAAItJ,KAAK6qC,SAAWkH,IAaxCC,iBAAkB,SAASC,EAAaC,EAAkBC,EAASC,EAASC,GAC1E,IAAIC,EACAC,EACAC,EACAC,EACA/C,EAAS2C,EAAWryC,KAAK+wC,WAAa/wC,KAAK2vC,MAC3CE,EAASwC,EAAWryC,KAAKgxC,WAAahxC,KAAK8vC,MAC/C,GAAIJ,GAASG,GAASH,IAAUG,EAAO,CAErC,IAAI6C,EAAuBjrC,KAAKC,MAAMmoC,EAAOH,GACzCiD,EAAmBlrC,KAAKD,KAAKkoC,EAAQA,EAAQG,EAAQA,GAAS,EAC9D+C,EAAWF,EAAuBr1C,EAAOgG,KAAKqF,iBAAiBupC,GAC/DY,EAAeprC,KAAKI,GAAK,EAAI6qC,EAAuBr1C,EAAOgG,KAAKqF,iBAAiBupC,GACrFK,EAAgBK,EAAmBt1C,EAAOgG,KAAK0E,IAAI6qC,GACnDL,EAAgBI,EAAmBt1C,EAAOgG,KAAK4E,IAAI2qC,GAEnDJ,EAAoBG,EAAmBt1C,EAAOgG,KAAK0E,IAAI8qC,GACvDJ,EAAoBE,EAAmBt1C,EAAOgG,KAAK4E,IAAI4qC,OAEpD,CAKHF,EAAgC,aAFdjD,GAASG,EAASH,EAAQwC,GAIxCU,EAAWv1C,EAAOgG,KAAKqF,iBAAiB,GAAKupC,GACjDK,EAAgBE,EAAoBG,EAAmBt1C,EAAOgG,KAAK0E,IAAI6qC,GACvEL,EAAgBE,EAAoBE,EAAmBt1C,EAAOgG,KAAK4E,IAAI2qC,GAGzE,MAAO,CACLE,GAAI,CACFzpC,EAAG8oC,EAAUM,EACbnpC,EAAG8oC,EAAUI,GAEfO,GAAI,CACF1pC,EAAG8oC,EAAUG,EACbhpC,EAAG8oC,EAAUG,GAEfS,GAAI,CACF3pC,EAAG8oC,EAAUG,EACbhpC,EAAG8oC,EAAUG,GAEfU,GAAI,CACF5pC,EAAG8oC,EAAUM,EACbnpC,EAAG8oC,EAAUI,KAiBnBU,OAAQ,SAASl0C,EAAKoL,EAAMC,EAAKolC,EAAehH,GAE9C,QADAgH,EAAgBA,GAAiB,IACX0D,aAAe1K,EAAa0K,aAChD,IAAK,SACH91C,EAAOkyC,cAAcC,oBAAoBzrC,KAAK/D,KAAMhB,EAAKoL,EAAMC,EAAKolC,EAAehH,GACnF,MACF,QACEprC,EAAOkyC,cAAckB,oBAAoB1sC,KAAK/D,KAAMhB,EAAKoL,EAAMC,EAAKolC,EAAehH,MA7U7F,CAkVoClrC,GAGpC,WAGE,SAAS61C,EAAa5uB,EAAIkqB,GACxB,IAEIrjB,EAAOgoB,EAAYpwB,EAASrf,EAF5BmJ,EAAQyX,EAAG0L,aAAa,SACxBnJ,EAASvC,EAAG0L,aAAa,WAAa,EAM1C,GADAnJ,GADAA,EAASnc,WAAWmc,IAAW,KAAKtD,KAAKsD,GAAU,IAAM,IACvC,EAAI,EAAIA,EAAS,EAAI,EAAIA,EACvCha,EAAO,CACT,IAAIumC,EAAgBvmC,EAAMf,MAAM,WAMhC,IAJgD,KAA5CsnC,EAAcA,EAAcxvC,OAAS,IACvCwvC,EAAc7gC,MAGX7O,EAAI0vC,EAAcxvC,OAAQF,KAAO,CAEpC,IAAIoI,EAAQsnC,EAAc1vC,GAAGoI,MAAM,WAC/B5E,EAAM4E,EAAM,GAAGiR,OACfhZ,EAAQ+H,EAAM,GAAGiR,OAET,eAAR7V,EACFikB,EAAQpnB,EAEO,iBAARmD,IACP6b,EAAUhf,IAiBhB,OAZKonB,IACHA,EAAQ7G,EAAG0L,aAAa,eAAiB,cAEtCjN,IACHA,EAAUuB,EAAG0L,aAAa,iBAI5BmjB,GADAhoB,EAAQ,IAAIhuB,EAAOquB,MAAML,IACNqK,WACnBzS,EAAU9F,MAAMvS,WAAWqY,IAAY,EAAIrY,WAAWqY,GACtDA,GAAWowB,EAAa3E,EAEjB,CACL3nB,OAAQA,EACRsE,MAAOA,EAAM0R,QACb9Z,QAASA,GAyBb,IAAIzD,EAAQniB,EAAOgG,KAAK0B,OAAOya,MAQ/BniB,EAAOwJ,SAAWxJ,EAAOgG,KAAKke,YAAoD,CAOhFqpB,QAAS,EAOTC,QAAS,EAUT0I,kBAAmB,KAWnBC,cAAe,SAOf7tC,KAAM,SAmBN6b,WAAY,SAAS9d,GACnBA,IAAYA,EAAU,IACtBA,EAAQ2V,SAAW3V,EAAQ2V,OAAS,IAEpC,IAAIA,EAAQgI,EAAQrhB,KAGpB6O,OAAO4kC,KAAK/vC,GAASiK,SAAQ,SAAS+lC,GACpCryB,EAAMqyB,GAAUhwC,EAAQgwC,MAGtB1zC,KAAKmmB,GACPnmB,KAAKmmB,IAAM,IAAM9oB,EAAOwR,OAAOilB,QAG/B9zB,KAAKmmB,GAAK9oB,EAAOwR,OAAOilB,QAG1Bza,EAAS,CACPjB,GAAI1U,EAAQ2V,OAAOjB,IAAM,EACzBC,GAAI3U,EAAQ2V,OAAOhB,IAAM,EACzBpJ,GAAIvL,EAAQ2V,OAAOpK,IAAM,EACzBC,GAAIxL,EAAQ2V,OAAOnK,IAAM,GAGT,WAAdlP,KAAK2F,OACP0T,EAAOuiB,GAAKl4B,EAAQ2V,OAAOuiB,IAAM,EACjCviB,EAAOwiB,GAAKn4B,EAAQ2V,OAAOwiB,IAAM,GAGnC77B,KAAKqZ,OAASA,EACdrZ,KAAK4G,WAAalD,EAAQkD,WAAW+E,SAQvCgoC,aAAc,SAAS/sC,GACrB,IAAK,IAAIoG,KAAYpG,EAAY,CAC/B,IAAIykB,EAAQ,IAAIhuB,EAAOquB,MAAM9kB,EAAWoG,IACxChN,KAAK4G,WAAWvC,KAAK,CACnB0iB,OAAQnc,WAAWoC,GACnBqe,MAAOA,EAAM0R,QACb9Z,QAASoI,EAAMqK,aAGnB,OAAO11B,MAQT4zC,SAAU,SAASC,GACjB,IAAI9uC,EAAS,CACXY,KAAM3F,KAAK2F,KACX0T,OAAQrZ,KAAKqZ,OACbzS,WAAY5G,KAAK4G,WACjBgkC,QAAS5qC,KAAK4qC,QACdC,QAAS7qC,KAAK6qC,QACd2I,cAAexzC,KAAKwzC,cACpBD,kBAAmBvzC,KAAKuzC,kBAAoBvzC,KAAKuzC,kBAAkB3tC,SAAW5F,KAAKuzC,mBAIrF,OAFAl2C,EAAOgG,KAAKqL,uBAAuB1O,KAAM+E,EAAQ8uC,GAE1C9uC,GAST+uC,MAAO,SAAS/uC,EAAQrB,GACtB,IAAuCE,EAAGC,EACtCkwC,EAAQC,EADR36B,EAASmG,EAAMxf,KAAKqZ,QAAQ,GACFzS,GADiBlD,EAAUA,GAAW,GACzB8b,EAAMxf,KAAK4G,YAAY,IAC9DqtC,EAAY56B,EAAOuiB,GAAKviB,EAAOwiB,GAC/B9xB,EAAY/J,KAAKuzC,kBAAoBvzC,KAAKuzC,kBAAkB3tC,SAAWvI,EAAOiE,QAAQsE,SACtFglC,GAAW5qC,KAAK4qC,QAASC,GAAW7qC,KAAK6qC,QACzCqJ,IAAiBxwC,EAAQywC,oBACzBX,EAAuC,WAAvBxzC,KAAKwzC,cAA6B,iBAAmB,oBAqDzE,GAnDA5sC,EAAWwtC,MAAK,SAAS7pC,EAAG+F,GAC1B,OAAO/F,EAAEwc,OAASzW,EAAEyW,UAGA,sBAAlBysB,GACF5I,GAAW7lC,EAAOxF,MAClBsrC,GAAW9lC,EAAO5F,SAGlByrC,GAAW7lC,EAAOxF,MAAQ,EAC1BsrC,GAAW9lC,EAAO5F,OAAS,GAET,SAAhB4F,EAAOY,MAA0C,eAAvB3F,KAAKwzC,gBACjC5I,GAAW7lC,EAAOsvC,WAAWhrC,EAC7BwhC,GAAW9lC,EAAOsvC,WAAW/qC,GAI/BS,EAAU,IAAM6gC,EAChB7gC,EAAU,IAAM8gC,EAEhBmJ,EAAmB,aAAeh0C,KAAKmmB,GACxB,oBAAsBqtB,EAAgB,IACrDQ,GAAoB,wBAA0BE,EAC5CxwC,EAAQywC,oBAAsB,IAAM,IAAM92C,EAAOgG,KAAKkQ,YAAYxJ,GAAa,KAE/D,WAAd/J,KAAK2F,KACPouC,EAAS,CACP,mBACAC,EACA,QAAS36B,EAAOjB,GAChB,SAAUiB,EAAOhB,GACjB,SAAUgB,EAAOpK,GACjB,SAAUoK,EAAOnK,GACjB,QAGmB,WAAdlP,KAAK2F,OAEZouC,EAAS,CACP,mBACAC,EACA,QAASC,EAAY56B,EAAOjB,GAAKiB,EAAOpK,GACxC,SAAUglC,EAAY56B,EAAOhB,GAAKgB,EAAOnK,GACzC,QAAS+kC,EAAY56B,EAAOuiB,GAAKviB,EAAOwiB,GACxC,SAAUoY,EAAY56B,EAAOpK,GAAKoK,EAAOjB,GACzC,SAAU67B,EAAY56B,EAAOnK,GAAKmK,EAAOhB,GACzC,SAIc,WAAdrY,KAAK2F,KAAmB,CAC1B,GAAIsuC,EAIF,KAFArtC,EAAaA,EAAWhB,UACb0uC,UACN1wC,EAAI,EAAGC,EAAM+C,EAAW9C,OAAQF,EAAIC,EAAKD,IAC5CgD,EAAWhD,GAAGmjB,OAAS,EAAIngB,EAAWhD,GAAGmjB,OAG7C,IAAIwtB,EAAY9sC,KAAKa,IAAI+Q,EAAOuiB,GAAIviB,EAAOwiB,IAC3C,GAAI0Y,EAAY,EAAG,CAEjB,IACIC,EAAkBD,EADN9sC,KAAKc,IAAI8Q,EAAOuiB,GAAIviB,EAAOwiB,IAE3C,IAAKj4B,EAAI,EAAGC,EAAM+C,EAAW9C,OAAQF,EAAIC,EAAKD,IAC5CgD,EAAWhD,GAAGmjB,QAAUytB,GAAmB,EAAI5tC,EAAWhD,GAAGmjB,SAKnE,IAAKnjB,EAAI,EAAGC,EAAM+C,EAAW9C,OAAQF,EAAIC,EAAKD,IAAK,CACjD,IAAI6wC,EAAY7tC,EAAWhD,GAC3BmwC,EAAO1vC,KACL,SACA,WAAgC,IAAnBowC,EAAU1tB,OAAgB,IACvC,uBAAwB0tB,EAAUppB,MACJ,qBAAtBopB,EAAUxxB,QAA0B,kBAAoBwxB,EAAUxxB,QAAU,IACpF,SAMJ,OAFA8wB,EAAO1vC,KAAoB,WAAdrE,KAAK2F,KAAoB,sBAAwB,uBAEvDouC,EAAOrgC,KAAK,KASrBghC,OAAQ,SAAS11C,GACf,IAAI0zB,EAA0D9uB,EAAGC,EAAnDwV,EAAShc,EAAOgG,KAAK0B,OAAOya,MAAMxf,KAAKqZ,QAErD,GAAKrZ,KAAK2F,KAAV,CAaA,IATkB,WAAd3F,KAAK2F,KACP+sB,EAAW1zB,EAAI21C,qBACbt7B,EAAOjB,GAAIiB,EAAOhB,GAAIgB,EAAOpK,GAAIoK,EAAOnK,IAErB,WAAdlP,KAAK2F,OACZ+sB,EAAW1zB,EAAI41C,qBACbv7B,EAAOjB,GAAIiB,EAAOhB,GAAIgB,EAAOuiB,GAAIviB,EAAOpK,GAAIoK,EAAOnK,GAAImK,EAAOwiB,KAG7Dj4B,EAAI,EAAGC,EAAM7D,KAAK4G,WAAW9C,OAAQF,EAAIC,EAAKD,IAAK,CACtD,IAAIynB,EAAQrrB,KAAK4G,WAAWhD,GAAGynB,MAC3BpI,EAAUjjB,KAAK4G,WAAWhD,GAAGqf,QAC7B8D,EAAS/mB,KAAK4G,WAAWhD,GAAGmjB,OAET,qBAAZ9D,IACToI,EAAQ,IAAIhuB,EAAOquB,MAAML,GAAOoK,SAASxS,GAAS0S,UAEpDjD,EAASihB,aAAa5sB,EAAQsE,GAGhC,OAAOqH,MAIXr1B,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwJ,SAAU,CAoBzC2wB,YAAa,SAAShT,EAAIqwB,EAAUxc,EAAayc,GAkC/C,IAAIpG,EAAa9jC,WAAWytB,IAAgB,KAAK5U,KAAK4U,GAAe,IAAM,GAC3EqW,EAAaA,EAAa,EAAI,EAAIA,EAAa,EAAI,EAAIA,EACnDvxB,MAAMuxB,KACRA,EAAa,GAGf,IACI/oC,EAKA0T,EAAQzV,EACR0Q,EAPAygC,EAAevwB,EAAGgL,qBAAqB,QAEvCgkB,EAAqD,mBAArChvB,EAAG0L,aAAa,iBAC9B,SAAW,aACbqjB,EAAoB/uB,EAAG0L,aAAa,sBAAwB,GAC5DtpB,EAAa,GACFgkC,EAAU,EAAGC,EAAU,EAWtC,IAToB,mBAAhBrmB,EAAG6K,UAAiD,mBAAhB7K,EAAG6K,UACzC1pB,EAAO,SACP0T,EAlXN,SAAyBmL,GACvB,MAAO,CACLpM,GAAIoM,EAAG0L,aAAa,OAAS,EAC7B7X,GAAImM,EAAG0L,aAAa,OAAS,EAC7BjhB,GAAIuV,EAAG0L,aAAa,OAAS,OAC7BhhB,GAAIsV,EAAG0L,aAAa,OAAS,GA6WlB8kB,CAAgBxwB,KAGzB7e,EAAO,SACP0T,EA7WN,SAAyBmL,GACvB,MAAO,CACLpM,GAAIoM,EAAG0L,aAAa,OAAS1L,EAAG0L,aAAa,OAAS,MACtD7X,GAAImM,EAAG0L,aAAa,OAAS1L,EAAG0L,aAAa,OAAS,MACtD0L,GAAI,EACJ3sB,GAAIuV,EAAG0L,aAAa,OAAS,MAC7BhhB,GAAIsV,EAAG0L,aAAa,OAAS,MAC7B2L,GAAIrX,EAAG0L,aAAa,MAAQ,OAsWjB+kB,CAAgBzwB,IAGtB5gB,EAAImxC,EAAajxC,OAAQF,KAC5BgD,EAAWvC,KAAK+uC,EAAa2B,EAAanxC,GAAI8qC,IAuBhD,OApBAp6B,EAAkBjX,EAAOyxB,wBAAwBykB,GA4BrD,SAAuCsB,EAAUnxC,EAASoxC,EAAYtB,GACpE,IAAI0B,EAAWC,EACftmC,OAAO4kC,KAAK/vC,GAASiK,SAAQ,SAASvJ,GAElB,cADlB8wC,EAAYxxC,EAAQU,IAElB+wC,EAAa,EAEQ,cAAdD,EACPC,EAAa,GAGbA,EAAavqC,WAAWlH,EAAQU,GAAO,IACd,kBAAd8wC,GAA0B,uBAAuBzxB,KAAKyxB,KAC/DC,GAAc,IACQ,WAAlB3B,IAEW,OAATpvC,GAA0B,OAATA,GAA0B,OAATA,IACpC+wC,GAAcL,EAAWpjB,cAAgBojB,EAAWv1C,OAEzC,OAAT6E,GAA0B,OAATA,IACnB+wC,GAAcL,EAAWnjB,eAAiBmjB,EAAW31C,WAK7DuE,EAAQU,GAAQ+wC,KAnDhBC,CAA8BP,EAAUx7B,EAAQy7B,EAAYtB,GAEtC,WAAlBA,IACF5I,GAAWiK,EAASzqC,KACpBygC,GAAWgK,EAASxqC,KAGP,IAAIhN,EAAOwJ,SAAS,CACjCsf,GAAI3B,EAAG0L,aAAa,MACpBvqB,KAAMA,EACN0T,OAAQA,EACRzS,WAAYA,EACZ4sC,cAAeA,EACfD,kBAAmBj/B,EACnBs2B,QAASA,EACTC,QAASA,OAlcjB,GA4eA,WAEE,aAEA,IAAIpgC,EAAUpN,EAAOgG,KAAKoH,QAW1BpN,EAAO2J,QAAU3J,EAAOgG,KAAKke,YAAmD,CAO9E8zB,OAAQ,SAORzK,QAAS,EAOTC,QAAS,EAQT1+B,YAAa,GAObmpC,iBAAkB,KAQlB9zB,WAAY,SAAS9d,EAAS8B,GAK5B,GAJA9B,IAAYA,EAAU,IAEtB1D,KAAKmmB,GAAK9oB,EAAOwR,OAAOilB,QACxB9zB,KAAKu1C,WAAW7xC,IACXA,EAAQqD,QAAWrD,EAAQqD,QAAoC,kBAAnBrD,EAAQqD,OACvDvB,GAAYA,EAASxF,UADvB,CAME,IAAIqhB,EAAQrhB,KACZA,KAAK+G,OAAS1J,EAAOgG,KAAKgJ,cAC1BhP,EAAOgG,KAAK4I,UAAUvI,EAAQqD,QAAQ,SAASqF,EAAKopC,GAClDn0B,EAAMta,OAASqF,EACf5G,GAAYA,EAAS6b,EAAOm0B,KAC3B,KAAMx1C,KAAKmM,eASlBynC,SAAU,SAASC,GACjB,IACI9sC,EAAQhC,EADR0O,EAAsBpW,EAAOwR,OAAO4E,oBAuBxC,MAnB+B,kBAApBzT,KAAK+G,OAAO0F,IACrB1F,EAAS/G,KAAK+G,OAAO0F,IAGS,kBAAhBzM,KAAK+G,QAAuB/G,KAAK+G,OAAOkJ,YACtDlJ,EAAS/G,KAAK+G,OAAOkJ,aAGvBlL,EAAS,CACPY,KAAM,UACNoB,OAAQA,EACRsuC,OAAQr1C,KAAKq1C,OACblpC,YAAanM,KAAKmM,YAClBy+B,QAASngC,EAAQzK,KAAK4qC,QAASn3B,GAC/Bo3B,QAASpgC,EAAQzK,KAAK6qC,QAASp3B,GAC/B6hC,iBAAkBt1C,KAAKs1C,iBAAmBt1C,KAAKs1C,iBAAiB1vC,SAAW,MAE7EvI,EAAOgG,KAAKqL,uBAAuB1O,KAAM+E,EAAQ8uC,GAE1C9uC,GAST+uC,MAAO,SAAS/uC,GACd,IAAI0wC,EAAuC,oBAAhBz1C,KAAK+G,OAAwB/G,KAAK+G,SAAW/G,KAAK+G,OACzE2uC,EAAeD,EAAcl2C,MAAQwF,EAAOxF,MAC5Co2C,EAAgBF,EAAct2C,OAAS4F,EAAO5F,OAC9Cy2C,EAAiB51C,KAAK4qC,QAAU7lC,EAAOxF,MACvCs2C,EAAiB71C,KAAK6qC,QAAU9lC,EAAO5F,OACvC22C,EAAgB,GAqBpB,MApBoB,aAAhB91C,KAAKq1C,QAAyC,cAAhBr1C,KAAKq1C,SACrCM,EAAgB,EACZE,IACFF,GAAiBluC,KAAKmP,IAAIi/B,KAGV,aAAhB71C,KAAKq1C,QAAyC,cAAhBr1C,KAAKq1C,SACrCK,EAAe,EACXE,IACFF,GAAgBjuC,KAAKmP,IAAIg/B,KAIzBH,EAAchpC,IAChBqpC,EAAgBL,EAAchpC,IAEvBgpC,EAAcxlC,YACrB6lC,EAAgBL,EAAcxlC,aAGzB,sBAAwBjQ,KAAKmmB,GACtB,QAAUyvB,EACV,QAAUC,EACV,YAAcH,EACd,aAAeC,EAJtB,iCAMsBF,EAAcl2C,MAC3B,aAAek2C,EAAct2C,OAC7B,iBAAmB22C,EAR5B,4BAcTP,WAAY,SAAS7xC,GACnB,IAAK,IAAIU,KAAQV,EACf1D,KAAKoE,GAAQV,EAAQU,IASzBswC,OAAQ,SAAS11C,GACf,IAAI+H,EAAS/G,KAAK+G,OAElB,IAAKA,EACH,MAAO,GAIT,GAA0B,qBAAfA,EAAO0F,IAAqB,CACrC,IAAK1F,EAAOgvC,SACV,MAAO,GAET,GAA4B,IAAxBhvC,EAAOivC,cAA+C,IAAzBjvC,EAAOkvC,cACtC,MAAO,GAGX,OAAOj3C,EAAIk3C,cAAcnvC,EAAQ/G,KAAKq1C,WAzL5C,GA+LA,SAAU9tC,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3CoN,EAAUpN,EAAOgG,KAAKoH,QAEtBpN,EAAO84C,OACT94C,EAAOyrB,KAAK,sCAUdzrB,EAAO84C,OAAS94C,EAAOgG,KAAKke,YAAkD,CAO5E8J,MAAO,aAMP+qB,KAAM,EAONxL,QAAS,EAOTC,QAAS,EAOTwL,cAAc,EAOdC,sBAAsB,EAStBC,YAAY,EAOZ/0B,WAAY,SAAS9d,GAMnB,IAAK,IAAIU,IAJc,kBAAZV,IACTA,EAAU1D,KAAKw2C,aAAa9yC,IAGbA,EACf1D,KAAKoE,GAAQV,EAAQU,GAGvBpE,KAAKmmB,GAAK9oB,EAAOwR,OAAOilB,SAQ1B0iB,aAAc,SAASC,GACrB,IAAIC,EAAYD,EAAOx5B,OACnB05B,EAAiBt5C,EAAO84C,OAAOS,iBAAiB3rC,KAAKyrC,IAAc,GAGvE,MAAO,CACLrrB,OAHUqrB,EAAU32B,QAAQ1iB,EAAO84C,OAAOS,iBAAkB,KAAO,cAGtD35B,OACb2tB,QAASvjB,SAASsvB,EAAe,GAAI,KAAO,EAC5C9L,QAASxjB,SAASsvB,EAAe,GAAI,KAAO,EAC5CP,KAAM/uB,SAASsvB,EAAe,GAAI,KAAO,IAS7C5nC,SAAU,WACR,MAAO,CAAC/O,KAAK4qC,QAAS5qC,KAAK6qC,QAAS7qC,KAAKo2C,KAAMp2C,KAAKqrB,OAAO3X,KAAK,QASlEogC,MAAO,SAAS/uC,GACd,IAAI8xC,EAAQ,GAAIC,EAAQ,GAAIrjC,EAAsBpW,EAAOwR,OAAO4E,oBAC5DsT,EAAS1pB,EAAOgG,KAAK8F,aACnB,CAAEE,EAAGrJ,KAAK4qC,QAASthC,EAAGtJ,KAAK6qC,SAC3BxtC,EAAOgG,KAAKqF,kBAAkB3D,EAAOiD,QACxBqjB,EAAQ,IAAIhuB,EAAOquB,MAAM1rB,KAAKqrB,OAejD,OAbItmB,EAAOxF,OAASwF,EAAO5F,SAGzB03C,EAAwF,IAAhFpsC,GAAShD,KAAKmP,IAAImQ,EAAO1d,GAAKrJ,KAAKo2C,MAAQrxC,EAAOxF,MAAOkU,GALpD,GAMbqjC,EAAyF,IAAjFrsC,GAAShD,KAAKmP,IAAImQ,EAAOzd,GAAKtJ,KAAKo2C,MAAQrxC,EAAO5F,OAAQsU,GANrD,IAQX1O,EAAOqM,QACT2V,EAAO1d,IAAM,GAEXtE,EAAOsM,QACT0V,EAAOzd,IAAM,GAIb,qBAAuBtJ,KAAKmmB,GAAK,SAAW2wB,EAAQ,eAAiB,IAAM,EAAIA,GAA/E,UACWD,EAAQ,cAAgB,IAAM,EAAIA,GAD7C,0DAGIpsC,EAAQzK,KAAKo2C,KAAOp2C,KAAKo2C,KAAO,EAAI,EAAG3iC,GAH3C,wCAIuBhJ,EAAQsc,EAAO1d,EAAGoK,GACvC,SAAWhJ,EAAQsc,EAAOzd,EAAGmK,GAL/B,0DAM+B4X,EAAM0R,QAAU,oBAAsB1R,EAAMqK,WAN3E,iLAoBJke,SAAU,WACR,GAAI5zC,KAAKs2C,qBACP,MAAO,CACLjrB,MAAOrrB,KAAKqrB,MACZ+qB,KAAMp2C,KAAKo2C,KACXxL,QAAS5qC,KAAK4qC,QACdC,QAAS7qC,KAAK6qC,QACdwL,aAAcr2C,KAAKq2C,aACnBE,WAAYv2C,KAAKu2C,YAGrB,IAAIrvC,EAAM,GAAK9J,EAAQC,EAAO84C,OAAOrnC,UAQrC,MANA,CAAC,QAAS,OAAQ,UAAW,UAAW,eAAgB,cAAcnB,SAAQ,SAASvJ,GACjFpE,KAAKoE,KAAUhH,EAAMgH,KACvB8C,EAAI9C,GAAQpE,KAAKoE,MAElBpE,MAEIkH,KAWX7J,EAAO84C,OAAOS,iBAAmB,0FAhMnC,CAkMoCr5C,GAGpC,WAEE,aAEA,GAAIF,EAAO05C,aACT15C,EAAOyrB,KAAK,+CADd,CAMA,IAAI1J,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BqH,EAAmBppB,EAAOgG,KAAKojB,iBAC/Bte,EAAkB9K,EAAOgG,KAAK8E,gBAC9BsC,EAAUpN,EAAOgG,KAAKoH,QACtBhB,EAAiBpM,EAAOgG,KAAKoG,eAC7Ba,EAAkBjN,EAAOgG,KAAKiH,gBAC9Bmd,EAAgBpqB,EAAOgG,KAAKokB,cAC5B3X,EAAsBzS,EAAOgG,KAAKyM,oBAElCknC,EAAoB,IAAIC,MAAM,yCAelC55C,EAAO05C,aAAe15C,EAAOgG,KAAKke,YAAYlkB,EAAOiJ,cAA2D,CAQ9Gkb,WAAY,SAASgD,EAAI9gB,GACvBA,IAAYA,EAAU,IACtB1D,KAAKk3C,oBAAsBl3C,KAAKm3C,eAAeC,KAAKp3C,MACpDA,KAAKq3C,sBAAwBr3C,KAAK6E,iBAAiBuyC,KAAKp3C,MACxDA,KAAKs3C,YAAY9yB,EAAI9gB,IASvB6zC,gBAAiB,GAUjBC,gBAAiB,KASjBC,aAAc,GAUdC,aAAc,KAQdpB,sBAAsB,EAOtBqB,UAAU,EAYV/yC,mBAAmB,EAOnBgzC,sBAAsB,EAOtBC,qBAAqB,EAOrBhyB,uBAAuB,EAOvBiyB,kBAAmBz6C,EAAOiE,QAAQsE,SAQlCmyC,eAAe,EAQfC,YAAY,EAOZC,qBAAqB,EAWrBC,UAAW,GAYXC,eAAe,EASfrf,cAAUpsB,EAOV4qC,YAAa,SAAS9yB,EAAI9gB,GACxB,IAAI00C,EAAKp4C,KAAKq3C,sBACdr3C,KAAKwE,SAAW,GAChBxE,KAAKq4C,mBAAmB7zB,GACxBxkB,KAAKs4C,aAAa50C,GAEb1D,KAAKu4C,aACRv4C,KAAKw4C,qBAGH90C,EAAQg0C,cACV13C,KAAKy4C,gBAAgB/0C,EAAQg0C,aAAcU,GAEzC10C,EAAQ8zC,iBACVx3C,KAAK04C,mBAAmBh1C,EAAQ8zC,gBAAiBY,GAE/C10C,EAAQ6zC,iBACVv3C,KAAK24C,mBAAmBj1C,EAAQ6zC,gBAAiBa,GAE/C10C,EAAQ+zC,cACVz3C,KAAK44C,gBAAgBl1C,EAAQ+zC,aAAcW,GAE7Cp4C,KAAK64C,cAMPC,iBAAkB,WAChB,OAAoC,IAA5Bz7C,EAAO0E,kBAA0B/B,KAAKi4C,qBAOhDc,iBAAkB,WAChB,OAAO/4C,KAAK84C,mBAAqBz7C,EAAO0E,iBAAmB,GAM7Dy2C,mBAAoB,WAClB,GAAKx4C,KAAK84C,mBAAV,CAGA,IAAIE,EAAa37C,EAAO0E,iBACxB/B,KAAKi5C,oBAAoBD,EAAYh5C,KAAKk5C,cAAel5C,KAAKm5C,kBAC1Dn5C,KAAKo5C,eACPp5C,KAAKi5C,oBAAoBD,EAAYh5C,KAAKo5C,cAAep5C,KAAKq5C,cAIlEJ,oBAAqB,SAASD,EAAYl6C,EAAQ2G,GAChD3G,EAAO6lB,aAAa,QAAS3kB,KAAKT,MAAQy5C,GAC1Cl6C,EAAO6lB,aAAa,SAAU3kB,KAAKb,OAAS65C,GAC5CvzC,EAAQrG,MAAM45C,EAAYA,IAU5BH,WAAY,WAEV,OADA74C,KAAKs5C,QAAU7yB,EAAiBzmB,KAAKk5C,eAC9Bl5C,MAkDTy4C,gBAAiB,SAAUc,EAAO/zC,EAAU9B,GAC1C,OAAO1D,KAAKw5C,oBAAoB,eAAgBD,EAAO/zC,EAAU9B,IAmDnEg1C,mBAAoB,SAAUa,EAAO/zC,EAAU9B,GAC7C,OAAO1D,KAAKw5C,oBAAoB,kBAAmBD,EAAO/zC,EAAU9B,IAwBtEk1C,gBAAiB,SAASnB,EAAcjyC,GACtC,OAAOxF,KAAKy5C,oBAAoB,eAAgBhC,EAAcjyC,IAwBhEmzC,mBAAoB,SAASpB,EAAiB/xC,GAC5C,OAAOxF,KAAKy5C,oBAAoB,kBAAmBlC,EAAiB/xC,IAWtEg0C,oBAAqB,SAAS7yC,EAAU4yC,EAAO/zC,EAAU9B,GAkBvD,MAjBqB,kBAAV61C,EACTl8C,EAAOgG,KAAK4I,UAAUstC,GAAO,SAASntC,EAAKopC,GACzC,GAAIppC,EAAK,CACP,IAAIyoC,EAAW,IAAIx3C,EAAOu6B,MAAMxrB,EAAK1I,GACrC1D,KAAK2G,GAAYkuC,EACjBA,EAAS/1C,OAASkB,KAEpBwF,GAAYA,EAAS4G,EAAKopC,KACzBx1C,KAAM0D,GAAWA,EAAQyI,cAG5BzI,GAAW61C,EAAMhE,WAAW7xC,GAC5B1D,KAAK2G,GAAY4yC,EACjBA,IAAUA,EAAMz6C,OAASkB,MACzBwF,GAAYA,EAAS+zC,GAAO,IAGvBv5C,MAUTy5C,oBAAqB,SAAS9yC,EAAU0kB,EAAO7lB,GAI7C,OAHAxF,KAAK2G,GAAY0kB,EACjBrrB,KAAKyG,cAAc4kB,EAAO1kB,GAC1B3G,KAAK8G,aAAaukB,EAAO1kB,EAAUnB,GAC5BxF,MAMT05C,qBAAsB,WACpB,IAAI33B,EAAUjS,IACd,IAAKiS,EACH,MAAMi1B,EAKR,GAHKj1B,EAAQhV,QACXgV,EAAQhV,MAAQ,IAEgB,qBAAvBgV,EAAQ9iB,WACjB,MAAM+3C,EAER,OAAOj1B,GAOTu2B,aAAc,SAAU50C,GACtB,IAAIw1C,EAAgBl5C,KAAKk5C,cACzBl5C,KAAKuG,YAAY7C,GAEjB1D,KAAKT,MAAQS,KAAKT,OAAS8nB,SAAS6xB,EAAc35C,MAAO,KAAO,EAChES,KAAKb,OAASa,KAAKb,QAAUkoB,SAAS6xB,EAAc/5C,OAAQ,KAAO,EAE9Da,KAAKk5C,cAAcnsC,QAIxBmsC,EAAc35C,MAAQS,KAAKT,MAC3B25C,EAAc/5C,OAASa,KAAKb,OAE5B+5C,EAAcnsC,MAAMxN,MAAQS,KAAKT,MAAQ,KACzC25C,EAAcnsC,MAAM5N,OAASa,KAAKb,OAAS,KAE3Ca,KAAK83C,kBAAoB93C,KAAK83C,kBAAkBnsC,UAQlD0sC,mBAAoB,SAAUnoC,GAExBA,GAAYA,EAASjR,WACvBe,KAAKk5C,cAAgBhpC,EAGrBlQ,KAAKk5C,cAAgB77C,EAAOgG,KAAK6iB,QAAQhW,IAAalQ,KAAK05C,uBAG7Dr8C,EAAOgG,KAAKgjB,SAASrmB,KAAKk5C,cAAe,gBAErCl5C,KAAKu4C,aACPv4C,KAAK25C,kBAAkB35C,KAAKk5C,eAG9Bl5C,KAAKm5C,iBAAmBn5C,KAAKk5C,cAAcj6C,WAAW,OAOxD26C,SAAU,WACR,OAAO55C,KAAKT,OAOds6C,UAAW,WACT,OAAO75C,KAAKb,QAYd26C,SAAU,SAAU71C,EAAOP,GACzB,OAAO1D,KAAK+5C,cAAc,CAAEx6C,MAAO0E,GAASP,IAY9Cs2C,UAAW,SAAU/1C,EAAOP,GAC1B,OAAO1D,KAAK+5C,cAAc,CAAE56C,OAAQ8E,GAASP,IAc/Cq2C,cAAe,SAAUE,EAAYv2C,GACnC,IAAIw2C,EAIJ,IAAK,IAAI91C,KAFTV,EAAUA,GAAW,GAEJu2C,EACfC,EAAWD,EAAW71C,GAEjBV,EAAQy2C,UACXn6C,KAAKo6C,uBAAuBh2C,EAAM61C,EAAW71C,IAC7C81C,GAAY,KACZl6C,KAAKq6C,gBAAiB,GAGnB32C,EAAQ42C,eACXt6C,KAAKu6C,iBAAiBn2C,EAAM81C,GAahC,OAVIl6C,KAAKw6C,qBACPx6C,KAAKy6C,kBAAoBz6C,KAAKy6C,iBAAiBC,kBAEjD16C,KAAKw4C,qBACLx4C,KAAK64C,aAEAn1C,EAAQy2C,SACXn6C,KAAK6E,mBAGA7E,MAWTo6C,uBAAwB,SAAUh2C,EAAMH,GAatC,OAZAjE,KAAKk5C,cAAc90C,GAAQH,EAEvBjE,KAAKo5C,gBACPp5C,KAAKo5C,cAAch1C,GAAQH,GAGzBjE,KAAK26C,gBACP36C,KAAK26C,cAAcv2C,GAAQH,GAG7BjE,KAAKoE,GAAQH,EAENjE,MAWTu6C,iBAAkB,SAAUn2C,EAAMH,GAWhC,OAVAjE,KAAKk5C,cAAcnsC,MAAM3I,GAAQH,EAE7BjE,KAAKo5C,gBACPp5C,KAAKo5C,cAAcrsC,MAAM3I,GAAQH,GAG/BjE,KAAK46C,YACP56C,KAAK46C,UAAU7tC,MAAM3I,GAAQH,GAGxBjE,MAOTwqC,QAAS,WACP,OAAOxqC,KAAK83C,kBAAkB,IAShC+C,qBAAsB,SAAUC,GAC9B,IAGI/1C,EAAQnB,EAAGC,EAHXk3C,EAAe/6C,KAAKg7C,cACpBC,EAAmBj7C,KAAKw3C,gBACxB0D,EAAgBl7C,KAAK03C,aAGzB,IADA13C,KAAK83C,kBAAoBgD,EACpBl3C,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,KAC/CmB,EAAS/E,KAAKwE,SAASZ,IAChBu3C,OAASp2C,EAAOq2C,WAAU,GAanC,OAXIL,GACFA,EAAaK,YAEXH,GACFA,EAAiBG,WAAU,GAEzBF,GACFA,EAAcE,WAAU,GAE1Bp7C,KAAKq7C,yBACLr7C,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAaTs7C,YAAa,SAAUvyC,EAAO9E,GAE5B,IAAIs3C,EAASxyC,EAAO+xC,EAAM96C,KAAK83C,kBAAkBnsC,MAAM,GACvD5C,EAAQU,EAAeV,EAAOuB,EAAgBtK,KAAK83C,oBACnDgD,EAAI,GAAK72C,EACT62C,EAAI,GAAK72C,EACT,IAAIu3C,EAAQ/xC,EAAeV,EAAO+xC,GAGlC,OAFAA,EAAI,IAAMS,EAAOlyC,EAAImyC,EAAMnyC,EAC3ByxC,EAAI,IAAMS,EAAOjyC,EAAIkyC,EAAMlyC,EACpBtJ,KAAK66C,qBAAqBC,IASnCW,QAAS,SAAUx3C,GAEjB,OADAjE,KAAKs7C,YAAY,IAAIj+C,EAAO+L,MAAM,EAAG,GAAInF,GAClCjE,MAST07C,YAAa,SAAU3yC,GACrB,IAAI+xC,EAAM96C,KAAK83C,kBAAkBnsC,MAAM,GAGvC,OAFAmvC,EAAI,IAAM/xC,EAAMM,EAChByxC,EAAI,IAAM/xC,EAAMO,EACTtJ,KAAK66C,qBAAqBC,IASnCa,YAAa,SAAU5yC,GACrB,OAAO/I,KAAK07C,YAAY,IAAIr+C,EAAO+L,OAChCL,EAAMM,EAAIrJ,KAAK83C,kBAAkB,IACjC/uC,EAAMO,EAAItJ,KAAK83C,kBAAkB,MAQtC8D,WAAY,WACV,OAAO57C,KAAKk5C,eAOdv0C,eAAgB,SAASuC,GACvBlH,KAAK23C,UAAYzwC,EAAI20C,aACrB30C,EAAIC,KAAK,SAAUnH,MACnBkH,EAAIk0C,YACJp7C,KAAKyD,KAAK,eAAgB,CAAEkO,OAAQzK,IACpCA,EAAIzD,KAAK,UAOX6B,iBAAkB,SAAS4B,GACzBlH,KAAKyD,KAAK,iBAAkB,CAAEkO,OAAQzK,IACtCA,EAAIzD,KAAK,kBACFyD,EAAIpI,QASbg9C,aAAc,SAAS98C,GAErB,OADAA,EAAI+8C,UAAU,EAAG,EAAG/7C,KAAKT,MAAOS,KAAKb,QAC9Ba,MAOTf,WAAY,WACV,OAAOe,KAAKm5C,kBAQd6C,MAAO,WAcL,OAbAh8C,KAAKwE,SAASV,OAAS,EACvB9D,KAAKw3C,gBAAkB,KACvBx3C,KAAK03C,aAAe,KACpB13C,KAAKu3C,gBAAkB,GACvBv3C,KAAKy3C,aAAe,GAChBz3C,KAAKi8C,oBACPj8C,KAAKsE,IAAI,WAAYtE,KAAKk8C,sBAC1Bl8C,KAAKm8C,gBAAkB,KACvBn8C,KAAKi8C,mBAAoB,GAE3Bj8C,KAAK87C,aAAa97C,KAAKm5C,kBACvBn5C,KAAKyD,KAAK,kBACVzD,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAQTo8C,UAAW,WACT,IAAIC,EAAiBr8C,KAAKm5C,iBAE1B,OADAn5C,KAAKs8C,aAAaD,EAAgBr8C,KAAKwE,UAChCxE,MAaTm3C,eAAgB,WACdn3C,KAAKu8C,YAAc,EACnBv8C,KAAKo8C,aAUPv3C,iBAAkB,WAIhB,OAHK7E,KAAKu8C,cACRv8C,KAAKu8C,YAAcl/C,EAAOgG,KAAKumB,iBAAiB5pB,KAAKk3C,sBAEhDl3C,MAUTq7C,uBAAwB,WACtB,IAAIvxC,EAAS,GAAKvK,EAAQS,KAAKT,MAAOJ,EAASa,KAAKb,OAChDq9C,EAAOlyC,EAAgBtK,KAAK83C,mBAMhC,OALAhuC,EAAOgpC,GAAKrpC,EAAe,CAAEJ,EAAG,EAAGC,EAAG,GAAKkzC,GAC3C1yC,EAAOmpC,GAAKxpC,EAAe,CAAEJ,EAAG9J,EAAO+J,EAAGnK,GAAUq9C,GACpD1yC,EAAOipC,GAAK,IAAI11C,EAAO+L,MAAMU,EAAOmpC,GAAG5pC,EAAGS,EAAOgpC,GAAGxpC,GACpDQ,EAAOkpC,GAAK,IAAI31C,EAAO+L,MAAMU,EAAOgpC,GAAGzpC,EAAGS,EAAOmpC,GAAG3pC,GACpDtJ,KAAKk4C,UAAYpuC,EACVA,GAGT2yC,sBAAuB,WACjBz8C,KAAKu8C,cACPl/C,EAAOgG,KAAK2nB,gBAAgBhrB,KAAKu8C,aACjCv8C,KAAKu8C,YAAc,IAWvBD,aAAc,SAASt9C,EAAKkG,GAC1B,IAAIgE,EAAIlJ,KAAK83C,kBAAmBxpC,EAAOtO,KAAK84B,SAC5C94B,KAAKy8C,wBACLz8C,KAAKq7C,yBACLr7C,KAAK87C,aAAa98C,GAClB3B,EAAOgG,KAAKuiB,kBAAkB5mB,EAAKgB,KAAK6lB,uBACxC7lB,KAAKyD,KAAK,gBAAiB,CAAEzE,IAAKA,IAClCgB,KAAK08C,kBAAkB19C,GAEvBA,EAAI0Q,OAEJ1Q,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC9ClJ,KAAK28C,eAAe39C,EAAKkG,GACzBlG,EAAI6Q,WACC7P,KAAK43C,sBAAwB53C,KAAKu4C,aACrCv4C,KAAK48C,aAAa59C,GAEhBsP,IACFA,EAAKxP,OAASkB,KAEdsO,EAAKuuC,cACLvuC,EAAKwuC,gBAAiB,EACtBxuC,EAAKyuC,YAAY,CAAEC,aAAa,IAChCh9C,KAAKi9C,qBAAqBj+C,IAE5BgB,KAAKk9C,eAAel+C,GAChBgB,KAAK43C,sBAAwB53C,KAAKu4C,aACpCv4C,KAAK48C,aAAa59C,GAEpBgB,KAAKyD,KAAK,eAAgB,CAAEzE,IAAKA,KAOnCi+C,qBAAsB,SAASj+C,GAC7B,IAAIkK,EAAIlJ,KAAK83C,kBAAmBxpC,EAAOtO,KAAK84B,SAC5C95B,EAAI0Q,OACJ1Q,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAG9ClK,EAAIm+C,yBAA2B,iBAC/B7uC,EAAKvE,UAAU/K,GACfA,EAAII,MAAM,EAAIkP,EAAK8uC,MAAO,EAAI9uC,EAAK+uC,OACnCr+C,EAAIM,UAAUgP,EAAKgvC,cAAehvC,EAAKivC,mBAAoBjvC,EAAKkvC,mBAChEx+C,EAAI6Q,WAQN8sC,eAAgB,SAAS39C,EAAKkG,GAC5B,IAAItB,EAAGC,EACP,IAAKD,EAAI,EAAGC,EAAMqB,EAAQpB,OAAQF,EAAIC,IAAOD,EAC3CsB,EAAQtB,IAAMsB,EAAQtB,GAAGsvC,OAAOl0C,IASpCy+C,2BAA4B,SAASz+C,EAAK2H,GACxC,IAAIpD,EAAOvD,KAAK2G,EAAW,SAAU5B,EAAS/E,KAAK2G,EAAW,SAC1DuC,EAAIlJ,KAAK83C,kBAAmB4F,EAAW19C,KAAK2G,EAAW,OAC3D,GAAKpD,GAASwB,EAAd,CAGA,GAAIxB,EAAM,CACRvE,EAAI0Q,OACJ1Q,EAAIuxC,YACJvxC,EAAI2Q,OAAO,EAAG,GACd3Q,EAAI2+C,OAAO39C,KAAKT,MAAO,GACvBP,EAAI2+C,OAAO39C,KAAKT,MAAOS,KAAKb,QAC5BH,EAAI2+C,OAAO,EAAG39C,KAAKb,QACnBH,EAAI4+C,YACJ5+C,EAAImxC,UAAY5sC,EAAKmxC,OACjBnxC,EAAKmxC,OAAO11C,EAAKgB,MACjBuD,EACAm6C,GACF1+C,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEhDlK,EAAI+K,UAAU,EAAG,EAAG,EAAG,EAAGxG,EAAKqnC,SAAW,EAAGrnC,EAAKsnC,SAAW,GAC7D,IAAIl2B,EAAIpR,EAAKgwC,mBAAqBhwC,EAAK+xC,iBACvC3gC,GAAK3V,EAAI+K,UAAU4K,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACnD3V,EAAIuE,OACJvE,EAAI6Q,UAEF9K,IACF/F,EAAI0Q,OACAguC,GACF1+C,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEhDnE,EAAOmuC,OAAOl0C,GACdA,EAAI6Q,aAQR6sC,kBAAmB,SAAS19C,GAC1BgB,KAAKy9C,2BAA2Bz+C,EAAK,eAOvCk+C,eAAgB,SAASl+C,GACvBgB,KAAKy9C,2BAA2Bz+C,EAAK,YAQvC6+C,UAAW,WACT,MAAO,CACLxzC,IAAKrK,KAAKb,OAAS,EACnBiL,KAAMpK,KAAKT,MAAQ,IASvBu+C,cAAe,SAAU/4C,GACvB,OAAO/E,KAAK+9C,cAAch5C,EAAQ,IAAI1H,EAAO+L,MAAMpJ,KAAK69C,YAAYzzC,KAAMrF,EAAOmlC,iBAAiB5gC,KASpG00C,cAAe,SAAUj5C,GACvB,OAAO/E,KAAK+9C,cAAch5C,EAAQ,IAAI1H,EAAO+L,MAAMrE,EAAOmlC,iBAAiB7gC,EAAGrJ,KAAK69C,YAAYxzC,OASjG4zC,aAAc,SAASl5C,GACrB,IAAIkP,EAASjU,KAAK69C,YAElB,OAAO79C,KAAK+9C,cAAch5C,EAAQ,IAAI1H,EAAO+L,MAAM6K,EAAO7J,KAAM6J,EAAO5J,OASzE6zC,qBAAsB,SAASn5C,GAC7B,IAAIo5C,EAAWn+C,KAAKo+C,cAEpB,OAAOp+C,KAAK+9C,cAAch5C,EAAQo5C,IASpCE,sBAAuB,SAASt5C,GAC9B,IAAIo5C,EAAWn+C,KAAKo+C,cAEpB,OADAp+C,KAAK+9C,cAAch5C,EAAQ,IAAI1H,EAAO+L,MAAM+0C,EAAS90C,EAAGtE,EAAOmlC,iBAAiB5gC,IACzEtJ,MASTs+C,sBAAuB,SAASv5C,GAC9B,IAAIo5C,EAAWn+C,KAAKo+C,cAEpB,OAAOp+C,KAAK+9C,cAAch5C,EAAQ,IAAI1H,EAAO+L,MAAMrE,EAAOmlC,iBAAiB7gC,EAAG80C,EAAS70C,KAQzF80C,YAAa,WACX,IAAInqC,EAASjU,KAAK69C,YACdrB,EAAOlyC,EAAgBtK,KAAK83C,mBAChC,OAAOruC,EAAe,CAAEJ,EAAG4K,EAAO7J,KAAMd,EAAG2K,EAAO5J,KAAOmyC,IAU3DuB,cAAe,SAASh5C,EAAQkP,GAI9B,OAHAlP,EAAOmP,oBAAoBD,EAAQ,SAAU,UAC7ClP,EAAOq2C,YACPp7C,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAQTu+C,eAAgB,SAAU1K,GACxB,OAAO7zC,KAAKw+C,iBAAiB3K,IAQ/BD,SAAU,SAAUC,GAClB,OAAO7zC,KAAKy+C,gBAAgB,WAAY5K,IAQ1C2K,iBAAkB,SAAU3K,GAC1B,OAAO7zC,KAAKy+C,gBAAgB,mBAAoB5K,IAMlD4K,gBAAiB,SAAUt9B,EAAY0yB,GAErC,IAAI/a,EAAW94B,KAAK84B,SAAU3mB,EAAO,CACnC7U,QAASD,EAAOC,QAChB4H,QAASlF,KAAK0+C,WAAWv9B,EAAY0yB,IASvC,OAPI/a,IACF3mB,EAAK2mB,SAAW94B,KAAK2+C,UAAU3+C,KAAK84B,SAAU3X,EAAY0yB,IAE5Dz0B,EAAOjN,EAAMnS,KAAK4+C,qBAAqBz9B,EAAY0yB,IAEnDx2C,EAAOgG,KAAKqL,uBAAuB1O,KAAMmS,EAAM0hC,GAExC1hC,GAMTusC,WAAY,SAASv9B,EAAY0yB,GAC/B,OAAO7zC,KAAKwE,SAASR,QAAO,SAASe,GACnC,OAAQA,EAAO85C,qBACdrrC,KAAI,SAASqhC,GACd,OAAO70C,KAAK2+C,UAAU9J,EAAU1zB,EAAY0yB,KAC3C7zC,OAML2+C,UAAW,SAAS9J,EAAU1zB,EAAY0yB,GACxC,IAAIiL,EAEC9+C,KAAKs2C,uBACRwI,EAAgBjK,EAASyB,qBACzBzB,EAASyB,sBAAuB,GAGlC,IAAIvxC,EAAS8vC,EAAS1zB,GAAY0yB,GAIlC,OAHK7zC,KAAKs2C,uBACRzB,EAASyB,qBAAuBwI,GAE3B/5C,GAMT65C,qBAAsB,SAASz9B,EAAY0yB,GACzC,IAAI1hC,EAAO,GAAK4sC,EAAU/+C,KAAKw3C,gBAAiBwH,EAAUh/C,KAAK03C,aAoB/D,OAlBI13C,KAAKu3C,kBACPplC,EAAK8sC,WAAaj/C,KAAKu3C,gBAAgB3D,SACnC5zC,KAAKu3C,gBAAgB3D,SAASC,GAC9B7zC,KAAKu3C,iBAGPv3C,KAAKy3C,eACPtlC,EAAK6sC,QAAUh/C,KAAKy3C,aAAa7D,SAC7B5zC,KAAKy3C,aAAa7D,SAASC,GAC3B7zC,KAAKy3C,cAEPsH,IAAYA,EAAQF,oBACtB1sC,EAAKqlC,gBAAkBx3C,KAAK2+C,UAAUI,EAAS59B,EAAY0yB,IAEzDmL,IAAYA,EAAQH,oBACtB1sC,EAAKulC,aAAe13C,KAAK2+C,UAAUK,EAAS79B,EAAY0yB,IAGnD1hC,GAUT+sC,2BAA2B,EAuC3BpL,MAAO,SAASpwC,EAAS4J,GACvB5J,IAAYA,EAAU,IACtBA,EAAQ4J,QAAUA,EAClB,IAAIymC,EAAS,GAkBb,OAhBA/zC,KAAKm/C,gBAAgBpL,EAAQrwC,GAC7B1D,KAAKo/C,cAAcrL,EAAQrwC,GACvB1D,KAAK84B,UACPib,EAAO1vC,KAAK,sBAAwBrE,KAAK84B,SAASumB,WAAa,UAEjEr/C,KAAKs/C,sBAAsBvL,EAAQ,cACnC/zC,KAAKu/C,sBAAsBxL,EAAQ,kBAAmBzmC,GACtDtN,KAAKw/C,eAAezL,EAAQzmC,GACxBtN,KAAK84B,UACPib,EAAO1vC,KAAK,UAEdrE,KAAKs/C,sBAAsBvL,EAAQ,WACnC/zC,KAAKu/C,sBAAsBxL,EAAQ,eAAgBzmC,GAEnDymC,EAAO1vC,KAAK,UAEL0vC,EAAOrgC,KAAK,KAMrByrC,gBAAiB,SAASpL,EAAQrwC,GAC5BA,EAAQ+7C,kBAGZ1L,EAAO1vC,KACL,iCAAmCX,EAAQg8C,UAAY,QAAU,yBACjE,kDACA,0DAOJN,cAAe,SAASrL,EAAQrwC,GAC9B,IAEIo3C,EAFAv7C,EAAQmE,EAAQnE,OAASS,KAAKT,MAC9BJ,EAASuE,EAAQvE,QAAUa,KAAKb,OAC3BwgD,EAAU,gBAAkB3/C,KAAKT,MAAQ,IAAMS,KAAKb,OAAS,KAClEsU,EAAsBpW,EAAOwR,OAAO4E,oBAEpC/P,EAAQi8C,QACVA,EAAU,YACFj8C,EAAQi8C,QAAQt2C,EAAI,IACpB3F,EAAQi8C,QAAQr2C,EAAI,IACpB5F,EAAQi8C,QAAQpgD,MAAQ,IACxBmE,EAAQi8C,QAAQxgD,OAAS,KAG7Ba,KAAKk/C,4BACPpE,EAAM96C,KAAK83C,kBACX6H,EAAU,YACFl1C,GAASqwC,EAAI,GAAKA,EAAI,GAAIrnC,GAAuB,IACjDhJ,GAASqwC,EAAI,GAAKA,EAAI,GAAIrnC,GAAuB,IACjDhJ,EAAQzK,KAAKT,MAAQu7C,EAAI,GAAIrnC,GAAuB,IACpDhJ,EAAQzK,KAAKb,OAAS27C,EAAI,GAAIrnC,GAAuB,MAIjEsgC,EAAO1vC,KACL,QACA,sCACA,8CACA,iBACA,UAAW9E,EAAO,KAClB,WAAYJ,EAAQ,KACpBwgD,EACA,0BACA,gCAAiCtiD,EAAOC,QAAS,YACjD,WACA0C,KAAK4/C,2BACL5/C,KAAK6/C,6BACL7/C,KAAK8/C,wBAAwBp8C,GAC7B,cAIJo8C,wBAAyB,SAASp8C,GAChC,IAAIo1B,EAAW94B,KAAK84B,SACpB,OAAIA,GACFA,EAASumB,WAAa,YAAchiD,EAAOwR,OAAOilB,QAC1C,iBAAmBgF,EAASumB,WAAa,QAC/Cr/C,KAAK84B,SAASinB,cAAcr8C,EAAQ4J,SACpC,iBAEG,IAOTuyC,2BAA4B,WAC1B,IAAIx+B,EAAQrhB,KAeZ,MAda,CAAC,aAAc,WAAWwT,KAAI,SAASpP,GAC9C,IAAIb,EAAO8d,EAAMjd,EAAO,SACxB,GAAIb,GAAQA,EAAKmxC,OAAQ,CACvB,IAAIsL,EAAkB3+B,EAAMjd,EAAO,OAAQ02C,EAAMz5B,EAAMy2B,kBACnD/yC,EAAS,CACPxF,MAAO8hB,EAAM9hB,OAASygD,EAAkBlF,EAAI,GAAK,GACjD37C,OAAQkiB,EAAMliB,QAAU6gD,EAAkBlF,EAAI,GAAK,IAEzD,OAAOv3C,EAAKuwC,MACV/uC,EACA,CAAEovC,oBAAqB6L,EAAkB3iD,EAAOgG,KAAKkQ,YAAYunC,GAAO,SAIpEpnC,KAAK,KAUrBksC,yBAA0B,WACxB,IAAiC14C,EAAK2L,EAClC9F,EAAOkzC,EAAKC,EAAiBC,EAAWv8C,EAAGC,EAD3CkwC,EAAS,GAAIqM,EAAW,GAExB/+C,EAAYhE,EAAOgE,UAAW6D,EAAU,GAS5C,IAPAlF,KAAKwE,SAASmJ,SAAQ,SAASlJ,EAAIM,GACjCG,EAAQb,KAAKU,GACTA,EAAOP,UACTO,EAAOP,SAASmJ,QAAQlJ,MAIvBb,EAAI,EAAGC,EAAMqB,EAAQpB,OAAQF,EAAIC,EAAKD,IAGzC,GADAiP,GADA3L,EAAMhC,EAAQtB,IACGiP,YACiB,IAA9B3L,EAAIvB,KAAKvC,QAAQ,UAAkBg9C,EAASvtC,IAAgBxR,EAAUwR,KAG1EutC,EAASvtC,IAAc,EAClB3L,EAAIyc,QAIT,IAAKu8B,KADLnzC,EAAQ7F,EAAIyc,OAGV,IAAKw8B,KADLF,EAAMlzC,EAAMmzC,IAILE,EADLvtC,EADQotC,EAAIE,GACOttC,aACUxR,EAAUwR,KACrCutC,EAASvtC,IAAc,GAM/B,IAAK,IAAImG,KAAKonC,EACZrM,GAAU,CACR,qBACA,uBAAyB/6B,EAAG,OAC5B,mBAAqB3X,EAAU2X,GAAI,QACnC,WACAtF,KAAK,IAaT,OAVIqgC,IACFA,EAAS,CACP,4BACA,cACAA,EACA,MACA,cACArgC,KAAK,KAGFqgC,GAMTyL,eAAgB,SAASzL,EAAQzmC,GAC/B,IAAIunC,EAAUjxC,EAAGC,EAAKqB,EAAUlF,KAAKwE,SACrC,IAAKZ,EAAI,EAAGC,EAAMqB,EAAQpB,OAAQF,EAAIC,EAAKD,KACzCixC,EAAW3vC,EAAQtB,IACNi7C,mBAGb7+C,KAAKqgD,cAActM,EAAQc,EAAUvnC,IAOzC+yC,cAAe,SAAStM,EAAQc,EAAUvnC,GACxCymC,EAAO1vC,KAAKwwC,EAASf,MAAMxmC,KAM7BiyC,sBAAuB,SAASxL,EAAQptC,EAAU2G,GAC5CtN,KAAK2G,KAAc3G,KAAK2G,GAAUk4C,mBAAqB7+C,KAAK2G,GAAUmtC,OACxEC,EAAO1vC,KAAKrE,KAAK2G,GAAUmtC,MAAMxmC,KAOrCgyC,sBAAuB,SAASvL,EAAQptC,GACtC,IAAID,EAAS1G,KAAK2G,EAAW,SAAUm0C,EAAM96C,KAAK83C,kBAAmBwI,EAAatgD,KAAKT,MACnFghD,EAAcvgD,KAAKb,OACvB,GAAKuH,EAGL,GAAIA,EAAOguC,OAAQ,CACjB,IAAIW,EAAS3uC,EAAO2uC,OAAQmH,EAAOn/C,EAAOgG,KAAKiH,gBAAgBwwC,GAC3D3G,EADgFn0C,KAAK2G,EAAW,OAC3DtJ,EAAOgG,KAAKkQ,YAAYipC,GAAQ,GACzEzI,EAAO1vC,KACL,oBAAsB8vC,EAAsB,cAAemM,EAAa,EAAG,IAAKC,EAAc,EAAG,KACjG,OAAQ75C,EAAOkkC,QAAU0V,EAAa,EACtC,QAAS55C,EAAOmkC,QAAU0V,EAAc,EAAG,KAC3C,UACY,aAAXlL,GAAoC,cAAXA,EACtB3uC,EAAOK,OAAOxH,MACd+gD,EACJ,aACY,aAAXjL,GAAoC,cAAXA,EACtB3uC,EAAOK,OAAO5H,OACdohD,EACJ,sBAAwB75C,EAAOyf,GAAK,KACpC,mBAIF4tB,EAAO1vC,KACL,gDACA,SAAUqC,EAAQ,IAClB,eAaN85C,WAAY,SAAUz7C,GACpB,IAAKA,EACH,OAAO/E,KAET,IACI4D,EAAGsD,EAAKu5C,EADRC,EAAkB1gD,KAAKg7C,cAE3B,GAAIj2C,IAAW27C,GAAmC,oBAAhB37C,EAAOY,KAEvC,IAAK/B,GADL68C,EAAOC,EAAgBl8C,UACTV,OAAQF,KACpBsD,EAAMu5C,EAAK78C,GACXuE,EAAgBnI,KAAKwE,SAAU0C,GAC/BlH,KAAKwE,SAASka,QAAQxX,QAIxBiB,EAAgBnI,KAAKwE,SAAUO,GAC/B/E,KAAKwE,SAASka,QAAQ3Z,GAGxB,OADA/E,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAUT2gD,aAAc,SAAU57C,GACtB,IAAKA,EACH,OAAO/E,KAET,IACI4D,EAAGsD,EAAKu5C,EADRC,EAAkB1gD,KAAKg7C,cAE3B,GAAIj2C,IAAW27C,GAAmC,oBAAhB37C,EAAOY,KAEvC,IADA86C,EAAOC,EAAgBl8C,SAClBZ,EAAI,EAAGA,EAAI68C,EAAK38C,OAAQF,IAC3BsD,EAAMu5C,EAAK78C,GACXuE,EAAgBnI,KAAKwE,SAAU0C,GAC/BlH,KAAKwE,SAASH,KAAK6C,QAIrBiB,EAAgBnI,KAAKwE,SAAUO,GAC/B/E,KAAKwE,SAASH,KAAKU,GAGrB,OADA/E,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAcT4gD,cAAe,SAAU77C,EAAQ87C,GAC/B,IAAK97C,EACH,OAAO/E,KAET,IACI4D,EAAGsD,EAAKkB,EAAK04C,EAAQL,EADrBC,EAAkB1gD,KAAKg7C,cACI+F,EAAY,EAE3C,GAAIh8C,IAAW27C,GAAmC,oBAAhB37C,EAAOY,KAEvC,IADA86C,EAAOC,EAAgBl8C,SAClBZ,EAAI,EAAGA,EAAI68C,EAAK38C,OAAQF,IAC3BsD,EAAMu5C,EAAK78C,IACXwE,EAAMpI,KAAKwE,SAASpB,QAAQ8D,IAClB,EAAI65C,IACZD,EAAS14C,EAAM,EACfD,EAAgBnI,KAAKwE,SAAU0C,GAC/BlH,KAAKwE,SAASW,OAAO27C,EAAQ,EAAG55C,IAElC65C,SAKU,KADZ34C,EAAMpI,KAAKwE,SAASpB,QAAQ2B,MAG1B+7C,EAAS9gD,KAAKghD,mBAAmBj8C,EAAQqD,EAAKy4C,GAC9C14C,EAAgBnI,KAAKwE,SAAUO,GAC/B/E,KAAKwE,SAASW,OAAO27C,EAAQ,EAAG/7C,IAIpC,OADA/E,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAMTghD,mBAAoB,SAASj8C,EAAQqD,EAAKy4C,GACxC,IAAIC,EAAQl9C,EAEZ,GAAIi9C,EAIF,IAHAC,EAAS14C,EAGJxE,EAAIwE,EAAM,EAAGxE,GAAK,IAAKA,EAAG,CAM7B,GAJqBmB,EAAOk8C,qBAAqBjhD,KAAKwE,SAASZ,KAC1CmB,EAAOm8C,wBAAwBlhD,KAAKwE,SAASZ,KAC7C5D,KAAKwE,SAASZ,GAAGs9C,wBAAwBn8C,GAE1C,CAClB+7C,EAASl9C,EACT,YAKJk9C,EAAS14C,EAAM,EAGjB,OAAO04C,GAcTK,aAAc,SAAUp8C,EAAQ87C,GAC9B,IAAK97C,EACH,OAAO/E,KAET,IACI4D,EAAGsD,EAAKkB,EAAK04C,EAAQL,EADrBC,EAAkB1gD,KAAKg7C,cACI+F,EAAY,EAE3C,GAAIh8C,IAAW27C,GAAmC,oBAAhB37C,EAAOY,KAEvC,IAAK/B,GADL68C,EAAOC,EAAgBl8C,UACTV,OAAQF,KACpBsD,EAAMu5C,EAAK78C,IACXwE,EAAMpI,KAAKwE,SAASpB,QAAQ8D,IAClBlH,KAAKwE,SAASV,OAAS,EAAIi9C,IACnCD,EAAS14C,EAAM,EACfD,EAAgBnI,KAAKwE,SAAU0C,GAC/BlH,KAAKwE,SAASW,OAAO27C,EAAQ,EAAG55C,IAElC65C,SAIF34C,EAAMpI,KAAKwE,SAASpB,QAAQ2B,MAChB/E,KAAKwE,SAASV,OAAS,IAEjCg9C,EAAS9gD,KAAKohD,mBAAmBr8C,EAAQqD,EAAKy4C,GAC9C14C,EAAgBnI,KAAKwE,SAAUO,GAC/B/E,KAAKwE,SAASW,OAAO27C,EAAQ,EAAG/7C,IAIpC,OADA/E,KAAK4E,mBAAqB5E,KAAK6E,mBACxB7E,MAMTohD,mBAAoB,SAASr8C,EAAQqD,EAAKy4C,GACxC,IAAIC,EAAQl9C,EAAGC,EAEf,GAAIg9C,EAIF,IAHAC,EAAS14C,EAGJxE,EAAIwE,EAAM,EAAGvE,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,IAAOD,EAAG,CAM1D,GAJqBmB,EAAOk8C,qBAAqBjhD,KAAKwE,SAASZ,KAC1CmB,EAAOm8C,wBAAwBlhD,KAAKwE,SAASZ,KAC7C5D,KAAKwE,SAASZ,GAAGs9C,wBAAwBn8C,GAE1C,CAClB+7C,EAASl9C,EACT,YAKJk9C,EAAS14C,EAAM,EAGjB,OAAO04C,GAUTnxC,OAAQ,SAAU5K,EAAQC,GAGxB,OAFAmD,EAAgBnI,KAAKwE,SAAUO,GAC/B/E,KAAKwE,SAASW,OAAOH,EAAO,EAAGD,GACxB/E,KAAK4E,mBAAqB5E,KAAK6E,oBAQxCw8C,QAAS,WAsBP,OApBIrhD,KAAKu8C,cACPl/C,EAAOgG,KAAK2nB,gBAAgBhrB,KAAKu8C,aACjCv8C,KAAKu8C,YAAc,GAErBv8C,KAAKuF,eAAc,SAASR,GAC1BA,EAAOs8C,SAAWt8C,EAAOs8C,aAE3BrhD,KAAKwE,SAAW,GACZxE,KAAKw3C,iBAAmBx3C,KAAKw3C,gBAAgB6J,SAC/CrhD,KAAKw3C,gBAAgB6J,UAEvBrhD,KAAKw3C,gBAAkB,KACnBx3C,KAAK03C,cAAgB13C,KAAK03C,aAAa2J,SACzCrhD,KAAK03C,aAAa2J,UAEpBrhD,KAAK03C,aAAe,KACpB13C,KAAKm8C,gBAAkB,KACvBn8C,KAAKm5C,iBAAmB,KACxB97C,EAAOgG,KAAKwkB,iBAAiB7nB,KAAKk5C,eAClCl5C,KAAKk5C,mBAAgBxsC,EACd1M,MAOT+O,SAAU,WACR,MAAO,oBAAsB/O,KAAKkG,aAA3B,iBACkBlG,KAAKwE,SAASV,OAAS,SAIpDsb,EAAO/hB,EAAO05C,aAAajoC,UAAWzR,EAAOmG,YAC7C4b,EAAO/hB,EAAO05C,aAAajoC,UAAWzR,EAAOkH,YAC7C6a,EAAO/hB,EAAO05C,aAAajoC,UAAWzR,EAAOikD,iBAE7CliC,EAAO/hB,EAAO05C,aAAgD,CAO5DwK,WAAY,yCAWZC,SAAU,SAAUrgC,GAClB,IAAIqD,EAAK1U,IAET,IAAK0U,IAAOA,EAAGvlB,WACb,OAAO,KAGT,IAAID,EAAMwlB,EAAGvlB,WAAW,MACxB,IAAKD,EACH,OAAO,KAGT,OAAQmiB,GAEN,IAAK,cACH,MAAkC,qBAApBniB,EAAIyiD,YAEpB,QACE,OAAO,SAuBfpkD,EAAO05C,aAAajoC,UAAU4yC,OAASrkD,EAAO05C,aAAajoC,UAAU8kC,SAEjEv2C,EAAOwD,eACTxD,EAAO05C,aAAajoC,UAAU6yC,gBAAkB,WAC9C,IAAIj6B,EAAOD,EAAcznB,KAAKk5C,eAC9B,OAAOxxB,GAAQA,EAAKi6B,mBAEtBtkD,EAAO05C,aAAajoC,UAAU8yC,iBAAmB,SAASx1B,GACxD,IAAI1E,EAAOD,EAAcznB,KAAKk5C,eAC9B,OAAOxxB,GAAQA,EAAKk6B,iBAAiBx1B,MA3zD3C,GAs0DA/uB,EAAOwkD,UAAYxkD,EAAOgG,KAAKke,YAAqD,CAOlF8J,MAAO,eAOP9rB,MAAO,EASPk3C,OAAQ,KAORqL,cAAe,QAOfC,eAAgB,QAOhBC,iBAA0B,GAO1BC,gBAAiB,KAQjBC,qBAAqB,EAOrBxH,gBAAiB,WACf,IAAI17C,EAAMgB,KAAKlB,OAAOu6C,WACtBr6C,EAAIqxC,YAAcrwC,KAAKqrB,MACvBrsB,EAAIsxC,UAAYtwC,KAAKT,MACrBP,EAAImjD,QAAUniD,KAAK8hD,cACnB9iD,EAAIojD,WAAapiD,KAAKgiD,iBACtBhjD,EAAIqjD,SAAWriD,KAAK+hD,eAChB1kD,EAAO05C,aAAayK,SAAS,gBAC/BxiD,EAAIyiD,YAAYzhD,KAAKiiD,iBAAmB,KAS5CK,kBAAmB,SAAStjD,GAC1B,IAAIkK,EAAIlJ,KAAKlB,OAAOg5C,kBACpB94C,EAAI0Q,OACJ1Q,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAOhDq5C,WAAY,WACV,GAAKviD,KAAKy2C,OAAV,CAIA,IAAI33C,EAASkB,KAAKlB,OACd23C,EAASz2C,KAAKy2C,OACdz3C,EAAMF,EAAOu6C,WACb71B,EAAO1kB,EAAO0rC,UACd1rC,GAAUA,EAAOg6C,qBACnBt1B,GAAQnmB,EAAO0E,kBAGjB/C,EAAIwjD,YAAc/L,EAAOprB,MACzBrsB,EAAIyjD,WAAahM,EAAOL,KAAO5yB,EAC/BxkB,EAAI0jD,cAAgBjM,EAAO7L,QAAUpnB,EACrCxkB,EAAI2jD,cAAgBlM,EAAO5L,QAAUrnB,IAGvCo/B,gBAAiB,WAEf,OADY,IAAIvlD,EAAOquB,MAAM1rB,KAAKqrB,OACrBqK,WAAa,KAAO11B,KAAKy2C,QAOxCoM,aAAc,WACZ,IAAI7jD,EAAMgB,KAAKlB,OAAOu6C,WAEtBr6C,EAAIwjD,YAAc,GAClBxjD,EAAIyjD,WAAazjD,EAAI0jD,cAAgB1jD,EAAI2jD,cAAgB,GAQ3DG,iBAAkB,SAAS/Y,GACzB,OAAOA,EAAQ1gC,EAAI,GAAK0gC,EAAQ1gC,EAAIrJ,KAAKlB,OAAO86C,YAAc7P,EAAQzgC,EAAI,GAAKygC,EAAQzgC,EAAItJ,KAAKlB,OAAO+6C,eAWzGx8C,EAAO0lD,YAAc1lD,EAAOgG,KAAKke,YAAYlkB,EAAOwkD,UAAsD,CAOxGmB,SAAU,GAOVxhC,WAAY,SAAS1iB,GACnBkB,KAAKlB,OAASA,EACdkB,KAAKijD,QAAU,IAOjBC,aAAc,SAAUlkD,EAAKmkD,EAAIC,GAC/B,IAAIC,EAAWF,EAAGjpB,aAAakpB,GAE/B,OADApkD,EAAIskD,iBAAiBH,EAAG95C,EAAG85C,EAAG75C,EAAG+5C,EAASh6C,EAAGg6C,EAAS/5C,GAC/C+5C,GAOTE,YAAa,SAASxZ,EAASrmC,GACxB1D,KAAKlB,OAAO0kD,aAAa9/C,EAAQomC,KAGtC9pC,KAAKyjD,mBAAmB1Z,GAGxB/pC,KAAK0jD,oBAAoB3Z,GACzB/pC,KAAK2jD,YAOPC,YAAa,SAAS7Z,EAASrmC,GAC7B,GAAK1D,KAAKlB,OAAO0kD,aAAa9/C,EAAQomC,MAGL,IAA7B9pC,KAAKkiD,sBAAgCliD,KAAK8iD,iBAAiB/Y,KAG3D/pC,KAAK0jD,oBAAoB3Z,IAAY/pC,KAAKijD,QAAQn/C,OAAS,EAC7D,GAAI9D,KAAK4iD,kBAGP5iD,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAK2jD,cAEF,CACH,IAAI75C,EAAS9J,KAAKijD,QAASn/C,EAASgG,EAAOhG,OAAQ9E,EAAMgB,KAAKlB,OAAOu6C,WAErEr5C,KAAKsiD,kBAAkBtjD,GACnBgB,KAAK6jD,SACP7kD,EAAIuxC,YACJvxC,EAAI2Q,OAAO3P,KAAK6jD,OAAOx6C,EAAGrJ,KAAK6jD,OAAOv6C,IAExCtJ,KAAK6jD,OAAS7jD,KAAKkjD,aAAalkD,EAAK8K,EAAOhG,EAAS,GAAIgG,EAAOhG,EAAS,IAAI,GAC7E9E,EAAIwvB,SACJxvB,EAAI6Q,YAQVi0C,UAAW,SAASpgD,GAClB,OAAK1D,KAAKlB,OAAO0kD,aAAa9/C,EAAQomC,KAGtC9pC,KAAK6jD,YAASn3C,EACd1M,KAAK+jD,uBACE,IAOTN,mBAAoB,SAAS1Z,GAE3B,IAAIrgC,EAAI,IAAIrM,EAAO+L,MAAM2gC,EAAQ1gC,EAAG0gC,EAAQzgC,GAE5CtJ,KAAKgkD,SACLhkD,KAAKikD,UAAUv6C,GACf1J,KAAKlB,OAAOu6C,WAAW1pC,OAAOjG,EAAEL,EAAGK,EAAEJ,IAOvC26C,UAAW,SAASl7C,GAClB,QAAI/I,KAAKijD,QAAQn/C,OAAS,GAAKiF,EAAM6wB,GAAG55B,KAAKijD,QAAQjjD,KAAKijD,QAAQn/C,OAAS,OAG3E9D,KAAKijD,QAAQ5+C,KAAK0E,IACX,IAOTi7C,OAAQ,WACNhkD,KAAKijD,QAAU,GACfjjD,KAAK06C,kBACL16C,KAAKuiD,cAOPmB,oBAAqB,SAAS3Z,GAC5B,IAAIma,EAAe,IAAI7mD,EAAO+L,MAAM2gC,EAAQ1gC,EAAG0gC,EAAQzgC,GACvD,OAAOtJ,KAAKikD,UAAUC,IAOxBP,QAAS,WACP,IAAmC//C,EAAGC,EAAlC7E,EAAOgB,KAAKlB,OAAOu6C,WACnB8J,EAAKnjD,KAAKijD,QAAQ,GAClBG,EAAKpjD,KAAKijD,QAAQ,GAQtB,GANAjjD,KAAKsiD,kBAAkBtjD,GACvBA,EAAIuxC,YAKwB,IAAxBvwC,KAAKijD,QAAQn/C,QAAgBq/C,EAAG95C,IAAM+5C,EAAG/5C,GAAK85C,EAAG75C,IAAM85C,EAAG95C,EAAG,CAC/D,IAAI/J,EAAQS,KAAKT,MAAQ,IACzB4jD,EAAK,IAAI9lD,EAAO+L,MAAM+5C,EAAG95C,EAAG85C,EAAG75C,GAC/B85C,EAAK,IAAI/lD,EAAO+L,MAAMg6C,EAAG/5C,EAAG+5C,EAAG95C,GAC/B65C,EAAG95C,GAAK9J,EACR6jD,EAAG/5C,GAAK9J,EAIV,IAFAP,EAAI2Q,OAAOwzC,EAAG95C,EAAG85C,EAAG75C,GAEf1F,EAAI,EAAGC,EAAM7D,KAAKijD,QAAQn/C,OAAQF,EAAIC,EAAKD,IAG9C5D,KAAKkjD,aAAalkD,EAAKmkD,EAAIC,GAC3BD,EAAKnjD,KAAKijD,QAAQr/C,GAClBw/C,EAAKpjD,KAAKijD,QAAQr/C,EAAI,GAKxB5E,EAAI2+C,OAAOwF,EAAG95C,EAAG85C,EAAG75C,GACpBtK,EAAIwvB,SACJxvB,EAAI6Q,WAQNs0C,uBAAwB,SAASr6C,GAC/B,IAAelG,EAAX0K,EAAO,GAAO/O,EAAQS,KAAKT,MAAQ,IACnC4jD,EAAK,IAAI9lD,EAAO+L,MAAMU,EAAO,GAAGT,EAAGS,EAAO,GAAGR,GAC7C85C,EAAK,IAAI/lD,EAAO+L,MAAMU,EAAO,GAAGT,EAAGS,EAAO,GAAGR,GAC7CzF,EAAMiG,EAAOhG,OAAQsgD,EAAY,EAAGC,EAAY,EAAGC,EAAazgD,EAAM,EAO1E,IALIygD,IACFF,EAAYt6C,EAAO,GAAGT,EAAI+5C,EAAG/5C,GAAK,EAAIS,EAAO,GAAGT,IAAM+5C,EAAG/5C,EAAI,EAAI,EACjEg7C,EAAYv6C,EAAO,GAAGR,EAAI85C,EAAG95C,GAAK,EAAIQ,EAAO,GAAGR,IAAM85C,EAAG95C,EAAI,EAAI,GAEnEgF,EAAKjK,KAAK,KAAM8+C,EAAG95C,EAAI+6C,EAAY7kD,EAAO,IAAK4jD,EAAG75C,EAAI+6C,EAAY9kD,EAAO,KACpEqE,EAAI,EAAGA,EAAIC,EAAKD,IAAK,CACxB,IAAKu/C,EAAGvpB,GAAGwpB,GAAK,CACd,IAAIC,EAAWF,EAAGjpB,aAAakpB,GAI/B90C,EAAKjK,KAAK,KAAM8+C,EAAG95C,EAAG,IAAK85C,EAAG75C,EAAG,IAAK+5C,EAASh6C,EAAG,IAAKg6C,EAAS/5C,EAAG,KAErE65C,EAAKr5C,EAAOlG,GACPA,EAAI,EAAKkG,EAAOhG,SACnBs/C,EAAKt5C,EAAOlG,EAAI,IAQpB,OALI0gD,IACFF,EAAYjB,EAAG95C,EAAIS,EAAOlG,EAAI,GAAGyF,EAAI,EAAI85C,EAAG95C,IAAMS,EAAOlG,EAAI,GAAGyF,EAAI,GAAK,EACzEg7C,EAAYlB,EAAG75C,EAAIQ,EAAOlG,EAAI,GAAG0F,EAAI,EAAI65C,EAAG75C,IAAMQ,EAAOlG,EAAI,GAAG0F,EAAI,GAAK,GAE3EgF,EAAKjK,KAAK,KAAM8+C,EAAG95C,EAAI+6C,EAAY7kD,EAAO,IAAK4jD,EAAG75C,EAAI+6C,EAAY9kD,GAC3D+O,GAQTi2C,WAAY,SAASC,GACnB,IAAIl2C,EAAO,IAAIjR,EAAOonD,KAAKD,EAAU,CACnCjhD,KAAM,KACNirB,OAAQxuB,KAAKqrB,MACbmjB,YAAaxuC,KAAKT,MAClBuiD,cAAe9hD,KAAK8hD,cACpBE,iBAAkBhiD,KAAKgiD,iBACvBD,eAAgB/hD,KAAK+hD,eACrBE,gBAAiBjiD,KAAKiiD,kBAOxB,OALIjiD,KAAKy2C,SACPz2C,KAAKy2C,OAAOJ,cAAe,EAC3B/nC,EAAKmoC,OAAS,IAAIp5C,EAAO84C,OAAOn2C,KAAKy2C,SAGhCnoC,GAMTo2C,eAAgB,SAAS56C,EAAQ0R,GAC/B,GAAI1R,EAAOhG,QAAU,EACnB,OAAOgG,EAET,IACIlG,EADA4f,EAAOxjB,KAAKlB,OAAO0rC,UAAWma,EAAmBl9C,KAAKE,IAAI6T,EAAWgI,EAAM,GACxEtR,EAAIpI,EAAOhG,OAAS,EAAG8gD,EAAY96C,EAAO,GAAI+6C,EAAY,CAACD,GAElE,IAAKhhD,EAAI,EAAGA,EAAIsO,EAAGtO,IACL6D,KAAKE,IAAIi9C,EAAUv7C,EAAIS,EAAOlG,GAAGyF,EAAG,GAAK5B,KAAKE,IAAIi9C,EAAUt7C,EAAIQ,EAAOlG,GAAG0F,EAAG,IACxEq7C,IACfC,EAAY96C,EAAOlG,GACnBihD,EAAUxgD,KAAKugD,IAMnB,OAHyB,IAArBC,EAAU/gD,QACZ+gD,EAAUxgD,KAAK,IAAIhH,EAAO+L,MAAMy7C,EAAU,GAAGx7C,EAAGw7C,EAAU,GAAGv7C,IAExDu7C,GAQTd,oBAAqB,WACT/jD,KAAKlB,OAAOu6C,WAClBuE,YACA59C,KAAKgjD,WACPhjD,KAAKijD,QAAUjjD,KAAK0kD,eAAe1kD,KAAKijD,QAASjjD,KAAKgjD,WAExD,IAAIwB,EAAWxkD,KAAKmkD,uBAAuBnkD,KAAKijD,SAASvvC,KAAK,IAC9D,GAAiB,0BAAb8wC,EAAJ,CASA,IAAIl2C,EAAOtO,KAAKukD,WAAWC,GAC3BxkD,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAKlB,OAAO2E,KAAK,sBAAuB,CAAE6K,KAAMA,IAChDtO,KAAKlB,OAAO2F,IAAI6J,GAChBtO,KAAKlB,OAAO+F,mBACZyJ,EAAK8sC,YACLp7C,KAAK6iD,eAIL7iD,KAAKlB,OAAO2E,KAAK,eAAgB,CAAE6K,KAAMA,SAdvCtO,KAAKlB,OAAO+F,sBAwBpBxH,EAAOynD,YAAcznD,EAAOgG,KAAKke,YAAYlkB,EAAOwkD,UAAsD,CAOxGtiD,MAAO,GAOPiiB,WAAY,SAAS1iB,GACnBkB,KAAKlB,OAASA,EACdkB,KAAK8J,OAAS,IAOhBi7C,QAAS,SAAShb,GAChB,IAAIhhC,EAAQ/I,KAAKglD,SAASjb,GACtB/qC,EAAMgB,KAAKlB,OAAOu6C,WACtBr5C,KAAKsiD,kBAAkBtjD,GACvBgB,KAAKilD,IAAIjmD,EAAK+J,GACd/J,EAAI6Q,WAGNo1C,IAAK,SAASjmD,EAAK+J,GACjB/J,EAAImxC,UAAYpnC,EAAMxF,KACtBvE,EAAIuxC,YACJvxC,EAAIwxC,IAAIznC,EAAMM,EAAGN,EAAMO,EAAGP,EAAMm8C,OAAQ,EAAa,EAAVz9C,KAAKI,IAAQ,GACxD7I,EAAI4+C,YACJ5+C,EAAIuE,QAMNggD,YAAa,SAASxZ,GACpB/pC,KAAK8J,OAAOhG,OAAS,EACrB9D,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAKuiD,aACLviD,KAAK+kD,QAAQhb,IAOf4Z,QAAS,WACP,IAAmC//C,EAAGC,EAAlC7E,EAAOgB,KAAKlB,OAAOu6C,WACnBvvC,EAAS9J,KAAK8J,OAElB,IADA9J,KAAKsiD,kBAAkBtjD,GAClB4E,EAAI,EAAGC,EAAMiG,EAAOhG,OAAQF,EAAIC,EAAKD,IACxC5D,KAAKilD,IAAIjmD,EAAK8K,EAAOlG,IAEvB5E,EAAI6Q,WAON+zC,YAAa,SAAS7Z,IACa,IAA7B/pC,KAAKkiD,qBAAgCliD,KAAK8iD,iBAAiB/Y,KAG3D/pC,KAAK4iD,mBACP5iD,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAKglD,SAASjb,GACd/pC,KAAK2jD,WAGL3jD,KAAK+kD,QAAQhb,KAOjB+Z,UAAW,WACT,IAA+DlgD,EAAGC,EAA9DshD,EAA4BnlD,KAAKlB,OAAO8F,kBAC5C5E,KAAKlB,OAAO8F,mBAAoB,EAEhC,IAAIwgD,EAAU,GAEd,IAAKxhD,EAAI,EAAGC,EAAM7D,KAAK8J,OAAOhG,OAAQF,EAAIC,EAAKD,IAAK,CAClD,IAAImF,EAAQ/I,KAAK8J,OAAOlG,GACpByhD,EAAS,IAAIhoD,EAAOioD,OAAO,CACzBJ,OAAQn8C,EAAMm8C,OACd96C,KAAMrB,EAAMM,EACZgB,IAAKtB,EAAMO,EACX8/B,QAAS,SACTC,QAAS,SACT9lC,KAAMwF,EAAMxF,OAGlBvD,KAAKy2C,SAAW4O,EAAO5O,OAAS,IAAIp5C,EAAO84C,OAAOn2C,KAAKy2C,SAEvD2O,EAAQ/gD,KAAKghD,GAEf,IAAIlK,EAAQ,IAAI99C,EAAOmR,MAAM42C,GAC7BjK,EAAMr8C,OAASkB,KAAKlB,OAEpBkB,KAAKlB,OAAO2E,KAAK,sBAAuB,CAAE6K,KAAM6sC,IAChDn7C,KAAKlB,OAAO2F,IAAI02C,GAChBn7C,KAAKlB,OAAO2E,KAAK,eAAgB,CAAE6K,KAAM6sC,IAEzCn7C,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAK6iD,eACL7iD,KAAKlB,OAAO8F,kBAAoBugD,EAChCnlD,KAAKlB,OAAO+F,oBAOdmgD,SAAU,SAASjb,GACjB,IAAIma,EAAe,IAAI7mD,EAAO+L,MAAM2gC,EAAQ1gC,EAAG0gC,EAAQzgC,GAEnDi8C,EAAeloD,EAAOgG,KAAKgF,aACzBZ,KAAKc,IAAI,EAAGvI,KAAKT,MAAQ,IAAKS,KAAKT,MAAQ,IAAM,EAEnDimD,EAAc,IAAInoD,EAAOquB,MAAM1rB,KAAKqrB,OACjCoK,SAASp4B,EAAOgG,KAAKgF,aAAa,EAAG,KAAO,KAC5CstB,SAOP,OALAuuB,EAAagB,OAASK,EACtBrB,EAAa3gD,KAAOiiD,EAEpBxlD,KAAK8J,OAAOzF,KAAK6/C,GAEVA,KASX7mD,EAAOooD,WAAapoD,EAAOgG,KAAKke,YAAalkB,EAAOwkD,UAAqD,CAOvGtiD,MAAoB,GAOpBmmD,QAAoB,GAOpBC,SAAoB,EAOpBC,iBAAoB,EAOpBC,eAAsB,EAOtBC,qBAAsB,EAOtBtkC,WAAY,SAAS1iB,GACnBkB,KAAKlB,OAASA,EACdkB,KAAK+lD,YAAc,IAOrBxC,YAAa,SAASxZ,GACpB/pC,KAAK+lD,YAAYjiD,OAAS,EAC1B9D,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAKuiD,aAELviD,KAAKgmD,cAAcjc,GACnB/pC,KAAKkzC,OAAOlzC,KAAKimD,mBAOnBrC,YAAa,SAAS7Z,IACa,IAA7B/pC,KAAKkiD,qBAAgCliD,KAAK8iD,iBAAiB/Y,KAG/D/pC,KAAKgmD,cAAcjc,GACnB/pC,KAAKkzC,OAAOlzC,KAAKimD,oBAMnBnC,UAAW,WACT,IAAIqB,EAA4BnlD,KAAKlB,OAAO8F,kBAC5C5E,KAAKlB,OAAO8F,mBAAoB,EAIhC,IAFA,IAAIshD,EAAQ,GAEHtiD,EAAI,EAAGuiD,EAAOnmD,KAAK+lD,YAAYjiD,OAAQF,EAAIuiD,EAAMviD,IAGxD,IAFA,IAAIwiD,EAAapmD,KAAK+lD,YAAYniD,GAEzBoV,EAAI,EAAGC,EAAOmtC,EAAWtiD,OAAQkV,EAAIC,EAAMD,IAAK,CAEvD,IAAIqtC,EAAO,IAAIhpD,EAAOipD,KAAK,CACzB/mD,MAAO6mD,EAAWptC,GAAGzZ,MACrBJ,OAAQinD,EAAWptC,GAAGzZ,MACtB6K,KAAMg8C,EAAWptC,GAAG3P,EAAI,EACxBgB,IAAK+7C,EAAWptC,GAAG1P,EAAI,EACvB8/B,QAAS,SACTC,QAAS,SACT9lC,KAAMvD,KAAKqrB,QAEb66B,EAAM7hD,KAAKgiD,GAIXrmD,KAAK8lD,sBACPI,EAAQlmD,KAAKumD,mBAAmBL,IAGlC,IAAI/K,EAAQ,IAAI99C,EAAOmR,MAAM03C,GAC7BlmD,KAAKy2C,QAAU0E,EAAM30C,IAAI,SAAU,IAAInJ,EAAO84C,OAAOn2C,KAAKy2C,SAC1Dz2C,KAAKlB,OAAO2E,KAAK,sBAAuB,CAAE6K,KAAM6sC,IAChDn7C,KAAKlB,OAAO2F,IAAI02C,GAChBn7C,KAAKlB,OAAO2E,KAAK,eAAgB,CAAE6K,KAAM6sC,IAEzCn7C,KAAKlB,OAAOg9C,aAAa97C,KAAKlB,OAAOu6C,YACrCr5C,KAAK6iD,eACL7iD,KAAKlB,OAAO8F,kBAAoBugD,EAChCnlD,KAAKlB,OAAO+F,oBAOd0hD,mBAAoB,SAASL,GAG3B,IAAuB9+C,EAAKxD,EAAGC,EAA3B2iD,EAAc,GAElB,IAAK5iD,EAAI,EAAGC,EAAMqiD,EAAMpiD,OAAQF,EAAIC,EAAKD,IAElC4iD,EADLp/C,EAAM8+C,EAAMtiD,GAAGwG,KAAO,GAAK87C,EAAMtiD,GAAGyG,OAElCm8C,EAAYp/C,GAAO8+C,EAAMtiD,IAG7B,IAAI6iD,EAAmB,GACvB,IAAKr/C,KAAOo/C,EACVC,EAAiBpiD,KAAKmiD,EAAYp/C,IAGpC,OAAOq/C,GAMTvT,OAAQ,SAASkT,GACf,IAAkCxiD,EAAGC,EAAjC7E,EAAMgB,KAAKlB,OAAOu6C,WAKtB,IAJAr6C,EAAImxC,UAAYnwC,KAAKqrB,MAErBrrB,KAAKsiD,kBAAkBtjD,GAElB4E,EAAI,EAAGC,EAAMuiD,EAAWtiD,OAAQF,EAAIC,EAAKD,IAAK,CACjD,IAAImF,EAAQq9C,EAAWxiD,GACM,qBAAlBmF,EAAMka,UACfjkB,EAAI0nD,YAAc39C,EAAMka,SAE1BjkB,EAAI2nD,SAAS59C,EAAMM,EAAGN,EAAMO,EAAGP,EAAMxJ,MAAOwJ,EAAMxJ,OAEpDP,EAAI6Q,WAMN8zC,QAAS,WACP,IAAkC//C,EAAGuiD,EAAjCnnD,EAAMgB,KAAKlB,OAAOu6C,WAKtB,IAJAr6C,EAAImxC,UAAYnwC,KAAKqrB,MAErBrrB,KAAKsiD,kBAAkBtjD,GAElB4E,EAAI,EAAGuiD,EAAOnmD,KAAK+lD,YAAYjiD,OAAQF,EAAIuiD,EAAMviD,IACpD5D,KAAKkzC,OAAOlzC,KAAK+lD,YAAYniD,IAE/B5E,EAAI6Q,WAMNm2C,cAAe,SAASjc,GACtB/pC,KAAKimD,iBAAmB,GAExB,IAAI58C,EAAGC,EAAG/J,EAAgCqE,EAAzBshD,EAASllD,KAAKT,MAAQ,EAEvC,IAAKqE,EAAI,EAAGA,EAAI5D,KAAK0lD,QAAS9hD,IAAK,CAEjCyF,EAAIhM,EAAOgG,KAAKgF,aAAa0hC,EAAQ1gC,EAAI67C,EAAQnb,EAAQ1gC,EAAI67C,GAC7D57C,EAAIjM,EAAOgG,KAAKgF,aAAa0hC,EAAQzgC,EAAI47C,EAAQnb,EAAQzgC,EAAI47C,GAG3D3lD,EADES,KAAK4lD,iBACCvoD,EAAOgG,KAAKgF,aAElBZ,KAAKc,IAAI,EAAGvI,KAAK2lD,SAAW3lD,KAAK4lD,kBACjC5lD,KAAK2lD,SAAW3lD,KAAK4lD,kBAGf5lD,KAAK2lD,SAGf,IAAI58C,EAAQ,IAAI1L,EAAO+L,MAAMC,EAAGC,GAChCP,EAAMxJ,MAAQA,EAEVS,KAAK6lD,gBACP98C,EAAMka,QAAU5lB,EAAOgG,KAAKgF,aAAa,EAAG,KAAO,KAGrDrI,KAAKimD,iBAAiB5hD,KAAK0E,GAG7B/I,KAAK+lD,YAAY1hD,KAAKrE,KAAKimD,qBAU/B5oD,EAAOupD,aAAevpD,EAAOgG,KAAKke,YAAYlkB,EAAO0lD,YAAyD,CAE5G8D,cAAe,WAEb,IAEIC,EAAgBzpD,EAAOgG,KAAKyM,sBAC5Bi3C,EAAaD,EAAc7nD,WAAW,MAU1C,OARA6nD,EAAcvnD,MAAQunD,EAAc3nD,OAASwmD,GAE7CoB,EAAW5W,UAAYnwC,KAAKqrB,MAC5B07B,EAAWxW,YACXwW,EAAWvW,IAAImV,GAAcA,GAAcA,GAAc,EAAa,EAAVl+C,KAAKI,IAAQ,GACzEk/C,EAAWnJ,YACXmJ,EAAWxjD,OAEJujD,GAGTE,sBAAuB,WACrB,OAAOC,OAAOjnD,KAAK6mD,eAAe9mC,QAAQ,aAAc,IAAM/f,KAAKqrB,MAAQ,MAM7E67B,WAAY,WACV,OAAOlnD,KAAKlB,OAAOu6C,WAAWnD,cAAcl2C,KAAK+G,QAAU/G,KAAK6mD,gBAAiB,WAMnFnM,gBAAiB,WACf16C,KAAKkhB,UAAU,mBACflhB,KAAKlB,OAAOu6C,WAAWhJ,YAAcrwC,KAAKknD,cAM5C3C,WAAY,SAASC,GACnB,IAAIl2C,EAAOtO,KAAKkhB,UAAU,aAAcsjC,GACpC2C,EAAU74C,EAAK84C,oBAAoBjuB,UAAU7qB,EAAKkgC,YAAc,GAOpE,OALAlgC,EAAKkgB,OAAS,IAAInxB,EAAO2J,QAAQ,CAC/BD,OAAQ/G,KAAK+G,QAAU/G,KAAKgnD,wBAC5Bpc,SAAUuc,EAAQ99C,EAClBwhC,SAAUsc,EAAQ79C,IAEbgF,KAKX,WAEE,IAAI6T,EAAa9kB,EAAOgG,KAAK8e,WACzBzZ,EAAmBrL,EAAOgG,KAAKqF,iBAC/BkO,EAAMnP,KAAKmP,IACXywC,EAAkBhqD,EAAO05C,aAAayK,SAAS,eAC/C3+B,EAAexlB,EAAOgG,KAAKwf,aAC3BykC,EAAgB,GAyyCpB,IAAK,IAAIljD,KA5vCT/G,EAAOmB,OAASnB,EAAOgG,KAAKke,YAAYlkB,EAAO05C,aAAoD,CAQjGv1B,WAAY,SAASgD,EAAI9gB,GACvBA,IAAYA,EAAU,IACtB1D,KAAKk3C,oBAAsBl3C,KAAKm3C,eAAeC,KAAKp3C,MACpDA,KAAKq3C,sBAAwBr3C,KAAK6E,iBAAiBuyC,KAAKp3C,MACxDA,KAAKs3C,YAAY9yB,EAAI9gB,GACrB1D,KAAKunD,mBACLvnD,KAAKwnD,sBAUPte,gBAAqB,EAcrBD,YAAuB,WASvBwe,iBAAwB,EASxBC,kBAAwB,EAWxBC,YAAuB,SAWvB1a,aAAwB,WAOxBsL,aAAwB,EAOxBqP,WAAwB,EAYxBC,aAAwB,WAcxBC,gBAA2B,KAO3BC,eAAwB,2BAOxBC,mBAAwB,GAOxBC,qBAAwB,2BAOxBC,mBAAwB,EAOxBC,yBAAyB,EAOzBC,YAAwB,OAOxBC,WAAwB,OAOxBC,cAAwB,UAOxBC,kBAAwB,YAOxBC,eAAwB,YAQxBC,iBAA0B,cAO1BC,eAAwB,mBAOxBC,oBAAwB,EAOxBC,oBAAwB,EAWxBC,gBAAwB,EAUxBC,eAAwB,EAQxBC,wBAAwB,EAQxBrb,UAAW,EASXC,cAAe,KAQfqb,iBAAiB,EAQjBC,gBAAgB,EAQhBC,iBAAiB,EAMjBC,QAAS,GAOTC,eAAgB,KAOhBC,gBAAiB,GAKjB9B,iBAAkB,WAChBvnD,KAAKspD,kBAAoB,KACzBtpD,KAAKupD,eAAiB,KACtBvpD,KAAKwpD,sBACLxpD,KAAKypD,qBACLzpD,KAAK0pD,sBAEL1pD,KAAKw4C,qBAELx4C,KAAKy6C,iBAAmBp9C,EAAO0lD,aAAe,IAAI1lD,EAAO0lD,YAAY/iD,MAErEA,KAAK64C,cAQP8Q,uBAAwB,WACtB,IACI5kD,EAAQ6kD,EAAcC,EADtBC,EAAgB9pD,KAAK+pD,mBAGzB,GAAID,EAAchmD,OAAS,IAAM9D,KAAK+oD,uBAAwB,CAC5Da,EAAe,GACfC,EAAqB,GACrB,IAAK,IAAIjmD,EAAI,EAAGE,EAAS9D,KAAKwE,SAASV,OAAQF,EAAIE,EAAQF,IACzDmB,EAAS/E,KAAKwE,SAASZ,IACgB,IAAnCkmD,EAAc1mD,QAAQ2B,GACxB6kD,EAAavlD,KAAKU,GAGlB8kD,EAAmBxlD,KAAKU,GAGxB+kD,EAAchmD,OAAS,IACzB9D,KAAKg7C,cAAcx2C,SAAWqlD,GAEhCD,EAAavlD,KAAKK,MAAMklD,EAAcC,QAGtCD,EAAe5pD,KAAKwE,SAEtB,OAAOolD,GAQTxN,UAAW,YACLp8C,KAAKgqD,iBAAoBhqD,KAAKupD,gBAAmBvpD,KAAK8oD,gBACxD9oD,KAAK87C,aAAa97C,KAAKq5C,YACvBr5C,KAAKgqD,iBAAkB,GAErBhqD,KAAKq6C,gBACPr6C,KAAKiqD,eAAejqD,KAAKq5C,YAE3B,IAAIgD,EAAiBr8C,KAAKm5C,iBAE1B,OADAn5C,KAAKs8C,aAAaD,EAAgBr8C,KAAK2pD,0BAChC3pD,MAGTiqD,eAAgB,SAASjrD,GACvBA,EAAI0Q,OACA1P,KAAK8oD,eAAiB9oD,KAAKw6C,sBAC7Bx6C,KAAKy6C,kBAAoBz6C,KAAKy6C,iBAAiBkJ,UAC/C3jD,KAAKgqD,iBAAkB,GAGrBhqD,KAAK4nD,WAAa5nD,KAAKupD,iBACzBvpD,KAAKkqD,eAAelrD,GACpBgB,KAAKgqD,iBAAkB,GAEzBhrD,EAAI6Q,WASNs6C,UAAW,WACT,IAAInrD,EAAMgB,KAAKq5C,WAIf,OAHAr5C,KAAK87C,aAAa98C,GAClBgB,KAAKiqD,eAAejrD,GACpBgB,KAAKyD,KAAK,gBACHzD,MAMToqD,kBAAmB,SAAUrlD,EAAQglC,GACnC,IAAIp1B,EAAI5P,EAAOg0B,sBACXsxB,EAAYhtD,EAAOgG,KAAKiH,gBAAgBqK,GACxC21C,EAAatqD,KAAKuqD,kBAAkBxgB,GACxC,OAAO1sC,EAAOgG,KAAKoG,eAAe6gD,EAAYD,IAUhDG,oBAAqB,SAAU74C,EAAQtI,EAAGC,GAGxC,GAAIqI,EAAOkrC,eAAiBlrC,EAAO2rC,cAAgB3rC,IAAW3R,KAAKg7C,cAAe,CAChF,IAAIyP,EAAoBzqD,KAAKoqD,kBAAkBz4C,EAAQ,CAACtI,EAAGA,EAAGC,EAAGA,IAC7DohD,EAAkBjjD,KAAKc,IAAIoJ,EAAO4rC,kBAAqBkN,EAAkBphD,EAAIsI,EAAOyrC,MAAQ,GAC5FuN,EAAkBljD,KAAKc,IAAIoJ,EAAO6rC,kBAAqBiN,EAAkBnhD,EAAIqI,EAAO0rC,MAAQ,GAKhG,OAHoBhgD,EAAOgG,KAAKwO,cAC9BF,EAAOi5C,cAAenjD,KAAKo1B,MAAM6tB,GAAkBjjD,KAAKo1B,MAAM8tB,GAAkB3qD,KAAK4oD,qBAKzF,IAAI5pD,EAAMgB,KAAK6qD,aACXC,EAAgBn5C,EAAOo5C,yBAA0B7hD,EAAIlJ,KAAK83C,kBAgB9D,OAdAnmC,EAAOo5C,yBAA2B,GAElC/qD,KAAK87C,aAAa98C,GAElBA,EAAI0Q,OACJ1Q,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC9CyI,EAAOuhC,OAAOl0C,GACdA,EAAI6Q,UAEJ8B,EAAOo5C,yBAA2BD,EAEdztD,EAAOgG,KAAKwO,cAC9B7S,EAAKqK,EAAGC,EAAGtJ,KAAK4oD,sBAUpBoC,uBAAwB,SAASlhB,GAU/B,MAP0D,mBAAtDj7B,OAAOC,UAAUC,SAAShL,KAAK/D,KAAK6nD,gBACd7nD,KAAK6nD,aAAahpC,MAAK,SAASzX,GAAO,OAAkB,IAAX0iC,EAAE1iC,MAGlD0iC,EAAE9pC,KAAK6nD,eAWjCoD,sBAAuB,SAAUnhB,EAAGn4B,GAClC,IAAIm4C,EAAgB9pD,KAAK+pD,mBACrBhP,EAAe/6C,KAAKg7C,cAExB,OACGrpC,GAEAA,GACCopC,GACA+O,EAAchmD,OAAS,IACY,IAAnCgmD,EAAc1mD,QAAQuO,IACtBopC,IAAiBppC,IAChB3R,KAAKgrD,uBAAuBlhB,IAE9Bn4B,IAAWA,EAAOu5C,SAElBv5C,IACEA,EAAOw5C,YACRpQ,GACAA,IAAiBppC,GAcvBy5C,uBAAwB,SAAUz5C,EAAQ05C,EAAQC,GAKhD,IAAIC,EAJJ,GAAK55C,EAaL,MAPe,UAAX05C,GAAiC,WAAXA,GAAkC,WAAXA,GAAkC,aAAXA,EACtEE,EAAkBvrD,KAAKynD,iBAAmB91C,EAAO81C,gBAE/B,WAAX4D,IACPE,EAAkBvrD,KAAK0nD,kBAAoB/1C,EAAO+1C,kBAG7C6D,GAAmBD,EAASA,GAOrCE,qBAAsB,SAAS75C,EAAQ44B,GACrC,IAAIvhC,EAAS,CACXK,EAAGsI,EAAOy3B,QACV9/B,EAAGqI,EAAO03B,SAgBZ,MAbe,OAAXkB,GAA8B,OAAXA,GAA8B,OAAXA,EACxCvhC,EAAOK,EAAI,QAEO,OAAXkhC,GAA8B,OAAXA,GAA8B,OAAXA,IAC7CvhC,EAAOK,EAAI,QAGE,OAAXkhC,GAA8B,OAAXA,GAA8B,OAAXA,EACxCvhC,EAAOM,EAAI,SAEO,OAAXihC,GAA8B,OAAXA,GAA8B,OAAXA,IAC7CvhC,EAAOM,EAAI,OAENN,GAUTyiD,qBAAsB,SAASC,EAAiBnhB,EAAQT,EAAGn4B,GACzD,IAAK44B,IAAWmhB,EACd,MAAO,OAET,IAAIhjB,EAAU/2B,EAAOo2B,SAASwC,GAC9B,OAAO7B,EAAQ8I,cAAc1H,EAAGpB,EAAS/2B,IAQ3Cg6C,uBAAwB,SAAU7hB,EAAGn4B,EAAQ+5C,GAC3C,GAAK/5C,EAAL,CAIA,IAAIo4B,EAAU/pC,KAAKmiB,WAAW2nB,GAAIS,EAAS54B,EAAOi6C,SAC9CljB,EAAU/2B,EAAOo2B,SAASwC,GAC1BN,EAAiByhB,GAAmBnhB,EAClC7B,EAAQ0I,iBAAiBtH,EAAGn4B,EAAQ+2B,GAAWrrC,EAAOkyC,cAAcT,YACtEuc,EAASrrD,KAAKyrD,qBAAqBC,EAAiBnhB,EAAQT,EAAGn4B,GAC/D3I,EAAShJ,KAAKwrD,qBAAqB75C,EAAQ44B,GAC3C+gB,EAASxhB,EAAE9pC,KAAK2nD,aAChB59C,EAAY,CACV4H,OAAQA,EACR05C,OAAQA,EACRphB,cAAeA,EACfM,OAAQA,EACR75B,OAAQiB,EAAOjB,OACfC,OAAQgB,EAAOhB,OACfC,MAAOe,EAAOf,MACdC,MAAOc,EAAOd,MAEd+5B,QAASb,EAAQ1gC,EAAIsI,EAAOvH,KAC5BygC,QAASd,EAAQzgC,EAAIqI,EAAOtH,IAC5B++B,QAASpgC,EAAOK,EAChBggC,QAASrgC,EAAOM,EAChBkkC,GAAIzD,EAAQ1gC,EACZkkC,GAAIxD,EAAQzgC,EACZuiD,MAAO9hB,EAAQ1gC,EACfyiD,MAAO/hB,EAAQzgC,EAIf2H,MAAOvI,EAAiBiJ,EAAO3J,OAE/BzI,MAAOoS,EAAOpS,MAAQoS,EAAOjB,OAC7Bq7C,SAAUjiB,EAAEiiB,SACZT,OAAQA,EACR/e,SAAUlvC,EAAOgG,KAAKuO,oBAAoBD,IAG5C3R,KAAKorD,uBAAuBz5C,EAAQ05C,EAAQC,KAC9CvhD,EAAUq/B,QAAU,SACpBr/B,EAAUs/B,QAAU,UAEtBt/B,EAAUwiC,SAASnD,QAAUpgC,EAAOK,EACpCU,EAAUwiC,SAASlD,QAAUrgC,EAAOM,EACpCtJ,KAAKspD,kBAAoBv/C,EACzB/J,KAAKgsD,iBAAiBliB,KAQxBmiB,UAAW,SAAUhoD,GACnBjE,KAAKo5C,cAAcrsC,MAAMm/C,OAASjoD,GAOpCimD,eAAgB,SAAUlrD,GACxB,IAAImtD,EAAgBnsD,KAAKupD,eACrBn/C,EAAO+hD,EAAc/hD,KACrBC,EAAM8hD,EAAc9hD,IACpB+hD,EAAQx1C,EAAIxM,GACZiiD,EAAOz1C,EAAIvM,GAaf,GAXIrK,KAAK+nD,iBACP/oD,EAAImxC,UAAYnwC,KAAK+nD,eAErB/oD,EAAI2nD,SACFwF,EAAc3e,IAAOpjC,EAAO,EAAK,GAAKA,GACtC+hD,EAAc5e,IAAOljC,EAAM,EAAK,GAAKA,GACrC+hD,EACAC,IAICrsD,KAAKkoD,oBAAuBloD,KAAKioD,qBAOtC,GAJAjpD,EAAIsxC,UAAYtwC,KAAKkoD,mBACrBlpD,EAAIqxC,YAAcrwC,KAAKioD,qBAGnBjoD,KAAKgoD,mBAAmBlkD,OAAS,IAAMujD,EAAiB,CAE1D,IAAI5wC,EAAK01C,EAAc3e,GAAK8Z,GAAkBl9C,EAAO,EAAK,EAAIgiD,GAC1D11C,EAAKy1C,EAAc5e,GAAK+Z,GAAkBj9C,EAAM,EAAK,EAAIgiD,GAE7DrtD,EAAIuxC,YAEJlzC,EAAOgG,KAAK2L,eAAehQ,EAAKyX,EAAIC,EAAID,EAAK21C,EAAO11C,EAAI1W,KAAKgoD,oBAC7D3qD,EAAOgG,KAAK2L,eAAehQ,EAAKyX,EAAIC,EAAK21C,EAAO,EAAG51C,EAAK21C,EAAO11C,EAAK21C,EAAO,EAAGrsD,KAAKgoD,oBACnF3qD,EAAOgG,KAAK2L,eAAehQ,EAAKyX,EAAIC,EAAID,EAAIC,EAAK21C,EAAMrsD,KAAKgoD,oBAC5D3qD,EAAOgG,KAAK2L,eAAehQ,EAAKyX,EAAK21C,EAAQ,EAAG11C,EAAID,EAAK21C,EAAQ,EAAG11C,EAAK21C,EAAMrsD,KAAKgoD,oBAEpFhpD,EAAI4+C,YACJ5+C,EAAIwvB,cAGJnxB,EAAOwR,OAAOC,UAAUw9C,aAAavoD,KAAK/D,KAAMhB,EAAKgB,KAAKgoD,oBAC1DhpD,EAAI4xC,WACFub,EAAc3e,GAAK8Z,GAAkBl9C,EAAO,EAAK,EAAIgiD,GACrDD,EAAc5e,GAAK+Z,GAAkBj9C,EAAM,EAAK,EAAIgiD,GACpDD,EACAC,IAcNE,WAAY,SAAUziB,EAAG0iB,GACvB,IAAIxsD,KAAK6oD,eAAT,CAIA,IAII4D,EAAcC,EAHd3iB,EAAU/pC,KAAKmiB,WAAW2nB,GADb,GAEbiR,EAAe/6C,KAAKg7C,cACpB2R,EAAW3sD,KAAK+pD,mBAEhB1X,EAAUxvB,EAAainB,GACvB8iB,EAAuBD,EAAS7oD,OAAS,IAAM0oD,GAAkC,IAApBG,EAAS7oD,OAQ1E,GAHA9D,KAAKmpD,QAAU,GAGXyD,GAAuB7R,EAAa8R,kBAAkB9iB,EAASsI,GACjE,OAAO0I,EAET,GAAI4R,EAAS7oD,OAAS,IAAM0oD,GAAazR,IAAiB/6C,KAAK8sD,uBAAuB,CAAC/R,GAAehR,GACpG,OAAOgR,EAET,GAAwB,IAApB4R,EAAS7oD,QACXi3C,IAAiB/6C,KAAK8sD,uBAAuB,CAAC/R,GAAehR,GAAU,CACvE,IAAK/pC,KAAK+oD,uBACR,OAAOhO,EAGP0R,EAAe1R,EACf2R,EAAmB1sD,KAAKmpD,QACxBnpD,KAAKmpD,QAAU,GAGnB,IAAIx3C,EAAS3R,KAAK8sD,uBAAuB9sD,KAAKwE,SAAUulC,GAKxD,OAJID,EAAE9pC,KAAK8nD,kBAAoBn2C,GAAU86C,GAAgB96C,IAAW86C,IAClE96C,EAAS86C,EACTzsD,KAAKmpD,QAAUuD,GAEV/6C,IAWTo7C,aAAc,SAAShjB,EAAS7iC,EAAK8lD,GACnC,GAAI9lD,GACAA,EAAI6nB,SACJ7nB,EAAIgkD,SAGJhkD,EAAI+lD,cAAcljB,GACpB,CACA,IAAK/pC,KAAK2oD,qBAAsBzhD,EAAIyhD,oBAAwBzhD,EAAIgmD,UAO9D,OAAO,EALP,IADoBltD,KAAKwqD,oBAAoBtjD,EAAK8lD,EAAc3jD,EAAG2jD,EAAc1jD,GAE/E,OAAO,IAgBfwjD,uBAAwB,SAAS5nD,EAAS6kC,GAKxC,IAHA,IAAIp4B,EAA4Bw7C,EAApBvpD,EAAIsB,EAAQpB,OAGjBF,KAAK,CACV,IAAIwpD,EAAaloD,EAAQtB,GACrBypD,EAAeD,EAAWjS,MAC5Bn7C,KAAKoqD,kBAAkBgD,EAAWjS,MAAOpR,GAAWA,EACtD,GAAI/pC,KAAK+sD,aAAaM,EAAcD,EAAYrjB,GAAU,EACxDp4B,EAASzM,EAAQtB,IACN0pD,gBAAkB37C,aAAkBtU,EAAOmR,QACpD2+C,EAAYntD,KAAK8sD,uBAAuBn7C,EAAOnN,SAAUulC,KAC5C/pC,KAAKmpD,QAAQ9kD,KAAK8oD,GAEjC,OAGJ,OAAOx7C,GAQT44C,kBAAmB,SAASxgB,GAC1B,OAAO1sC,EAAOgG,KAAKoG,eACjBsgC,EACA1sC,EAAOgG,KAAKiH,gBAAgBtK,KAAK83C,qBAsBrC31B,WAAY,SAAU2nB,EAAGyjB,GAEvB,GAAIvtD,KAAKwtD,mBAAqBD,EAC5B,OAAOvtD,KAAKwtD,iBAEd,GAAIxtD,KAAKytD,UAAYF,EACnB,OAAOvtD,KAAKytD,SAGd,IAKIC,EALA3jB,EAAU5nB,EAAW2nB,GACrBsP,EAAgBp5C,KAAKo5C,cACrBtgC,EAASsgC,EAAc9xB,wBACvBqmC,EAAc70C,EAAOvZ,OAAS,EAC9BquD,EAAe90C,EAAO3Z,QAAU,EAG/BwuD,GAAgBC,IACf,QAAS90C,GAAU,WAAYA,IACjC80C,EAAenmD,KAAKmP,IAAKkC,EAAOzO,IAAMyO,EAAOwvB,SAE3C,UAAWxvB,GAAU,SAAUA,IACjC60C,EAAclmD,KAAKmP,IAAKkC,EAAOyvB,MAAQzvB,EAAO1O,QAIlDpK,KAAK64C,aACL9O,EAAQ1gC,EAAI0gC,EAAQ1gC,EAAIrJ,KAAKs5C,QAAQlvC,KACrC2/B,EAAQzgC,EAAIygC,EAAQzgC,EAAItJ,KAAKs5C,QAAQjvC,IAChCkjD,IACHxjB,EAAU/pC,KAAKuqD,kBAAkBxgB,IAGnC,IAAI8jB,EAAgB7tD,KAAK+4C,mBAiBzB,OAhBsB,IAAlB8U,IACF9jB,EAAQ1gC,GAAKwkD,EACb9jB,EAAQzgC,GAAKukD,GAKbH,EAFkB,IAAhBC,GAAsC,IAAjBC,EAEZ,CAAEruD,MAAO,EAAGJ,OAAQ,GAGpB,CACTI,MAAO65C,EAAc75C,MAAQouD,EAC7BxuD,OAAQi6C,EAAcj6C,OAASyuD,GAI5B,CACLvkD,EAAG0gC,EAAQ1gC,EAAIqkD,EAASnuD,MACxB+J,EAAGygC,EAAQzgC,EAAIokD,EAASvuD,SAQ5BsqD,mBAAoB,WAClB,IAAIqE,EAAmB9tD,KAAKk5C,cAAcz0B,UAAU1E,QAAQ,qBAAsB,IAC9Em5B,EAAgBl5C,KAAKk5C,cAAeE,EAAgBp5C,KAAKo5C,cAGzDA,EACFA,EAAc30B,UAAY,IAG1B20B,EAAgBp5C,KAAK05C,uBACrB15C,KAAKo5C,cAAgBA,GAEvB/7C,EAAOgG,KAAKgjB,SAAS+yB,EAAe,gBAAkB0U,GAEtD9tD,KAAK46C,UAAU3tC,YAAYmsC,GAE3Bp5C,KAAK+tD,iBAAiB7U,EAAeE,GACrCp5C,KAAK25C,kBAAkBP,GACvBp5C,KAAKq5C,WAAaD,EAAcn6C,WAAW,OAM7CuoD,mBAAoB,WAClBxnD,KAAK26C,cAAgB36C,KAAK05C,uBAC1B15C,KAAK26C,cAAch2B,aAAa,QAAS3kB,KAAKT,OAC9CS,KAAK26C,cAAch2B,aAAa,SAAU3kB,KAAKb,QAC/Ca,KAAK6qD,aAAe7qD,KAAK26C,cAAc17C,WAAW,OAMpDuqD,oBAAqB,WACnBxpD,KAAK46C,UAAYv9C,EAAOgG,KAAKijB,YAAYtmB,KAAKk5C,cAAe,MAAO,CAClE,MAASl5C,KAAK0oD,iBAEhBrrD,EAAOgG,KAAKqgB,SAAS1jB,KAAK46C,UAAW,CACnCr7C,MAAOS,KAAKT,MAAQ,KACpBJ,OAAQa,KAAKb,OAAS,KACtB6N,SAAU,aAEZ3P,EAAOgG,KAAKmiB,wBAAwBxlB,KAAK46C,YAO3CjB,kBAAmB,SAAU53B,GAC3B,IAAIxiB,EAAQS,KAAKT,OAASwiB,EAAQxiB,MAC9BJ,EAASa,KAAKb,QAAU4iB,EAAQ5iB,OAEpC9B,EAAOgG,KAAKqgB,SAAS3B,EAAS,CAC5B/U,SAAU,WACVzN,MAAOA,EAAQ,KACfJ,OAAQA,EAAS,KACjBiL,KAAM,EACNC,IAAK,EACL,eAAgBrK,KAAK63C,oBAAsB,eAAiB,OAC5D,mBAAoB73C,KAAK63C,oBAAsB,eAAiB,SAElE91B,EAAQxiB,MAAQA,EAChBwiB,EAAQ5iB,OAASA,EACjB9B,EAAOgG,KAAKmiB,wBAAwBzD,IAStCgsC,iBAAkB,SAAUC,EAAQC,GAClCA,EAAKlhD,MAAM8W,QAAUmqC,EAAOjhD,MAAM8W,SAOpCqqC,oBAAqB,WACnB,OAAOluD,KAAKq5C,YAOd8U,oBAAqB,WACnB,OAAOnuD,KAAKo5C,eAOdgV,gBAAiB,WACf,OAAOpuD,KAAKg7C,eAOd+O,iBAAkB,WAChB,IAAIsE,EAASruD,KAAKg7C,cAClB,OAAIqT,EACkB,oBAAhBA,EAAO1oD,MAA8B0oD,EAAO7pD,SACvC6pD,EAAO7pD,SAASmH,MAAM,GAGtB,CAAC0iD,GAGL,IAOT/oD,iBAAkB,SAAS4B,GAErBA,IAAQlH,KAAKg7C,gBACfh7C,KAAKyD,KAAK,2BAA4B,CAAEkO,OAAQzK,IAChDlH,KAAKsuD,uBACLtuD,KAAKyD,KAAK,oBAAqB,CAAEkO,OAAQzK,IACzCA,EAAIzD,KAAK,eAEPyD,IAAQlH,KAAKopD,iBACfppD,KAAKopD,eAAiB,KACtBppD,KAAKqpD,gBAAkB,IAEzBrpD,KAAKkhB,UAAU,mBAAoBha,IAQrCqnD,qBAAsB,SAASC,EAAY1kB,GACzC,IAAI2kB,GAAmB,EAAOvpD,EAAUlF,KAAK+pD,mBACzC2E,EAAQ,GAAIC,EAAU,GAC1BH,EAAW7gD,SAAQ,SAASihD,IACU,IAAhC1pD,EAAQ9B,QAAQwrD,KAClBH,GAAmB,EACnBG,EAAUnrD,KAAK,aAAc,CAC3BqmC,EAAGA,EACHn4B,OAAQi9C,IAEVD,EAAQtqD,KAAKuqD,OAGjB1pD,EAAQyI,SAAQ,SAAS5I,IACa,IAAhCypD,EAAWprD,QAAQ2B,KACrB0pD,GAAmB,EACnB1pD,EAAOtB,KAAK,WAAY,CACtBqmC,EAAGA,EACHn4B,OAAQ5M,IAEV2pD,EAAMrqD,KAAKU,OAGXypD,EAAW1qD,OAAS,GAAKoB,EAAQpB,OAAS,EAC5C2qD,GAAoBzuD,KAAKyD,KAAK,oBAAqB,CACjDqmC,EAAGA,EACH+kB,SAAUH,EACVI,WAAYH,EAGZI,QAASL,EAAM,IAAMC,EAAQ,GAC7Bh9C,OAAQ3R,KAAKg7C,gBAGR91C,EAAQpB,OAAS,EACxB9D,KAAKyD,KAAK,oBAAqB,CAC7BqmC,EAAGA,EACH+kB,SAAUH,EACV/8C,OAAQ3R,KAAKg7C,gBAGRwT,EAAW1qD,OAAS,GAC3B9D,KAAKyD,KAAK,oBAAqB,CAC7BqmC,EAAGA,EACHglB,WAAYH,KAYlBK,gBAAiB,SAAUjqD,EAAQ+kC,GACjC,IAAImlB,EAAiBjvD,KAAK+pD,mBAG1B,OAFA/pD,KAAKkvD,iBAAiBnqD,EAAQ+kC,GAC9B9pC,KAAKuuD,qBAAqBU,EAAgBnlB,GACnC9pC,MAaTkvD,iBAAkB,SAASnqD,EAAQ+kC,GACjC,OAAI9pC,KAAKg7C,gBAAkBj2C,MAGtB/E,KAAKsuD,qBAAqBxkB,EAAG/kC,MAG9BA,EAAOoqD,SAAS,CAAErlB,EAAGA,MAGzB9pC,KAAKg7C,cAAgBj2C,GACd,MAaTupD,qBAAsB,SAASxkB,EAAG/kC,GAChC,IAAImC,EAAMlH,KAAKg7C,cACf,GAAI9zC,EAAK,CAEP,GAAIA,EAAIkoD,WAAW,CAAEtlB,EAAGA,EAAG/kC,OAAQA,IACjC,OAAO,EAET/E,KAAKg7C,cAAgB,KAEvB,OAAO,GAYTqU,oBAAqB,SAAUvlB,GAC7B,IAAImlB,EAAiBjvD,KAAK+pD,mBAAoBhP,EAAe/6C,KAAKouD,kBAMlE,OALIa,EAAenrD,QACjB9D,KAAKyD,KAAK,2BAA4B,CAAEkO,OAAQopC,EAAcjR,EAAGA,IAEnE9pC,KAAKsuD,qBAAqBxkB,GAC1B9pC,KAAKuuD,qBAAqBU,EAAgBnlB,GACnC9pC,MAQTqhD,QAAS,WACP,IAAI96B,EAAUvmB,KAAK46C,UAenB,OAdA56C,KAAKsvD,kBACL/oC,EAAQnZ,YAAYpN,KAAKo5C,eACzB7yB,EAAQnZ,YAAYpN,KAAKk5C,eACzBl5C,KAAK6qD,aAAe,KACpB7qD,KAAKq5C,WAAa,KAClB,CAAC,gBAAiB,iBAAiB1rC,QAAS,SAASoU,GACnD1kB,EAAOgG,KAAKwkB,iBAAiB7nB,KAAK+hB,IAClC/hB,KAAK+hB,QAAWrV,GACf0qC,KAAKp3C,OACJumB,EAAQpZ,YACVoZ,EAAQpZ,WAAWqZ,aAAaxmB,KAAKk5C,cAAel5C,KAAK46C,kBAEpD56C,KAAK46C,UACZv9C,EAAO05C,aAAajoC,UAAUuyC,QAAQt9C,KAAK/D,MACpCA,MAQTg8C,MAAO,WAIL,OAFAh8C,KAAKqvD,sBACLrvD,KAAK87C,aAAa97C,KAAKq5C,YAChBr5C,KAAKkhB,UAAU,UAOxB07B,aAAc,SAAS59C,GACrB,IAAI+7C,EAAe/6C,KAAKg7C,cAEpBD,GACFA,EAAawU,gBAAgBvwD,IAOjC2/C,UAAW,SAAS9J,EAAU1zB,EAAY0yB,GAKxC,IAAI2b,EAAqBxvD,KAAKyvD,+BAA+B5a,GACzD9vC,EAAS/E,KAAKkhB,UAAU,YAAa2zB,EAAU1zB,EAAY0yB,GAG/D,OADA7zC,KAAK0vD,8BAA8B7a,EAAU2a,GACtCzqD,GAST0qD,+BAAgC,SAAS5a,GACvC,GAAIA,EAASsG,OAAiC,oBAAxBtG,EAASsG,MAAMx1C,MAA8B3F,KAAKg7C,gBAAkBnG,EAASsG,MAAO,CACxG,IAEIwU,EAAiB,GAKrB,MAPkB,CAAC,QAAS,QAAS,QAAS,OAAQ,SAAU,SAAU,QAAS,QAAS,OAGhFhiD,SAAQ,SAASvJ,GAC3BurD,EAAevrD,GAAQywC,EAASzwC,MAElC/G,EAAOgG,KAAK2Q,qBAAqB6gC,EAAU70C,KAAKg7C,cAAclnC,iBACvD67C,EAGP,OAAO,MAUXD,8BAA+B,SAAS7a,EAAU8a,GAC5CA,GACF9a,EAASruC,IAAImpD,IAOjBtP,cAAe,SAAStM,EAAQc,EAAUvnC,GAGxC,IAAIkiD,EAAqBxvD,KAAKyvD,+BAA+B5a,GAC7D70C,KAAKkhB,UAAU,gBAAiB6yB,EAAQc,EAAUvnC,GAClDtN,KAAK0vD,8BAA8B7a,EAAU2a,IAG/C3U,qBAAsB,SAAUC,GAC1B96C,KAAK4E,mBAAqB5E,KAAKg7C,eAAiBh7C,KAAKg7C,cAAckS,WACrEltD,KAAKg7C,cAAc4U,kBAErBvyD,EAAO05C,aAAajoC,UAAU+rC,qBAAqB92C,KAAK/D,KAAM86C,MAMjDz9C,EAAO05C,aACT,cAAT3yC,IACF/G,EAAOmB,OAAO4F,GAAQ/G,EAAO05C,aAAa3yC,IAlzChD,GAwzCA,WAEE,IAAI0d,EAAczkB,EAAOgG,KAAKye,YAC1BG,EAAiB5kB,EAAOgG,KAAK4e,eAE7B4tC,EAAkB,CAAEC,SAAS,GAEjC,SAASC,EAAWjmB,EAAG7lC,GACrB,OAAO6lC,EAAEkmB,QAAWlmB,EAAEkmB,SAAW/rD,EAAQ,EAG3C5G,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOmB,OAAOsQ,UAAiD,CAOvFmhD,YAAa,KAMbvG,oBAAqB,WAInB1pD,KAAKsvD,kBACLtvD,KAAKkwD,cACLlwD,KAAKmwD,YAAYruC,EAAa,QAOhCsuC,gBAAiB,WACf,OAAOpwD,KAAKqwD,oBAAsB,UAAY,SAGhDF,YAAa,SAASG,EAASC,GAC7B,IAAIC,EAAgBxwD,KAAKo5C,cACrBqX,EAAkBzwD,KAAKowD,kBAC3BE,EAAQjzD,EAAOI,OAAQ,SAAUuC,KAAK0wD,WACtCJ,EAAQE,EAAeC,EAAkB,OAAQzwD,KAAK2wD,cACtDL,EAAQE,EAAeC,EAAkB,OAAQzwD,KAAK4wD,aAAcf,GACpES,EAAQE,EAAeC,EAAkB,MAAOzwD,KAAK6wD,aACrDP,EAAQE,EAAeC,EAAkB,QAASzwD,KAAK8wD,eACvDR,EAAQE,EAAe,QAASxwD,KAAK+wD,eACrCT,EAAQE,EAAe,cAAexwD,KAAKgxD,gBAC3CV,EAAQE,EAAe,WAAYxwD,KAAKixD,gBACxCX,EAAQE,EAAe,WAAYxwD,KAAKkxD,aACxCZ,EAAQE,EAAe,YAAaxwD,KAAKmxD,cACzCb,EAAQE,EAAe,YAAaxwD,KAAKoxD,cACzCd,EAAQE,EAAe,OAAQxwD,KAAKqxD,SAC/BrxD,KAAKqwD,qBACRC,EAAQE,EAAe,aAAcxwD,KAAKsxD,cAAezB,GAEpC,qBAAZ0B,SAA2BhB,KAAkBgB,UACtDA,QAAQhB,GAAgBC,EAAe,UAAWxwD,KAAKwxD,YACvDD,QAAQhB,GAAgBC,EAAe,OAAQxwD,KAAKyxD,SACpDF,QAAQhB,GAAgBC,EAAe,cAAexwD,KAAK0xD,sBAC3DH,QAAQhB,GAAgBC,EAAe,QAASxwD,KAAK2xD,UACrDJ,QAAQhB,GAAgBC,EAAe,YAAaxwD,KAAK4xD,gBAO7DtC,gBAAiB,WACftvD,KAAKmwD,YAAYluC,EAAgB,UAEjC,IAAIwuC,EAAkBzwD,KAAKowD,kBAC3BnuC,EAAe5kB,EAAOG,SAAUizD,EAAkB,KAAMzwD,KAAK6xD,YAC7D5vC,EAAe5kB,EAAOG,SAAU,WAAYwC,KAAK8xD,YAAajC,GAC9D5tC,EAAe5kB,EAAOG,SAAUizD,EAAkB,OAAQzwD,KAAK4wD,aAAcf,GAC7E5tC,EAAe5kB,EAAOG,SAAU,YAAawC,KAAK4wD,aAAcf,IAMlEK,YAAa,WACPlwD,KAAK+xD,cAIT/xD,KAAK2wD,aAAe3wD,KAAK2wD,aAAavZ,KAAKp3C,MAC3CA,KAAKsxD,cAAgBtxD,KAAKsxD,cAAcla,KAAKp3C,MAC7CA,KAAK4wD,aAAe5wD,KAAK4wD,aAAaxZ,KAAKp3C,MAC3CA,KAAK6xD,WAAa7xD,KAAK6xD,WAAWza,KAAKp3C,MACvCA,KAAK8xD,YAAc9xD,KAAK8xD,YAAY1a,KAAKp3C,MACzCA,KAAK0wD,UAAY1wD,KAAK0wD,UAAUtZ,KAAKp3C,MACrCA,KAAKwxD,WAAaxxD,KAAKwxD,WAAWpa,KAAKp3C,MACvCA,KAAKyxD,QAAUzxD,KAAKyxD,QAAQra,KAAKp3C,MACjCA,KAAK2xD,SAAW3xD,KAAK2xD,SAASva,KAAKp3C,MACnCA,KAAK4xD,aAAe5xD,KAAK4xD,aAAaxa,KAAKp3C,MAC3CA,KAAK0xD,qBAAuB1xD,KAAK0xD,qBAAqBta,KAAKp3C,MAC3DA,KAAK+wD,cAAgB/wD,KAAK+wD,cAAc3Z,KAAKp3C,MAC7CA,KAAK6wD,YAAc7wD,KAAK6wD,YAAYzZ,KAAKp3C,MACzCA,KAAK8wD,cAAgB9wD,KAAK8wD,cAAc1Z,KAAKp3C,MAC7CA,KAAKgxD,eAAiBhxD,KAAKgxD,eAAe5Z,KAAKp3C,MAC/CA,KAAKixD,eAAiBjxD,KAAKixD,eAAe7Z,KAAKp3C,MAC/CA,KAAKkxD,YAAclxD,KAAKkxD,YAAY9Z,KAAKp3C,MACzCA,KAAKmxD,aAAenxD,KAAKgyD,oBAAoB5a,KAAKp3C,KAAM,aACxDA,KAAKoxD,aAAepxD,KAAKgyD,oBAAoB5a,KAAKp3C,KAAM,aACxDA,KAAKqxD,QAAUrxD,KAAKgyD,oBAAoB5a,KAAKp3C,KAAM,QACnDA,KAAK+xD,aAAc,IAQrBP,WAAY,SAAS1nB,EAAGmoB,GACtBjyD,KAAKkyD,sBAAwBlyD,KAAKkyD,qBAAqBpoB,EAAGmoB,IAQ5DR,QAAS,SAAS3nB,EAAGmoB,GACnBjyD,KAAKmyD,UAAYnyD,KAAKmyD,SAASroB,EAAGmoB,IAOpClB,cAAe,SAASjnB,GACtB9pC,KAAKoyD,eAAetoB,IAOtB+mB,YAAa,SAAS/mB,GACpB,IAAIn4B,EAAS3R,KAAKopD,eAClBppD,KAAKyD,KAAK,YAAa,CAAEkO,OAAQA,EAAQm4B,EAAGA,IAC5C9pC,KAAKopD,eAAiB,KACtBz3C,GAAUA,EAAOlO,KAAK,WAAY,CAAEqmC,EAAGA,IAEvC,IAAIzoB,EAAQrhB,KACZA,KAAKqpD,gBAAgB17C,SAAQ,SAAS0kD,GACpChxC,EAAM5d,KAAK,YAAa,CAAEkO,OAAQA,EAAQm4B,EAAGA,IAC7CuoB,GAAW1gD,EAAOlO,KAAK,WAAY,CAAEqmC,EAAGA,OAE1C9pC,KAAKqpD,gBAAkB,GAEnBrpD,KAAKm8C,iBACPn8C,KAAKm8C,gBAAgBxuC,SAAQ,SAASzG,GAChCA,EAAIgmD,WACNhmD,EAAIorD,eAAeC,YAU3BzB,cAAe,SAAShnB,GAOjB9pC,KAAKspD,mBAAsBtpD,KAAKusD,WAAWziB,KAC9C9pC,KAAKyD,KAAK,aAAc,CAAEkO,OAAQ,KAAMm4B,EAAGA,IAC3C9pC,KAAKopD,eAAiB,KACtBppD,KAAKqpD,gBAAkB,KAS3BqI,qBAAsB,SAAS5nB,EAAGmoB,GAChCjyD,KAAKwyD,uBAAyBxyD,KAAKwyD,sBAAsB1oB,EAAGmoB,IAQ9DN,SAAU,SAAS7nB,EAAGmoB,GACpBjyD,KAAKyyD,WAAazyD,KAAKyyD,UAAU3oB,EAAGmoB,IAQtCL,aAAc,SAAS9nB,EAAGmoB,GACxBjyD,KAAK0yD,eAAiB1yD,KAAK0yD,cAAc5oB,EAAGmoB,IAQ9Cf,YAAa,SAASpnB,GACpBA,EAAE6oB,iBACF,IAAIhhD,EAAS3R,KAAKgyD,oBAAoB,WAAYloB,GAClD9pC,KAAK4yD,sBAAsBjhD,EAAQm4B,IAOrCknB,eAAgB,SAAUlnB,GAKxB,OAJI9pC,KAAKgpD,kBACPlf,EAAE+oB,kBACF/oB,EAAE6oB,mBAEG,GAOT1B,eAAgB,SAAUnnB,GACxB9pC,KAAK8yD,yBAAyBhpB,GAC9B9pC,KAAK+yD,aAAajpB,EAAG,YACrB9pC,KAAKgzD,yBAAyBlpB,IAShCmpB,aAAc,SAASC,GACrB,IAAIzwC,EAAiBywC,EAAIzwC,eAEzB,OAAIA,EACKA,EAAe,IAAMA,EAAe,GAAG0wC,WAG5CnzD,KAAKqwD,oBACA6C,EAAIE,WAGL,GAQV5P,aAAc,SAAS0P,GACrB,OAAsB,IAAlBA,EAAIG,YAGc,IAAlBH,EAAIG,YAGS,aAAbH,EAAIvtD,MAA8C,IAAvButD,EAAII,QAAQxvD,UAGvCovD,EAAIzwC,gBACCywC,EAAIzwC,eAAe,GAAG0wC,aAAenzD,KAAKiwD,eASrDqB,cAAe,SAASxnB,GACtBA,EAAE6oB,iBACuB,OAArB3yD,KAAKiwD,cACPjwD,KAAKiwD,YAAcjwD,KAAKizD,aAAanpB,IAEvC9pC,KAAKuzD,cAAczpB,GACnB9pC,KAAKgzD,2BACL,IAAIxC,EAAgBxwD,KAAKo5C,cACrBqX,EAAkBzwD,KAAKowD,kBAC3BtuC,EAAYzkB,EAAOG,SAAU,WAAYwC,KAAK8xD,YAAajC,GAC3D/tC,EAAYzkB,EAAOG,SAAU,YAAawC,KAAK4wD,aAAcf,GAE7D5tC,EAAeuuC,EAAeC,EAAkB,OAAQzwD,KAAK2wD,eAO/DA,aAAc,SAAU7mB,GACtB9pC,KAAKuzD,cAAczpB,GACnB9pC,KAAKgzD,2BACL,IAAIxC,EAAgBxwD,KAAKo5C,cACrBqX,EAAkBzwD,KAAKowD,kBAC3BnuC,EAAeuuC,EAAeC,EAAkB,OAAQzwD,KAAK4wD,aAAcf,GAC3E/tC,EAAYzkB,EAAOG,SAAUizD,EAAkB,KAAMzwD,KAAK6xD,YAC1D/vC,EAAYzkB,EAAOG,SAAUizD,EAAkB,OAAQzwD,KAAK4wD,aAAcf,IAO5EiC,YAAa,SAAShoB,GACpB,KAAIA,EAAEwpB,QAAQxvD,OAAS,GAAvB,CAIA9D,KAAKwzD,YAAY1pB,GACjB9pC,KAAKgzD,2BACLhzD,KAAKiwD,YAAc,KACnB,IAAIQ,EAAkBzwD,KAAKowD,kBAC3BnuC,EAAe5kB,EAAOG,SAAU,WAAYwC,KAAK8xD,YAAajC,GAC9D5tC,EAAe5kB,EAAOG,SAAU,YAAawC,KAAK4wD,aAAcf,GAChE,IAAIxuC,EAAQrhB,KACRA,KAAKyzD,mBACP9pC,aAAa3pB,KAAKyzD,mBAEpBzzD,KAAKyzD,kBAAoBjqC,YAAW,WAGlC1H,EAAYT,EAAM+3B,cAAeqX,EAAkB,OAAQpvC,EAAMsvC,cACjEtvC,EAAMoyC,kBAAoB,IACzB,OAOL5B,WAAY,SAAU/nB,GACpB9pC,KAAKwzD,YAAY1pB,GACjB9pC,KAAKgzD,2BACL,IAAIxC,EAAgBxwD,KAAKo5C,cACrBqX,EAAkBzwD,KAAKowD,kBACvBpwD,KAAKwjD,aAAa1Z,KACpB7nB,EAAe5kB,EAAOG,SAAUizD,EAAkB,KAAMzwD,KAAK6xD,YAC7D5vC,EAAe5kB,EAAOG,SAAUizD,EAAkB,OAAQzwD,KAAK4wD,aAAcf,GAC7E/tC,EAAY0uC,EAAeC,EAAkB,OAAQzwD,KAAK4wD,aAAcf,KAQ5Ee,aAAc,SAAU9mB,IACrB9pC,KAAK63C,qBAAuB/N,EAAE6oB,gBAAkB7oB,EAAE6oB,iBACnD3yD,KAAK0zD,cAAc5pB,IAMrB4mB,UAAW,WACT1wD,KAAK64C,cAQP8a,cAAe,SAAShiD,GACtB,IAAIopC,EAAe/6C,KAAKg7C,cAExB,WACID,MAAmBppC,GACpBopC,GAAgBppC,GAAWopC,IAAiBppC,KAMtCopC,GAAgBA,EAAamS,WAG7B,IAYXsG,YAAa,SAAU1pB,GACrB,IAAIn4B,EAAQ5H,EAAY/J,KAAKspD,kBACzB6C,EAAgBnsD,KAAKupD,eAAgBqK,GAAe,EACpDC,GAAY1H,GAAyC,IAAvBA,EAAc/hD,MAAoC,IAAtB+hD,EAAc9hD,IAM5E,GALArK,KAAK8yD,yBAAyBhpB,GAC9Bn4B,EAAS3R,KAAKqyD,QACdryD,KAAK+yD,aAAajpB,EAAG,aAGjBimB,EAAWjmB,EA3ZD,GA4ZR9pC,KAAKipD,gBACPjpD,KAAK+yD,aAAajpB,EAAG,KA7ZX,EA6Z8B+pB,OAF5C,CAOA,GAAI9D,EAAWjmB,EAlaiB,GAua9B,OAJI9pC,KAAKkpD,iBACPlpD,KAAK+yD,aAAajpB,EAAG,KApaO,EAoaa+pB,QAE3C7zD,KAAKgzD,2BAIP,GAAIhzD,KAAK8oD,eAAiB9oD,KAAKw6C,oBAC7Bx6C,KAAK8zD,wBAAwBhqB,QAI/B,GAAK9pC,KAAKwjD,aAAa1Z,GAAvB,CAOA,GAJI//B,IACF/J,KAAK+zD,0BAA0BjqB,GAC/B8pB,EAAe7pD,EAAUsgC,kBAEtBwpB,EAAS,CACZ,IAAIG,EAAkBriD,IAAW3R,KAAKg7C,cACtCh7C,KAAKi0D,mBAAmBnqB,GACnB8pB,IACHA,EACE5zD,KAAK2zD,cAAchiD,KACjBqiD,GAAmBriD,IAAW3R,KAAKg7C,eAI3C,GAAIrpC,EAAQ,CACV,GAAIA,EAAOw5C,YAAcx5C,IAAW3R,KAAKg7C,eAAqC,OAApBrpC,EAAOuiD,SAC/Dl0D,KAAKgvD,gBAAgBr9C,EAAQm4B,GAC7B8pB,GAAe,MAEZ,CACH,IAAIrpB,EAAS54B,EAAOk7C,kBAClB7sD,KAAKmiB,WAAW2nB,GAAG,GACnBzsC,EAAOgG,KAAKwf,aAAainB,IAEvBpB,EAAU/2B,EAAOo2B,SAASwC,GAC1B4G,EAAiBzI,GAAWA,EAAQ4I,kBAAkBxH,EAAGn4B,EAAQ+2B,GACrE,GAAIyI,EAAgB,CAClB,IAAIpH,EAAU/pC,KAAKmiB,WAAW2nB,GAC9BqH,EAAerH,EAAG//B,EAAWggC,EAAQ1gC,EAAG0gC,EAAQzgC,IAGpDqI,EAAOwiD,UAAW,EAEpBn0D,KAAKo0D,oBAAoBtqB,EAAGn4B,GAC5B3R,KAAK+yD,aAAajpB,EAAG,KApd2B,EAodT+pB,GACvC7zD,KAAKupD,eAAiB,KACtBvpD,KAAKspD,kBAAoB,KAEzB33C,IAAWA,EAAOi6C,SAAW,GACzBgI,EACF5zD,KAAK6E,mBAEGgvD,GACR7zD,KAAKmqD,eAWT6H,oBAAqB,SAASqC,EAAWvqB,GACvC,IAAIn4B,EAAS3R,KAAKusD,WAAWziB,GACzBqf,EAAUnpD,KAAKmpD,QACfzlD,EAAU,CACRomC,EAAGA,EACHn4B,OAAQA,EACR2iD,WAAYnL,GAIlB,GAFAnpD,KAAKyD,KAAK4wD,EAAW3wD,GACrBiO,GAAUA,EAAOlO,KAAK4wD,EAAW3wD,IAC5BylD,EACH,OAAOx3C,EAET,IAAK,IAAI/N,EAAI,EAAGA,EAAIulD,EAAQrlD,OAAQF,IAClCulD,EAAQvlD,GAAGH,KAAK4wD,EAAW3wD,GAE7B,OAAOiO,GAYTohD,aAAc,SAASjpB,EAAGuqB,EAAWrE,EAAQ6D,GAC3C,IAAIliD,EAAS3R,KAAKqyD,QACdlJ,EAAUnpD,KAAKmpD,SAAW,GAC1BzlD,EAAU,CACRomC,EAAGA,EACHn4B,OAAQA,EACR2iD,WAAYnL,EACZ6G,OAAQA,GA3gBkC,EA4gB1C6D,QAASA,IAAW,EACpB9pB,QAAS/pC,KAAKytD,SACd8G,gBAAiBv0D,KAAKwtD,iBACtBzjD,UAAW/J,KAAKspD,mBAEJ,OAAd+K,IACF3wD,EAAQ8wD,cAAgBx0D,KAAKusD,WAAWziB,GACxCpmC,EAAQ+wD,kBAAoBz0D,KAAKmpD,SAEnCnpD,KAAKyD,KAAK,SAAW4wD,EAAW3wD,GAChCiO,GAAUA,EAAOlO,KAAK,QAAU4wD,EAAW3wD,GAC3C,IAAK,IAAIE,EAAI,EAAGA,EAAIulD,EAAQrlD,OAAQF,IAClCulD,EAAQvlD,GAAGH,KAAK,QAAU4wD,EAAW3wD,IAQzCqwD,0BAA2B,SAASjqB,GAElC,IAEI9mC,EAFA+G,EAAY/J,KAAKspD,kBACjB33C,EAAS5H,EAAU4H,OAEnBjO,EAAU,CACRomC,EAAGA,EACHn4B,OAAQA,EACR5H,UAAWA,EACXshD,OAAQthD,EAAUshD,QAGpB15C,EAAO+iD,WACT/iD,EAAO+iD,UAAW,GAGpB/iD,EAAOypC,aAEHrxC,EAAUsgC,iBAAoBrqC,KAAK23C,UAAYhmC,EAAOgjD,qBACpD5qD,EAAUsgC,kBAGZrnC,EAAYhD,KAAK40D,iBAAiBlxD,EAASqG,GAC3C/J,KAAK60D,MAAM7xD,EAAWU,IAExB1D,KAAK60D,MAAM,WAAYnxD,KAW3BkxD,iBAAkB,SAASlxD,EAASqG,GAGlC,IAAI/G,EAAWumC,EACf,OAAQx/B,EAAUshD,QAChB,IAAK,SACHroD,EAAY,SACZumC,EAAK,IACL,MACF,IAAK,SACHvmC,EAAY,SACZumC,EAAK,IACL,MACF,IAAK,QACHvmC,EAAY,SACZumC,EAAK,IACL,MACF,IAAK,QACHvmC,EAAY,SACZumC,EAAK,IACL,MACF,IAAK,QACHvmC,EAAY,SACZumC,EAAK,UACL,MACF,IAAK,SACHvmC,EAAY,UACZ,MACF,IAAK,OACHA,EAAY,QAIhB,OADAU,EAAQ6lC,GAAKA,EACNvmC,GAOT8xD,0BAA2B,SAAShrB,GAClC9pC,KAAKw6C,qBAAsB,EACvBx6C,KAAKouD,mBACPpuD,KAAKqvD,oBAAoBvlB,GAAGjlC,mBAE9B,IAAIklC,EAAU/pC,KAAKmiB,WAAW2nB,GAC9B9pC,KAAKy6C,iBAAiB8I,YAAYxZ,EAAS,CAAED,EAAGA,EAAGC,QAASA,IAC5D/pC,KAAK+yD,aAAajpB,EAAG,SAOvBirB,0BAA2B,SAASjrB,GAClC,GAAI9pC,KAAKw6C,oBAAqB,CAC5B,IAAIzQ,EAAU/pC,KAAKmiB,WAAW2nB,GAC9B9pC,KAAKy6C,iBAAiBmJ,YAAY7Z,EAAS,CAAED,EAAGA,EAAGC,QAASA,IAE9D/pC,KAAKisD,UAAUjsD,KAAKuoD,mBACpBvoD,KAAK+yD,aAAajpB,EAAG,SAOvBgqB,wBAAyB,SAAShqB,GAChC,IAAIC,EAAU/pC,KAAKmiB,WAAW2nB,GAC9B9pC,KAAKw6C,oBAAsBx6C,KAAKy6C,iBAAiBqJ,UAAU,CAAEha,EAAGA,EAAGC,QAASA,IAC5E/pC,KAAK+yD,aAAajpB,EAAG,OAWvBypB,cAAe,SAAUzpB,GACvB9pC,KAAK8yD,yBAAyBhpB,GAC9B9pC,KAAK+yD,aAAajpB,EAAG,eACrB,IAAIn4B,EAAS3R,KAAKqyD,QAElB,GAAItC,EAAWjmB,EA1pBD,GA2pBR9pC,KAAKipD,gBACPjpD,KAAK+yD,aAAajpB,EAAG,OA5pBX,QAiqBd,GAAIimB,EAAWjmB,EAjqBiB,GAkqB1B9pC,KAAKkpD,iBACPlpD,KAAK+yD,aAAajpB,EAAG,OAnqBO,QAwqBhC,GAAI9pC,KAAK8oD,cACP9oD,KAAK80D,0BAA0BhrB,QAIjC,GAAK9pC,KAAKwjD,aAAa1Z,KAKnB9pC,KAAKspD,kBAAT,CAIA,IAAIvf,EAAU/pC,KAAKytD,SAEnBztD,KAAKg1D,iBAAmBjrB,EACxB,IAAI6pB,EAAe5zD,KAAK2zD,cAAchiD,GAClCsjD,EAAcj1D,KAAKk1D,aAAaprB,EAAGn4B,GAmBvC,GAlBI3R,KAAKirD,sBAAsBnhB,EAAGn4B,GAChC3R,KAAKqvD,oBAAoBvlB,GAElBmrB,IACPj1D,KAAKm1D,gBAAgBrrB,EAAGn4B,GACxBA,EAAS3R,KAAKg7C,gBAGZh7C,KAAK4nD,WAAej2C,IACpBA,EAAOw5C,YAAex5C,EAAOu7C,WAAav7C,IAAW3R,KAAKg7C,iBAC5Dh7C,KAAKupD,eAAiB,CACpB/b,GAAIzD,EAAQ1gC,EACZkkC,GAAIxD,EAAQzgC,EACZe,IAAK,EACLD,KAAM,IAINuH,EAAQ,CACV,IAAI+5C,EAAkB/5C,IAAW3R,KAAKg7C,cAClCrpC,EAAOw5C,YAAkC,SAApBx5C,EAAOuiD,UAC9Bl0D,KAAKgvD,gBAAgBr9C,EAAQm4B,GAE/B,IAAIS,EAAS54B,EAAOk7C,kBAClB7sD,KAAKmiB,WAAW2nB,GAAG,GACnBzsC,EAAOgG,KAAKwf,aAAainB,IAG3B,GADAn4B,EAAOi6C,SAAWrhB,EACd54B,IAAW3R,KAAKg7C,gBAAkBzQ,IAAW0qB,GAAc,CAC7Dj1D,KAAK2rD,uBAAuB7hB,EAAGn4B,EAAQ+5C,GACvC,IAAIhjB,EAAU/2B,EAAOo2B,SAASwC,GAE1B2G,GADAnH,EAAU/pC,KAAKmiB,WAAW2nB,GACPpB,GAAWA,EAAQ2I,oBAAoBvH,EAAGn4B,EAAQ+2B,IACrEwI,GACFA,EAAiBpH,EAAG9pC,KAAKspD,kBAAmBvf,EAAQ1gC,EAAG0gC,EAAQzgC,IAIrEtJ,KAAK+yD,aAAajpB,EAAG,SAEpB8pB,GAAgBqB,IAAgBj1D,KAAK6E,qBAOxCmuD,yBAA0B,WACxBhzD,KAAKqyD,QAAU,KACfryD,KAAKytD,SAAW,KAChBztD,KAAKwtD,iBAAmB,MAQ1BsF,yBAA0B,SAAShpB,GAEjC9pC,KAAKgzD,2BACLhzD,KAAKytD,SAAWztD,KAAKmiB,WAAW2nB,GAAG,GACnC9pC,KAAKwtD,iBAAmBxtD,KAAKuqD,kBAAkBvqD,KAAKytD,UACpDztD,KAAKqyD,QAAUryD,KAAKspD,kBAAoBtpD,KAAKspD,kBAAkB33C,OAAS3R,KAAKusD,WAAWziB,IAAM,MAMhGkiB,iBAAkB,SAASliB,GACzB,IAAIngC,EAAI3J,KAAKspD,kBACbtpD,KAAK23C,UAAYhuC,EAAEgI,OAAOyjD,YAC1Bp1D,KAAKyD,KAAK,mBAAoB,CAC5BqmC,EAAGA,EACH//B,UAAWJ,KAaf+pD,cAAe,SAAU5pB,GAGvB,IAAIn4B,EAAQo4B,EAEZ,GAJA/pC,KAAK+yD,aAAajpB,EAAG,eACrB9pC,KAAK8yD,yBAAyBhpB,GAG1B9pC,KAAK8oD,cACP9oD,KAAK+0D,0BAA0BjrB,QAIjC,GAAK9pC,KAAKwjD,aAAa1Z,GAAvB,CAIA,IAAIqiB,EAAgBnsD,KAAKupD,eAGrB4C,GACFpiB,EAAU/pC,KAAKytD,SAEftB,EAAc/hD,KAAO2/B,EAAQ1gC,EAAI8iD,EAAc3e,GAC/C2e,EAAc9hD,IAAM0/B,EAAQzgC,EAAI6iD,EAAc5e,GAE9CvtC,KAAKmqD,aAEGnqD,KAAKspD,kBAMbtpD,KAAKq1D,iBAAiBvrB,IALtBn4B,EAAS3R,KAAKusD,WAAWziB,IAAM,KAC/B9pC,KAAKo0D,oBAAoBtqB,EAAGn4B,GAC5B3R,KAAKs1D,mBAAmB3jD,EAAQm4B,IAKlC9pC,KAAK+yD,aAAajpB,EAAG,QACrB9pC,KAAKgzD,6BASPsC,mBAAoB,SAAS3jD,EAAQm4B,GACnC,IAAIsf,EAAiBppD,KAAKopD,eACtBC,EAAkBrpD,KAAKqpD,gBAAiBF,EAAUnpD,KAAKmpD,QACvDrlD,EAAS2D,KAAKc,IAAI8gD,EAAgBvlD,OAAQqlD,EAAQrlD,QAEtD9D,KAAKu1D,yBAAyB5jD,EAAQm4B,EAAG,CACvC0rB,UAAWpM,EACXqM,OAAQ,WACRC,aAAc,YACdC,MAAO,YACPC,YAAa,eAEf,IAAK,IAAIhyD,EAAI,EAAGA,EAAIE,EAAQF,IAC1B5D,KAAKu1D,yBAAyBpM,EAAQvlD,GAAIkmC,EAAG,CAC3C0rB,UAAWnM,EAAgBzlD,GAC3B6xD,OAAQ,WACRE,MAAO,cAGX31D,KAAKopD,eAAiBz3C,EACtB3R,KAAKqpD,gBAAkBrpD,KAAKmpD,QAAQvjD,UAStCgtD,sBAAuB,SAASjhD,EAAQm4B,GACtC,IAAI+rB,EAAqB71D,KAAK61D,mBAC1BxM,EAAkBrpD,KAAKqpD,gBAAiBF,EAAUnpD,KAAKmpD,QACvDrlD,EAAS2D,KAAKc,IAAI8gD,EAAgBvlD,OAAQqlD,EAAQrlD,QAEtD9D,KAAKu1D,yBAAyB5jD,EAAQm4B,EAAG,CACvC0rB,UAAWK,EACXJ,OAAQ,YACRE,MAAO,cAET,IAAK,IAAI/xD,EAAI,EAAGA,EAAIE,EAAQF,IAC1B5D,KAAKu1D,yBAAyBpM,EAAQvlD,GAAIkmC,EAAG,CAC3C0rB,UAAWnM,EAAgBzlD,GAC3B6xD,OAAQ,YACRE,MAAO,cAGX31D,KAAK61D,mBAAqBlkD,GAe5B4jD,yBAA0B,SAAS5jD,EAAQm4B,EAAGgsB,GAC5C,IAAIC,EAAOC,EAAgDC,EAAxCT,EAAYM,EAAON,UAClCU,EAAgBV,IAAc7jD,EAAQikD,EAAcE,EAAOF,YAAaF,EAAeI,EAAOJ,aAC9FQ,IACFH,EAAQ,CAAEjsB,EAAGA,EAAGn4B,OAAQA,EAAQwkD,eAAgBX,GAChDQ,EAAS,CAAElsB,EAAGA,EAAGn4B,OAAQ6jD,EAAWY,WAAYzkD,IAElDskD,EAAUtkD,GAAUukD,EACTV,GAAaU,IAEtBR,GAAgB11D,KAAKyD,KAAKiyD,EAAcM,GACxCR,EAAU/xD,KAAKqyD,EAAOL,OAAQO,IAE5BC,IACFL,GAAe51D,KAAKyD,KAAKmyD,EAAaG,GACtCpkD,EAAOlO,KAAKqyD,EAAOH,MAAOI,KAQ9B3D,eAAgB,SAAStoB,GACvB9pC,KAAK8yD,yBAAyBhpB,GAC9B9pC,KAAK+yD,aAAajpB,EAAG,SACrB9pC,KAAKgzD,4BAOPqC,iBAAkB,SAASvrB,GACzB,IAAIC,EAAU/pC,KAAKmiB,WAAW2nB,GAC1B//B,EAAY/J,KAAKspD,kBAErBv/C,EAAUssD,OAAQ,EAClBtsD,EAAUgiD,SAAWjiB,EAAEiiB,SACvBhiD,EAAUuhD,OAASxhB,EAAE9pC,KAAK2nD,aAE1B3nD,KAAKs2D,wBAAwBxsB,EAAG//B,EAAWggC,GAC3ChgC,EAAUsgC,iBAAmBrqC,KAAK6E,oBAMpCyxD,wBAAyB,SAASxsB,EAAG//B,EAAWggC,GAC9C,IAAI1gC,EAAI0gC,EAAQ1gC,EACZC,EAAIygC,EAAQzgC,EACZ+hD,EAASthD,EAAUshD,OACnBhhB,GAAkB,EAClBJ,EAAgBlgC,EAAUkgC,cAI1BA,IACFI,EAAkBJ,EAAcH,EAAG//B,EAAWV,EAAGC,IAEpC,SAAX+hD,GAAqBhhB,IACvBtgC,EAAU4H,OAAOwiD,UAAW,EAC5Bn0D,KAAKisD,UAAUliD,EAAU4H,OAAO02C,YAAcroD,KAAKqoD,aAErDt+C,EAAUsgC,gBAAkBtgC,EAAUsgC,iBAAmBA,GAM3DwqB,MAAOx3D,EAAOkyC,cAAc3G,UAQ5BwrB,oBAAqB,SAAUtqB,EAAGn4B,GAChC,IAAKA,EAEH,OADA3R,KAAKisD,UAAUjsD,KAAKsoD,gBACb,EAET,IAAIF,EAAcz2C,EAAOy2C,aAAepoD,KAAKooD,YACzC1H,EAAkB1gD,KAAKg7C,eAA6C,oBAA5Bh7C,KAAKg7C,cAAcr1C,KACzD3F,KAAKg7C,cAAgB,KAEvBzQ,IAAWmW,IAAoBA,EAAgBz6C,SAAS0L,KAI3CA,EAAOk7C,kBAAkB7sD,KAAKmiB,WAAW2nB,GAAG,IAExDS,EAWHvqC,KAAKisD,UAAUjsD,KAAKu2D,gBAAgBhsB,EAAQ54B,EAAQm4B,KAVhDn4B,EAAO27C,gBAGTttD,KAAKmpD,QAAQvjD,SAAS0uC,UAAU9gC,KAAI,SAAS6+C,GAC3CjK,EAAciK,EAAQjK,aAAeA,KAGzCpoD,KAAKisD,UAAU7D,KAUnBmO,gBAAiB,SAAShsB,EAAQ54B,EAAQm4B,GACxC,IAAIpB,EAAU/2B,EAAOo2B,SAASwC,GAC9B,OAAO7B,EAAQ6I,mBAAmBzH,EAAGpB,EAAS/2B,MA/+BpD,GAq/BA,WAEE,IAAIrJ,EAAMb,KAAKa,IACXC,EAAMd,KAAKc,IAEflL,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOmB,OAAOsQ,UAAiD,CAQvFomD,aAAc,SAASprB,EAAGn4B,GACxB,IAAIopC,EAAe/6C,KAAKg7C,cACxB,OAAOD,GAAgB/6C,KAAKgrD,uBAAuBlhB,IAAMn4B,GAAUA,EAAOw5C,YAAcnrD,KAAK4nD,YACtF7M,IAAiBppC,GAAgC,oBAAtBopC,EAAap1C,QAAgCgM,EAAOw9C,SAAS,CAAErlB,EAAGA,KAQtGqrB,gBAAiB,SAAUrrB,EAAGn4B,GAC5B,IAAIopC,EAAe/6C,KAAKg7C,cAEpBD,EAAa6Q,WAGbj6C,IAAWopC,IAEbppC,EAAS3R,KAAKusD,WAAWziB,GAAG,KAEZn4B,EAAOw5C,cAIrBpQ,GAAsC,oBAAtBA,EAAap1C,KAC/B3F,KAAKw2D,uBAAuB7kD,EAAQm4B,GAGpC9pC,KAAKy2D,uBAAuB9kD,EAAQm4B,KAOxC0sB,uBAAwB,SAAS7kD,EAAQm4B,GACvC,IAAI4W,EAAkB1gD,KAAKg7C,cACvB0b,EAAuBhW,EAAgBl8C,SAASmH,MAAM,GACtD+0C,EAAgBz6C,SAAS0L,IAC3B+uC,EAAgBiW,iBAAiBhlD,GACjC3R,KAAKopD,eAAiBz3C,EACtB3R,KAAKqpD,gBAAkBrpD,KAAKmpD,QAAQvjD,SACL,IAA3B86C,EAAgB16C,QAElBhG,KAAKkvD,iBAAiBxO,EAAgB56C,KAAK,GAAIgkC,KAIjD4W,EAAgBkW,cAAcjlD,GAC9B3R,KAAKopD,eAAiB1I,EACtB1gD,KAAKqpD,gBAAkBrpD,KAAKmpD,QAAQvjD,UAEtC5F,KAAKuuD,qBAAqBmI,EAAsB5sB,IAMlD2sB,uBAAwB,SAAS9kD,EAAQm4B,GACvC,IAAImlB,EAAiBjvD,KAAK+pD,mBAAoB5O,EAAQn7C,KAAK62D,aAAallD,GACxE3R,KAAKopD,eAAiBjO,EAItBn7C,KAAKkvD,iBAAiB/T,EAAOrR,GAC7B9pC,KAAKuuD,qBAAqBU,EAAgBnlB,IAO5C+sB,aAAc,SAASllD,GACrB,IAAIzM,EAAUlF,KAAKwE,SAEfsyD,EADgB5xD,EAAQ9B,QAAQpD,KAAKg7C,eAAiB91C,EAAQ9B,QAAQuO,GAElE,CAAC3R,KAAKg7C,cAAerpC,GACrB,CAACA,EAAQ3R,KAAKg7C,eAEtB,OADAh7C,KAAKg7C,cAAckS,WAAaltD,KAAKg7C,cAAc+b,cAC5C,IAAI15D,EAAO25D,gBAAgBF,EAAc,CAC9Ch4D,OAAQkB,QAQZi3D,sBAAuB,SAAUntB,GAE/B,IACIotB,EADA/b,EAAQn7C,KAAKm3D,gBAAgBrtB,GAIZ,IAAjBqR,EAAMr3C,OACR9D,KAAKgvD,gBAAgB7T,EAAM,GAAIrR,GAExBqR,EAAMr3C,OAAS,IACtBozD,EAAS,IAAI75D,EAAO25D,gBAAgB7b,EAAM7G,UAAW,CACnDx1C,OAAQkB,OAEVA,KAAKgvD,gBAAgBkI,EAAQptB,KAOjCqtB,gBAAiB,SAASrtB,GAYxB,IAXA,IACIstB,EADAjc,EAAQ,GAER/iC,EAAKpY,KAAKupD,eAAe/b,GACzBn1B,EAAKrY,KAAKupD,eAAehc,GACzBt+B,EAAKmJ,EAAKpY,KAAKupD,eAAen/C,KAC9B8E,EAAKmJ,EAAKrY,KAAKupD,eAAel/C,IAC9BgtD,EAAgB,IAAIh6D,EAAO+L,MAAMd,EAAI8P,EAAInJ,GAAK3G,EAAI+P,EAAInJ,IACtDooD,EAAgB,IAAIj6D,EAAO+L,MAAMb,EAAI6P,EAAInJ,GAAK1G,EAAI8P,EAAInJ,IACtDqoD,GAAkBv3D,KAAKmoD,wBACvB0L,EAAUz7C,IAAOnJ,GAAMoJ,IAAOnJ,EAEzBtL,EAAI5D,KAAKwE,SAASV,OAAQF,QACjCwzD,EAAgBp3D,KAAKwE,SAASZ,KAEPwzD,EAAcjM,YAAeiM,EAAcroC,UAI7DwoC,GAAkBH,EAAcI,mBAAmBH,EAAeC,IACnEF,EAAcK,sBAAsBJ,EAAeC,IAClDC,GAAkBH,EAAcnK,cAAcoK,IAC9CE,GAAkBH,EAAcnK,cAAcqK,MAEjDnc,EAAM92C,KAAK+yD,GAEPvD,MAYR,OANI1Y,EAAMr3C,OAAS,IACjBq3C,EAAQA,EAAMn3C,QAAO,SAASe,GAC5B,OAAQA,EAAOoqD,SAAS,CAAErlB,EAAGA,QAI1BqR,GAMT8Y,mBAAoB,SAASnqB,GACvB9pC,KAAK4nD,WAAa5nD,KAAKupD,gBACzBvpD,KAAKi3D,sBAAsBntB,GAE7B9pC,KAAKisD,UAAUjsD,KAAKsoD,eAEpBtoD,KAAKupD,eAAiB,QA5K5B,GAoLElsD,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAO05C,aAAajoC,UAAuD,CAkCnGmB,UAAW,SAAUvM,GACnBA,IAAYA,EAAU,IAEtB,IAAIyM,EAASzM,EAAQyM,QAAU,MAC3BC,EAAU1M,EAAQ0M,SAAW,EAC7Bs+B,GAAchrC,EAAQgrC,YAAc,IAAMhrC,EAAQu0C,oBAAsBj4C,KAAK+4C,mBAAqB,GAClG7oC,EAAWlQ,KAAK03D,gBAAgBhpB,EAAYhrC,GAChD,OAAOrG,EAAOgG,KAAK4M,UAAUC,EAAUC,EAAQC,IAgBjDsnD,gBAAiB,SAAShpB,EAAYipB,GACpCjpB,EAAaA,GAAc,EAE3B,IAAIkpB,IADJD,EAAWA,GAAY,IACKp4D,OAASS,KAAKT,OAASmvC,EAC/CmpB,GAAgBF,EAASx4D,QAAUa,KAAKb,QAAUuvC,EAClDlrB,EAAOxjB,KAAKwqC,UACZstB,EAAgB93D,KAAKT,MACrBw4D,EAAiB/3D,KAAKb,OACtB64D,EAAUx0C,EAAOkrB,EACjBupB,EAAKj4D,KAAK83C,kBACVhnC,GAAcmnD,EAAG,IAAMN,EAASvtD,MAAQ,IAAMskC,EAC9C39B,GAAcknD,EAAG,IAAMN,EAASttD,KAAO,IAAMqkC,EAC7CwpB,EAAsBl4D,KAAKu4C,YAC3B4f,EAAQ,CAACH,EAAS,EAAG,EAAGA,EAASlnD,EAAYC,GAC7CqnD,EAAiBp4D,KAAKi4C,oBACtB/nC,EAAW7S,EAAOgG,KAAKyM,sBACvBuoD,EAAqBr4D,KAAKq5C,WAkB9B,OAjBAnpC,EAAS3Q,MAAQq4D,EACjB1nD,EAAS/Q,OAAS04D,EAClB73D,KAAKq5C,WAAa,KAClBr5C,KAAKi4C,qBAAsB,EAC3Bj4C,KAAKu4C,aAAc,EACnBv4C,KAAK83C,kBAAoBqgB,EACzBn4D,KAAKT,MAAQq4D,EACb53D,KAAKb,OAAS04D,EACd73D,KAAKq7C,yBACLr7C,KAAKs8C,aAAapsC,EAASjR,WAAW,MAAOe,KAAKwE,UAClDxE,KAAK83C,kBAAoBmgB,EACzBj4D,KAAKT,MAAQu4D,EACb93D,KAAKb,OAAS44D,EACd/3D,KAAKq7C,yBACLr7C,KAAKu4C,YAAc2f,EACnBl4D,KAAKi4C,oBAAsBmgB,EAC3Bp4D,KAAKq5C,WAAagf,EACXnoD,KAOb7S,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAO05C,aAAajoC,UAAuD,CAsBnGwpD,aAAc,SAAUC,EAAM/yD,EAAU8H,GACtC,GAAKirD,EAAL,CAKA,IAAIC,EAA8B,kBAATD,EACrBE,KAAK3iC,MAAMyiC,GACXl7D,EAAOgG,KAAK0B,OAAOya,MAAM+4C,GAEzBl3C,EAAQrhB,KACR84B,EAAW0/B,EAAW1/B,SACtBl0B,EAAoB5E,KAAK4E,kBAoB7B,OAlBA5E,KAAK4E,mBAAoB,SAElB4zD,EAAW1/B,SAElB94B,KAAK04D,gBAAgBF,EAAWtzD,SAAS,SAAUqI,GACjD8T,EAAM26B,QACN36B,EAAMs3C,cAAcH,GAAY,WAC1B1/B,EACFzX,EAAMq3C,gBAAgB,CAAC5/B,IAAW,SAAU8/B,GAC1Cv3C,EAAMyX,SAAW8/B,EAAoB,GACrCv3C,EAAMw3C,cAAc90D,KAAKsd,EAAOm3C,EAAYjrD,EAAkB3I,EAAmBY,MAInF6b,EAAMw3C,cAAc90D,KAAKsd,EAAOm3C,EAAYjrD,EAAkB3I,EAAmBY,QAGpF8H,GACItN,OAUT64D,cAAe,SAASL,EAAYjrD,EAAkB3I,EAAmBY,GACvE,IAAI6b,EAAQrhB,KACZuN,EAAiBI,SAAQ,SAASzG,EAAKlC,GAGrCqc,EAAMvc,SAASoC,EAAKlC,MAEtBhF,KAAK4E,kBAAoBA,SAElB4zD,EAAWtzD,eACXszD,EAAWhhB,uBACXghB,EAAW9gB,oBACX8gB,EAAWvZ,kBACXuZ,EAAWxZ,QAKlBh/C,KAAKuG,YAAYiyD,GACjBx4D,KAAKo8C,YACL52C,GAAYA,KAQdmzD,cAAe,SAASH,EAAYhzD,GAClC,IAAIszD,EAAS,CACXvhB,iBAAiB,EACjBE,cAAc,EACdD,iBAAiB,EACjBE,cAAc,GAGhB,GAAK8gB,EAAWhhB,iBAAoBghB,EAAW9gB,cAAiB8gB,EAAWvZ,YAAeuZ,EAAWxZ,QAArG,CAKA,IAAI+Z,EAAa,WACXD,EAAOthB,iBAAmBshB,EAAOphB,cAAgBohB,EAAOvhB,iBAAmBuhB,EAAOrhB,cACpFjyC,GAAYA,KAIhBxF,KAAKg5D,eAAe,kBAAmBR,EAAWhhB,gBAAiBshB,EAAQC,GAC3E/4D,KAAKg5D,eAAe,eAAgBR,EAAW9gB,aAAcohB,EAAQC,GACrE/4D,KAAKg5D,eAAe,kBAAmBR,EAAWvZ,WAAY6Z,EAAQC,GACtE/4D,KAAKg5D,eAAe,eAAgBR,EAAWxZ,QAAS8Z,EAAQC,QAb9DvzD,GAAYA,KAuBhBwzD,eAAgB,SAASryD,EAAU1C,EAAO60D,EAAQtzD,GAChD,IAAI6b,EAAQrhB,KAEZ,IAAKiE,EAGH,OAFA60D,EAAOnyD,IAAY,OACnBnB,GAAYA,KAIG,oBAAbmB,GAA+C,iBAAbA,EACpCtJ,EAAOgG,KAAKgK,eAAe,CAACpJ,IAAQ,SAASg1D,GAC3C53C,EAAM1a,GAAYsyD,EAAc,GAChCH,EAAOnyD,IAAY,EACnBnB,GAAYA,OAIdxF,KAAK,MAAQ3C,EAAOgG,KAAKkI,OAAO0U,WAAWtZ,GAAU,IAAO1C,GAAO,WACjE60D,EAAOnyD,IAAY,EACnBnB,GAAYA,QAWlBkzD,gBAAiB,SAAUxzD,EAASM,EAAU8H,GACvCpI,GAA8B,IAAnBA,EAAQpB,OAKxBzG,EAAOgG,KAAKgK,eAAenI,GAAS,SAASqI,GAC3C/H,GAAYA,EAAS+H,KACpB,KAAMD,GANP9H,GAAYA,EAAS,KAczB0zD,WAAY,SAAU/oD,EAAQ3K,GAC5BxF,KAAKwf,OAAM,SAAUA,GACnBha,EAASga,EAAMvP,UAAUE,QAU7BgpD,yBAA0B,SAAUhpD,EAAQu+B,EAAYlpC,GACtDxF,KAAKwf,OAAM,SAAUA,GACnBha,EAASga,EAAM45C,wBAAwBjpD,EAAQu+B,QASnDlvB,MAAO,SAAUha,EAAUoJ,GACzB,IAAIuD,EAAOsmD,KAAKY,UAAUr5D,KAAK0hD,OAAO9yC,IACtC5O,KAAKs5D,kBAAiB,SAAS95C,GAC7BA,EAAM84C,aAAanmD,GAAM,WACvB3M,GAAYA,EAASga,UAW3B85C,iBAAkB,SAAS9zD,GACzB,IAAIgf,EAAKnnB,EAAOgG,KAAKyM,sBAErB0U,EAAGjlB,MAAQS,KAAKT,MAChBilB,EAAGrlB,OAASa,KAAKb,OAEjB,IAAIqgB,EAAQ,IAAIniB,EAAOmB,OAAOgmB,GAC1BxkB,KAAKw3C,iBACPh4B,EAAMk5B,mBAAmB14C,KAAKw3C,gBAAgB/qC,KAAK,WACjD+S,EAAM48B,YACN52C,GAAYA,EAASga,MAEvBA,EAAM+5C,uBAAyBv5D,KAAKu5D,uBACpC/5C,EAAMg6C,uBAAyBx5D,KAAKw5D,wBAGpCh0D,GAAYA,EAASga,MAM3B,SAAUjY,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BI,EAAQniB,EAAOgG,KAAK0B,OAAOya,MAC3B/U,EAAUpN,EAAOgG,KAAKoH,QACtBwV,EAAa5iB,EAAOgG,KAAKkI,OAAO0U,WAChCvX,EAAmBrL,EAAOgG,KAAKqF,iBAC/B+wD,EAAmBp8D,EAAO05C,aAAayK,SAAS,eAChDkY,GAAiBr8D,EAAOwD,aAGxBxD,EAAOwR,SAuCXxR,EAAOwR,OAASxR,EAAOgG,KAAKke,YAAYlkB,EAAOiJ,cAAqD,CASlGX,KAA0B,SAQ1ByjC,QAA0B,OAQ1BC,QAA0B,MAO1Bh/B,IAA0B,EAO1BD,KAA0B,EAO1B7K,MAA0B,EAO1BJ,OAA0B,EAO1BuR,OAA0B,EAO1BC,OAA0B,EAO1BS,OAA0B,EAO1BC,OAA0B,EAO1B4R,QAA0B,EAO1Bjb,MAA0B,EAO1B4I,MAA0B,EAO1BC,MAA0B,EAO1B++B,WAA0B,GAO1B+pB,gBAA+B,GAO/B5pB,oBAA0B,EAO1BqY,YAA0B,KAO1BC,WAA0B,KAO1B5d,QAA0B,EAO1BmvB,YAA0B,mBAO1BC,gBAA0B,KAO1BzpB,YAA0B,mBAQ1BJ,kBAA0B,KAO1BmD,YAAsB,OAOtB2mB,gBAA0B,KAU1BrS,iBAA0B,EAU1BC,kBAA0B,EAQ1BnkD,KAA0B,aAS1Bk1B,SAA0B,UAO1B0kB,yBAA0B,cAQ1B5F,gBAA0B,GAQ1BwT,yBAAmC,GAQnCv8B,OAA0B,KAO1BggB,YAA0B,EAM1ByT,gBAA0B,KAO1B8X,iBAAkB,EAOlBjY,cAA0B,OAO1BC,eAA0B,QAO1BC,iBAA0B,EAO1BvL,OAA0B,KAO1BujB,wBAA0B,GAU1BC,kBAA0B,EAO1BC,cAA0B,EAQ1B/O,YAA0B,EAO1BD,SAA0B,EAO1Bn8B,SAA0B,EAO1BorC,aAA0B,EAO1BC,YAA0B,EAO1BzR,oBAA0B,EAO1BrS,sBAA0B,EAO1B+jB,eAA0B,EAO1BC,eAA0B,EAO1BltB,cAA0B,EAO1B1D,cAA0B,EAO1BE,cAA0B,EAO1BmD,cAA0B,EAO1BD,cAA0B,EAO1BT,iBAA0B,EAQ1BwS,mBAA0B,EAU1B6a,cAA0BA,EAY1Ba,gBAA2B,EAW3BC,cAA2B,EAY3B/rB,eAA4B,EAQ5BgsB,OAAsB,EAUtB7O,SAAU,EAOV8O,WAAsB,OAWtBxG,SAAoB,OAQpByG,gBAAiB,sTAKf3uD,MAAM,KASR4uD,gBAAiB,wKAGf5uD,MAAM,KAMR6uD,gBACE,8BACA7uD,MAAM,KASR8sB,cAAUpsB,EASVkH,UAAU,EAYVknD,oBAAoB,EAMpBt5C,WAAY,SAAS9d,GACfA,GACF1D,KAAKu1C,WAAW7xC,IAQpB8jD,mBAAoB,WAClBxnD,KAAK+6D,iBAAmB,GACxB/6D,KAAKs9C,aAAejgD,EAAOgG,KAAKyM,sBAChC9P,KAAK4qD,cAAgB5qD,KAAKs9C,aAAar+C,WAAW,MAClDe,KAAKg7D,qBAELh7D,KAAKy6D,OAAQ,GAkBfQ,gBAAiB,SAASC,GACxB,IAAI15D,EAAqBnE,EAAOmE,mBAC5BjC,EAAQ27D,EAAK37D,MAAOJ,EAAS+7D,EAAK/7D,OAClCoJ,EAAMlL,EAAOoE,kBAAmB6G,EAAMjL,EAAOqE,kBACjD,GAAInC,GAASgJ,GAAOpJ,GAAUoJ,GAAOhJ,EAAQJ,GAAUqC,EAOrD,OANIjC,EAAQ+I,IACV4yD,EAAK37D,MAAQ+I,GAEXnJ,EAASmJ,IACX4yD,EAAK/7D,OAASmJ,GAET4yD,EAET,IAAIloD,EAAKzT,EAAQJ,EAAQg8D,EAAc99D,EAAOgG,KAAK0P,gBAAgBC,EAAIxR,GACnE4R,EAAW/V,EAAOgG,KAAK+P,SACvB/J,EAAI+J,EAAS9K,EAAK6yD,EAAY9xD,EAAGd,GACjCe,EAAI8J,EAAS9K,EAAK6yD,EAAY7xD,EAAGf,GAWrC,OAVIhJ,EAAQ8J,IACV6xD,EAAK9d,OAAS79C,EAAQ8J,EACtB6xD,EAAK37D,MAAQ8J,EACb6xD,EAAKE,QAAS,GAEZj8D,EAASmK,IACX4xD,EAAK7d,OAASl+C,EAASmK,EACvB4xD,EAAK/7D,OAASmK,EACd4xD,EAAKE,QAAS,GAETF,GAcTG,0BAA2B,WACzB,IAAIC,EAAct7D,KAAKu7D,wBAEnBvvB,EAAMhsC,KAAKqrC,0BAA0B,EAAG,GACxCmwB,EAAUxvB,EAAI3iC,EAAIiyD,EAAY5qD,OAAS1Q,KAAK0Q,OAC5C+qD,EAAUzvB,EAAI1iC,EAAIgyD,EAAY3qD,OAAS3Q,KAAK2Q,OAChD,MAAO,CAILpR,MAAOi8D,EAptBQ,EAqtBfr8D,OAAQs8D,EArtBO,EAstBfre,MAAOke,EAAY5qD,OACnB2sC,MAAOie,EAAY3qD,OACnBtH,EAAGmyD,EACHlyD,EAAGmyD,IAUPT,mBAAoB,WAClB,IAAIj8D,EAAeiB,KAAKlB,OACxB,GAAIkB,KAAKw6D,cAAgBz7D,GAAgBA,EAAauqD,kBAAmB,CACvE,IAAI33C,EAAS5S,EAAauqD,kBAAkB33C,OACxC05C,EAAStsD,EAAauqD,kBAAkB+B,OAC5C,GAAIrrD,OAAS2R,GAAU05C,EAAO1/C,OAAgC,UAAvB0/C,EAAO1/C,MAAM,EAAG,GACrD,OAAO,EAGX,IAG8C+vD,EAAcC,EAHxD78D,EAASkB,KAAKs9C,aACd4d,EAAOl7D,KAAKi7D,gBAAgBj7D,KAAKq7D,6BACjCO,EAAev+D,EAAOqE,kBACtBnC,EAAQ27D,EAAK37D,MAAOJ,EAAS+7D,EAAK/7D,OAClCi+C,EAAQ8d,EAAK9d,MAAOC,EAAQ6d,EAAK7d,MACjCwe,EAAoBt8D,IAAUS,KAAK87D,YAAc38D,IAAWa,KAAK+7D,YACjEC,EAAch8D,KAAKo9C,QAAUA,GAASp9C,KAAKq9C,QAAUA,EACrD4e,EAAeJ,GAAqBG,EACpCE,EAAkB,EAAGC,EAAmB,EAAGC,GAAqB,EACpE,GAAIP,EAAmB,CACrB,IAAIQ,EAAcr8D,KAAKs9C,aAAa/9C,MAChC+8D,EAAet8D,KAAKs9C,aAAan+C,OACjCo9D,EAAch9D,EAAQ88D,GAAel9D,EAASm9D,EAGlDF,EAAqBG,IAFAh9D,EAAsB,GAAd88D,GAAqBl9D,EAAwB,GAAfm9D,IACrDD,EAAcT,GAAgBU,EAAeV,EAE/CW,IAAgBrB,EAAKE,SAAW77D,EAAQq8D,GAAgBz8D,EAASy8D,KACnEM,EAA0B,GAAR38D,EAClB48D,EAA4B,GAATh9D,GAGvB,QAAI88D,IACEG,GACFt9D,EAAOS,MAAQkI,KAAK+P,KAAKjY,EAAQ28D,GACjCp9D,EAAOK,OAASsI,KAAK+P,KAAKrY,EAASg9D,KAGnCn8D,KAAK4qD,cAAc4R,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/Cx8D,KAAK4qD,cAAc7O,UAAU,EAAG,EAAGj9C,EAAOS,MAAOT,EAAOK,SAE1Du8D,EAAeR,EAAK7xD,EAAI,EACxBsyD,EAAgBT,EAAK5xD,EAAI,EACzBtJ,KAAKu9C,kBAAoB91C,KAAKo1B,MAAM/9B,EAAOS,MAAQ,EAAIm8D,GAAgBA,EACvE17D,KAAKw9C,kBAAoB/1C,KAAKo1B,MAAM/9B,EAAOK,OAAS,EAAIw8D,GAAiBA,EACzE37D,KAAK87D,WAAav8D,EAClBS,KAAK+7D,YAAc58D,EACnBa,KAAK4qD,cAAc1rD,UAAUc,KAAKu9C,kBAAmBv9C,KAAKw9C,mBAC1Dx9C,KAAK4qD,cAAcxrD,MAAMg+C,EAAOC,GAChCr9C,KAAKo9C,MAAQA,EACbp9C,KAAKq9C,MAAQA,GACN,IASX9H,WAAY,SAAS7xC,GACnB1D,KAAKuG,YAAY7C,GACjB1D,KAAKyG,cAAc/C,EAAQH,KAAM,QACjCvD,KAAKyG,cAAc/C,EAAQ8qB,OAAQ,UACnCxuB,KAAK8G,aAAapD,EAAQH,KAAM,QAChCvD,KAAK8G,aAAapD,EAAQ8qB,OAAQ,WAOpCzkB,UAAW,SAAS/K,GAClB,IAAIy9D,EAAqBz8D,KAAKm7C,QAAUn7C,KAAKm7C,MAAM2B,gBAC/C98C,KAAKm7C,OAASn7C,KAAKlB,QAAUE,IAAQgB,KAAKlB,OAAOu6C,WACjD1kC,EAAI3U,KAAK+4B,qBAAqB0jC,GAClCz9D,EAAI+K,UAAU4K,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,KAQhDi/B,SAAU,SAASC,GACjB,IAAIpgC,EAAsBpW,EAAOwR,OAAO4E,oBAEpC1O,EAAS,CACPY,KAA0B3F,KAAK2F,KAC/BrI,QAA0BD,EAAOC,QACjC8rC,QAA0BppC,KAAKopC,QAC/BC,QAA0BrpC,KAAKqpC,QAC/Bj/B,KAA0BK,EAAQzK,KAAKoK,KAAMqJ,GAC7CpJ,IAA0BI,EAAQzK,KAAKqK,IAAKoJ,GAC5ClU,MAA0BkL,EAAQzK,KAAKT,MAAOkU,GAC9CtU,OAA0BsL,EAAQzK,KAAKb,OAAQsU,GAC/ClQ,KAA2BvD,KAAKuD,MAAQvD,KAAKuD,KAAKqwC,SAAY5zC,KAAKuD,KAAKqwC,WAAa5zC,KAAKuD,KAC1FirB,OAA2BxuB,KAAKwuB,QAAUxuB,KAAKwuB,OAAOolB,SAAY5zC,KAAKwuB,OAAOolB,WAAa5zC,KAAKwuB,OAChGggB,YAA0B/jC,EAAQzK,KAAKwuC,YAAa/6B,GACpDwuC,gBAA0BjiD,KAAKiiD,gBAAkBjiD,KAAKiiD,gBAAgBr8C,SAAW5F,KAAKiiD,gBACtFH,cAA0B9hD,KAAK8hD,cAC/BiY,iBAA0B/5D,KAAK+5D,iBAC/BhY,eAA0B/hD,KAAK+hD,eAC/BtT,cAA0BzuC,KAAKyuC,cAC/BuT,iBAA0Bv3C,EAAQzK,KAAKgiD,iBAAkBvuC,GACzD/C,OAA0BjG,EAAQzK,KAAK0Q,OAAQ+C,GAC/C9C,OAA0BlG,EAAQzK,KAAK2Q,OAAQ8C,GAC/CzL,MAA0ByC,EAAQzK,KAAKgI,MAAOyL,GAC9CrC,MAA0BpR,KAAKoR,MAC/BC,MAA0BrR,KAAKqR,MAC/B4R,QAA0BxY,EAAQzK,KAAKijB,QAASxP,GAChDgjC,OAA2Bz2C,KAAKy2C,QAAUz2C,KAAKy2C,OAAO7C,SAAY5zC,KAAKy2C,OAAO7C,WAAa5zC,KAAKy2C,OAChG1nB,QAA0B/uB,KAAK+uB,QAC/BwoB,gBAA0Bv3C,KAAKu3C,gBAC/B9e,SAA0Bz4B,KAAKy4B,SAC/BiiC,WAA0B16D,KAAK06D,WAC/Bvd,yBAA0Bn9C,KAAKm9C,yBAC/BvsC,MAA0BnG,EAAQzK,KAAK4Q,MAAO6C,GAC9C5C,MAA0BpG,EAAQzK,KAAK6Q,MAAO4C,IAcpD,OAXIzT,KAAK84B,WACP/zB,EAAO+zB,SAAW94B,KAAK84B,SAAS8a,SAASC,GACzC9uC,EAAO+zB,SAASllB,SAAW5T,KAAK84B,SAASllB,SACzC7O,EAAO+zB,SAASgiC,mBAAqB96D,KAAK84B,SAASgiC,oBAGrDz9D,EAAOgG,KAAKqL,uBAAuB1O,KAAM+E,EAAQ8uC,GAC5C7zC,KAAKs2C,uBACRvxC,EAAS/E,KAAK08D,qBAAqB33D,IAG9BA,GAQTy5C,iBAAkB,SAAS3K,GAEzB,OAAO7zC,KAAK4zC,SAASC,IAOvB6oB,qBAAsB,SAAS33D,GAC7B,IAAI+J,EAAYzR,EAAOgG,KAAKgI,SAAStG,EAAOY,MAAMmJ,UAkBlD,OAjBsBA,EAAU6rD,gBAChBhtD,SAAQ,SAASvJ,GAClB,SAATA,GAA4B,QAATA,IAGnBW,EAAOX,KAAU0K,EAAU1K,WACtBW,EAAOX,GAE+C,mBAAjDyK,OAAOC,UAAUC,SAAShL,KAAKgB,EAAOX,KACc,mBAApDyK,OAAOC,UAAUC,SAAShL,KAAK+K,EAAU1K,KAGhB,IAAxBW,EAAOX,GAAMN,QAA2C,IAA3BgL,EAAU1K,GAAMN,eACnDiB,EAAOX,OAIXW,GAOTgK,SAAU,WACR,MAAO,YAAckR,EAAWjgB,KAAK2F,MAAQ,KAO/Cg3D,iBAAkB,WAChB,IAAIj5D,EAAUrG,EAAOgG,KAAKmN,YAAYxQ,KAAK+4B,uBAC3C,MAAO,CAAEroB,OAAQjJ,KAAKmP,IAAIlT,EAAQgN,QAASC,OAAQlJ,KAAKmP,IAAIlT,EAAQiN,UAOtE4qD,sBAAuB,WACrB,IAAIn8D,EAAQY,KAAK28D,mBAAoBjsD,EAAStR,EAAMsR,OAAQC,EAASvR,EAAMuR,OAC3E,GAAI3Q,KAAKlB,OAAQ,CACf,IAAI0kB,EAAOxjB,KAAKlB,OAAO0rC,UACnBoyB,EAAS58D,KAAKlB,OAAOi6C,mBACzBroC,GAAU8S,EAAOo5C,EACjBjsD,GAAU6S,EAAOo5C,EAEnB,MAAO,CAAElsD,OAAQA,EAAQC,OAAQA,IAOnCksD,iBAAkB,WAChB,IAAI55C,EAAUjjB,KAAKijB,QAInB,OAHIjjB,KAAKm7C,QACPl4B,GAAWjjB,KAAKm7C,MAAM0hB,oBAEjB55C,GAST9b,KAAM,SAASC,EAAKnD,GAClB,IAAI64D,EAAgC,WAAR11D,GAA4B,WAARA,EAC5C21D,EAAY/8D,KAAKoH,KAASnD,EAAO+4D,GAAmB,EAgCxD,OA9BIF,IACF74D,EAAQjE,KAAKi9D,gBAAgBh5D,IAEnB,WAARmD,GAAoBnD,EAAQ,GAC9BjE,KAAKoR,OAASpR,KAAKoR,MACnBnN,IAAU,GAEK,WAARmD,GAAoBnD,EAAQ,GACnCjE,KAAKqR,OAASrR,KAAKqR,MACnBpN,IAAU,GAEK,WAARmD,IAAoBnD,GAAWA,aAAiB5G,EAAO84C,OAG/C,UAAR/uC,GAAmBpH,KAAKm7C,OAC/Bn7C,KAAKm7C,MAAM30C,IAAI,QAASvC,GAHxBA,EAAQ,IAAI5G,EAAO84C,OAAOlyC,GAM5BjE,KAAKoH,GAAOnD,EAER84D,IACFC,EAAmBh9D,KAAKm7C,OAASn7C,KAAKm7C,MAAM+hB,aACxCl9D,KAAK46D,gBAAgBx3D,QAAQgE,IAAQ,GACvCpH,KAAKy6D,OAAQ,EACbuC,GAAoBh9D,KAAKm7C,MAAM30C,IAAI,SAAS,IAErCw2D,GAAoBh9D,KAAK26D,gBAAgBv3D,QAAQgE,IAAQ,GAChEpH,KAAKm7C,MAAM30C,IAAI,SAAS,IAGrBxG,MASTm9D,WAAY,aAUZC,qBAAsB,WACpB,OAAIp9D,KAAKlB,QAAUkB,KAAKlB,OAAOg5C,kBACtB93C,KAAKlB,OAAOg5C,kBAEdz6C,EAAOiE,QAAQsE,UASxBy3D,aAAc,WACZ,OAAwB,IAAjBr9D,KAAKijB,UACRjjB,KAAKT,QAAUS,KAAKb,QAA+B,IAArBa,KAAKwuC,cACpCxuC,KAAK+uB,SAOVmkB,OAAQ,SAASl0C,GAEXgB,KAAKq9D,gBAGLr9D,KAAKlB,QAAUkB,KAAKlB,OAAOq5C,gBAAkBn4C,KAAKm7C,QAAUn7C,KAAKs9D,eAGrEt+D,EAAI0Q,OACJ1P,KAAKu9D,yBAAyBv+D,GAC9BgB,KAAKw9D,wBAAwBx+D,GAC7BgB,KAAK+J,UAAU/K,GACfgB,KAAKy9D,YAAYz+D,GACjBgB,KAAKuiD,WAAWvjD,EAAKgB,MACjBA,KAAK68C,eACP78C,KAAK+8C,cACL/8C,KAAK09D,kBAAkB1+D,KAGvBgB,KAAK29D,qBACL39D,KAAKy6D,OAAQ,EACbz6D,KAAK49D,WAAW5+D,GACZgB,KAAK05D,eAAiB15D,KAAKu6D,gBAC7Bv6D,KAAKo1D,UAAU,CAAEyI,YAAa,qBAGlC7+D,EAAI6Q,YAGNktC,YAAa,SAASr5C,GACpBA,EAAUA,GAAW,GAChB1D,KAAKs9C,cACRt9C,KAAKwnD,qBAEHxnD,KAAK89D,iBACP99D,KAAKu6D,gBAAkBv6D,KAAKo1D,UAAU,CAAEyI,YAAa,oBACrD79D,KAAK49D,WAAW59D,KAAK4qD,cAAelnD,EAAQs5C,aAC5Ch9C,KAAKy6D,OAAQ,IAOjBkD,mBAAoB,WAClB39D,KAAKs9C,aAAe,KACpBt9C,KAAK87D,WAAa,EAClB97D,KAAK+7D,YAAc,GAarBgC,UAAW,WACT,OAAO/9D,KAAKwuB,QAA0B,gBAAhBxuB,KAAKwuB,QAAiD,IAArBxuB,KAAKwuC,aAa9DwvB,QAAS,WACP,OAAOh+D,KAAKuD,MAAsB,gBAAdvD,KAAKuD,MAW3B06D,iBAAkB,WAChB,QAAwB,WAApBj+D,KAAK06D,aACP16D,KAAKg+D,YAAah+D,KAAK+9D,aAAsC,kBAAhB/9D,KAAKy2C,WAGhDz2C,KAAK84B,UAeX+jB,YAAa,WAKX,OAJA78C,KAAKk+D,WAAal+D,KAAKi+D,oBACrBj+D,KAAK05D,iBACH15D,KAAKm7C,QAAUn7C,KAAKm7C,MAAM+hB,cAEvBl9D,KAAKk+D,YAQdC,eAAgB,WACd,QAASn+D,KAAKy2C,SAAmC,IAAxBz2C,KAAKy2C,OAAO7L,SAAyC,IAAxB5qC,KAAKy2C,OAAO5L,UAOpEuzB,oBAAqB,SAASp/D,GAC5B,IAAIsP,EAAOtO,KAAK84B,SAWhB,GAVA95B,EAAI0Q,OAGApB,EAAKsF,SACP5U,EAAIm+C,yBAA2B,kBAG/Bn+C,EAAIm+C,yBAA2B,iBAG7B7uC,EAAKwsD,mBAAoB,CAC3B,IAAInmD,EAAItX,EAAOgG,KAAKiH,gBAAgBtK,KAAK+4B,uBACzC/5B,EAAI+K,UAAU4K,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEhDrG,EAAKvE,UAAU/K,GACfA,EAAII,MAAM,EAAIkP,EAAK8uC,MAAO,EAAI9uC,EAAK+uC,OACnCr+C,EAAIM,UAAUgP,EAAKgvC,cAAehvC,EAAKivC,mBAAoBjvC,EAAKkvC,mBAChEx+C,EAAI6Q,WAON+tD,WAAY,SAAS5+D,EAAKg+C,GACxB,IAAIqhB,EAAer+D,KAAKuD,KAAM+6D,EAAiBt+D,KAAKwuB,OAChDwuB,GACFh9C,KAAKuD,KAAO,QACZvD,KAAKwuB,OAAS,GACdxuB,KAAKu+D,uBAAuBv/D,IAG5BgB,KAAK08C,kBAAkB19C,GAEzBgB,KAAK2jD,QAAQ3kD,GACbgB,KAAKw+D,cAAcx/D,GACnBgB,KAAKuD,KAAO86D,EACZr+D,KAAKwuB,OAAS8vC,GAGhBE,cAAe,SAASx/D,GACtB,IAAIsP,EAAOtO,KAAK84B,SACXxqB,IAILA,EAAKxP,OAASkB,KAAKlB,OACnBwP,EAAKuuC,cACLvuC,EAAKwuC,gBAAiB,EACtBxuC,EAAKyuC,YAAY,CAAEC,aAAa,IAChCh9C,KAAKo+D,oBAAoBp/D,KAO3B0+D,kBAAmB,SAAS1+D,GAC1BA,EAAII,MAAM,EAAIY,KAAKo9C,MAAO,EAAIp9C,KAAKq9C,OACnCr+C,EAAIM,UAAUU,KAAKs9C,cAAet9C,KAAKu9C,mBAAoBv9C,KAAKw9C,oBAQlEsgB,aAAc,SAASW,GACrB,GAAIz+D,KAAKq9D,eACP,OAAO,EAET,GAAIr9D,KAAKs9C,eAAiBmhB,GAAcz+D,KAAKg7D,qBAE3C,OAAO,EAGP,GAAIh7D,KAAKy6D,OACNz6D,KAAK84B,UAAY94B,KAAK84B,SAASgiC,oBAC/B96D,KAAKu6D,gBAAkBv6D,KAAK20D,gBAAgB,mBAC7C,CACA,GAAI30D,KAAKs9C,eAAiBmhB,EAAY,CACpC,IAAIl/D,EAAQS,KAAK87D,WAAa97D,KAAKo9C,MAC/Bj+C,EAASa,KAAK+7D,YAAc/7D,KAAKq9C,MACrCr9C,KAAK4qD,cAAc7O,WAAWx8C,EAAQ,GAAIJ,EAAS,EAAGI,EAAOJ,GAE/D,OAAO,EAGX,OAAO,GAQTu9C,kBAAmB,SAAS19C,GAC1B,GAAKgB,KAAKu3C,gBAAV,CAGA,IAAIvL,EAAMhsC,KAAK0+D,+BACf1/D,EAAImxC,UAAYnwC,KAAKu3C,gBAErBv4C,EAAI2nD,UACD3a,EAAI3iC,EAAI,GACR2iC,EAAI1iC,EAAI,EACT0iC,EAAI3iC,EACJ2iC,EAAI1iC,GAINtJ,KAAK2+D,cAAc3/D,KAOrBy+D,YAAa,SAASz+D,GAChBgB,KAAKm7C,QAAUn7C,KAAKm7C,MAAM2B,eAC5B99C,EAAI0nD,YAAc1mD,KAAK68D,mBAGvB79D,EAAI0nD,aAAe1mD,KAAKijB,SAI5B27C,iBAAkB,SAAS5/D,EAAK6/D,GAC9B,IAAIrwC,EAASqwC,EAAKrwC,OACdA,IACFxvB,EAAIsxC,UAAYuuB,EAAKrwB,YACrBxvC,EAAImjD,QAAU0c,EAAK/c,cACnB9iD,EAAI8/D,eAAiBD,EAAK9E,iBAC1B/6D,EAAIqjD,SAAWwc,EAAK9c,eACpB/iD,EAAIojD,WAAayc,EAAK7c,iBAClBxzB,EAAOkmB,OACoB,eAAzBlmB,EAAOglB,eAAkChlB,EAAOuwC,mBAAqBvwC,EAAO8mB,iBAK9Et1C,KAAKg/D,oCAAoChgE,EAAKwvB,IAI9CxvB,EAAIqxC,YAAc7hB,EAAOkmB,OAAO11C,EAAKgB,MACrCA,KAAKi/D,+BAA+BjgE,EAAKwvB,IAK3CxvB,EAAIqxC,YAAcwuB,EAAKrwC,SAK7B0wC,eAAgB,SAASlgE,EAAK6/D,GAC5B,IAAIt7D,EAAOs7D,EAAKt7D,KACZA,IACEA,EAAKmxC,QACP11C,EAAImxC,UAAY5sC,EAAKmxC,OAAO11C,EAAKgB,MACjCA,KAAKi/D,+BAA+BjgE,EAAK6/D,EAAKt7D,OAG9CvE,EAAImxC,UAAY5sC,IAKtBg7D,uBAAwB,SAASv/D,GAC/BA,EAAI0nD,YAAc,EAClB1nD,EAAIqxC,YAAc,cAClBrxC,EAAImxC,UAAY,WAUlBmc,aAAc,SAASttD,EAAKmgE,EAAWC,GAChCD,GAAkC,IAArBA,EAAUr7D,SAIxB,EAAIq7D,EAAUr7D,QAChBq7D,EAAU96D,KAAKK,MAAMy6D,EAAWA,GAE9B1F,EACFz6D,EAAIyiD,YAAY0d,GAGhBC,GAAeA,EAAYpgE,KAS/BuwD,gBAAiB,SAASvwD,EAAKywC,GAC7B,IAEI/rC,EAAS27D,EAAaziB,EAFtB9B,EAAM96C,KAAKo9D,uBACX3rD,EAASzR,KAAK+4B,sBAGlBsmC,EAAkD,qBADlD5vB,EAAgBA,GAAiB,IACE2qB,WAA6B3qB,EAAc2qB,WAAap6D,KAAKo6D,WAChGxd,EAAoD,qBAA9BnN,EAAc0qB,YAA8B1qB,EAAc0qB,YAAcn6D,KAAKm6D,YACnG1oD,EAASpU,EAAOgG,KAAKgN,0BAA0ByqC,EAAKrpC,GACpD/N,EAAUrG,EAAOgG,KAAKmN,YAAYiB,GAClCzS,EAAI0Q,OACJ1Q,EAAIE,UAAUwE,EAAQoN,WAAYpN,EAAQqN,YAC1C/R,EAAIsxC,UAAY,EAAItwC,KAAKi6D,kBACpBj6D,KAAKm7C,QACRn8C,EAAI0nD,YAAc1mD,KAAKm0D,SAAWn0D,KAAKg6D,wBAA0B,GAE/DvqB,EAAc6vB,oBAChBtgE,EAAI4Q,OAAOlH,EAAiBhF,EAAQsE,QACpCq3D,GAAer/D,KAAKu/D,mBAAmBvgE,EAAK0E,EAAS+rC,KAGrDzwC,EAAI4Q,OAAOlH,EAAiB1I,KAAKgI,QACjCq3D,GAAer/D,KAAKq/D,YAAYrgE,EAAKywC,IAEvCmN,GAAgB58C,KAAK48C,aAAa59C,EAAKywC,GACvCzwC,EAAI6Q,WAON0yC,WAAY,SAASvjD,GACnB,GAAKgB,KAAKy2C,OAAV,CAIA,IAAgD+oB,EAA5C/oB,EAASz2C,KAAKy2C,OAAQ33C,EAASkB,KAAKlB,OACpC2gE,EAAS3gE,GAAUA,EAAOg5C,kBAAkB,IAAO,EACnD4nB,EAAS5gE,GAAUA,EAAOg5C,kBAAkB,IAAO,EAErD0nB,EADE/oB,EAAOF,WACC,CAAE7lC,OAAQ,EAAGC,OAAQ,GAGrB3Q,KAAK28D,mBAEb79D,GAAUA,EAAOg6C,qBACnB2mB,GAASpiE,EAAO0E,iBAChB29D,GAASriE,EAAO0E,kBAElB/C,EAAIwjD,YAAc/L,EAAOprB,MACzBrsB,EAAIyjD,WAAahM,EAAOL,KAAO/4C,EAAO6E,2BACnCu9D,EAAQC,IAAUF,EAAQ9uD,OAAS8uD,EAAQ7uD,QAAU,EACxD3R,EAAI0jD,cAAgBjM,EAAO7L,QAAU60B,EAAQD,EAAQ9uD,OACrD1R,EAAI2jD,cAAgBlM,EAAO5L,QAAU60B,EAAQF,EAAQ7uD,SAOvDguD,cAAe,SAAS3/D,GACjBgB,KAAKy2C,SAIVz3C,EAAIwjD,YAAc,GAClBxjD,EAAIyjD,WAAazjD,EAAI0jD,cAAgB1jD,EAAI2jD,cAAgB,IAU3Dsc,+BAAgC,SAASjgE,EAAK0H,GAC5C,IAAKA,IAAWA,EAAOguC,OACrB,MAAO,CAAE9J,QAAS,EAAGC,QAAS,GAEhC,IAAIlhC,EAAIjD,EAAO6sC,mBAAqB7sC,EAAO4uC,iBACvC1K,GAAW5qC,KAAKT,MAAQ,EAAImH,EAAOkkC,SAAW,EAC9CC,GAAW7qC,KAAKb,OAAS,EAAIuH,EAAOmkC,SAAW,EAWnD,MAT6B,eAAzBnkC,EAAO8sC,cACTx0C,EAAI+K,UAAU/J,KAAKT,MAAO,EAAG,EAAGS,KAAKb,OAAQyrC,EAASC,GAGtD7rC,EAAI+K,UAAU,EAAG,EAAG,EAAG,EAAG6gC,EAASC,GAEjClhC,GACF3K,EAAI+K,UAAUJ,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEzC,CAAEihC,QAASA,EAASC,QAASA,IAOtC80B,oBAAqB,SAAS3gE,GACJ,WAApBgB,KAAK06D,YACP16D,KAAK4/D,cAAc5gE,GACnBgB,KAAK6/D,YAAY7gE,KAGjBgB,KAAK6/D,YAAY7gE,GACjBgB,KAAK4/D,cAAc5gE,KAWvB2kD,QAAS,aAQTkc,YAAa,SAAS7gE,GACfgB,KAAKuD,OAIVvE,EAAI0Q,OACJ1P,KAAKk/D,eAAelgE,EAAKgB,MACH,YAAlBA,KAAKy4B,SACPz5B,EAAIuE,KAAK,WAGTvE,EAAIuE,OAENvE,EAAI6Q,YAON+vD,cAAe,SAAS5gE,GACtB,GAAKgB,KAAKwuB,QAA+B,IAArBxuB,KAAKwuC,YAAzB,CASA,GALIxuC,KAAKy2C,SAAWz2C,KAAKy2C,OAAOJ,cAC9Br2C,KAAK2+D,cAAc3/D,GAGrBA,EAAI0Q,OACA1P,KAAKyuC,eAAiBzuC,KAAKm7C,MAAO,CACpC,IAAIqkB,EAAUx/D,KAAK28D,mBACnB39D,EAAII,MAAM,EAAIogE,EAAQ9uD,OAAQ,EAAI8uD,EAAQ7uD,aAEnC3Q,KAAKyuC,eACZzvC,EAAII,MAAM,EAAIY,KAAK0Q,OAAQ,EAAI1Q,KAAK2Q,QAEtC3Q,KAAKssD,aAAattD,EAAKgB,KAAKiiD,gBAAiBjiD,KAAK8/D,qBAClD9/D,KAAK4+D,iBAAiB5/D,EAAKgB,MAC3BhB,EAAIwvB,SACJxvB,EAAI6Q,YAcNmvD,oCAAqC,SAAShgE,EAAK0H,GACjD,IACiDq5D,EAD7C7E,EAAOl7D,KAAKi7D,gBAAgBj7D,KAAKq7D,6BACjC2E,EAAU3iE,EAAOgG,KAAKyM,sBAA6B+9C,EAAgB7tD,KAAKlB,OAAOi6C,mBAC/Ex5C,EAAQ27D,EAAK7xD,EAAIrJ,KAAK0Q,OAASm9C,EAAe1uD,EAAS+7D,EAAK5xD,EAAItJ,KAAK2Q,OAASk9C,EAClFmS,EAAQzgE,MAAQA,EAChBygE,EAAQ7gE,OAASA,GACjB4gE,EAAOC,EAAQ/gE,WAAW,OACrBsxC,YAAawvB,EAAKpwD,OAAO,EAAG,GAAIowD,EAAKpiB,OAAOp+C,EAAO,GAAIwgE,EAAKpiB,OAAOp+C,EAAOJ,GAC/E4gE,EAAKpiB,OAAO,EAAGx+C,GAAS4gE,EAAKniB,YAC7BmiB,EAAK7gE,UAAUK,EAAQ,EAAGJ,EAAS,GACnC4gE,EAAK3gE,MACH87D,EAAK9d,MAAQp9C,KAAK0Q,OAASm9C,EAC3BqN,EAAK7d,MAAQr9C,KAAK2Q,OAASk9C,GAE7B7tD,KAAKi/D,+BAA+Bc,EAAMr5D,GAC1Cq5D,EAAK5vB,UAAYzpC,EAAOguC,OAAO11C,GAC/B+gE,EAAKx8D,OACLvE,EAAIE,WAAWc,KAAKT,MAAQ,EAAIS,KAAKwuC,YAAc,GAAIxuC,KAAKb,OAAS,EAAIa,KAAKwuC,YAAc,GAC5FxvC,EAAII,MACFyuD,EAAgB7tD,KAAK0Q,OAASwqD,EAAK9d,MACnCyQ,EAAgB7tD,KAAK2Q,OAASuqD,EAAK7d,OAErCr+C,EAAIqxC,YAAc0vB,EAAK7pB,cAAc8pB,EAAS,cAShDC,uBAAwB,WACtB,MAAO,CAAE52D,EAAGrJ,KAAKoK,KAAOpK,KAAKT,MAAQ,EAAG+J,EAAGtJ,KAAKqK,IAAMrK,KAAKb,OAAS,IAUtE+gE,4BAA6B,WAC3B,GAAIlgE,KAAKsU,gBAAiB,CACxB,IAAI5Q,EAAUrG,EAAOgG,KAAKmN,YAAYxQ,KAAKsU,iBAC3CtU,KAAKoR,OAAQ,EACbpR,KAAKqR,OAAQ,EACbrR,KAAKwG,IAAI,SAAU9C,EAAQgN,QAC3B1Q,KAAKwG,IAAI,SAAU9C,EAAQiN,QAC3B3Q,KAAKgI,MAAQtE,EAAQsE,MACrBhI,KAAK4Q,MAAQlN,EAAQkN,MACrB5Q,KAAK6Q,MAAQ,IAWjBinB,uBAAwB,SAASqoC,GAC/B,IAAIlsD,EAASjU,KAAKigE,yBACdjgE,KAAKsU,kBACPtU,KAAKkgE,8BACLjsD,EAAS5W,EAAOgG,KAAKoG,eAAewK,EAAQjU,KAAKsU,kBAEnDtU,KAAKsU,gBAAkB,KACnB6rD,IACFngE,KAAK0Q,QAAUyvD,EAA2BzvD,OAC1C1Q,KAAK2Q,QAAUwvD,EAA2BxvD,OAC1C3Q,KAAKogE,MAAQD,EAA2BC,MACxCpgE,KAAKqgE,MAAQF,EAA2BE,MACxCpsD,EAAO5K,GAAK82D,EAA2BG,WACvCrsD,EAAO3K,GAAK62D,EAA2BI,UACvCvgE,KAAKT,MAAQ4gE,EAA2B5gE,MACxCS,KAAKb,OAASghE,EAA2BhhE,QAE3Ca,KAAKkU,oBAAoBD,EAAQ,SAAU,WAQ7CuL,MAAO,SAASha,EAAUquC,GACxB,IAAI2sB,EAAaxgE,KAAK4zC,SAASC,GAC3B7zC,KAAK8gB,YAAYlT,WACnB5N,KAAK8gB,YAAYlT,WAAW4yD,EAAYh7D,GAGxCnI,EAAOwR,OAAO4xD,YAAY,SAAUD,EAAYh7D,IAyBpDk7D,aAAc,SAASl7D,EAAU9B,GAC/B,IAAIwM,EAAWlQ,KAAK03D,gBAAgBh0D,GAIpC,OAHI8B,GACFA,EAAS,IAAInI,EAAOu6B,MAAM1nB,IAErBlQ,MAgBT03D,gBAAiB,SAASh0D,GACxBA,IAAYA,EAAU,IAEtB,IAAIi9D,EAAQtjE,EAAOgG,KAAMu9D,EAAaD,EAAM/uD,oBAAoB5R,MAC5D6gE,EAAgB7gE,KAAKm7C,MACrB2lB,EAAiB9gE,KAAKy2C,OAAQ7/B,EAAMnP,KAAKmP,IACzC83B,GAAchrC,EAAQgrC,YAAc,IAAMhrC,EAAQu0C,oBAAsB56C,EAAO0E,iBAAmB,UAC/F/B,KAAKm7C,MACRz3C,EAAQq9D,kBACVJ,EAAMjvD,qBAAqB1R,MAEzB0D,EAAQs9D,gBACVhhE,KAAKy2C,OAAS,MAGhB,IAG0B+oB,EACS/c,EAC/BljD,EAAOJ,EALPqlB,EAAKnnB,EAAOgG,KAAKyM,sBAEjBmxD,EAAejhE,KAAKkhE,iBAAgB,GAAM,GAC1CzqB,EAASz2C,KAAKy2C,OACd0qB,EAAe,CAAE93D,EAAG,EAAGC,EAAG,GAG1BmtC,IACFgM,EAAahM,EAAOL,KAElBopB,EADE/oB,EAAOF,WACC,CAAE7lC,OAAQ,EAAGC,OAAQ,GAGrB3Q,KAAK28D,mBAGjBwE,EAAa93D,EAAI,EAAI5B,KAAKo1B,MAAMjmB,EAAI6/B,EAAO7L,SAAW6X,GAAe7rC,EAAI4oD,EAAQ9uD,QACjFywD,EAAa73D,EAAI,EAAI7B,KAAKo1B,MAAMjmB,EAAI6/B,EAAO5L,SAAW4X,GAAe7rC,EAAI4oD,EAAQ7uD,SAEnFpR,EAAQ0hE,EAAa1hE,MAAQ4hE,EAAa93D,EAC1ClK,EAAS8hE,EAAa9hE,OAASgiE,EAAa73D,EAG5Ckb,EAAGjlB,MAAQkI,KAAK+P,KAAKjY,GACrBilB,EAAGrlB,OAASsI,KAAK+P,KAAKrY,GACtB,IAAIL,EAAS,IAAIzB,EAAO05C,aAAavyB,EAAI,CACvCyzB,qBAAqB,EACrBrzC,mBAAmB,EACnBuzC,eAAe,IAEM,SAAnBz0C,EAAQyM,SACVrR,EAAOy4C,gBAAkB,QAE3Bv3C,KAAKkU,oBAAoB,IAAI7W,EAAO+L,MAAMtK,EAAOS,MAAQ,EAAGT,EAAOK,OAAS,GAAI,SAAU,UAE1F,IAAIiiE,EAAiBphE,KAAKlB,OAC1BA,EAAO2F,IAAIzE,MACX,IAAIkQ,EAAWpR,EAAO44D,gBAAgBhpB,GAAc,EAAGhrC,GAcvD,OAbA1D,KAAKy2C,OAASqqB,EACd9gE,KAAKwG,IAAI,SAAU46D,GACfP,IACF7gE,KAAKm7C,MAAQ0lB,GAEf7gE,KAAKwG,IAAIo6D,GAAYxlB,YAIrBt8C,EAAO0F,SAAW,GAClB1F,EAAOuiD,UACPviD,EAAS,KAEFoR,GAkBTD,UAAW,SAASvM,GAElB,OADAA,IAAYA,EAAU,IACfrG,EAAOgG,KAAK4M,UAAUjQ,KAAK03D,gBAAgBh0D,GAAUA,EAAQyM,QAAU,MAAOzM,EAAQ0M,SAAW,IAQ1GixD,OAAQ,SAAS17D,GACf,OAAO3F,KAAK2F,OAASA,GAOvBO,WAAY,WACV,OAAO,GAQTw7C,OAAQ,SAAS7N,GAEf,OAAO7zC,KAAK4zC,SAASC,IASvBjkC,OAAQ,SAAS5H,GACf,IAAIs5D,GAAuC,WAAjBthE,KAAKopC,SAAyC,WAAjBppC,KAAKqpC,UAAyBrpC,KAAK0nD,iBAY1F,OAVI4Z,GACFthE,KAAKuhE,qBAGPvhE,KAAKwG,IAAI,QAASwB,GAEds5D,GACFthE,KAAKwhE,eAGAxhE,MASTyhE,QAAS,WAEP,OADAzhE,KAAKlB,QAAUkB,KAAKlB,OAAOg/C,cAAc99C,MAClCA,MAST0hE,gBAAiB,WAEf,OADA1hE,KAAKlB,QAAUkB,KAAKlB,OAAOu/C,sBAAsBr+C,MAC1CA,MAST2hE,QAAS,WAEP,OADA3hE,KAAKlB,QAAUkB,KAAKlB,OAAOk/C,cAAch+C,MAClCA,MAST4hE,gBAAiB,WAEf,OADA5hE,KAAKlB,QAAUkB,KAAKlB,OAAOw/C,sBAAsBt+C,MAC1CA,MASTiU,OAAQ,WAEN,OADAjU,KAAKlB,QAAUkB,KAAKlB,OAAOm/C,aAAaj+C,MACjCA,MAST6hE,eAAgB,WAEd,OADA7hE,KAAKlB,QAAUkB,KAAKlB,OAAOo/C,qBAAqBl+C,MACzCA,MAST8hE,gBAAiB,SAASh4B,EAAGC,GAC3BA,EAAUA,GAAW/pC,KAAKlB,OAAOqjB,WAAW2nB,GAC5C,IAAIi4B,EAAW,IAAI1kE,EAAO+L,MAAM2gC,EAAQ1gC,EAAG0gC,EAAQzgC,GAC/C04D,EAAgBhiE,KAAKonD,oBAKzB,OAJIpnD,KAAKgI,QACP+5D,EAAW1kE,EAAOgG,KAAKyF,YACrBi5D,EAAUC,EAAet5D,GAAkB1I,KAAKgI,SAE7C,CACLqB,EAAG04D,EAAS14D,EAAI24D,EAAc34D,EAC9BC,EAAGy4D,EAASz4D,EAAI04D,EAAc14D,IASlCi0D,yBAA0B,SAAUv+D,GAC9BgB,KAAKm9C,2BACPn+C,EAAIm+C,yBAA2Bn9C,KAAKm9C,6BAK1C9/C,EAAOgG,KAAK4+D,iBAAmB5kE,EAAOgG,KAAK4+D,gBAAgB5kE,EAAOwR,QAElEuQ,EAAO/hB,EAAOwR,OAAOC,UAAWzR,EAAOmG,YAUvCnG,EAAOwR,OAAO4E,oBAAsB,EAEpCpW,EAAOwR,OAAO4xD,YAAc,SAASh8C,EAAW1f,EAAQS,EAAU08D,GAChE,IAAIvhD,EAAQtjB,EAAOonB,GACnB1f,EAASya,EAAMza,GAAQ,GACvB1H,EAAOgG,KAAKyK,gBAAgB,CAAC/I,EAAOxB,KAAMwB,EAAOypB,SAAS,SAASzgB,GACtC,qBAAhBA,EAAS,KAClBhJ,EAAOxB,KAAOwK,EAAS,IAEE,qBAAhBA,EAAS,KAClBhJ,EAAOypB,OAASzgB,EAAS,IAE3B1Q,EAAOgG,KAAKgK,eAAe,CAACtI,EAAO+zB,WAAW,SAASqpC,GACrDp9D,EAAO+zB,SAAWqpC,EAAa,GAC/B,IAAIttB,EAAWqtB,EAAa,IAAIvhD,EAAM5b,EAAOm9D,GAAan9D,GAAU,IAAI4b,EAAM5b,GAC9ES,GAAYA,EAASqvC,UAW3Bx3C,EAAOwR,OAAOilB,MAAQ,GAn7DxB,CAo7DoCv2B,GAGpC,WAEE,IAAImL,EAAmBrL,EAAOgG,KAAKqF,iBAC/B05D,EAAgB,CACdh4D,MAAO,GACP6J,OAAQ,EACRs0B,MAAO,IAET85B,EAAgB,CACdh4D,KAAM,GACN4J,OAAQ,EACRq0B,OAAQ,IAGdjrC,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAWvFwzD,uBAAwB,SAASv5D,EAAOw5D,EAAaC,EAAaC,EAAWC,GAC3E,IAEI93B,EAASC,EAASmB,EAFlB3iC,EAAIN,EAAMM,EACVC,EAAIP,EAAMO,EAyCd,MAtC2B,kBAAhBi5D,EACTA,EAAcH,EAAcG,GAG5BA,GAAe,GAGQ,kBAAdE,EACTA,EAAYL,EAAcK,GAG1BA,GAAa,GAKY,kBAAhBD,EACTA,EAAcH,EAAcG,GAG5BA,GAAe,GAGQ,kBAAdE,EACTA,EAAYL,EAAcK,GAG1BA,GAAa,GAGf73B,EAAU63B,EAAYF,IAhBtB53B,EAAU63B,EAAYF,IAkBP13B,KACbmB,EAAMhsC,KAAKqrC,4BACXhiC,EAAIN,EAAMM,EAAIuhC,EAAUoB,EAAI3iC,EAC5BC,EAAIP,EAAMO,EAAIuhC,EAAUmB,EAAI1iC,GAGvB,IAAIjM,EAAO+L,MAAMC,EAAGC,IAU7Bq5D,uBAAwB,SAAS55D,EAAOqgC,EAASC,GAC/C,IAAI3/B,EAAI1J,KAAKsiE,uBAAuBv5D,EAAOqgC,EAASC,EAAS,SAAU,UACvE,OAAIrpC,KAAKgI,MACA3K,EAAOgG,KAAKyF,YAAYY,EAAGX,EAAOL,EAAiB1I,KAAKgI,QAE1D0B,GAUT0gC,uBAAwB,SAASn2B,EAAQm1B,EAASC,GAChD,IAAI3/B,EAAI1J,KAAKsiE,uBAAuBruD,EAAQ,SAAU,SAAUm1B,EAASC,GACzE,OAAIrpC,KAAKgI,MACA3K,EAAOgG,KAAKyF,YAAYY,EAAGuK,EAAQvL,EAAiB1I,KAAKgI,QAE3D0B,GAOTwgC,eAAgB,WACd,IAAI04B,EAAU,IAAIvlE,EAAO+L,MAAMpJ,KAAKoK,KAAMpK,KAAKqK,KAC/C,OAAOrK,KAAK2iE,uBAAuBC,EAAS5iE,KAAKopC,QAASppC,KAAKqpC,UAkBjEw5B,iBAAkB,SAASz5B,EAASC,GAClC,IAAIp1B,EAASjU,KAAKkqC,iBAClB,OAAOlqC,KAAKoqC,uBAAuBn2B,EAAQm1B,EAASC,IAUtDsB,aAAc,SAAS5hC,EAAOqgC,EAASC,GACrC,IACI3/B,EAAG05C,EADHnvC,EAASjU,KAAKkqC,iBAclB,OAVExgC,EADqB,qBAAZ0/B,GAA8C,qBAAZC,EACvCrpC,KAAKsiE,uBAAuBruD,EAAQ,SAAU,SAAUm1B,EAASC,GAGjE,IAAIhsC,EAAO+L,MAAMpJ,KAAKoK,KAAMpK,KAAKqK,KAGvC+4C,EAAK,IAAI/lD,EAAO+L,MAAML,EAAMM,EAAGN,EAAMO,GACjCtJ,KAAKgI,QACPo7C,EAAK/lD,EAAOgG,KAAKyF,YAAYs6C,EAAInvC,GAASvL,EAAiB1I,KAAKgI,SAE3Do7C,EAAGn6C,eAAeS,IAmB3BwK,oBAAqB,SAASkX,EAAKge,EAASC,GAC1C,IAAIp1B,EAASjU,KAAK2iE,uBAAuBv3C,EAAKge,EAASC,GACnDr8B,EAAWhN,KAAKoqC,uBAAuBn2B,EAAQjU,KAAKopC,QAASppC,KAAKqpC,SACtErpC,KAAKwG,IAAI,OAAQwG,EAAS3D,GAC1BrJ,KAAKwG,IAAI,MAAOwG,EAAS1D,IAM3Bw5D,eAAgB,SAASC,GACvB,IAIIC,EAAYC,EAJZj7D,EAAQU,EAAiB1I,KAAKgI,OAC9Bk7D,EAAYljE,KAAKmjE,iBACjBC,EAAQ/lE,EAAOgG,KAAK0E,IAAIC,GAASk7D,EACjCG,EAAQhmE,EAAOgG,KAAK4E,IAAID,GAASk7D,EAKnCF,EAD0B,kBAAjBhjE,KAAKopC,QACDg5B,EAAcpiE,KAAKopC,SAGnBppC,KAAKopC,QAAU,GAG5B65B,EADgB,kBAAPF,EACEX,EAAcW,GAGdA,EAAK,GAElB/iE,KAAKoK,MAAQg5D,GAASH,EAAWD,GACjChjE,KAAKqK,KAAOg5D,GAASJ,EAAWD,GAChChjE,KAAKo7C,YACLp7C,KAAKopC,QAAU25B,GAQjBxB,mBAAoB,WAClBvhE,KAAKsjE,iBAAmBtjE,KAAKopC,QAC7BppC,KAAKujE,iBAAmBvjE,KAAKqpC,QAE7B,IAAIp1B,EAASjU,KAAKkqC,iBAElBlqC,KAAKopC,QAAU,SACfppC,KAAKqpC,QAAU,SAEfrpC,KAAKoK,KAAO6J,EAAO5K,EACnBrJ,KAAKqK,IAAM4J,EAAO3K,GAQpBk4D,aAAc,WACZ,IAAIgC,EAAcxjE,KAAKoqC,uBACrBpqC,KAAKkqC,iBACLlqC,KAAKsjE,iBACLtjE,KAAKujE,kBAEPvjE,KAAKopC,QAAUppC,KAAKsjE,iBACpBtjE,KAAKqpC,QAAUrpC,KAAKujE,iBAEpBvjE,KAAKoK,KAAOo5D,EAAYn6D,EACxBrJ,KAAKqK,IAAMm5D,EAAYl6D,EAEvBtJ,KAAKsjE,iBAAmB,KACxBtjE,KAAKujE,iBAAmB,MAM1Bnc,kBAAmB,WACjB,OAAOpnD,KAAKoqC,uBAAuBpqC,KAAKkqC,iBAAkB,OAAQ,UA1PxE,GAiQA,WAWE,IAAI7mC,EAAOhG,EAAOgG,KACdqF,EAAmBrF,EAAKqF,iBACxB+6D,EAAmBpgE,EAAKgN,0BACxB5G,EAAiBpG,EAAKoG,eAE1BpG,EAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAYhF40D,QAAS,KAcTC,QAAS,KAQTC,WAAY,KAKZC,eAAgB,KAKhBC,YAAa,KAMb/7B,SAAU,GAQVg8B,WAAY,SAASC,EAAUC,GAC7B,OAAIA,EACMD,EAAWhkE,KAAKkkE,cAAgBlkE,KAAKmkE,kBAE1CnkE,KAAK2jE,SAAY3jE,KAAK4jE,YACzB5jE,KAAKo7C,WAAU,GAET4oB,EAAWhkE,KAAK2jE,QAAU3jE,KAAK4jE,aASzCQ,UAAW,SAASJ,EAAUC,GAC5B,OAzFqB5qD,EAyFErZ,KAAK+jE,WAAWC,EAAUC,GAxF5C,CACL,IAAI5mE,EAAO+L,MAAMiQ,EAAOy5B,GAAGzpC,EAAGgQ,EAAOy5B,GAAGxpC,GACxC,IAAIjM,EAAO+L,MAAMiQ,EAAO05B,GAAG1pC,EAAGgQ,EAAO05B,GAAGzpC,GACxC,IAAIjM,EAAO+L,MAAMiQ,EAAO45B,GAAG5pC,EAAGgQ,EAAO45B,GAAG3pC,GACxC,IAAIjM,EAAO+L,MAAMiQ,EAAO25B,GAAG3pC,EAAGgQ,EAAO25B,GAAG1pC,IAL5C,IAAyB+P,GAoGvBm+C,mBAAoB,SAAS6M,EAASC,EAASN,EAAUC,GACvD,IAAI5qD,EAASrZ,KAAKokE,UAAUJ,EAAUC,GAMtC,MAA+B,iBALZ5mE,EAAOm9B,aAAamB,0BACjCtiB,EACAgrD,EACAC,GAEc7pC,QAUtBwmB,qBAAsB,SAASsjB,EAAOP,EAAUC,GAM9C,MAA+B,iBALZ5mE,EAAOm9B,aAAagB,wBACrCx7B,KAAKokE,UAAUJ,EAAUC,GACzBM,EAAMH,UAAUJ,EAAUC,IAGRxpC,QACf8pC,EAAMrjB,wBAAwBlhD,KAAMgkE,EAAUC,IAC9CjkE,KAAKkhD,wBAAwBqjB,EAAOP,EAAUC,IAUrD/iB,wBAAyB,SAASqjB,EAAOP,EAAUC,GAIjD,IAHA,IAAIn6D,EAAS9J,KAAKokE,UAAUJ,EAAUC,GAClCO,EAAcR,EAAWO,EAAMZ,QAAUY,EAAMX,WAC/ChgE,EAAI,EAAG6gE,EAAQF,EAAMG,eAAeF,GACjC5gE,EAAI,EAAGA,IACZ,IAAK2gE,EAAMtX,cAAcnjD,EAAOlG,GAAI6gE,GAClC,OAAO,EAGX,OAAO,GAWThN,sBAAuB,SAAS4M,EAASC,EAASN,EAAUC,GAC1D,IAAIhD,EAAejhE,KAAKkhE,gBAAgB8C,EAAUC,GAElD,OACEhD,EAAa72D,MAAQi6D,EAAQh7D,GAC7B43D,EAAa72D,KAAO62D,EAAa1hE,OAAS+kE,EAAQj7D,GAClD43D,EAAa52D,KAAOg6D,EAAQ/6D,GAC5B23D,EAAa52D,IAAM42D,EAAa9hE,QAAUmlE,EAAQh7D,GAYtD2jD,cAAe,SAASlkD,EAAO07D,EAAOT,EAAUC,GAC9C,IAAI5qD,EAASrZ,KAAK+jE,WAAWC,EAAUC,GAEnCj6D,GADAy6D,EAAQA,GAASzkE,KAAK0kE,eAAerrD,GAC3BrZ,KAAK2kE,iBAAiB57D,EAAO07D,IAE3C,OAAoB,IAAZz6D,GAAiBA,EAAU,IAAM,GAS3CszD,WAAY,SAAS2G,GACnB,IAAKjkE,KAAKlB,OACR,OAAO,EAET,IAAIulE,EAAUrkE,KAAKlB,OAAOo5C,UAAUpF,GAAIwxB,EAAUtkE,KAAKlB,OAAOo5C,UAAUjF,GAGxE,QAFajzC,KAAKokE,WAAU,EAAMH,GAEvBW,MAAK,SAAS77D,GACvB,OAAOA,EAAMM,GAAKi7D,EAAQj7D,GAAKN,EAAMM,GAAKg7D,EAAQh7D,GAClDN,EAAMO,GAAKg7D,EAAQh7D,GAAKP,EAAMO,GAAK+6D,EAAQ/6D,SAKzCtJ,KAAKw3D,mBAAmB6M,EAASC,GAAS,EAAML,IAG7CjkE,KAAK6kE,wBAAwBR,EAASC,EAASL,KAYxDY,wBAAyB,SAASR,EAASC,EAASL,GAElD,IAAI11D,EAAc,CAAElF,GAAIg7D,EAAQh7D,EAAIi7D,EAAQj7D,GAAK,EAAGC,GAAI+6D,EAAQ/6D,EAAIg7D,EAAQh7D,GAAK,GACjF,QAAItJ,KAAKitD,cAAc1+C,EAAa,MAAM,EAAM01D,IAWlDa,oBAAqB,SAASb,GAC5B,IAAKjkE,KAAKlB,OACR,OAAO,EAET,IAAIulE,EAAUrkE,KAAKlB,OAAOo5C,UAAUpF,GAAIwxB,EAAUtkE,KAAKlB,OAAOo5C,UAAUjF,GACxE,QAAIjzC,KAAKw3D,mBAAmB6M,EAASC,GAAS,EAAML,IAG1BjkE,KAAKokE,WAAU,EAAMH,GAAWc,OAAM,SAASh8D,GACvE,OAAQA,EAAMM,GAAKi7D,EAAQj7D,GAAKN,EAAMM,GAAKg7D,EAAQh7D,KAClDN,EAAMO,GAAKg7D,EAAQh7D,GAAKP,EAAMO,GAAK+6D,EAAQ/6D,OAEhBtJ,KAAK6kE,wBAAwBR,EAASC,EAASL,IAQ/ES,eAAgB,SAAShB,GAoCvB,MAlCY,CACVsB,QAAS,CACPn/D,EAAG69D,EAAQ5wB,GACX7pB,EAAGy6C,EAAQ3wB,IAEbkyB,UAAW,CACTp/D,EAAG69D,EAAQ3wB,GACX9pB,EAAGy6C,EAAQzwB,IAEbiyB,WAAY,CACVr/D,EAAG69D,EAAQzwB,GACXhqB,EAAGy6C,EAAQ1wB,IAEbmyB,SAAU,CACRt/D,EAAG69D,EAAQ1wB,GACX/pB,EAAGy6C,EAAQ5wB,MA8BjB6xB,iBAAkB,SAAS57D,EAAO07D,GAChC,IAAQzpC,EAAYoqC,EAEhBC,EADAC,EAAS,EAGb,IAAK,IAAIC,KAAWd,EAGlB,MAFAY,EAAQZ,EAAMc,IAEH1/D,EAAEyD,EAAIP,EAAMO,GAAO+7D,EAAMp8C,EAAE3f,EAAIP,EAAMO,MAI3C+7D,EAAMx/D,EAAEyD,GAAKP,EAAMO,GAAO+7D,EAAMp8C,EAAE3f,GAAKP,EAAMO,KAI7C+7D,EAAMx/D,EAAEwD,IAAMg8D,EAAMp8C,EAAE5f,GAAOg8D,EAAMx/D,EAAEwD,GAAKN,EAAMM,EACnD+7D,EAAKC,EAAMx/D,EAAEwD,GAKR,EACL2xB,GAAMqqC,EAAMp8C,EAAE3f,EAAI+7D,EAAMx/D,EAAEyD,IAAM+7D,EAAMp8C,EAAE5f,EAAIg8D,EAAMx/D,EAAEwD,GAIpD+7D,IAHKr8D,EAAMO,EAFN,EAEeP,EAAMM,GACrBg8D,EAAMx/D,EAAEyD,EAAI0xB,EAAKqqC,EAAMx/D,EAAEwD,KAHzB,EAKmB2xB,IAItBoqC,GAAMr8D,EAAMM,IACdi8D,GAAU,GAGG,IAAXA,GACF,MAGJ,OAAOA,GAUTpE,gBAAiB,SAAS8C,EAAUC,GAClC,IAAI5qD,EAASrZ,KAAKokE,UAAUJ,EAAUC,GACtC,OAAO5gE,EAAKwG,0BAA0BwP,IAQxC8pD,eAAgB,WACd,OAAOnjE,KAAKqrC,4BAA4BhiC,GAQ1Cm8D,gBAAiB,WACf,OAAOxlE,KAAKqrC,4BAA4B/hC,GAS1C2zD,gBAAiB,SAASh5D,GACxB,OAAIwD,KAAKmP,IAAI3S,GAASjE,KAAKk6D,cACrBj2D,EAAQ,GACFjE,KAAKk6D,cAGNl6D,KAAKk6D,cAGG,IAAVj2D,EACA,KAEFA,GAST7E,MAAO,SAAS6E,GAGd,OAFAjE,KAAKmH,KAAK,SAAUlD,GACpBjE,KAAKmH,KAAK,SAAUlD,GACbjE,KAAKo7C,aAUdqqB,aAAc,SAASxhE,EAAO+/D,GAE5B,IAAI0B,EAAqB1lE,KAAKkhE,gBAAgB8C,GAAUzkE,MAAQS,KAAKmjE,iBACrE,OAAOnjE,KAAKZ,MAAM6E,EAAQjE,KAAKT,MAAQmmE,IAUzCC,cAAe,SAAS1hE,EAAO+/D,GAE7B,IAAI0B,EAAqB1lE,KAAKkhE,gBAAgB8C,GAAU7kE,OAASa,KAAKwlE,kBACtE,OAAOxlE,KAAKZ,MAAM6E,EAAQjE,KAAKb,OAASumE,IAU1CE,WAAY,SAAS5B,GAEnB,OAAIA,EACKhkE,KAAKkkE,cAEPlkE,KAAK6lE,eAGd1B,eAAgB,WACd,IAAIrpB,EAAM96C,KAAKo9D,uBACX3yB,EAAUzqC,KAAKyqC,QAASziC,EAAQU,EAAiB1I,KAAKgI,OAEtD89D,EADMziE,EAAK0E,IAAIC,GACFyiC,EAASs7B,EADO1iE,EAAK4E,IAAID,GACHyiC,EAASu7B,EAAWF,EAAOC,EAC9DE,EAAgBH,EAAOC,EAAMpC,EAAU3jE,KAAKkkE,cAE5CN,EAAa,CACf9wB,GAAIrpC,EAAek6D,EAAQ7wB,GAAIgI,GAC/B/H,GAAItpC,EAAek6D,EAAQ5wB,GAAI+H,GAC/B9H,GAAIvpC,EAAek6D,EAAQ3wB,GAAI8H,GAC/B7H,GAAIxpC,EAAek6D,EAAQ1wB,GAAI6H,IAcjC,OAXIrQ,IACFm5B,EAAW9wB,GAAGzpC,GAAK48D,EACnBrC,EAAW9wB,GAAGxpC,GAAK08D,EACnBpC,EAAW7wB,GAAG1pC,GAAK28D,EACnBpC,EAAW7wB,GAAGzpC,GAAK28D,EACnBrC,EAAW5wB,GAAG3pC,GAAK28D,EACnBpC,EAAW5wB,GAAG1pC,GAAK28D,EACnBrC,EAAW3wB,GAAG5pC,GAAK48D,EACnBrC,EAAW3wB,GAAG3pC,GAAK08D,GAGdpC,GAGTiC,YAAa,WACX,IAAIz0C,EAAepxB,KAAKkmE,oBACpB/0C,EAAkBnxB,KAAKmmE,uBACvBrrB,EAAM96C,KAAKo9D,uBACXgJ,EAAc3C,EAAiB3oB,EAAK3pB,GACpC4gB,EAAc0xB,EAAiB2C,EAAah1C,GAE5C4a,GADA+F,EAAc0xB,EAAiB1xB,EAAa,CAAC,EAAI+I,EAAI,GAAI,EAAG,EAAG,EAAIA,EAAI,GAAI,EAAG,IACxE96C,KAAKqmE,+BACXhtD,EAAS,GAeb,OAdArZ,KAAKsmE,gBAAe,SAAS59B,EAASthC,EAAKqhC,GACzCpvB,EAAOjS,GAAOshC,EAAQoJ,gBAAgB9F,EAAK+F,EAAatJ,MAanDpvB,GAGT6qD,YAAa,WACX,IAAI9yC,EAAepxB,KAAKkmE,oBACpB/0C,EAAkBnxB,KAAKmmE,uBACvBp0B,EAAc0xB,EAAiBtyC,EAAiBC,GAChD4a,EAAMhsC,KAAKqrC,4BACXk7B,EAAIv6B,EAAI3iC,EAAI,EAAGuL,EAAIo3B,EAAI1iC,EAAI,EAC/B,MAAO,CAELwpC,GAAIrpC,EAAe,CAAEJ,GAAIk9D,EAAGj9D,GAAIsL,GAAKm9B,GACrCgB,GAAItpC,EAAe,CAAEJ,EAAGk9D,EAAGj9D,GAAIsL,GAAKm9B,GACpCiB,GAAIvpC,EAAe,CAAEJ,GAAIk9D,EAAGj9D,EAAGsL,GAAKm9B,GACpCkB,GAAIxpC,EAAe,CAAEJ,EAAGk9D,EAAGj9D,EAAGsL,GAAKm9B,KAcvCqJ,UAAW,SAASorB,GAKlB,OAJAxmE,KAAK2jE,QAAU3jE,KAAKkkE,cAGpBlkE,KAAK4jE,WAAa5jE,KAAKm7C,MAAQn7C,KAAK2jE,QAAU3jE,KAAKmkE,iBAC/CqC,IAIJxmE,KAAK0jE,QAAU1jE,KAAK6lE,cACpB7lE,KAAKymE,kBAAoBzmE,KAAKymE,oBAJrBzmE,MAYXkmE,kBAAmB,WACjB,OAAO7iE,EAAK2N,iBAAiBhR,OAO/BmmE,qBAAsB,WACpB,IAAIlyD,EAASjU,KAAKkqC,iBAClB,MAAO,CAAC,EAAG,EAAG,EAAG,EAAGj2B,EAAO5K,EAAG4K,EAAO3K,IAGvCo9D,mBAAoB,SAASla,GAC3B,IAAIma,EAAM,IAAKC,EAAS,GAIxB,OAHKpa,GAAaxsD,KAAKm7C,QACrByrB,EAAS5mE,KAAKm7C,MAAMurB,mBAAmBla,GAAama,GAE/CC,EAAS5mE,KAAKqK,IAAMs8D,EAAM3mE,KAAKoK,KAAOu8D,EAAM3mE,KAAK0Q,OAASi2D,EAAM3mE,KAAK2Q,OAC1Eg2D,EAAM3mE,KAAK4Q,MAAQ+1D,EAAM3mE,KAAK6Q,MAAQ81D,EAAM3mE,KAAKgI,MAAQ2+D,EAAM3mE,KAAKopC,QAAUu9B,EAAM3mE,KAAKqpC,QACzFs9B,EAAM3mE,KAAKT,MAAQonE,EAAM3mE,KAAKb,OAASwnE,EAAM3mE,KAAKwuC,YAAcxuC,KAAKoR,MAAQpR,KAAKqR,OAUtF0nB,oBAAqB,SAASyzB,GAC5B,IAAI/6C,EAASzR,KAAK8T,gBAClB,GAAI04C,IAAcxsD,KAAKm7C,MACrB,OAAO1pC,EAET,IAAIrK,EAAMpH,KAAK0mE,mBAAmBla,GAAYqa,EAAQ7mE,KAAK8jE,cAAgB9jE,KAAK8jE,YAAc,IAC9F,OAAI+C,EAAMz/D,MAAQA,EACTy/D,EAAM5iE,OAEXjE,KAAKm7C,QACP1pC,EAASgyD,EAAiBzjE,KAAKm7C,MAAMpiB,qBAAoB,GAAQtnB,IAEnEo1D,EAAMz/D,IAAMA,EACZy/D,EAAM5iE,MAAQwN,EACPA,IAQTqC,cAAe,WACb,IAAI1M,EAAMpH,KAAK0mE,oBAAmB,GAAOG,EAAQ7mE,KAAK6jE,iBAAmB7jE,KAAK6jE,eAAiB,IAC/F,GAAIgD,EAAMz/D,MAAQA,EAChB,OAAOy/D,EAAM5iE,MAEf,IAAI6iE,EAAU9mE,KAAKmmE,uBACfziE,EAAU,CACRsE,MAAOhI,KAAKgI,MACZ8I,WAAYg2D,EAAQ,GACpB/1D,WAAY+1D,EAAQ,GACpBp2D,OAAQ1Q,KAAK0Q,OACbC,OAAQ3Q,KAAK2Q,OACbC,MAAO5Q,KAAK4Q,MACZC,MAAO7Q,KAAK6Q,MACZO,MAAOpR,KAAKoR,MACZC,MAAOrR,KAAKqR,OAIlB,OAFAw1D,EAAMz/D,IAAMA,EACZy/D,EAAM5iE,MAAQZ,EAAKmO,cAAc9N,GAC1BmjE,EAAM5iE,OAWf8iE,+BAAgC,SAASn2D,EAAOC,EAAOm2D,GACrD,OAAO3jE,EAAK6N,qBAAqB,CAC/BN,MAAOA,EACPC,MAAOA,EACPH,OAAQ1Q,KAAK0Q,QAAUs2D,GAAYhnE,KAAKoR,OAAS,EAAI,GACrDT,OAAQ3Q,KAAK2Q,QAAUq2D,GAAYhnE,KAAKqR,OAAS,EAAI,MAUzDqtD,6BAA8B,WAC5B,IAAIlwB,EAAcxuC,KAAKwuC,YAGvB,MAAO,CAAEnlC,EAFDrJ,KAAKT,MAAQivC,EAENllC,EADPtJ,KAAKb,OAASqvC,IAYxBnD,0BAA2B,SAASz6B,EAAOC,GACpB,qBAAVD,IACTA,EAAQ5Q,KAAK4Q,OAEM,qBAAVC,IACTA,EAAQ7Q,KAAK6Q,OAEf,IAAsDuD,EAAMC,EAAxD4lC,EAAaj6C,KAAK0+D,+BAClBuI,EAAmB,IAAVr2D,GAAyB,IAAVC,EAU5B,GARI7Q,KAAKyuC,eACPr6B,EAAOpU,KAAKT,MACZ8U,EAAOrU,KAAKb,SAGZiV,EAAO6lC,EAAW5wC,EAClBgL,EAAO4lC,EAAW3wC,GAEhB29D,EACF,OAAOjnE,KAAKknE,oBAAoB9yD,EAAOpU,KAAK0Q,OAAQ2D,EAAOrU,KAAK2Q,QAElE,IAAI4D,EAAOlR,EAAK8Q,mBAAmBC,EAAMC,EAAM,CAC7C3D,OAAQ1Q,KAAK0Q,OACbC,OAAQ3Q,KAAK2Q,OACbC,MAAOA,EACPC,MAAOA,IAET,OAAO7Q,KAAKknE,oBAAoB3yD,EAAKlL,EAAGkL,EAAKjL,IAW/C49D,oBAAqB,SAAS3nE,EAAOJ,GACnC,OAAOa,KAAKyuC,cACV,CAAEplC,EAAG9J,EAAQS,KAAKwuC,YAAallC,EAAGnK,EAASa,KAAKwuC,aAEhD,CAAEnlC,EAAG9J,EAAO+J,EAAGnK,IAQnBknE,4BAA6B,WAC3B,IAAIvrB,EAAM96C,KAAKo9D,uBACXpxB,EAAMhsC,KAAKqrC,4BAEf,OADQ5hC,EAAeuiC,EAAK8O,GAAK,GACxB3hB,UAAU,EAAIn5B,KAAKyqC,YArsBlC,GA2sBAptC,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAOvF0xC,WAAY,WAOV,OANIxgD,KAAKm7C,MACP99C,EAAO05C,aAAajoC,UAAU0xC,WAAWz8C,KAAK/D,KAAKm7C,MAAOn7C,MAEnDA,KAAKlB,QACZkB,KAAKlB,OAAO0hD,WAAWxgD,MAElBA,MAQT2gD,aAAc,WAOZ,OANI3gD,KAAKm7C,MACP99C,EAAO05C,aAAajoC,UAAU6xC,aAAa58C,KAAK/D,KAAKm7C,MAAOn7C,MAErDA,KAAKlB,QACZkB,KAAKlB,OAAO6hD,aAAa3gD,MAEpBA,MAST4gD,cAAe,SAASC,GAOtB,OANI7gD,KAAKm7C,MACP99C,EAAO05C,aAAajoC,UAAU8xC,cAAc78C,KAAK/D,KAAKm7C,MAAOn7C,KAAM6gD,GAE5D7gD,KAAKlB,QACZkB,KAAKlB,OAAO8hD,cAAc5gD,KAAM6gD,GAE3B7gD,MASTmhD,aAAc,SAASN,GAOrB,OANI7gD,KAAKm7C,MACP99C,EAAO05C,aAAajoC,UAAUqyC,aAAap9C,KAAK/D,KAAKm7C,MAAOn7C,KAAM6gD,GAE3D7gD,KAAKlB,QACZkB,KAAKlB,OAAOqiD,aAAanhD,KAAM6gD,GAE1B7gD,MAST2P,OAAQ,SAAS3K,GAOf,OANIhF,KAAKm7C,OAA6B,oBAApBn7C,KAAKm7C,MAAMx1C,KAC3BtI,EAAO05C,aAAajoC,UAAUa,OAAO5L,KAAK/D,KAAKm7C,MAAOn7C,KAAMgF,GAErDhF,KAAKlB,QACZkB,KAAKlB,OAAO6Q,OAAO3P,KAAMgF,GAEpBhF,QAMX,WACE,SAASmnE,EAAkB/iE,EAAMH,GAC/B,GAAKA,EAGA,IAAIA,EAAMywC,OACb,OAAOtwC,EAAO,gBAAkBH,EAAMkiB,GAAK,MAG3C,IAAIkF,EAAQ,IAAIhuB,EAAOquB,MAAMznB,GACzByb,EAAMtb,EAAO,KAAOinB,EAAM0R,QAAU,KACpC9Z,EAAUoI,EAAMqK,WAKpB,OAJgB,IAAZzS,IAEFvD,GAAOtb,EAAO,aAAe6e,EAAQlU,WAAa,MAE7C2Q,EAbP,OAAOtb,EAAO,WAiBlB,IAAIqG,EAAUpN,EAAOgG,KAAKoH,QAE1BpN,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAMvFs4D,aAAc,SAASC,GAErB,IAAI5uC,EAAWz4B,KAAKy4B,SAAWz4B,KAAKy4B,SAAW,UAC3C+V,EAAcxuC,KAAKwuC,YAAcxuC,KAAKwuC,YAAc,IACpDyT,EAAkBjiD,KAAKiiD,gBAAkBjiD,KAAKiiD,gBAAgBvuC,KAAK,KAAO,OAC1EqmD,EAAmB/5D,KAAK+5D,iBAAmB/5D,KAAK+5D,iBAAmB,IACnEjY,EAAgB9hD,KAAK8hD,cAAgB9hD,KAAK8hD,cAAgB,OAC1DC,EAAiB/hD,KAAK+hD,eAAiB/hD,KAAK+hD,eAAiB,QAC7DC,EAAmBhiD,KAAKgiD,iBAAmBhiD,KAAKgiD,iBAAmB,IACnE/+B,EAAkC,qBAAjBjjB,KAAKijB,QAA0BjjB,KAAKijB,QAAU,IAC/DqL,EAAatuB,KAAK+uB,QAAU,GAAK,uBACjC/qB,EAASqjE,EAAa,GAAKrnE,KAAKsnE,eAChC/jE,EAAO4jE,EAAkB,OAAQnnE,KAAKuD,MAG1C,MAAO,CAFM4jE,EAAkB,SAAUnnE,KAAKwuB,QAI5C,iBAAkBggB,EAAa,KAC/B,qBAAsByT,EAAiB,KACvC,mBAAoBH,EAAe,KACnC,sBAAuBiY,EAAkB,KACzC,oBAAqBhY,EAAgB,KACrC,sBAAuBC,EAAkB,KACzCz+C,EACA,cAAek1B,EAAU,KACzB,YAAaxV,EAAS,IACtBjf,EACAsqB,GACA5a,KAAK,KAST6zD,iBAAkB,SAASx6D,EAAOy6D,GAChC,IAAIC,EAAO,KACP50D,EAAa9F,EAAM8F,WACrB,kBAAyD,IAApC9F,EAAM8F,WAAWzP,QAAQ,OAAmD,IAAnC2J,EAAM8F,WAAWzP,QAAQ,KACrF,IAAO2J,EAAM8F,WAAc,IAAO9F,EAAM8F,YAAe40D,EAAO,GAC9Dj5B,EAAczhC,EAAMyhC,YAAc,iBAAmBzhC,EAAMyhC,YAAci5B,EAAO,GAEhF18D,GADA8H,EAAaA,EACF9F,EAAMhC,SAAW,cAAgBgC,EAAMhC,SAAW,KAAO08D,EAAO,IAC3EhzC,EAAY1nB,EAAM0nB,UAAY,eAAiB1nB,EAAM0nB,UAAYgzC,EAAO,GACxE/yC,EAAa3nB,EAAM2nB,WAAa,gBAAkB3nB,EAAM2nB,WAAa+yC,EAAO,GAC5ElkE,EAAOwJ,EAAMxJ,KAAO4jE,EAAkB,OAAQp6D,EAAMxJ,MAAQ,GAC5DirB,EAASzhB,EAAMyhB,OAAS24C,EAAkB,SAAUp6D,EAAMyhB,QAAU,GACpEk5C,EAAiB1nE,KAAK2nE,qBAAqB56D,GAM/C,OAJI26D,IACFA,EAAiB,oBAAsBA,EAAiBD,GAGnD,CACLj5C,EACAggB,EACA37B,EACA9H,EACA0pB,EACAC,EACAgzC,EACAnkE,EAbWwJ,EAAM66D,OAAS,oBAAuB76D,EAAM66D,OAAU,KAAO,GAexEJ,EAAgB,qBAAuB,IACvC9zD,KAAK,KAQTi0D,qBAAsB,SAAS56D,GAC7B,MAAO,CAAC,WAAY,YAAa,gBAAgB/I,QAAO,SAAS6jE,GAC/D,OAAO96D,EAAM86D,EAAW9nD,QAAQ,IAAK,QACpCrM,KAAK,MAOV4zD,aAAc,WACZ,OAAOtnE,KAAKy2C,OAAS,sBAAwBz2C,KAAKy2C,OAAOtwB,GAAK,KAAO,IAOvE2hD,cAAe,WACb,MAAO,CACL9nE,KAAKmmB,GAAK,OAASnmB,KAAKmmB,GAAK,KAAO,GACpCnmB,KAAK84B,SAAW,mBAAqB94B,KAAK84B,SAASumB,WAAa,MAAQ,IACxE3rC,KAAK,KAQTq0D,gBAAiB,SAASC,EAAM7zB,GAC9B,IAAIpqC,EAAYi+D,EAAOhoE,KAAK+4B,sBAAwB/4B,KAAK8T,gBAEzD,MADmB,cAAgBzW,EAAOgG,KAAKkQ,YAAYxJ,IAExDoqC,GAAuB,IAAM,MAGlC8zB,UAAW,SAASC,GAClB,GAAIloE,KAAKu3C,gBAAiB,CACxB,IAAI9jC,EAAsBpW,EAAOwR,OAAO4E,oBACxCy0D,EAAY7jE,KACV,aACArE,KAAKmoE,mBAAmBnoE,KAAKu3C,iBAC7B,OACA9sC,GAASzK,KAAKT,MAAQ,EAAGkU,GACzB,QACAhJ,GAASzK,KAAKb,OAAS,EAAGsU,GAC1B,YACAhJ,EAAQzK,KAAKT,MAAOkU,GACpB,aACAhJ,EAAQzK,KAAKb,OAAQsU,GACrB,iBASNqgC,MAAO,SAASxmC,GACd,OAAOtN,KAAKooE,qBAAqBpoE,KAAKqoE,OAAO/6D,GAAU,CAAEA,QAASA,KAQpEyyC,cAAe,SAASzyC,GACtB,MAAO,KAAOtN,KAAKsoE,6BAA6BtoE,KAAKqoE,OAAO/6D,GAAU,CAAEA,QAASA,KAMnFg7D,6BAA8B,SAASC,EAAc7kE,GAEnD,IAAI4J,GADJ5J,EAAUA,GAAW,IACC4J,QAClB6mC,EAAsBzwC,EAAQywC,qBAAuB,GACrDq0B,EAAe,CACbxoE,KAAK+nE,iBAAgB,EAAM5zB,GAC3Bn0C,KAAK8nE,iBACLp0D,KAAK,IAEP1O,EAAQujE,EAAanlE,QAAQ,gBAEjC,OADAmlE,EAAavjE,GAASwjE,EACfl7D,EAAUA,EAAQi7D,EAAa70D,KAAK,KAAO60D,EAAa70D,KAAK,KAMtE00D,qBAAsB,SAASG,EAAc7kE,GAE3C,IAQI8kE,EAA2BC,EAR3BC,GADJhlE,EAAUA,GAAW,IACCglE,QAClBp7D,EAAU5J,EAAQ4J,QAClBq7D,EAAYD,EAAU,GAAK,UAAY1oE,KAAKonE,eAAiB,KAC7DwB,EAAallE,EAAQmlE,WAAa,UAAY7oE,KAAKsnE,eAAiB,KAAO,GAC3ExuC,EAAW94B,KAAK84B,SAChBgwC,EAAe9oE,KAAKyuC,cAAgB,sCAAwC,GAC5Es6B,EAAmBjwC,GAAYA,EAASgiC,mBACxCtsC,EAASxuB,KAAKwuB,OAAQjrB,EAAOvD,KAAKuD,KAAMkzC,EAASz2C,KAAKy2C,OACxC1C,EAAS,GAEvB/uC,EAAQujE,EAAanlE,QAAQ,gBAC7B+wC,EAAsBzwC,EAAQywC,oBAwClC,OAvCIrb,IACFA,EAASumB,WAAa,YAAchiD,EAAOwR,OAAOilB,QAClD20C,EAAiB,iBAAmB3vC,EAASumB,WAAa,QACxDvmB,EAASinB,cAAczyC,GACvB,iBAEAy7D,GACFh1B,EAAO1vC,KACL,MAAOukE,EAAY5oE,KAAK8nE,gBAAiB,QAG7C/zB,EAAO1vC,KACL,MACArE,KAAK+nE,iBAAgB,GACpBgB,EAAuD,GAApCH,EAAa5oE,KAAK8nE,gBACtC,QAEFU,EAAe,CACbG,EACAG,EACAJ,EAAU,GAAK1oE,KAAKgpE,gBAAiB,IACrC70B,EAAsB,cAAgBA,EAAsB,KAAO,IACnEzgC,KAAK,IACP60D,EAAavjE,GAASwjE,EAClBjlE,GAAQA,EAAKmxC,QACfX,EAAO1vC,KAAKd,EAAKuwC,MAAM9zC,OAErBwuB,GAAUA,EAAOkmB,QACnBX,EAAO1vC,KAAKmqB,EAAOslB,MAAM9zC,OAEvBy2C,GACF1C,EAAO1vC,KAAKoyC,EAAO3C,MAAM9zC,OAEvB84B,GACFib,EAAO1vC,KAAKokE,GAEd10B,EAAO1vC,KAAKkkE,EAAa70D,KAAK,KAC9BqgC,EAAO1vC,KAAK,UACZ0kE,GAAoBh1B,EAAO1vC,KAAK,UACzBiJ,EAAUA,EAAQymC,EAAOrgC,KAAK,KAAOqgC,EAAOrgC,KAAK,KAG1Ds1D,cAAe,WACb,MAA2B,SAApBhpE,KAAK06D,WAAwB,iBAAmB16D,KAAK06D,WAAa,KAAO,MA5PtF,GAmQA,WAEE,IAAIt7C,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5B6pD,EAAc,kBAKlB,SAASC,EAAUlgE,EAAQ2F,EAAaw6D,GACtC,IAAIC,EAAS,GACbD,EAAMx7D,SAAQ,SAASvJ,GACrBglE,EAAOhlE,GAAQ4E,EAAO5E,MAGxBgb,EAAOpW,EAAO2F,GAAcy6D,GALH,GAQ3B,SAASC,EAASC,EAAWC,EAAcC,GACzC,GAAIF,IAAcC,EAEhB,OAAO,EAEJ,GAAI90D,MAAMuX,QAAQs9C,GAAY,CACjC,IAAK70D,MAAMuX,QAAQu9C,IAAiBD,EAAUxlE,SAAWylE,EAAazlE,OACpE,OAAO,EAET,IAAK,IAAIF,EAAI,EAAGC,EAAMylE,EAAUxlE,OAAQF,EAAIC,EAAKD,IAC/C,IAAKylE,EAASC,EAAU1lE,GAAI2lE,EAAa3lE,IACvC,OAAO,EAGX,OAAO,EAEJ,GAAI0lE,GAAkC,kBAAdA,EAAwB,CACnD,IAAmCliE,EAA/BqsC,EAAO5kC,OAAO4kC,KAAK61B,GACvB,IAAKC,GACuB,kBAAjBA,IACLC,GAAa/1B,EAAK3vC,SAAW+K,OAAO4kC,KAAK81B,GAAczlE,OAE3D,OAAO,EAET,IAASF,EAAI,EAAGC,EAAM4vC,EAAK3vC,OAAQF,EAAIC,EAAKD,IAK1C,GAAY,YAJZwD,EAAMqsC,EAAK7vC,KAIqB,UAARwD,IAGnBiiE,EAASC,EAAUliE,GAAMmiE,EAAaniE,IACzC,OAAO,EAGX,OAAO,GAKX/J,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAOvF6lD,gBAAiB,SAASkJ,GAExB,IAAI4L,EAAoB,KADxB5L,EAAcA,GAAeoL,GAE7B,OAAIp6D,OAAO4kC,KAAKzzC,KAAKypE,IAAoB3lE,OAAS9D,KAAK69D,GAAa/5D,SAG5DulE,EAASrpE,KAAKypE,GAAoBzpE,MAAM,IAQlDo1D,UAAW,SAAS1xD,GAClB,IAAIm6D,EAAcn6D,GAAWA,EAAQm6D,aAAeoL,EAChDt6D,EAAc,IAAMkvD,EACxB,OAAK79D,KAAK2O,IAGVu6D,EAAUlpE,KAAM2O,EAAa3O,KAAK69D,IAC9Bn6D,GAAWA,EAAQi3D,iBACrBuO,EAAUlpE,KAAM2O,EAAajL,EAAQi3D,iBAEhC36D,MANEA,KAAK67C,WAAWn4C,IAc3Bm4C,WAAY,SAASn4C,GAEnB,IAAIm6D,GADJn6D,EAAUA,GAAW,IACKm6D,aAAeoL,EAIzC,OAHAvlE,EAAQm6D,YAAcA,EACtB79D,KAAK,IAAM69D,GAAe,GAC1B79D,KAAKo1D,UAAU1xD,GACR1D,QAvGb,GA6GA,WAEE,IAAI0I,EAAmBrL,EAAOgG,KAAKqF,iBAEnCrL,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAOvF+9C,kBAAmB,SAAS9iB,EAAS2/B,GAGnC,IAAK1pE,KAAKm6D,aAAen6D,KAAKm7C,QAAWn7C,KAAKlB,QAAUkB,KAAKlB,OAAOk8C,gBAAkBh7C,KACpF,OAAO,EAGT,IAEIgK,EACAy6D,EACqB7gE,EAJrB4pC,EAAKzD,EAAQ1gC,EACbkkC,EAAKxD,EAAQzgC,EAENmqC,EAAO5kC,OAAO4kC,KAAKzzC,KAAK0jE,SAC/B1qD,EAAIy6B,EAAK3vC,OAAS,EAItB,IAHA9D,KAAK4rD,SAAW,EAGT5yC,GAAK,EAAGA,IAEb,GADApV,EAAI6vC,EAAKz6B,GACJhZ,KAAK2pE,iBAAiB/lE,KAI3B6gE,EAAQzkE,KAAK0kE,eAAegF,EAAW1pE,KAAK0jE,QAAQ9/D,GAAGgmE,YAAc5pE,KAAK0jE,QAAQ9/D,GAAG2mC,QAgBrE,KADhBvgC,EAAUhK,KAAK2kE,iBAAiB,CAAEt7D,EAAGmkC,EAAIlkC,EAAGikC,GAAMk3B,KAC7Bz6D,EAAU,IAAM,GAEnC,OADAhK,KAAK4rD,SAAWhoD,EACTA,EAGX,OAAO,GAQT0iE,eAAgB,SAASuD,GACvB,IAAK,IAAIjmE,KAAK5D,KAAK+nC,SACjB8hC,EAAG7pE,KAAK+nC,SAASnkC,GAAIA,EAAG5D,OAW5BymE,iBAAkB,WAChB,IAAIptD,EAASrZ,KAAK0jE,QAElB,IAAK,IAAIh7B,KAAWrvB,EAAQ,CAC1B,IAAIywD,EAAgB9pE,KAAK+nC,SAASW,GAClCrvB,EAAOqvB,GAAS6B,OAASu/B,EAAc93B,iBACrChyC,KAAKgI,MAAOhI,KAAK4vC,WAAYv2B,EAAOqvB,GAASr/B,EAAGgQ,EAAOqvB,GAASp/B,GAAG,GACrE+P,EAAOqvB,GAASkhC,YAAcE,EAAc93B,iBAC1ChyC,KAAKgI,MAAOhI,KAAK25D,gBAAiBtgD,EAAOqvB,GAASr/B,EAAGgQ,EAAOqvB,GAASp/B,GAAG,KAa9Ek0D,wBAAyB,SAASx+D,GAChC,IAAKgB,KAAK+qD,0BACP/qD,KAAKlB,SAAWkB,KAAKlB,OAAOy5C,aAC5Bv4C,KAAKlB,QAAUkB,KAAKlB,OAAOk8C,gBAAkBh7C,KAE9C,OAAOA,KAEThB,EAAI0Q,OACJ,IAAIuE,EAASjU,KAAKkqC,iBAAkB6/B,EAAK/pE,KAAKqmE,8BAC1CvrB,EAAM96C,KAAKlB,OAAOg5C,kBAOtB,OANA94C,EAAIE,UAAU+U,EAAO5K,EAAG4K,EAAO3K,GAC/BtK,EAAII,MAAM,EAAI07C,EAAI,GAAI,EAAIA,EAAI,IAC9B97C,EAAI4Q,OAAOlH,EAAiB1I,KAAKgI,QACjChJ,EAAImxC,UAAYnwC,KAAK+qD,yBACrB/rD,EAAI2nD,UAAUojB,EAAG1gE,EAAI,GAAI0gE,EAAGzgE,EAAI,EAAGygE,EAAG1gE,EAAG0gE,EAAGzgE,GAC5CtK,EAAI6Q,UACG7P,MAYTq/D,YAAa,SAASrgE,EAAKywC,GACzBA,EAAgBA,GAAiB,GACjC,IAAIs6B,EAAK/pE,KAAKqmE,8BACV73B,EAAcxuC,KAAKi6D,kBACnB16D,EAAQwqE,EAAG1gE,EAAImlC,EACfrvC,EAAS4qE,EAAGzgE,EAAIklC,EAChB2rB,EAAmD,qBAA9B1qB,EAAc0qB,YACjC1qB,EAAc0qB,YAAcn6D,KAAKm6D,YACnC6P,GAAe,EAiCnB,OA/BAhrE,EAAI0Q,OACJ1Q,EAAIqxC,YAAcZ,EAAcmqB,aAAe55D,KAAK45D,YACpD55D,KAAKssD,aAAattD,EAAKywC,EAAcoqB,iBAAmB75D,KAAK65D,gBAAiB,MAE9E76D,EAAI4xC,YACDrxC,EAAQ,GACRJ,EAAS,EACVI,EACAJ,GAGEg7D,IACFn7D,EAAIuxC,YACJvwC,KAAKsmE,gBAAe,SAAS59B,EAASthC,EAAKqhC,GAGrCC,EAAQuI,gBAAkBvI,EAAQ+I,cAAchJ,EAAcrhC,KAEhE4iE,GAAe,EACfhrE,EAAI2Q,OAAO+4B,EAAQr/B,EAAI9J,EAAOmpC,EAAQp/B,EAAInK,GAC1CH,EAAI2+C,OACFjV,EAAQr/B,EAAI9J,EAAQmpC,EAAQkC,QAC5BlC,EAAQp/B,EAAInK,EAASupC,EAAQmC,aAI/Bm/B,GACFhrE,EAAIwvB,UAGRxvB,EAAI6Q,UACG7P,MAaTu/D,mBAAoB,SAASvgE,EAAK0E,EAAS+rC,GACzCA,EAAgBA,GAAiB,GACjC,IAAIl7B,EAAOlX,EAAOgG,KAAK8Q,mBAAmBnU,KAAKT,MAAOS,KAAKb,OAAQuE,GAC/D8qC,EAAcxuC,KAAKwuC,YACnBC,EAAgBzuC,KAAKyuC,cACrBwrB,EAAoBj6D,KAAKi6D,kBACzB16D,EACEgV,EAAKlL,EAAImlC,GAAeC,EAAgBzuC,KAAKlB,OAAO0rC,UAAY9mC,EAAQgN,QAAUupD,EACpF96D,EACEoV,EAAKjL,EAAIklC,GAAeC,EAAgBzuC,KAAKlB,OAAO0rC,UAAY9mC,EAAQiN,QAAUspD,EAYxF,OAXAj7D,EAAI0Q,OACJ1P,KAAKssD,aAAattD,EAAKywC,EAAcoqB,iBAAmB75D,KAAK65D,gBAAiB,MAC9E76D,EAAIqxC,YAAcZ,EAAcmqB,aAAe55D,KAAK45D,YACpD56D,EAAI4xC,YACDrxC,EAAQ,GACRJ,EAAS,EACVI,EACAJ,GAGFH,EAAI6Q,UACG7P,MAYT48C,aAAc,SAAS59C,EAAKywC,GAmB1B,OAlBAA,EAAgBA,GAAiB,GACjCzwC,EAAI0Q,OACJ1Q,EAAIw9D,aAAax8D,KAAKlB,OAAOi6C,mBAAoB,EAAG,EAAG/4C,KAAKlB,OAAOi6C,mBAAoB,EAAG,GAC1F/5C,EAAIqxC,YAAcrxC,EAAImxC,UAAYV,EAAcW,aAAepwC,KAAKowC,YAC/DpwC,KAAK+vC,qBACR/wC,EAAIqxC,YAAcZ,EAAcO,mBAAqBhwC,KAAKgwC,mBAE5DhwC,KAAKssD,aAAattD,EAAKywC,EAAcqqB,iBAAmB95D,KAAK85D,gBAAiB,MAC9E95D,KAAKo7C,YACLp7C,KAAKsmE,gBAAe,SAAS59B,EAASthC,EAAKqhC,GACrCC,EAAQ+I,cAAchJ,EAAcrhC,IACtCshC,EAAQwK,OAAOl0C,EACbypC,EAAai7B,QAAQt8D,GAAKiC,EAC1Bo/B,EAAai7B,QAAQt8D,GAAKkC,EAAGmmC,EAAehH,MAGlDzpC,EAAI6Q,UAEG7P,MAQT2pE,iBAAkB,SAASj4B,GACzB,OAAO1xC,KAAK+nC,SAAS2J,IAAe1xC,KAAK+nC,SAAS2J,GAAYD,cAAczxC,KAAM0xC,IAUpFu4B,kBAAmB,SAASv4B,EAAY3iB,GAKtC,OAJK/uB,KAAK4xC,sBACR5xC,KAAK4xC,oBAAsB,IAE7B5xC,KAAK4xC,oBAAoBF,GAAc3iB,EAChC/uB,MAkBTkqE,sBAAuB,SAASxmE,GAG9B,IAAK,IAAIgG,KAFThG,IAAYA,EAAU,IAERA,EACZ1D,KAAKiqE,kBAAkBvgE,EAAGhG,EAAQgG,IAEpC,OAAO1J,MAUTovD,WAAY,aAWZD,SAAU,eA1Sd,GAiTA9xD,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAO05C,aAAajoC,UAAuD,CAOnGq7D,YAAa,IAWbC,gBAAiB,SAAUrlE,EAAQslE,GAGjC,IAAIC,EAAQ,aACRniD,GAHJkiD,EAAYA,GAAa,IAGEliD,YAAcmiD,EACrClgD,EAAWigD,EAAUjgD,UAAYkgD,EACjCjpD,EAAQrhB,KAiBZ,OAfA3C,EAAOgG,KAAKwmB,QAAQ,CAClBU,WAAYxlB,EAAOqF,KACnBogB,SAAUxqB,KAAK69C,YAAYzzC,KAC3B8f,SAAUlqB,KAAKmqE,YACf//C,SAAU,SAASnmB,GACjBc,EAAOyB,IAAI,OAAQvC,GACnBod,EAAMxc,mBACNulB,KAEFjC,WAAY,WACVpjB,EAAOq2C,YACPjzB,OAIGnoB,MAYTuqE,gBAAiB,SAAUxlE,EAAQslE,GAGjC,IAAIC,EAAQ,aACRniD,GAHJkiD,EAAYA,GAAa,IAGEliD,YAAcmiD,EACrClgD,EAAWigD,EAAUjgD,UAAYkgD,EACjCjpD,EAAQrhB,KAiBZ,OAfA3C,EAAOgG,KAAKwmB,QAAQ,CAClBU,WAAYxlB,EAAOsF,IACnBmgB,SAAUxqB,KAAK69C,YAAYxzC,IAC3B6f,SAAUlqB,KAAKmqE,YACf//C,SAAU,SAASnmB,GACjBc,EAAOyB,IAAI,MAAOvC,GAClBod,EAAMxc,mBACNulB,KAEFjC,WAAY,WACVpjB,EAAOq2C,YACPjzB,OAIGnoB,MAYTwqE,SAAU,SAAUzlE,EAAQslE,GAG1B,IAAIC,EAAQ,aACRniD,GAHJkiD,EAAYA,GAAa,IAGEliD,YAAcmiD,EACrClgD,EAAWigD,EAAUjgD,UAAYkgD,EACjCjpD,EAAQrhB,KAiBZ,OAfA3C,EAAOgG,KAAKwmB,QAAQ,CAClBU,WAAYxlB,EAAOke,QACnBuH,SAAU,EACVN,SAAUlqB,KAAKmqE,YACf//C,SAAU,SAASnmB,GACjBc,EAAOyB,IAAI,UAAWvC,GACtBod,EAAMxc,mBACNulB,KAEFjC,WAAY,WACV9G,EAAMjc,OAAOL,GACbojB,OAIGnoB,QAIX3C,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAoBvF+a,QAAS,WACP,GAAI1lB,UAAU,IAA8B,kBAAjBA,UAAU,GAAiB,CACpD,IAAyBC,EAAMqmE,EAA3BC,EAAiB,GACrB,IAAKtmE,KAAQD,UAAU,GACrBumE,EAAermE,KAAKD,GAEtB,IAAK,IAAIR,EAAI,EAAGC,EAAM6mE,EAAe5mE,OAAQF,EAAIC,EAAKD,IACpDQ,EAAOsmE,EAAe9mE,GACtB6mE,EAAgB7mE,IAAMC,EAAM,EAC5B7D,KAAK2qE,SAASvmE,EAAMD,UAAU,GAAGC,GAAOD,UAAU,GAAIsmE,QAIxDzqE,KAAK2qE,SAASjmE,MAAM1E,KAAMmE,WAE5B,OAAOnE,MAUT2qE,SAAU,SAAShkE,EAAUo8D,EAAIr/D,EAAS+mE,GACxC,IAAkBG,EAAdvpD,EAAQrhB,KAEZ+iE,EAAKA,EAAGh0D,WAMNrL,EAJGA,EAIOrG,EAAOgG,KAAK0B,OAAOya,MAAM9b,GAHzB,IAMPiD,EAASvD,QAAQ,OACpBwnE,EAAWjkE,EAASqF,MAAM,MAG5B,IAAI6+D,EACFxpD,EAAMw5C,gBAAgBz3D,QAAQuD,IAAa,GAC1CikE,GAAYvpD,EAAMw5C,gBAAgBz3D,QAAQwnE,EAAS,KAAO,EAEzDrB,EAAeqB,EACf5qE,KAAKsH,IAAIsjE,EAAS,IAAIA,EAAS,IAC/B5qE,KAAKsH,IAAIX,GAEP,SAAUjD,IACdA,EAAQonE,KAAOvB,GAGZsB,IAED9H,GADGA,EAAG3/D,QAAQ,KACTmmE,EAAe3+D,WAAWm4D,EAAGhjD,QAAQ,IAAK,KAG1CnV,WAAWm4D,IAIpB,IAAIhsC,EAAW,CACbxM,WAAY7mB,EAAQonE,KACpBtgD,SAAUu4C,EACVt4C,QAAS/mB,EAAQ6lC,GACjBjf,OAAQ5mB,EAAQ4mB,OAChBJ,SAAUxmB,EAAQwmB,SAClBG,MAAO3mB,EAAQ2mB,OAAS,WACtB,OAAO3mB,EAAQ2mB,MAAMtmB,KAAKsd,IAE5B+I,SAAU,SAAUnmB,EAAO8mE,EAAeC,GACpCJ,EACFvpD,EAAMupD,EAAS,IAAIA,EAAS,IAAM3mE,EAGlCod,EAAM7a,IAAIG,EAAU1C,GAElBwmE,GAGJ/mE,EAAQ0mB,UAAY1mB,EAAQ0mB,SAASnmB,EAAO8mE,EAAeC,IAE7D7iD,WAAY,SAAUlkB,EAAO8mE,EAAeC,GACtCP,IAIJppD,EAAM+5B,YACN13C,EAAQykB,YAAczkB,EAAQykB,WAAWlkB,EAAO8mE,EAAeC,MAI/DH,EACFxtE,EAAOgG,KAAKioB,aAAayL,EAASxM,WAAYwM,EAASvM,SAAUuM,EAAS7M,SAAU6M,GAGpF15B,EAAOgG,KAAKwmB,QAAQkN,MAM1B,SAAUxvB,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BI,EAAQniB,EAAOgG,KAAK0B,OAAOya,MAC3ByrD,EAAa,CAAE7yD,GAAI,EAAGnJ,GAAI,EAAGoJ,GAAI,EAAGnJ,GAAI,GACxCuqD,EAAmBp8D,EAAO05C,aAAayK,SAAS,eAqTpD,SAAS0pB,EAAuBC,EAAeC,GAC7C,IAAIpiE,EAASmiE,EAAcniE,OACvBqiE,EAAQF,EAAcE,MACtBC,EAAQH,EAAcG,MACtBC,EAAYJ,EAAcI,UAC1BC,EAAUJ,EAAaI,QACvBv3D,EAASm3D,EAAan3D,OACtBw3D,EAAWL,EAAaK,SAE5B,OAAO,WACL,OAAQzrE,KAAKsH,IAAI0B,IACf,KAAKwiE,EACH,OAAO/jE,KAAKa,IAAItI,KAAKsH,IAAI+jE,GAAQrrE,KAAKsH,IAAIgkE,IAC5C,KAAKr3D,EACH,OAAOxM,KAAKa,IAAItI,KAAKsH,IAAI+jE,GAAQrrE,KAAKsH,IAAIgkE,IAAW,GAAMtrE,KAAKsH,IAAIikE,GACtE,KAAKE,EACH,OAAOhkE,KAAKc,IAAIvI,KAAKsH,IAAI+jE,GAAQrrE,KAAKsH,IAAIgkE,MAnU9CjuE,EAAOquE,KACTruE,EAAOyrB,KAAK,mCAUdzrB,EAAOquE,KAAOruE,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA4C,CAOvFlJ,KAAM,OAONyS,GAAI,EAOJC,GAAI,EAOJpJ,GAAI,EAOJC,GAAI,EAEJ0rD,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,KAAM,KAAM,KAAM,MAQlF4b,WAAY,SAAS1X,EAAQpG,GACtBoG,IACHA,EAAS,CAAC,EAAG,EAAG,EAAG,IAGrB9J,KAAKkhB,UAAU,aAAcxd,GAE7B1D,KAAKwG,IAAI,KAAMsD,EAAO,IACtB9J,KAAKwG,IAAI,KAAMsD,EAAO,IACtB9J,KAAKwG,IAAI,KAAMsD,EAAO,IACtB9J,KAAKwG,IAAI,KAAMsD,EAAO,IAEtB9J,KAAK2rE,gBAAgBjoE,IAOvBioE,gBAAiB,SAASjoE,GACxBA,IAAYA,EAAU,IAEtB1D,KAAKT,MAAQkI,KAAKmP,IAAI5W,KAAKiP,GAAKjP,KAAKoY,IACrCpY,KAAKb,OAASsI,KAAKmP,IAAI5W,KAAKkP,GAAKlP,KAAKqY,IAEtCrY,KAAKoK,KAAO,SAAU1G,EAClBA,EAAQ0G,KACRpK,KAAK4rE,oBAET5rE,KAAKqK,IAAM,QAAS3G,EAChBA,EAAQ2G,IACRrK,KAAK6rE,oBAQX1kE,KAAM,SAASC,EAAKnD,GAKlB,OAJAjE,KAAKkhB,UAAU,OAAQ9Z,EAAKnD,GACG,qBAApBgnE,EAAW7jE,IACpBpH,KAAK2rE,kBAEA3rE,MAOT4rE,kBAAmBV,EACjB,CACEliE,OAAQ,UACRqiE,MAAO,KACPC,MAAO,KACPC,UAAW,SAEb,CACEC,QAAS,OACTv3D,OAAQ,SACRw3D,SAAU,UAQdI,iBAAkBX,EAChB,CACEliE,OAAQ,UACRqiE,MAAO,KACPC,MAAO,KACPC,UAAW,UAEb,CACEC,QAAS,MACTv3D,OAAQ,SACRw3D,SAAU,WAQd9nB,QAAS,SAAS3kD,GAGhB,GAFAA,EAAIuxC,aAECvwC,KAAKiiD,iBAAmBjiD,KAAKiiD,iBAAmBwX,EAAkB,CAGrE,IAAI/vD,EAAI1J,KAAK8rE,iBACb9sE,EAAI2Q,OAAOjG,EAAE0O,GAAI1O,EAAE2O,IACnBrZ,EAAI2+C,OAAOj0C,EAAEuF,GAAIvF,EAAEwF,IAGrBlQ,EAAIsxC,UAAYtwC,KAAKwuC,YAKrB,IAAIu9B,EAAkB/sE,EAAIqxC,YAC1BrxC,EAAIqxC,YAAcrwC,KAAKwuB,QAAUxvB,EAAImxC,UACrCnwC,KAAKwuB,QAAUxuB,KAAK4/D,cAAc5gE,GAClCA,EAAIqxC,YAAc07B,GAOpBjM,oBAAqB,SAAS9gE,GAC5B,IAAI0K,EAAI1J,KAAK8rE,iBAEb9sE,EAAIuxC,YACJlzC,EAAOgG,KAAK2L,eAAehQ,EAAK0K,EAAE0O,GAAI1O,EAAE2O,GAAI3O,EAAEuF,GAAIvF,EAAEwF,GAAIlP,KAAKiiD,iBAC7DjjD,EAAI4+C,aASNqiB,uBAAwB,WACtB,MAAO,CACL52D,GAAIrJ,KAAKoY,GAAKpY,KAAKiP,IAAM,EACzB3F,GAAItJ,KAAKqY,GAAKrY,KAAKkP,IAAM,IAU7B0kC,SAAU,SAASC,GACjB,OAAOz0B,EAAOpf,KAAKkhB,UAAU,WAAY2yB,GAAsB7zC,KAAK8rE,mBAOtEpN,6BAA8B,WAC5B,IAAI1yB,EAAMhsC,KAAKkhB,UAAU,gCASzB,MAR2B,SAAvBlhB,KAAK8hD,gBACY,IAAf9hD,KAAKT,QACPysC,EAAI1iC,GAAKtJ,KAAKwuC,aAEI,IAAhBxuC,KAAKb,SACP6sC,EAAI3iC,GAAKrJ,KAAKwuC,cAGXxC,GAOT8/B,eAAgB,WACd,IAAIE,EAAQhsE,KAAKoY,IAAMpY,KAAKiP,IAAM,EAAI,EAClCg9D,EAAQjsE,KAAKqY,IAAMrY,KAAKkP,IAAM,EAAI,EAClCkJ,EAAM4zD,EAAQhsE,KAAKT,MAAQ,GAC3B8Y,EAAM4zD,EAAQjsE,KAAKb,OAAS,GAIhC,MAAO,CACLiZ,GAAIA,EACJnJ,GALQ+8D,EAAQhsE,KAAKT,OAAS,GAM9B8Y,GAAIA,EACJnJ,GANQ+8D,EAAQjsE,KAAKb,QAAU,KAgBnCkpE,OAAQ,WACN,IAAI3+D,EAAI1J,KAAK8rE,iBACb,MAAO,CACL,SAAU,eACV,OAAQpiE,EAAE0O,GACV,SAAU1O,EAAE2O,GACZ,SAAU3O,EAAEuF,GACZ,SAAUvF,EAAEwF,GACZ,aAaN7R,EAAOquE,KAAKQ,gBAAkB7uE,EAAO0D,kBAAkB6E,OAAO,cAAcoG,MAAM,MAUlF3O,EAAOquE,KAAKl0C,YAAc,SAASzV,EAASvc,EAAU9B,GACpDA,EAAUA,GAAW,GACrB,IAAIyoE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAOquE,KAAKQ,iBAC/DpiE,EAAS,CACPqiE,EAAiB/zD,IAAM,EACvB+zD,EAAiB9zD,IAAM,EACvB8zD,EAAiBl9D,IAAM,EACvBk9D,EAAiBj9D,IAAM,GAE7B1J,EAAS,IAAInI,EAAOquE,KAAK5hE,EAAQsV,EAAO+sD,EAAkBzoE,MAW5DrG,EAAOquE,KAAK99D,WAAa,SAAS7I,EAAQS,GAKxC,IAAI9B,EAAU8b,EAAMza,GAAQ,GAC5BrB,EAAQoG,OAAS,CAAC/E,EAAOqT,GAAIrT,EAAOsT,GAAItT,EAAOkK,GAAIlK,EAAOmK,IAC1D7R,EAAOwR,OAAO4xD,YAAY,OAAQ/8D,GANlC,SAAmBmxC,UACVA,EAAS/qC,OAChBtE,GAAYA,EAASqvC,KAI+B,YAvT1D,CAmVoCt3C,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C+uE,EAAK3kE,KAAKI,GAEVxK,EAAOioD,OACTjoD,EAAOyrB,KAAK,sCAUdzrB,EAAOioD,OAASjoD,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA8C,CAO3FlJ,KAAM,SAONu/C,OAAQ,EASRmnB,WAAY,EASZC,SAAe,EAALF,EAEVxR,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,SAAU,aAAc,YAQxFuB,KAAM,SAASC,EAAKnD,GAOlB,OANAjE,KAAKkhB,UAAU,OAAQ9Z,EAAKnD,GAEhB,WAARmD,GACFpH,KAAKusE,UAAUtoE,GAGVjE,MAQT4zC,SAAU,SAASC,GACjB,OAAO7zC,KAAKkhB,UAAU,WAAY,CAAC,SAAU,aAAc,YAAYtb,OAAOiuC,KAUhFw0B,OAAQ,WACN,IAAImE,EACAxkE,GAAShI,KAAKssE,SAAWtsE,KAAKqsE,aAAgB,EAAID,GAEtD,GAAc,IAAVpkE,EACFwkE,EAAY,CACV,WAAY,eACZ,iBACA,MAAOxsE,KAAKklD,OACZ,cAGC,CACH,IAAIunB,EAASpvE,EAAOgG,KAAK0E,IAAI/H,KAAKqsE,YAAcrsE,KAAKklD,OACjDwnB,EAASrvE,EAAOgG,KAAK4E,IAAIjI,KAAKqsE,YAAcrsE,KAAKklD,OACjDynB,EAAOtvE,EAAOgG,KAAK0E,IAAI/H,KAAKssE,UAAYtsE,KAAKklD,OAC7C0nB,EAAOvvE,EAAOgG,KAAK4E,IAAIjI,KAAKssE,UAAYtsE,KAAKklD,OAC7C2nB,EAAY7kE,EAAQokE,EAAK,IAAM,IACnCI,EAAY,CACV,cAAgBC,EAAS,IAAMC,EAC/B,MAAQ1sE,KAAKklD,OAAS,IAAMllD,KAAKklD,OACjC,OAAQ2nB,EAAY,KAAM,IAAMF,EAAO,IAAMC,EAC7C,KAAM,eAAgB,SAG1B,OAAOJ,GAQT7oB,QAAS,SAAS3kD,GAChBA,EAAIuxC,YACJvxC,EAAIwxC,IACF,EACA,EACAxwC,KAAKklD,OACLllD,KAAKqsE,WACLrsE,KAAKssE,UAAU,GACjBtsE,KAAK2/D,oBAAoB3gE,IAO3B8tE,WAAY,WACV,OAAO9sE,KAAKsH,IAAI,UAAYtH,KAAKsH,IAAI,WAOvCylE,WAAY,WACV,OAAO/sE,KAAKsH,IAAI,UAAYtH,KAAKsH,IAAI,WAOvCilE,UAAW,SAAStoE,GAElB,OADAjE,KAAKklD,OAASjhD,EACPjE,KAAKwG,IAAI,QAAiB,EAARvC,GAAWuC,IAAI,SAAkB,EAARvC,MAWtD5G,EAAOioD,OAAO4mB,gBAAkB7uE,EAAO0D,kBAAkB6E,OAAO,UAAUoG,MAAM,MAWhF3O,EAAOioD,OAAO9tB,YAAc,SAASzV,EAASvc,GAC5C,IAcqBsG,EAdjBqgE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAOioD,OAAO4mB,iBAErE,KAaS,WADYpgE,EAZFqgE,IAakBrgE,EAAWo5C,QAAU,GAZxD,MAAM,IAAIjO,MAAM,8DAGlBk1B,EAAiB/hE,MAAQ+hE,EAAiB/hE,MAAQ,GAAK+hE,EAAiBjnB,OACxEinB,EAAiB9hE,KAAO8hE,EAAiB9hE,KAAO,GAAK8hE,EAAiBjnB,OACtE1/C,EAAS,IAAInI,EAAOioD,OAAO6mB,KAmB7B9uE,EAAOioD,OAAO13C,WAAa,SAAS7I,EAAQS,GAC1C,OAAOnI,EAAOwR,OAAO4xD,YAAY,SAAU17D,EAAQS,KA3MvD,CA8MoCjI,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAE3CA,EAAO2vE,SACT3vE,EAAOyrB,KAAK,uCAWdzrB,EAAO2vE,SAAW3vE,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAAgD,CAO/FlJ,KAAM,WAONpG,MAAO,IAOPJ,OAAQ,IAMRwkD,QAAS,SAAS3kD,GAChB,IAAIiuE,EAAWjtE,KAAKT,MAAQ,EACxB2tE,EAAYltE,KAAKb,OAAS,EAE9BH,EAAIuxC,YACJvxC,EAAI2Q,QAAQs9D,EAAUC,GACtBluE,EAAI2+C,OAAO,GAAIuvB,GACfluE,EAAI2+C,OAAOsvB,EAAUC,GACrBluE,EAAI4+C,YAEJ59C,KAAK2/D,oBAAoB3gE,IAO3B8gE,oBAAqB,SAAS9gE,GAC5B,IAAIiuE,EAAWjtE,KAAKT,MAAQ,EACxB2tE,EAAYltE,KAAKb,OAAS,EAE9BH,EAAIuxC,YACJlzC,EAAOgG,KAAK2L,eAAehQ,GAAMiuE,EAAUC,EAAW,GAAIA,EAAWltE,KAAKiiD,iBAC1E5kD,EAAOgG,KAAK2L,eAAehQ,EAAK,GAAIkuE,EAAWD,EAAUC,EAAWltE,KAAKiiD,iBACzE5kD,EAAOgG,KAAK2L,eAAehQ,EAAKiuE,EAAUC,GAAYD,EAAUC,EAAWltE,KAAKiiD,iBAChFjjD,EAAI4+C,aASNyqB,OAAQ,WACN,IAAI4E,EAAWjtE,KAAKT,MAAQ,EACxB2tE,EAAYltE,KAAKb,OAAS,EAM9B,MAAO,CACL,YAAa,eACb,WAPW,EACN8tE,EAAW,IAAMC,EAClB,MAAQA,EACRD,EAAW,IAAMC,GACjBx5D,KAAK,KAIT,WAaNrW,EAAO2vE,SAASp/D,WAAa,SAAS7I,EAAQS,GAC5C,OAAOnI,EAAOwR,OAAO4xD,YAAY,WAAY17D,EAAQS,KAxGzD,CA2GoCjI,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C8vE,EAAoB,EAAV1lE,KAAKI,GAEfxK,EAAO+vE,QACT/vE,EAAOyrB,KAAK,uCAWdzrB,EAAO+vE,QAAU/vE,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA+C,CAO7FlJ,KAAM,UAON4P,GAAM,EAONC,GAAM,EAENolD,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,KAAM,MAOtE4b,WAAY,SAAS9d,GACnB1D,KAAKkhB,UAAU,aAAcxd,GAC7B1D,KAAKwG,IAAI,KAAM9C,GAAWA,EAAQ6R,IAAM,GACxCvV,KAAKwG,IAAI,KAAM9C,GAAWA,EAAQ8R,IAAM,IAS1CrO,KAAM,SAASC,EAAKnD,GAElB,OADAjE,KAAKkhB,UAAU,OAAQ9Z,EAAKnD,GACpBmD,GAEN,IAAK,KACHpH,KAAKuV,GAAKtR,EACVjE,KAAKwG,IAAI,QAAiB,EAARvC,GAClB,MAEF,IAAK,KACHjE,KAAKwV,GAAKvR,EACVjE,KAAKwG,IAAI,SAAkB,EAARvC,GAIvB,OAAOjE,MAOTqtE,MAAO,WACL,OAAOrtE,KAAKsH,IAAI,MAAQtH,KAAKsH,IAAI,WAOnCgmE,MAAO,WACL,OAAOttE,KAAKsH,IAAI,MAAQtH,KAAKsH,IAAI,WAQnCssC,SAAU,SAASC,GACjB,OAAO7zC,KAAKkhB,UAAU,WAAY,CAAC,KAAM,MAAMtb,OAAOiuC,KASxDw0B,OAAQ,WACN,MAAO,CACL,YAAa,eACb,iBACA,OAAQroE,KAAKuV,GACb,SAAUvV,KAAKwV,GACf,WASJmuC,QAAS,SAAS3kD,GAChBA,EAAIuxC,YACJvxC,EAAI0Q,OACJ1Q,EAAI+K,UAAU,EAAG,EAAG,EAAG/J,KAAKwV,GAAKxV,KAAKuV,GAAI,EAAG,GAC7CvW,EAAIwxC,IACF,EACA,EACAxwC,KAAKuV,GACL,EACA43D,GACA,GACFnuE,EAAI6Q,UACJ7P,KAAK2/D,oBAAoB3gE,MAW7B3B,EAAO+vE,QAAQlB,gBAAkB7uE,EAAO0D,kBAAkB6E,OAAO,cAAcoG,MAAM,MAUrF3O,EAAO+vE,QAAQ51C,YAAc,SAASzV,EAASvc,GAE7C,IAAI2mE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAO+vE,QAAQlB,iBAEtEC,EAAiB/hE,MAAQ+hE,EAAiB/hE,MAAQ,GAAK+hE,EAAiB52D,GACxE42D,EAAiB9hE,KAAO8hE,EAAiB9hE,KAAO,GAAK8hE,EAAiB32D,GACtEhQ,EAAS,IAAInI,EAAO+vE,QAAQjB,KAY9B9uE,EAAO+vE,QAAQx/D,WAAa,SAAS7I,EAAQS,GAC3C,OAAOnI,EAAOwR,OAAO4xD,YAAY,UAAW17D,EAAQS,KAjLxD,CAoLoCjI,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAE5B/hB,EAAOipD,KACTjpD,EAAOyrB,KAAK,mCAWdzrB,EAAOipD,KAAOjpD,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA4C,CAOvF8rD,gBAAiBt9D,EAAOwR,OAAOC,UAAU6rD,gBAAgB/0D,OAAO,KAAM,MAOtED,KAAM,OAON4P,GAAM,EAONC,GAAM,EAENolD,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,KAAM,MAOtE4b,WAAY,SAAS9d,GACnB1D,KAAKkhB,UAAU,aAAcxd,GAC7B1D,KAAKutE,aAOPA,UAAW,WACLvtE,KAAKuV,KAAOvV,KAAKwV,GACnBxV,KAAKwV,GAAKxV,KAAKuV,GAERvV,KAAKwV,KAAOxV,KAAKuV,KACxBvV,KAAKuV,GAAKvV,KAAKwV,KAQnBmuC,QAAS,SAAS3kD,GAKhB,IAAIuW,EAAKvV,KAAKuV,GAAK9N,KAAKa,IAAItI,KAAKuV,GAAIvV,KAAKT,MAAQ,GAAK,EACnDiW,EAAKxV,KAAKwV,GAAK/N,KAAKa,IAAItI,KAAKwV,GAAIxV,KAAKb,OAAS,GAAK,EACpDonE,EAAIvmE,KAAKT,MACTqV,EAAI5U,KAAKb,OACTkK,GAAKrJ,KAAKT,MAAQ,EAClB+J,GAAKtJ,KAAKb,OAAS,EACnBquE,EAAmB,IAAPj4D,GAAmB,IAAPC,EAExB8H,EAAI,YACRte,EAAIuxC,YAEJvxC,EAAI2Q,OAAOtG,EAAIkM,EAAIjM,GAEnBtK,EAAI2+C,OAAOt0C,EAAIk9D,EAAIhxD,EAAIjM,GACvBkkE,GAAaxuE,EAAI4f,cAAcvV,EAAIk9D,EAAIjpD,EAAI/H,EAAIjM,EAAGD,EAAIk9D,EAAGj9D,EAAIgU,EAAI9H,EAAInM,EAAIk9D,EAAGj9D,EAAIkM,GAEhFxW,EAAI2+C,OAAOt0C,EAAIk9D,EAAGj9D,EAAIsL,EAAIY,GAC1Bg4D,GAAaxuE,EAAI4f,cAAcvV,EAAIk9D,EAAGj9D,EAAIsL,EAAI0I,EAAI9H,EAAInM,EAAIk9D,EAAIjpD,EAAI/H,EAAIjM,EAAIsL,EAAGvL,EAAIk9D,EAAIhxD,EAAIjM,EAAIsL,GAE7F5V,EAAI2+C,OAAOt0C,EAAIkM,EAAIjM,EAAIsL,GACvB44D,GAAaxuE,EAAI4f,cAAcvV,EAAIiU,EAAI/H,EAAIjM,EAAIsL,EAAGvL,EAAGC,EAAIsL,EAAI0I,EAAI9H,EAAInM,EAAGC,EAAIsL,EAAIY,GAEhFxW,EAAI2+C,OAAOt0C,EAAGC,EAAIkM,GAClBg4D,GAAaxuE,EAAI4f,cAAcvV,EAAGC,EAAIgU,EAAI9H,EAAInM,EAAIiU,EAAI/H,EAAIjM,EAAGD,EAAIkM,EAAIjM,GAErEtK,EAAI4+C,YAEJ59C,KAAK2/D,oBAAoB3gE,IAO3B8gE,oBAAqB,SAAS9gE,GAC5B,IAAIqK,GAAKrJ,KAAKT,MAAQ,EAClB+J,GAAKtJ,KAAKb,OAAS,EACnBonE,EAAIvmE,KAAKT,MACTqV,EAAI5U,KAAKb,OAEbH,EAAIuxC,YACJlzC,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAGC,EAAGD,EAAIk9D,EAAGj9D,EAAGtJ,KAAKiiD,iBACrD5kD,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAIk9D,EAAGj9D,EAAGD,EAAIk9D,EAAGj9D,EAAIsL,EAAG5U,KAAKiiD,iBAC7D5kD,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAIk9D,EAAGj9D,EAAIsL,EAAGvL,EAAGC,EAAIsL,EAAG5U,KAAKiiD,iBAC7D5kD,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAGC,EAAIsL,EAAGvL,EAAGC,EAAGtJ,KAAKiiD,iBACrDjjD,EAAI4+C,aAQNhK,SAAU,SAASC,GACjB,OAAO7zC,KAAKkhB,UAAU,WAAY,CAAC,KAAM,MAAMtb,OAAOiuC,KASxDw0B,OAAQ,WAEN,MAAO,CACL,SAAU,eACV,OAHOroE,KAAKT,MAAQ,EAGV,SAHkBS,KAAKb,OAAS,EAI1C,SAAUa,KAAKuV,GAAI,SAAUvV,KAAKwV,GAClC,YAAaxV,KAAKT,MAAO,aAAcS,KAAKb,OAC5C,aAaN9B,EAAOipD,KAAK4lB,gBAAkB7uE,EAAO0D,kBAAkB6E,OAAO,yBAAyBoG,MAAM,MAU7F3O,EAAOipD,KAAK9uB,YAAc,SAASzV,EAASvc,EAAU9B,GACpD,IAAKqe,EACH,OAAOvc,EAAS,MAElB9B,EAAUA,GAAW,GAErB,IAAIyoE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAOipD,KAAK4lB,iBACnEC,EAAiB/hE,KAAO+hE,EAAiB/hE,MAAQ,EACjD+hE,EAAiB9hE,IAAO8hE,EAAiB9hE,KAAQ,EACjD8hE,EAAiBhtE,OAAUgtE,EAAiBhtE,QAAU,EACtDgtE,EAAiB5sE,MAAS4sE,EAAiB5sE,OAAS,EACpD,IAAI8mD,EAAO,IAAIhpD,EAAOipD,KAAKlnC,EAAQ1b,EAAUrG,EAAOgG,KAAK0B,OAAOya,MAAM9b,GAAW,GAAMyoE,IACvF9lB,EAAKt3B,QAAUs3B,EAAKt3B,SAAWs3B,EAAK9mD,MAAQ,GAAK8mD,EAAKlnD,OAAS,EAC/DqG,EAAS6gD,IAWXhpD,EAAOipD,KAAK14C,WAAa,SAAS7I,EAAQS,GACxC,OAAOnI,EAAOwR,OAAO4xD,YAAY,OAAQ17D,EAAQS,KAzMrD,CA4MoCjI,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5B9W,EAAMjL,EAAOgG,KAAKC,MAAMgF,IACxBC,EAAMlL,EAAOgG,KAAKC,MAAMiF,IACxBkC,EAAUpN,EAAOgG,KAAKoH,QAEtBpN,EAAOowE,SACTpwE,EAAOyrB,KAAK,uCAUdzrB,EAAOowE,SAAWpwE,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAAgD,CAO/FlJ,KAAM,WAONmE,OAAQ,KAER8wD,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,UAqBhE4b,WAAY,SAAS1X,EAAQpG,GAC3BA,EAAUA,GAAW,GACrB1D,KAAK8J,OAASA,GAAU,GACxB9J,KAAKkhB,UAAU,aAAcxd,GAC7B1D,KAAK0tE,uBAAuBhqE,IAG9BgqE,uBAAwB,SAAShqE,GAC/B,IAA6CiqE,EAAzCC,EAAU5tE,KAAK6tE,gBAAgBnqE,GACnC1D,KAAKT,MAAQquE,EAAQruE,MACrBS,KAAKb,OAASyuE,EAAQzuE,OACjBuE,EAAQoqE,UACXH,EAAiB3tE,KAAKsiE,uBACpB,CAAEj5D,EAAGukE,EAAQxjE,KAAOpK,KAAKwuC,YAAc,EAAGllC,EAAGskE,EAAQvjE,IAAMrK,KAAKwuC,YAAc,GAC9E,OACA,MACAxuC,KAAKopC,QACLppC,KAAKqpC,UAGmB,qBAAjB3lC,EAAQ0G,OACjBpK,KAAKoK,KAAO1G,EAAQoqE,QAAUF,EAAQxjE,KAAOujE,EAAetkE,GAEnC,qBAAhB3F,EAAQ2G,MACjBrK,KAAKqK,IAAM3G,EAAQoqE,QAAUF,EAAQvjE,IAAMsjE,EAAerkE,GAE5DtJ,KAAKq0C,WAAa,CAChBhrC,EAAGukE,EAAQxjE,KAAOpK,KAAKT,MAAQ,EAC/B+J,EAAGskE,EAAQvjE,IAAMrK,KAAKb,OAAS,IAcnC0uE,gBAAiB,WAEf,IAAI/jE,EAAS9J,KAAK8J,OACdG,EAAO3B,EAAIwB,EAAQ,MAAQ,EAC3BK,EAAO7B,EAAIwB,EAAQ,MAAQ,EAM/B,MAAO,CACLM,KAAMH,EACNI,IAAKF,EACL5K,OARSgJ,EAAIuB,EAAQ,MAAQ,GAEXG,EAOlB9K,QARSoJ,EAAIuB,EAAQ,MAAQ,GAEVK,IAevBypC,SAAU,SAASC,GACjB,OAAOz0B,EAAOpf,KAAKkhB,UAAU,WAAY2yB,GAAsB,CAC7D/pC,OAAQ9J,KAAK8J,OAAOlE,YAUxByiE,OAAQ,WAIN,IAHA,IAAIv+D,EAAS,GAAIikE,EAAQ/tE,KAAKq0C,WAAWhrC,EAAG2kE,EAAQhuE,KAAKq0C,WAAW/qC,EAChEmK,EAAsBpW,EAAOwR,OAAO4E,oBAE/B7P,EAAI,EAAGC,EAAM7D,KAAK8J,OAAOhG,OAAQF,EAAIC,EAAKD,IACjDkG,EAAOzF,KACLoG,EAAQzK,KAAK8J,OAAOlG,GAAGyF,EAAI0kE,EAAOt6D,GAAsB,IACxDhJ,EAAQzK,KAAK8J,OAAOlG,GAAG0F,EAAI0kE,EAAOv6D,GAAsB,KAG5D,MAAO,CACL,IAAMzT,KAAK2F,KAAO,IAAK,eACvB,WAAYmE,EAAO4J,KAAK,IACxB,WAUJu6D,aAAc,SAASjvE,GACrB,IAAI+J,EAAOlF,EAAM7D,KAAK8J,OAAOhG,OACzBuF,EAAIrJ,KAAKq0C,WAAWhrC,EACpBC,EAAItJ,KAAKq0C,WAAW/qC,EAExB,IAAKzF,GAAOsZ,MAAMnd,KAAK8J,OAAOjG,EAAM,GAAGyF,GAGrC,OAAO,EAETtK,EAAIuxC,YACJvxC,EAAI2Q,OAAO3P,KAAK8J,OAAO,GAAGT,EAAIA,EAAGrJ,KAAK8J,OAAO,GAAGR,EAAIA,GACpD,IAAK,IAAI1F,EAAI,EAAGA,EAAIC,EAAKD,IACvBmF,EAAQ/I,KAAK8J,OAAOlG,GACpB5E,EAAI2+C,OAAO50C,EAAMM,EAAIA,EAAGN,EAAMO,EAAIA,GAEpC,OAAO,GAOTq6C,QAAS,SAAS3kD,GACXgB,KAAKiuE,aAAajvE,IAGvBgB,KAAK2/D,oBAAoB3gE,IAO3B8gE,oBAAqB,SAAS9gE,GAC5B,IAAImkD,EAAIC,EAERpkD,EAAIuxC,YACJ,IAAK,IAAI3sC,EAAI,EAAGC,EAAM7D,KAAK8J,OAAOhG,OAAQF,EAAIC,EAAKD,IACjDu/C,EAAKnjD,KAAK8J,OAAOlG,GACjBw/C,EAAKpjD,KAAK8J,OAAOlG,EAAI,IAAMu/C,EAC3B9lD,EAAOgG,KAAK2L,eAAehQ,EAAKmkD,EAAG95C,EAAG85C,EAAG75C,EAAG85C,EAAG/5C,EAAG+5C,EAAG95C,EAAGtJ,KAAKiiD,kBAQjE/7C,WAAY,WACV,OAAOlG,KAAKsH,IAAI,UAAUxD,UAW9BzG,EAAOowE,SAASvB,gBAAkB7uE,EAAO0D,kBAAkB6E,SAU3DvI,EAAOowE,SAASS,qBAAuB,SAASC,GAC9C,OAAO,SAASpsD,EAASvc,EAAU9B,GACjC,IAAKqe,EACH,OAAOvc,EAAS,MAElB9B,IAAYA,EAAU,IAEtB,IAAIoG,EAASzM,EAAO84B,qBAAqBpU,EAAQmO,aAAa,WAC1Di8C,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAO8wE,GAAQjC,iBACtEC,EAAiB2B,SAAU,EAC3BtoE,EAAS,IAAInI,EAAO8wE,GAAQrkE,EAAQsV,EAAO+sD,EAAkBzoE,OAIjErG,EAAOowE,SAASj2C,YAAcn6B,EAAOowE,SAASS,qBAAqB,YAWnE7wE,EAAOowE,SAAS7/D,WAAa,SAAS7I,EAAQS,GAC5C,OAAOnI,EAAOwR,OAAO4xD,YAAY,WAAY17D,EAAQS,EAAU,YA/PnE,CAkQoCjI,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAE3CA,EAAO+wE,QACT/wE,EAAOyrB,KAAK,sCAUdzrB,EAAO+wE,QAAU/wE,EAAOgG,KAAKke,YAAYlkB,EAAOowE,SAAiD,CAO/F9nE,KAAM,UAMNg+C,QAAS,SAAS3kD,GACXgB,KAAKiuE,aAAajvE,KAGvBA,EAAI4+C,YACJ59C,KAAK2/D,oBAAoB3gE,KAO3B8gE,oBAAqB,SAAS9gE,GAC5BgB,KAAKkhB,UAAU,sBAAuBliB,GACtCA,EAAI4+C,eAWRvgD,EAAO+wE,QAAQlC,gBAAkB7uE,EAAO0D,kBAAkB6E,SAU1DvI,EAAO+wE,QAAQ52C,YAAcn6B,EAAOowE,SAASS,qBAAqB,WAUlE7wE,EAAO+wE,QAAQxgE,WAAa,SAAS7I,EAAQS,GAC3C,OAAOnI,EAAOwR,OAAO4xD,YAAY,UAAW17D,EAAQS,EAAU,YA5ElE,CA+EoCjI,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3CiL,EAAMjL,EAAOgG,KAAKC,MAAMgF,IACxBC,EAAMlL,EAAOgG,KAAKC,MAAMiF,IACxB6W,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BivD,EAAYx/D,OAAOC,UAAUC,SAC7BtE,EAAUpN,EAAOgG,KAAKoH,QAEtBpN,EAAOonD,KACTpnD,EAAOyrB,KAAK,mCAWdzrB,EAAOonD,KAAOpnD,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA4C,CAOvFlJ,KAAM,OAON2I,KAAM,KAENssD,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,OAAQ,YAExE+0D,gBAAiBt9D,EAAOwR,OAAOC,UAAU6rD,gBAAgB/0D,OAAO,QAQhE4b,WAAY,SAASlT,EAAM5K,GACzBA,EAAUA,GAAW,GACrB1D,KAAKkhB,UAAU,aAAcxd,GACxB4K,IACHA,EAAO,IAGT,IAAIggE,EAAqC,mBAAzBD,EAAUtqE,KAAKuK,GAE/BtO,KAAKsO,KAAOggE,EACRjxE,EAAOgG,KAAKma,gBAAgBlP,GAE5BjR,EAAOgG,KAAKma,gBACZngB,EAAOgG,KAAK+Y,UAAU9N,IAGrBtO,KAAKsO,MAGVjR,EAAOowE,SAAS3+D,UAAU4+D,uBAAuB3pE,KAAK/D,KAAM0D,IAO9D6qE,oBAAqB,SAASvvE,GAC5B,IAAIqH,EACAmoE,EAAgB,EAChBC,EAAgB,EAChBplE,EAAI,EACJC,EAAI,EACJqU,EAAW,EACXC,EAAW,EACX1L,GAAKlS,KAAKq0C,WAAWhrC,EACrBM,GAAK3J,KAAKq0C,WAAW/qC,EAEzBtK,EAAIuxC,YAEJ,IAAK,IAAI3sC,EAAI,EAAGC,EAAM7D,KAAKsO,KAAKxK,OAAQF,EAAIC,IAAOD,EAIjD,QAFAyC,EAAUrG,KAAKsO,KAAK1K,IAEJ,IAEd,IAAK,IACHyF,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZrH,EAAI2+C,OAAOt0C,EAAI6I,EAAG5I,EAAIK,GACtB,MAEF,IAAK,IAGH6kE,EAFAnlE,EAAIhD,EAAQ,GAGZooE,EAFAnlE,EAAIjD,EAAQ,GAGZrH,EAAI2Q,OAAOtG,EAAI6I,EAAG5I,EAAIK,GACtB,MAEF,IAAK,IACHN,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZsX,EAAWtX,EAAQ,GACnBuX,EAAWvX,EAAQ,GACnBrH,EAAI4f,cACFvY,EAAQ,GAAK6L,EACb7L,EAAQ,GAAKsD,EACbgU,EAAWzL,EACX0L,EAAWjU,EACXN,EAAI6I,EACJ5I,EAAIK,GAEN,MAEF,IAAK,IACH3K,EAAIskD,iBACFj9C,EAAQ,GAAK6L,EACb7L,EAAQ,GAAKsD,EACbtD,EAAQ,GAAK6L,EACb7L,EAAQ,GAAKsD,GAEfN,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZsX,EAAWtX,EAAQ,GACnBuX,EAAWvX,EAAQ,GACnB,MAEF,IAAK,IACL,IAAK,IACHgD,EAAImlE,EACJllE,EAAImlE,EACJzvE,EAAI4+C,cAUZ+F,QAAS,SAAS3kD,GAChBgB,KAAKuuE,oBAAoBvvE,GACzBgB,KAAK2/D,oBAAoB3gE,IAO3B+P,SAAU,WACR,MAAO,kBAAoB/O,KAAKkG,aAC9B,eAAiBlG,KAAKqK,IAAM,aAAerK,KAAKoK,KAAO,OAQ3DwpC,SAAU,SAASC,GACjB,OAAOz0B,EAAOpf,KAAKkhB,UAAU,WAAY2yB,GAAsB,CAC7DvlC,KAAMtO,KAAKsO,KAAKkF,KAAI,SAAS1N,GAAQ,OAAOA,EAAK6F,cASrD6yC,iBAAkB,SAAS3K,GACzB,IAAIhuC,EAAI7F,KAAK4zC,SAAS,CAAC,cAAchuC,OAAOiuC,IAI5C,OAHIhuC,EAAE4I,mBACG5I,EAAEyI,KAEJzI,GASTwiE,OAAQ,WAIN,MAAO,CACL,SAAU,eACV,MALSroE,KAAKsO,KAAKkF,KAAI,SAASlF,GAChC,OAAOA,EAAKoF,KAAK,QAChBA,KAAK,KAIN,4BACA,SAIJg7D,oBAAqB,WACnB,IAAIC,EAAStxE,EAAOwR,OAAO4E,oBAC3B,MAAO,cAAgBhJ,GAASzK,KAAKq0C,WAAWhrC,EAAGslE,GAAU,KACzDlkE,GAASzK,KAAKq0C,WAAW/qC,EAAGqlE,GAAU,KAQ5C5uB,cAAe,SAASzyC,GACtB,IAAI6mC,EAAsBn0C,KAAK0uE,sBAC/B,MAAO,KAAO1uE,KAAKsoE,6BACjBtoE,KAAKqoE,SAAU,CAAE/6D,QAASA,EAAS6mC,oBAAqBA,KAS5DL,MAAO,SAASxmC,GACd,IAAI6mC,EAAsBn0C,KAAK0uE,sBAC/B,OAAO1uE,KAAKooE,qBAAqBpoE,KAAKqoE,SAAU,CAAE/6D,QAASA,EAAS6mC,oBAAqBA,KAQ3FjuC,WAAY,WACV,OAAOlG,KAAKsO,KAAKxK,QAMnB+pE,gBAAiB,WAWf,IATA,IAEIxnE,EAKAyS,EAPA81D,EAAK,GACLC,EAAK,GAELL,EAAgB,EAChBC,EAAgB,EAChBplE,EAAI,EACJC,EAAI,EAGC1F,EAAI,EAAGC,EAAM7D,KAAKsO,KAAKxK,OAAQF,EAAIC,IAAOD,EAAG,CAIpD,QAFAyC,EAAUrG,KAAKsO,KAAK1K,IAEJ,IAEd,IAAK,IACHyF,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZyS,EAAS,GACT,MAEF,IAAK,IAGH01D,EAFAnlE,EAAIhD,EAAQ,GAGZooE,EAFAnlE,EAAIjD,EAAQ,GAGZyS,EAAS,GACT,MAEF,IAAK,IACHA,EAASzb,EAAOgG,KAAK4U,iBAAiB5O,EAAGC,EACvCjD,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IAEVgD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ,MAEF,IAAK,IACHyS,EAASzb,EAAOgG,KAAK4U,iBAAiB5O,EAAGC,EACvCjD,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,GACRA,EAAQ,IAEVgD,EAAIhD,EAAQ,GACZiD,EAAIjD,EAAQ,GACZ,MAEF,IAAK,IACL,IAAK,IACHgD,EAAImlE,EACJllE,EAAImlE,EAGR31D,EAAOnL,SAAQ,SAAU5E,GACvB6lE,EAAGvqE,KAAK0E,EAAMM,GACdwlE,EAAGxqE,KAAK0E,EAAMO,MAEhBslE,EAAGvqE,KAAKgF,GACRwlE,EAAGxqE,KAAKiF,GAGV,IAAIW,EAAO3B,EAAIsmE,IAAO,EAClBzkE,EAAO7B,EAAIumE,IAAO,EAMtB,MAAO,CACLzkE,KAAMH,EACNI,IAAKF,EACL5K,OARSgJ,EAAIqmE,IAAO,GAEF3kE,EAOlB9K,QARSoJ,EAAIsmE,IAAO,GAEF1kE,MAkBxB9M,EAAOonD,KAAK72C,WAAa,SAAS7I,EAAQS,GACxC,GAAiC,kBAAtBT,EAAO0J,WAAyB,CACzC,IAAIqgE,EAAU/pE,EAAO0J,WACrBpR,EAAOs5B,eAAem4C,GAAS,SAAUzgE,GACvC,IAAIC,EAAOD,EAAS,GACpBC,EAAKinC,WAAWxwC,GAChBS,GAAYA,EAAS8I,WAIvBjR,EAAOwR,OAAO4xD,YAAY,OAAQ17D,EAAQS,EAAU,SAWxDnI,EAAOonD,KAAKynB,gBAAkB7uE,EAAO0D,kBAAkB6E,OAAO,CAAC,MAW/DvI,EAAOonD,KAAKjtB,YAAc,SAASzV,EAASvc,EAAU9B,GACpD,IAAIyoE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAOonD,KAAKynB,iBACnEC,EAAiB2B,SAAU,EAC3BtoE,EAAS,IAAInI,EAAOonD,KAAK0nB,EAAiBljD,EAAG7J,EAAO+sD,EAAkBzoE,OAvX1E,CA2XoCnG,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3CiL,EAAMjL,EAAOgG,KAAKC,MAAMgF,IACxBC,EAAMlL,EAAOgG,KAAKC,MAAMiF,IAExBlL,EAAOmR,QAYXnR,EAAOmR,MAAQnR,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAAQxR,EAAOkH,WAAiD,CAO5GoB,KAAM,QAON6oC,YAAa,EAOb8e,gBAAgB,EAOhBsN,gBAAiB,GASjBmU,eAAe,EASfvtD,WAAY,SAAStc,EAASxB,EAASsrE,GACrCtrE,EAAUA,GAAW,GACrB1D,KAAKwE,SAAW,GAIhBwqE,GAAoBhvE,KAAKkhB,UAAU,aAAcxd,GACjD1D,KAAKwE,SAAWU,GAAW,GAC3B,IAAK,IAAItB,EAAI5D,KAAKwE,SAASV,OAAQF,KACjC5D,KAAKwE,SAASZ,GAAGu3C,MAAQn7C,KAG3B,GAAKgvE,EAoBHhvE,KAAKivE,4BApBgB,CACrB,IAAIh7D,EAASvQ,GAAWA,EAAQ6K,iBAKR7B,IAApBhJ,EAAQ0lC,UACVppC,KAAKopC,QAAU1lC,EAAQ0lC,cAED18B,IAApBhJ,EAAQ2lC,UACVrpC,KAAKqpC,QAAU3lC,EAAQ2lC,SAIzBp1B,GAAUjU,KAAKkvE,cACflvE,KAAKmvE,qBAAqBl7D,UACnBvQ,EAAQ6K,YACfvO,KAAKkhB,UAAU,aAAcxd,GAM/B1D,KAAKo7C,aAMP6zB,sBAAuB,WAErB,IADA,IACSrrE,EAAI5D,KAAKwE,SAASV,OAAQF,KACjC5D,KAAKwE,SAASZ,GAAGw3C,UAFA,OAUrB+zB,qBAAsB,SAASl7D,GACzBA,EAASA,GAAUjU,KAAKkqC,iBAC5B,IADA,IACStmC,EAAI5D,KAAKwE,SAASV,OAAQF,KACjC5D,KAAKovE,oBAAoBpvE,KAAKwE,SAASZ,GAAIqQ,IAS/Cm7D,oBAAqB,SAASrqE,EAAQkP,GACpC,IAAIo7D,EAAatqE,EAAOqF,KACpBklE,EAAYvqE,EAAOsF,IAGvBtF,EAAOyB,IAAI,CACT4D,KAAMilE,EAAap7D,EAAO5K,EAC1BgB,IAAKilE,EAAYr7D,EAAO3K,IAE1BvE,EAAOo2C,MAAQn7C,KACf+E,EAAOq2C,WAPY,IAcrBrsC,SAAU,WACR,MAAO,oBAAsB/O,KAAKkG,aAAe,MASnD0wD,cAAe,SAAS7xD,GACtB,IAAIwqE,IAAWvvE,KAAKm7C,MAqBpB,OApBAn7C,KAAKwvE,uBACLnyE,EAAOgG,KAAKqO,qBAAqB1R,MAC7B+E,IACEwqE,GAEFlyE,EAAOgG,KAAKsQ,0BAA0B5O,EAAQ/E,KAAKm7C,MAAMpiB,uBAE3D/4B,KAAKwE,SAASH,KAAKU,GACnBA,EAAOo2C,MAAQn7C,KACf+E,EAAOoC,KAAK,SAAUnH,KAAKlB,SAE7BkB,KAAKkvE,cACLlvE,KAAKmvE,uBACLnvE,KAAKy6D,OAAQ,EACT8U,EACFvvE,KAAKm7C,MAAMyb,gBAGX52D,KAAKo7C,YAEAp7C,MAST22D,iBAAkB,SAAS5xD,GASzB,OARA/E,KAAKwvE,uBACLnyE,EAAOgG,KAAKqO,qBAAqB1R,MAEjCA,KAAKoF,OAAOL,GACZ/E,KAAKkvE,cACLlvE,KAAKmvE,uBACLnvE,KAAKo7C,YACLp7C,KAAKy6D,OAAQ,EACNz6D,MAMT2E,eAAgB,SAASI,GACvB/E,KAAKy6D,OAAQ,EACb11D,EAAOo2C,MAAQn7C,KACf+E,EAAOoC,KAAK,SAAUnH,KAAKlB,SAM7BwG,iBAAkB,SAASP,GACzB/E,KAAKy6D,OAAQ,SACN11D,EAAOo2C,OAMhBh0C,KAAM,SAASC,EAAKnD,GAClB,IAAIL,EAAI5D,KAAKwE,SAASV,OACtB,GAAI9D,KAAK+uE,cACP,KAAOnrE,KACL5D,KAAKwE,SAASZ,GAAGu5D,WAAW/1D,EAAKnD,GAGrC,GAAY,WAARmD,EACF,KAAOxD,KACL5D,KAAKwE,SAASZ,GAAGuD,KAAKC,EAAKnD,GAG/B5G,EAAOwR,OAAOC,UAAU3H,KAAKpD,KAAK/D,KAAMoH,EAAKnD,IAQ/C2vC,SAAU,SAASC,GACjB,IAAI47B,EAAwBzvE,KAAKs2C,qBAC7Bo5B,EAAe1vE,KAAKwE,SAASgP,KAAI,SAAStM,GAC5C,IAAIyoE,EAAmBzoE,EAAIovC,qBAC3BpvC,EAAIovC,qBAAuBm5B,EAC3B,IAAIG,EAAO1oE,EAAI0sC,SAASC,GAExB,OADA3sC,EAAIovC,qBAAuBq5B,EACpBC,KAEL1oE,EAAM7J,EAAOwR,OAAOC,UAAU8kC,SAAS7vC,KAAK/D,KAAM6zC,GAEtD,OADA3sC,EAAIhC,QAAUwqE,EACPxoE,GAQTs3C,iBAAkB,SAAS3K,GACzB,IAAI67B,EAAcjhE,EAAazO,KAAKyO,WACpC,GAAIA,EACFihE,EAAejhE,MAEZ,CACH,IAAIghE,EAAwBzvE,KAAKs2C,qBACjCo5B,EAAe1vE,KAAKwE,SAASgP,KAAI,SAAStM,GACxC,IAAIyoE,EAAmBzoE,EAAIovC,qBAC3BpvC,EAAIovC,qBAAuBm5B,EAC3B,IAAIG,EAAO1oE,EAAIs3C,iBAAiB3K,GAEhC,OADA3sC,EAAIovC,qBAAuBq5B,EACpBC,KAGX,IAAI1oE,EAAM7J,EAAOwR,OAAOC,UAAU0vC,iBAAiBz6C,KAAK/D,KAAM6zC,GAE9D,OADA3sC,EAAIhC,QAAUwqE,EACPxoE,GAOTgsC,OAAQ,SAASl0C,GACfgB,KAAK88C,gBAAiB,EACtB98C,KAAKkhB,UAAU,SAAUliB,GACzBgB,KAAK88C,gBAAiB,GAUxBD,YAAa,WACX,IAAIgzB,EAAWxyE,EAAOwR,OAAOC,UAAU+tC,YAAY94C,KAAK/D,MACxD,GAAI6vE,EACF,IAAK,IAAIjsE,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD,GAAI5D,KAAKwE,SAASZ,GAAGu6D,iBAEnB,OADAn+D,KAAKk+D,YAAa,GACX,EAIb,OAAO2R,GAOT1R,eAAgB,WACd,GAAI9gE,EAAOwR,OAAOC,UAAUqvD,eAAep6D,KAAK/D,MAC9C,OAAO,EAET,IAAK,IAAI4D,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD,GAAI5D,KAAKwE,SAASZ,GAAGu6D,iBACnB,OAAO,EAGX,OAAO,GAOTjB,WAAY,WACV,OAAOl9D,KAAKk+D,YAAel+D,KAAKm7C,OAASn7C,KAAKm7C,MAAM+hB,cAOtDU,WAAY,SAAS5+D,GACnB,IAAK,IAAI4E,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD5D,KAAKwE,SAASZ,GAAGsvC,OAAOl0C,GAE1BgB,KAAKw+D,cAAcx/D,IAMrB8+D,aAAc,SAASW,GACrB,GAAIz+D,KAAKkhB,UAAU,eAAgBu9C,GACjC,OAAO,EAET,IAAKz+D,KAAKu6D,eACR,OAAO,EAET,IAAK,IAAI32D,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD,GAAI5D,KAAKwE,SAASZ,GAAGk6D,cAAa,GAAO,CACvC,GAAI99D,KAAKs9C,aAAc,CAErB,IAAIj0C,EAAIrJ,KAAK87D,WAAa97D,KAAKo9C,MAAO9zC,EAAItJ,KAAK+7D,YAAc/7D,KAAKq9C,MAClEr9C,KAAK4qD,cAAc7O,WAAW1yC,EAAI,GAAIC,EAAI,EAAGD,EAAGC,GAElD,OAAO,EAGX,OAAO,GAYTkmE,qBAAsB,WACpB,IAAIM,EAAc9vE,KAAK8T,gBAOvB,OANA9T,KAAKwE,SAASmJ,SAAQ,SAAS5I,GAE7B1H,EAAOgG,KAAK2Q,qBAAqBjP,EAAQ+qE,UAClC/qE,EAAOo2C,MACdp2C,EAAOq2C,eAEFp7C,MAiBT+vE,iBAAkB,SAAShrE,EAAQirE,GAEjC,OADA3yE,EAAOgG,KAAK2Q,qBAAqBjP,EAAQirE,GAClCjrE,GAQTkrE,QAAS,WAMP,OAHAjwE,KAAKwE,SAASmJ,SAAQ,SAAS5I,GAC7BA,EAAOyB,IAAI,SAAS,MAEfxG,KAAKwvE,wBASdU,kBAAmB,WACjB,GAAKlwE,KAAKlB,OAAV,CAGA,IAAIoG,EAAUlF,KAAKwE,SAAU1F,EAASkB,KAAKlB,OAC3CkB,KAAKwE,SAAW,GAChB,IAAId,EAAU1D,KAAK4zC,kBACZlwC,EAAQwB,QACf,IAAIw7C,EAAkB,IAAIrjD,EAAO25D,gBAAgB,IAajD,OAZAtW,EAAgBl6C,IAAI9C,GACpBg9C,EAAgB/6C,KAAO,kBACvB7G,EAAOsG,OAAOpF,MACdkF,EAAQyI,SAAQ,SAAS5I,GACvBA,EAAOo2C,MAAQuF,EACf37C,EAAO01D,OAAQ,EACf37D,EAAO2F,IAAIM,MAEb27C,EAAgB5hD,OAASA,EACzB4hD,EAAgBl8C,SAAWU,EAC3BpG,EAAOk8C,cAAgB0F,EACvBA,EAAgBtF,YACTsF,IAQTyvB,gBAAiB,WACf,OAAOnwE,KAAKwvE,wBAQdY,iBAAkB,WAKhB,OAHApwE,KAAKuF,eAAc,SAASR,GAC1BA,EAAOq2C,UAFU,SAIZp7C,MAMTkvE,YAAa,SAASmB,GAQpB,IAPA,IAEIxqE,EAAGzB,EAAMiV,EAGTL,EALA41D,EAAK,GACLC,EAAK,GAEL1F,EAAQ,CAAC,KAAM,KAAM,KAAM,MAC3BvlE,EAAI,EAAG0sE,EAAOtwE,KAAKwE,SAASV,OACzBysE,EAAOpH,EAAMrlE,OAEZF,EAAI0sE,IAAQ1sE,EAAG,CAGrB,IADAyV,GADAxT,EAAI7F,KAAKwE,SAASZ,IACPsgE,cACNlrD,EAAI,EAAGA,EAAIu3D,EAAMv3D,IACpB5U,EAAO+kE,EAAMnwD,GACb41D,EAAGvqE,KAAKgV,EAAOjV,GAAMiF,GACrBwlE,EAAGxqE,KAAKgV,EAAOjV,GAAMkF,GAEvBzD,EAAE89D,QAAUtqD,EAGdrZ,KAAKwwE,WAAW5B,EAAIC,EAAIwB,IAM1BG,WAAY,SAAS5B,EAAIC,EAAIwB,GAC3B,IAAII,EAAQ,IAAIpzE,EAAO+L,MAAMd,EAAIsmE,GAAKtmE,EAAIumE,IACtC6B,EAAQ,IAAIrzE,EAAO+L,MAAMb,EAAIqmE,GAAKrmE,EAAIsmE,IACtCxkE,EAAMomE,EAAMnnE,GAAK,EAAGc,EAAOqmE,EAAMpnE,GAAK,EACtC9J,EAASmxE,EAAMrnE,EAAIonE,EAAMpnE,GAAM,EAC/BlK,EAAUuxE,EAAMpnE,EAAImnE,EAAMnnE,GAAM,EACpCtJ,KAAKT,MAAQA,EACbS,KAAKb,OAASA,EACTkxE,GAGHrwE,KAAKkU,oBAAoB,CAAE7K,EAAGe,EAAMd,EAAGe,GAAO,OAAQ,QAU1Dg+D,OAAQ,SAAS/6D,GAGf,IAFA,IAAIk/D,EAAY,CAAC,MAAO,eAAgB,QAE/B5oE,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD4oE,EAAUnoE,KAAK,OAAQrE,KAAKwE,SAASZ,GAAGkwC,MAAMxmC,IAGhD,OADAk/D,EAAUnoE,KAAK,UACRmoE,GAOTpF,aAAc,WACZ,IAAInkD,EAAkC,qBAAjBjjB,KAAKijB,SAA4C,IAAjBjjB,KAAKijB,QACpD,YAAcjjB,KAAKijB,QAAU,IAAM,GACrCqL,EAAatuB,KAAK+uB,QAAU,GAAK,uBACrC,MAAO,CACL9L,EACAjjB,KAAKsnE,eACLh5C,GACA5a,KAAK,KAQTqsC,cAAe,SAASzyC,GAGtB,IAFA,IAAIk/D,EAAY,GAEP5oE,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD4oE,EAAUnoE,KAAK,KAAMrE,KAAKwE,SAASZ,GAAGm8C,cAAczyC,IAGtD,OAAOtN,KAAKsoE,6BAA6BkE,EAAW,CAAEl/D,QAASA,OAYnEjQ,EAAOmR,MAAMZ,WAAa,SAAS7I,EAAQS,GACzC,IAAIN,EAAUH,EAAOG,QACjBxB,EAAUrG,EAAOgG,KAAK0B,OAAOya,MAAMza,GAAQ,UACxCrB,EAAQwB,QACQ,kBAAZA,EASX7H,EAAOgG,KAAKgK,eAAenI,GAAS,SAASqI,GAC3ClQ,EAAOgG,KAAKgK,eAAe,CAACtI,EAAO+zB,WAAW,SAAS63C,GACrD,IAAIjtE,EAAUrG,EAAOgG,KAAK0B,OAAOya,MAAMza,GAAQ,GAC/CrB,EAAQo1B,SAAW63C,EAAgB,UAC5BjtE,EAAQwB,QACfM,GAAYA,EAAS,IAAInI,EAAOmR,MAAMjB,EAAkB7J,GAAS,UAZnErG,EAAOs5B,eAAezxB,GAAS,SAAUmJ,GACvC,IAAI8sC,EAAQ99C,EAAOgG,KAAK+K,iBAAiBC,EAAUtJ,EAAQG,GAC3Di2C,EAAM30C,IAAI9C,GACV8B,GAAYA,EAAS21C,QAnkB7B,CAilBoC59C,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAE3CA,EAAO25D,kBAWX35D,EAAO25D,gBAAkB35D,EAAOgG,KAAKke,YAAYlkB,EAAOmR,MAAsD,CAO5G7I,KAAM,kBAQN6b,WAAY,SAAStc,EAASxB,GAC5BA,EAAUA,GAAW,GACrB1D,KAAKwE,SAAWU,GAAW,GAC3B,IAAK,IAAItB,EAAI5D,KAAKwE,SAASV,OAAQF,KACjC5D,KAAKwE,SAASZ,GAAGu3C,MAAQn7C,KAGvB0D,EAAQ0lC,UACVppC,KAAKopC,QAAU1lC,EAAQ0lC,SAErB1lC,EAAQ2lC,UACVrpC,KAAKqpC,QAAU3lC,EAAQ2lC,SAEzBrpC,KAAKkvE,cACLlvE,KAAKmvE,uBACL9xE,EAAOwR,OAAOC,UAAU0S,WAAWzd,KAAK/D,KAAM0D,GAC9C1D,KAAKo7C,aAUPw1B,QAAS,WACP,IAAI1rE,EAAUlF,KAAKwE,SAASoB,SAC5B5F,KAAKwE,SAAW,GAChB,IAAId,EAAUrG,EAAOwR,OAAOC,UAAU8kC,SAAS7vC,KAAK/D,MAChD6wE,EAAW,IAAIxzE,EAAOmR,MAAM,IAQhC,UAPO9K,EAAQiC,KACfkrE,EAASrqE,IAAI9C,GACbwB,EAAQyI,SAAQ,SAAS5I,GACvBA,EAAOjG,OAAOsG,OAAOL,GACrBA,EAAOo2C,MAAQ01B,KAEjBA,EAASrsE,SAAWU,GACflF,KAAKlB,OACR,OAAO+xE,EAET,IAAI/xE,EAASkB,KAAKlB,OAIlB,OAHAA,EAAO2F,IAAIosE,GACX/xE,EAAOk8C,cAAgB61B,EACvBA,EAASz1B,YACFy1B,GAQTzhB,WAAY,WAEV,OADApvD,KAAKiwE,WACE,GAOTlhE,SAAU,WACR,MAAO,8BAAgC/O,KAAKkG,aAAe,MAW7D22C,YAAa,WACX,OAAO,GAOTqgB,WAAY,WACV,OAAO,GAST3N,gBAAiB,SAASvwD,EAAKywC,EAAeqhC,GAC5C9xE,EAAI0Q,OACJ1Q,EAAI0nD,YAAc1mD,KAAKm0D,SAAWn0D,KAAKg6D,wBAA0B,EACjEh6D,KAAKkhB,UAAU,kBAAmBliB,EAAKywC,GAEK,qBAD5CqhC,EAAmBA,GAAoB,IACX3W,cAC1B2W,EAAiB3W,aAAc,GAEjC2W,EAAiBxR,oBAAqB,EACtC,IAAK,IAAI17D,EAAI,EAAGC,EAAM7D,KAAKwE,SAASV,OAAQF,EAAIC,EAAKD,IACnD5D,KAAKwE,SAASZ,GAAG2rD,gBAAgBvwD,EAAK8xE,GAExC9xE,EAAI6Q,aAWRxS,EAAO25D,gBAAgBppD,WAAa,SAAS7I,EAAQS,GACnDnI,EAAOgG,KAAKgK,eAAetI,EAAOG,SAAS,SAASqI,UAC3CxI,EAAOG,QACdM,GAAYA,EAAS,IAAInI,EAAO25D,gBAAgBzpD,EAAkBxI,GAAQ,SAtJhF,CA0JoCxH,GAGpC,SAAUgK,GAER,aAEA,IAAI6X,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAE3B7X,EAAOlK,SACVkK,EAAOlK,OAAS,IAGdkK,EAAOlK,OAAOu6B,MAChBv6B,EAAOyrB,KAAK,qCAWdzrB,EAAOu6B,MAAQv6B,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA6C,CAOzFlJ,KAAM,QAQN6oC,YAAa,EASbuiC,kBAAkB,EAQlBC,YAAa,EAQbC,YAAa,EAObC,gBAAiB,EAOjBC,gBAAiB,EAQjBC,oBAAqB,GAQrBzW,gBAAiBt9D,EAAOwR,OAAOC,UAAU6rD,gBAAgB/0D,OAAO,QAAS,SASzEg1D,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAO,QAAS,SAQzEyrE,SAAU,GAQVjR,MAAO,EAQPC,MAAO,EASPiR,gBAAgB,EAahB9vD,WAAY,SAASO,EAASre,GAC5BA,IAAYA,EAAU,IACtB1D,KAAKuxE,QAAU,GACfvxE,KAAKqxE,SAAW,UAAYh0E,EAAOwR,OAAOilB,QAC1C9zB,KAAKkhB,UAAU,aAAcxd,GAC7B1D,KAAKwxE,aAAazvD,EAASre,IAO7Bk4C,WAAY,WACV,OAAO57C,KAAKyxE,UAAY,IAY1BC,WAAY,SAAS3vD,EAASre,GAgB5B,OAfA1D,KAAK2xE,cAAc3xE,KAAKqxE,UACxBrxE,KAAK2xE,cAAc3xE,KAAKqxE,SAAW,aACnCrxE,KAAKyxE,SAAW1vD,EAChB/hB,KAAK63B,iBAAmB9V,EACxB/hB,KAAK4xE,YAAYluE,GACW,IAAxB1D,KAAKuxE,QAAQztE,QACf9D,KAAK6xE,eAMH7xE,KAAK8xE,cACP9xE,KAAK+xE,qBAEA/xE,MAMT2xE,cAAe,SAASvqE,GACtB,IAAI4qE,EAAU30E,EAAO40E,cACjBD,GAAWA,EAAQE,mBACrBF,EAAQE,kBAAkB9qE,IAO9Bi6C,QAAS,WACPrhD,KAAK2xE,cAAc3xE,KAAKqxE,UACxBrxE,KAAK2xE,cAAc3xE,KAAKqxE,SAAW,aACnCrxE,KAAK4qD,mBAAgBl+C,EACrB,CAAC,mBAAoB,WAAY,cAAe,gBAAgBiB,QAAS,SAASoU,GAChF1kB,EAAOgG,KAAKwkB,iBAAiB7nB,KAAK+hB,IAClC/hB,KAAK+hB,QAAWrV,GACf0qC,KAAKp3C,QAMVmyE,eAAgB,WACd,OAAOnyE,KAAK63B,mBAAqB73B,KAAK63B,iBAAiB1rB,aAAe,OAOxEimE,gBAAiB,WACf,IAAIrwD,EAAU/hB,KAAK47C,aACnB,MAAO,CACLr8C,MAAOwiB,EAAQi0B,cAAgBj0B,EAAQxiB,MACvCJ,OAAQ4iB,EAAQk0B,eAAiBl0B,EAAQ5iB,SAQ7CkzE,QAAS,SAASrzE,GAChB,GAAKgB,KAAKwuB,QAA+B,IAArBxuB,KAAKwuC,YAAzB,CAGA,IAAI+3B,EAAIvmE,KAAKT,MAAQ,EAAGqV,EAAI5U,KAAKb,OAAS,EAC1CH,EAAIuxC,YACJvxC,EAAI2Q,QAAQ42D,GAAI3xD,GAChB5V,EAAI2+C,OAAO4oB,GAAI3xD,GACf5V,EAAI2+C,OAAO4oB,EAAG3xD,GACd5V,EAAI2+C,QAAQ4oB,EAAG3xD,GACf5V,EAAI2+C,QAAQ4oB,GAAI3xD,GAChB5V,EAAI4+C,cAONkiB,oBAAqB,SAAS9gE,GAC5B,IAAIqK,GAAKrJ,KAAKT,MAAQ,EAClB+J,GAAKtJ,KAAKb,OAAS,EACnBonE,EAAIvmE,KAAKT,MACTqV,EAAI5U,KAAKb,OAEbH,EAAI0Q,OACJ1P,KAAK4+D,iBAAiB5/D,EAAKgB,MAE3BhB,EAAIuxC,YACJlzC,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAGC,EAAGD,EAAIk9D,EAAGj9D,EAAGtJ,KAAKiiD,iBACrD5kD,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAIk9D,EAAGj9D,EAAGD,EAAIk9D,EAAGj9D,EAAIsL,EAAG5U,KAAKiiD,iBAC7D5kD,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAIk9D,EAAGj9D,EAAIsL,EAAGvL,EAAGC,EAAIsL,EAAG5U,KAAKiiD,iBAC7D5kD,EAAOgG,KAAK2L,eAAehQ,EAAKqK,EAAGC,EAAIsL,EAAGvL,EAAGC,EAAGtJ,KAAKiiD,iBACrDjjD,EAAI4+C,YACJ5+C,EAAI6Q,WAQN+jC,SAAU,SAASC,GACjB,IAAI09B,EAAU,GAEdvxE,KAAKuxE,QAAQ5jE,SAAQ,SAAS2kE,GACxBA,GACFf,EAAQltE,KAAKiuE,EAAU1+B,eAG3B,IAAI7uC,EAASqa,EACXpf,KAAKkhB,UACH,WACA,CAAC,QAAS,SAAStb,OAAOiuC,IACzB,CACDpnC,IAAKzM,KAAKuyE,SACVpmE,YAAanM,KAAKmyE,iBAClBZ,QAASA,IAKb,OAHIvxE,KAAK8xE,eACP/sE,EAAO+sE,aAAe9xE,KAAK8xE,aAAal+B,YAEnC7uC,GAOTytE,QAAS,WACP,OAAOxyE,KAAKogE,OAASpgE,KAAKqgE,OAASrgE,KAAKT,MAAQS,KAAKyxE,SAASlyE,OAASS,KAAKb,OAASa,KAAKyxE,SAAStyE,QASrGkpE,OAAQ,WACN,IAAsCoK,EAAlCjG,EAAY,GAAIkG,EAAc,GAAe3wD,EAAU/hB,KAAKyxE,SAC5DpoE,GAAKrJ,KAAKT,MAAQ,EAAG+J,GAAKtJ,KAAKb,OAAS,EAAG25B,EAAW,GAAI65C,EAAiB,GAC/E,IAAK5wD,EACH,MAAO,GAET,GAAI/hB,KAAKwyE,UAAW,CAClB,IAAInzB,EAAahiD,EAAOwR,OAAOilB,QAC/B04C,EAAUnoE,KACR,2BAA6Bg7C,EAAa,OAC1C,cAAgBh2C,EAAI,QAAUC,EAAI,YAActJ,KAAKT,MAAQ,aAAeS,KAAKb,OAAS,SAC1F,iBAEF25B,EAAW,8BAAgCumB,EAAa,MAgB1D,GAdKr/C,KAAKsxE,iBACRqB,EAAiB,oCAEnBD,EAAYruE,KAAK,YAAa,eAAgB,eAAgBrE,KAAK4yE,WAAU,GAC3E,QAASvpE,EAAIrJ,KAAKogE,MAAO,QAAS92D,EAAItJ,KAAKqgE,MAI3C,YAAat+C,EAAQxiB,OAASwiB,EAAQi0B,aACtC,aAAcj0B,EAAQ5iB,QAAU4iB,EAAQ5iB,OACxCwzE,EACA,IAAK75C,EACL,eAEE94B,KAAKwuB,QAAUxuB,KAAKiiD,gBAAiB,CACvC,IAAI4wB,EAAW7yE,KAAKuD,KACpBvD,KAAKuD,KAAO,KACZkvE,EAAY,CACV,WACA,MAAOppE,EAAG,QAASC,EACnB,YAAatJ,KAAKT,MAAO,aAAcS,KAAKb,OAC5C,YAAaa,KAAKonE,eAClB,SAEFpnE,KAAKuD,KAAOsvE,EAQd,OALErG,EADsB,SAApBxsE,KAAK06D,WACK8R,EAAU5mE,OAAO6sE,EAAWC,GAG5BlG,EAAU5mE,OAAO8sE,EAAaD,IAW9CF,OAAQ,SAASO,GACf,IAAI/wD,EAAU+wD,EAAW9yE,KAAKyxE,SAAWzxE,KAAK63B,iBAC9C,OAAI9V,EACEA,EAAQ9R,UACH8R,EAAQ9R,YAGbjQ,KAAK+wE,iBACAhvD,EAAQmO,aAAa,OAGrBnO,EAAQtV,IAIVzM,KAAKyM,KAAO,IAcvBsmE,OAAQ,SAAStmE,EAAKjH,EAAU9B,GAM9B,OALArG,EAAOgG,KAAK4I,UAAUQ,GAAK,SAASL,EAAKopC,GACvCx1C,KAAK0xE,WAAWtlE,EAAK1I,GACrB1D,KAAK2rE,kBACLnmE,GAAYA,EAASxF,KAAMw1C,KAC1Bx1C,KAAM0D,GAAWA,EAAQyI,aACrBnM,MAOT+O,SAAU,WACR,MAAO,2BAA6B/O,KAAKuyE,SAAW,QAGtDR,mBAAoB,WAClB,IAAI/tE,EAAShE,KAAK8xE,aACdkB,EAAehzE,KAAKoxE,oBACpB9V,EAAct7D,KAAKu7D,wBACnB7qD,EAAS4qD,EAAY5qD,OACrBC,EAAS2qD,EAAY3qD,OACrBsiE,EAAkBjzE,KAAKkzE,aAAelzE,KAAK63B,iBAI/C,GAHI73B,KAAKm7C,OACPn7C,KAAKwG,IAAI,SAAS,IAEfxC,GAAW0M,EAASsiE,GAAgBriE,EAASqiE,EAMhD,OALAhzE,KAAKyxE,SAAWwB,EAChBjzE,KAAKkxE,gBAAkB,EACvBlxE,KAAKmxE,gBAAkB,EACvBnxE,KAAKgxE,YAActgE,OACnB1Q,KAAKixE,YAActgE,GAGhBtT,EAAO40E,gBACV50E,EAAO40E,cAAgB50E,EAAOkF,qBAEhC,IAAI2N,EAAW7S,EAAOgG,KAAKyM,sBACvBuhE,EAAWrxE,KAAKkzE,YAAelzE,KAAKqxE,SAAW,YAAerxE,KAAKqxE,SACnE8B,EAAcF,EAAgB1zE,MAAO6zE,EAAeH,EAAgB9zE,OACxE+Q,EAAS3Q,MAAQ4zE,EACjBjjE,EAAS/Q,OAASi0E,EAClBpzE,KAAKyxE,SAAWvhE,EAChBlQ,KAAKgxE,YAAchtE,EAAO0M,OAASA,EACnC1Q,KAAKixE,YAAcjtE,EAAO2M,OAASA,EACnCtT,EAAO40E,cAAcJ,aACnB,CAAC7tE,GAASivE,EAAiBE,EAAaC,EAAcpzE,KAAKyxE,SAAUJ,GACvErxE,KAAKkxE,gBAAkBhhE,EAAS3Q,MAAQS,KAAK63B,iBAAiBt4B,MAC9DS,KAAKmxE,gBAAkBjhE,EAAS/Q,OAASa,KAAK63B,iBAAiB14B,QAWjE0yE,aAAc,SAASN,GASrB,GANAA,GADAA,EAAUA,GAAWvxE,KAAKuxE,SAAW,IACnBvtE,QAAO,SAASA,GAAU,OAAOA,IAAWA,EAAOqvE,oBACrErzE,KAAKwG,IAAI,SAAS,GAGlBxG,KAAK2xE,cAAc3xE,KAAKqxE,SAAW,aAEZ,IAAnBE,EAAQztE,OAKV,OAJA9D,KAAKyxE,SAAWzxE,KAAK63B,iBACrB73B,KAAKkzE,YAAc,KACnBlzE,KAAKkxE,gBAAkB,EACvBlxE,KAAKmxE,gBAAkB,EAChBnxE,KAGT,IAAIszE,EAAatzE,KAAK63B,iBAClBs7C,EAAcG,EAAWt9B,cAAgBs9B,EAAW/zE,MACpD6zE,EAAeE,EAAWr9B,eAAiBq9B,EAAWn0E,OAE1D,GAAIa,KAAKyxE,WAAazxE,KAAK63B,iBAAkB,CAE3C,IAAI3nB,EAAW7S,EAAOgG,KAAKyM,sBAC3BI,EAAS3Q,MAAQ4zE,EACjBjjE,EAAS/Q,OAASi0E,EAClBpzE,KAAKyxE,SAAWvhE,EAChBlQ,KAAKkzE,YAAchjE,OAKnBlQ,KAAKyxE,SAAWzxE,KAAKkzE,YACrBlzE,KAAKkzE,YAAYj0E,WAAW,MAAM88C,UAAU,EAAG,EAAGo3B,EAAaC,GAE/DpzE,KAAKgxE,YAAc,EACnBhxE,KAAKixE,YAAc,EAYrB,OAVK5zE,EAAO40E,gBACV50E,EAAO40E,cAAgB50E,EAAOkF,qBAEhClF,EAAO40E,cAAcJ,aACnBN,EAASvxE,KAAK63B,iBAAkBs7C,EAAaC,EAAcpzE,KAAKyxE,SAAUzxE,KAAKqxE,UAC7ErxE,KAAK63B,iBAAiBt4B,QAAUS,KAAKyxE,SAASlyE,OAChDS,KAAK63B,iBAAiB14B,SAAWa,KAAKyxE,SAAStyE,SAC/Ca,KAAKkxE,gBAAkBlxE,KAAKyxE,SAASlyE,MAAQS,KAAK63B,iBAAiBt4B,MACnES,KAAKmxE,gBAAkBnxE,KAAKyxE,SAAStyE,OAASa,KAAK63B,iBAAiB14B,QAE/Da,MAOT2jD,QAAS,SAAS3kD,GAChB3B,EAAOgG,KAAKuiB,kBAAkB5mB,EAAKgB,KAAKsxE,iBAClB,IAAlBtxE,KAAKm0D,UAAqBn0D,KAAK8xE,cAAgB9xE,KAAKuzE,gBACtDvzE,KAAK+xE,qBAEP/xE,KAAKqyE,QAAQrzE,GACbgB,KAAK2/D,oBAAoB3gE,IAQ3B0+D,kBAAmB,SAAS1+D,GAC1B3B,EAAOgG,KAAKuiB,kBAAkB5mB,EAAKgB,KAAKsxE,gBACxCj0E,EAAOwR,OAAOC,UAAU4uD,kBAAkB35D,KAAK/D,KAAMhB,IAcvD69C,YAAa,WACX,OAAO78C,KAAKi+D,oBAGd4B,YAAa,SAAS7gE,GACpB,IAAIw0E,EAAgBxzE,KAAKyxE,SACzB,GAAK+B,EAAL,CAGA,IAAI9iE,EAAS1Q,KAAKkxE,gBAAiBvgE,EAAS3Q,KAAKmxE,gBAC7C5K,EAAIvmE,KAAKT,MAAOqV,EAAI5U,KAAKb,OAAQmJ,EAAMb,KAAKa,IAAKC,EAAMd,KAAKc,IAE5D63D,EAAQ73D,EAAIvI,KAAKogE,MAAO,GAAIC,EAAQ93D,EAAIvI,KAAKqgE,MAAO,GACpDoT,EAAUD,EAAcx9B,cAAgBw9B,EAAcj0E,MACtDm0E,EAAWF,EAAcv9B,eAAiBu9B,EAAcr0E,OACxDw0E,EAAKvT,EAAQ1vD,EACbkjE,EAAKvT,EAAQ1vD,EAEbkjE,EAAKvrE,EAAIi+D,EAAI71D,EAAQ+iE,EAAUE,GAC/BG,EAAKxrE,EAAIsM,EAAIjE,EAAQ+iE,EAAWE,GAChCvqE,GAAKk9D,EAAI,EAAGj9D,GAAKsL,EAAI,EACrBm/D,EAAWzrE,EAAIi+D,EAAGkN,EAAU/iE,EAAS0vD,GACrC4T,EAAW1rE,EAAIsM,EAAG8+D,EAAW/iE,EAAS0vD,GAE1CmT,GAAiBx0E,EAAIM,UAAUk0E,EAAeG,EAAIC,EAAIC,EAAIC,EAAIzqE,EAAGC,EAAGyqE,EAAUC,KAOhFT,aAAc,WACZ,IAAIn0E,EAAQY,KAAKu7D,wBACjB,OAAQn8D,EAAMsR,SAAW1Q,KAAKgxE,aAAe5xE,EAAMuR,SAAW3Q,KAAKixE,aAMrEgD,kBAAmB,WACjBj0E,KAAKwG,IAAIxG,KAAKoyE,oBAUhBZ,aAAc,SAASzvD,EAASre,GAC9B1D,KAAK0xE,WAAWr0E,EAAOgG,KAAK6iB,QAAQnE,GAAUre,GAC9CrG,EAAOgG,KAAKgjB,SAASrmB,KAAK47C,aAAcv+C,EAAOu6B,MAAMs8C,aAOvDtC,YAAa,SAASluE,GACpBA,IAAYA,EAAU,IACtB1D,KAAKu1C,WAAW7xC,GAChB1D,KAAK2rE,gBAAgBjoE,IAQvBywE,aAAc,SAAS5C,EAAS/rE,GAC1B+rE,GAAWA,EAAQztE,OACrBzG,EAAOgG,KAAKgK,eAAekkE,GAAS,SAAShkE,GAC3C/H,GAAYA,EAAS+H,KACpB,wBAGH/H,GAAYA,KAUhBmmE,gBAAiB,SAASjoE,GACxBA,IAAYA,EAAU,IACtB,IAAI8gB,EAAKxkB,KAAK47C,aACd57C,KAAKT,MAAQmE,EAAQnE,OAASilB,EAAGwxB,cAAgBxxB,EAAGjlB,OAAS,EAC7DS,KAAKb,OAASuE,EAAQvE,QAAUqlB,EAAGyxB,eAAiBzxB,EAAGrlB,QAAU,GASnEiT,kCAAmC,WACjC,IAGI2U,EAHAqtD,EAAM/2E,EAAOgG,KAAK+O,kCAAkCpS,KAAK+xB,qBAAuB,IAChFsiD,EAASr0E,KAAKyxE,SAASlyE,MAAO+0E,EAAUt0E,KAAKyxE,SAAStyE,OACtDuR,EAAS,EAAGC,EAAS,EAAG2vD,EAAa,EAAGC,EAAY,EAAGH,EAAQ,EAAGC,EAAQ,EAClEkU,EAASv0E,KAAKT,MAAOi1E,EAAUx0E,KAAKb,OAAQgtE,EAAmB,CAAE5sE,MAAOg1E,EAAQp1E,OAAQq1E,GA2CpG,OA1CIJ,GAAuB,SAAfA,EAAI1hE,QAAoC,SAAf0hE,EAAIzhE,QAuCvCjC,EAAS6jE,EAASF,EAClB1jE,EAAS6jE,EAAUF,IAvCK,SAApBF,EAAI7hE,cAENwU,GAAUwtD,EAASF,GADnB3jE,EAASC,EAAStT,EAAOgG,KAAKgQ,eAAerT,KAAKyxE,SAAUtF,KACtB,EACnB,QAAfiI,EAAI1hE,SACN4tD,GAAcv5C,GAEG,QAAfqtD,EAAI1hE,SACN4tD,EAAav5C,GAEfA,GAAUytD,EAAUF,EAAU3jE,GAAU,EACrB,QAAfyjE,EAAIzhE,SACN4tD,GAAax5C,GAEI,QAAfqtD,EAAIzhE,SACN4tD,EAAYx5C,IAGQ,UAApBqtD,EAAI7hE,cAENwU,EAASstD,EAASE,GADlB7jE,EAASC,EAAStT,EAAOgG,KAAKiQ,iBAAiBtT,KAAKyxE,SAAUtF,IAE3C,QAAfiI,EAAI1hE,SACN0tD,EAAQr5C,EAAS,GAEA,QAAfqtD,EAAI1hE,SACN0tD,EAAQr5C,GAEVA,EAASutD,EAAUE,EAAU7jE,EACV,QAAfyjE,EAAIzhE,SACN0tD,EAAQt5C,EAAS,GAEA,QAAfqtD,EAAIzhE,SACN0tD,EAAQt5C,GAEVstD,EAASE,EAAS7jE,EAClB4jE,EAAUE,EAAU7jE,IAOjB,CACLpR,MAAO80E,EACPl1E,OAAQm1E,EACR5jE,OAAQA,EACRC,OAAQA,EACR2vD,WAAYA,EACZC,UAAWA,EACXH,MAAOA,EACPC,MAAOA,MAWbhjE,EAAOu6B,MAAMs8C,WAAa,aAM1B72E,EAAOu6B,MAAM9oB,UAAU8jE,UAAYv1E,EAAOu6B,MAAM9oB,UAAUyjE,OAQ1Dl1E,EAAOu6B,MAAMhqB,WAAa,SAAS6mE,EAASjvE,GAC1C,IAAIT,EAAS1H,EAAOgG,KAAK0B,OAAOya,MAAMi1D,GACtCp3E,EAAOgG,KAAK4I,UAAUlH,EAAO0H,KAAK,SAASL,EAAKopC,GAC1CA,EACFhwC,GAAYA,EAAS,MAAM,GAG7BnI,EAAOu6B,MAAM9oB,UAAUqlE,aAAapwE,KAAKgB,EAAQA,EAAOwsE,SAAS,SAASA,GACxExsE,EAAOwsE,QAAUA,GAAW,GAC5Bl0E,EAAOu6B,MAAM9oB,UAAUqlE,aAAapwE,KAAKgB,EAAQ,CAACA,EAAO+sE,eAAe,SAAS4C,GAC/E3vE,EAAO+sE,aAAe4C,EAAc,GACpCr3E,EAAOgG,KAAKgK,eAAe,CAACtI,EAAO+zB,WAAW,SAASqpC,GACrDp9D,EAAO+zB,SAAWqpC,EAAa,GAC/B,IAAI5oB,EAAQ,IAAIl8C,EAAOu6B,MAAMxrB,EAAKrH,GAClCS,EAAS+zC,GAAO,cAIrB,KAAMx0C,EAAOoH,cAUlB9O,EAAOu6B,MAAM+8C,QAAU,SAASzoE,EAAK1G,EAAUovE,GAC7Cv3E,EAAOgG,KAAK4I,UAAUC,GAAK,SAASE,EAAKopC,GACvChwC,GAAYA,EAAS,IAAInI,EAAOu6B,MAAMxrB,EAAKwoE,GAAap/B,KACvD,KAAMo/B,GAAcA,EAAWzoE,cASpC9O,EAAOu6B,MAAMs0C,gBACX7uE,EAAO0D,kBAAkB6E,OACvB,8EAA8EoG,MAAM,MAWxF3O,EAAOu6B,MAAMJ,YAAc,SAASzV,EAASvc,EAAU9B,GACrD,IAAIyoE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAOu6B,MAAMs0C,iBACpE7uE,EAAOu6B,MAAM+8C,QAAQxI,EAAiB,cAAe3mE,EACnD4Z,EAAQ1b,EAAUrG,EAAOgG,KAAK0B,OAAOya,MAAM9b,GAAW,GAAMyoE,MA7wBlE,CAixBoC5uE,GAGpCF,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOwR,OAAOC,UAAiD,CAMvF+lE,4BAA6B,WAC3B,IAAI7sE,EAAQhI,KAAKgI,MAAQ,IACzB,OAAIA,EAAQ,EAC4B,GAA/BP,KAAKo1B,OAAO70B,EAAQ,GAAK,IAEF,GAAzBP,KAAKo1B,MAAM70B,EAAQ,KAQ5B8sE,WAAY,WAEV,OADA90E,KAAK4P,OAAO5P,KAAK60E,+BACV70E,MAWT+0E,aAAc,SAAS1K,GAGrB,IAAIC,EAAQ,aACRniD,GAHJkiD,EAAYA,GAAa,IAGEliD,YAAcmiD,EACrClgD,EAAWigD,EAAUjgD,UAAYkgD,EACjCjpD,EAAQrhB,KAgBZ,OAdA3C,EAAOgG,KAAKwmB,QAAQ,CAClBU,WAAYvqB,KAAKsH,IAAI,SACrBkjB,SAAUxqB,KAAK60E,8BACf3qD,SAAUlqB,KAAKmqE,YACf//C,SAAU,SAASnmB,GACjBod,EAAMzR,OAAO3L,GACbmmB,KAEFjC,WAAY,WACV9G,EAAM+5B,YACNjzB,OAIGnoB,QAIX3C,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAO05C,aAAajoC,UAAuD,CAQnGkmE,iBAAkB,SAAUjwE,GAG1B,OAFAA,EAAO+vE,aACP90E,KAAK6E,mBACE7E,MASTi1E,mBAAoB,SAAUlwE,GAI5B,OAHAA,EAAOgwE,aAAa,CAClB3qD,SAAUpqB,KAAKq3C,wBAEVr3C,QAKX,WAEE,aAQA,SAASk1E,EAAcv2E,EAAIw2E,GACzB,IAAIC,EAAiB,aAAeD,EAAY,yBAC5CE,EAAiB12E,EAAG22E,aAAa32E,EAAG42E,iBAGxC,OAFA52E,EAAG62E,aAAaH,EAAgBD,GAChCz2E,EAAG82E,cAAcJ,KACZ12E,EAAG+2E,mBAAmBL,EAAgB12E,EAAGg3E,gBAwChD,SAAS/yE,EAAmBc,GACtBA,GAAWA,EAAQb,WACrB7C,KAAK6C,SAAWa,EAAQb,UAE1B7C,KAAK41E,eAAe51E,KAAK6C,SAAU7C,KAAK6C,UACxC7C,KAAK61E,iBAlCPx4E,EAAOmF,iBAAmB,SAASK,GACjC,GAAIxF,EAAOwD,aACT,OAAO,EAETgC,EAAWA,GAAYxF,EAAOuF,mBAAmBkM,UAAUjM,SAC3D,IAAI/D,EAAStB,SAASsP,cAAc,UAChCnO,EAAKG,EAAOG,WAAW,UAAYH,EAAOG,WAAW,sBACrD62E,GAAc,EAElB,GAAIn3E,EAAI,CACNtB,EAAOsF,eAAiBhE,EAAGo3E,aAAap3E,EAAGq3E,kBAC3CF,EAAcz4E,EAAOsF,gBAAkBE,EAEvC,IADA,IAAIozE,EAAa,CAAC,QAAS,UAAW,QAC7BryE,EAAI,EAAGA,EAAI,EAAGA,IACrB,GAAIsxE,EAAcv2E,EAAIs3E,EAAWryE,IAAI,CACnCvG,EAAO64E,eAAiBD,EAAWryE,GACnC,OAKN,OADA5D,KAAK81E,YAAcA,EACZA,GAGTz4E,EAAOuF,mBAAqBA,EAa5BA,EAAmBkM,UAA8D,CAE/EjM,SAAU,KASVzE,UAAW,GAOXw3E,eAAgB,SAASr2E,EAAOJ,GAC9Ba,KAAKqhD,UACLrhD,KAAKm2E,kBAAkB52E,EAAOJ,GAE9Ba,KAAKo2E,UAAY,IAAIC,aAAa,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,IACxDr2E,KAAKs2E,8BAA8B/2E,EAAOJ,IAO5Cm3E,8BAA+B,SAAS/2E,EAAOJ,GAC7C,IAAgEo3E,EAA5DC,EAA+C,qBAAvB/4E,OAAOg5E,YACnC,IACE,IAAIj2E,UAAU,EAAG,GACjB+1E,GAAkB,EAEpB,MAAOzsC,GACLysC,GAAkB,EAGpB,IAAIG,EAA2C,qBAAhBC,YAE3BC,EAAkD,qBAAtBz2E,kBAEhC,GAAMq2E,GAAkBD,GAAmBG,GAAqBE,EAAhE,CAIA,IAAI73E,EAAe1B,EAAOgG,KAAKyM,sBAE3B7P,EAAc,IAAI02E,YAAYp3E,EAAQJ,EAAS,GACnD,GAAI9B,EAAOiF,oBAGT,OAFAtC,KAAKC,YAAcA,OACnBD,KAAK62E,WAAar3E,GAGpB,IAMIs3E,EAAWC,EANXC,EAAc,CAChB/2E,YAAaA,EACbP,iBAAkBH,EAClBK,kBAAmBT,EACnBJ,aAAcA,GAGhBA,EAAaQ,MAAQA,EACrBR,EAAaI,OAASA,EAEtB23E,EAAYr5E,OAAOg5E,YAAYQ,MAC/Bv4E,EAAoBqF,KAAKizE,EAAah3E,KAAKrB,GAAIq4E,GAC/CD,EAAgBt5E,OAAOg5E,YAAYQ,MAAQH,EAE3CA,EAAYr5E,OAAOg5E,YAAYQ,MAC/Bz3E,EAAuBuE,KAAKizE,EAAah3E,KAAKrB,GAAIq4E,GAG9CD,EAFet5E,OAAOg5E,YAAYQ,MAAQH,GAG5C92E,KAAKC,YAAcA,EACnBD,KAAK62E,WAAar3E,GAGlBQ,KAAK62E,WAAan4E,IAQtBy3E,kBAAmB,SAAS52E,EAAOJ,GACjC,IAAIL,EAASzB,EAAOgG,KAAKyM,sBACzBhR,EAAOS,MAAQA,EACfT,EAAOK,OAASA,EAChB,IAAI+3E,EAAY,CACV75C,OAAO,EACP85C,oBAAoB,EACpBC,OAAO,EACPC,SAAS,EACTC,WAAW,GAEb34E,EAAKG,EAAOG,WAAW,QAASi4E,GAC/Bv4E,IACHA,EAAKG,EAAOG,WAAW,qBAAsBi4E,IAE1Cv4E,IAGLA,EAAG44E,WAAW,EAAG,EAAG,EAAG,GAEvBv3E,KAAKlB,OAASA,EACdkB,KAAKrB,GAAKA,IAeZkzE,aAAc,SAASN,EAASxqE,EAAQxH,EAAOJ,EAAQJ,EAAcsyE,GACnE,IACImG,EADA74E,EAAKqB,KAAKrB,GAEV0yE,IACFmG,EAAgBx3E,KAAKy3E,iBAAiBpG,EAAUtqE,IAElD,IAAInI,EAAgB,CAClBk5D,cAAe/wD,EAAOxH,OAASwH,EAAO+wD,cACtCC,eAAgBhxD,EAAO5H,QAAU4H,EAAOgxD,eACxCob,YAAa5zE,EACb6zE,aAAcj0E,EACdO,iBAAkBH,EAClBK,kBAAmBT,EACnBsG,QAAS9G,EACT+4E,cAAe13E,KAAK23E,cAAch5E,EAAIY,EAAOJ,GAASq4E,GAAiBzwE,GACvE6wE,cAAe53E,KAAK23E,cAAch5E,EAAIY,EAAOJ,GAC7C04E,gBAAiBL,GACfx3E,KAAK23E,cAAch5E,EAAIY,EAAOJ,GAASq4E,GAAiBzwE,GAC1D+wE,OAAQvG,EAAQztE,OAChBi0E,OAAO,EACP3B,UAAWp2E,KAAKo2E,UAChB4B,aAAch4E,KAAKg4E,aACnBC,KAAM,EACNhG,cAAejyE,KACfjB,aAAcA,GAEZm5E,EAAUv5E,EAAGw5E,oBAUjB,OATAx5E,EAAGy5E,gBAAgBz5E,EAAG05E,YAAaH,GACnC3G,EAAQ5jE,SAAQ,SAAS3J,GAAUA,GAAUA,EAAOs0E,QAAQ15E,MA6HlE,SAA8BA,GAC5B,IAAIG,EAAeH,EAAcG,aAC7BQ,EAAQR,EAAaQ,MAAOJ,EAASJ,EAAaI,OAClDM,EAASb,EAAcc,iBACvBC,EAAUf,EAAcgB,kBAExBL,IAAUE,GAAUN,IAAWQ,IACjCZ,EAAaQ,MAAQE,EACrBV,EAAaI,OAASQ,GApIpB44E,CAAqB35E,GACrBoB,KAAK62E,WAAWl4E,EAAIC,GACpBD,EAAG65E,YAAY75E,EAAG85E,WAAY,MAC9B95E,EAAG+5E,cAAc95E,EAAc84E,eAC/B/4E,EAAG+5E,cAAc95E,EAAcg5E,eAC/Bj5E,EAAGg6E,kBAAkBT,GACrBn5E,EAAaE,WAAW,MAAMu9D,aAAa,EAAG,EAAG,EAAG,EAAG,EAAG,GACnD59D,GAMTyiD,QAAS,WACHrhD,KAAKlB,SACPkB,KAAKlB,OAAS,KACdkB,KAAKrB,GAAK,MAEZqB,KAAK44E,oBAMPA,iBAAkB,WAChB54E,KAAKg4E,aAAe,GACpBh4E,KAAK64E,aAAe,IActBlB,cAAe,SAASh5E,EAAIY,EAAOJ,EAAQ25E,GACzC,IAAIC,EAAUp6E,EAAGg5E,gBAYjB,OAXAh5E,EAAG65E,YAAY75E,EAAG85E,WAAYM,GAC9Bp6E,EAAGq6E,cAAcr6E,EAAG85E,WAAY95E,EAAGs6E,mBAAoBt6E,EAAGu6E,SAC1Dv6E,EAAGq6E,cAAcr6E,EAAG85E,WAAY95E,EAAGw6E,mBAAoBx6E,EAAGu6E,SAC1Dv6E,EAAGq6E,cAAcr6E,EAAG85E,WAAY95E,EAAGy6E,eAAgBz6E,EAAG06E,eACtD16E,EAAGq6E,cAAcr6E,EAAG85E,WAAY95E,EAAG26E,eAAgB36E,EAAG06E,eAClDP,EACFn6E,EAAG46E,WAAW56E,EAAG85E,WAAY,EAAG95E,EAAG0B,KAAM1B,EAAG0B,KAAM1B,EAAG2B,cAAew4E,GAGpEn6E,EAAG46E,WAAW56E,EAAG85E,WAAY,EAAG95E,EAAG0B,KAAMd,EAAOJ,EAAQ,EAAGR,EAAG0B,KAAM1B,EAAG2B,cAAe,MAEjFy4E,GAYTtB,iBAAkB,SAAS+B,EAAUV,GACnC,GAAI94E,KAAK64E,aAAaW,GACpB,OAAOx5E,KAAK64E,aAAaW,GAGzB,IAAIT,EAAU/4E,KAAK23E,cACjB33E,KAAKrB,GAAIm6E,EAAmBv5E,MAAOu5E,EAAmB35E,OAAQ25E,GAEhE,OADA94E,KAAK64E,aAAaW,GAAYT,EACvBA,GAUX7G,kBAAmB,SAASb,GACtBrxE,KAAK64E,aAAaxH,KACpBrxE,KAAKrB,GAAG+5E,cAAc14E,KAAK64E,aAAaxH,WACjCrxE,KAAK64E,aAAaxH,KAI7BwF,WAAYn4E,EASZm3E,eAAgB,WACd,GAAI71E,KAAKy5E,QACP,OAAOz5E,KAAKy5E,QAEd,IAAI96E,EAAKqB,KAAKrB,GAAI86E,EAAU,CAAEC,SAAU,GAAIC,OAAQ,IACpD,IAAKh7E,EACH,OAAO86E,EAET,IAAIG,EAAMj7E,EAAGk7E,aAAa,6BAC1B,GAAID,EAAK,CACP,IAAIF,EAAW/6E,EAAGo3E,aAAa6D,EAAIE,yBAC/BH,EAASh7E,EAAGo3E,aAAa6D,EAAIG,uBAC7BL,IACFD,EAAQC,SAAWA,EAAS5mE,eAE1B6mE,IACFF,EAAQE,OAASA,EAAO7mE,eAI5B,OADA9S,KAAKy5E,QAAUA,EACRA,IA9Ub,GA6YA,WAEE,aAEA,IAAI1wD,EAAO,aAOX,SAASjmB,KALTzF,EAAOyF,sBAAwBA,EAO/BA,EAAsBgM,UAAiE,CACrFojE,kBAAmBnpD,EACnBs4B,QAASt4B,EACT6vD,iBAAkB7vD,EASlB3qB,UAAW,GAcXyzE,aAAc,SAASN,EAASyI,EAAe7G,EAAaC,EAAcr0E,GACxE,IAAIC,EAAMD,EAAaE,WAAW,MAClCD,EAAIM,UAAU06E,EAAe,EAAG,EAAG7G,EAAaC,GAChD,IAEIx0E,EAAgB,CAClBu0E,YAAaA,EACbC,aAAcA,EACdphE,UALchT,EAAIiT,aAAa,EAAG,EAAGkhE,EAAaC,GAMlD6G,WAAYD,EACZE,kBANsBl7E,EAAIiT,aAAa,EAAG,EAAGkhE,EAAaC,GAO1DljE,SAAUnR,EACVC,IAAKA,EACLizE,cAAejyE,MAQjB,OANAuxE,EAAQ5jE,SAAQ,SAAS3J,GAAUA,EAAOs0E,QAAQ15E,MAC9CA,EAAcoT,UAAUzS,QAAU4zE,GAAev0E,EAAcoT,UAAU7S,SAAWi0E,IACtFr0E,EAAaQ,MAAQX,EAAcoT,UAAUzS,MAC7CR,EAAaI,OAASP,EAAcoT,UAAU7S,QAEhDH,EAAIyB,aAAa7B,EAAcoT,UAAW,EAAG,GACtCpT,IA5Db,GAyEAvB,EAAOu6B,MAAQv6B,EAAOu6B,OAAS,GAC/Bv6B,EAAOu6B,MAAM25C,QAAUl0E,EAAOu6B,MAAM25C,SAAW,GAO/Cl0E,EAAOu6B,MAAM25C,QAAQ4I,WAAa98E,EAAOgG,KAAKke,YAAoE,CAOhH5b,KAAM,aAONy0E,aAAc,qJAOdhF,eAAgB,iJAWhB5zD,WAAY,SAAS9d,GACfA,GACF1D,KAAKu1C,WAAW7xC,IAQpB6xC,WAAY,SAAS7xC,GACnB,IAAK,IAAIU,KAAQV,EACf1D,KAAKoE,GAAQV,EAAQU,IAWzBi2E,cAAe,SAAS17E,EAAIy2E,EAAgBgF,GAC1ChF,EAAiBA,GAAkBp1E,KAAKo1E,eACxCgF,EAAeA,GAAgBp6E,KAAKo6E,aACN,UAA1B/8E,EAAO64E,iBACTd,EAAiBA,EAAer1D,QAC9B,yBACA,aAAe1iB,EAAO64E,eAAiB,WAG3C,IAAIoE,EAAe37E,EAAG22E,aAAa32E,EAAG47E,eAGtC,GAFA57E,EAAG62E,aAAa8E,EAAcF,GAC9Bz7E,EAAG82E,cAAc6E,IACZ37E,EAAG+2E,mBAAmB4E,EAAc37E,EAAGg3E,gBAC1C,MAAM,IAAI1+B,MAER,mCAAqCj3C,KAAK2F,KAAO,KACjDhH,EAAG67E,iBAAiBF,IAIxB,IAAIjF,EAAiB12E,EAAG22E,aAAa32E,EAAG42E,iBAGxC,GAFA52E,EAAG62E,aAAaH,EAAgBD,GAChCz2E,EAAG82E,cAAcJ,IACZ12E,EAAG+2E,mBAAmBL,EAAgB12E,EAAGg3E,gBAC5C,MAAM,IAAI1+B,MAER,qCAAuCj3C,KAAK2F,KAAO,KACnDhH,EAAG67E,iBAAiBnF,IAIxB,IAAIoF,EAAU97E,EAAG07E,gBAIjB,GAHA17E,EAAG+7E,aAAaD,EAASH,GACzB37E,EAAG+7E,aAAaD,EAASpF,GACzB12E,EAAGg8E,YAAYF,IACV97E,EAAGi8E,oBAAoBH,EAAS97E,EAAGk8E,aACtC,MAAM,IAAI5jC,MAER,wCACAt4C,EAAGm8E,kBAAkBL,IAIzB,IAAIM,EAAqB/6E,KAAKg7E,sBAAsBr8E,EAAI87E,GACpDQ,EAAmBj7E,KAAKk7E,oBAAoBv8E,EAAI87E,IAAY,GAGhE,OAFAQ,EAAiBE,OAASx8E,EAAGy8E,mBAAmBX,EAAS,UACzDQ,EAAiBI,OAAS18E,EAAGy8E,mBAAmBX,EAAS,UAClD,CACLA,QAASA,EACTM,mBAAoBA,EACpBE,iBAAkBA,IAWtBD,sBAAuB,SAASr8E,EAAI87E,GAClC,MAAO,CACLrE,UAAWz3E,EAAG28E,kBAAkBb,EAAS,eAa7CS,oBAAqB,WAEnB,MAAO,IASTK,kBAAmB,SAAS58E,EAAIo8E,EAAoBS,GAClD,IAAIC,EAAoBV,EAAmB3E,UACvCsF,EAAS/8E,EAAGg9E,eAChBh9E,EAAGi9E,WAAWj9E,EAAGk9E,aAAcH,GAC/B/8E,EAAGm9E,wBAAwBL,GAC3B98E,EAAGo9E,oBAAoBN,EAAmB,EAAG98E,EAAGq9E,OAAO,EAAO,EAAG,GACjEr9E,EAAGs9E,WAAWt9E,EAAGk9E,aAAcL,EAAe78E,EAAGu9E,cAGnDC,kBAAmB,SAASz4E,GAC1B,IAA0BnE,EAAOJ,EAA7BR,EAAK+E,EAAQ+B,QACb/B,EAAQo0E,OAAS,GACnBv4E,EAAQmE,EAAQhE,iBAChBP,EAASuE,EAAQ9D,kBACb8D,EAAQyvE,cAAgB5zE,GAASmE,EAAQ0vE,eAAiBj0E,IAC5DR,EAAG+5E,cAAch1E,EAAQk0E,eACzBl0E,EAAQk0E,cAAgBl0E,EAAQuuE,cAAc0F,cAAch5E,EAAIY,EAAOJ,IAEzER,EAAGy9E,qBAAqBz9E,EAAG05E,YAAa15E,EAAG09E,kBAAmB19E,EAAG85E,WAC/D/0E,EAAQk0E,cAAe,KAIzBj5E,EAAGy5E,gBAAgBz5E,EAAG05E,YAAa,MACnC15E,EAAGwrB,WAIPmyD,cAAe,SAAS54E,GACtBA,EAAQo0E,SACRp0E,EAAQu0E,OACR,IAAIsE,EAAO74E,EAAQk0E,cACnBl0E,EAAQk0E,cAAgBl0E,EAAQg0E,cAChCh0E,EAAQg0E,cAAgB6E,GAU1BlJ,eAAgB,WACd,IAAImJ,EAAOx8E,KAAKy8E,cACZtO,EAAS9wE,EAAOu6B,MAAM25C,QAAQvxE,KAAK2F,MAAMmJ,UAC7C,GAAI0tE,EAAM,CACR,GAAI/nE,MAAMuX,QAAQmiD,EAAOqO,IAAQ,CAC/B,IAAK,IAAI54E,EAAIuqE,EAAOqO,GAAM14E,OAAQF,KAChC,GAAI5D,KAAKw8E,GAAM54E,KAAOuqE,EAAOqO,GAAM54E,GACjC,OAAO,EAGX,OAAO,EAGP,OAAOuqE,EAAOqO,KAAUx8E,KAAKw8E,GAI/B,OAAO,GAiBXlE,QAAS,SAAS50E,GACZA,EAAQq0E,OACV/3E,KAAKm8E,kBAAkBz4E,GACvB1D,KAAK08E,aAAah5E,GAClB1D,KAAKs8E,cAAc54E,IAGnB1D,KAAK28E,UAAUj5E,IAUnBk5E,eAAgB,SAASl5E,GAIvB,OAHKA,EAAQs0E,aAAaz4D,eAAevf,KAAK2F,QAC5CjC,EAAQs0E,aAAah4E,KAAK2F,MAAQ3F,KAAKq6E,cAAc32E,EAAQ+B,UAExD/B,EAAQs0E,aAAah4E,KAAK2F,OAenC+2E,aAAc,SAASh5E,GACrB,IAAI/E,EAAK+E,EAAQ+B,QACbo3E,EAAS78E,KAAK48E,eAAel5E,GACZ,IAAjBA,EAAQu0E,MAAcv0E,EAAQm0E,gBAChCl5E,EAAG65E,YAAY75E,EAAG85E,WAAY/0E,EAAQm0E,iBAGtCl5E,EAAG65E,YAAY75E,EAAG85E,WAAY/0E,EAAQg0E,eAExC/4E,EAAGm+E,WAAWD,EAAOpC,SACrBz6E,KAAKu7E,kBAAkB58E,EAAIk+E,EAAO9B,mBAAoBr3E,EAAQ0yE,WAE9Dz3E,EAAGo+E,UAAUF,EAAO5B,iBAAiBE,OAAQ,EAAIz3E,EAAQyvE,aACzDx0E,EAAGo+E,UAAUF,EAAO5B,iBAAiBI,OAAQ,EAAI33E,EAAQ0vE,cAEzDpzE,KAAKg9E,gBAAgBr+E,EAAIk+E,EAAO5B,kBAChCt8E,EAAGs+E,SAAS,EAAG,EAAGv5E,EAAQhE,iBAAkBgE,EAAQ9D,mBACpDjB,EAAGu+E,WAAWv+E,EAAGw+E,eAAgB,EAAG,IAGtCC,sBAAuB,SAASz+E,EAAIo6E,EAASsE,GAC3C1+E,EAAG2+E,cAAcD,GACjB1+E,EAAG65E,YAAY75E,EAAG85E,WAAYM,GAE9Bp6E,EAAG2+E,cAAc3+E,EAAG4+E,WAGtBC,wBAAyB,SAAS7+E,EAAI0+E,GACpC1+E,EAAG2+E,cAAcD,GACjB1+E,EAAG65E,YAAY75E,EAAG85E,WAAY,MAC9B95E,EAAG2+E,cAAc3+E,EAAG4+E,WAGtBE,iBAAkB,WAChB,OAAOz9E,KAAKA,KAAKy8E,gBAGnBiB,iBAAkB,SAASz5E,GACzBjE,KAAKA,KAAKy8E,eAAiBx4E,GAW7B+4E,gBAAiB,aAQjBW,gBAAiB,SAASj6E,GACxB,IAAKA,EAAQk6E,UAAW,CACtB,IAAIA,EAAYpgF,SAASsP,cAAc,UACvC8wE,EAAUr+E,MAAQmE,EAAQyvE,YAC1ByK,EAAUz+E,OAASuE,EAAQ0vE,aAC3B1vE,EAAQk6E,UAAYA,IAQxBhqC,SAAU,WACR,IAAI7uC,EAAS,CAAEY,KAAM3F,KAAK2F,MAAQk4E,EAAQ79E,KAAKy8E,cAI/C,OAHIoB,IACF94E,EAAO84E,GAAS79E,KAAK69E,IAEhB94E,GAOT28C,OAAQ,WAEN,OAAO1hD,KAAK4zC,cAIhBv2C,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAAa,SAAS7I,EAAQS,GAC5D,IAAIxB,EAAS,IAAI3G,EAAOu6B,MAAM25C,QAAQxsE,EAAOY,MAAMZ,GAEnD,OADAS,GAAYA,EAASxB,GACdA,GAIT,SAAUuD,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAuB9BgwD,EAAQuM,YAAcv8D,EAAYgwD,EAAQ4I,WAAqE,CAO7Gx0E,KAAM,cAENyvE,eAAgB,0QAoBhB3jE,OAAQ,CACN,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,GAGdgrE,cAAe,SAMfsB,YAAY,EAMZv8D,WAAY,SAAS9d,GACnB1D,KAAKkhB,UAAU,aAAcxd,GAE7B1D,KAAKyR,OAASzR,KAAKyR,OAAO9F,MAAM,IASlCgxE,UAAW,SAASj5E,GAClB,IAII8G,EAAGoyB,EAAGtsB,EAAG/F,EAAG3G,EAHZuO,EADYzO,EAAQsO,UACHG,KACjBm+D,EAAOn+D,EAAKrO,OACZ6Q,EAAI3U,KAAKyR,OACMssE,EAAa/9E,KAAK+9E,WAErC,IAAKn6E,EAAI,EAAGA,EAAI0sE,EAAM1sE,GAAK,EACzB4G,EAAI2H,EAAKvO,GACTg5B,EAAIzqB,EAAKvO,EAAI,GACb0M,EAAI6B,EAAKvO,EAAI,GACTm6E,GACF5rE,EAAKvO,GAAK4G,EAAImK,EAAE,GAAKioB,EAAIjoB,EAAE,GAAKrE,EAAIqE,EAAE,GAAY,IAAPA,EAAE,GAC7CxC,EAAKvO,EAAI,GAAK4G,EAAImK,EAAE,GAAKioB,EAAIjoB,EAAE,GAAKrE,EAAIqE,EAAE,GAAY,IAAPA,EAAE,GACjDxC,EAAKvO,EAAI,GAAK4G,EAAImK,EAAE,IAAMioB,EAAIjoB,EAAE,IAAMrE,EAAIqE,EAAE,IAAc,IAARA,EAAE,MAGpDpK,EAAI4H,EAAKvO,EAAI,GACbuO,EAAKvO,GAAK4G,EAAImK,EAAE,GAAKioB,EAAIjoB,EAAE,GAAKrE,EAAIqE,EAAE,GAAKpK,EAAIoK,EAAE,GAAY,IAAPA,EAAE,GACxDxC,EAAKvO,EAAI,GAAK4G,EAAImK,EAAE,GAAKioB,EAAIjoB,EAAE,GAAKrE,EAAIqE,EAAE,GAAKpK,EAAIoK,EAAE,GAAY,IAAPA,EAAE,GAC5DxC,EAAKvO,EAAI,GAAK4G,EAAImK,EAAE,IAAMioB,EAAIjoB,EAAE,IAAMrE,EAAIqE,EAAE,IAAMpK,EAAIoK,EAAE,IAAc,IAARA,EAAE,IAChExC,EAAKvO,EAAI,GAAK4G,EAAImK,EAAE,IAAMioB,EAAIjoB,EAAE,IAAMrE,EAAIqE,EAAE,IAAMpK,EAAIoK,EAAE,IAAc,IAARA,EAAE,MAWtEumE,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLuD,aAAcr/E,EAAGy8E,mBAAmBX,EAAS,gBAC7CwD,WAAYt/E,EAAGy8E,mBAAmBX,EAAS,gBAU/CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5B,IAAItmE,EAAI3U,KAAKyR,OACTA,EAAS,CACPkD,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GACpBA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GACpBA,EAAE,IAAKA,EAAE,IAAKA,EAAE,IAAKA,EAAE,IACvBA,EAAE,IAAKA,EAAE,IAAKA,EAAE,IAAKA,EAAE,KAEzBupE,EAAY,CAACvpE,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAAKA,EAAE,KACtChW,EAAGw/E,iBAAiBlD,EAAiB+C,cAAc,EAAOvsE,GAC1D9S,EAAGy/E,WAAWnD,EAAiBgD,WAAYC,MAW/C7gF,EAAOu6B,MAAM25C,QAAQuM,YAAYlwE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA3JhF,CA4JoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAgB9BgwD,EAAQ8M,WAAa98D,EAAYgwD,EAAQ4I,WAAoE,CAO3Gx0E,KAAM,aAKNyvE,eAAgB,6NAiBhBkJ,WAAY,EAOZ7B,cAAe,aAQfE,UAAW,SAASj5E,GAClB,GAAwB,IAApB1D,KAAKs+E,WAAT,CAGA,IAC2B16E,EAAvBuO,EADYzO,EAAQsO,UACHG,KAAStO,EAAMsO,EAAKrO,OACrCw6E,EAAa72E,KAAKo1B,MAAwB,IAAlB78B,KAAKs+E,YACjC,IAAK16E,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EACxBuO,EAAKvO,GAAKuO,EAAKvO,GAAK06E,EACpBnsE,EAAKvO,EAAI,GAAKuO,EAAKvO,EAAI,GAAK06E,EAC5BnsE,EAAKvO,EAAI,GAAKuO,EAAKvO,EAAI,GAAK06E,IAUhCpD,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACL8D,YAAa5/E,EAAGy8E,mBAAmBX,EAAS,iBAUhDuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGo+E,UAAU9B,EAAiBsD,YAAav+E,KAAKs+E,eAWpDjhF,EAAOu6B,MAAM25C,QAAQ8M,WAAWzwE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA9G/E,CAgHoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BmyD,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YA+C9BgwD,EAAQiN,UAAYj9D,EAAYgwD,EAAQ4I,WAAmE,CAOzGx0E,KAAM,YAKN84E,QAAQ,EAKRhtE,OAAQ,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAKjC2jE,eAAgB,CACdsJ,cAAe,qcAgBfC,cAAe,2hBAkBfC,cAAe,0cAgBfC,cAAe,4hBAkBfC,cAAe,0cAgBfC,cAAe,4hBAkBfC,cAAe,0cAgBfC,cAAe,6hBAmCjBrC,eAAgB,SAASl5E,GACvB,IAAIsC,EAAOyB,KAAKD,KAAKxH,KAAKyR,OAAO3N,QAC7ButE,EAAWrxE,KAAK2F,KAAO,IAAMK,EAAO,KAAOhG,KAAKy+E,OAAS,EAAI,GAC7DjJ,EAAex1E,KAAKo1E,eAAe/D,GAIvC,OAHK3tE,EAAQs0E,aAAaz4D,eAAe8xD,KACvC3tE,EAAQs0E,aAAa3G,GAAYrxE,KAAKq6E,cAAc32E,EAAQ+B,QAAS+vE,IAEhE9xE,EAAQs0E,aAAa3G,IAS9BsL,UAAW,SAASj5E,GAClB,IAWI8G,EAAGoyB,EAAGtsB,EAAG/F,EAAG20E,EACZC,EAAKC,EAAKC,EAAQC,EAClBj2E,EAAGC,EAAG4N,EAAIC,EAbVnF,EAAYtO,EAAQsO,UACpBG,EAAOH,EAAUG,KACjBotE,EAAUv/E,KAAKyR,OACf+tE,EAAO/3E,KAAKo1B,MAAMp1B,KAAKD,KAAK+3E,EAAQz7E,SACpC27E,EAAWh4E,KAAKe,MAAMg3E,EAAO,GAC7BE,EAAK1tE,EAAUzS,MACfogF,EAAK3tE,EAAU7S,OACfygF,EAASl8E,EAAQ1E,IAAI6gF,gBAAgBH,EAAIC,GACzCG,EAAMF,EAAOztE,KAEb4tE,EAAW//E,KAAKy+E,OAAS,EAAI,EAKjC,IAAKn1E,EAAI,EAAGA,EAAIq2E,EAAIr2E,IAClB,IAAKD,EAAI,EAAGA,EAAIq2E,EAAIr2E,IAAK,CAMvB,IALA61E,EAAwB,GAAd51E,EAAIo2E,EAAKr2E,GAGnBmB,EAAI,EAAGoyB,EAAI,EAAGtsB,EAAI,EAAG/F,EAAI,EAEpB4M,EAAK,EAAGA,EAAKqoE,EAAMroE,IACtB,IAAKD,EAAK,EAAGA,EAAKsoE,EAAMtoE,IAEtBioE,EAAM91E,EAAI6N,EAAKuoE,GADfL,EAAM91E,EAAI6N,EAAKsoE,GAIL,GAAKL,GAAOO,GAAMR,EAAM,GAAKA,GAAOO,IAI9CL,EAA4B,GAAlBD,EAAMM,EAAKP,GACrBG,EAAKC,EAAQpoE,EAAKqoE,EAAOtoE,GAEzB1M,GAAK2H,EAAKktE,GAAUC,EACpB1iD,GAAKzqB,EAAKktE,EAAS,GAAKC,EACxBhvE,GAAK6B,EAAKktE,EAAS,GAAKC,EAEnBS,IACHx1E,GAAK4H,EAAKktE,EAAS,GAAKC,IAI9BQ,EAAIZ,GAAU10E,EACds1E,EAAIZ,EAAS,GAAKtiD,EAClBkjD,EAAIZ,EAAS,GAAK5uE,EAKhBwvE,EAAIZ,EAAS,GAJVa,EAIe5tE,EAAK+sE,EAAS,GAHd30E,EAOxB7G,EAAQsO,UAAY4tE,GAStB1E,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLuF,QAASrhF,EAAGy8E,mBAAmBX,EAAS,WACxCwF,QAASthF,EAAGy8E,mBAAmBX,EAAS,WACxCyF,UAAWvhF,EAAGy8E,mBAAmBX,EAAS,aAC1C0F,MAAOxhF,EAAGy8E,mBAAmBX,EAAS,WAU1CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGyhF,WAAWnF,EAAiB+E,QAAShgF,KAAKyR,SAO/CmiC,SAAU,WACR,OAAOx0B,EAAOpf,KAAKkhB,UAAU,YAAa,CACxCu9D,OAAQz+E,KAAKy+E,OACbhtE,OAAQzR,KAAKyR,YAYnBpU,EAAOu6B,MAAM25C,QAAQiN,UAAU5wE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA7V9E,CA+VoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAa9BgwD,EAAQ8O,UAAY9+D,EAAYgwD,EAAQ4I,WAAmE,CAOzGx0E,KAAM,YAENyvE,eAAgB,CACd73C,QAAS,+PAQT+iD,UAAW,+SASXC,WAAY,uRAiBdC,KAAM,UAEN/D,cAAe,OAQfE,UAAW,SAASj5E,GAClB,IAC2BE,EACJK,EADnBkO,EADYzO,EAAQsO,UACHG,KACjBtO,EAAMsO,EAAKrO,OACX08E,EAAOxgF,KAAKwgF,KAChB,IAAK58E,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EACX,YAAT48E,EACFv8E,GAASkO,EAAKvO,GAAKuO,EAAKvO,EAAI,GAAKuO,EAAKvO,EAAI,IAAM,EAEhC,cAAT48E,EACPv8E,GAASwD,KAAKa,IAAI6J,EAAKvO,GAAIuO,EAAKvO,EAAI,GAAIuO,EAAKvO,EAAI,IAC/C6D,KAAKc,IAAI4J,EAAKvO,GAAIuO,EAAKvO,EAAI,GAAIuO,EAAKvO,EAAI,KAAO,EAEjC,eAAT48E,IACPv8E,EAAQ,IAAOkO,EAAKvO,GAAK,IAAOuO,EAAKvO,EAAI,GAAK,IAAOuO,EAAKvO,EAAI,IAEhEuO,EAAKvO,GAAKK,EACVkO,EAAKvO,EAAI,GAAKK,EACdkO,EAAKvO,EAAI,GAAKK,GAUlB24E,eAAgB,SAASl5E,GACvB,IAAI2tE,EAAWrxE,KAAK2F,KAAO,IAAM3F,KAAKwgF,KACtC,IAAK98E,EAAQs0E,aAAaz4D,eAAe8xD,GAAW,CAClD,IAAImE,EAAex1E,KAAKo1E,eAAep1E,KAAKwgF,MAC5C98E,EAAQs0E,aAAa3G,GAAYrxE,KAAKq6E,cAAc32E,EAAQ+B,QAAS+vE,GAEvE,OAAO9xE,EAAQs0E,aAAa3G,IAS9B6J,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLgG,MAAO9hF,EAAGy8E,mBAAmBX,EAAS,WAU1CuC,gBAAiB,SAASr+E,EAAIs8E,GAG5Bt8E,EAAG+hF,UAAUzF,EAAiBwF,MADnB,IASbpN,eAAgB,WACd,OAAO,KAWXh2E,EAAOu6B,MAAM25C,QAAQ8O,UAAUzyE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAvJ9E,CAyJoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAa9BgwD,EAAQoP,OAASp/D,EAAYgwD,EAAQ4I,WAAgE,CAOnGx0E,KAAM,SAENyvE,eAAgB,qSAkBhBwL,QAAQ,EAERnE,cAAe,SAQfE,UAAW,SAASj5E,GAClB,IAC2BE,EAAvBuO,EADYzO,EAAQsO,UACHG,KACjBtO,EAAMsO,EAAKrO,OACf,IAAKF,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EACxBuO,EAAKvO,GAAK,IAAMuO,EAAKvO,GACrBuO,EAAKvO,EAAI,GAAK,IAAMuO,EAAKvO,EAAI,GAC7BuO,EAAKvO,EAAI,GAAK,IAAMuO,EAAKvO,EAAI,IAUjCyvE,eAAgB,WACd,OAAQrzE,KAAK4gF,QASf1F,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLoG,QAASliF,EAAGy8E,mBAAmBX,EAAS,aAU5CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAG+hF,UAAUzF,EAAiB4F,QAAS7gF,KAAK4gF,WAWhDvjF,EAAOu6B,MAAM25C,QAAQoP,OAAO/yE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA3G3E,CA8GoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BmyD,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAiB9BgwD,EAAQuP,MAAQv/D,EAAYgwD,EAAQ4I,WAA+D,CAOjGx0E,KAAM,QAKNyvE,eAAgB,ucAoBhBqH,cAAe,QAOfsE,MAAO,EAQPpE,UAAW,SAASj5E,GAClB,GAAmB,IAAf1D,KAAK+gF,MAAT,CAGA,IAC2Bn9E,EACHo9E,EADpB7uE,EADYzO,EAAQsO,UACHG,KAAStO,EAAMsO,EAAKrO,OACrCi9E,EAAQ/gF,KAAK+gF,MAEjB,IAAKn9E,EAAI,EAAGC,EAAMsO,EAAKrO,OAAQF,EAAIC,EAAKD,GAAK,EAE3Co9E,GAAQ,GAAMv5E,KAAKgB,UAAYs4E,EAE/B5uE,EAAKvO,IAAMo9E,EACX7uE,EAAKvO,EAAI,IAAMo9E,EACf7uE,EAAKvO,EAAI,IAAMo9E,IAUnB9F,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLwG,OAAQtiF,EAAGy8E,mBAAmBX,EAAS,UACvCyG,MAAOviF,EAAGy8E,mBAAmBX,EAAS,WAU1CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGo+E,UAAU9B,EAAiBgG,OAAQjhF,KAAK+gF,MAAQ,KACnDpiF,EAAGo+E,UAAU9B,EAAiBiG,MAAOz5E,KAAKgB,WAO5CmrC,SAAU,WACR,OAAOx0B,EAAOpf,KAAKkhB,UAAU,YAAa,CACxC6/D,MAAO/gF,KAAK+gF,WAYlB1jF,EAAOu6B,MAAM25C,QAAQuP,MAAMlzE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAnI1E,CAqIoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAgB9BgwD,EAAQ4P,SAAW5/D,EAAYgwD,EAAQ4I,WAAkE,CAOvGx0E,KAAM,WAENy7E,UAAW,EAEX3E,cAAe,YAKfrH,eAAgB,6fAwBhBuH,UAAW,SAASj5E,GAClB,IAIIsB,EAAOpB,EAAGoV,EAAGxO,EAAGoyB,EAAGtsB,EAAG/F,EACtB82E,EAAIC,EAAIC,EAAOC,EALfxvE,EAAYtO,EAAQsO,UACpBG,EAAOH,EAAUG,KACjBm+D,EAAOt+D,EAAU7S,OACjBoxE,EAAOv+D,EAAUzS,MAIrB,IAAKqE,EAAI,EAAGA,EAAI0sE,EAAM1sE,GAAK5D,KAAKohF,UAC9B,IAAKpoE,EAAI,EAAGA,EAAIu3D,EAAMv3D,GAAKhZ,KAAKohF,UAW9B,IAPA52E,EAAI2H,EAFJnN,EAAa,EAAJpB,EAAS2sE,EAAY,EAAJv3D,GAG1B4jB,EAAIzqB,EAAKnN,EAAQ,GACjBsL,EAAI6B,EAAKnN,EAAQ,GACjBuF,EAAI4H,EAAKnN,EAAQ,GAEjBu8E,EAAQ95E,KAAKa,IAAI1E,EAAI5D,KAAKohF,UAAW9Q,GACrCkR,EAAQ/5E,KAAKa,IAAI0Q,EAAIhZ,KAAKohF,UAAW7Q,GAChC8Q,EAAKz9E,EAAGy9E,EAAKE,EAAOF,IACvB,IAAKC,EAAKtoE,EAAGsoE,EAAKE,EAAOF,IAEvBnvE,EADAnN,EAAc,EAALq8E,EAAU9Q,EAAa,EAAL+Q,GACb92E,EACd2H,EAAKnN,EAAQ,GAAK43B,EAClBzqB,EAAKnN,EAAQ,GAAKsL,EAClB6B,EAAKnN,EAAQ,GAAKuF,GAU5B8oE,eAAgB,WACd,OAA0B,IAAnBrzE,KAAKohF,WASdlG,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLgH,WAAY9iF,EAAGy8E,mBAAmBX,EAAS,cAC3CU,OAAQx8E,EAAGy8E,mBAAmBX,EAAS,UACvCY,OAAQ18E,EAAGy8E,mBAAmBX,EAAS,YAU3CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGo+E,UAAU9B,EAAiBwG,WAAYzhF,KAAKohF,cAWnD/jF,EAAOu6B,MAAM25C,QAAQ4P,SAASvzE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAtI7E,CAwIoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5C+hB,EAAS/hB,EAAOgG,KAAK0B,OAAOqa,OAC5BmyD,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAiB9BgwD,EAAQmQ,YAAcngE,EAAYgwD,EAAQ4I,WAAqE,CAO7Gx0E,KAAM,cAON0lB,MAAO,UAKP+pD,eAAgB,uTAgBhB55D,SAAU,IAMVmmE,UAAU,EAcVhF,UAAW,SAASj5E,GAClB,IAC2BE,EAEvB4G,EAAGoyB,EAAGtsB,EAFN6B,EADYzO,EAAQsO,UACHG,KACjBqJ,EAA2B,IAAhBxb,KAAKwb,SAEhBzU,EAAS,IAAI1J,EAAOquB,MAAM1rB,KAAKqrB,OAAOM,YACtCi2D,EAAO,CACL76E,EAAO,GAAKyU,EACZzU,EAAO,GAAKyU,EACZzU,EAAO,GAAKyU,GAEdqmE,EAAQ,CACN96E,EAAO,GAAKyU,EACZzU,EAAO,GAAKyU,EACZzU,EAAO,GAAKyU,GAIlB,IAAK5X,EAAI,EAAGA,EAAIuO,EAAKrO,OAAQF,GAAK,EAChC4G,EAAI2H,EAAKvO,GACTg5B,EAAIzqB,EAAKvO,EAAI,GACb0M,EAAI6B,EAAKvO,EAAI,GAET4G,EAAIo3E,EAAK,IACThlD,EAAIglD,EAAK,IACTtxE,EAAIsxE,EAAK,IACTp3E,EAAIq3E,EAAM,IACVjlD,EAAIilD,EAAM,IACVvxE,EAAIuxE,EAAM,KACZ1vE,EAAKvO,EAAI,GAAK,IAWpBs3E,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLqH,KAAMnjF,EAAGy8E,mBAAmBX,EAAS,QACrCsH,MAAOpjF,EAAGy8E,mBAAmBX,EAAS,WAU1CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5B,IAAIl0E,EAAS,IAAI1J,EAAOquB,MAAM1rB,KAAKqrB,OAAOM,YACtCnQ,EAAW5Q,WAAW5K,KAAKwb,UAC3BomE,EAAO,CACL,EAAI76E,EAAO,GAAK,IAAMyU,EACtB,EAAIzU,EAAO,GAAK,IAAMyU,EACtB,EAAIzU,EAAO,GAAK,IAAMyU,EACtB,GAEFqmE,EAAQ,CACN96E,EAAO,GAAK,IAAMyU,EAClBzU,EAAO,GAAK,IAAMyU,EAClBzU,EAAO,GAAK,IAAMyU,EAClB,GAEN7c,EAAGy/E,WAAWnD,EAAiB6G,KAAMF,GACrCjjF,EAAGy/E,WAAWnD,EAAiB8G,MAAOF,IAOxCjuC,SAAU,WACR,OAAOx0B,EAAOpf,KAAKkhB,UAAU,YAAa,CACxCmK,MAAOrrB,KAAKqrB,MACZ7P,SAAUxb,KAAKwb,cAYrBne,EAAOu6B,MAAM25C,QAAQmQ,YAAY9zE,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA1KhF,CA4KoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAE1B0P,EAAW,CACb+wD,QAAS,CACP,MAAQ,QAAS,OAAQ,EAAE,MAC1B,MAAQ,OAAQ,OAAQ,GAAG,MAC5B,QAAS,OAAQ,OAAQ,GAAG,OAC5B,EAAE,EAAE,EAAE,EAAE,GAEVC,QAAS,CACP,OAAQ,QAAS,OAAQ,EAAE,OAC3B,OAAQ,OAAQ,OAAQ,EAAE,OAC1B,OAAS,OAAQ,OAAQ,EAAE,OAC3B,EAAE,EAAE,EAAE,EAAE,GAEVC,WAAY,CACV,SAAS,QAAS,OAAQ,EAAE,QAC3B,OAAQ,SAAS,OAAQ,EAAE,QAC3B,QAAS,OAAQ,QAAQ,EAAE,OAC5B,EAAE,EAAE,EAAE,EAAE,GAEVC,YAAa,CACX,SAAS,QAAS,OAAQ,EAAE,QAC3B,OAAQ,SAAS,OAAQ,GAAG,QAC5B,OAAS,OAAQ,QAAQ,EAAE,OAC5B,EAAE,EAAE,EAAE,EAAE,GAEVC,SAAU,CACR,OAAO,MAAO,KAAM,EAAE,GACrB,KAAM,OAAO,KAAM,EAAE,GACrB,MAAO,KAAM,MAAM,EAAE,EACtB,EAAE,EAAE,EAAE,EAAE,GAEVC,MAAO,CACL,KAAO,KAAO,KAAO,EAAG,EACxB,KAAO,KAAO,KAAO,EAAG,EACxB,KAAO,KAAO,KAAO,EAAG,EACxB,EAAG,EAAG,EAAG,EAAG,GAEdC,WAAY,CACV,IAAK,IAAK,IAAK,GAAI,EACnB,IAAK,IAAK,IAAK,GAAI,EACnB,IAAK,IAAK,IAAK,GAAI,EACnB,EAAG,EAAG,EAAG,EAAG,IAIhB,IAAK,IAAIl7E,KAAO6pB,EACdsgD,EAAQnqE,GAAOma,EAAYgwD,EAAQuM,YAAgE,CAOjGn4E,KAAMyB,EASNqK,OAAQwf,EAAS7pB,GAKjBq1E,eAAe,EAIfsB,YAAY,IAGd1gF,EAAOu6B,MAAM25C,QAAQnqE,GAAKwG,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAlF3E,CAoFoCrQ,GAGpC,SAAUgK,GACR,aAEA,IAAIlK,EAASkK,EAAOlK,OAChBk0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAuB9BgwD,EAAQgR,WAAahhE,EAAYgwD,EAAQ4I,WAA+D,CACtGx0E,KAAM,aAMN0lB,MAAO,UAMPm1D,KAAM,WAKNnjD,MAAO,EAKP+3C,eAAgB,CACd9jE,SAAU,oCACVkxE,OAAQ,4EACR/9E,IAAK,oCACLg+E,KAAM,2DACNnpD,SAAU,oCACVopD,QAAS,0DACTC,OAAQ,0DACRC,UAAW,4EACX5jC,QAAS,mbAeT6jC,KAAM,4EAWRC,YAAa,SAAStC,GACpB,MAAO,iNAQDxgF,KAAKo1E,eAAeoL,GARnB,QAmBT5D,eAAgB,SAASl5E,GACvB,IAA4C8xE,EAAxCnE,EAAWrxE,KAAK2F,KAAO,IAAM3F,KAAKwgF,KAKtC,OAJK98E,EAAQs0E,aAAaz4D,eAAe8xD,KACvCmE,EAAex1E,KAAK8iF,YAAY9iF,KAAKwgF,MACrC98E,EAAQs0E,aAAa3G,GAAYrxE,KAAKq6E,cAAc32E,EAAQ+B,QAAS+vE,IAEhE9xE,EAAQs0E,aAAa3G,IAS9BsL,UAAW,SAASj5E,GAClB,IAEIqvC,EAAIgwC,EAAI/qE,EACRxN,EAAGoyB,EAAGtsB,EACNvJ,EAHAoL,EADYzO,EAAQsO,UACHG,KAAMm+D,EAAOn+D,EAAKrO,OAG3Bk/E,EAAS,EAAIhjF,KAAKq9B,MAG9B0V,GADAhsC,EAAS,IAAI1J,EAAOquB,MAAM1rB,KAAKqrB,OAAOM,aAC1B,GAAK3rB,KAAKq9B,MACtB0lD,EAAKh8E,EAAO,GAAK/G,KAAKq9B,MACtBrlB,EAAKjR,EAAO,GAAK/G,KAAKq9B,MAEtB,IAAK,IAAIz5B,EAAI,EAAGA,EAAI0sE,EAAM1sE,GAAK,EAM7B,OAJA4G,EAAI2H,EAAKvO,GACTg5B,EAAIzqB,EAAKvO,EAAI,GACb0M,EAAI6B,EAAKvO,EAAI,GAEL5D,KAAKwgF,MACX,IAAK,WACHruE,EAAKvO,GAAK4G,EAAIuoC,EAAK,IACnB5gC,EAAKvO,EAAI,GAAKg5B,EAAImmD,EAAK,IACvB5wE,EAAKvO,EAAI,GAAK0M,EAAI0H,EAAK,IACvB,MACF,IAAK,SACH7F,EAAKvO,GAAK,KAAO,IAAM4G,IAAM,IAAMuoC,GAAM,IACzC5gC,EAAKvO,EAAI,GAAK,KAAO,IAAMg5B,IAAM,IAAMmmD,GAAM,IAC7C5wE,EAAKvO,EAAI,GAAK,KAAO,IAAM0M,IAAM,IAAM0H,GAAM,IAC7C,MACF,IAAK,MACH7F,EAAKvO,GAAK4G,EAAIuoC,EACd5gC,EAAKvO,EAAI,GAAKg5B,EAAImmD,EAClB5wE,EAAKvO,EAAI,GAAK0M,EAAI0H,EAClB,MACF,IAAK,OACL,IAAK,aACH7F,EAAKvO,GAAK6D,KAAKmP,IAAIpM,EAAIuoC,GACvB5gC,EAAKvO,EAAI,GAAK6D,KAAKmP,IAAIgmB,EAAImmD,GAC3B5wE,EAAKvO,EAAI,GAAK6D,KAAKmP,IAAItG,EAAI0H,GAC3B,MACF,IAAK,WACH7F,EAAKvO,GAAK4G,EAAIuoC,EACd5gC,EAAKvO,EAAI,GAAKg5B,EAAImmD,EAClB5wE,EAAKvO,EAAI,GAAK0M,EAAI0H,EAClB,MACF,IAAK,SACH7F,EAAKvO,GAAK6D,KAAKa,IAAIkC,EAAGuoC,GACtB5gC,EAAKvO,EAAI,GAAK6D,KAAKa,IAAIs0B,EAAGmmD,GAC1B5wE,EAAKvO,EAAI,GAAK6D,KAAKa,IAAIgI,EAAG0H,GAC1B,MACF,IAAK,UACH7F,EAAKvO,GAAK6D,KAAKc,IAAIiC,EAAGuoC,GACtB5gC,EAAKvO,EAAI,GAAK6D,KAAKc,IAAIq0B,EAAGmmD,GAC1B5wE,EAAKvO,EAAI,GAAK6D,KAAKc,IAAI+H,EAAG0H,GAC1B,MACF,IAAK,UACH7F,EAAKvO,GAAKmvC,EAAK,IAAO,EAAIvoC,EAAIuoC,EAAK,IAAQ,IAAM,GAAK,IAAMvoC,IAAM,IAAMuoC,GAAM,IAC9E5gC,EAAKvO,EAAI,GAAKm/E,EAAK,IAAO,EAAInmD,EAAImmD,EAAK,IAAQ,IAAM,GAAK,IAAMnmD,IAAM,IAAMmmD,GAAM,IAClF5wE,EAAKvO,EAAI,GAAKoU,EAAK,IAAO,EAAI1H,EAAI0H,EAAK,IAAQ,IAAM,GAAK,IAAM1H,IAAM,IAAM0H,GAAM,IAClF,MACF,IAAK,YACH7F,EAAKvO,GAAKmvC,EAAKvoC,EAAM,EAAIuoC,EAAKvoC,EAAK,IACnC2H,EAAKvO,EAAI,GAAKm/E,EAAKnmD,EAAM,EAAImmD,EAAKnmD,EAAK,IACvCzqB,EAAKvO,EAAI,GAAKoU,EAAK1H,EAAM,EAAI0H,EAAK1H,EAAK,IACvC,MACF,IAAK,OACH6B,EAAKvO,GAAKmvC,EAAKvoC,EAAIw4E,EACnB7wE,EAAKvO,EAAI,GAAKm/E,EAAKnmD,EAAIomD,EACvB7wE,EAAKvO,EAAI,GAAKoU,EAAK1H,EAAI0yE,IAW/B9H,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLwI,OAAQtkF,EAAGy8E,mBAAmBX,EAAS,YAU3CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5B,IAAIl0E,EAAS,IAAI1J,EAAOquB,MAAM1rB,KAAKqrB,OAAOM,YAC1C5kB,EAAO,GAAK/G,KAAKq9B,MAAQt2B,EAAO,GAAK,IACrCA,EAAO,GAAK/G,KAAKq9B,MAAQt2B,EAAO,GAAK,IACrCA,EAAO,GAAK/G,KAAKq9B,MAAQt2B,EAAO,GAAK,IACrCA,EAAO,GAAK/G,KAAKq9B,MACjB1+B,EAAGy/E,WAAWnD,EAAiBgI,OAAQl8E,IAOzC6sC,SAAU,WACR,MAAO,CACLjuC,KAAM3F,KAAK2F,KACX0lB,MAAOrrB,KAAKqrB,MACZm1D,KAAMxgF,KAAKwgF,KACXnjD,MAAOr9B,KAAKq9B,UAYlBhgC,EAAOu6B,MAAM25C,QAAQgR,WAAW30E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAlP/E,CAoPoCrQ,GAGpC,SAAUgK,GACR,aAEA,IAAIlK,EAASkK,EAAOlK,OAChBk0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAuB9BgwD,EAAQ2R,WAAa3hE,EAAYgwD,EAAQ4I,WAAoE,CAC3Gx0E,KAAM,aAMN4zC,MAAO,KAMPinC,KAAM,WAMNnjD,MAAO,EAEP+8C,aAAc,2QAadhF,eAAgB,CACd9jE,SAAU,2TAYV6xE,KAAM,qTAoBRvG,eAAgB,SAASl5E,GACvB,IAAI2tE,EAAWrxE,KAAK2F,KAAO,IAAM3F,KAAKwgF,KAClChL,EAAex1E,KAAKo1E,eAAep1E,KAAKwgF,MAI5C,OAHK98E,EAAQs0E,aAAaz4D,eAAe8xD,KACvC3tE,EAAQs0E,aAAa3G,GAAYrxE,KAAKq6E,cAAc32E,EAAQ+B,QAAS+vE,IAEhE9xE,EAAQs0E,aAAa3G,IAG9BqL,aAAc,SAASh5E,GAErB,IAAI/E,EAAK+E,EAAQ+B,QACbszE,EAAU/4E,KAAK23E,cAAcj0E,EAAQuuE,cAAejyE,KAAKu5C,OAC7Dv5C,KAAKo9E,sBAAsBz+E,EAAIo6E,EAASp6E,EAAGykF,UAC3CpjF,KAAKkhB,UAAU,eAAgBxd,GAC/B1D,KAAKw9E,wBAAwB7+E,EAAIA,EAAGykF,WAGtCzL,cAAe,SAAS3F,EAASz4B,GAC/B,OAAOy4B,EAAQyF,iBAAiBl+B,EAAM83B,SAAU93B,EAAMk4B,WASxD4R,gBAAiB,WACf,IAAI9pC,EAAQv5C,KAAKu5C,MACbh6C,EAAQg6C,EAAMk4B,SAASlyE,MACvBJ,EAASo6C,EAAMk4B,SAAStyE,OAC5B,MAAO,CACL,EAAIo6C,EAAM7oC,OAAQ,EAAG,EACrB,EAAG,EAAI6oC,EAAM5oC,OAAQ,GACpB4oC,EAAMnvC,KAAO7K,GAAQg6C,EAAMlvC,IAAMlL,EAAQ,IAU9Cw9E,UAAW,SAASj5E,GAClB,IAKIqvC,EAAIgwC,EAAI/qE,EAAID,EACZvN,EAAGoyB,EAAGtsB,EAAG/F,EACT+4E,EAAS79E,EAA6B89E,EAPtCvxE,EAAYtO,EAAQsO,UACpB5T,EAAYsF,EAAQuuE,cAAc7zE,UAClC+T,EAAOH,EAAUG,KAAMm+D,EAAOn+D,EAAKrO,OACnCvE,EAAQyS,EAAUzS,MAClBJ,EAAS6S,EAAU7S,OAGDo6C,EAAQv5C,KAAKu5C,MAE9Bn7C,EAAUolF,aACbplF,EAAUolF,WAAanmF,EAAOgG,KAAKyM,uBAGrCrK,GADA69E,EAAUllF,EAAUolF,YACFvkF,WAAW,MACzBqkF,EAAQ/jF,QAAUA,GAAS+jF,EAAQnkF,SAAWA,GAChDmkF,EAAQ/jF,MAAQA,EAChB+jF,EAAQnkF,OAASA,GAGjBsG,EAAQs2C,UAAU,EAAG,EAAGx8C,EAAOJ,GAEjCsG,EAAQ+2D,aAAajjB,EAAM7oC,OAAQ,EAAG,EAAG6oC,EAAM5oC,OAAQ4oC,EAAMnvC,KAAMmvC,EAAMlvC,KACzE5E,EAAQnG,UAAUi6C,EAAMk4B,SAAU,EAAG,EAAGlyE,EAAOJ,GAC/CokF,EAAY99E,EAAQwM,aAAa,EAAG,EAAG1S,EAAOJ,GAAQgT,KACtD,IAAK,IAAIvO,EAAI,EAAGA,EAAI0sE,EAAM1sE,GAAK,EAY7B,OAVA4G,EAAI2H,EAAKvO,GACTg5B,EAAIzqB,EAAKvO,EAAI,GACb0M,EAAI6B,EAAKvO,EAAI,GACb2G,EAAI4H,EAAKvO,EAAI,GAEbmvC,EAAKwwC,EAAU3/E,GACfm/E,EAAKQ,EAAU3/E,EAAI,GACnBoU,EAAKurE,EAAU3/E,EAAI,GACnBmU,EAAKwrE,EAAU3/E,EAAI,GAEX5D,KAAKwgF,MACX,IAAK,WACHruE,EAAKvO,GAAK4G,EAAIuoC,EAAK,IACnB5gC,EAAKvO,EAAI,GAAKg5B,EAAImmD,EAAK,IACvB5wE,EAAKvO,EAAI,GAAK0M,EAAI0H,EAAK,IACvB7F,EAAKvO,EAAI,GAAK2G,EAAIwN,EAAK,IACvB,MACF,IAAK,OACH5F,EAAKvO,EAAI,GAAKmU,IAYtBmjE,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLgJ,iBAAkB9kF,EAAGy8E,mBAAmBX,EAAS,oBACjDiJ,OAAQ/kF,EAAGy8E,mBAAmBX,EAAS,YAU3CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5B,IAAIxpE,EAASzR,KAAKqjF,kBAClB1kF,EAAG+hF,UAAUzF,EAAiByI,OAAQ,GACtC/kF,EAAGglF,iBAAiB1I,EAAiBwI,kBAAkB,EAAOhyE,IAOhEmiC,SAAU,WACR,MAAO,CACLjuC,KAAM3F,KAAK2F,KACX4zC,MAAOv5C,KAAKu5C,OAASv5C,KAAKu5C,MAAM3F,WAChC4sC,KAAMxgF,KAAKwgF,KACXnjD,MAAOr9B,KAAKq9B,UAYlBhgC,EAAOu6B,MAAM25C,QAAQ2R,WAAWt1E,WAAa,SAAS7I,EAAQS,GAC5DnI,EAAOu6B,MAAMhqB,WAAW7I,EAAOw0C,OAAO,SAASA,GAC7C,IAAI71C,EAAUrG,EAAOgG,KAAK0B,OAAOya,MAAMza,GACvCrB,EAAQ61C,MAAQA,EAChB/zC,EAAS,IAAInI,EAAOu6B,MAAM25C,QAAQ2R,WAAWx/E,QAjPnD,CAqPoCnG,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAAMsK,EAAMF,KAAKE,IAAKa,EAAQf,KAAKe,MAC/EhB,EAAOC,KAAKD,KAAMoP,EAAMnP,KAAKmP,IAAKimB,EAAQp1B,KAAKo1B,MAAO50B,EAAMR,KAAKQ,IACjEuP,EAAO/P,KAAK+P,KACZ+5D,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAa9BgwD,EAAQqS,OAASriE,EAAYgwD,EAAQ4I,WAAgE,CAOnGx0E,KAAM,SASNk+E,WAAY,UAOZnzE,OAAQ,EAORC,OAAQ,EAORmzE,aAAc,EASd5I,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLsJ,OAAQplF,EAAGy8E,mBAAmBX,EAAS,UACvCuJ,MAAOrlF,EAAGy8E,mBAAmBX,EAAS,WAU1CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGslF,WAAWhJ,EAAiB8I,OAAQ/jF,KAAKkkF,WAAa,CAAC,EAAIlkF,KAAKT,MAAO,GAAK,CAAC,EAAG,EAAIS,KAAKb,SAC5FR,EAAGyhF,WAAWnF,EAAiB+I,MAAOhkF,KAAKmkF,OAS7CvH,eAAgB,SAASl5E,GACvB,IAAI0gF,EAAepkF,KAAKqkF,kBAAmBhT,EAAWrxE,KAAK2F,KAAO,IAAMy+E,EACxE,IAAK1gF,EAAQs0E,aAAaz4D,eAAe8xD,GAAW,CAClD,IAAIgE,EAAiBr1E,KAAKskF,eAAeF,GACzC1gF,EAAQs0E,aAAa3G,GAAYrxE,KAAKq6E,cAAc32E,EAAQ+B,QAAS4vE,GAEvE,OAAO3xE,EAAQs0E,aAAa3G,IAG9BgT,gBAAiB,WACf,IAAIjlF,EAAQY,KAAKukF,UACjB,OAAO98E,KAAK+P,KAAKxX,KAAK8jF,aAAe1kF,IAGvColF,QAAS,WAGP,IAFA,IAAIC,EAAezkF,KAAK0kF,cAAc1kF,KAAK8jF,cAAe1kF,EAAQY,KAAKukF,UACnEH,EAAepkF,KAAKqkF,kBAAmBF,EAAO,IAAI1vE,MAAM2vE,GACnDxgF,EAAI,EAAGA,GAAKwgF,EAAcxgF,IACjCugF,EAAKvgF,EAAI,GAAK6gF,EAAa7gF,EAAIxE,GAEjC,OAAO+kF,GAOTG,eAAgB,SAASF,GAIvB,IAHA,IAAIO,EAAU,IAAIlwE,MAAM2vE,GACpB/O,EAAiBr1E,KAAK4kF,kBAEjBhhF,EAAI,EAAGA,GAAKwgF,EAAcxgF,IACjC+gF,EAAQ/gF,EAAI,GAAKA,EAAI,cAevB,OAZAyxE,GAAkB,uBAAyB+O,EAAe,OAC1D/O,GAAkB,kBAClBA,GAAkB,mDAClBA,GAAkB,uBAElBsP,EAAQh3E,SAAQ,SAASoZ,EAAQnjB,GAC/ByxE,GAAkB,8CAAgDtuD,EAAS,aAAenjB,EAAI,OAC9FyxE,GAAkB,8CAAgDtuD,EAAS,aAAenjB,EAAI,OAC9FyxE,GAAkB,wBAA0BzxE,EAAI,UAElDyxE,GAAkB,kCAClBA,GAAkB,KAIpBuP,kBAAmB,uGAiBnBtM,QAAS,SAAS50E,GACZA,EAAQq0E,OACVr0E,EAAQo0E,SACR93E,KAAKT,MAAQmE,EAAQyvE,YACrBnzE,KAAKkkF,YAAa,EAClBlkF,KAAK6kF,GAAKp9E,KAAKo1B,MAAM78B,KAAKT,MAAQS,KAAK0Q,QACvC1Q,KAAK8kF,GAAKphF,EAAQ0vE,aAClBpzE,KAAKukF,UAAYvkF,KAAK6kF,GAAK7kF,KAAKT,MAChCS,KAAKmkF,KAAOnkF,KAAKwkF,UACjB9gF,EAAQhE,iBAAmBM,KAAK6kF,GAChC7kF,KAAKm8E,kBAAkBz4E,GACvB1D,KAAK08E,aAAah5E,GAClB1D,KAAKs8E,cAAc54E,GACnBA,EAAQyvE,YAAczvE,EAAQhE,iBAE9BM,KAAKb,OAASuE,EAAQ0vE,aACtBpzE,KAAKkkF,YAAa,EAClBlkF,KAAK8kF,GAAKr9E,KAAKo1B,MAAM78B,KAAKb,OAASa,KAAK2Q,QACxC3Q,KAAKukF,UAAYvkF,KAAK8kF,GAAK9kF,KAAKb,OAChCa,KAAKmkF,KAAOnkF,KAAKwkF,UACjB9gF,EAAQ9D,kBAAoBI,KAAK8kF,GACjC9kF,KAAKm8E,kBAAkBz4E,GACvB1D,KAAK08E,aAAah5E,GAClB1D,KAAKs8E,cAAc54E,GACnBA,EAAQ0vE,aAAe1vE,EAAQ9D,mBAG/BI,KAAK28E,UAAUj5E,IAInB2vE,eAAgB,WACd,OAAuB,IAAhBrzE,KAAK0Q,QAAgC,IAAhB1Q,KAAK2Q,QAGnC+zE,cAAe,SAASK,GACtB,OAAO,SAAS17E,GACd,GAAIA,GAAK07E,GAAS17E,IAAM07E,EACtB,OAAO,EAET,GAAI17E,EAAI,cAAkBA,GAAK,aAC7B,OAAO,EAGT,IAAI27E,GADJ37E,GAAK5B,KAAKI,IACGk9E,EACb,OAAQ98E,EAAIoB,GAAKA,EAAKpB,EAAI+8E,GAAMA,IAWpCrI,UAAW,SAASj5E,GAClB,IAAIsO,EAAYtO,EAAQsO,UACpBtB,EAAS1Q,KAAK0Q,OACdC,EAAS3Q,KAAK2Q,OAElB3Q,KAAKilF,UAAY,EAAIv0E,EACrB1Q,KAAKklF,UAAY,EAAIv0E,EAErB,IAEIw0E,EAFAC,EAAKpzE,EAAUzS,MAAO8lF,EAAKrzE,EAAU7S,OACrC0lF,EAAKhoD,EAAMuoD,EAAK10E,GAASo0E,EAAKjoD,EAAMwoD,EAAK10E,GAGrB,cAApB3Q,KAAK6jF,WACPsB,EAAUnlF,KAAKslF,WAAW5hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GAEpB,YAApB9kF,KAAK6jF,WACZsB,EAAUnlF,KAAKulF,kBAAkB7hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GAE3B,aAApB9kF,KAAK6jF,WACZsB,EAAUnlF,KAAKwlF,kBAAkB9hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GAE3B,YAApB9kF,KAAK6jF,aACZsB,EAAUnlF,KAAKylF,cAAc/hF,EAAS0hF,EAAIC,EAAIR,EAAIC,IAEpDphF,EAAQsO,UAAYmzE,GAYtBG,WAAY,SAAS5hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GACxC,IAGIY,EAAW1mF,EAHXgT,EAAYtO,EAAQsO,UACpB2zE,EAAO,GAAKC,GAAQ,EAAOC,GAAQ,EAAOC,EAAQV,EAAKO,EACvDI,EAAQV,EAAKM,EAAMvnF,EAAYf,EAAO40E,cAAc7zE,UACpCu1E,EAAK,EAAGC,EAAK,EAAGoS,EAAKZ,EAAIa,EAAK,EAgBlD,IAfK7nF,EAAUknF,aACblnF,EAAUknF,WAAa9nF,SAASsP,cAAc,aAEhD44E,EAAYtnF,EAAUknF,YACR/lF,MAAa,IAAL6lF,GAAYM,EAAUvmF,OAASkmF,KACnDK,EAAUnmF,MAAa,IAAL6lF,EAClBM,EAAUvmF,OAASkmF,IAErBrmF,EAAM0mF,EAAUzmF,WAAW,OACvB88C,UAAU,EAAG,EAAQ,IAALqpC,EAAUC,GAC9BrmF,EAAIyB,aAAauR,EAAW,EAAG,GAE/B6yE,EAAKr8E,EAAMq8E,GACXC,EAAKt8E,EAAMs8E,IAEHc,IAAUC,GAChBT,EAAKU,EACLT,EAAKU,EACDlB,EAAKr8E,EAAMs9E,EAAQH,GACrBG,EAAQt9E,EAAMs9E,EAAQH,IAGtBG,EAAQjB,EACRe,GAAQ,GAENd,EAAKt8E,EAAMu9E,EAAQJ,GACrBI,EAAQv9E,EAAMu9E,EAAQJ,IAGtBI,EAAQjB,EACRe,GAAQ,GAEV7mF,EAAIM,UAAUomF,EAAW/R,EAAIC,EAAIwR,EAAIC,EAAIW,EAAIC,EAAIH,EAAOC,GACxDpS,EAAKqS,EACLpS,EAAKqS,EACLA,GAAMF,EAER,OAAO/mF,EAAIiT,aAAa0hE,EAAIC,EAAIiR,EAAIC,IAYtCW,cAAe,SAAS/hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GAqD3C,IAAIoB,EAAUxiF,EAAQsO,UAAUG,KAC5Bg0E,EAAUziF,EAAQ1E,IAAI6gF,gBAAgBgF,EAAIC,GAC1CsB,EAAWD,EAAQh0E,KACnBk0E,EAAUrmF,KAAK0kF,cAAc1kF,KAAK8jF,cAClCwC,EAAStmF,KAAKilF,UAAWsB,EAASvmF,KAAKklF,UACvCsB,EAAY,EAAIxmF,KAAKilF,UAAWwB,EAAY,EAAIzmF,KAAKklF,UACrDwB,EAAUlvE,EAAK8uE,EAAStmF,KAAK8jF,aAAe,GAC5C6C,EAAUnvE,EAAK+uE,EAASvmF,KAAK8jF,aAAe,GAC5C8C,EAAY,GAAK3yE,EAAS,GAAK4yE,EAAU,GAE7C,OA7DA,SAASC,EAAQC,GACf,IAAI79E,EAAGtF,EAAGojF,EAAQ5+E,EAAKmC,EAAGk7B,EAAKjE,EAC3B9C,EAAMrB,EAAO4pD,EAAIC,EAGrB,IAFAjzE,EAAO5K,GAAK09E,EAAI,IAAOT,EACvBO,EAAQx9E,EAAIb,EAAMyL,EAAO5K,GACpBH,EAAI,EAAGA,EAAI47E,EAAI57E,IAAK,CAIvB,IAHA+K,EAAO3K,GAAKJ,EAAI,IAAOq9E,EACvBM,EAAQv9E,EAAId,EAAMyL,EAAO3K,GACzBiB,EAAI,EAAGk7B,EAAM,EAAGjE,EAAQ,EAAG9C,EAAO,EAAGrB,EAAQ,EACxCz5B,EAAIijF,EAAQx9E,EAAIq9E,EAAS9iF,GAAKijF,EAAQx9E,EAAIq9E,EAAS9iF,IACtD,KAAIA,EAAI,GAAKA,GAAKwhF,GAAlB,CAGA6B,EAAKz+E,EAAM,IAAOoO,EAAIhT,EAAIqQ,EAAO5K,IAC5Bu9E,EAAUK,KACbL,EAAUK,GAAM,IAElB,IAAK,IAAIjuE,EAAI6tE,EAAQv9E,EAAIq9E,EAAS3tE,GAAK6tE,EAAQv9E,EAAIq9E,EAAS3tE,IACtDA,EAAI,GAAKA,GAAKqsE,IAGlB6B,EAAK1+E,EAAM,IAAOoO,EAAIoC,EAAI/E,EAAO3K,IAC5Bs9E,EAAUK,GAAIC,KACjBN,EAAUK,GAAIC,GAAMb,EAAQ7+E,EAAKG,EAAIs/E,EAAKT,EAAW,GAAK7+E,EAAIu/E,EAAKT,EAAW,IAAM,OAEtFO,EAASJ,EAAUK,GAAIC,IACV,IAEX38E,GAAKy8E,EACLvhD,GAAOuhD,EAASd,EAFhB99E,EAAqB,GAAd4Q,EAAIosE,EAAKxhF,IAGhB49B,GAASwlD,EAASd,EAAQ99E,EAAM,GAChCs2B,GAAQsoD,EAASd,EAAQ99E,EAAM,GAC/Bi1B,GAAS2pD,EAASd,EAAQ99E,EAAM,KAKtCg+E,EADAh+E,EAAqB,GAAdc,EAAI27E,EAAKkC,IACAthD,EAAMl7B,EACtB67E,EAASh+E,EAAM,GAAKo5B,EAAQj3B,EAC5B67E,EAASh+E,EAAM,GAAKs2B,EAAOn0B,EAC3B67E,EAASh+E,EAAM,GAAKi1B,EAAQ9yB,EAG9B,QAAMw8E,EAAIlC,EACDiC,EAAQC,GAGRZ,EAcJW,CAAQ,IAYjBtB,kBAAmB,SAAS9hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GAC/C,IAAgBz7E,EAAGC,EAAG1F,EAAGoV,EAAGmuE,EAAOC,EAAOC,EACtCh8D,EAAmBi8D,EAAZvgE,EAAS,EAAYu/D,EAAStmF,KAAKilF,UAC1CsB,EAASvmF,KAAKklF,UACdqC,EAAK,GAAKnC,EAAK,GACfoC,EADyB9jF,EAAQsO,UACpBG,KAAMs1E,EAAY/jF,EAAQ1E,IAAI6gF,gBAAgBgF,EAAIC,GAC/D4C,EAAaD,EAAUt1E,KAC3B,IAAKvO,EAAI,EAAGA,EAAIkhF,EAAIlhF,IAClB,IAAKoV,EAAI,EAAGA,EAAI6rE,EAAI7rE,IAOlB,IAJAmuE,EAAQb,EAASttE,GAFjB3P,EAAIb,EAAM89E,EAASttE,IAGnBouE,EAAQb,EAAS3iF,GAFjB0F,EAAId,EAAM+9E,EAAS3iF,IAGnB0jF,EAAU,GAAKh+E,EAAI87E,EAAK/7E,GAEnBg+E,EAAO,EAAGA,EAAO,EAAGA,IAKvBh8D,EAJIm8D,EAAOF,EAAUD,IAIR,EAAIF,IAAU,EAAIC,GAH3BI,EAAOF,EAAU,EAAID,GAGmBF,GAAS,EAAIC,GAFrDI,EAAOF,EAAUC,EAAKF,GAGdD,GAAS,EAAID,GAFrBK,EAAOF,EAAUC,EAAK,EAAIF,GAEQF,EAAQC,EAC9CM,EAAW3gE,KAAYsE,EAI7B,OAAOo8D,GAYTlC,kBAAmB,SAAS7hF,EAAS0hF,EAAIC,EAAIR,EAAIC,GAM/C,IALA,IAAI6C,EAAS3nF,KAAKilF,UAAW2C,EAAS5nF,KAAKklF,UACvC2C,EAAarwE,EAAKmwE,EAAS,GAC3BG,EAAatwE,EAAKowE,EAAS,GACFz1E,EAAnBzO,EAAQsO,UAAsBG,KACpC41E,EAAOrkF,EAAQ1E,IAAI6gF,gBAAgBgF,EAAIC,GAAKkD,EAAQD,EAAK51E,KACpD6G,EAAI,EAAGA,EAAI8rE,EAAI9rE,IACtB,IAAK,IAAIpV,EAAI,EAAGA,EAAIihF,EAAIjhF,IAAK,CAG3B,IAFA,IAAIqL,EAAoB,GAAdrL,EAAIoV,EAAI6rE,GAASmC,EAAS,EAAGzH,EAAU,EAAG0I,EAAe,EAC/DC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGC,EAAM,EAAGj2C,GAAWp5B,EAAI,IAAO4uE,EACrDU,EAAK9/E,EAAMwQ,EAAI4uE,GAASU,GAAMtvE,EAAI,GAAK4uE,EAAQU,IAGtD,IAFA,IAAIj5E,EAAKuH,EAAIw7B,GAAWk2C,EAAK,KAAQR,EACjC31C,GAAWvuC,EAAI,IAAO+jF,EAAQY,EAAKl5E,EAAKA,EACnC21E,EAAKx8E,EAAM5E,EAAI+jF,GAAS3C,GAAMphF,EAAI,GAAK+jF,EAAQ3C,IAAM,CAC5D,IAAI51E,EAAKwH,EAAIu7B,GAAW6yC,EAAK,KAAQ6C,EACjCthB,EAAI/+D,EAAK+gF,EAAKn5E,EAAKA,GAEnBm3D,EAAI,GAAKA,GAAK,IAIlBygB,EAAS,EAAIzgB,EAAIA,EAAIA,EAAI,EAAIA,EAAIA,EAAI,GACxB,IAGX8hB,GAAOrB,EAAS70E,GAFhB/C,EAAK,GAAK41E,EAAKsD,EAAKlD,IAEM,GAC1B6C,GAAgBjB,EAEZ70E,EAAK/C,EAAK,GAAK,MACjB43E,EAASA,EAAS70E,EAAK/C,EAAK,GAAK,KAEnC84E,GAAOlB,EAAS70E,EAAK/C,GACrB+4E,GAAOnB,EAAS70E,EAAK/C,EAAK,GAC1Bg5E,GAAOpB,EAAS70E,EAAK/C,EAAK,GAC1BmwE,GAAWyH,GAKjBgB,EAAM/4E,GAAMi5E,EAAM3I,EAClByI,EAAM/4E,EAAK,GAAKk5E,EAAM5I,EACtByI,EAAM/4E,EAAK,GAAKm5E,EAAM7I,EACtByI,EAAM/4E,EAAK,GAAKo5E,EAAMJ,EAG1B,OAAOF,GAOTn0C,SAAU,WACR,MAAO,CACLjuC,KAAM3F,KAAK2F,KACX+K,OAAQ1Q,KAAK0Q,OACbC,OAAQ3Q,KAAK2Q,OACbkzE,WAAY7jF,KAAK6jF,WACjBC,aAAc9jF,KAAK8jF,iBAYzBzmF,EAAOu6B,MAAM25C,QAAQqS,OAAOh2E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAve3E,CAyeoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAgB9BgwD,EAAQiX,SAAWjnE,EAAYgwD,EAAQ4I,WAAkE,CAOvGx0E,KAAM,WAENyvE,eAAgB,8TAgBhBqT,SAAU,EAEVhM,cAAe,WAefE,UAAW,SAASj5E,GAClB,GAAsB,IAAlB1D,KAAKyoF,SAAT,CAGA,IAAmC7kF,EAC/BuO,EADYzO,EAAQsO,UACHG,KAAMtO,EAAMsO,EAAKrO,OAClC2kF,EAAWhhF,KAAKe,MAAsB,IAAhBxI,KAAKyoF,UAC3BC,EAAY,KAAOD,EAAW,MAAQ,KAAO,IAAMA,IAEvD,IAAK7kF,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EACxBuO,EAAKvO,GAAK8kF,GAAav2E,EAAKvO,GAAK,KAAO,IACxCuO,EAAKvO,EAAI,GAAK8kF,GAAav2E,EAAKvO,EAAI,GAAK,KAAO,IAChDuO,EAAKvO,EAAI,GAAK8kF,GAAav2E,EAAKvO,EAAI,GAAK,KAAO,MAUpDs3E,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLkO,UAAWhqF,EAAGy8E,mBAAmBX,EAAS,eAU9CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGo+E,UAAU9B,EAAiB0N,UAAW3oF,KAAKyoF,aAWlDprF,EAAOu6B,MAAM25C,QAAQiX,SAAS56E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA9G7E,CAgHoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAgB9BgwD,EAAQqX,WAAarnE,EAAYgwD,EAAQ4I,WAAoE,CAO3Gx0E,KAAM,aAENyvE,eAAgB,weAchByT,WAAY,EAEZpM,cAAe,aAefE,UAAW,SAASj5E,GAClB,GAAwB,IAApB1D,KAAK6oF,WAAT,CAGA,IAE+BjlF,EAAG2E,EAD9B4J,EADYzO,EAAQsO,UACHG,KAAMtO,EAAMsO,EAAKrO,OAClCglF,GAAU9oF,KAAK6oF,WAEnB,IAAKjlF,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EACxB2E,EAAMd,KAAKc,IAAI4J,EAAKvO,GAAIuO,EAAKvO,EAAI,GAAIuO,EAAKvO,EAAI,IAC9CuO,EAAKvO,IAAM2E,IAAQ4J,EAAKvO,IAAM2E,EAAM4J,EAAKvO,IAAMklF,EAAS,EACxD32E,EAAKvO,EAAI,IAAM2E,IAAQ4J,EAAKvO,EAAI,IAAM2E,EAAM4J,EAAKvO,EAAI,IAAMklF,EAAS,EACpE32E,EAAKvO,EAAI,IAAM2E,IAAQ4J,EAAKvO,EAAI,IAAM2E,EAAM4J,EAAKvO,EAAI,IAAMklF,EAAS,IAUxE5N,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLsO,YAAapqF,EAAGy8E,mBAAmBX,EAAS,iBAUhDuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAGo+E,UAAU9B,EAAiB8N,aAAc/oF,KAAK6oF,eAWrDxrF,EAAOu6B,MAAM25C,QAAQqX,WAAWh7E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WA5G/E,CA8GoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAiB9BgwD,EAAQyX,KAAOznE,EAAYgwD,EAAQ4I,WAA8D,CAE/Fx0E,KAAM,OAsBNyvE,eAAgB,mnBA6BhBh/B,KAAM,EAENqmC,cAAe,OAEfnE,QAAS,SAAS50E,GACZA,EAAQq0E,OAEV/3E,KAAKipF,YAAcvlF,EAAQyvE,YAAczvE,EAAQ0vE,aACjD1vE,EAAQo0E,SACR93E,KAAKm8E,kBAAkBz4E,GACvB1D,KAAKkkF,YAAa,EAClBlkF,KAAK08E,aAAah5E,GAClB1D,KAAKs8E,cAAc54E,GACnB1D,KAAKm8E,kBAAkBz4E,GACvB1D,KAAKkkF,YAAa,EAClBlkF,KAAK08E,aAAah5E,GAClB1D,KAAKs8E,cAAc54E,IAGnB1D,KAAK28E,UAAUj5E,IAInBi5E,UAAW,SAASj5E,GAGlBA,EAAQsO,UAAYhS,KAAKkpF,WAAWxlF,IAGtCwlF,WAAY,SAASxlF,GACnB,IAAiD4/E,EAAS6F,EAAtD/qF,EAAYsF,EAAQuuE,cAAc7zE,UAClCmB,EAAQmE,EAAQsO,UAAUzS,MAC1BJ,EAASuE,EAAQsO,UAAU7S,OAE1Bf,EAAUgrF,aACbhrF,EAAUgrF,WAAa/rF,EAAOgG,KAAKyM,sBACnC1R,EAAUirF,WAAahsF,EAAOgG,KAAKyM,uBAErCwzE,EAAUllF,EAAUgrF,WACpBD,EAAU/qF,EAAUirF,WAChB/F,EAAQ/jF,QAAUA,GAAS+jF,EAAQnkF,SAAWA,IAChDgqF,EAAQ5pF,MAAQ+jF,EAAQ/jF,MAAQA,EAChC4pF,EAAQhqF,OAASmkF,EAAQnkF,OAASA,GAEpC,IAGIsJ,EAAQ6gF,EAAStwE,EAAGpV,EAHpB2lF,EAAOjG,EAAQrkF,WAAW,MAC1BuqF,EAAOL,EAAQlqF,WAAW,MAC1BwqF,EAAW,GAEXrzC,EAAmB,IAAZp2C,KAAKo2C,KAAc,GAM9B,IAHAmzC,EAAK9oF,aAAaiD,EAAQsO,UAAW,EAAG,GACxCw3E,EAAKztC,UAAU,EAAG,EAAGx8C,EAAOJ,GAEvByE,GAAI,GAAWA,GAAK6lF,EAAU7lF,IAGjCoV,EAAIo9B,GADJkzC,EAAU1lF,EAAI6lF,GACOlqF,GAFrBkJ,GAAUhB,KAAKgB,SAAW,IAAO,GAGjC+gF,EAAK9iC,YAAc,EAAIj/C,KAAKmP,IAAI0yE,GAChCE,EAAKlqF,UAAUgkF,EAAStqE,EAAGvQ,GAC3B8gF,EAAKjqF,UAAU6pF,EAAS,EAAG,GAC3BK,EAAK9iC,YAAc,EACnB8iC,EAAKztC,UAAU,EAAG,EAAGotC,EAAQ5pF,MAAO4pF,EAAQhqF,QAE9C,IAAKyE,GAAI,GAAWA,GAAK6lF,EAAU7lF,IAGjCoV,EAAIo9B,GADJkzC,EAAU1lF,EAAI6lF,GACOtqF,GAFrBsJ,GAAUhB,KAAKgB,SAAW,IAAO,GAGjC+gF,EAAK9iC,YAAc,EAAIj/C,KAAKmP,IAAI0yE,GAChCE,EAAKlqF,UAAUgkF,EAAS76E,EAAQuQ,GAChCuwE,EAAKjqF,UAAU6pF,EAAS,EAAG,GAC3BK,EAAK9iC,YAAc,EACnB8iC,EAAKztC,UAAU,EAAG,EAAGotC,EAAQ5pF,MAAO4pF,EAAQhqF,QAE9CuE,EAAQ1E,IAAIM,UAAUgkF,EAAS,EAAG,GAClC,IAAIoG,EAAehmF,EAAQ1E,IAAIiT,aAAa,EAAG,EAAGqxE,EAAQ/jF,MAAO+jF,EAAQnkF,QAGzE,OAFAoqF,EAAK7iC,YAAc,EACnB6iC,EAAKxtC,UAAU,EAAG,EAAGunC,EAAQ/jF,MAAO+jF,EAAQnkF,QACrCuqF,GASTxO,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACLkP,MAAOhrF,EAAGy8E,mBAAmBX,EAAS,YAU1CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5B,IAAI0O,EAAQ3pF,KAAK4pF,mBACjBjrF,EAAGslF,WAAWhJ,EAAiB0O,MAAOA,IAOxCC,iBAAkB,WAChB,IAAmCxzC,EAA/ByzC,EAAY,EAAGF,EAAQ,CAAC,EAAG,GAoB/B,OAnBI3pF,KAAKkkF,WACHlkF,KAAKipF,YAAc,IAErBY,EAAY,EAAI7pF,KAAKipF,aAInBjpF,KAAKipF,YAAc,IAErBY,EAAY7pF,KAAKipF,aAGrB7yC,EAAOyzC,EAAY7pF,KAAKo2C,KAAO,IAC3Bp2C,KAAKkkF,WACPyF,EAAM,GAAKvzC,EAGXuzC,EAAM,GAAKvzC,EAENuzC,KAOXpY,EAAQyX,KAAKp7E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WApN5D,CAsNoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAgB9BgwD,EAAQuY,MAAQvoE,EAAYgwD,EAAQ4I,WAA+D,CAOjGx0E,KAAM,QAENyvE,eAAgB,kXAmBhB2U,MAAO,CAAC,EAAG,EAAG,GAOdtN,cAAe,QAMfj7D,WAAY,SAAS9d,GACnB1D,KAAK+pF,MAAQ,CAAC,EAAG,EAAG,GACpBxY,EAAQ4I,WAAWrrE,UAAU0S,WAAWzd,KAAK/D,KAAM0D,IASrDi5E,UAAW,SAASj5E,GAClB,IAGyBE,EAHUuO,EAAnBzO,EAAQsO,UAA4BG,KAChD43E,EAAQ/pF,KAAK+pF,MAAOlmF,EAAMsO,EAAKrO,OAC/BkmF,EAAO,EAAID,EAAM,GAAIE,EAAO,EAAIF,EAAM,GACtCG,EAAO,EAAIH,EAAM,GAarB,IAXK/pF,KAAKmqF,QAERnqF,KAAKmqF,MAAQ,IAAIpqF,WAAW,KAE5BC,KAAKoqF,MAAQ,IAAIrqF,WAAW,KAE5BC,KAAKqqF,MAAQ,IAAItqF,WAAW,MAKzB6D,EAAI,EAAGC,EAAM,IAAKD,EAAIC,EAAKD,IAC9B5D,KAAKmqF,MAAMvmF,GAA+B,IAA1B6D,KAAKE,IAAI/D,EAAI,IAAKomF,GAClChqF,KAAKoqF,MAAMxmF,GAA+B,IAA1B6D,KAAKE,IAAI/D,EAAI,IAAKqmF,GAClCjqF,KAAKqqF,MAAMzmF,GAA+B,IAA1B6D,KAAKE,IAAI/D,EAAI,IAAKsmF,GAEpC,IAAKtmF,EAAI,EAAGC,EAAMsO,EAAKrO,OAAQF,EAAIC,EAAKD,GAAK,EAC3CuO,EAAKvO,GAAK5D,KAAKmqF,MAAMh4E,EAAKvO,IAC1BuO,EAAKvO,EAAI,GAAK5D,KAAKoqF,MAAMj4E,EAAKvO,EAAI,IAClCuO,EAAKvO,EAAI,GAAK5D,KAAKqqF,MAAMl4E,EAAKvO,EAAI,KAUtCs3E,oBAAqB,SAASv8E,EAAI87E,GAChC,MAAO,CACL6P,OAAQ3rF,EAAGy8E,mBAAmBX,EAAS,YAU3CuC,gBAAiB,SAASr+E,EAAIs8E,GAC5Bt8E,EAAG4rF,WAAWtP,EAAiBqP,OAAQtqF,KAAK+pF,UAWhD1sF,EAAOu6B,MAAM25C,QAAQuY,MAAMl8E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WArI1E,CAuIoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAK9BgwD,EAAQiZ,SAAWjpE,EAAYgwD,EAAQ4I,WAAkE,CAEvGx0E,KAAM,WAKN8kF,WAAY,GAMZjpE,WAAY,SAAS9d,GACnB1D,KAAKkhB,UAAU,aAAcxd,GAE7B1D,KAAKyqF,WAAazqF,KAAKyqF,WAAW9+E,MAAM,IAS1C2sE,QAAS,SAAS50E,GAChBA,EAAQo0E,QAAU93E,KAAKyqF,WAAW3mF,OAAS,EAC3C9D,KAAKyqF,WAAW98E,SAAQ,SAAS3J,GAC/BA,EAAOs0E,QAAQ50E,OASnBkwC,SAAU,WACR,OAAOv2C,EAAOgG,KAAK0B,OAAOqa,OAAOpf,KAAKkhB,UAAU,YAAa,CAC3DupE,WAAYzqF,KAAKyqF,WAAWj3E,KAAI,SAASxP,GAAU,OAAOA,EAAO4vC,iBAIrEy/B,eAAgB,WACd,OAAQrzE,KAAKyqF,WAAW7lB,MAAK,SAAS5gE,GAAU,OAAQA,EAAOqvE,uBAOnEh2E,EAAOu6B,MAAM25C,QAAQiZ,SAAS58E,WAAa,SAAS7I,EAAQS,GAC1D,IACIilF,GADU1lF,EAAO0lF,YAAc,IACVj3E,KAAI,SAASxP,GAChC,OAAO,IAAI3G,EAAOu6B,MAAM25C,QAAQvtE,EAAO2B,MAAM3B,MAE/C6wC,EAAW,IAAIx3C,EAAOu6B,MAAM25C,QAAQiZ,SAAS,CAAEC,WAAYA,IAE/D,OADAjlF,GAAYA,EAASqvC,GACdA,GArEX,CAuEoCt3C,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAAUkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC5Ck0E,EAAUl0E,EAAOu6B,MAAM25C,QACvBhwD,EAAclkB,EAAOgG,KAAKke,YAgB9BgwD,EAAQmZ,YAAcnpE,EAAYgwD,EAAQuM,YAAsE,CAO9Gn4E,KAAM,cAQNglF,SAAU,EAOVlO,cAAe,WAEf4G,gBAAiB,WACf,IAAIuH,EAAM5qF,KAAK2qF,SAAWljF,KAAKI,GAAIE,EAAM1K,EAAOgG,KAAK0E,IAAI6iF,GAAM3iF,EAAM5K,EAAOgG,KAAK4E,IAAI2iF,GACjFC,EAAS,EAAI,EAAGC,EAAerjF,KAAKD,KAAKqjF,GAAU5iF,EAAK8iF,EAAc,EAAIhjF,EAC9E/H,KAAKyR,OAAS,CACZ,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,EACZ,EAAG,EAAG,EAAG,EAAG,GAEdzR,KAAKyR,OAAO,GAAK1J,EAAMgjF,EAAc,EACrC/qF,KAAKyR,OAAO,GAAKo5E,EAASE,EAAcD,EACxC9qF,KAAKyR,OAAO,GAAKo5E,EAASE,EAAcD,EACxC9qF,KAAKyR,OAAO,GAAKo5E,EAASE,EAAcD,EACxC9qF,KAAKyR,OAAO,GAAK1J,EAAM8iF,EAASE,EAChC/qF,KAAKyR,OAAO,GAAKo5E,EAASE,EAAcD,EACxC9qF,KAAKyR,OAAO,IAAMo5E,EAASE,EAAcD,EACzC9qF,KAAKyR,OAAO,IAAMo5E,EAASE,EAAcD,EACzC9qF,KAAKyR,OAAO,IAAM1J,EAAM8iF,EAASE,GASnC1X,eAAgB,SAAS3vE,GAEvB,OADA1D,KAAKqjF,kBACE9R,EAAQ4I,WAAWrrE,UAAUukE,eAAetvE,KAAK/D,KAAM0D,IAgBhE40E,QAAS,SAAS50E,GAChB1D,KAAKqjF,kBACL9R,EAAQ4I,WAAWrrE,UAAUwpE,QAAQv0E,KAAK/D,KAAM0D,MAYpDrG,EAAOu6B,MAAM25C,QAAQmZ,YAAY98E,WAAavQ,EAAOu6B,MAAM25C,QAAQ4I,WAAWvsE,WAxGhF,CA0GoCrQ,GAGpC,SAAUgK,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAC3CmiB,EAAQniB,EAAOgG,KAAK0B,OAAOya,MAE/B,GAAIniB,EAAO6N,KACT7N,EAAOyrB,KAAK,sCADd,CAKA,IAAIkiE,EACF,gJAC+Eh/E,MAAM,KAUvF3O,EAAO6N,KAAO7N,EAAOgG,KAAKke,YAAYlkB,EAAOwR,OAA4C,CAOvFo8E,yBAA0B,CACxB,WACA,aACA,aACA,YACA,aACA,OACA,cACA,YACA,SACA,QAMFC,WAAY,QAOZC,iBAAkB,WAOlBC,eAAgB,UAOhBC,SAAU,OAOV1lF,KAAsB,OAOtBoF,SAAsB,GAOtB2pB,WAAsB,SAOtB7hB,WAAsB,kBAOtBy4E,WAAiB,EAOjBC,UAAgB,EAOhBC,aAAmB,EAQnBC,UAAsB,OAOtBh3D,UAAsB,SAOtBE,WAAsB,KAOtB+2D,YAAa,CACX1lF,KAAW,GACX2lF,UAAW,KAQbC,UAAW,CACT5lF,KAAW,GACX2lF,SAAW,KAQbE,oBAAsB,GAQtBlxB,gBAAiBt9D,EAAOwR,OAAOC,UAAU6rD,gBAAgB/0D,OAAOolF,GAMhEpwB,gBAAiBv9D,EAAOwR,OAAOC,UAAU8rD,gBAAgBh1D,OAAOolF,GAQhEx8D,OAAsB,KAQtBioB,OAAsB,KAQtBnoC,KAAoB,KAKpBw9E,kBAAmB,KAKnBnH,QAAS,CACP2G,UAAW,GACXE,aAAc,KACdD,UAAW,KAQbQ,cAA2B,KAQ3BC,YAAyB,EAQzBroE,OAAQ,KAURsoE,kBAAmB,KAOnBrkB,OAAQ,EAORskB,iBAAkB,CAChB,SACA,cACA,OACA,aACA,WACA,aACA,YACA,YACA,WACA,cACA,SACA,uBAMFC,aAAc,GASdC,gBAAiB,IAOjBC,eAAgB,EAQhB7qE,WAAY,SAAS8qE,EAAM5oF,GACzB1D,KAAK2jB,OAASjgB,GAAWA,EAAQigB,QAAiB,GAClD3jB,KAAKssF,KAAOA,EACZtsF,KAAKusF,iBAAkB,EACvBvsF,KAAKkhB,UAAU,aAAcxd,GACzB1D,KAAKsO,MACPtO,KAAKwsF,cAEPxsF,KAAKusF,iBAAkB,EACvBvsF,KAAKysF,iBACLzsF,KAAKo7C,YACLp7C,KAAK67C,WAAW,CAAEgiB,YAAa,8BAQjC2uB,YAAa,WACX,IAAIl+E,EAAOtO,KAAKsO,KACZA,IACFA,EAAKo+E,aAAervF,EAAOgG,KAAKwY,oBAAoBvN,EAAKA,QAW7Dq+E,oBAAqB,WAMnB,OAJKtvF,EAAO4uF,oBACV5uF,EAAO4uF,kBAAoBjsF,KAAKlB,QAAUkB,KAAKlB,OAAO+rD,cACpDxtD,EAAOgG,KAAKyM,sBAAsB7Q,WAAW,OAE1C5B,EAAO4uF,mBAOhBW,WAAY,WACV,IAAIC,EAAW7sF,KAAK8sF,oBAAoB9sF,KAAKssF,MAK7C,OAJAtsF,KAAK+sF,UAAYF,EAASpoB,MAC1BzkE,KAAKgtF,WAAaH,EAASI,cAC3BjtF,KAAKktF,oBAAsBL,EAASM,gBACpCntF,KAAKotF,MAAQP,EAASQ,aACfR,GAQTJ,eAAgB,WACVzsF,KAAKusF,kBAGTvsF,KAAK4sF,aACL5sF,KAAKstF,cACDttF,KAAKsO,MACPtO,KAAKT,MAAQS,KAAKsO,KAAK/O,MACvBS,KAAKb,OAASa,KAAKsO,KAAKnP,SAGxBa,KAAKT,MAAQS,KAAKutF,iBAAmBvtF,KAAKwtF,aAAextF,KAAKqsF,eAC9DrsF,KAAKb,OAASa,KAAKytF,mBAEsB,IAAvCztF,KAAKyrF,UAAUroF,QAAQ,YAEzBpD,KAAK0tF,gBAEP1tF,KAAKo1D,UAAU,CAAEyI,YAAa,+BAMhC6vB,cAAe,WAEb,IADA,IAAIC,EAAWC,EAAkBC,EAAgBC,EAAkBC,EAAMC,EAAWC,EAC3ErqF,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IACrD,IAAuB,YAAnB5D,KAAKyrF,WAA4B7nF,IAAMC,EAAM,IAAK7D,KAAKkuF,gBAAgBtqF,MAG3EkqF,EAAmB,EACnBC,EAAO/tF,KAAKgtF,WAAWppF,IACvBgqF,EAAmB5tF,KAAKmuF,aAAavqF,IACd5D,KAAKT,QAAU0uF,EAASjuF,KAAK+sF,UAAUnpF,GAAG4Y,MAAMxc,KAAKmrF,oBAAoB,CAC9F0C,EAAiBI,EAAOnqF,OACxB6pF,GAAa3tF,KAAKT,MAAQquF,GAAoBC,EAC9C,IAAK,IAAI70E,EAAI,EAAGC,EAAO80E,EAAKjqF,OAAQkV,GAAKC,EAAMD,IAC7Cg1E,EAAYhuF,KAAKmsF,aAAavoF,GAAGoV,GAC7BhZ,KAAKorF,eAAe3nE,KAAKsqE,EAAK/0E,KAChCg1E,EAAUzuF,OAASouF,EACnBK,EAAUI,aAAeT,EACzBK,EAAU5jF,MAAQ0jF,EAClBA,GAAoBH,GAGpBK,EAAU5jF,MAAQ0jF,IAY5BI,gBAAiB,SAASG,GACxB,OAAOA,IAAcruF,KAAKgtF,WAAWlpF,OAAS,GAShDwqF,qBAAsB,WACpB,OAAO,GAOTv/E,SAAU,WACR,MAAO,kBAAoB/O,KAAKkG,aAC9B,iBAAmBlG,KAAKssF,KAAO,qBAAuBtsF,KAAK6S,WAAa,QAc5EwoD,0BAA2B,WACzB,IAAIH,EAAOl7D,KAAKkhB,UAAU,6BACtBnW,EAAW/K,KAAK+K,SAGpB,OAFAmwD,EAAK37D,OAASwL,EAAWmwD,EAAK9d,MAC9B8d,EAAK/7D,QAAU4L,EAAWmwD,EAAK7d,MACxB6d,GAOTvX,QAAS,SAAS3kD,GAChBgB,KAAKuuF,eAAevvF,GACpBgB,KAAKwuF,2BAA2BxvF,GAChCgB,KAAKyuF,sBAAsBzvF,EAAK,aAChCgB,KAAK0uF,YAAY1vF,GACjBgB,KAAKyuF,sBAAsBzvF,EAAK,YAChCgB,KAAKyuF,sBAAsBzvF,EAAK,gBAOlC0vF,YAAa,SAAS1vF,GACI,WAApBgB,KAAK06D,YACP16D,KAAK2uF,kBAAkB3vF,GACvBgB,KAAK4uF,gBAAgB5vF,KAGrBgB,KAAK4uF,gBAAgB5vF,GACrBgB,KAAK2uF,kBAAkB3vF,KAc3BuvF,eAAgB,SAASvvF,EAAK6vF,EAAWC,GACvC9vF,EAAI+vF,aAAe,aACnB/vF,EAAIu2B,KAAOv1B,KAAKgvF,oBAAoBH,EAAWC,IASjDvB,cAAe,WAGb,IAFA,IAAI0B,EAAWjvF,KAAKmuF,aAAa,GAExBvqF,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IAAK,CAC1D,IAAIgqF,EAAmB5tF,KAAKmuF,aAAavqF,GACrCgqF,EAAmBqB,IACrBA,EAAWrB,GAGf,OAAOqB,GAYTC,gBAAiB,SAASjwE,EAAQjgB,EAAK+uF,EAAM3jF,EAAMC,EAAKgkF,GACtDruF,KAAKmvF,aAAalwE,EAAQjgB,EAAK+uF,EAAM3jF,EAAMC,EAAKgkF,IAQlDG,2BAA4B,SAASxvF,GACnC,GAAKgB,KAAK6rF,qBAAwB7rF,KAAKovF,SAAS,uBAAhD,CAUA,IAPA,IAAIC,EACAC,EACAvB,EAAMwB,EAGsBC,EAASC,EAJrBpxB,EAAer/D,EAAImxC,UAEnCu/C,EAAa1vF,KAAK2vF,iBAClBC,EAAgB5vF,KAAK6vF,gBACrBC,EAAW,EAAGC,EAAW,EAA0BzhF,EAAOtO,KAAKsO,KAE1D1K,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IAErD,GADAyrF,EAAervF,KAAKgwF,gBAAgBpsF,GAC/B5D,KAAK6rF,qBAAwB7rF,KAAKovF,SAAS,sBAAuBxrF,GAAvE,CAIAmqF,EAAO/tF,KAAKgtF,WAAWppF,GACvB0rF,EAAiBtvF,KAAKiwF,mBAAmBrsF,GACzCmsF,EAAW,EACXD,EAAW,EACXP,EAAYvvF,KAAKkwF,qBAAqBtsF,EAAG,EAAG,uBAC5C,IAAK,IAAIoV,EAAI,EAAGC,EAAO80E,EAAKjqF,OAAQkV,EAAIC,EAAMD,IAC5Cw2E,EAAUxvF,KAAKmsF,aAAavoF,GAAGoV,GAC/By2E,EAAezvF,KAAKkwF,qBAAqBtsF,EAAGoV,EAAG,uBAC3C1K,GACFtP,EAAI0Q,OACJ1Q,EAAIE,UAAUswF,EAAQW,WAAYX,EAAQrlC,WAC1CnrD,EAAI4Q,OAAO4/E,EAAQxnF,OACnBhJ,EAAImxC,UAAYs/C,EAChBA,GAAgBzwF,EAAI2nD,UACjB6oC,EAAQjwF,MAAQ,GAChB8vF,EAAervF,KAAK20B,YAAc,EAAI30B,KAAK8rF,mBAC5C0D,EAAQjwF,MACR8vF,EAAervF,KAAK20B,YAEtB31B,EAAI6Q,WAEG4/E,IAAiBF,GACxBvwF,EAAImxC,UAAYo/C,EAChBA,GAAavwF,EAAI2nD,SACf+oC,EAAaJ,EAAiBQ,EAC9BF,EACAG,EACAV,EAAervF,KAAK20B,YAEtBm7D,EAAWN,EAAQplF,KACnB2lF,EAAWP,EAAQjwF,MACnBgwF,EAAYE,GAGZM,GAAYP,EAAQpB,YAGpBqB,IAAiBnhF,IACnBtP,EAAImxC,UAAYs/C,EAChBzwF,EAAI2nD,SACF+oC,EAAaJ,EAAiBQ,EAC9BF,EACAG,EACAV,EAAervF,KAAK20B,aAGxBi7D,GAAiBP,OAjDfO,GAAiBP,EAmDrBrwF,EAAImxC,UAAYkuB,EAGhBr+D,KAAK2+D,cAAc3/D,KAWrBoxF,aAAc,SAASvxB,GACrB,IAAIhsD,EAAagsD,EAAKhsD,WAAWC,cAC5BzV,EAAOsE,gBAAgBkR,KAC1BxV,EAAOsE,gBAAgBkR,GAAc,IAEvC,IAAIg0D,EAAQxpE,EAAOsE,gBAAgBkR,GAC/Bw9E,EAAYxxB,EAAKpqC,UAAU3hB,cAAgB,KAAO+rD,EAAKnqC,WAAa,IAAI5hB,cAI5E,OAHK+zD,EAAMwpB,KACTxpB,EAAMwpB,GAAa,IAEdxpB,EAAMwpB,IAafC,aAAc,SAASC,EAAO1B,EAAW2B,EAAcC,GAErD,IAEkElxF,EAAOmxF,EAAaC,EACtBvC,EAH5DwC,EAAY5wF,KAAKowF,aAAavB,GACqCgC,EAASL,EAAeD,EAC3FO,EAF4D9wF,KAAKgvF,oBAAoBH,KAC3D7uF,KAAKgvF,oBAAoByB,GAEnDM,EAAiBlC,EAAU9jF,SAAW/K,KAAKosF,gBAY/C,GAVIoE,QAA4C9jF,IAA5BkkF,EAAUJ,KAC5BG,EAAgBC,EAAUJ,SAEH9jF,IAArBkkF,EAAUL,KACZnC,EAAc7uF,EAAQqxF,EAAUL,IAE9BO,QAAwCpkF,IAAtBkkF,EAAUC,KAE9BzC,GADAsC,EAAcE,EAAUC,IACIF,QAEhBjkF,IAAVnN,QAAyCmN,IAAlBikF,QAA+CjkF,IAAhBgkF,EAA2B,CACnF,IAAI1xF,EAAMgB,KAAK2sF,sBAEf3sF,KAAKuuF,eAAevvF,EAAK6vF,GAAW,GAgBtC,YAdcniF,IAAVnN,IACF6uF,EAAc7uF,EAAQP,EAAIgyF,YAAYT,GAAOhxF,MAC7CqxF,EAAUL,GAAShxF,QAECmN,IAAlBikF,GAA+BG,GAAkBN,IACnDG,EAAgB3xF,EAAIgyF,YAAYR,GAAcjxF,MAC9CqxF,EAAUJ,GAAgBG,GAExBG,QAAkCpkF,IAAhBgkF,IAEpBA,EAAc1xF,EAAIgyF,YAAYH,GAAQtxF,MACtCqxF,EAAUC,GAAUH,EACpBtC,EAAcsC,EAAcC,GAEvB,CAAEpxF,MAAOA,EAAQwxF,EAAgB3C,YAAaA,EAAc2C,IASrEE,gBAAiB,SAASlD,EAAMwC,GAC9B,OAAOvwF,KAAKkwF,qBAAqBnC,EAAMwC,EAAO,aAQhDW,YAAa,SAAS7C,GACpB,IAAI8C,EAAWnxF,KAAKoxF,aAAa/C,GAOjC,OANyB,IAArBruF,KAAKgsF,cACPmF,EAAS5xF,OAASS,KAAKqxF,0BAErBF,EAAS5xF,MAAQ,IACnB4xF,EAAS5xF,MAAQ,GAEZ4xF,GASTC,aAAc,SAAS/C,GACrB,IAAezqF,EAAG0tF,EAA6CC,EAC3DC,EACoBC,EAAeC,EAFnCnyF,EAAQ,EAAgBwuF,EAAO/tF,KAAKgtF,WAAWqB,GAChBsD,EAAa,IAAIl9E,MAAMs5E,EAAKjqF,QAC3D8tF,EAAiB,EAAmCtjF,EAAOtO,KAAKsO,KASpE,IAPAtO,KAAKmsF,aAAakC,GAAasD,EAC3BrjF,IACFmjF,EAAgBp0F,EAAOgG,KAAK0a,eAAezP,EAAKA,KAAM,EAAGA,EAAKo+E,cAC9DgF,EAAkBpjF,EAAKo+E,aAAap+E,EAAKo+E,aAAa5oF,OAAS,GAAGA,OAClE2tF,EAAcpoF,GAAKiF,EAAK+lC,WAAWhrC,EACnCooF,EAAcnoF,GAAKgF,EAAK+lC,WAAW/qC,GAEhC1F,EAAI,EAAGA,EAAImqF,EAAKjqF,OAAQF,IAC3B0tF,EAAWvD,EAAKnqF,GAChB4tF,EAAexxF,KAAK6xF,gBAAgBP,EAAUjD,EAAWzqF,EAAG2tF,GACxDjjF,IACEsjF,EAAiBF,IACnBE,GAAkBF,GAIpB1xF,KAAK8xF,mBAAmBF,EAAgBJ,EAAcC,IAExDE,EAAW/tF,GAAK4tF,EAChBjyF,GAASiyF,EAAapD,YACtBwD,GAAkBJ,EAAapD,YAC/BmD,EAAeD,EAUjB,OANAK,EAAW/tF,GAAK,CACdwG,KAAMonF,EAAeA,EAAapnF,KAAOonF,EAAajyF,MAAQ,EAC9DA,MAAO,EACP6uF,YAAa,EACbjvF,OAAQa,KAAK+K,UAER,CAAExL,MAAOA,EAAOwyF,YAlCS,IA6ClCD,mBAAoB,SAASF,EAAgBJ,EAAcC,GACzD,IAAIO,EAAiBJ,EAAiBJ,EAAapD,YAAc,EAC7D9/E,EAAOtO,KAAKsO,KAGZ0N,EAAO3e,EAAOgG,KAAK0a,eAAezP,EAAKA,KAAM0jF,EAAgB1jF,EAAKo+E,cACtE8E,EAAarB,WAAan0E,EAAK3S,EAAIooF,EAAcpoF,EACjDmoF,EAAarnC,UAAYnuC,EAAK1S,EAAImoF,EAAcnoF,EAChDkoF,EAAaxpF,MAAQgU,EAAKhU,OAY5B6pF,gBAAiB,SAASP,EAAUjD,EAAWluC,EAAWoxC,EAAcU,GACtE,IAIwBjG,EAJpBj/E,EAAQ/M,KAAKkyF,4BAA4B7D,EAAWluC,GACpDgyC,EAAYZ,EAAevxF,KAAKkyF,4BAA4B7D,EAAWluC,EAAY,GAAK,GACxFnkC,EAAOhc,KAAKswF,aAAagB,EAAUvkF,EAAOwkF,EAAcY,GACxD/D,EAAcpyE,EAAKoyE,YACnB7uF,EAAQyc,EAAKzc,MAEQ,IAArBS,KAAKgsF,cAEPzsF,GADAysF,EAAchsF,KAAKqxF,yBAEnBjD,GAAepC,GAGjB,IAAIllE,EAAM,CACRvnB,MAAOA,EACP6K,KAAM,EACNjL,OAAQ4N,EAAMhC,SACdqjF,YAAaA,EACbxmB,OAAQ76D,EAAM66D,QAEhB,GAAIznB,EAAY,IAAM8xC,EAAU,CAC9B,IAAIG,EAAcpyF,KAAKmsF,aAAakC,GAAWluC,EAAY,GAC3Dr5B,EAAI1c,KAAOgoF,EAAYhoF,KAAOgoF,EAAY7yF,MAAQyc,EAAKoyE,YAAcpyE,EAAKzc,MAE5E,OAAOunB,GAQTkpE,gBAAiB,SAAS3B,GACxB,GAAIruF,KAAKqyF,cAAchE,GACrB,OAAOruF,KAAKqyF,cAAchE,GAO5B,IAJA,IAAIN,EAAO/tF,KAAKgtF,WAAWqB,GAGvBiE,EAAYtyF,KAAKixF,gBAAgB5C,EAAW,GACvCzqF,EAAI,EAAGC,EAAMkqF,EAAKjqF,OAAQF,EAAIC,EAAKD,IAC1C0uF,EAAY7qF,KAAKc,IAAIvI,KAAKixF,gBAAgB5C,EAAWzqF,GAAI0uF,GAG3D,OAAOtyF,KAAKqyF,cAAchE,GAAaiE,EAAYtyF,KAAK20B,WAAa30B,KAAK+rF,eAM5E0B,eAAgB,WAEd,IADA,IAAI94D,EAAYx1B,EAAS,EAChByE,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IACrD+wB,EAAa30B,KAAKgwF,gBAAgBpsF,GAClCzE,GAAWyE,IAAMC,EAAM,EAAI8wB,EAAa30B,KAAK20B,WAAaA,EAE5D,OAAOx1B,GAOTwwF,eAAgB,WACd,OAAQ3vF,KAAKT,MAAQ,GAOvBswF,cAAe,WACb,OAAQ7vF,KAAKb,OAAS,GAQxBozF,kBAAmB,SAASvzF,EAAKigB,GAC/BjgB,EAAI0Q,OAEJ,IADA,IAAI8iF,EAAc,EAAGpoF,EAAOpK,KAAK2vF,iBAAkBtlF,EAAMrK,KAAK6vF,gBACrDjsF,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IAAK,CAC1D,IAAIyrF,EAAervF,KAAKgwF,gBAAgBpsF,GACpC0uF,EAAYjD,EAAervF,KAAK20B,WAChC+6D,EAAa1vF,KAAKiwF,mBAAmBrsF,GACzC5D,KAAKkvF,gBACHjwE,EACAjgB,EACAgB,KAAKgtF,WAAWppF,GAChBwG,EAAOslF,EACPrlF,EAAMmoF,EAAcF,EACpB1uF,GAEF4uF,GAAenD,EAEjBrwF,EAAI6Q,WAON++E,gBAAiB,SAAS5vF,IACnBgB,KAAKuD,MAASvD,KAAKovF,SAAS,UAIjCpvF,KAAKuyF,kBAAkBvzF,EAAK,aAO9B2vF,kBAAmB,SAAS3vF,IACpBgB,KAAKwuB,QAA+B,IAArBxuB,KAAKwuC,cAAsBxuC,KAAKyyF,mBAIjDzyF,KAAKy2C,SAAWz2C,KAAKy2C,OAAOJ,cAC9Br2C,KAAK2+D,cAAc3/D,GAGrBA,EAAI0Q,OACJ1P,KAAKssD,aAAattD,EAAKgB,KAAKiiD,iBAC5BjjD,EAAIuxC,YACJvwC,KAAKuyF,kBAAkBvzF,EAAK,cAC5BA,EAAI4+C,YACJ5+C,EAAI6Q,YAYNs/E,aAAc,SAASlwE,EAAQjgB,EAAK+uF,EAAM3jF,EAAMC,EAAKgkF,GAEnD,IAEIqE,EACAC,EAEAnD,EAEAoD,EAPAj+D,EAAa30B,KAAKgwF,gBAAgB3B,GAClCwE,GAAmD,IAAvC7yF,KAAKyrF,UAAUroF,QAAQ,WAGnC0vF,EAAgB,GAEhB/C,EAAW,EAEXzhF,EAAOtO,KAAKsO,KACZykF,GAAYF,GAAkC,IAArB7yF,KAAKgsF,aAAqBhsF,KAAKyyF,cAAcpE,KAAe//E,EAIzF,GAFAtP,EAAI0Q,OACJrF,GAAOsqB,EAAa30B,KAAK8rF,kBAAoB9rF,KAAK20B,WAC9Co+D,EAIF,OAFA/yF,KAAKgzF,YAAY/zE,EAAQjgB,EAAKqvF,EAAW,EAAGN,EAAKr6E,KAAK,IAAKtJ,EAAMC,EAAKsqB,QACtE31B,EAAI6Q,UAGN,IAAK,IAAIjM,EAAI,EAAGC,EAAMkqF,EAAKjqF,OAAS,EAAGF,GAAKC,EAAKD,IAC/CgvF,EAAehvF,IAAMC,GAAO7D,KAAKgsF,aAAe19E,EAChDwkF,GAAiB/E,EAAKnqF,GACtB4rF,EAAUxvF,KAAKmsF,aAAakC,GAAWzqF,GACtB,IAAbmsF,GACF3lF,GAAQolF,EAAQpB,YAAcoB,EAAQjwF,MACtCwwF,GAAYP,EAAQjwF,OAGpBwwF,GAAYP,EAAQpB,YAElByE,IAAcD,GACZ5yF,KAAKorF,eAAe3nE,KAAKsqE,EAAKnqF,MAChCgvF,GAAe,GAGdA,IAEHF,EAAcA,GAAe1yF,KAAKkyF,4BAA4B7D,EAAWzqF,GACzE+uF,EAAY3yF,KAAKkyF,4BAA4B7D,EAAWzqF,EAAI,GAC5DgvF,EAAe5yF,KAAKizF,iBAAiBP,EAAaC,IAEhDC,IACEtkF,GACFtP,EAAI0Q,OACJ1Q,EAAIE,UAAUswF,EAAQW,WAAYX,EAAQrlC,WAC1CnrD,EAAI4Q,OAAO4/E,EAAQxnF,OACnBhI,KAAKgzF,YAAY/zE,EAAQjgB,EAAKqvF,EAAWzqF,EAAGkvF,GAAgB/C,EAAW,EAAG,EAAGp7D,GAC7E31B,EAAI6Q,WAGJ7P,KAAKgzF,YAAY/zE,EAAQjgB,EAAKqvF,EAAWzqF,EAAGkvF,EAAe1oF,EAAMC,EAAKsqB,GAExEm+D,EAAgB,GAChBJ,EAAcC,EACdvoF,GAAQ2lF,EACRA,EAAW,GAGf/wF,EAAI6Q,WAcNqjF,mCAAoC,SAASxsF,GAC3C,IAAiDq5D,EAA7CC,EAAU3iE,EAAOgG,KAAKyM,sBAEtBvQ,EAAQS,KAAKT,MAAQS,KAAKwuC,YAAarvC,EAASa,KAAKb,OAASa,KAAKwuC,YAUvE,OATAwxB,EAAQzgE,MAAQA,EAChBygE,EAAQ7gE,OAASA,GACjB4gE,EAAOC,EAAQ/gE,WAAW,OACrBsxC,YAAawvB,EAAKpwD,OAAO,EAAG,GAAIowD,EAAKpiB,OAAOp+C,EAAO,GAAIwgE,EAAKpiB,OAAOp+C,EAAOJ,GAC/E4gE,EAAKpiB,OAAO,EAAGx+C,GAAS4gE,EAAKniB,YAC7BmiB,EAAK7gE,UAAUK,EAAQ,EAAGJ,EAAS,GACnC4gE,EAAK5vB,UAAYzpC,EAAOguC,OAAOqrB,GAC/B//D,KAAKi/D,+BAA+Bc,EAAMr5D,GAC1Cq5D,EAAKx8D,OACEw8D,EAAK7pB,cAAc8pB,EAAS,cAGrCmzB,aAAc,SAASn0F,EAAK2H,EAAUD,GACpC,IAAIkkC,EAASC,EACb,OAAInkC,EAAOguC,OACoB,eAAzBhuC,EAAO8sC,eAAkC9sC,EAAOq4D,mBAAqBr4D,EAAO4uC,kBAK9E1K,GAAW5qC,KAAKT,MAAQ,EACxBsrC,GAAW7qC,KAAKb,OAAS,EACzBH,EAAIE,UAAU0rC,EAASC,GACvB7rC,EAAI2H,GAAY3G,KAAKkzF,mCAAmCxsF,GACjD,CAAEkkC,QAASA,EAASC,QAASA,KAIpC7rC,EAAI2H,GAAYD,EAAOguC,OAAO11C,EAAKgB,MAC5BA,KAAKi/D,+BAA+BjgE,EAAK0H,KAKlD1H,EAAI2H,GAAYD,EAEX,CAAEkkC,QAAS,EAAGC,QAAS,KAGhC+zB,iBAAkB,SAAS5/D,EAAK6/D,GAM9B,OALA7/D,EAAIsxC,UAAYuuB,EAAKrwB,YACrBxvC,EAAImjD,QAAUniD,KAAK8hD,cACnB9iD,EAAI8/D,eAAiB9+D,KAAK+5D,iBAC1B/6D,EAAIqjD,SAAWriD,KAAK+hD,eACpB/iD,EAAIojD,WAAapiD,KAAKgiD,iBACfhiD,KAAKmzF,aAAan0F,EAAK,cAAe6/D,EAAKrwC,SAGpD0wC,eAAgB,SAASlgE,EAAK6/D,GAC5B,OAAO7+D,KAAKmzF,aAAan0F,EAAK,YAAa6/D,EAAKt7D,OAclDyvF,YAAa,SAAS/zE,EAAQjgB,EAAKqvF,EAAWluC,EAAWowC,EAAOnmF,EAAMC,GACpE,IAII+oF,EAAaC,EAJbx0B,EAAO7+D,KAAKszF,qBAAqBjF,EAAWluC,GAC5CozC,EAAWvzF,KAAKkyF,4BAA4B7D,EAAWluC,GACvDqzC,EAAwB,aAAXv0E,GAAyBs0E,EAAShwF,KAC/CymE,EAA0B,eAAX/qD,GAA2Bs0E,EAAS/kE,QAAU+kE,EAAS/kD,aAGrEw7B,GAAiBwpB,KAGtBx0F,EAAI0Q,OAEJ8jF,IAAeJ,EAAcpzF,KAAKk/D,eAAelgE,EAAKu0F,IACtDvpB,IAAiBqpB,EAAgBrzF,KAAK4+D,iBAAiB5/D,EAAKu0F,IAE5Dv0F,EAAIu2B,KAAOv1B,KAAKgvF,oBAAoBuE,GAGhC10B,GAAQA,EAAKgtB,qBACf7rF,KAAK2+D,cAAc3/D,GAEjB6/D,GAAQA,EAAK+I,SACfv9D,GAAOw0D,EAAK+I,QAEd4rB,GAAcx0F,EAAIy0F,SAASlD,EAAOnmF,EAAOgpF,EAAYxoD,QAASvgC,EAAM+oF,EAAYvoD,SAChFm/B,GAAgBhrE,EAAI00F,WAAWnD,EAAOnmF,EAAOipF,EAAczoD,QAASvgC,EAAMgpF,EAAcxoD,SACxF7rC,EAAI6Q,YAUN8jF,eAAgB,SAAS3pE,EAAOmB,GAC9B,OAAOnrB,KAAK4zF,WAAW5pE,EAAOmB,EAAKnrB,KAAK0rF,cAU1CmI,aAAc,SAAS7pE,EAAOmB,GAC5B,OAAOnrB,KAAK4zF,WAAW5pE,EAAOmB,EAAKnrB,KAAK4rF,YAY1CgI,WAAY,SAAS5pE,EAAOmB,EAAK2oE,GAC/B,IAAIC,EAAM/zF,KAAKg0F,oBAAoBhqE,GAAO,GACtCjf,EAAW/K,KAAKkwF,qBAAqB6D,EAAI1F,UAAW0F,EAAI5zC,UAAW,YACnE9wC,EAAKrP,KAAKkwF,qBAAqB6D,EAAI1F,UAAW0F,EAAI5zC,UAAW,UAC7DpzC,EAAQ,CAAEhC,SAAUA,EAAW+oF,EAAO9tF,KAAM4hE,OAAQv4D,EAAKtE,EAAW+oF,EAAOnI,UAE/E,OADA3rF,KAAKi0F,mBAAmBlnF,EAAOid,EAAOmB,GAC/BnrB,MAQTizF,iBAAkB,SAASd,EAAW+B,GACpC,OAAO/B,EAAU5uF,OAAS2wF,EAAU3wF,MAC5B4uF,EAAU3jE,SAAW0lE,EAAU1lE,QAC/B2jE,EAAU3jD,cAAgB0lD,EAAU1lD,aACpC2jD,EAAUpnF,WAAampF,EAAUnpF,UACjConF,EAAUt/E,aAAeqhF,EAAUrhF,YACnCs/E,EAAUz9D,aAAew/D,EAAUx/D,YACnCy9D,EAAU19D,YAAcy/D,EAAUz/D,WAClC09D,EAAUvqB,SAAWssB,EAAUtsB,QAQzCusB,uBAAwB,SAAShC,EAAW+B,GAC1C,OAAOl0F,KAAKizF,iBAAiBd,EAAW+B,IACtC/B,EAAU5G,WAAa2I,EAAU3I,UACjC4G,EAAU7G,YAAc4I,EAAU5I,WAClC6G,EAAU3G,cAAgB0I,EAAU1I,aAQxCyE,mBAAoB,SAAS5B,GAC3B,IAAI/9C,EAAYtwC,KAAKmuF,aAAaE,GAClC,MAAuB,WAAnBruF,KAAKyrF,WACCzrF,KAAKT,MAAQ+wC,GAAa,EAEb,UAAnBtwC,KAAKyrF,UACAzrF,KAAKT,MAAQ+wC,EAEC,mBAAnBtwC,KAAKyrF,WAAkCzrF,KAAKkuF,gBAAgBG,IACtDruF,KAAKT,MAAQ+wC,GAAa,EAEb,kBAAnBtwC,KAAKyrF,WAAiCzrF,KAAKkuF,gBAAgBG,GACtDruF,KAAKT,MAAQ+wC,EAEf,GAMTg9C,YAAa,WACXttF,KAAKo0F,aAAe,GACpBp0F,KAAKqyF,cAAgB,GACrBryF,KAAKmsF,aAAe,IAMtBkI,2BAA4B,WAC1B,IAAIC,EAAct0F,KAAKu0F,iBAMvB,OALAD,IAAgBA,EAAct0F,KAAK20D,gBAAgB,6BAC/C2/B,IACFt0F,KAAKy6D,OAAQ,EACbz6D,KAAKu0F,kBAAmB,GAEnBD,GAUTnG,aAAc,SAASE,GACrB,OAAIruF,KAAKo0F,aAAa/F,GACbruF,KAAKo0F,aAAa/F,IAMzB9uF,EADW,KAFKS,KAAKgtF,WAAWqB,GAGxB,EAGGruF,KAAKkxF,YAAY7C,GACX9uF,MAEnBS,KAAKo0F,aAAa/F,GAAa9uF,EACxBA,GAVP,IAAIA,GAaN8xF,uBAAwB,WACtB,OAAyB,IAArBrxF,KAAKgsF,YACAhsF,KAAK+K,SAAW/K,KAAKgsF,YAAc,IAErC,GAUTkE,qBAAsB,SAAS7B,EAAWluC,EAAWx5C,GACnD,IAAIkoF,EAAY7uF,KAAKszF,qBAAqBjF,EAAWluC,GACrD,OAAI0uC,GAA4C,qBAAxBA,EAAUloF,GACzBkoF,EAAUloF,GAEZ3G,KAAK2G,IAOd8nF,sBAAuB,SAASzvF,EAAK2G,GACnC,GAAK3F,KAAK2F,IAAU3F,KAAKovF,SAASzpF,GAAlC,CAYA,IATA,IAAI0pF,EAAcrpF,EAAMwuF,EACpBlF,EAAgBjgF,EAAIolF,EACpB1G,EAAM2G,EAE4BrqF,EAClCylF,EAAUC,EAAUP,EAASmF,EAC7BrC,EAAWsC,EAAaC,EAHxBnF,EAAa1vF,KAAK2vF,iBAClBmF,EAAY90F,KAAK6vF,gBAEiBvhF,EAAOtO,KAAKsO,KAC9C09E,EAAchsF,KAAKqxF,yBAEdztF,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IAErD,GADAyrF,EAAervF,KAAKgwF,gBAAgBpsF,GAC/B5D,KAAK2F,IAAU3F,KAAKovF,SAASzpF,EAAM/B,GAAxC,CAIAmqF,EAAO/tF,KAAKgtF,WAAWppF,GACvB0uF,EAAYjD,EAAervF,KAAK20B,WAChC26D,EAAiBtvF,KAAKiwF,mBAAmBrsF,GACzCksF,EAAW,EACXC,EAAW,EACX2E,EAAiB10F,KAAKkwF,qBAAqBtsF,EAAG,EAAG+B,GACjDkvF,EAAW70F,KAAKkwF,qBAAqBtsF,EAAG,EAAG,QAC3CyG,EAAMyqF,EAAYxC,GAAa,EAAItyF,KAAK8rF,mBACxC9lF,EAAOhG,KAAKixF,gBAAgBrtF,EAAG,GAC/ByL,EAAKrP,KAAKkwF,qBAAqBtsF,EAAG,EAAG,UACrC,IAAK,IAAIoV,EAAI,EAAGC,EAAO80E,EAAKjqF,OAAQkV,EAAIC,EAAMD,IAC5Cw2E,EAAUxvF,KAAKmsF,aAAavoF,GAAGoV,GAC/B27E,EAAoB30F,KAAKkwF,qBAAqBtsF,EAAGoV,EAAGrT,GACpDivF,EAAc50F,KAAKkwF,qBAAqBtsF,EAAGoV,EAAG,QAC9Cw7E,EAAQx0F,KAAKixF,gBAAgBrtF,EAAGoV,GAChCy7E,EAAMz0F,KAAKkwF,qBAAqBtsF,EAAGoV,EAAG,UAClC1K,GAAQqmF,GAAqBC,GAC/B51F,EAAI0Q,OACJ1Q,EAAImxC,UAAY0kD,EAChB71F,EAAIE,UAAUswF,EAAQW,WAAYX,EAAQrlC,WAC1CnrD,EAAI4Q,OAAO4/E,EAAQxnF,OACnBhJ,EAAI2nD,UACD6oC,EAAQpB,YAAc,EACvBpuF,KAAK2kF,QAAQh/E,GAAQ6uF,EAAQC,EAC7BjF,EAAQpB,YACRpuF,KAAK+K,SAAW,IAElB/L,EAAI6Q,YAGH8kF,IAAsBD,GAAkBE,IAAgBC,GAAYL,IAAUxuF,GAAQyuF,IAAQplF,IAC5F0gF,EAAW,GAEV2E,GAAkBG,IACpB71F,EAAImxC,UAAY0kD,EAChB71F,EAAI2nD,SACF+oC,EAAaJ,EAAiBQ,EAC9BzlF,EAAMrK,KAAK2kF,QAAQh/E,GAAQK,EAAOqJ,EAClC0gF,EACA/vF,KAAK+K,SAAW,KAGpB+kF,EAAWN,EAAQplF,KACnB2lF,EAAWP,EAAQjwF,MACnBm1F,EAAiBC,EACjBE,EAAWD,EACX5uF,EAAOwuF,EACPnlF,EAAKolF,GAGL1E,GAAYP,EAAQpB,YAGxBpvF,EAAImxC,UAAYykD,EAChBD,GAAqBC,GAAe51F,EAAI2nD,SACtC+oC,EAAaJ,EAAiBQ,EAC9BzlF,EAAMrK,KAAK2kF,QAAQh/E,GAAQK,EAAOqJ,EAClC0gF,EAAW/D,EACXhsF,KAAK+K,SAAW,IAElB+pF,GAAazF,OA/DXyF,GAAazF,EAmEjBrvF,KAAK2+D,cAAc3/D,KAQrBgwF,oBAAqB,SAAS+F,EAAajG,GACzC,IAAI/hF,EAAQgoF,GAAe/0F,KAAMg1F,EAASh1F,KAAK6S,WAC3CoiF,EAAgB53F,EAAO6N,KAAKgqF,aAAa9xF,QAAQ4xF,EAAOliF,gBAAkB,EAC1ED,OAAwBnG,IAAXsoF,GACjBA,EAAO5xF,QAAQ,MAAS,GAAK4xF,EAAO5xF,QAAQ,MAAQ,GACpD4xF,EAAO5xF,QAAQ,MAAQ,GAAK6xF,EACxBloF,EAAM8F,WAAa,IAAM9F,EAAM8F,WAAa,IAChD,MAAO,CAGJxV,EAAOwD,aAAekM,EAAM2nB,WAAa3nB,EAAM0nB,UAC/Cp3B,EAAOwD,aAAekM,EAAM0nB,UAAY1nB,EAAM2nB,WAC/Co6D,EAAe9uF,KAAKosF,gBAAkB,KAAOr/E,EAAMhC,SAAW,KAC9D8H,GACAa,KAAK,MAOTw/B,OAAQ,SAASl0C,GAEVgB,KAAK+uB,UAGN/uB,KAAKlB,QAAUkB,KAAKlB,OAAOq5C,gBAAkBn4C,KAAKm7C,QAAUn7C,KAAKs9D,eAGjEt9D,KAAKq0F,8BACPr0F,KAAKysF,iBAEPzsF,KAAKkhB,UAAU,SAAUliB,MAQ3B8tF,oBAAqB,SAASR,GAK5B,IAJA,IAAI7nB,EAAQ6nB,EAAKtgF,MAAMhM,KAAKkrF,YACxB2B,EAAW,IAAIp4E,MAAMgwD,EAAM3gE,QAC3BqxF,EAAU,CAAC,MACXC,EAAU,GACLxxF,EAAI,EAAGA,EAAI6gE,EAAM3gE,OAAQF,IAChCipF,EAASjpF,GAAKvG,EAAOgG,KAAKkI,OAAO6U,cAAcqkD,EAAM7gE,IACrDwxF,EAAUA,EAAQxvF,OAAOinF,EAASjpF,GAAIuxF,GAGxC,OADAC,EAAQ3iF,MACD,CAAE06E,gBAAiBN,EAAUpoB,MAAOA,EAAO4oB,aAAc+H,EAASnI,cAAeJ,IAQ1Fj5C,SAAU,SAASC,GACjB,IAAIwhD,EAAuB,CACzB,OACA,WACA,aACA,aACA,YACA,aACA,YACA,WACA,cACA,YACA,sBACA,cACA,QACAzvF,OAAOiuC,GACL3sC,EAAMlH,KAAKkhB,UAAU,WAAYm0E,GAGrC,OAFAnuF,EAAIyc,OAASnE,EAAMxf,KAAK2jB,QAAQ,GAChCzc,EAAIoH,KAAOtO,KAAKsO,MAAQtO,KAAKsO,KAAKslC,WAC3B1sC,GAUTV,IAAK,SAASY,EAAKnD,GACjBjE,KAAKkhB,UAAU,MAAO9Z,EAAKnD,GAC3B,IAAIqxF,GAAY,EACZC,GAAe,EACnB,GAAmB,kBAARnuF,EACT,IAAK,IAAIouF,KAAQpuF,EACF,SAATouF,GACFx1F,KAAKwsF,cAEP8I,EAAYA,IAA8D,IAAjDt1F,KAAKirF,yBAAyB7nF,QAAQoyF,GAC/DD,EAAeA,GAAyB,SAATC,OAIjCF,GAA4D,IAAhDt1F,KAAKirF,yBAAyB7nF,QAAQgE,GAClDmuF,EAAuB,SAARnuF,EASjB,OAPImuF,GACFv1F,KAAKwsF,cAEH8I,IACFt1F,KAAKysF,iBACLzsF,KAAKo7C,aAEAp7C,MAOTkG,WAAY,WACV,OAAO,KAWX7I,EAAO6N,KAAKghE,gBAAkB7uE,EAAO0D,kBAAkB6E,OACrD,oGAAoGoG,MAAM,MAO5G3O,EAAO6N,KAAKC,sBAAwB,GAUpC9N,EAAO6N,KAAKssB,YAAc,SAASzV,EAASvc,EAAU9B,GACpD,IAAKqe,EACH,OAAOvc,EAAS,MAGlB,IAAI2mE,EAAmB9uE,EAAOw3B,gBAAgB9S,EAAS1kB,EAAO6N,KAAKghE,iBAC/DupB,EAAetpB,EAAiBupB,YAAc,OAKlD,IAJAhyF,EAAUrG,EAAOgG,KAAK0B,OAAOqa,OAAQ1b,EAAU8b,EAAM9b,GAAW,GAAMyoE,IAE9D9hE,IAAM3G,EAAQ2G,KAAO,EAC7B3G,EAAQ0G,KAAO1G,EAAQ0G,MAAQ,EAC3B+hE,EAAiBzE,eAAgB,CACnC,IAAIA,EAAiByE,EAAiBzE,gBACO,IAAzCA,EAAetkE,QAAQ,eACzBM,EAAQ4nF,WAAY,IAEsB,IAAxC5jB,EAAetkE,QAAQ,cACzBM,EAAQ6nF,UAAW,IAE2B,IAA5C7jB,EAAetkE,QAAQ,kBACzBM,EAAQ8nF,aAAc,UAEjB9nF,EAAQgkE,eAEb,OAAQyE,IACVzoE,EAAQ0G,MAAQ+hE,EAAiB/8D,IAE/B,OAAQ+8D,IACVzoE,EAAQ2G,KAAO8hE,EAAiB98D,IAE5B,aAAc3L,IAClBA,EAAQqH,SAAW1N,EAAO6N,KAAKC,uBAGjC,IAAIorB,EAAc,GAKZ,gBAAiBxU,EAQrBwU,EAAcxU,EAAQwU,YAPlB,eAAgBxU,GAAkC,OAAvBA,EAAQyQ,YACjC,SAAUzQ,EAAQyQ,YAA0C,OAA5BzQ,EAAQyQ,WAAWrgB,OACrDokB,EAAcxU,EAAQyQ,WAAWrgB,MAQvCokB,EAAcA,EAAYxW,QAAQ,iBAAkB,IAAIA,QAAQ,OAAQ,KACxE,IAAI41E,EAAsBjyF,EAAQ8qC,YAClC9qC,EAAQ8qC,YAAc,EAEtB,IAAI89C,EAAO,IAAIjvF,EAAO6N,KAAKqrB,EAAa7yB,GACpCkyF,EAAwBtJ,EAAK9mB,kBAAoB8mB,EAAKntF,OAEtD02F,IADkBvJ,EAAKntF,OAASmtF,EAAK99C,aAAe89C,EAAK33D,WAAa23D,EAAKntF,QAC7Cy2F,EAC9BE,EAAaxJ,EAAK9mB,kBAAoBqwB,EACtCE,EAAO,EAMU,WAAjBN,IACFM,EAAOzJ,EAAKnpB,iBAAmB,GAEZ,UAAjBsyB,IACFM,EAAOzJ,EAAKnpB,kBAEdmpB,EAAK9lF,IAAI,CACP4D,KAAMkiF,EAAKliF,KAAO2rF,EAClB1rF,IAAKiiF,EAAKjiF,KAAOyrF,EAAaxJ,EAAKvhF,UAAY,IAAOuhF,EAAKR,oBAAsBQ,EAAK33D,WACtF6Z,YAA4C,qBAAxBmnD,EAAsCA,EAAsB,IAElFnwF,EAAS8mF,IAWXjvF,EAAO6N,KAAK0C,WAAa,SAAS7I,EAAQS,GACxC,IAAIwwF,EAAax2E,EAAMza,GAASuJ,EAAOvJ,EAAOuJ,KAE9C,cADO0nF,EAAW1nF,KACXjR,EAAOwR,OAAO4xD,YAAY,OAAQu1B,GAAY,SAASC,GACxD3nF,EACFjR,EAAOwR,OAAO4xD,YAAY,OAAQnyD,GAAM,SAAS4nF,GAC/CD,EAAazvF,IAAI,OAAQ0vF,GACzB1wF,EAASywF,KACR,QAGHzwF,EAASywF,KAEV,SAGL54F,EAAO6N,KAAKgqF,aAAe,CAAC,aAAc,QAAS,UAAW,UAAW,aAEzE73F,EAAOgG,KAAK4+D,iBAAmB5kE,EAAOgG,KAAK4+D,gBAAgB5kE,EAAO6N,OArkDpE,CAukDoC3N,GAIlCF,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAO6N,KAAK4D,UAA+C,CAMnF2jF,cAAe,SAASpE,GACtB,IAAKruF,KAAK2jB,OACR,OAAO,EAET,GAAyB,qBAAd0qE,IAA8BruF,KAAK2jB,OAAO0qE,GACnD,OAAO,EAET,IAAInnF,EAA2B,qBAAdmnF,EAA4BruF,KAAK2jB,OAAS,CAAEoqE,KAAM/tF,KAAK2jB,OAAO0qE,IAC/E,IAAK,IAAIlrC,KAAMj8C,EACb,IAAK,IAAIk8C,KAAMl8C,EAAIi8C,GAEjB,IAAK,IAAIgzC,KAAMjvF,EAAIi8C,GAAIC,GACrB,OAAO,EAIb,OAAO,GAUTgsC,SAAU,SAASzoF,EAAU0nF,GAC3B,IAAKruF,KAAK2jB,SAAWhd,GAAyB,KAAbA,EAC/B,OAAO,EAET,GAAyB,qBAAd0nF,IAA8BruF,KAAK2jB,OAAO0qE,GACnD,OAAO,EAET,IAAInnF,EAA2B,qBAAdmnF,EAA4BruF,KAAK2jB,OAAS,CAAEyyE,EAAGp2F,KAAK2jB,OAAO0qE,IAE5E,IAAK,IAAIlrC,KAAMj8C,EAEb,IAAK,IAAIk8C,KAAMl8C,EAAIi8C,GACjB,GAAqC,qBAA1Bj8C,EAAIi8C,GAAIC,GAAIz8C,GACrB,OAAO,EAIb,OAAO,GAaT0vF,WAAY,SAAS1vF,GACnB,IAAK3G,KAAK2jB,SAAWhd,GAAyB,KAAbA,EAC/B,OAAO,EAET,IAAwC2vF,EAAaC,EAAjDrvF,EAAMlH,KAAK2jB,OAAQ6yE,EAAc,EACjCC,GAAgC,EAAMC,EAAgB,EAE1D,IAAK,IAAIvzC,KAAMj8C,EAAK,CAGlB,IAAK,IAAIk8C,KAFTkzC,EAAc,EAECpvF,EAAIi8C,GAAK,CACtB,IAAI4xC,EAGJyB,KAHIzB,EAAc7tF,EAAIi8C,GAAIC,IACgB7jC,eAAe5Y,IAKlD4vF,EAGIxB,EAAYpuF,KAAc4vF,IACjCE,GAAgC,GAHhCF,EAAqBxB,EAAYpuF,GAM/BouF,EAAYpuF,KAAc3G,KAAK2G,WAC1BouF,EAAYpuF,IAIrB8vF,GAAgC,EAGM,IAApC5nF,OAAO4kC,KAAKshD,GAAajxF,OAC3BwyF,WAGOpvF,EAAIi8C,GAAIC,GAIC,IAAhBkzC,UACKpvF,EAAIi8C,GAKf,IAAK,IAAIv/C,EAAI,EAAGA,EAAI5D,KAAKgtF,WAAWlpF,OAAQF,IAC1C8yF,GAAiB12F,KAAKgtF,WAAWppF,GAAGE,OAElC2yF,GAAiCD,IAAgBE,IACnD12F,KAAK2G,GAAY4vF,EACjBv2F,KAAK22F,YAAYhwF,KAWrBgwF,YAAa,SAAShwF,GACpB,GAAK3G,KAAK2jB,QAAWhd,GAAyB,KAAbA,EAAjC,CAGA,IAAuBonF,EAAM6I,EAASC,EAAlC3vF,EAAMlH,KAAK2jB,OACf,IAAKizE,KAAW1vF,EAAK,CAEnB,IAAK2vF,KADL9I,EAAO7mF,EAAI0vF,UAEF7I,EAAK8I,GAASlwF,GACqB,IAAtCkI,OAAO4kC,KAAKs6C,EAAK8I,IAAU/yF,eACtBiqF,EAAK8I,GAGiB,IAA7BhoF,OAAO4kC,KAAKs6C,GAAMjqF,eACboD,EAAI0vF,MAQjBE,cAAe,SAAS9xF,EAAO2e,GAC7B,IAAIowE,EAAM/zF,KAAKg0F,oBAAoBhvF,GAE9BhF,KAAK+2F,cAAchD,EAAI1F,YAC1BruF,KAAKg3F,cAAcjD,EAAI1F,WAGpBruF,KAAKszF,qBAAqBS,EAAI1F,UAAW0F,EAAI5zC,YAChDngD,KAAKi3F,qBAAqBlD,EAAI1F,UAAW0F,EAAI5zC,UAAW,IAG1D9iD,EAAOgG,KAAK0B,OAAOqa,OAAOpf,KAAKszF,qBAAqBS,EAAI1F,UAAW0F,EAAI5zC,WAAYx8B,IAQrFqwE,oBAAqB,SAASkD,EAAgBC,GACd,qBAAnBD,IACTA,EAAiBl3F,KAAKk3F,gBAIxB,IAFA,IAAIzyB,EAAQ0yB,EAAen3F,KAAKktF,oBAAsBltF,KAAKgtF,WACvDnpF,EAAM4gE,EAAM3gE,OACPF,EAAI,EAAGA,EAAIC,EAAKD,IAAK,CAC5B,GAAIszF,GAAkBzyB,EAAM7gE,GAAGE,OAC7B,MAAO,CACLuqF,UAAWzqF,EACXu8C,UAAW+2C,GAGfA,GAAkBzyB,EAAM7gE,GAAGE,OAAS9D,KAAKsuF,qBAAqB1qF,GAEhE,MAAO,CACLyqF,UAAWzqF,EAAI,EACfu8C,UAAWskB,EAAM7gE,EAAI,GAAGE,OAASozF,EAAiBzyB,EAAM7gE,EAAI,GAAGE,OAASozF,IAY5EE,mBAAoB,SAASC,EAAYC,EAAUvhD,GACvB,qBAAfshD,IACTA,EAAar3F,KAAKk3F,gBAAkB,GAEd,qBAAbI,IACTA,EAAWt3F,KAAKu3F,cAAgBF,GAGlC,IADA,IAAI1zE,EAAS,GACJ/f,EAAIyzF,EAAYzzF,EAAI0zF,EAAU1zF,IACrC+f,EAAOtf,KAAKrE,KAAKw3F,mBAAmB5zF,EAAGmyC,IAEzC,OAAOpyB,GAUT6zE,mBAAoB,SAASxqF,EAAU+oC,GACrC,IAAIg+C,EAAM/zF,KAAKg0F,oBAAoBhnF,GAGnC,OAFY+oC,EAAW/1C,KAAKkyF,4BAA4B6B,EAAI1F,UAAW0F,EAAI5zC,WACrEngD,KAAKszF,qBAAqBS,EAAI1F,UAAW0F,EAAI5zC,aACnC,IAWlB8zC,mBAAoB,SAAStwE,EAAQ0zE,EAAYC,GACrB,qBAAfD,IACTA,EAAar3F,KAAKk3F,gBAAkB,GAEd,qBAAbI,IACTA,EAAWt3F,KAAKu3F,cAAgBF,GAElC,IAAK,IAAIzzF,EAAIyzF,EAAYzzF,EAAI0zF,EAAU1zF,IACrC5D,KAAK82F,cAAclzF,EAAG+f,GAIxB,OADA3jB,KAAKu0F,kBAAmB,EACjBv0F,MASTszF,qBAAsB,SAASjF,EAAWluC,GACxC,IAAIs3C,EAAYz3F,KAAK2jB,QAAU3jB,KAAK2jB,OAAO0qE,GAC3C,OAAKoJ,EAGEA,EAAUt3C,GAFR,MAYX+xC,4BAA6B,SAAS7D,EAAWluC,GAG/C,IAFA,IACuB/7C,EADnB2I,EAAQ/M,KAAKszF,qBAAqBjF,EAAWluC,IAAc,GAC3D40C,EAAc,GACTnxF,EAAI,EAAGA,EAAI5D,KAAKksF,iBAAiBpoF,OAAQF,IAEhDmxF,EADA3wF,EAAOpE,KAAKksF,iBAAiBtoF,IACc,qBAAhBmJ,EAAM3I,GAAwBpE,KAAKoE,GAAQ2I,EAAM3I,GAE9E,OAAO2wF,GASTkC,qBAAsB,SAAS5I,EAAWluC,EAAWpzC,GACnD/M,KAAK2jB,OAAO0qE,GAAWluC,GAAapzC,GAStC2qF,wBAAyB,SAASrJ,EAAWluC,UACpCngD,KAAK2jB,OAAO0qE,GAAWluC,IAQhC42C,cAAe,SAAS1I,GACtB,QAASruF,KAAK2jB,OAAO0qE,IAQvB2I,cAAe,SAAS3I,GACtBruF,KAAK2jB,OAAO0qE,GAAa,IAO3BsJ,iBAAkB,SAAStJ,UAClBruF,KAAK2jB,OAAO0qE,MAMzB,WAEE,SAASuJ,EAAgB7yF,GACnBA,EAAO2iE,iBACT3iE,EAAO2iE,eAAetkE,QAAQ,cAAgB,IAAM2B,EAAOumF,WAAY,GACvEvmF,EAAO2iE,eAAetkE,QAAQ,iBAAmB,IAAM2B,EAAOymF,aAAc,GAC5EzmF,EAAO2iE,eAAetkE,QAAQ,aAAe,IAAM2B,EAAOwmF,UAAW,UAC9DxmF,EAAO2iE,gBAkDlBrqE,EAAOw6F,MAAQx6F,EAAOgG,KAAKke,YAAYlkB,EAAO6N,KAAM7N,EAAOmG,WAAiD,CAO1GmC,KAAM,SAONuxF,eAAgB,EAOhBK,aAAc,EAOdxvC,eAAgB,uBAOhBmF,WAAW,EAOX4qC,UAAU,EAOVC,mBAAoB,yBAOpBvK,YAAa,EAUbwK,YAAa,GAObC,YAAa,IAObC,eAAgB,IAOhBC,SAAS,EAKTC,SAAU,QAKVC,sBAAuB,EAKvBC,oBAAqB,KAKrBC,uBAAuB,EAKvBC,eAAgB,GAMhBC,mBAAmB,EAQnBj3E,WAAY,SAAS8qE,EAAM5oF,GACzB1D,KAAKkhB,UAAU,aAAcorE,EAAM5oF,GACnC1D,KAAK04F,gBAOPC,kBAAmB,SAAS3zF,GAC1BA,EAAQyC,KAAKc,IAAIvD,EAAO,GACxBhF,KAAK44F,eAAe,iBAAkB5zF,IAOxC6zF,gBAAiB,SAAS7zF,GACxBA,EAAQyC,KAAKa,IAAItD,EAAOhF,KAAKssF,KAAKxoF,QAClC9D,KAAK44F,eAAe,eAAgB5zF,IAQtC4zF,eAAgB,SAASjyF,EAAU3B,GAC7BhF,KAAK2G,KAAc3B,IACrBhF,KAAK84F,wBACL94F,KAAK2G,GAAY3B,GAEnBhF,KAAK+4F,mBAOPD,sBAAuB,WACrB94F,KAAKyD,KAAK,qBACVzD,KAAKlB,QAAUkB,KAAKlB,OAAO2E,KAAK,yBAA0B,CAAEkO,OAAQ3R,QAUtEysF,eAAgB,WACdzsF,KAAKktD,WAAaltD,KAAKg5F,oBACvBh5F,KAAK4vD,kBACL5vD,KAAKkhB,UAAU,mBAOjBgyB,OAAQ,SAASl0C,GACfgB,KAAK4vD,kBACL5vD,KAAKkhB,UAAU,SAAUliB,GAGzBgB,KAAKi5F,kBAAoB,GACzBj5F,KAAKk5F,2BAOPv1C,QAAS,SAAS3kD,GAChBgB,KAAKkhB,UAAU,UAAWliB,IAM5B4wD,gBAAiB,SAASupC,GACxB,GAAKn5F,KAAKktD,WAAcltD,KAAKlB,QAAWkB,KAAKlB,OAAOu6C,WAApD,CAGA,IAAIr6C,EAAMgB,KAAKlB,OAAOu6C,WAAYnwC,EAAIlJ,KAAKlB,OAAOg5C,kBAClD94C,EAAI0Q,OACJ1Q,EAAI+K,UAAUb,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC9ClJ,KAAK+J,UAAU/K,GACfgB,KAAKo5F,eAAep6F,GACpBm6F,GAAen6F,EAAI6Q,YAMrBqpF,wBAAyB,WACvB,GAAKl5F,KAAKktD,WAAcltD,KAAKlB,QAAWkB,KAAKlB,OAAOu6C,WAApD,CAGA,IAAIggD,EAAar5F,KAAKs5F,uBAClBt6F,EAAMgB,KAAKlB,OAAOu6C,WACtBr5C,KAAK4vD,iBAAgB,GACjB5vD,KAAKk3F,iBAAmBl3F,KAAKu3F,aAC/Bv3F,KAAKu5F,aAAaF,EAAYr6F,GAG9BgB,KAAKw5F,gBAAgBH,EAAYr6F,GAEnCA,EAAI6Q,YAGNupF,eAAgB,SAASp6F,GAEvB,IAAIO,EAAQS,KAAKT,MAAQ,EAAGJ,EAASa,KAAKb,OAAS,EACnDH,EAAI+8C,WAAWx8C,EAAQ,GAAIJ,EAAS,EAAGI,EAAOJ,IAShDm6F,qBAAsB,SAAStsF,GAKL,qBAAbA,IACTA,EAAWhN,KAAKk3F,gBAGlB,IAAI9sF,EAAOpK,KAAK2vF,iBACZtlF,EAAMrK,KAAK6vF,gBACXlL,EAAU3kF,KAAKy5F,4BAA4BzsF,GAE/C,MAAO,CACL5C,KAAMA,EACNC,IAAKA,EACLqlF,WAAY/K,EAAQv6E,KACpB0qF,UAAWnQ,EAAQt6E,MAOvBovF,4BAA6B,SAASzsF,GACpC,GAAIhN,KAAKi5F,mBAAqB,QAASj5F,KAAKi5F,kBAC1C,OAAOj5F,KAAKi5F,kBAEd,IAAI3J,EACAjB,EACAluC,EAGAk5C,EAFAvE,EAAY,EACZpF,EAAa,EAEbgK,EAAiB15F,KAAKg0F,oBAAoBhnF,GAC9CmzC,EAAYu5C,EAAev5C,UAC3BkuC,EAAYqL,EAAerL,UAC3B,IAAK,IAAIzqF,EAAI,EAAGA,EAAIyqF,EAAWzqF,IAC7BkxF,GAAa90F,KAAKgwF,gBAAgBpsF,GAEpC0rF,EAAiBtvF,KAAKiwF,mBAAmB5B,GACzC,IAAI9vE,EAAQve,KAAKmsF,aAAakC,GAAWluC,GAUzC,OATA5hC,IAAUmxE,EAAanxE,EAAMnU,MACJ,IAArBpK,KAAKgsF,aAAqB7rC,IAAcngD,KAAKgtF,WAAWqB,GAAWvqF,SACrE4rF,GAAc1vF,KAAKqxF,0BAErBgI,EAAa,CACXhvF,IAAKyqF,EACL1qF,KAAMklF,GAAkBI,EAAa,EAAIA,EAAa,IAExD1vF,KAAKi5F,kBAAoBI,EAClBr5F,KAAKi5F,mBAQdM,aAAc,SAASF,EAAYr6F,GACjC,IAAI26F,EAAiB35F,KAAKg0F,sBACtB3F,EAAYsL,EAAetL,UAC3BluC,EAAYw5C,EAAex5C,UAAY,EAAIw5C,EAAex5C,UAAY,EAAI,EAC1Ey5C,EAAa55F,KAAKkwF,qBAAqB7B,EAAWluC,EAAW,YAC7DzR,EAAa1uC,KAAK0Q,OAAS1Q,KAAKlB,OAAO0rC,UACvCgjD,EAAcxtF,KAAKwtF,YAAc9+C,EACjComD,EAAYuE,EAAWvE,UACvBzlF,EAAKrP,KAAKkwF,qBAAqB7B,EAAWluC,EAAW,UAEzD20C,IAAc,EAAI90F,KAAK8rF,mBAAqB9rF,KAAKgwF,gBAAgB3B,GAAaruF,KAAK20B,WAC/EilE,GAAc,EAAI55F,KAAK8rF,mBAEvB9rF,KAAKy4F,mBACPz4F,KAAKw5F,gBAAgBH,EAAYr6F,GAGnCA,EAAImxC,UAAYnwC,KAAKg4F,aAAeh4F,KAAKkwF,qBAAqB7B,EAAWluC,EAAW,QACpFnhD,EAAI0nD,YAAc1mD,KAAK65F,cAAgB,EAAI75F,KAAKq4F,sBAChDr5F,EAAI2nD,SACF0yC,EAAWjvF,KAAOivF,EAAW3J,WAAalC,EAAc,EACxDsH,EAAYuE,EAAWhvF,IAAMgF,EAC7Bm+E,EACAoM,IAQJJ,gBAAiB,SAASH,EAAYr6F,GAYpC,IAVA,IAAIk4F,EAAiBl3F,KAAKy4F,kBAAoBz4F,KAAKsyD,eAAe4kC,eAAiBl3F,KAAKk3F,eACpFK,EAAev3F,KAAKy4F,kBAAoBz4F,KAAKsyD,eAAeilC,aAAev3F,KAAKu3F,aAChF1E,GAAmD,IAAvC7yF,KAAKyrF,UAAUroF,QAAQ,WACnC4mB,EAAQhqB,KAAKg0F,oBAAoBkD,GACjC/rE,EAAMnrB,KAAKg0F,oBAAoBuD,GAC/BuC,EAAY9vE,EAAMqkE,UAClB0L,EAAU5uE,EAAIkjE,UACd2L,EAAYhwE,EAAMm2B,UAAY,EAAI,EAAIn2B,EAAMm2B,UAC5C85C,EAAU9uE,EAAIg1B,UAAY,EAAI,EAAIh1B,EAAIg1B,UAEjCv8C,EAAIk2F,EAAWl2F,GAAKm2F,EAASn2F,IAAK,CACzC,IAEIs2F,EAFAC,EAAan6F,KAAKiwF,mBAAmBrsF,IAAM,EAC3C+wB,EAAa30B,KAAKgwF,gBAAgBpsF,GACdksF,EAAW,EAAGsK,EAAS,EAK/C,GAHIx2F,IAAMk2F,IACRhK,EAAW9vF,KAAKmsF,aAAa2N,GAAWE,GAAW5vF,MAEjDxG,GAAKk2F,GAAal2F,EAAIm2F,EACxBK,EAASvH,IAAc7yF,KAAKkuF,gBAAgBtqF,GAAK5D,KAAKT,MAAQS,KAAKmuF,aAAavqF,IAAM,OAEnF,GAAIA,IAAMm2F,EACb,GAAgB,IAAZE,EACFG,EAASp6F,KAAKmsF,aAAa4N,GAASE,GAAS7vF,SAE1C,CACH,IAAI4hF,EAAchsF,KAAKqxF,yBACvB+I,EAASp6F,KAAKmsF,aAAa4N,GAASE,EAAU,GAAG7vF,KAC7CpK,KAAKmsF,aAAa4N,GAASE,EAAU,GAAG16F,MAAQysF,EAGxDkO,EAAiBvlE,GACb30B,KAAK20B,WAAa,GAAM/wB,IAAMm2F,GAAW/5F,KAAK20B,WAAa,KAC7DA,GAAc30B,KAAK20B,YAEjB30B,KAAKy4F,mBACPz5F,EAAImxC,UAAYnwC,KAAKq6F,kBAAoB,QACzCr7F,EAAI2nD,SACF0yC,EAAWjvF,KAAO+vF,EAAarK,EAC/BuJ,EAAWhvF,IAAMgvF,EAAWvE,UAAYngE,EACxCylE,EAAStK,EACT,KAGF9wF,EAAImxC,UAAYnwC,KAAK+nD,eACrB/oD,EAAI2nD,SACF0yC,EAAWjvF,KAAO+vF,EAAarK,EAC/BuJ,EAAWhvF,IAAMgvF,EAAWvE,UAC5BsF,EAAStK,EACTn7D,IAIJ0kE,EAAWvE,WAAaoF,IAW5BI,uBAAwB,WACtB,IAAIC,EAAKv6F,KAAKw6F,uBACd,OAAOx6F,KAAKkwF,qBAAqBqK,EAAGroF,EAAGqoF,EAAG1lF,EAAG,aAW/C4lF,oBAAqB,WACnB,IAAIF,EAAKv6F,KAAKw6F,uBACd,OAAOx6F,KAAKkwF,qBAAqBqK,EAAGroF,EAAGqoF,EAAG1lF,EAAG,SAO/C2lF,qBAAsB,WACpB,IAAId,EAAiB15F,KAAKg0F,oBAAoBh0F,KAAKk3F,gBAAgB,GAC/D/2C,EAAYu5C,EAAev5C,UAAY,EAAIu5C,EAAev5C,UAAY,EAAI,EAC9E,MAAO,CAAEjuC,EAAGwnF,EAAerL,UAAWx5E,EAAGsrC,MAW7C9iD,EAAOw6F,MAAMjqF,WAAa,SAAS7I,EAAQS,GAEzC,GADAoyF,EAAgB7yF,GACZA,EAAO4e,OACT,IAAK,IAAI/f,KAAKmB,EAAO4e,OACnB,IAAK,IAAI3K,KAAKjU,EAAO4e,OAAO/f,GAC1Bg0F,EAAgB7yF,EAAO4e,OAAO/f,GAAGoV,IAIvC3b,EAAOwR,OAAO4xD,YAAY,QAAS17D,EAAQS,EAAU,SA7fzD,GAkgBA,WAEE,IAAIga,EAAQniB,EAAOgG,KAAK0B,OAAOya,MAE/BniB,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOw6F,MAAM/oF,UAAgD,CAKrF4pF,aAAc,WACZ14F,KAAK06F,mBACL16F,KAAK26F,qBACL36F,KAAK46F,8BACL56F,KAAK66F,4BACL76F,KAAK86F,iBAAmB96F,KAAK86F,iBAAiB1jD,KAAKp3C,OAGrDovD,WAAY,WACVpvD,KAAKktD,WAAaltD,KAAK+2D,cACvB/2D,KAAK6uD,UAAW,GAMlB6rC,iBAAkB,WAChB,IAAIr5E,EAAQrhB,KACZA,KAAKkE,GAAG,SAAS,WACf,IAAIpF,EAASuiB,EAAMviB,OACfA,IACGA,EAAOm9C,oBACVn9C,EAAOm9C,mBAAoB,EAC3B56B,EAAM05E,oBAAoBj8F,IAE5BA,EAAOq9C,gBAAkBr9C,EAAOq9C,iBAAmB,GACnDr9C,EAAOq9C,gBAAgB93C,KAAKgd,QAKlCs5E,mBAAoB,WAClB,IAAIt5E,EAAQrhB,KACZA,KAAKkE,GAAG,WAAW,WACjB,IAAIpF,EAASuiB,EAAMviB,OACfA,IACFA,EAAOq9C,gBAAkBr9C,EAAOq9C,iBAAmB,GACnD9+C,EAAOgG,KAAK8E,gBAAgBrJ,EAAOq9C,gBAAiB96B,GACd,IAAlCviB,EAAOq9C,gBAAgBr4C,SACzBhF,EAAOm9C,mBAAoB,EAC3B56B,EAAM25E,sBAAsBl8F,SAUpCi8F,oBAAqB,SAASj8F,GAC5BA,EAAOo9C,qBAAuB,WACxBp9C,EAAOq9C,iBACTr9C,EAAOq9C,gBAAgBxuC,SAAQ,SAASzG,GACtCA,EAAI2yF,eAAgB,MAI1B/6F,EAAOoF,GAAG,WAAYpF,EAAOo9C,uBAO/B8+C,sBAAuB,SAASl8F,GAC9BA,EAAOwF,IAAI,WAAYxF,EAAOo9C,uBAMhC++C,MAAO,WACLj7F,KAAKk7F,kBAAoBl7F,KAAKm7F,eAAen7F,KAAM,EAAGA,KAAKk4F,eAAgB,oBAM7EiD,eAAgB,SAASj0F,EAAKk0F,EAAelxE,EAAUmxE,GAErD,IAAIC,EA0BJ,OAxBAA,EAAY,CACVC,WAAW,EACXlxE,MAAO,WACLrqB,KAAKu7F,WAAY,IAIrBr0F,EAAI2iB,QAAQ,wBAAyBuxE,EAAe,CAClDlxE,SAAUA,EACV/B,WAAY,WACLmzE,EAAUC,WACbr0F,EAAIm0F,MAGRjxE,SAAU,WAEJljB,EAAIpI,QAAUoI,EAAIgwF,iBAAmBhwF,EAAIqwF,cAC3CrwF,EAAIgyF,2BAGR7uE,MAAO,WACL,OAAOixE,EAAUC,aAGdD,GAMTE,gBAAiB,WAEf,IAAIn6E,EAAQrhB,KAERA,KAAKy7F,iBACP9xE,aAAa3pB,KAAKy7F,iBAEpBz7F,KAAKy7F,gBAAkBjyE,YAAW,WAChCnI,EAAMq6E,0BAA4Br6E,EAAM85E,eAAe95E,EAAO,EAAGrhB,KAAKk4F,eAAiB,EAAG,WACzF,MAMLc,kBAAmB,SAAS2C,GAC1B,IAAIt6E,EAAQrhB,KACR47F,EAAQD,EAAU,EAAI37F,KAAKi4F,YAE/Bj4F,KAAK67F,uBACL77F,KAAKq4F,sBAAwB,EAC7Br4F,KAAK87F,gBAAkBtyE,YAAW,WAChCnI,EAAM45E,UACLW,IAMLC,qBAAsB,WACpB,IAAIvH,EAAct0F,KAAKk7F,mBAAqBl7F,KAAK07F,0BAC7C58F,EAASkB,KAAKlB,OAClBkB,KAAKk7F,mBAAqBl7F,KAAKk7F,kBAAkB7wE,QACjDrqB,KAAK07F,2BAA6B17F,KAAK07F,0BAA0BrxE,QAEjEV,aAAa3pB,KAAKy7F,iBAClB9xE,aAAa3pB,KAAK87F,iBAElB97F,KAAKq4F,sBAAwB,EAGzB/D,GAAex1F,GACjBA,EAAOg9C,aAAah9C,EAAOu6C,YAAcv6C,EAAOq6C,mBAUpD4iD,UAAW,WAKT,OAJA/7F,KAAKk3F,eAAiB,EACtBl3F,KAAKu3F,aAAev3F,KAAKotF,MAAMtpF,OAC/B9D,KAAK84F,wBACL94F,KAAK+4F,kBACE/4F,MAOTg8F,gBAAiB,WACf,OAAOh8F,KAAKotF,MAAMzhF,MAAM3L,KAAKk3F,eAAgBl3F,KAAKu3F,cAAc7jF,KAAK,KAQvEuoF,qBAAsB,SAASC,GAC7B,IAAIn1E,EAAS,EAAG/hB,EAAQk3F,EAAY,EAGpC,GAAIl8F,KAAKo4F,SAAS30E,KAAKzjB,KAAKotF,MAAMpoF,IAChC,KAAOhF,KAAKo4F,SAAS30E,KAAKzjB,KAAKotF,MAAMpoF,KACnC+hB,IACA/hB,IAGJ,KAAO,KAAKye,KAAKzjB,KAAKotF,MAAMpoF,KAAWA,GAAS,GAC9C+hB,IACA/hB,IAGF,OAAOk3F,EAAYn1E,GAQrBo1E,sBAAuB,SAASD,GAC9B,IAAIn1E,EAAS,EAAG/hB,EAAQk3F,EAGxB,GAAIl8F,KAAKo4F,SAAS30E,KAAKzjB,KAAKotF,MAAMpoF,IAChC,KAAOhF,KAAKo4F,SAAS30E,KAAKzjB,KAAKotF,MAAMpoF,KACnC+hB,IACA/hB,IAGJ,KAAO,KAAKye,KAAKzjB,KAAKotF,MAAMpoF,KAAWA,EAAQhF,KAAKotF,MAAMtpF,QACxDijB,IACA/hB,IAGF,OAAOk3F,EAAYn1E,GAQrBq1E,qBAAsB,SAASF,GAG7B,IAFA,IAAIn1E,EAAS,EAAG/hB,EAAQk3F,EAAY,GAE5B,KAAKz4E,KAAKzjB,KAAKotF,MAAMpoF,KAAWA,GAAS,GAC/C+hB,IACA/hB,IAGF,OAAOk3F,EAAYn1E,GAQrBs1E,sBAAuB,SAASH,GAG9B,IAFA,IAAIn1E,EAAS,EAAG/hB,EAAQk3F,GAEhB,KAAKz4E,KAAKzjB,KAAKotF,MAAMpoF,KAAWA,EAAQhF,KAAKotF,MAAMtpF,QACzDijB,IACA/hB,IAGF,OAAOk3F,EAAYn1E,GASrBu1E,mBAAoB,SAASpF,EAAgBqF,GAO3C,IANA,IAAIjQ,EAAOtsF,KAAKotF,MACZpoF,EAAYhF,KAAKo4F,SAAS30E,KAAK6oE,EAAK4K,IAAmBA,EAAiB,EAAIA,EAC5E3G,EAAYjE,EAAKtnF,GAEjB5D,EAAY/D,EAAO+D,WAEfA,EAAUqiB,KAAK8sE,IAAUvrF,EAAQ,GAAKA,EAAQsnF,EAAKxoF,QAEzDysF,EAAQjE,EADRtnF,GAASu3F,GAMX,OAHIn7F,EAAUqiB,KAAK8sE,KACjBvrF,GAAuB,IAAdu3F,EAAkB,EAAI,GAE1Bv3F,GAOTw3F,WAAY,SAAStF,GACnBA,EAAiBA,GAAkBl3F,KAAKk3F,eACxC,IAAIuF,EAAoBz8F,KAAKs8F,mBAAmBpF,GAAiB,GAC7DwF,EAAkB18F,KAAKs8F,mBAAmBpF,EAAgB,GAE9Dl3F,KAAKk3F,eAAiBuF,EACtBz8F,KAAKu3F,aAAemF,EACpB18F,KAAK84F,wBACL94F,KAAK+4F,kBACL/4F,KAAKk5F,2BASPyD,WAAY,SAASzF,GACnBA,EAAiBA,GAAkBl3F,KAAKk3F,eACxC,IAAIuF,EAAoBz8F,KAAKo8F,qBAAqBlF,GAC9CwF,EAAkB18F,KAAKq8F,sBAAsBnF,GAMjD,OAJAl3F,KAAKk3F,eAAiBuF,EACtBz8F,KAAKu3F,aAAemF,EACpB18F,KAAK84F,wBACL94F,KAAK+4F,kBACE/4F,MAQT48F,aAAc,SAAS9yD,GACrB,IAAI9pC,KAAKktD,WAAcltD,KAAK83F,SAsB5B,OAlBI93F,KAAKlB,SACPkB,KAAKlB,OAAO+5C,aACZ74C,KAAK68F,oBAAoB78F,KAAKlB,SAGhCkB,KAAKktD,WAAY,EAEjBltD,KAAK88F,mBAAmBhzD,GACxB9pC,KAAKsyD,eAAeC,QACpBvyD,KAAKsyD,eAAeruD,MAAQjE,KAAKssF,KACjCtsF,KAAK+4F,kBACL/4F,KAAK+8F,oBACL/8F,KAAKg9F,mBACLh9F,KAAKi9F,gBAAkBj9F,KAAKssF,KAE5BtsF,KAAKi7F,QACLj7F,KAAKyD,KAAK,mBACVzD,KAAK84F,wBACA94F,KAAKlB,QAGVkB,KAAKlB,OAAO2E,KAAK,uBAAwB,CAAEkO,OAAQ3R,OACnDA,KAAKk9F,uBACLl9F,KAAKlB,OAAO+F,mBACL7E,MALEA,MAQX68F,oBAAqB,SAAS/9F,GACxBA,EAAOq9C,iBACTr9C,EAAOq9C,gBAAgBxuC,SAAQ,SAASzG,GACtCA,EAAI2nD,UAAW,EACX3nD,EAAIgmD,WACNhmD,EAAI6vD,kBASZmmC,qBAAsB,WACpBl9F,KAAKlB,OAAOoF,GAAG,aAAclE,KAAK86F,mBAMpCA,iBAAkB,SAASp3F,GACzB,GAAK1D,KAAK65F,eAAkB75F,KAAKktD,UAAjC,CAIA,IAAIuvC,EAAoBz8F,KAAKm9F,6BAA6Bz5F,EAAQomC,GAC9DszD,EAAep9F,KAAKk3F,eACpBmG,EAAar9F,KAAKu3F,cAEnBkF,IAAsBz8F,KAAKs9F,6BAA+BF,IAAiBC,GAE3ED,IAAiBX,GAAqBY,IAAeZ,KAIpDA,EAAoBz8F,KAAKs9F,6BAC3Bt9F,KAAKk3F,eAAiBl3F,KAAKs9F,4BAC3Bt9F,KAAKu3F,aAAekF,IAGpBz8F,KAAKk3F,eAAiBuF,EACtBz8F,KAAKu3F,aAAev3F,KAAKs9F,6BAEvBt9F,KAAKk3F,iBAAmBkG,GAAgBp9F,KAAKu3F,eAAiB8F,IAChEr9F,KAAKu9F,wBACLv9F,KAAK84F,wBACL94F,KAAK+4F,kBACL/4F,KAAKk5F,8BAOT8D,iBAAkB,WAChBh9F,KAAKooD,YAAc,OAEfpoD,KAAKlB,SACPkB,KAAKlB,OAAOwpD,cAAgBtoD,KAAKlB,OAAOupD,WAAa,QAGvDroD,KAAK45D,YAAc55D,KAAK+3F,mBACxB/3F,KAAKm6D,YAAcn6D,KAAKmrD,YAAa,EACrCnrD,KAAKq6D,cAAgBr6D,KAAKs6D,eAAgB,GAM5CkjC,8BAA+B,SAASxzE,EAAOmB,EAAKmhE,GAClD,IAAImR,EAAmBnR,EAAK3gF,MAAM,EAAGqe,GACjC0zE,EAAgBrgG,EAAOgG,KAAKkI,OAAO6U,cAAcq9E,GAAkB35F,OACvE,GAAIkmB,IAAUmB,EACZ,MAAO,CAAE+rE,eAAgBwG,EAAenG,aAAcmG,GAExD,IAAIC,EAAiBrR,EAAK3gF,MAAMqe,EAAOmB,GAEvC,MAAO,CAAE+rE,eAAgBwG,EAAenG,aAAcmG,EADpCrgG,EAAOgG,KAAKkI,OAAO6U,cAAcu9E,GAAgB75F,SAOrE85F,8BAA+B,SAAS5zE,EAAOmB,EAAKiiE,GAClD,IACIsQ,EADmBtQ,EAAMzhF,MAAM,EAAGqe,GACDtW,KAAK,IAAI5P,OAC9C,OAAIkmB,IAAUmB,EACL,CAAE+rE,eAAgBwG,EAAenG,aAAcmG,GAIjD,CAAExG,eAAgBwG,EAAenG,aAAcmG,EAFjCtQ,EAAMzhF,MAAMqe,EAAOmB,GACPzX,KAAK,IAAI5P,SAO5Ci1F,gBAAiB,WAEf,GADA/4F,KAAKi5F,kBAAoB,GACpBj5F,KAAKsyD,eAAV,CAGA,IAAKtyD,KAAKy4F,kBAAmB,CAC3B,IAAIoF,EAAe79F,KAAK49F,8BAA8B59F,KAAKk3F,eAAgBl3F,KAAKu3F,aAAcv3F,KAAKotF,OACnGptF,KAAKsyD,eAAe4kC,eAAiB2G,EAAa3G,eAClDl3F,KAAKsyD,eAAeilC,aAAesG,EAAatG,aAElDv3F,KAAK89F,2BAMPC,mBAAoB,WAClB,GAAK/9F,KAAKsyD,eAAV,CAGAtyD,KAAKi5F,kBAAoB,GACzBj5F,KAAKssF,KAAOtsF,KAAKsyD,eAAeruD,MAC5BjE,KAAKq0F,+BACPr0F,KAAKysF,iBACLzsF,KAAKo7C,aAEP,IAAIyiD,EAAe79F,KAAKw9F,8BACtBx9F,KAAKsyD,eAAe4kC,eAAgBl3F,KAAKsyD,eAAeilC,aAAcv3F,KAAKsyD,eAAeruD,OAC5FjE,KAAKu3F,aAAev3F,KAAKk3F,eAAiB2G,EAAatG,aAClDv3F,KAAKy4F,oBACRz4F,KAAKk3F,eAAiB2G,EAAa3G,gBAErCl3F,KAAK89F,2BAMPA,uBAAwB,WACtB,GAAI99F,KAAKk3F,iBAAmBl3F,KAAKu3F,aAAc,CAC7C,IAAIxqF,EAAQ/M,KAAKg+F,wBACjBh+F,KAAKsyD,eAAevlD,MAAM3C,KAAO2C,EAAM3C,KACvCpK,KAAKsyD,eAAevlD,MAAM1C,IAAM0C,EAAM1C,MAQ1C2zF,sBAAuB,WACrB,IAAKh+F,KAAKlB,OACR,MAAO,CAAEuK,EAAG,EAAGC,EAAG,GAEpB,IAAI20F,EAAkBj+F,KAAKy4F,kBAAoBz4F,KAAKk+F,iBAAmBl+F,KAAKk3F,eACxEmC,EAAar5F,KAAKs5F,qBAAqB2E,GACvCtE,EAAiB35F,KAAKg0F,oBAAoBiK,GAC1C5P,EAAYsL,EAAetL,UAC3BluC,EAAYw5C,EAAex5C,UAC3By5C,EAAa55F,KAAKkwF,qBAAqB7B,EAAWluC,EAAW,YAAcngD,KAAK20B,WAChF+6D,EAAa2J,EAAW3J,WACxB/6E,EAAI3U,KAAK+4B,sBACTrvB,EAAI,CACFL,EAAGgwF,EAAWjvF,KAAOslF,EACrBpmF,EAAG+vF,EAAWhvF,IAAMgvF,EAAWvE,UAAY8E,GAE7C/rC,EAAgB7tD,KAAKlB,OAAOi6C,mBAC5BolD,EAAcn+F,KAAKlB,OAAOs6C,cAC1BglD,EAAmBD,EAAY5+F,MAAQsuD,EACvCwwC,EAAoBF,EAAYh/F,OAAS0uD,EACzCohC,EAAWmP,EAAmBxE,EAC9BtH,EAAY+L,EAAoBzE,EAChClpF,EAASytF,EAAYG,YAAcF,EACnCztF,EAASwtF,EAAYI,aAAeF,EAuBxC,OArBA30F,EAAIrM,EAAOgG,KAAKoG,eAAeC,EAAGiL,IAClCjL,EAAIrM,EAAOgG,KAAKoG,eAAeC,EAAG1J,KAAKlB,OAAOg5C,oBAC5CzuC,GAAKqH,EACPhH,EAAEJ,GAAKqH,EACHjH,EAAEL,EAAI,IACRK,EAAEL,EAAI,GAEJK,EAAEL,EAAI4lF,IACRvlF,EAAEL,EAAI4lF,GAEJvlF,EAAEJ,EAAI,IACRI,EAAEJ,EAAI,GAEJI,EAAEJ,EAAIgpF,IACR5oF,EAAEJ,EAAIgpF,GAIR5oF,EAAEL,GAAKrJ,KAAKlB,OAAOw6C,QAAQlvC,KAC3BV,EAAEJ,GAAKtJ,KAAKlB,OAAOw6C,QAAQjvC,IAEpB,CAAED,KAAMV,EAAEL,EAAI,KAAMgB,IAAKX,EAAEJ,EAAI,KAAMyB,SAAU6uF,EAAa,KAAMA,WAAYA,IAMvFmD,kBAAmB,WACjB/8F,KAAKw+F,YAAc,CACjBrkC,YAAan6D,KAAKm6D,YAClBP,YAAa55D,KAAK45D,YAClBS,cAAer6D,KAAKq6D,cACpBC,cAAet6D,KAAKs6D,cACpBlS,YAAapoD,KAAKooD,YAClB+C,WAAYnrD,KAAKmrD,WACjB7C,cAAetoD,KAAKlB,QAAUkB,KAAKlB,OAAOwpD,cAC1CD,WAAYroD,KAAKlB,QAAUkB,KAAKlB,OAAOupD,aAO3Co2C,qBAAsB,WACfz+F,KAAKw+F,cAIVx+F,KAAKooD,YAAcpoD,KAAKw+F,YAAYp2C,YACpCpoD,KAAKm6D,YAAcn6D,KAAKw+F,YAAYrkC,YACpCn6D,KAAK45D,YAAc55D,KAAKw+F,YAAY5kC,YACpC55D,KAAKmrD,WAAanrD,KAAKw+F,YAAYrzC,WACnCnrD,KAAKq6D,cAAgBr6D,KAAKw+F,YAAYnkC,cACtCr6D,KAAKs6D,cAAgBt6D,KAAKw+F,YAAYlkC,cAElCt6D,KAAKlB,SACPkB,KAAKlB,OAAOwpD,cAAgBtoD,KAAKw+F,YAAYl2C,cAC7CtoD,KAAKlB,OAAOupD,WAAaroD,KAAKw+F,YAAYn2C,cAS9C0O,YAAa,WACX,IAAI2nC,EAAiB1+F,KAAKi9F,kBAAoBj9F,KAAKssF,KAC/Ch6B,EAAiBtyD,KAAKsyD,eAyB1B,OAxBAtyD,KAAK6uD,UAAW,EAChB7uD,KAAKktD,WAAY,EAEjBltD,KAAKu3F,aAAev3F,KAAKk3F,eAErB5kC,IACFA,EAAelc,MAAQkc,EAAelc,OACtCkc,EAAenlD,YAAcmlD,EAAenlD,WAAWC,YAAYklD,IAErEtyD,KAAKsyD,eAAiB,KACtBtyD,KAAK67F,uBACL77F,KAAKy+F,uBACLz+F,KAAKq4F,sBAAwB,EACzBr4F,KAAKq0F,+BACPr0F,KAAKysF,iBACLzsF,KAAKo7C,aAEPp7C,KAAKyD,KAAK,kBACVi7F,GAAiB1+F,KAAKyD,KAAK,YACvBzD,KAAKlB,SACPkB,KAAKlB,OAAOwF,IAAI,aAActE,KAAK86F,kBACnC96F,KAAKlB,OAAO2E,KAAK,sBAAuB,CAAEkO,OAAQ3R,OAClD0+F,GAAiB1+F,KAAKlB,OAAO2E,KAAK,kBAAmB,CAAEkO,OAAQ3R,QAE1DA,MAMT2+F,wBAAyB,WACvB,IAAK,IAAIv6F,KAAQpE,KAAK2jB,OACf3jB,KAAKgtF,WAAW5oF,WACZpE,KAAK2jB,OAAOvf,IAUzBw6F,kBAAmB,SAAS50E,EAAOmB,GACjC,IAMIvnB,EAAGi7F,EANHC,EAAc9+F,KAAKg0F,oBAAoBhqE,GAAO,GAC9C+0E,EAAY/+F,KAAKg0F,oBAAoB7oE,GAAK,GAC1C6zE,EAAYF,EAAYzQ,UACxB4Q,EAAYH,EAAY3+C,UACxB++C,EAAUH,EAAU1Q,UACpB8Q,EAAUJ,EAAU5+C,UAExB,GAAI6+C,IAAcE,EAAS,CAEzB,GAAIl/F,KAAK2jB,OAAOq7E,GACd,IAAKp7F,EAAIq7F,EAAWr7F,EAAI5D,KAAKktF,oBAAoB8R,GAAWl7F,OAAQF,WAC3D5D,KAAK2jB,OAAOq7E,GAAWp7F,GAIlC,GAAI5D,KAAK2jB,OAAOu7E,GACd,IAAKt7F,EAAIu7F,EAASv7F,EAAI5D,KAAKktF,oBAAoBgS,GAASp7F,OAAQF,KAC9Di7F,EAAW7+F,KAAK2jB,OAAOu7E,GAASt7F,MAE9B5D,KAAK2jB,OAAOq7E,KAAeh/F,KAAK2jB,OAAOq7E,GAAa,IACpDh/F,KAAK2jB,OAAOq7E,GAAWC,EAAYr7F,EAAIu7F,GAAWN,GAKxD,IAAKj7F,EAAIo7F,EAAY,EAAGp7F,GAAKs7F,EAASt7F,WAC7B5D,KAAK2jB,OAAO/f,GAGrB5D,KAAKo/F,gBAAgBF,EAASF,EAAYE,QAI1C,GAAIl/F,KAAK2jB,OAAOq7E,GAAY,CAC1BH,EAAW7+F,KAAK2jB,OAAOq7E,GACvB,IAAgCK,EAAa9O,EAAzC9N,EAAO0c,EAAUF,EACrB,IAAKr7F,EAAIq7F,EAAWr7F,EAAIu7F,EAASv7F,WACxBi7F,EAASj7F,GAElB,IAAK2sF,KAASvwF,KAAK2jB,OAAOq7E,IACxBK,EAAch4E,SAASkpE,EAAO,MACX4O,IACjBN,EAASQ,EAAc5c,GAAQoc,EAAStO,UACjCsO,EAAStO,MAY1B6O,gBAAiB,SAAS/Q,EAAWtnE,GAGnC,IAAIu4E,EAAe9/E,EAAMxf,KAAK2jB,QAC9B,IAAK,IAAIoqE,KAAQ/tF,KAAK2jB,OAAQ,CAC5B,IAAI47E,EAAcl4E,SAAS0mE,EAAM,IAC7BwR,EAAclR,IAChBruF,KAAK2jB,OAAO47E,EAAcx4E,GAAUu4E,EAAaC,GAC5CD,EAAaC,EAAcx4E,WACvB/mB,KAAK2jB,OAAO47E,MAM3BhC,sBAAuB,WAChBv9F,KAAKk7F,oBAAqBl7F,KAAKk7F,kBAAkBK,WAChDv7F,KAAK07F,4BAA6B17F,KAAK07F,0BAA0BH,WAErEv7F,KAAKg5F,qBAcTwG,yBAA0B,SAASnR,EAAWluC,EAAWs/C,EAAKC,GAC5D,IAAIC,EACAC,EAAgB,GAChBC,GAAiB,EACjBC,EAAc9/F,KAAKktF,oBAAoBmB,GAAWvqF,SAAWq8C,EASjE,IAAK,IAAIn7C,KAPTy6F,IAAQA,EAAM,GACdz/F,KAAKo/F,gBAAgB/Q,EAAWoR,GAC5Bz/F,KAAK2jB,OAAO0qE,KACdsR,EAAmB3/F,KAAK2jB,OAAO0qE,GAAyB,IAAdluC,EAAkBA,EAAYA,EAAY,IAIpEngD,KAAK2jB,OAAO0qE,GAAY,CACxC,IAAI0R,EAAW14E,SAASriB,EAAO,IAC3B+6F,GAAY5/C,IACd0/C,GAAiB,EACjBD,EAAcG,EAAW5/C,GAAangD,KAAK2jB,OAAO0qE,GAAWrpF,GAEvD86F,GAA6B,IAAd3/C,UACZngD,KAAK2jB,OAAO0qE,GAAWrpF,IAIpC,IAAIg7F,GAAmB,EAavB,IAZIH,IAAmBC,IAGrB9/F,KAAK2jB,OAAO0qE,EAAYoR,GAAOG,EAC/BI,GAAmB,GAEjBA,GAEFP,IAIKA,EAAM,GACPC,GAAeA,EAAYD,EAAM,GACnCz/F,KAAK2jB,OAAO0qE,EAAYoR,GAAO,CAAErJ,EAAG52E,EAAMkgF,EAAYD,EAAM,KAErDE,EACP3/F,KAAK2jB,OAAO0qE,EAAYoR,GAAO,CAAErJ,EAAG52E,EAAMmgF,WAGnC3/F,KAAK2jB,OAAO0qE,EAAYoR,GAEjCA,IAEFz/F,KAAKu0F,kBAAmB,GAU1B0L,sBAAuB,SAAS5R,EAAWluC,EAAW+/C,EAAUR,GACzD1/F,KAAK2jB,SACR3jB,KAAK2jB,OAAS,IAEhB,IAAIw8E,EAA0BngG,KAAK2jB,OAAO0qE,GACtC+R,EAA0BD,EAAoB3gF,EAAM2gF,GAAqB,GAK7E,IAAK,IAAIn7F,KAHTk7F,IAAaA,EAAW,GAGNE,EAAyB,CACzC,IAAIC,EAAeh5E,SAASriB,EAAO,IAC/Bq7F,GAAgBlgD,IAClBggD,EAAkBE,EAAeH,GAAYE,EAAwBC,GAEhED,EAAwBC,EAAeH,WACnCC,EAAkBE,IAK/B,GADArgG,KAAKu0F,kBAAmB,EACpBmL,EACF,KAAOQ,KACArxF,OAAO4kC,KAAKisD,EAAYQ,IAAWp8F,SAGnC9D,KAAK2jB,OAAO0qE,KACfruF,KAAK2jB,OAAO0qE,GAAa,IAE3BruF,KAAK2jB,OAAO0qE,GAAWluC,EAAY+/C,GAAY1gF,EAAMkgF,EAAYQ,UAIrE,GAAKC,EAIL,IADA,IAAIG,EAAWH,EAAkBhgD,EAAYA,EAAY,EAAI,GACtDmgD,GAAYJ,KACjBlgG,KAAK2jB,OAAO0qE,GAAWluC,EAAY+/C,GAAY1gF,EAAM8gF,IAUzDC,oBAAqB,SAASC,EAAcx2E,EAAO01E,GAIjD,IAHA,IAAIe,EAAYzgG,KAAKg0F,oBAAoBhqE,GAAO,GAC5C02E,EAAa,CAAC,GAAIC,EAAc,EAE3B/8F,EAAI,EAAGA,EAAI48F,EAAa18F,OAAQF,IACf,OAApB48F,EAAa58F,GAEf88F,IADAC,GAC0B,EAG1BD,EAAWC,KAIXD,EAAW,GAAK,IAClB1gG,KAAKigG,sBAAsBQ,EAAUpS,UAAWoS,EAAUtgD,UAAWugD,EAAW,GAAIhB,GACpFA,EAAcA,GAAeA,EAAY/zF,MAAM+0F,EAAW,GAAK,IAEjEC,GAAe3gG,KAAKw/F,yBAClBiB,EAAUpS,UAAWoS,EAAUtgD,UAAYugD,EAAW,GAAIC,GAC5D,IAAS/8F,EAAI,EAAGA,EAAI+8F,EAAa/8F,IAC3B88F,EAAW98F,GAAK,EAClB5D,KAAKigG,sBAAsBQ,EAAUpS,UAAYzqF,EAAG,EAAG88F,EAAW98F,GAAI87F,GAE/DA,IACP1/F,KAAK2jB,OAAO88E,EAAUpS,UAAYzqF,GAAG,GAAK87F,EAAY,IAExDA,EAAcA,GAAeA,EAAY/zF,MAAM+0F,EAAW98F,GAAK,GAG7D88F,EAAW98F,GAAK,GAClB5D,KAAKigG,sBAAsBQ,EAAUpS,UAAYzqF,EAAG,EAAG88F,EAAW98F,GAAI87F,IAQ1EkB,8BAA+B,SAAS52E,EAAOmB,EAAK0yE,GAC9CA,GAAgB7zE,GACdmB,IAAQnB,EACVhqB,KAAKs4F,oBAAsB,OAES,UAA7Bt4F,KAAKs4F,sBACZt4F,KAAKs4F,oBAAsB,OAC3Bt4F,KAAKu3F,aAAevtE,GAEtBhqB,KAAKk3F,eAAiB2G,GAEfA,EAAe7zE,GAAS6zE,EAAe1yE,EACb,UAA7BnrB,KAAKs4F,oBACPt4F,KAAKu3F,aAAesG,EAGpB79F,KAAKk3F,eAAiB2G,GAKpB1yE,IAAQnB,EACVhqB,KAAKs4F,oBAAsB,QAES,SAA7Bt4F,KAAKs4F,sBACZt4F,KAAKs4F,oBAAsB,QAC3Bt4F,KAAKk3F,eAAiB/rE,GAExBnrB,KAAKu3F,aAAesG,IAIxBgD,yBAA0B,WACxB,IAAI/8F,EAAS9D,KAAKssF,KAAKxoF,OACnB9D,KAAKk3F,eAAiBpzF,EACxB9D,KAAKk3F,eAAiBpzF,EAEf9D,KAAKk3F,eAAiB,IAC7Bl3F,KAAKk3F,eAAiB,GAEpBl3F,KAAKu3F,aAAezzF,EACtB9D,KAAKu3F,aAAezzF,EAEb9D,KAAKu3F,aAAe,IAC3Bv3F,KAAKu3F,aAAe,MA95B5B,GAq6BAl6F,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOw6F,MAAM/oF,UAAgD,CAIrF+rF,0BAA2B,WAGzB76F,KAAK8gG,iBAAmB,IAAI72E,KAG5BjqB,KAAK+gG,qBAAuB,IAAI92E,KAEhCjqB,KAAKghG,cAAgB,GAErBhhG,KAAKkE,GAAG,YAAalE,KAAKujD,cAO5BA,YAAa,SAAS7/C,GACpB,GAAK1D,KAAKlB,OAAV,CAGAkB,KAAKihG,gBAAkB,IAAIh3E,KAC3B,IAAIi3E,EAAax9F,EAAQqmC,QACrB/pC,KAAKmhG,cAAcD,KACrBlhG,KAAKyD,KAAK,cAAeC,GACzB1D,KAAKohG,WAAW19F,EAAQomC,IAE1B9pC,KAAK+gG,oBAAsB/gG,KAAK8gG,gBAChC9gG,KAAK8gG,gBAAkB9gG,KAAKihG,eAC5BjhG,KAAKghG,cAAgBE,EACrBlhG,KAAKqhG,gBAAkBrhG,KAAKktD,UAC5BltD,KAAKshG,eAAiBthG,KAAK6uD,WAG7BsyC,cAAe,SAASD,GACtB,OAAOlhG,KAAKihG,eAAiBjhG,KAAK8gG,gBAAkB,KAChD9gG,KAAK8gG,gBAAkB9gG,KAAK+gG,oBAAsB,KAClD/gG,KAAKghG,cAAc33F,IAAM63F,EAAW73F,GACpCrJ,KAAKghG,cAAc13F,IAAM43F,EAAW53F,GAM1C83F,WAAY,SAASt3D,GACnBA,EAAE6oB,gBAAkB7oB,EAAE6oB,iBACtB7oB,EAAE+oB,iBAAmB/oB,EAAE+oB,mBAMzB+nC,4BAA6B,WAC3B56F,KAAKuhG,uBACLvhG,KAAKwhG,qBACLxhG,KAAKyhG,cAMPC,mBAAoB,SAASh+F,GACtB1D,KAAKktD,WAGVltD,KAAKw8F,WAAWx8F,KAAKm9F,6BAA6Bz5F,EAAQomC,KAM5D63D,mBAAoB,SAASj+F,GACtB1D,KAAKktD,WAGVltD,KAAK28F,WAAW38F,KAAKm9F,6BAA6Bz5F,EAAQomC,KAM5D23D,WAAY,WACVzhG,KAAKkE,GAAG,gBAAiBlE,KAAK0hG,oBAC9B1hG,KAAKkE,GAAG,cAAelE,KAAK2hG,qBAW9BC,kBAAmB,SAASl+F,IACrB1D,KAAKlB,SAAWkB,KAAK83F,UAAap0F,EAAQomC,EAAEkmB,QAA+B,IAArBtsD,EAAQomC,EAAEkmB,SAIrEhwD,KAAK65F,eAAgB,EAEjB75F,KAAK6uD,WACP7uD,KAAKy4F,mBAAoB,EACzBz4F,KAAK6hG,iBAAiBn+F,EAAQomC,IAG5B9pC,KAAKktD,YACPltD,KAAKs9F,4BAA8Bt9F,KAAKk3F,eACpCl3F,KAAKk3F,iBAAmBl3F,KAAKu3F,cAC/Bv3F,KAAK67F,uBAEP77F,KAAKk5F,6BAST4I,wBAAyB,SAASp+F,IAC3B1D,KAAKlB,SAAWkB,KAAK83F,UAAap0F,EAAQomC,EAAEkmB,QAA+B,IAArBtsD,EAAQomC,EAAEkmB,SAKrEhwD,KAAK6uD,SAAW7uD,OAASA,KAAKlB,OAAOk8C,gBAMvCumD,qBAAsB,WACpBvhG,KAAKkE,GAAG,YAAalE,KAAK4hG,mBAC1B5hG,KAAKkE,GAAG,mBAAoBlE,KAAK8hG,0BAMnCN,mBAAoB,WAClBxhG,KAAKkE,GAAG,UAAWlE,KAAKmxC,iBAO1BA,eAAgB,SAASztC,GAEvB,GADA1D,KAAK65F,eAAgB,KAChB75F,KAAK83F,UAAY93F,KAAKm7C,OACxBz3C,EAAQqG,WAAarG,EAAQqG,UAAUsgC,iBACvC3mC,EAAQomC,EAAEkmB,QAA+B,IAArBtsD,EAAQomC,EAAEkmB,QAFjC,CAMA,GAAIhwD,KAAKlB,OAAQ,CACf,IAAIijG,EAAgB/hG,KAAKlB,OAAOk8C,cAChC,GAAI+mD,GAAiBA,IAAkB/hG,KAIrC,OAIAA,KAAKshG,iBAAmBthG,KAAK4rD,UAC/B5rD,KAAK6uD,UAAW,EAChB7uD,KAAKshG,gBAAiB,EACtBthG,KAAK48F,aAAal5F,EAAQomC,GACtB9pC,KAAKk3F,iBAAmBl3F,KAAKu3F,aAC/Bv3F,KAAKg5F,mBAAkB,GAGvBh5F,KAAKk5F,2BAIPl5F,KAAK6uD,UAAW,IAQpBgzC,iBAAkB,SAAS/3D,GACzB,IAAI+zD,EAAe79F,KAAKm9F,6BAA6BrzD,GACjD9f,EAAQhqB,KAAKk3F,eAAgB/rE,EAAMnrB,KAAKu3F,aACxCztD,EAAEiiB,SACJ/rD,KAAK4gG,8BAA8B52E,EAAOmB,EAAK0yE,IAG/C79F,KAAKk3F,eAAiB2G,EACtB79F,KAAKu3F,aAAesG,GAElB79F,KAAKktD,YACPltD,KAAK84F,wBACL94F,KAAK+4F,oBASToE,6BAA8B,SAASrzD,GAUrC,IATA,IAAIk4D,EAAchiG,KAAK8hE,gBAAgBh4B,GACnCm4D,EAAY,EACZ1iG,EAAQ,EACRJ,EAAS,EACTghD,EAAY,EACZkuC,EAAY,EAIPzqF,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,GAC5C1E,GAAU6iG,EAAY14F,EAD2B1F,IAEnDzE,GAAUa,KAAKgwF,gBAAgBpsF,GAAK5D,KAAK2Q,OACzC09E,EAAYzqF,EACRA,EAAI,IACNu8C,GAAangD,KAAKgtF,WAAWppF,EAAI,GAAGE,OAAS9D,KAAKsuF,qBAAqB1qF,EAAI,IAQjFrE,EADiBS,KAAKiwF,mBAAmB5B,GAChBruF,KAAK0Q,OAE9B,IAAK,IAAIsI,EAAI,EAAGC,EADTjZ,KAAKgtF,WAAWqB,GACKvqF,OAAQkV,EAAIC,IACtCgpF,EAAY1iG,GAEZA,GAASS,KAAKmsF,aAAakC,GAAWr1E,GAAGo1E,YAAcpuF,KAAK0Q,SAC/CsxF,EAAY34F,GAJmB2P,IAK1CmnC,IAMJ,OAAOngD,KAAKkiG,gCAAgCF,EAAaC,EAAW1iG,EAAO4gD,EAAWlnC,IAMxFipF,gCAAiC,SAASF,EAAaC,EAAW1iG,EAAOyF,EAAOiU,GAE9E,IAAIkpF,EAA+BH,EAAY34F,EAAI44F,EAC/CG,EAA+B7iG,EAAQyiG,EAAY34F,EAGnDozF,EAAoBz3F,GAFXo9F,EAA+BD,GACtCC,EAA+B,EAAI,EAAI,GAW7C,OARIpiG,KAAKoR,QACPqrF,EAAoBxjF,EAAOwjF,GAGzBA,EAAoBz8F,KAAKotF,MAAMtpF,SACjC24F,EAAoBz8F,KAAKotF,MAAMtpF,QAG1B24F,KAKXp/F,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAOw6F,MAAM/oF,UAAgD,CAKrFguF,mBAAoB,WAClB98F,KAAKsyD,eAAiBj1D,EAAOG,SAASsP,cAAc,YACpD9M,KAAKsyD,eAAe3tC,aAAa,iBAAkB,OACnD3kB,KAAKsyD,eAAe3tC,aAAa,cAAe,OAChD3kB,KAAKsyD,eAAe3tC,aAAa,eAAgB,OACjD3kB,KAAKsyD,eAAe3tC,aAAa,aAAc,SAC/C3kB,KAAKsyD,eAAe3tC,aAAa,6BAA8B,IAC/D3kB,KAAKsyD,eAAe3tC,aAAa,OAAQ,OACzC,IAAI5X,EAAQ/M,KAAKg+F,wBAGjBh+F,KAAKsyD,eAAevlD,MAAM8W,QAAU,4BAA8B9W,EAAM1C,IACxE,WAAa0C,EAAM3C,KADiB,2FAEjB2C,EAAMhC,SAAW,IACpC1N,EAAOG,SAASsnB,KAAK7X,YAAYjN,KAAKsyD,gBAEtCj1D,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,UAAWtyD,KAAKqiG,UAAUjrD,KAAKp3C,OAC5E3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,QAAStyD,KAAKsiG,QAAQlrD,KAAKp3C,OACxE3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,QAAStyD,KAAKuiG,QAAQnrD,KAAKp3C,OACxE3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,OAAQtyD,KAAKwiG,KAAKprD,KAAKp3C,OACpE3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,MAAOtyD,KAAKwiG,KAAKprD,KAAKp3C,OACnE3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,QAAStyD,KAAKyiG,MAAMrrD,KAAKp3C,OACtE3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,mBAAoBtyD,KAAK0iG,mBAAmBtrD,KAAKp3C,OAC9F3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,oBAAqBtyD,KAAK2iG,oBAAoBvrD,KAAKp3C,OAChG3C,EAAOgG,KAAKye,YAAY9hB,KAAKsyD,eAAgB,iBAAkBtyD,KAAK4iG,iBAAiBxrD,KAAKp3C,QAErFA,KAAK6iG,0BAA4B7iG,KAAKlB,SACzCzB,EAAOgG,KAAKye,YAAY9hB,KAAKlB,OAAOs6C,cAAe,QAASp5C,KAAK8iG,QAAQ1rD,KAAKp3C,OAC9EA,KAAK6iG,0BAA2B,IAepCE,QAAS,CACPC,EAAI,cACJC,GAAI,cACJC,GAAI,eACJC,GAAI,iBACJC,GAAI,kBACJC,GAAI,iBACJC,GAAI,iBACJC,GAAI,eACJC,GAAI,kBACJC,GAAI,kBAMNC,cAAe,CACbC,GAAI,OACJC,GAAI,OAMNC,gBAAiB,CACfC,GAAI,aAGNhB,QAAS,WAEP9iG,KAAKsyD,gBAAkBtyD,KAAKsyD,eAAeC,SAQ7C8vC,UAAW,SAASv4D,GAClB,GAAK9pC,KAAKktD,UAAV,CAGA,GAAIpjB,EAAEi6D,WAAW/jG,KAAK+iG,QACpB/iG,KAAKA,KAAK+iG,QAAQj5D,EAAEi6D,UAAUj6D,OAE3B,MAAKA,EAAEi6D,WAAW/jG,KAAK6jG,mBAAqB/5D,EAAEk6D,UAAWl6D,EAAEm6D,QAI9D,OAHAjkG,KAAKA,KAAK6jG,gBAAgB/5D,EAAEi6D,UAAUj6D,GAKxCA,EAAEo6D,2BACFp6D,EAAE6oB,iBACE7oB,EAAEi6D,SAAW,IAAMj6D,EAAEi6D,SAAW,IAElC/jG,KAAKy4F,mBAAoB,EACzBz4F,KAAK4vD,kBACL5vD,KAAKk5F,2BAGLl5F,KAAKlB,QAAUkB,KAAKlB,OAAO+F,qBAU/By9F,QAAS,SAASx4D,IACX9pC,KAAKktD,WAAaltD,KAAKmkG,WAAankG,KAAKy4F,kBAC5Cz4F,KAAKmkG,WAAY,EAGdr6D,EAAEi6D,WAAW/jG,KAAK0jG,gBAAmB55D,EAAEk6D,SAAWl6D,EAAEm6D,WACvDjkG,KAAKA,KAAK0jG,cAAc55D,EAAEi6D,UAAUj6D,GAKtCA,EAAEo6D,2BACFp6D,EAAE6oB,iBACF3yD,KAAKlB,QAAUkB,KAAKlB,OAAO+F,qBAO7B09F,QAAS,SAASz4D,GAChB,IAAIs6D,EAAYpkG,KAAKokG,UAGrB,GAFApkG,KAAKokG,WAAY,EACjBt6D,GAAKA,EAAE+oB,kBACF7yD,KAAKktD,UAAV,CAIA,IAGIm3C,EAAa7D,EAIbd,EAAa4E,EAAYC,EAPzBC,EAAWxkG,KAAK8sF,oBAAoB9sF,KAAKsyD,eAAeruD,OAAOopF,aAC/DoX,EAAYzkG,KAAKotF,MAAMtpF,OACvB4gG,EAAgBF,EAAS1gG,OAEzB6gG,EAAWD,EAAgBD,EAC3BvN,EAAiBl3F,KAAKk3F,eAAgBK,EAAev3F,KAAKu3F,aAC1D3vC,EAAYsvC,IAAmBK,EAEnC,GAAkC,KAA9Bv3F,KAAKsyD,eAAeruD,MAQtB,OAPAjE,KAAK2jB,OAAS,GACd3jB,KAAK+9F,qBACL/9F,KAAKyD,KAAK,gBACNzD,KAAKlB,SACPkB,KAAKlB,OAAO2E,KAAK,eAAgB,CAAEkO,OAAQ3R,OAC3CA,KAAKlB,OAAO+F,qBAKhB,IAAI+/F,EAAoB5kG,KAAKw9F,8BAC3Bx9F,KAAKsyD,eAAe4kC,eACpBl3F,KAAKsyD,eAAeilC,aACpBv3F,KAAKsyD,eAAeruD,OAElB4gG,EAAa3N,EAAiB0N,EAAkB1N,eAEhDtvC,GACFy8C,EAAcrkG,KAAKotF,MAAMzhF,MAAMurF,EAAgBK,GAC/CoN,GAAYpN,EAAeL,GAEpBwN,EAAgBD,IAErBJ,EADEQ,EACY7kG,KAAKotF,MAAMzhF,MAAM4rF,EAAeoN,EAAUpN,GAG1Cv3F,KAAKotF,MAAMzhF,MAAMurF,EAAgBA,EAAiByN,IAGpEnE,EAAegE,EAAS74F,MAAMi5F,EAAkBrN,aAAeoN,EAAUC,EAAkBrN,cACvF8M,GAAeA,EAAYvgG,SACzB08F,EAAa18F,SAIf47F,EAAc1/F,KAAKo3F,mBAAmBF,EAAgBA,EAAiB,GAAG,GAE1EwI,EAAcc,EAAahtF,KAAI,WAG7B,OAAOksF,EAAY,OAGnB93C,GACF08C,EAAapN,EACbqN,EAAWhN,GAEJsN,GAEPP,EAAa/M,EAAe8M,EAAYvgG,OACxCygG,EAAWhN,IAGX+M,EAAa/M,EACbgN,EAAWhN,EAAe8M,EAAYvgG,QAExC9D,KAAK4+F,kBAAkB0F,EAAYC,IAEjC/D,EAAa18F,SACXsgG,GAAa5D,EAAa9sF,KAAK,MAAQrW,EAAOynG,aAAeznG,EAAOwE,wBACtE69F,EAAcriG,EAAO0nG,iBAEvB/kG,KAAKugG,oBAAoBC,EAActJ,EAAgBwI,IAEzD1/F,KAAK+9F,qBACL/9F,KAAKyD,KAAK,WACNzD,KAAKlB,SACPkB,KAAKlB,OAAO2E,KAAK,eAAgB,CAAEkO,OAAQ3R,OAC3CA,KAAKlB,OAAO+F,sBAMhB69F,mBAAoB,WAClB1iG,KAAKy4F,mBAAoB,GAM3BmK,iBAAkB,WAChB5iG,KAAKy4F,mBAAoB,GAM3BkK,oBAAqB,SAAS74D,GAC5B9pC,KAAKk+F,iBAAmBp0D,EAAEn4B,OAAOulF,eACjCl3F,KAAKglG,eAAiBl7D,EAAEn4B,OAAO4lF,aAC/Bv3F,KAAK89F,0BAOP0E,KAAM,WACAxiG,KAAKk3F,iBAAmBl3F,KAAKu3F,eAKjCl6F,EAAOynG,WAAa9kG,KAAKg8F,kBACpB3+F,EAAOwE,sBAIVxE,EAAO0nG,gBAAkB,KAHzB1nG,EAAO0nG,gBAAkB/kG,KAAKo3F,mBAAmBp3F,KAAKk3F,eAAgBl3F,KAAKu3F,cAAc,GAK3Fv3F,KAAKmkG,WAAY,IAOnB1B,MAAO,WACLziG,KAAKokG,WAAY,GAQnBa,kBAAmB,SAASn7D,GAC1B,OAAQA,GAAKA,EAAEo7D,eAAkB7nG,EAAOI,OAAOynG,eAUjDC,sBAAuB,SAAS9W,EAAWluC,GACzC,IAA4D5hC,EAAxD6mF,EAAoBplG,KAAKiwF,mBAAmB5B,GAMhD,OAJIluC,EAAY,IAEdilD,IADA7mF,EAAQve,KAAKmsF,aAAakC,GAAWluC,EAAY,IACtB/1C,KAAOmU,EAAMhf,OAEnC6lG,GASTC,oBAAqB,SAASv7D,EAAGw7D,GAC/B,IAAIC,EAAgBvlG,KAAKwlG,uBAAuB17D,EAAGw7D,GAC/C3L,EAAiB35F,KAAKg0F,oBAAoBuR,GAC1ClX,EAAYsL,EAAetL,UAE/B,GAAIA,IAAcruF,KAAKgtF,WAAWlpF,OAAS,GAAKgmC,EAAEm6D,SAAyB,KAAdn6D,EAAEi6D,QAE7D,OAAO/jG,KAAKotF,MAAMtpF,OAASyhG,EAE7B,IAAIplD,EAAYw5C,EAAex5C,UAC3BilD,EAAoBplG,KAAKmlG,sBAAsB9W,EAAWluC,GAC1DslD,EAAmBzlG,KAAK0lG,gBAAgBrX,EAAY,EAAG+W,GAE3D,OADsBplG,KAAKgtF,WAAWqB,GAAW1iF,MAAMw0C,GAChCr8C,OAAS2hG,EAAmB,EAAIzlG,KAAKsuF,qBAAqBD,IAUnFmX,uBAAwB,SAAS17D,EAAGw7D,GAClC,OAAIx7D,EAAEiiB,UAAY/rD,KAAKk3F,iBAAmBl3F,KAAKu3F,cAAgB+N,EACtDtlG,KAAKu3F,aAGLv3F,KAAKk3F,gBAShByO,kBAAmB,SAAS77D,EAAGw7D,GAC7B,IAAIC,EAAgBvlG,KAAKwlG,uBAAuB17D,EAAGw7D,GAC/C3L,EAAiB35F,KAAKg0F,oBAAoBuR,GAC1ClX,EAAYsL,EAAetL,UAC/B,GAAkB,IAAdA,GAAmBvkD,EAAEm6D,SAAyB,KAAdn6D,EAAEi6D,QAEpC,OAAQwB,EAEV,IAAIplD,EAAYw5C,EAAex5C,UAC3BilD,EAAoBplG,KAAKmlG,sBAAsB9W,EAAWluC,GAC1DslD,EAAmBzlG,KAAK0lG,gBAAgBrX,EAAY,EAAG+W,GACvDQ,EAAmB5lG,KAAKgtF,WAAWqB,GAAW1iF,MAAM,EAAGw0C,GACvDmuC,EAAuBtuF,KAAKsuF,qBAAqBD,EAAY,GAEjE,OAAQruF,KAAKgtF,WAAWqB,EAAY,GAAGvqF,OACpC2hG,EAAmBG,EAAiB9hG,QAAU,EAAIwqF,IAOvDoX,gBAAiB,SAASrX,EAAW9uF,GAOnC,IALA,IAGqBsmG,EAAWC,EAH5B/X,EAAO/tF,KAAKgtF,WAAWqB,GAEvB0X,EADiB/lG,KAAKiwF,mBAAmB5B,GAEzC2X,EAAc,EAEThtF,EAAI,EAAGC,EAAO80E,EAAKjqF,OAAQkV,EAAIC,EAAMD,IAG5C,IADA+sF,GADAF,EAAY7lG,KAAKmsF,aAAakC,GAAWr1E,GAAGzZ,OAEnBA,EAAO,CAC9BumG,GAAa,EACb,IAAIG,EAAWF,EAAqBF,EAChCK,EAAYH,EACZI,EAAqB1+F,KAAKmP,IAAIqvF,EAAW1mG,GAG7CymG,EAF0Bv+F,KAAKmP,IAAIsvF,EAAY3mG,GAEX4mG,EAAqBntF,EAAKA,EAAI,EAClE,MASJ,OAJK8sF,IACHE,EAAcjY,EAAKjqF,OAAS,GAGvBkiG,GAQTI,eAAgB,SAASt8D,GACnB9pC,KAAKk3F,gBAAkBl3F,KAAKotF,MAAMtpF,QAAU9D,KAAKu3F,cAAgBv3F,KAAKotF,MAAMtpF,QAGhF9D,KAAKqmG,oBAAoB,OAAQv8D,IAOnCw8D,aAAc,SAASx8D,GACO,IAAxB9pC,KAAKk3F,gBAA8C,IAAtBl3F,KAAKu3F,cAGtCv3F,KAAKqmG,oBAAoB,KAAMv8D,IAQjCu8D,oBAAqB,SAAS9J,EAAWzyD,GAGvC,IACI/iB,EAAS/mB,KADA,MAAQu8F,EAAY,gBACPzyD,EAAgC,UAA7B9pC,KAAKs4F,qBAC9BxuD,EAAEiiB,SACJ/rD,KAAKumG,oBAAoBx/E,GAGzB/mB,KAAKwmG,uBAAuBz/E,GAEf,IAAXA,IACF/mB,KAAK6gG,2BACL7gG,KAAK67F,uBACL77F,KAAKq4F,sBAAwB,EAC7Br4F,KAAKg5F,oBACLh5F,KAAK84F,wBACL94F,KAAK+4F,oBAQTwN,oBAAqB,SAASx/E,GAC5B,IAAI82E,EAA4C,SAA7B79F,KAAKs4F,oBACpBt4F,KAAKk3F,eAAiBnwE,EACtB/mB,KAAKu3F,aAAexwE,EAExB,OADA/mB,KAAK4gG,8BAA8B5gG,KAAKk3F,eAAgBl3F,KAAKu3F,aAAcsG,GACzD,IAAX92E,GAOTy/E,uBAAwB,SAASz/E,GAS/B,OARIA,EAAS,GACX/mB,KAAKk3F,gBAAkBnwE,EACvB/mB,KAAKu3F,aAAev3F,KAAKk3F,iBAGzBl3F,KAAKu3F,cAAgBxwE,EACrB/mB,KAAKk3F,eAAiBl3F,KAAKu3F,cAEX,IAAXxwE,GAOT0/E,eAAgB,SAAS38D,GACK,IAAxB9pC,KAAKk3F,gBAA8C,IAAtBl3F,KAAKu3F,cAGtCv3F,KAAK0mG,uBAAuB,OAAQ58D,IAOtC68D,MAAO,SAAS78D,EAAG1lC,EAAMm4F,GACvB,IAAInxD,EACJ,GAAItB,EAAEwhB,OACJlgB,EAAWprC,KAAK,mBAAqBu8F,GAAWv8F,KAAKoE,QAElD,KAAI0lC,EAAEm6D,SAAyB,KAAdn6D,EAAEi6D,SAAiC,KAAdj6D,EAAEi6D,QAK3C,OADA/jG,KAAKoE,IAAuB,SAAdm4F,GAAwB,EAAI,GACnC,EAJPnxD,EAAWprC,KAAK,mBAAqBu8F,GAAWv8F,KAAKoE,IAMvD,QAAwBsI,WAAb0+B,GAA0BprC,KAAKoE,KAAUgnC,EAElD,OADAprC,KAAKoE,GAAQgnC,GACN,GAOXw7D,UAAW,SAAS98D,EAAG1lC,GACrB,OAAOpE,KAAK2mG,MAAM78D,EAAG1lC,EAAM,SAM7ByiG,WAAY,SAAS/8D,EAAG1lC,GACtB,OAAOpE,KAAK2mG,MAAM78D,EAAG1lC,EAAM,UAO7B0iG,2BAA4B,SAASh9D,GACnC,IAAIi9D,GAAS,EAUb,OATA/mG,KAAKs4F,oBAAsB,OAIvBt4F,KAAKu3F,eAAiBv3F,KAAKk3F,gBAA0C,IAAxBl3F,KAAKk3F,iBACpD6P,EAAS/mG,KAAK4mG,UAAU98D,EAAG,mBAG7B9pC,KAAKu3F,aAAev3F,KAAKk3F,eAClB6P,GAOTC,wBAAyB,SAASl9D,GAChC,MAAiC,UAA7B9pC,KAAKs4F,qBAAmCt4F,KAAKk3F,iBAAmBl3F,KAAKu3F,aAChEv3F,KAAK4mG,UAAU98D,EAAG,gBAEM,IAAxB9pC,KAAKk3F,gBACZl3F,KAAKs4F,oBAAsB,OACpBt4F,KAAK4mG,UAAU98D,EAAG,wBAFtB,GAUPm9D,gBAAiB,SAASn9D,GACpB9pC,KAAKk3F,gBAAkBl3F,KAAKotF,MAAMtpF,QAAU9D,KAAKu3F,cAAgBv3F,KAAKotF,MAAMtpF,QAGhF9D,KAAK0mG,uBAAuB,QAAS58D,IAQvC48D,uBAAwB,SAASnK,EAAWzyD,GAC1C,IAAIgH,EAAa,aAAeyrD,EAAY,OAC5Cv8F,KAAKq4F,sBAAwB,EAEzBvuD,EAAEiiB,SACJjb,GAAc,QAGdA,GAAc,WAEZ9wC,KAAK8wC,GAAYhH,KACnB9pC,KAAK67F,uBACL77F,KAAKg5F,oBACLh5F,KAAK84F,wBACL94F,KAAK+4F,oBAQTmO,yBAA0B,SAASp9D,GACjC,MAAiC,SAA7B9pC,KAAKs4F,qBAAkCt4F,KAAKk3F,iBAAmBl3F,KAAKu3F,aAC/Dv3F,KAAK6mG,WAAW/8D,EAAG,kBAEnB9pC,KAAKu3F,eAAiBv3F,KAAKotF,MAAMtpF,QACxC9D,KAAKs4F,oBAAsB,QACpBt4F,KAAK6mG,WAAW/8D,EAAG,sBAFvB,GAUPq9D,4BAA6B,SAASr9D,GACpC,IAAIs9D,GAAU,EAUd,OATApnG,KAAKs4F,oBAAsB,QAEvBt4F,KAAKk3F,iBAAmBl3F,KAAKu3F,cAC/B6P,EAAUpnG,KAAK6mG,WAAW/8D,EAAG,kBAC7B9pC,KAAKu3F,aAAev3F,KAAKk3F,gBAGzBl3F,KAAKk3F,eAAiBl3F,KAAKu3F,aAEtB6P,GAUTC,YAAa,SAASr9E,EAAOmB,GACR,qBAARA,IACTA,EAAMnB,EAAQ,GAEhBhqB,KAAK4+F,kBAAkB50E,EAAOmB,GAC9BnrB,KAAKotF,MAAMjoF,OAAO6kB,EAAOmB,EAAMnB,GAC/BhqB,KAAKssF,KAAOtsF,KAAKotF,MAAM15E,KAAK,IAC5B1T,KAAKwG,IAAI,SAAS,GACdxG,KAAKq0F,+BACPr0F,KAAKysF,iBACLzsF,KAAKo7C,aAEPp7C,KAAK2+F,2BAeP2I,YAAa,SAAShb,EAAMv/E,EAAOid,EAAOmB,GACrB,qBAARA,IACTA,EAAMnB,GAEJmB,EAAMnB,GACRhqB,KAAK4+F,kBAAkB50E,EAAOmB,GAEhC,IAAI5K,EAAYljB,EAAOgG,KAAKkI,OAAO6U,cAAcksE,GACjDtsF,KAAKugG,oBAAoBhgF,EAAWyJ,EAAOjd,GAC3C/M,KAAKotF,MAAQ,GAAGxnF,OAAO5F,KAAKotF,MAAMzhF,MAAM,EAAGqe,GAAQzJ,EAAWvgB,KAAKotF,MAAMzhF,MAAMwf,IAC/EnrB,KAAKssF,KAAOtsF,KAAKotF,MAAM15E,KAAK,IAC5B1T,KAAKwG,IAAI,SAAS,GACdxG,KAAKq0F,+BACPr0F,KAAKysF,iBACLzsF,KAAKo7C,aAEPp7C,KAAK2+F,6BAOT,WACE,IAAIl0F,EAAUpN,EAAOgG,KAAKoH,QACtB88F,EAAsB,OAE1BlqG,EAAOgG,KAAK0B,OAAOqa,OAAO/hB,EAAO6N,KAAK4D,UAA+C,CAOnFu5D,OAAQ,WACN,IAAIsc,EAAU3kF,KAAKwnG,wBACfC,EAAYznG,KAAK0nG,iBAAiB/iB,EAAQgjB,QAAShjB,EAAQijB,UAC/D,OAAO5nG,KAAK6nG,kBAAkBJ,IAQhC3zD,MAAO,SAASxmC,GACd,OAAOtN,KAAKooE,qBACVpoE,KAAKqoE,SACL,CAAE/6D,QAASA,EAASo7D,SAAS,EAAMG,YAAY,KAOnD2+B,sBAAuB,WACrB,MAAO,CACLI,UAAW5nG,KAAKT,MAAQ,EACxBooG,SAAU3nG,KAAKb,OAAS,EACxB2oG,QAAS9nG,KAAKgwF,gBAAgB,KAOlC6X,kBAAmB,SAASJ,GAC1B,IACI//B,EAAiB1nE,KAAK2nE,qBAAqB3nE,MAC/C,MAAO,CACLynG,EAAUv/B,YAAYx0D,KAAK,IAC3B,kCACC1T,KAAK6S,WAAa,gBAAkB7S,KAAK6S,WAAWkN,QAAQ,KAAM,KAAQ,KAAO,GACjF/f,KAAK+K,SAAW,cAAgB/K,KAAK+K,SAAW,KAAO,GACvD/K,KAAKy0B,UAAY,eAAiBz0B,KAAKy0B,UAAY,KAAO,GAC1Dz0B,KAAK00B,WAAa,gBAAkB10B,KAAK00B,WAAa,KAAO,GAC7DgzC,EAAiB,oBAAsBA,EAAiB,KAAO,GAChE,UAAW1nE,KAAKonE,cAVH,GAU2B,IAAKpnE,KAAKgpE,gBAAiB,KACnEy+B,EAAUM,UAAUr0F,KAAK,IACzB,cAUJg0F,iBAAkB,SAASM,EAAeC,GACxC,IAE4B9N,EAFxB4N,EAAY,GACZ7/B,EAAc,GACd/oE,EAAS6oG,EAEbhoG,KAAKioE,UAAUC,GAGf,IAAK,IAAItkE,EAAI,EAAGC,EAAM7D,KAAKgtF,WAAWlpF,OAAQF,EAAIC,EAAKD,IACrDu2F,EAAan6F,KAAKiwF,mBAAmBrsF,IACjC5D,KAAK6rF,qBAAuB7rF,KAAKovF,SAAS,sBAAuBxrF,KACnE5D,KAAKkoG,kBAAkBhgC,EAAatkE,EAAGqkG,EAAiB9N,EAAYh7F,GAEtEa,KAAKmoG,oBAAoBJ,EAAWnkG,EAAGqkG,EAAiB9N,EAAYh7F,GACpEA,GAAUa,KAAKgwF,gBAAgBpsF,GAGjC,MAAO,CACLmkG,UAAWA,EACX7/B,YAAaA,IAOjBkgC,oBAAqB,SAAS7X,EAAO8X,EAAWj+F,EAAMC,GACpD,IAAIi+F,EAAsB/X,IAAUA,EAAMtzE,QAAUszE,EAAM/zE,MAAM+qF,GAC5DgB,EAAavoG,KAAKunE,iBAAiB8gC,EAAWC,GAC9CE,EAAaD,EAAa,UAAYA,EAAa,IAAM,GACzDl5F,EAAKg5F,EAAUzgC,OAAQ6gC,EAAS,GAChCh1F,EAAsBpW,EAAOwR,OAAO4E,oBAIxC,OAHIpE,IACFo5F,EAAS,QAAUh+F,EAAQ4E,EAAIoE,GAAuB,MAEjD,CACL,aAAchJ,EAAQL,EAAMqJ,GAAsB,QAClDhJ,EAAQJ,EAAKoJ,GAAsB,KAAMg1F,EACzCD,EAAY,IACZnrG,EAAOgG,KAAKkI,OAAO4U,UAAUowE,GAC7B,YACA78E,KAAK,KAGTy0F,oBAAqB,SAASJ,EAAW1Z,EAAW4Z,EAAgBD,GAElE,IAEItV,EACAC,EAEAnD,EAASziF,EAGT6lF,EARAj+D,EAAa30B,KAAKgwF,gBAAgB3B,GAClCwE,GAAmD,IAAvC7yF,KAAKyrF,UAAUroF,QAAQ,WAGnC0vF,EAAgB,GAEhB/C,EAAW,EACXhC,EAAO/tF,KAAKgtF,WAAWqB,GAG3B2Z,GAAiBrzE,GAAc,EAAI30B,KAAK8rF,mBAAqB9rF,KAAK20B,WAClE,IAAK,IAAI/wB,EAAI,EAAGC,EAAMkqF,EAAKjqF,OAAS,EAAGF,GAAKC,EAAKD,IAC/CgvF,EAAehvF,IAAMC,GAAO7D,KAAKgsF,YACjC8G,GAAiB/E,EAAKnqF,GACtB4rF,EAAUxvF,KAAKmsF,aAAakC,GAAWzqF,GACtB,IAAbmsF,GACFkY,GAAkBzY,EAAQpB,YAAcoB,EAAQjwF,MAChDwwF,GAAYP,EAAQjwF,OAGpBwwF,GAAYP,EAAQpB,YAElByE,IAAcD,GACZ5yF,KAAKorF,eAAe3nE,KAAKsqE,EAAKnqF,MAChCgvF,GAAe,GAGdA,IAEHF,EAAcA,GAAe1yF,KAAKkyF,4BAA4B7D,EAAWzqF,GACzE+uF,EAAY3yF,KAAKkyF,4BAA4B7D,EAAWzqF,EAAI,GAC5DgvF,EAAe5yF,KAAKm0F,uBAAuBzB,EAAaC,IAEtDC,IACF7lF,EAAQ/M,KAAKszF,qBAAqBjF,EAAWzqF,IAAM,GACnDmkG,EAAU1jG,KAAKrE,KAAKooG,oBAAoBtV,EAAe/lF,EAAOk7F,EAAgBD,IAC9ElV,EAAgB,GAChBJ,EAAcC,EACdsV,GAAkBlY,EAClBA,EAAW,IAKjB2Y,gBAAiB,SAASxgC,EAAa78C,EAAOjhB,EAAMC,EAAK9K,EAAOJ,GAC9D,IAAIsU,EAAsBpW,EAAOwR,OAAO4E,oBACxCy0D,EAAY7jE,KACV,aACArE,KAAKmoE,mBAAmB98C,GACxB,OACA5gB,EAAQL,EAAMqJ,GACd,QACAhJ,EAAQJ,EAAKoJ,GACb,YACAhJ,EAAQlL,EAAOkU,GACf,aACAhJ,EAAQtL,EAAQsU,GAChB,gBAGJy0F,kBAAmB,SAAShgC,EAAatkE,EAAG8rF,EAAYsY,GAOtD,IANA,IAIIxY,EAASC,EAJT1B,EAAO/tF,KAAKgtF,WAAWppF,GACvByrF,EAAervF,KAAKgwF,gBAAgBpsF,GAAK5D,KAAK20B,WAC9Co7D,EAAW,EACXD,EAAW,EAEXP,EAAYvvF,KAAKkwF,qBAAqBtsF,EAAG,EAAG,uBACvCoV,EAAI,EAAGC,EAAO80E,EAAKjqF,OAAQkV,EAAIC,EAAMD,IAC5Cw2E,EAAUxvF,KAAKmsF,aAAavoF,GAAGoV,IAC/By2E,EAAezvF,KAAKkwF,qBAAqBtsF,EAAGoV,EAAG,0BAC1Bu2E,GACnBA,GAAavvF,KAAK0oG,gBAAgBxgC,EAAaqnB,EAAWG,EAAaI,EACrEkY,EAAejY,EAAUV,GAC3BS,EAAWN,EAAQplF,KACnB2lF,EAAWP,EAAQjwF,MACnBgwF,EAAYE,GAGZM,GAAYP,EAAQpB,YAGxBqB,GAAgBzvF,KAAK0oG,gBAAgBxgC,EAAaunB,EAAcC,EAAaI,EAC3EkY,EAAejY,EAAUV,IAW7BlnB,mBAAoB,SAASlkE,GAC3B,IAAI0kG,EAAa1kG,GAA0B,kBAAVA,EAAsB,IAAI5G,EAAOquB,MAAMznB,GAAS,GACjF,OAAK0kG,GAAcA,EAAUh9E,aAAwC,IAAzBg9E,EAAUjzE,WAG/C,YAAcizE,EAAUjzE,WAAa,WAAaizE,EAAUlzE,SAAS,GAAGsH,QAAU,IAFhF,SAAW94B,EAAQ,KAQ9B2kG,qBAAsB,SAASva,GAE7B,IADA,IAAuBwa,EAAnBjZ,EAAgB,EACX52E,EAAI,EAAGA,EAAIq1E,EAAWr1E,IAC7B42E,GAAiB5vF,KAAKgwF,gBAAgBh3E,GAGxC,OADA6vF,EAAa7oG,KAAKgwF,gBAAgBh3E,GAC3B,CACL8uF,QAASlY,EACT7oE,QAAS/mB,KAAK+rF,cAAgB/rF,KAAK8rF,mBAAqB+c,GAAc7oG,KAAK20B,WAAa30B,KAAK+rF,iBASjG3kB,aAAc,SAASC,GAErB,OADehqE,EAAOwR,OAAOC,UAAUs4D,aAAarjE,KAAK/D,KAAMqnE,GAC7C,wBA3OxB,GAkPA,SAAU9/D,GAER,aAEA,IAAIlK,EAASkK,EAAOlK,SAAWkK,EAAOlK,OAAS,IAa/CA,EAAOyrG,QAAUzrG,EAAOgG,KAAKke,YAAYlkB,EAAOw6F,MAAOx6F,EAAOmG,WAAY,CAOxEmC,KAAM,UAONojG,SAAU,GASVC,gBAAiB,EAMjBC,cAAe,KAKf58D,iBAAiB,EAMjBmuB,cAAc,EAOdywB,yBAA0B5tF,EAAO6N,KAAK4D,UAAUm8E,yBAAyBrlF,OAAO,SAMhFsjG,aAAc,UAQdC,iBAAiB,EAQjB1c,eAAgB,WACVzsF,KAAKusF,kBAGTvsF,KAAKktD,WAAaltD,KAAKg5F,oBACvBh5F,KAAK4vD,kBACL5vD,KAAKstF,cAELttF,KAAKgpG,gBAAkB,EAEvBhpG,KAAKopG,UAAYppG,KAAKqpG,kBAAkBrpG,KAAK4sF,cAEzC5sF,KAAKgpG,gBAAkBhpG,KAAKT,OAC9BS,KAAKmH,KAAK,QAASnH,KAAKgpG,kBAEiB,IAAvChpG,KAAKyrF,UAAUroF,QAAQ,YAEzBpD,KAAK0tF,gBAGP1tF,KAAKb,OAASa,KAAKytF,iBACnBztF,KAAKo1D,UAAU,CAAEyI,YAAa,+BAUhCwrC,kBAAmB,SAASC,GAM1B,IALA,IAAIC,EAAoB,EACpBC,EAAoB,EACpB/E,EAAoB,EACpBjxF,EAAoB,GAEf5P,EAAI,EAAGA,EAAI0lG,EAASrc,cAAcnpF,OAAQF,IACR,OAArC0lG,EAASjc,aAAaoX,IAAuB7gG,EAAI,GACnD4lG,EAAoB,EACpB/E,IACA8E,MAEQvpG,KAAKmpG,iBAAmBnpG,KAAKorF,eAAe3nE,KAAK6lF,EAASjc,aAAaoX,KAAe7gG,EAAI,IAElG4lG,IACA/E,KAGFjxF,EAAI5P,GAAK,CAAEmqF,KAAMwb,EAAexiF,OAAQyiF,GAExC/E,GAAa6E,EAASrc,cAAcrpF,GAAGE,OACvC0lG,GAAqBF,EAASrc,cAAcrpF,GAAGE,OAGjD,OAAO0P,GAQT47E,SAAU,SAASzoF,EAAU0nF,GAC3B,GAAIruF,KAAKopG,YAAcppG,KAAKypG,WAAY,CACtC,IAAIj2F,EAAMxT,KAAKopG,UAAU/a,GACrB76E,IACF66E,EAAY76E,EAAIu6E,MAGpB,OAAO1wF,EAAO6N,KAAK4D,UAAUsgF,SAASrrF,KAAK/D,KAAM2G,EAAU0nF,IAQ7DoE,cAAe,SAASpE,GACtB,IAAKruF,KAAK2jB,OACR,OAAO,EAET,IAA+C+lF,EAAYxiG,EAAvD6f,EAAS,EAAmD4iF,GAAc,EAC1En2F,EAAMxT,KAAKopG,UAAU/a,GAAYub,EAAc5pG,KAAKopG,UAAU/a,EAAY,GAW9E,IAAK,IAAIlrC,KAVL3vC,IACF66E,EAAY76E,EAAIu6E,KAChBhnE,EAASvT,EAAIuT,QAEX6iF,IAEFD,EADgBC,EAAY7b,OACIM,EAChCqb,EAAaE,EAAY7iF,QAE3B7f,EAA2B,qBAAdmnF,EAA4BruF,KAAK2jB,OAAS,CAAEoqE,KAAM/tF,KAAK2jB,OAAO0qE,IAEzE,IAAK,IAAIjrC,KAAMl8C,EAAIi8C,GACjB,GAAIC,GAAMr8B,KAAY4iF,GAAevmD,EAAKsmD,GAExC,IAAK,IAAIvT,KAAMjvF,EAAIi8C,GAAIC,GACrB,OAAO,EAKf,OAAO,GAQTkwC,qBAAsB,SAASjF,EAAWluC,GACxC,GAAIngD,KAAKopG,YAAcppG,KAAKypG,WAAY,CACtC,IAAIj2F,EAAMxT,KAAKopG,UAAU/a,GACzB,IAAK76E,EACH,OAAO,KAET66E,EAAY76E,EAAIu6E,KAChB5tC,EAAY3sC,EAAIuT,OAASo5B,EAE3B,OAAOngD,KAAKkhB,UAAU,uBAAwBmtE,EAAWluC,IAS3D82C,qBAAsB,SAAS5I,EAAWluC,EAAWpzC,GACnD,IAAIyG,EAAMxT,KAAKopG,UAAU/a,GACzBA,EAAY76E,EAAIu6E,KAChB5tC,EAAY3sC,EAAIuT,OAASo5B,EAEzBngD,KAAK2jB,OAAO0qE,GAAWluC,GAAapzC,GAQtC2qF,wBAAyB,SAASrJ,EAAWluC,GAC3C,IAAI3sC,EAAMxT,KAAKopG,UAAU/a,GACzBA,EAAY76E,EAAIu6E,KAChB5tC,EAAY3sC,EAAIuT,OAASo5B,SAClBngD,KAAK2jB,OAAO0qE,GAAWluC,IAWhC42C,cAAe,SAAS1I,GACtB,IAAI76E,EAAMxT,KAAKopG,UAAU/a,GACzB,QAASruF,KAAK2jB,OAAOnQ,EAAIu6E,OAS3BiJ,cAAe,SAAS3I,GACtB,IAAI76E,EAAMxT,KAAKopG,UAAU/a,GACzBruF,KAAK2jB,OAAOnQ,EAAIu6E,MAAQ,IAY1B8b,UAAW,SAASplC,EAAOqlC,GACzB,IAAkBlmG,EAAdmmG,EAAU,GAEd,IADA/pG,KAAKypG,YAAa,EACb7lG,EAAI,EAAGA,EAAI6gE,EAAM3gE,OAAQF,IAC5BmmG,EAAUA,EAAQnkG,OAAO5F,KAAKgqG,UAAUvlC,EAAM7gE,GAAIA,EAAGkmG,IAGvD,OADA9pG,KAAKypG,YAAa,EACXM,GAaTE,aAAc,SAASC,EAAM7b,EAAW8b,GACtC,IAAe5Y,EAAXhyF,EAAQ,EACZ4qG,EAAaA,GAAc,EAC3B,IAAK,IAAIvmG,EAAI,EAAGC,EAAMqmG,EAAKpmG,OAAQF,EAAIC,EAAKD,IAAK,CAE/CrE,GADUS,KAAK6xF,gBAAgBqY,EAAKtmG,GAAIyqF,EAAWzqF,EAAIumG,EAAY5Y,EAH7B,MAIzBnD,YACbmD,EAAe2Y,EAAKtmG,GAEtB,OAAOrE,GAYTyqG,UAAW,SAASI,EAAO/b,EAAWyb,EAAcO,GAClD,IAAI/5D,EAAY,EACZ64D,EAAkBnpG,KAAKmpG,gBACvBlc,EAAgB,GAChBc,EAAO,GAEPuc,EAAQnB,EAAkB9rG,EAAOgG,KAAKkI,OAAO6U,cAAcgqF,GAASA,EAAMp+F,MAAMhM,KAAKkpG,cACrFgB,EAAO,GACPnjF,EAAS,EACTwjF,EAAQpB,EAAkB,GAAK,IAC/BqB,EAAY,EACZC,EAAa,EACbC,EAAmB,EACnBC,GAAkB,EAClBC,EAAkB5qG,KAAKqxF,yBACvBgZ,EAAgBA,GAAiB,EAEhB,IAAjBC,EAAMxmG,QACRwmG,EAAMjmG,KAAK,IAEbylG,GAAgBO,EAChB,IAAK,IAAIzmG,EAAI,EAAGA,EAAI0mG,EAAMxmG,OAAQF,IAEhCsmG,EAAOf,EAAkBmB,EAAM1mG,GAAKvG,EAAOgG,KAAKkI,OAAO6U,cAAckqF,EAAM1mG,IAC3E4mG,EAAYxqG,KAAKiqG,aAAaC,EAAM7b,EAAWtnE,GAC/CA,GAAUmjF,EAAKpmG,QAEfwsC,GAAam6D,EAAaD,EAAYI,GACtBd,IAAiBa,GAC/B1d,EAAc5oF,KAAK0pF,GACnBA,EAAO,GACPz9C,EAAYk6D,EACZG,GAAkB,GAGlBr6D,GAAas6D,EAGVD,GAAoBxB,GACvBpb,EAAK1pF,KAAKkmG,GAEZxc,EAAOA,EAAKnoF,OAAOskG,GAEnBO,EAAatB,EAAkB,EAAInpG,KAAKiqG,aAAa,CAACM,GAAQlc,EAAWtnE,GACzEA,IACA4jF,GAAkB,EAEdH,EAAYE,IACdA,EAAmBF,GASvB,OALA5mG,GAAKqpF,EAAc5oF,KAAK0pF,GAEpB2c,EAAmBL,EAAgBrqG,KAAKgpG,kBAC1ChpG,KAAKgpG,gBAAkB0B,EAAmBE,EAAkBP,GAEvDpd,GASTiB,gBAAiB,SAASG,GACxB,OAAKruF,KAAKopG,UAAU/a,EAAY,IAI5BruF,KAAKopG,UAAU/a,EAAY,GAAGN,OAAS/tF,KAAKopG,UAAU/a,GAAWN,MAYvEO,qBAAsB,SAASD,GAC7B,OAAIruF,KAAKmpG,gBACAnpG,KAAKkuF,gBAAgBG,GAAa,EAAI,EAExC,GAUTvB,oBAAqB,SAASR,GAI5B,IAHA,IAAI8I,EAAU/3F,EAAO6N,KAAK4D,UAAUg+E,oBAAoB/oF,KAAK/D,KAAMssF,GAC/DW,EAAgBjtF,KAAK6pG,UAAUzU,EAAQ3wB,MAAOzkE,KAAKT,OACnDklE,EAAQ,IAAIhwD,MAAMw4E,EAAcnpF,QAC3BF,EAAI,EAAGA,EAAIqpF,EAAcnpF,OAAQF,IACxC6gE,EAAM7gE,GAAKqpF,EAAcrpF,GAAG8P,KAAK,IAInC,OAFA0hF,EAAQ3wB,MAAQA,EAChB2wB,EAAQnI,cAAgBA,EACjBmI,GAGTyV,YAAa,WACX,OAAOpjG,KAAKc,IAAIvI,KAAK+oG,SAAU/oG,KAAKgpG,kBAGtCrK,wBAAyB,WACvB,IAAImM,EAAc,GAClB,IAAK,IAAI1mG,KAAQpE,KAAKopG,UAChBppG,KAAKgtF,WAAW5oF,KAClB0mG,EAAY9qG,KAAKopG,UAAUhlG,GAAM2pF,MAAQ,GAG7C,IAAK,IAAI3pF,KAAQpE,KAAK2jB,OACfmnF,EAAY1mG,WACRpE,KAAK2jB,OAAOvf,IAWzBwvC,SAAU,SAASC,GACjB,OAAO7zC,KAAKkhB,UAAU,WAAY,CAAC,WAAY,mBAAmBtb,OAAOiuC,OAW7Ex2C,EAAOyrG,QAAQl7F,WAAa,SAAS7I,EAAQS,GAC3C,OAAOnI,EAAOwR,OAAO4xD,YAAY,UAAW17D,EAAQS,EAAU,SAvclE,CAycoCjI,GAGpC,WAEE,IAAIgyC,EAAgBlyC,EAAOkyC,cACvBw7D,EAAwBx7D,EAAcvC,4BACtCg+D,EAAoBz7D,EAAc7C,wBAClCoB,EAAiByB,EAAczB,eAC/BG,EAAqBsB,EAActB,mBACnCE,EAAqBoB,EAAcpB,mBACnCgB,EAAwBI,EAAcJ,sBACtC87D,EAAiB5tG,EAAOwR,OAAOC,UAAUi5B,SAwE7C,GAtEAkjE,EAAeC,GAAK,IAAI7tG,EAAOwzC,QAAQ,CACrCxnC,GAAI,GACJC,EAAG,EACHioC,mBAAoBw5D,EACpB9gE,cAAekE,EACfqD,cAAerC,IAGjB87D,EAAeE,GAAK,IAAI9tG,EAAOwzC,QAAQ,CACrCxnC,EAAG,GACHC,EAAG,EACHioC,mBAAoBw5D,EACpB9gE,cAAekE,EACfqD,cAAerC,IAGjB87D,EAAeG,GAAK,IAAI/tG,EAAOwzC,QAAQ,CACrCxnC,EAAG,EACHC,EAAG,GACHioC,mBAAoBw5D,EACpB9gE,cAAegE,EACfuD,cAAerC,IAGjB87D,EAAelyF,GAAK,IAAI1b,EAAOwzC,QAAQ,CACrCxnC,EAAG,EACHC,GAAI,GACJioC,mBAAoBw5D,EACpB9gE,cAAegE,EACfuD,cAAerC,IAGjB87D,EAAen4D,GAAK,IAAIz1C,EAAOwzC,QAAQ,CACrCxnC,GAAI,GACJC,GAAI,GACJioC,mBAAoBy5D,EACpB/gE,cAAe6D,IAGjBm9D,EAAel4D,GAAK,IAAI11C,EAAOwzC,QAAQ,CACrCxnC,EAAG,GACHC,GAAI,GACJioC,mBAAoBy5D,EACpB/gE,cAAe6D,IAGjBm9D,EAAej4D,GAAK,IAAI31C,EAAOwzC,QAAQ,CACrCxnC,GAAI,GACJC,EAAG,GACHioC,mBAAoBy5D,EACpB/gE,cAAe6D,IAGjBm9D,EAAeh4D,GAAK,IAAI51C,EAAOwzC,QAAQ,CACrCxnC,EAAG,GACHC,EAAG,GACHioC,mBAAoBy5D,EACpB/gE,cAAe6D,IAGjBm9D,EAAeI,IAAM,IAAIhuG,EAAOwzC,QAAQ,CACtCxnC,EAAG,EACHC,GAAI,GACJ2gC,cAAesF,EAAcrC,qBAC7BqE,mBAAoBhC,EAAcF,qBAClCxE,SAAU,GACVoG,gBAAgB,EAChBH,WAAY,WAGVzzC,EAAOyrG,QAAS,CAMlB,IAAIwC,EAAkBjuG,EAAOyrG,QAAQh6F,UAAUi5B,SAAW,GAE1DujE,EAAgBD,IAAMJ,EAAeI,IACrCC,EAAgBv4D,GAAKk4D,EAAel4D,GACpCu4D,EAAgBr4D,GAAKg4D,EAAeh4D,GACpCq4D,EAAgBx4D,GAAKm4D,EAAen4D,GACpCw4D,EAAgBt4D,GAAKi4D,EAAej4D,GACpCs4D,EAAgBvyF,GAAKkyF,EAAelyF,GACpCuyF,EAAgBF,GAAKH,EAAeG,GAEpCE,EAAgBH,GAAK,IAAI9tG,EAAOwzC,QAAQ,CACtCxnC,EAAG,GACHC,EAAG,EACH2gC,cAAesF,EAAclB,YAC7BkD,mBAAoBw5D,EACpBj6D,WAAY,aAGdw6D,EAAgBJ,GAAK,IAAI7tG,EAAOwzC,QAAQ,CACtCxnC,GAAI,GACJC,EAAG,EACH2gC,cAAesF,EAAclB,YAC7BkD,mBAAoBw5D,EACpBj6D,WAAY,cA9GlB,K,0DC1o7BA,YAUA,IAAIy6D,EAASxtG,EAAQ,IACjBytG,EAAUztG,EAAQ,IAClBiuB,EAAUjuB,EAAQ,IAmDtB,SAAS0tG,IACP,OAAO3qG,EAAO4qG,oBACV,WACA,WAGN,SAAS/vB,EAAcziD,EAAMp1B,GAC3B,GAAI2nG,IAAe3nG,EACjB,MAAM,IAAI6nG,WAAW,8BAcvB,OAZI7qG,EAAO4qG,qBAETxyE,EAAO,IAAIn5B,WAAW+D,IACjB8nG,UAAY9qG,EAAOgO,WAGX,OAAToqB,IACFA,EAAO,IAAIp4B,EAAOgD,IAEpBo1B,EAAKp1B,OAASA,GAGTo1B,EAaT,SAASp4B,EAAQ+qG,EAAKC,EAAkBhoG,GACtC,IAAKhD,EAAO4qG,uBAAyB1rG,gBAAgBc,GACnD,OAAO,IAAIA,EAAO+qG,EAAKC,EAAkBhoG,GAI3C,GAAmB,kBAAR+nG,EAAkB,CAC3B,GAAgC,kBAArBC,EACT,MAAM,IAAI70D,MACR,qEAGJ,OAAO80D,EAAY/rG,KAAM6rG,GAE3B,OAAO/gC,EAAK9qE,KAAM6rG,EAAKC,EAAkBhoG,GAW3C,SAASgnE,EAAM5xC,EAAMj1B,EAAO6nG,EAAkBhoG,GAC5C,GAAqB,kBAAVG,EACT,MAAM,IAAI+nG,UAAU,yCAGtB,MAA2B,qBAAhBr1B,aAA+B1yE,aAAiB0yE,YA6H7D,SAA0Bz9C,EAAM51B,EAAO2oG,EAAYnoG,GAGjD,GAFAR,EAAM4oG,WAEFD,EAAa,GAAK3oG,EAAM4oG,WAAaD,EACvC,MAAM,IAAIN,WAAW,6BAGvB,GAAIroG,EAAM4oG,WAAaD,GAAcnoG,GAAU,GAC7C,MAAM,IAAI6nG,WAAW,6BAIrBroG,OADiBoJ,IAAfu/F,QAAuCv/F,IAAX5I,EACtB,IAAI/D,WAAWuD,QACHoJ,IAAX5I,EACD,IAAI/D,WAAWuD,EAAO2oG,GAEtB,IAAIlsG,WAAWuD,EAAO2oG,EAAYnoG,GAGxChD,EAAO4qG,qBAETxyE,EAAO51B,GACFsoG,UAAY9qG,EAAOgO,UAGxBoqB,EAAOizE,EAAcjzE,EAAM51B,GAE7B,OAAO41B,EAvJEkzE,CAAgBlzE,EAAMj1B,EAAO6nG,EAAkBhoG,GAGnC,kBAAVG,EAwFb,SAAqBi1B,EAAM3tB,EAAQm0C,GACT,kBAAbA,GAAsC,KAAbA,IAClCA,EAAW,QAGb,IAAK5+C,EAAOurG,WAAW3sD,GACrB,MAAM,IAAIssD,UAAU,8CAGtB,IAAIloG,EAAwC,EAA/BooG,EAAW3gG,EAAQm0C,GAG5B4sD,GAFJpzE,EAAOyiD,EAAaziD,EAAMp1B,IAERyoG,MAAMhhG,EAAQm0C,GAE5B4sD,IAAWxoG,IAIbo1B,EAAOA,EAAKvtB,MAAM,EAAG2gG,IAGvB,OAAOpzE,EA5GEszE,CAAWtzE,EAAMj1B,EAAO6nG,GAsJnC,SAAqB5yE,EAAMhyB,GACzB,GAAIpG,EAAO2rG,SAASvlG,GAAM,CACxB,IAAIrD,EAA4B,EAAtB6oG,EAAQxlG,EAAIpD,QAGtB,OAAoB,KAFpBo1B,EAAOyiD,EAAaziD,EAAMr1B,IAEjBC,QAIToD,EAAIs7F,KAAKtpE,EAAM,EAAG,EAAGr1B,GAHZq1B,EAOX,GAAIhyB,EAAK,CACP,GAA4B,qBAAhByvE,aACRzvE,EAAIw0E,kBAAkB/E,aAAgB,WAAYzvE,EACpD,MAA0B,kBAAfA,EAAIpD,SA+8CL6oG,EA/8CkCzlG,EAAIpD,UAg9CrC6oG,EA/8CFhxB,EAAaziD,EAAM,GAErBizE,EAAcjzE,EAAMhyB,GAG7B,GAAiB,WAAbA,EAAIvB,MAAqBqmB,EAAQ9kB,EAAIiL,MACvC,OAAOg6F,EAAcjzE,EAAMhyB,EAAIiL,MAw8CrC,IAAgBw6F,EAp8Cd,MAAM,IAAIX,UAAU,sFA9Kbp+F,CAAWsrB,EAAMj1B,GA4B1B,SAAS2oG,EAAY5mG,GACnB,GAAoB,kBAATA,EACT,MAAM,IAAIgmG,UAAU,oCACf,GAAIhmG,EAAO,EAChB,MAAM,IAAI2lG,WAAW,wCA4BzB,SAASI,EAAa7yE,EAAMlzB,GAG1B,GAFA4mG,EAAW5mG,GACXkzB,EAAOyiD,EAAaziD,EAAMlzB,EAAO,EAAI,EAAoB,EAAhB0mG,EAAQ1mG,KAC5ClF,EAAO4qG,oBACV,IAAK,IAAI9nG,EAAI,EAAGA,EAAIoC,IAAQpC,EAC1Bs1B,EAAKt1B,GAAK,EAGd,OAAOs1B,EAwCT,SAASizE,EAAejzE,EAAM51B,GAC5B,IAAIQ,EAASR,EAAMQ,OAAS,EAAI,EAA4B,EAAxB4oG,EAAQppG,EAAMQ,QAClDo1B,EAAOyiD,EAAaziD,EAAMp1B,GAC1B,IAAK,IAAIF,EAAI,EAAGA,EAAIE,EAAQF,GAAK,EAC/Bs1B,EAAKt1B,GAAgB,IAAXN,EAAMM,GAElB,OAAOs1B,EA+DT,SAASwzE,EAAS5oG,GAGhB,GAAIA,GAAU2nG,IACZ,MAAM,IAAIE,WAAW,0DACaF,IAAa18F,SAAS,IAAM,UAEhE,OAAgB,EAATjL,EAsFT,SAASooG,EAAY3gG,EAAQm0C,GAC3B,GAAI5+C,EAAO2rG,SAASlhG,GAClB,OAAOA,EAAOzH,OAEhB,GAA2B,qBAAhB6yE,aAA6D,oBAAvBA,YAAYk2B,SACxDl2B,YAAYk2B,OAAOthG,IAAWA,aAAkBorE,aACnD,OAAOprE,EAAO2gG,WAEM,kBAAX3gG,IACTA,EAAS,GAAKA,GAGhB,IAAI1H,EAAM0H,EAAOzH,OACjB,GAAY,IAARD,EAAW,OAAO,EAItB,IADA,IAAIipG,GAAc,IAEhB,OAAQptD,GACN,IAAK,QACL,IAAK,SACL,IAAK,SACH,OAAO77C,EACT,IAAK,OACL,IAAK,QACL,UAAK6I,EACH,OAAOqgG,EAAYxhG,GAAQzH,OAC7B,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAa,EAAND,EACT,IAAK,MACH,OAAOA,IAAQ,EACjB,IAAK,SACH,OAAOmpG,EAAczhG,GAAQzH,OAC/B,QACE,GAAIgpG,EAAa,OAAOC,EAAYxhG,GAAQzH,OAC5C47C,GAAY,GAAKA,GAAU5sC,cAC3Bg6F,GAAc,GAMtB,SAASG,EAAcvtD,EAAU11B,EAAOmB,GACtC,IAAI2hF,GAAc,EAclB,SALcpgG,IAAVsd,GAAuBA,EAAQ,KACjCA,EAAQ,GAINA,EAAQhqB,KAAK8D,OACf,MAAO,GAOT,SAJY4I,IAARye,GAAqBA,EAAMnrB,KAAK8D,UAClCqnB,EAAMnrB,KAAK8D,QAGTqnB,GAAO,EACT,MAAO,GAOT,IAHAA,KAAS,KACTnB,KAAW,GAGT,MAAO,GAKT,IAFK01B,IAAUA,EAAW,UAGxB,OAAQA,GACN,IAAK,MACH,OAAOwtD,EAASltG,KAAMgqB,EAAOmB,GAE/B,IAAK,OACL,IAAK,QACH,OAAOgiF,EAAUntG,KAAMgqB,EAAOmB,GAEhC,IAAK,QACH,OAAOiiF,EAAWptG,KAAMgqB,EAAOmB,GAEjC,IAAK,SACL,IAAK,SACH,OAAOkiF,EAAYrtG,KAAMgqB,EAAOmB,GAElC,IAAK,SACH,OAAOmiF,EAAYttG,KAAMgqB,EAAOmB,GAElC,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOoiF,EAAavtG,KAAMgqB,EAAOmB,GAEnC,QACE,GAAI2hF,EAAa,MAAM,IAAId,UAAU,qBAAuBtsD,GAC5DA,GAAYA,EAAW,IAAI5sC,cAC3Bg6F,GAAc,GAStB,SAASvyE,EAAMjqB,EAAGq8B,EAAGh4B,GACnB,IAAI/Q,EAAI0M,EAAEq8B,GACVr8B,EAAEq8B,GAAKr8B,EAAEqE,GACTrE,EAAEqE,GAAK/Q,EAmIT,SAAS4pG,EAAsB9xB,EAAQixB,EAAKV,EAAYvsD,EAAU+tD,GAEhE,GAAsB,IAAlB/xB,EAAO53E,OAAc,OAAQ,EAmBjC,GAhB0B,kBAAfmoG,GACTvsD,EAAWusD,EACXA,EAAa,GACJA,EAAa,WACtBA,EAAa,WACJA,GAAc,aACvBA,GAAc,YAEhBA,GAAcA,EACV9uF,MAAM8uF,KAERA,EAAawB,EAAM,EAAK/xB,EAAO53E,OAAS,GAItCmoG,EAAa,IAAGA,EAAavwB,EAAO53E,OAASmoG,GAC7CA,GAAcvwB,EAAO53E,OAAQ,CAC/B,GAAI2pG,EAAK,OAAQ,EACZxB,EAAavwB,EAAO53E,OAAS,OAC7B,GAAImoG,EAAa,EAAG,CACzB,IAAIwB,EACC,OAAQ,EADJxB,EAAa,EAUxB,GALmB,kBAARU,IACTA,EAAM7rG,EAAOgqE,KAAK6hC,EAAKjtD,IAIrB5+C,EAAO2rG,SAASE,GAElB,OAAmB,IAAfA,EAAI7oG,QACE,EAEH4pG,EAAahyB,EAAQixB,EAAKV,EAAYvsD,EAAU+tD,GAClD,GAAmB,kBAARd,EAEhB,OADAA,GAAY,IACR7rG,EAAO4qG,qBACiC,oBAAjC3rG,WAAW+O,UAAU1L,QAC1BqqG,EACK1tG,WAAW+O,UAAU1L,QAAQW,KAAK23E,EAAQixB,EAAKV,GAE/ClsG,WAAW+O,UAAU6+F,YAAY5pG,KAAK23E,EAAQixB,EAAKV,GAGvDyB,EAAahyB,EAAQ,CAAEixB,GAAOV,EAAYvsD,EAAU+tD,GAG7D,MAAM,IAAIzB,UAAU,wCAGtB,SAAS0B,EAAcvoF,EAAKwnF,EAAKV,EAAYvsD,EAAU+tD,GACrD,IA0BI7pG,EA1BAgqG,EAAY,EACZC,EAAY1oF,EAAIrhB,OAChBgqG,EAAYnB,EAAI7oG,OAEpB,QAAiB4I,IAAbgzC,IAEe,UADjBA,EAAWuH,OAAOvH,GAAU5sC,gBACY,UAAb4sC,GACV,YAAbA,GAAuC,aAAbA,GAAyB,CACrD,GAAIv6B,EAAIrhB,OAAS,GAAK6oG,EAAI7oG,OAAS,EACjC,OAAQ,EAEV8pG,EAAY,EACZC,GAAa,EACbC,GAAa,EACb7B,GAAc,EAIlB,SAAS8B,EAAMC,EAAKpqG,GAClB,OAAkB,IAAdgqG,EACKI,EAAIpqG,GAEJoqG,EAAIC,aAAarqG,EAAIgqG,GAKhC,GAAIH,EAAK,CACP,IAAIS,GAAc,EAClB,IAAKtqG,EAAIqoG,EAAYroG,EAAIiqG,EAAWjqG,IAClC,GAAImqG,EAAK5oF,EAAKvhB,KAAOmqG,EAAKpB,GAAqB,IAAhBuB,EAAoB,EAAItqG,EAAIsqG,IAEzD,IADoB,IAAhBA,IAAmBA,EAAatqG,GAChCA,EAAIsqG,EAAa,IAAMJ,EAAW,OAAOI,EAAaN,OAEtC,IAAhBM,IAAmBtqG,GAAKA,EAAIsqG,GAChCA,GAAc,OAKlB,IADIjC,EAAa6B,EAAYD,IAAW5B,EAAa4B,EAAYC,GAC5DlqG,EAAIqoG,EAAYroG,GAAK,EAAGA,IAAK,CAEhC,IADA,IAAIuqG,GAAQ,EACHn1F,EAAI,EAAGA,EAAI80F,EAAW90F,IAC7B,GAAI+0F,EAAK5oF,EAAKvhB,EAAIoV,KAAO+0F,EAAKpB,EAAK3zF,GAAI,CACrCm1F,GAAQ,EACR,MAGJ,GAAIA,EAAO,OAAOvqG,EAItB,OAAQ,EAeV,SAASwqG,EAAUJ,EAAKziG,EAAQwb,EAAQjjB,GACtCijB,EAASlc,OAAOkc,IAAW,EAC3B,IAAIsnF,EAAYL,EAAIlqG,OAASijB,EACxBjjB,GAGHA,EAAS+G,OAAO/G,IACHuqG,IACXvqG,EAASuqG,GAJXvqG,EAASuqG,EASX,IAAIC,EAAS/iG,EAAOzH,OACpB,GAAIwqG,EAAS,IAAM,EAAG,MAAM,IAAItC,UAAU,sBAEtCloG,EAASwqG,EAAS,IACpBxqG,EAASwqG,EAAS,GAEpB,IAAK,IAAI1qG,EAAI,EAAGA,EAAIE,IAAUF,EAAG,CAC/B,IAAI2Y,EAAS8K,SAAS9b,EAAOsnB,OAAW,EAAJjvB,EAAO,GAAI,IAC/C,GAAIuZ,MAAMZ,GAAS,OAAO3Y,EAC1BoqG,EAAIjnF,EAASnjB,GAAK2Y,EAEpB,OAAO3Y,EAGT,SAAS2qG,EAAWP,EAAKziG,EAAQwb,EAAQjjB,GACvC,OAAO0qG,EAAWzB,EAAYxhG,EAAQyiG,EAAIlqG,OAASijB,GAASinF,EAAKjnF,EAAQjjB,GAG3E,SAAS2qG,EAAYT,EAAKziG,EAAQwb,EAAQjjB,GACxC,OAAO0qG,EAq6BT,SAAuB9uF,GAErB,IADA,IAAIgvF,EAAY,GACP9qG,EAAI,EAAGA,EAAI8b,EAAI5b,SAAUF,EAEhC8qG,EAAUrqG,KAAyB,IAApBqb,EAAIE,WAAWhc,IAEhC,OAAO8qG,EA36BWC,CAAapjG,GAASyiG,EAAKjnF,EAAQjjB,GAGvD,SAAS8qG,EAAaZ,EAAKziG,EAAQwb,EAAQjjB,GACzC,OAAO2qG,EAAWT,EAAKziG,EAAQwb,EAAQjjB,GAGzC,SAAS+qG,EAAab,EAAKziG,EAAQwb,EAAQjjB,GACzC,OAAO0qG,EAAWxB,EAAczhG,GAASyiG,EAAKjnF,EAAQjjB,GAGxD,SAASgrG,EAAWd,EAAKziG,EAAQwb,EAAQjjB,GACvC,OAAO0qG,EAk6BT,SAAyB9uF,EAAKqvF,GAG5B,IAFA,IAAIl6F,EAAGm6F,EAAIC,EACPP,EAAY,GACP9qG,EAAI,EAAGA,EAAI8b,EAAI5b,WACjBirG,GAAS,GAAK,KADanrG,EAIhCorG,GADAn6F,EAAI6K,EAAIE,WAAWhc,KACT,EACVqrG,EAAKp6F,EAAI,IACT65F,EAAUrqG,KAAK4qG,GACfP,EAAUrqG,KAAK2qG,GAGjB,OAAON,EA/6BWQ,CAAe3jG,EAAQyiG,EAAIlqG,OAASijB,GAASinF,EAAKjnF,EAAQjjB,GAkF9E,SAASwpG,EAAaU,EAAKhkF,EAAOmB,GAChC,OAAc,IAAVnB,GAAemB,IAAQ6iF,EAAIlqG,OACtBynG,EAAO4D,cAAcnB,GAErBzC,EAAO4D,cAAcnB,EAAIriG,MAAMqe,EAAOmB,IAIjD,SAASgiF,EAAWa,EAAKhkF,EAAOmB,GAC9BA,EAAM1jB,KAAKa,IAAI0lG,EAAIlqG,OAAQqnB,GAI3B,IAHA,IAAIikF,EAAM,GAENxrG,EAAIomB,EACDpmB,EAAIunB,GAAK,CACd,IAQMkkF,EAAYC,EAAWC,EAAYC,EARrCC,EAAYzB,EAAIpqG,GAChB8rG,EAAY,KACZC,EAAoBF,EAAY,IAAQ,EACvCA,EAAY,IAAQ,EACpBA,EAAY,IAAQ,EACrB,EAEJ,GAAI7rG,EAAI+rG,GAAoBxkF,EAG1B,OAAQwkF,GACN,KAAK,EACCF,EAAY,MACdC,EAAYD,GAEd,MACF,KAAK,EAEyB,OAAV,KADlBJ,EAAarB,EAAIpqG,EAAI,OAEnB4rG,GAA6B,GAAZC,IAAqB,EAAoB,GAAbJ,GACzB,MAClBK,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAarB,EAAIpqG,EAAI,GACrB0rG,EAAYtB,EAAIpqG,EAAI,GACQ,OAAV,IAAbyrG,IAAsD,OAAV,IAAZC,KACnCE,GAA6B,GAAZC,IAAoB,IAAoB,GAAbJ,IAAsB,EAAmB,GAAZC,GACrD,OAAUE,EAAgB,OAAUA,EAAgB,SACtEE,EAAYF,GAGhB,MACF,KAAK,EACHH,EAAarB,EAAIpqG,EAAI,GACrB0rG,EAAYtB,EAAIpqG,EAAI,GACpB2rG,EAAavB,EAAIpqG,EAAI,GACO,OAAV,IAAbyrG,IAAsD,OAAV,IAAZC,IAAsD,OAAV,IAAbC,KAClEC,GAA6B,GAAZC,IAAoB,IAAqB,GAAbJ,IAAsB,IAAmB,GAAZC,IAAqB,EAAoB,GAAbC,GAClF,OAAUC,EAAgB,UAC5CE,EAAYF,GAMJ,OAAdE,GAGFA,EAAY,MACZC,EAAmB,GACVD,EAAY,QAErBA,GAAa,MACbN,EAAI/qG,KAAKqrG,IAAc,GAAK,KAAQ,OACpCA,EAAY,MAAqB,KAAZA,GAGvBN,EAAI/qG,KAAKqrG,GACT9rG,GAAK+rG,EAGP,OAQF,SAAgCC,GAC9B,IAAI/rG,EAAM+rG,EAAW9rG,OACrB,GAAID,GAAOgsG,EACT,OAAO5oD,OAAO6oD,aAAaprG,MAAMuiD,OAAQ2oD,GAI3C,IAAIR,EAAM,GACNxrG,EAAI,EACR,KAAOA,EAAIC,GACTurG,GAAOnoD,OAAO6oD,aAAaprG,MACzBuiD,OACA2oD,EAAWjkG,MAAM/H,EAAGA,GAAKisG,IAG7B,OAAOT,EAvBAW,CAAsBX,GA98B/B7xG,EAAQuD,OAASA,EACjBvD,EAAQyyG,WAoTR,SAAqBlsG,IACdA,GAAUA,IACbA,EAAS,GAEX,OAAOhD,EAAOmvG,OAAOnsG,IAvTvBvG,EAAQ2yG,kBAAoB,GA0B5BpvG,EAAO4qG,yBAAqDh/F,IAA/BnF,EAAOmkG,oBAChCnkG,EAAOmkG,oBAQX,WACE,IACE,IAAIvmF,EAAM,IAAIplB,WAAW,GAEzB,OADAolB,EAAIymF,UAAY,CAACA,UAAW7rG,WAAW+O,UAAWqhG,IAAK,WAAc,OAAO,KACvD,KAAdhrF,EAAIgrF,OACiB,oBAAjBhrF,EAAIirF,UACuB,IAAlCjrF,EAAIirF,SAAS,EAAG,GAAGlE,WACvB,MAAOpiE,GACP,OAAO,GAfPumE,GAKJ9yG,EAAQkuG,WAAaA,IAkErB3qG,EAAOwvG,SAAW,KAGlBxvG,EAAOyvG,SAAW,SAAUprF,GAE1B,OADAA,EAAIymF,UAAY9qG,EAAOgO,UAChBqW,GA2BTrkB,EAAOgqE,KAAO,SAAU7mE,EAAO6nG,EAAkBhoG,GAC/C,OAAOgnE,EAAK,KAAM7mE,EAAO6nG,EAAkBhoG,IAGzChD,EAAO4qG,sBACT5qG,EAAOgO,UAAU88F,UAAY7rG,WAAW+O,UACxChO,EAAO8qG,UAAY7rG,WACG,qBAAXywG,QAA0BA,OAAOC,SACxC3vG,EAAO0vG,OAAOC,WAAa3vG,GAE7B+N,OAAO6hG,eAAe5vG,EAAQ0vG,OAAOC,QAAS,CAC5CxsG,MAAO,KACP0sG,cAAc,KAiCpB7vG,EAAOmvG,MAAQ,SAAUjqG,EAAMzC,EAAMm8C,GACnC,OArBF,SAAgBxmB,EAAMlzB,EAAMzC,EAAMm8C,GAEhC,OADAktD,EAAW5mG,GACPA,GAAQ,EACH21E,EAAaziD,EAAMlzB,QAEf0G,IAATnJ,EAIyB,kBAAbm8C,EACVi8B,EAAaziD,EAAMlzB,GAAMzC,KAAKA,EAAMm8C,GACpCi8B,EAAaziD,EAAMlzB,GAAMzC,KAAKA,GAE7Bo4E,EAAaziD,EAAMlzB,GAQnBiqG,CAAM,KAAMjqG,EAAMzC,EAAMm8C,IAiBjC5+C,EAAOirG,YAAc,SAAU/lG,GAC7B,OAAO+lG,EAAY,KAAM/lG,IAK3BlF,EAAO8vG,gBAAkB,SAAU5qG,GACjC,OAAO+lG,EAAY,KAAM/lG,IAiH3BlF,EAAO2rG,SAAW,SAAmBn8F,GACnC,QAAe,MAALA,IAAaA,EAAEugG,YAG3B/vG,EAAOgwG,QAAU,SAAkBvmG,EAAG+F,GACpC,IAAKxP,EAAO2rG,SAASliG,KAAOzJ,EAAO2rG,SAASn8F,GAC1C,MAAM,IAAI07F,UAAU,6BAGtB,GAAIzhG,IAAM+F,EAAG,OAAO,EAKpB,IAHA,IAAIjH,EAAIkB,EAAEzG,OACNwF,EAAIgH,EAAExM,OAEDF,EAAI,EAAGC,EAAM4D,KAAKa,IAAIe,EAAGC,GAAI1F,EAAIC,IAAOD,EAC/C,GAAI2G,EAAE3G,KAAO0M,EAAE1M,GAAI,CACjByF,EAAIkB,EAAE3G,GACN0F,EAAIgH,EAAE1M,GACN,MAIJ,OAAIyF,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GAGTvI,EAAOurG,WAAa,SAAqB3sD,GACvC,OAAQuH,OAAOvH,GAAU5sC,eACvB,IAAK,MACL,IAAK,OACL,IAAK,QACL,IAAK,QACL,IAAK,SACL,IAAK,SACL,IAAK,SACL,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAO,EACT,QACE,OAAO,IAIbhS,EAAO8E,OAAS,SAAiBmrG,EAAMjtG,GACrC,IAAKkoB,EAAQ+kF,GACX,MAAM,IAAI/E,UAAU,+CAGtB,GAAoB,IAAhB+E,EAAKjtG,OACP,OAAOhD,EAAOmvG,MAAM,GAGtB,IAAIrsG,EACJ,QAAe8I,IAAX5I,EAEF,IADAA,EAAS,EACJF,EAAI,EAAGA,EAAImtG,EAAKjtG,SAAUF,EAC7BE,GAAUitG,EAAKntG,GAAGE,OAItB,IAAI43E,EAAS56E,EAAOirG,YAAYjoG,GAC5BsnB,EAAM,EACV,IAAKxnB,EAAI,EAAGA,EAAImtG,EAAKjtG,SAAUF,EAAG,CAChC,IAAIoqG,EAAM+C,EAAKntG,GACf,IAAK9C,EAAO2rG,SAASuB,GACnB,MAAM,IAAIhC,UAAU,+CAEtBgC,EAAIxL,KAAK9mB,EAAQtwD,GACjBA,GAAO4iF,EAAIlqG,OAEb,OAAO43E,GA8CT56E,EAAOorG,WAAaA,EA0EpBprG,EAAOgO,UAAU+hG,WAAY,EAQ7B/vG,EAAOgO,UAAUkiG,OAAS,WACxB,IAAIntG,EAAM7D,KAAK8D,OACf,GAAID,EAAM,IAAM,EACd,MAAM,IAAI8nG,WAAW,6CAEvB,IAAK,IAAI/nG,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EAC5B22B,EAAKv6B,KAAM4D,EAAGA,EAAI,GAEpB,OAAO5D,MAGTc,EAAOgO,UAAUmiG,OAAS,WACxB,IAAIptG,EAAM7D,KAAK8D,OACf,GAAID,EAAM,IAAM,EACd,MAAM,IAAI8nG,WAAW,6CAEvB,IAAK,IAAI/nG,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EAC5B22B,EAAKv6B,KAAM4D,EAAGA,EAAI,GAClB22B,EAAKv6B,KAAM4D,EAAI,EAAGA,EAAI,GAExB,OAAO5D,MAGTc,EAAOgO,UAAUoiG,OAAS,WACxB,IAAIrtG,EAAM7D,KAAK8D,OACf,GAAID,EAAM,IAAM,EACd,MAAM,IAAI8nG,WAAW,6CAEvB,IAAK,IAAI/nG,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EAC5B22B,EAAKv6B,KAAM4D,EAAGA,EAAI,GAClB22B,EAAKv6B,KAAM4D,EAAI,EAAGA,EAAI,GACtB22B,EAAKv6B,KAAM4D,EAAI,EAAGA,EAAI,GACtB22B,EAAKv6B,KAAM4D,EAAI,EAAGA,EAAI,GAExB,OAAO5D,MAGTc,EAAOgO,UAAUC,SAAW,WAC1B,IAAIjL,EAAuB,EAAd9D,KAAK8D,OAClB,OAAe,IAAXA,EAAqB,GACA,IAArBK,UAAUL,OAAqBqpG,EAAUntG,KAAM,EAAG8D,GAC/CmpG,EAAavoG,MAAM1E,KAAMmE,YAGlCrD,EAAOgO,UAAUqiG,OAAS,SAAiB7gG,GACzC,IAAKxP,EAAO2rG,SAASn8F,GAAI,MAAM,IAAI07F,UAAU,6BAC7C,OAAIhsG,OAASsQ,GACsB,IAA5BxP,EAAOgwG,QAAQ9wG,KAAMsQ,IAG9BxP,EAAOgO,UAAUsiG,QAAU,WACzB,IAAI1xF,EAAM,GACNnX,EAAMhL,EAAQ2yG,kBAKlB,OAJIlwG,KAAK8D,OAAS,IAChB4b,EAAM1f,KAAK+O,SAAS,MAAO,EAAGxG,GAAKiU,MAAM,SAAS9I,KAAK,KACnD1T,KAAK8D,OAASyE,IAAKmX,GAAO,UAEzB,WAAaA,EAAM,KAG5B5e,EAAOgO,UAAUgiG,QAAU,SAAkBn/F,EAAQqY,EAAOmB,EAAKkmF,EAAWC,GAC1E,IAAKxwG,EAAO2rG,SAAS96F,GACnB,MAAM,IAAIq6F,UAAU,6BAgBtB,QAbct/F,IAAVsd,IACFA,EAAQ,QAEEtd,IAARye,IACFA,EAAMxZ,EAASA,EAAO7N,OAAS,QAEf4I,IAAd2kG,IACFA,EAAY,QAEE3kG,IAAZ4kG,IACFA,EAAUtxG,KAAK8D,QAGbkmB,EAAQ,GAAKmB,EAAMxZ,EAAO7N,QAAUutG,EAAY,GAAKC,EAAUtxG,KAAK8D,OACtE,MAAM,IAAI6nG,WAAW,sBAGvB,GAAI0F,GAAaC,GAAWtnF,GAASmB,EACnC,OAAO,EAET,GAAIkmF,GAAaC,EACf,OAAQ,EAEV,GAAItnF,GAASmB,EACX,OAAO,EAQT,GAAInrB,OAAS2R,EAAQ,OAAO,EAS5B,IAPA,IAAItI,GAJJioG,KAAa,IADbD,KAAe,GAMX/nG,GAPJ6hB,KAAS,IADTnB,KAAW,GASPnmB,EAAM4D,KAAKa,IAAIe,EAAGC,GAElBioG,EAAWvxG,KAAK2L,MAAM0lG,EAAWC,GACjCE,EAAa7/F,EAAOhG,MAAMqe,EAAOmB,GAE5BvnB,EAAI,EAAGA,EAAIC,IAAOD,EACzB,GAAI2tG,EAAS3tG,KAAO4tG,EAAW5tG,GAAI,CACjCyF,EAAIkoG,EAAS3tG,GACb0F,EAAIkoG,EAAW5tG,GACf,MAIJ,OAAIyF,EAAIC,GAAW,EACfA,EAAID,EAAU,EACX,GA6HTvI,EAAOgO,UAAU2iG,SAAW,SAAmB9E,EAAKV,EAAYvsD,GAC9D,OAAoD,IAA7C1/C,KAAKoD,QAAQupG,EAAKV,EAAYvsD,IAGvC5+C,EAAOgO,UAAU1L,QAAU,SAAkBupG,EAAKV,EAAYvsD,GAC5D,OAAO8tD,EAAqBxtG,KAAM2sG,EAAKV,EAAYvsD,GAAU,IAG/D5+C,EAAOgO,UAAU6+F,YAAc,SAAsBhB,EAAKV,EAAYvsD,GACpE,OAAO8tD,EAAqBxtG,KAAM2sG,EAAKV,EAAYvsD,GAAU,IAkD/D5+C,EAAOgO,UAAUy9F,MAAQ,SAAgBhhG,EAAQwb,EAAQjjB,EAAQ47C,GAE/D,QAAehzC,IAAXqa,EACF24B,EAAW,OACX57C,EAAS9D,KAAK8D,OACdijB,EAAS,OAEJ,QAAera,IAAX5I,GAA0C,kBAAXijB,EACxC24B,EAAW34B,EACXjjB,EAAS9D,KAAK8D,OACdijB,EAAS,MAEJ,KAAI2qF,SAAS3qF,GAWlB,MAAM,IAAIkwB,MACR,2EAXFlwB,GAAkB,EACd2qF,SAAS5tG,IACXA,GAAkB,OACD4I,IAAbgzC,IAAwBA,EAAW,UAEvCA,EAAW57C,EACXA,OAAS4I,GASb,IAAI2hG,EAAYruG,KAAK8D,OAASijB,EAG9B,SAFera,IAAX5I,GAAwBA,EAASuqG,KAAWvqG,EAASuqG,GAEpD9iG,EAAOzH,OAAS,IAAMA,EAAS,GAAKijB,EAAS,IAAOA,EAAS/mB,KAAK8D,OACrE,MAAM,IAAI6nG,WAAW,0CAGlBjsD,IAAUA,EAAW,QAG1B,IADA,IAAIotD,GAAc,IAEhB,OAAQptD,GACN,IAAK,MACH,OAAO0uD,EAASpuG,KAAMuL,EAAQwb,EAAQjjB,GAExC,IAAK,OACL,IAAK,QACH,OAAOyqG,EAAUvuG,KAAMuL,EAAQwb,EAAQjjB,GAEzC,IAAK,QACH,OAAO2qG,EAAWzuG,KAAMuL,EAAQwb,EAAQjjB,GAE1C,IAAK,SACL,IAAK,SACH,OAAO8qG,EAAY5uG,KAAMuL,EAAQwb,EAAQjjB,GAE3C,IAAK,SAEH,OAAO+qG,EAAY7uG,KAAMuL,EAAQwb,EAAQjjB,GAE3C,IAAK,OACL,IAAK,QACL,IAAK,UACL,IAAK,WACH,OAAOgrG,EAAU9uG,KAAMuL,EAAQwb,EAAQjjB,GAEzC,QACE,GAAIgpG,EAAa,MAAM,IAAId,UAAU,qBAAuBtsD,GAC5DA,GAAY,GAAKA,GAAU5sC,cAC3Bg6F,GAAc,IAKtBhsG,EAAOgO,UAAU4yC,OAAS,WACxB,MAAO,CACL/7C,KAAM,SACNwM,KAAMsC,MAAM3F,UAAUnD,MAAM5H,KAAK/D,KAAK2xG,MAAQ3xG,KAAM,KAwFxD,IAAI6vG,EAAuB,KAoB3B,SAASzC,EAAYY,EAAKhkF,EAAOmB,GAC/B,IAAIymF,EAAM,GACVzmF,EAAM1jB,KAAKa,IAAI0lG,EAAIlqG,OAAQqnB,GAE3B,IAAK,IAAIvnB,EAAIomB,EAAOpmB,EAAIunB,IAAOvnB,EAC7BguG,GAAO3qD,OAAO6oD,aAAsB,IAAT9B,EAAIpqG,IAEjC,OAAOguG,EAGT,SAASvE,EAAaW,EAAKhkF,EAAOmB,GAChC,IAAIymF,EAAM,GACVzmF,EAAM1jB,KAAKa,IAAI0lG,EAAIlqG,OAAQqnB,GAE3B,IAAK,IAAIvnB,EAAIomB,EAAOpmB,EAAIunB,IAAOvnB,EAC7BguG,GAAO3qD,OAAO6oD,aAAa9B,EAAIpqG,IAEjC,OAAOguG,EAGT,SAAS1E,EAAUc,EAAKhkF,EAAOmB,GAC7B,IAAItnB,EAAMmqG,EAAIlqG,SAETkmB,GAASA,EAAQ,KAAGA,EAAQ,KAC5BmB,GAAOA,EAAM,GAAKA,EAAMtnB,KAAKsnB,EAAMtnB,GAGxC,IADA,IAAIguG,EAAM,GACDjuG,EAAIomB,EAAOpmB,EAAIunB,IAAOvnB,EAC7BiuG,GAAO10E,EAAM6wE,EAAIpqG,IAEnB,OAAOiuG,EAGT,SAAStE,EAAcS,EAAKhkF,EAAOmB,GAGjC,IAFA,IAAI2mF,EAAQ9D,EAAIriG,MAAMqe,EAAOmB,GACzBikF,EAAM,GACDxrG,EAAI,EAAGA,EAAIkuG,EAAMhuG,OAAQF,GAAK,EACrCwrG,GAAOnoD,OAAO6oD,aAAagC,EAAMluG,GAAoB,IAAfkuG,EAAMluG,EAAI,IAElD,OAAOwrG,EA0CT,SAAS2C,EAAahrF,EAAQ6yD,EAAK91E,GACjC,GAAKijB,EAAS,IAAO,GAAKA,EAAS,EAAG,MAAM,IAAI4kF,WAAW,sBAC3D,GAAI5kF,EAAS6yD,EAAM91E,EAAQ,MAAM,IAAI6nG,WAAW,yCA+JlD,SAASqG,EAAUhE,EAAK/pG,EAAO8iB,EAAQ6yD,EAAKrxE,EAAKD,GAC/C,IAAKxH,EAAO2rG,SAASuB,GAAM,MAAM,IAAIhC,UAAU,+CAC/C,GAAI/nG,EAAQsE,GAAOtE,EAAQqE,EAAK,MAAM,IAAIqjG,WAAW,qCACrD,GAAI5kF,EAAS6yD,EAAMo0B,EAAIlqG,OAAQ,MAAM,IAAI6nG,WAAW,sBAkDtD,SAASsG,EAAmBjE,EAAK/pG,EAAO8iB,EAAQmrF,GAC1CjuG,EAAQ,IAAGA,EAAQ,MAASA,EAAQ,GACxC,IAAK,IAAIL,EAAI,EAAGoV,EAAIvR,KAAKa,IAAI0lG,EAAIlqG,OAASijB,EAAQ,GAAInjB,EAAIoV,IAAKpV,EAC7DoqG,EAAIjnF,EAASnjB,IAAMK,EAAS,KAAS,GAAKiuG,EAAetuG,EAAI,EAAIA,MAClC,GAA5BsuG,EAAetuG,EAAI,EAAIA,GA8B9B,SAASuuG,EAAmBnE,EAAK/pG,EAAO8iB,EAAQmrF,GAC1CjuG,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GAC5C,IAAK,IAAIL,EAAI,EAAGoV,EAAIvR,KAAKa,IAAI0lG,EAAIlqG,OAASijB,EAAQ,GAAInjB,EAAIoV,IAAKpV,EAC7DoqG,EAAIjnF,EAASnjB,GAAMK,IAAuC,GAA5BiuG,EAAetuG,EAAI,EAAIA,GAAU,IAmJnE,SAASwuG,EAAcpE,EAAK/pG,EAAO8iB,EAAQ6yD,EAAKrxE,EAAKD,GACnD,GAAIye,EAAS6yD,EAAMo0B,EAAIlqG,OAAQ,MAAM,IAAI6nG,WAAW,sBACpD,GAAI5kF,EAAS,EAAG,MAAM,IAAI4kF,WAAW,sBAGvC,SAAS0G,EAAYrE,EAAK/pG,EAAO8iB,EAAQmrF,EAAcI,GAKrD,OAJKA,GACHF,EAAapE,EAAK/pG,EAAO8iB,EAAQ,GAEnCykF,EAAQe,MAAMyB,EAAK/pG,EAAO8iB,EAAQmrF,EAAc,GAAI,GAC7CnrF,EAAS,EAWlB,SAASwrF,EAAavE,EAAK/pG,EAAO8iB,EAAQmrF,EAAcI,GAKtD,OAJKA,GACHF,EAAapE,EAAK/pG,EAAO8iB,EAAQ,GAEnCykF,EAAQe,MAAMyB,EAAK/pG,EAAO8iB,EAAQmrF,EAAc,GAAI,GAC7CnrF,EAAS,EA/clBjmB,EAAOgO,UAAUnD,MAAQ,SAAgBqe,EAAOmB,GAC9C,IAoBIqnF,EApBA3uG,EAAM7D,KAAK8D,OAqBf,IApBAkmB,IAAUA,GAGE,GACVA,GAASnmB,GACG,IAAGmmB,EAAQ,GACdA,EAAQnmB,IACjBmmB,EAAQnmB,IANVsnB,OAAcze,IAARye,EAAoBtnB,IAAQsnB,GASxB,GACRA,GAAOtnB,GACG,IAAGsnB,EAAM,GACVA,EAAMtnB,IACfsnB,EAAMtnB,GAGJsnB,EAAMnB,IAAOmB,EAAMnB,GAGnBlpB,EAAO4qG,qBACT8G,EAASxyG,KAAKowG,SAASpmF,EAAOmB,IACvBygF,UAAY9qG,EAAOgO,cACrB,CACL,IAAI2jG,EAAWtnF,EAAMnB,EACrBwoF,EAAS,IAAI1xG,EAAO2xG,OAAU/lG,GAC9B,IAAK,IAAI9I,EAAI,EAAGA,EAAI6uG,IAAY7uG,EAC9B4uG,EAAO5uG,GAAK5D,KAAK4D,EAAIomB,GAIzB,OAAOwoF,GAWT1xG,EAAOgO,UAAU4jG,WAAa,SAAqB3rF,EAAQmlF,EAAYoG,GACrEvrF,GAAkB,EAClBmlF,GAA0B,EACrBoG,GAAUP,EAAYhrF,EAAQmlF,EAAYlsG,KAAK8D,QAKpD,IAHA,IAAI6oG,EAAM3sG,KAAK+mB,GACX4rF,EAAM,EACN/uG,EAAI,IACCA,EAAIsoG,IAAeyG,GAAO,MACjChG,GAAO3sG,KAAK+mB,EAASnjB,GAAK+uG,EAG5B,OAAOhG,GAGT7rG,EAAOgO,UAAU8jG,WAAa,SAAqB7rF,EAAQmlF,EAAYoG,GACrEvrF,GAAkB,EAClBmlF,GAA0B,EACrBoG,GACHP,EAAYhrF,EAAQmlF,EAAYlsG,KAAK8D,QAKvC,IAFA,IAAI6oG,EAAM3sG,KAAK+mB,IAAWmlF,GACtByG,EAAM,EACHzG,EAAa,IAAMyG,GAAO,MAC/BhG,GAAO3sG,KAAK+mB,IAAWmlF,GAAcyG,EAGvC,OAAOhG,GAGT7rG,EAAOgO,UAAU+jG,UAAY,SAAoB9rF,EAAQurF,GAEvD,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACpC9D,KAAK+mB,IAGdjmB,EAAOgO,UAAUgkG,aAAe,SAAuB/rF,EAAQurF,GAE7D,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACpC9D,KAAK+mB,GAAW/mB,KAAK+mB,EAAS,IAAM,GAG7CjmB,EAAOgO,UAAUm/F,aAAe,SAAuBlnF,EAAQurF,GAE7D,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACnC9D,KAAK+mB,IAAW,EAAK/mB,KAAK+mB,EAAS,IAG7CjmB,EAAOgO,UAAUikG,aAAe,SAAuBhsF,EAAQurF,GAG7D,OAFKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,SAElC9D,KAAK+mB,GACT/mB,KAAK+mB,EAAS,IAAM,EACpB/mB,KAAK+mB,EAAS,IAAM,IACD,SAAnB/mB,KAAK+mB,EAAS,IAGrBjmB,EAAOgO,UAAUkkG,aAAe,SAAuBjsF,EAAQurF,GAG7D,OAFKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QAEpB,SAAf9D,KAAK+mB,IACT/mB,KAAK+mB,EAAS,IAAM,GACrB/mB,KAAK+mB,EAAS,IAAM,EACrB/mB,KAAK+mB,EAAS,KAGlBjmB,EAAOgO,UAAUmkG,UAAY,SAAoBlsF,EAAQmlF,EAAYoG,GACnEvrF,GAAkB,EAClBmlF,GAA0B,EACrBoG,GAAUP,EAAYhrF,EAAQmlF,EAAYlsG,KAAK8D,QAKpD,IAHA,IAAI6oG,EAAM3sG,KAAK+mB,GACX4rF,EAAM,EACN/uG,EAAI,IACCA,EAAIsoG,IAAeyG,GAAO,MACjChG,GAAO3sG,KAAK+mB,EAASnjB,GAAK+uG,EAM5B,OAFIhG,IAFJgG,GAAO,OAEShG,GAAOllG,KAAKE,IAAI,EAAG,EAAIukG,IAEhCS,GAGT7rG,EAAOgO,UAAUokG,UAAY,SAAoBnsF,EAAQmlF,EAAYoG,GACnEvrF,GAAkB,EAClBmlF,GAA0B,EACrBoG,GAAUP,EAAYhrF,EAAQmlF,EAAYlsG,KAAK8D,QAKpD,IAHA,IAAIF,EAAIsoG,EACJyG,EAAM,EACNhG,EAAM3sG,KAAK+mB,IAAWnjB,GACnBA,EAAI,IAAM+uG,GAAO,MACtBhG,GAAO3sG,KAAK+mB,IAAWnjB,GAAK+uG,EAM9B,OAFIhG,IAFJgG,GAAO,OAEShG,GAAOllG,KAAKE,IAAI,EAAG,EAAIukG,IAEhCS,GAGT7rG,EAAOgO,UAAUqkG,SAAW,SAAmBpsF,EAAQurF,GAErD,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACtB,IAAf9D,KAAK+mB,IAC0B,GAA5B,IAAO/mB,KAAK+mB,GAAU,GADK/mB,KAAK+mB,IAI3CjmB,EAAOgO,UAAUskG,YAAc,SAAsBrsF,EAAQurF,GACtDA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QAC3C,IAAI6oG,EAAM3sG,KAAK+mB,GAAW/mB,KAAK+mB,EAAS,IAAM,EAC9C,OAAc,MAAN4lF,EAAsB,WAANA,EAAmBA,GAG7C7rG,EAAOgO,UAAUukG,YAAc,SAAsBtsF,EAAQurF,GACtDA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QAC3C,IAAI6oG,EAAM3sG,KAAK+mB,EAAS,GAAM/mB,KAAK+mB,IAAW,EAC9C,OAAc,MAAN4lF,EAAsB,WAANA,EAAmBA,GAG7C7rG,EAAOgO,UAAUwkG,YAAc,SAAsBvsF,EAAQurF,GAG3D,OAFKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QAEnC9D,KAAK+mB,GACV/mB,KAAK+mB,EAAS,IAAM,EACpB/mB,KAAK+mB,EAAS,IAAM,GACpB/mB,KAAK+mB,EAAS,IAAM,IAGzBjmB,EAAOgO,UAAUykG,YAAc,SAAsBxsF,EAAQurF,GAG3D,OAFKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QAEnC9D,KAAK+mB,IAAW,GACrB/mB,KAAK+mB,EAAS,IAAM,GACpB/mB,KAAK+mB,EAAS,IAAM,EACpB/mB,KAAK+mB,EAAS,IAGnBjmB,EAAOgO,UAAU0kG,YAAc,SAAsBzsF,EAAQurF,GAE3D,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACpC0nG,EAAQuC,KAAK/tG,KAAM+mB,GAAQ,EAAM,GAAI,IAG9CjmB,EAAOgO,UAAU2kG,YAAc,SAAsB1sF,EAAQurF,GAE3D,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACpC0nG,EAAQuC,KAAK/tG,KAAM+mB,GAAQ,EAAO,GAAI,IAG/CjmB,EAAOgO,UAAU4kG,aAAe,SAAuB3sF,EAAQurF,GAE7D,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACpC0nG,EAAQuC,KAAK/tG,KAAM+mB,GAAQ,EAAM,GAAI,IAG9CjmB,EAAOgO,UAAU6kG,aAAe,SAAuB5sF,EAAQurF,GAE7D,OADKA,GAAUP,EAAYhrF,EAAQ,EAAG/mB,KAAK8D,QACpC0nG,EAAQuC,KAAK/tG,KAAM+mB,GAAQ,EAAO,GAAI,IAS/CjmB,EAAOgO,UAAU8kG,YAAc,SAAsB3vG,EAAO8iB,EAAQmlF,EAAYoG,IAC9EruG,GAASA,EACT8iB,GAAkB,EAClBmlF,GAA0B,EACrBoG,IAEHN,EAAShyG,KAAMiE,EAAO8iB,EAAQmlF,EADfzkG,KAAKE,IAAI,EAAG,EAAIukG,GAAc,EACO,GAGtD,IAAIyG,EAAM,EACN/uG,EAAI,EAER,IADA5D,KAAK+mB,GAAkB,IAAR9iB,IACNL,EAAIsoG,IAAeyG,GAAO,MACjC3yG,KAAK+mB,EAASnjB,GAAMK,EAAQ0uG,EAAO,IAGrC,OAAO5rF,EAASmlF,GAGlBprG,EAAOgO,UAAU+kG,YAAc,SAAsB5vG,EAAO8iB,EAAQmlF,EAAYoG,IAC9EruG,GAASA,EACT8iB,GAAkB,EAClBmlF,GAA0B,EACrBoG,IAEHN,EAAShyG,KAAMiE,EAAO8iB,EAAQmlF,EADfzkG,KAAKE,IAAI,EAAG,EAAIukG,GAAc,EACO,GAGtD,IAAItoG,EAAIsoG,EAAa,EACjByG,EAAM,EAEV,IADA3yG,KAAK+mB,EAASnjB,GAAa,IAARK,IACVL,GAAK,IAAM+uG,GAAO,MACzB3yG,KAAK+mB,EAASnjB,GAAMK,EAAQ0uG,EAAO,IAGrC,OAAO5rF,EAASmlF,GAGlBprG,EAAOgO,UAAUglG,WAAa,SAAqB7vG,EAAO8iB,EAAQurF,GAMhE,OALAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,IAAM,GACjDjmB,EAAO4qG,sBAAqBznG,EAAQwD,KAAKe,MAAMvE,IACpDjE,KAAK+mB,GAAmB,IAAR9iB,EACT8iB,EAAS,GAWlBjmB,EAAOgO,UAAUilG,cAAgB,SAAwB9vG,EAAO8iB,EAAQurF,GAUtE,OATAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,MAAQ,GACpDjmB,EAAO4qG,qBACT1rG,KAAK+mB,GAAmB,IAAR9iB,EAChBjE,KAAK+mB,EAAS,GAAM9iB,IAAU,GAE9BguG,EAAkBjyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAGlBjmB,EAAOgO,UAAUklG,cAAgB,SAAwB/vG,EAAO8iB,EAAQurF,GAUtE,OATAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,MAAQ,GACpDjmB,EAAO4qG,qBACT1rG,KAAK+mB,GAAW9iB,IAAU,EAC1BjE,KAAK+mB,EAAS,GAAc,IAAR9iB,GAEpBguG,EAAkBjyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAUlBjmB,EAAOgO,UAAUmlG,cAAgB,SAAwBhwG,EAAO8iB,EAAQurF,GAYtE,OAXAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,WAAY,GACxDjmB,EAAO4qG,qBACT1rG,KAAK+mB,EAAS,GAAM9iB,IAAU,GAC9BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,GAC9BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,EAC9BjE,KAAK+mB,GAAmB,IAAR9iB,GAEhBkuG,EAAkBnyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAGlBjmB,EAAOgO,UAAUolG,cAAgB,SAAwBjwG,EAAO8iB,EAAQurF,GAYtE,OAXAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,WAAY,GACxDjmB,EAAO4qG,qBACT1rG,KAAK+mB,GAAW9iB,IAAU,GAC1BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,GAC9BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,EAC9BjE,KAAK+mB,EAAS,GAAc,IAAR9iB,GAEpBkuG,EAAkBnyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAGlBjmB,EAAOgO,UAAUqlG,WAAa,SAAqBlwG,EAAO8iB,EAAQmlF,EAAYoG,GAG5E,GAFAruG,GAASA,EACT8iB,GAAkB,GACburF,EAAU,CACb,IAAI8B,EAAQ3sG,KAAKE,IAAI,EAAG,EAAIukG,EAAa,GAEzC8F,EAAShyG,KAAMiE,EAAO8iB,EAAQmlF,EAAYkI,EAAQ,GAAIA,GAGxD,IAAIxwG,EAAI,EACJ+uG,EAAM,EACN0B,EAAM,EAEV,IADAr0G,KAAK+mB,GAAkB,IAAR9iB,IACNL,EAAIsoG,IAAeyG,GAAO,MAC7B1uG,EAAQ,GAAa,IAARowG,GAAsC,IAAzBr0G,KAAK+mB,EAASnjB,EAAI,KAC9CywG,EAAM,GAERr0G,KAAK+mB,EAASnjB,IAAOK,EAAQ0uG,GAAQ,GAAK0B,EAAM,IAGlD,OAAOttF,EAASmlF,GAGlBprG,EAAOgO,UAAUwlG,WAAa,SAAqBrwG,EAAO8iB,EAAQmlF,EAAYoG,GAG5E,GAFAruG,GAASA,EACT8iB,GAAkB,GACburF,EAAU,CACb,IAAI8B,EAAQ3sG,KAAKE,IAAI,EAAG,EAAIukG,EAAa,GAEzC8F,EAAShyG,KAAMiE,EAAO8iB,EAAQmlF,EAAYkI,EAAQ,GAAIA,GAGxD,IAAIxwG,EAAIsoG,EAAa,EACjByG,EAAM,EACN0B,EAAM,EAEV,IADAr0G,KAAK+mB,EAASnjB,GAAa,IAARK,IACVL,GAAK,IAAM+uG,GAAO,MACrB1uG,EAAQ,GAAa,IAARowG,GAAsC,IAAzBr0G,KAAK+mB,EAASnjB,EAAI,KAC9CywG,EAAM,GAERr0G,KAAK+mB,EAASnjB,IAAOK,EAAQ0uG,GAAQ,GAAK0B,EAAM,IAGlD,OAAOttF,EAASmlF,GAGlBprG,EAAOgO,UAAUylG,UAAY,SAAoBtwG,EAAO8iB,EAAQurF,GAO9D,OANAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,KAAO,KAClDjmB,EAAO4qG,sBAAqBznG,EAAQwD,KAAKe,MAAMvE,IAChDA,EAAQ,IAAGA,EAAQ,IAAOA,EAAQ,GACtCjE,KAAK+mB,GAAmB,IAAR9iB,EACT8iB,EAAS,GAGlBjmB,EAAOgO,UAAU0lG,aAAe,SAAuBvwG,EAAO8iB,EAAQurF,GAUpE,OATAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,OAAS,OACrDjmB,EAAO4qG,qBACT1rG,KAAK+mB,GAAmB,IAAR9iB,EAChBjE,KAAK+mB,EAAS,GAAM9iB,IAAU,GAE9BguG,EAAkBjyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAGlBjmB,EAAOgO,UAAU2lG,aAAe,SAAuBxwG,EAAO8iB,EAAQurF,GAUpE,OATAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,OAAS,OACrDjmB,EAAO4qG,qBACT1rG,KAAK+mB,GAAW9iB,IAAU,EAC1BjE,KAAK+mB,EAAS,GAAc,IAAR9iB,GAEpBguG,EAAkBjyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAGlBjmB,EAAOgO,UAAU4lG,aAAe,SAAuBzwG,EAAO8iB,EAAQurF,GAYpE,OAXAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,YAAa,YACzDjmB,EAAO4qG,qBACT1rG,KAAK+mB,GAAmB,IAAR9iB,EAChBjE,KAAK+mB,EAAS,GAAM9iB,IAAU,EAC9BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,GAC9BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,IAE9BkuG,EAAkBnyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAGlBjmB,EAAOgO,UAAU6lG,aAAe,SAAuB1wG,EAAO8iB,EAAQurF,GAapE,OAZAruG,GAASA,EACT8iB,GAAkB,EACburF,GAAUN,EAAShyG,KAAMiE,EAAO8iB,EAAQ,EAAG,YAAa,YACzD9iB,EAAQ,IAAGA,EAAQ,WAAaA,EAAQ,GACxCnD,EAAO4qG,qBACT1rG,KAAK+mB,GAAW9iB,IAAU,GAC1BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,GAC9BjE,KAAK+mB,EAAS,GAAM9iB,IAAU,EAC9BjE,KAAK+mB,EAAS,GAAc,IAAR9iB,GAEpBkuG,EAAkBnyG,KAAMiE,EAAO8iB,GAAQ,GAElCA,EAAS,GAgBlBjmB,EAAOgO,UAAU8lG,aAAe,SAAuB3wG,EAAO8iB,EAAQurF,GACpE,OAAOD,EAAWryG,KAAMiE,EAAO8iB,GAAQ,EAAMurF,IAG/CxxG,EAAOgO,UAAU+lG,aAAe,SAAuB5wG,EAAO8iB,EAAQurF,GACpE,OAAOD,EAAWryG,KAAMiE,EAAO8iB,GAAQ,EAAOurF,IAWhDxxG,EAAOgO,UAAUgmG,cAAgB,SAAwB7wG,EAAO8iB,EAAQurF,GACtE,OAAOC,EAAYvyG,KAAMiE,EAAO8iB,GAAQ,EAAMurF,IAGhDxxG,EAAOgO,UAAUimG,cAAgB,SAAwB9wG,EAAO8iB,EAAQurF,GACtE,OAAOC,EAAYvyG,KAAMiE,EAAO8iB,GAAQ,EAAOurF,IAIjDxxG,EAAOgO,UAAU0zF,KAAO,SAAe7wF,EAAQqjG,EAAahrF,EAAOmB,GAQjE,GAPKnB,IAAOA,EAAQ,GACfmB,GAAe,IAARA,IAAWA,EAAMnrB,KAAK8D,QAC9BkxG,GAAerjG,EAAO7N,SAAQkxG,EAAcrjG,EAAO7N,QAClDkxG,IAAaA,EAAc,GAC5B7pF,EAAM,GAAKA,EAAMnB,IAAOmB,EAAMnB,GAG9BmB,IAAQnB,EAAO,OAAO,EAC1B,GAAsB,IAAlBrY,EAAO7N,QAAgC,IAAhB9D,KAAK8D,OAAc,OAAO,EAGrD,GAAIkxG,EAAc,EAChB,MAAM,IAAIrJ,WAAW,6BAEvB,GAAI3hF,EAAQ,GAAKA,GAAShqB,KAAK8D,OAAQ,MAAM,IAAI6nG,WAAW,6BAC5D,GAAIxgF,EAAM,EAAG,MAAM,IAAIwgF,WAAW,2BAG9BxgF,EAAMnrB,KAAK8D,SAAQqnB,EAAMnrB,KAAK8D,QAC9B6N,EAAO7N,OAASkxG,EAAc7pF,EAAMnB,IACtCmB,EAAMxZ,EAAO7N,OAASkxG,EAAchrF,GAGtC,IACIpmB,EADAC,EAAMsnB,EAAMnB,EAGhB,GAAIhqB,OAAS2R,GAAUqY,EAAQgrF,GAAeA,EAAc7pF,EAE1D,IAAKvnB,EAAIC,EAAM,EAAGD,GAAK,IAAKA,EAC1B+N,EAAO/N,EAAIoxG,GAAeh1G,KAAK4D,EAAIomB,QAEhC,GAAInmB,EAAM,MAAS/C,EAAO4qG,oBAE/B,IAAK9nG,EAAI,EAAGA,EAAIC,IAAOD,EACrB+N,EAAO/N,EAAIoxG,GAAeh1G,KAAK4D,EAAIomB,QAGrCjqB,WAAW+O,UAAUtI,IAAIzC,KACvB4N,EACA3R,KAAKowG,SAASpmF,EAAOA,EAAQnmB,GAC7BmxG,GAIJ,OAAOnxG,GAOT/C,EAAOgO,UAAUvL,KAAO,SAAeopG,EAAK3iF,EAAOmB,EAAKu0B,GAEtD,GAAmB,kBAARitD,EAAkB,CAS3B,GARqB,kBAAV3iF,GACT01B,EAAW11B,EACXA,EAAQ,EACRmB,EAAMnrB,KAAK8D,QACa,kBAARqnB,IAChBu0B,EAAWv0B,EACXA,EAAMnrB,KAAK8D,QAEM,IAAf6oG,EAAI7oG,OAAc,CACpB,IAAI6b,EAAOgtF,EAAI/sF,WAAW,GACtBD,EAAO,MACTgtF,EAAMhtF,GAGV,QAAiBjT,IAAbgzC,GAA8C,kBAAbA,EACnC,MAAM,IAAIssD,UAAU,6BAEtB,GAAwB,kBAAbtsD,IAA0B5+C,EAAOurG,WAAW3sD,GACrD,MAAM,IAAIssD,UAAU,qBAAuBtsD,OAErB,kBAARitD,IAChBA,GAAY,KAId,GAAI3iF,EAAQ,GAAKhqB,KAAK8D,OAASkmB,GAAShqB,KAAK8D,OAASqnB,EACpD,MAAM,IAAIwgF,WAAW,sBAGvB,GAAIxgF,GAAOnB,EACT,OAAOhqB,KAQT,IAAI4D,EACJ,GANAomB,KAAkB,EAClBmB,OAAcze,IAARye,EAAoBnrB,KAAK8D,OAASqnB,IAAQ,EAE3CwhF,IAAKA,EAAM,GAGG,kBAARA,EACT,IAAK/oG,EAAIomB,EAAOpmB,EAAIunB,IAAOvnB,EACzB5D,KAAK4D,GAAK+oG,MAEP,CACL,IAAImF,EAAQhxG,EAAO2rG,SAASE,GACxBA,EACAI,EAAY,IAAIjsG,EAAO6rG,EAAKjtD,GAAU3wC,YACtClL,EAAMiuG,EAAMhuG,OAChB,IAAKF,EAAI,EAAGA,EAAIunB,EAAMnB,IAASpmB,EAC7B5D,KAAK4D,EAAIomB,GAAS8nF,EAAMluG,EAAIC,GAIhC,OAAO7D,MAMT,IAAIi1G,EAAoB,qBAmBxB,SAAS93E,EAAOwP,GACd,OAAIA,EAAI,GAAW,IAAMA,EAAE59B,SAAS,IAC7B49B,EAAE59B,SAAS,IAGpB,SAASg+F,EAAaxhG,EAAQwjG,GAE5B,IAAIW,EADJX,EAAQA,GAASmG,IAMjB,IAJA,IAAIpxG,EAASyH,EAAOzH,OAChBqxG,EAAgB,KAChBrD,EAAQ,GAEHluG,EAAI,EAAGA,EAAIE,IAAUF,EAAG,CAI/B,IAHA8rG,EAAYnkG,EAAOqU,WAAWhc,IAGd,OAAU8rG,EAAY,MAAQ,CAE5C,IAAKyF,EAAe,CAElB,GAAIzF,EAAY,MAAQ,EAEjBX,GAAS,IAAM,GAAG+C,EAAMztG,KAAK,IAAM,IAAM,KAC9C,SACK,GAAIT,EAAI,IAAME,EAAQ,EAEtBirG,GAAS,IAAM,GAAG+C,EAAMztG,KAAK,IAAM,IAAM,KAC9C,SAIF8wG,EAAgBzF,EAEhB,SAIF,GAAIA,EAAY,MAAQ,EACjBX,GAAS,IAAM,GAAG+C,EAAMztG,KAAK,IAAM,IAAM,KAC9C8wG,EAAgBzF,EAChB,SAIFA,EAAkE,OAArDyF,EAAgB,OAAU,GAAKzF,EAAY,YAC/CyF,IAEJpG,GAAS,IAAM,GAAG+C,EAAMztG,KAAK,IAAM,IAAM,KAMhD,GAHA8wG,EAAgB,KAGZzF,EAAY,IAAM,CACpB,IAAKX,GAAS,GAAK,EAAG,MACtB+C,EAAMztG,KAAKqrG,QACN,GAAIA,EAAY,KAAO,CAC5B,IAAKX,GAAS,GAAK,EAAG,MACtB+C,EAAMztG,KACJqrG,GAAa,EAAM,IACP,GAAZA,EAAmB,UAEhB,GAAIA,EAAY,MAAS,CAC9B,IAAKX,GAAS,GAAK,EAAG,MACtB+C,EAAMztG,KACJqrG,GAAa,GAAM,IACnBA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,SAEhB,MAAIA,EAAY,SASrB,MAAM,IAAIz4D,MAAM,sBARhB,IAAK83D,GAAS,GAAK,EAAG,MACtB+C,EAAMztG,KACJqrG,GAAa,GAAO,IACpBA,GAAa,GAAM,GAAO,IAC1BA,GAAa,EAAM,GAAO,IACd,GAAZA,EAAmB,MAOzB,OAAOoC,EA4BT,SAAS9E,EAAettF,GACtB,OAAO6rF,EAAO6J,YAhIhB,SAAsB11F,GAIpB,IAFAA,EAUF,SAAqBA,GACnB,OAAIA,EAAIzC,KAAayC,EAAIzC,OAClByC,EAAIK,QAAQ,aAAc,IAZ3Bs1F,CAAW31F,GAAKK,QAAQk1F,EAAmB,KAEzCnxG,OAAS,EAAG,MAAO,GAE3B,KAAO4b,EAAI5b,OAAS,IAAM,GACxB4b,GAAY,IAEd,OAAOA,EAuHmB41F,CAAY51F,IAGxC,SAAS8uF,EAAY/hG,EAAKqzE,EAAK/4D,EAAQjjB,GACrC,IAAK,IAAIF,EAAI,EAAGA,EAAIE,KACbF,EAAImjB,GAAU+4D,EAAIh8E,QAAYF,GAAK6I,EAAI3I,UADhBF,EAE5Bk8E,EAAIl8E,EAAImjB,GAAUta,EAAI7I,GAExB,OAAOA,K,kDCrvDTrG,EAAQ2uG,WAuCR,SAAqBqJ,GACnB,IAAIC,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAC3B,OAAuC,GAA9BE,EAAWC,GAAuB,EAAKA,GA1ClDp4G,EAAQ63G,YAiDR,SAAsBG,GACpB,IAAIK,EAcAhyG,EAbA4xG,EAAOC,EAAQF,GACfG,EAAWF,EAAK,GAChBG,EAAkBH,EAAK,GAEvBrwF,EAAM,IAAI0wF,EAVhB,SAAsBN,EAAKG,EAAUC,GACnC,OAAuC,GAA9BD,EAAWC,GAAuB,EAAKA,EAS9BG,CAAYP,EAAKG,EAAUC,IAEzCI,EAAU,EAGVlyG,EAAM8xG,EAAkB,EACxBD,EAAW,EACXA,EAGJ,IAAK9xG,EAAI,EAAGA,EAAIC,EAAKD,GAAK,EACxBgyG,EACGI,EAAUT,EAAI31F,WAAWhc,KAAO,GAChCoyG,EAAUT,EAAI31F,WAAWhc,EAAI,KAAO,GACpCoyG,EAAUT,EAAI31F,WAAWhc,EAAI,KAAO,EACrCoyG,EAAUT,EAAI31F,WAAWhc,EAAI,IAC/BuhB,EAAI4wF,KAAcH,GAAO,GAAM,IAC/BzwF,EAAI4wF,KAAcH,GAAO,EAAK,IAC9BzwF,EAAI4wF,KAAmB,IAANH,EAGK,IAApBD,IACFC,EACGI,EAAUT,EAAI31F,WAAWhc,KAAO,EAChCoyG,EAAUT,EAAI31F,WAAWhc,EAAI,KAAO,EACvCuhB,EAAI4wF,KAAmB,IAANH,GAGK,IAApBD,IACFC,EACGI,EAAUT,EAAI31F,WAAWhc,KAAO,GAChCoyG,EAAUT,EAAI31F,WAAWhc,EAAI,KAAO,EACpCoyG,EAAUT,EAAI31F,WAAWhc,EAAI,KAAO,EACvCuhB,EAAI4wF,KAAcH,GAAO,EAAK,IAC9BzwF,EAAI4wF,KAAmB,IAANH,GAGnB,OAAOzwF,GA3FT5nB,EAAQ4xG,cAkHR,SAAwB8G,GAQtB,IAPA,IAAIL,EACA/xG,EAAMoyG,EAAMnyG,OACZoyG,EAAaryG,EAAM,EACnBkI,EAAQ,GACRoqG,EAAiB,MAGZvyG,EAAI,EAAGwyG,EAAOvyG,EAAMqyG,EAAYtyG,EAAIwyG,EAAMxyG,GAAKuyG,EACtDpqG,EAAM1H,KAAKgyG,EAAYJ,EAAOryG,EAAIA,EAAIuyG,EAAkBC,EAAOA,EAAQxyG,EAAIuyG,IAI1D,IAAfD,GACFN,EAAMK,EAAMpyG,EAAM,GAClBkI,EAAM1H,KACJiyG,EAAOV,GAAO,GACdU,EAAQV,GAAO,EAAK,IACpB,OAEsB,IAAfM,IACTN,GAAOK,EAAMpyG,EAAM,IAAM,GAAKoyG,EAAMpyG,EAAM,GAC1CkI,EAAM1H,KACJiyG,EAAOV,GAAO,IACdU,EAAQV,GAAO,EAAK,IACpBU,EAAQV,GAAO,EAAK,IACpB,MAIJ,OAAO7pG,EAAM2H,KAAK,KAzIpB,IALA,IAAI4iG,EAAS,GACTN,EAAY,GACZH,EAA4B,qBAAf91G,WAA6BA,WAAa0U,MAEvDkL,EAAO,mEACF/b,EAAI,EAAGC,EAAM8b,EAAK7b,OAAQF,EAAIC,IAAOD,EAC5C0yG,EAAO1yG,GAAK+b,EAAK/b,GACjBoyG,EAAUr2F,EAAKC,WAAWhc,IAAMA,EAQlC,SAAS6xG,EAASF,GAChB,IAAI1xG,EAAM0xG,EAAIzxG,OAEd,GAAID,EAAM,EAAI,EACZ,MAAM,IAAIozC,MAAM,kDAKlB,IAAIy+D,EAAWH,EAAInyG,QAAQ,KAO3B,OANkB,IAAdsyG,IAAiBA,EAAW7xG,GAMzB,CAAC6xG,EAJcA,IAAa7xG,EAC/B,EACA,EAAK6xG,EAAW,GAsEtB,SAASW,EAAaJ,EAAOjsF,EAAOmB,GAGlC,IAFA,IAAIyqF,EARoBW,EASpB32B,EAAS,GACJh8E,EAAIomB,EAAOpmB,EAAIunB,EAAKvnB,GAAK,EAChCgyG,GACIK,EAAMryG,IAAM,GAAM,WAClBqyG,EAAMryG,EAAI,IAAM,EAAK,QACP,IAAfqyG,EAAMryG,EAAI,IACbg8E,EAAOv7E,KAdFiyG,GADiBC,EAeMX,IAdT,GAAK,IACxBU,EAAOC,GAAO,GAAK,IACnBD,EAAOC,GAAO,EAAI,IAClBD,EAAa,GAANC,IAaT,OAAO32B,EAAOlsE,KAAK,IAjGrBsiG,EAAU,IAAIp2F,WAAW,IAAM,GAC/Bo2F,EAAU,IAAIp2F,WAAW,IAAM,I,iBClB/BriB,EAAQwwG,KAAO,SAAUryB,EAAQ30D,EAAQyvF,EAAMC,EAAMC,GACnD,IAAI5sE,EAAGn1B,EACHgiG,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACTlzG,EAAI4yG,EAAQE,EAAS,EAAK,EAC1BztF,EAAIutF,GAAQ,EAAI,EAChB1hG,EAAI4mE,EAAO30D,EAASnjB,GAOxB,IALAA,GAAKqlB,EAEL6gB,EAAIh1B,GAAM,IAAOgiG,GAAU,EAC3BhiG,KAAQgiG,EACRA,GAASH,EACFG,EAAQ,EAAGhtE,EAAS,IAAJA,EAAW4xC,EAAO30D,EAASnjB,GAAIA,GAAKqlB,EAAG6tF,GAAS,GAKvE,IAHAniG,EAAIm1B,GAAM,IAAOgtE,GAAU,EAC3BhtE,KAAQgtE,EACRA,GAASL,EACFK,EAAQ,EAAGniG,EAAS,IAAJA,EAAW+mE,EAAO30D,EAASnjB,GAAIA,GAAKqlB,EAAG6tF,GAAS,GAEvE,GAAU,IAANhtE,EACFA,EAAI,EAAI+sE,MACH,IAAI/sE,IAAM8sE,EACf,OAAOjiG,EAAIoiG,IAAsB7B,KAAdpgG,GAAK,EAAI,GAE5BH,GAAQlN,KAAKE,IAAI,EAAG8uG,GACpB3sE,GAAQ+sE,EAEV,OAAQ/hG,GAAK,EAAI,GAAKH,EAAIlN,KAAKE,IAAI,EAAGmiC,EAAI2sE,IAG5Cl5G,EAAQgvG,MAAQ,SAAU7wB,EAAQz3E,EAAO8iB,EAAQyvF,EAAMC,EAAMC,GAC3D,IAAI5sE,EAAGn1B,EAAGE,EACN8hG,EAAiB,EAATD,EAAcD,EAAO,EAC7BG,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBI,EAAe,KAATP,EAAchvG,KAAKE,IAAI,GAAI,IAAMF,KAAKE,IAAI,GAAI,IAAM,EAC1D/D,EAAI4yG,EAAO,EAAKE,EAAS,EACzBztF,EAAIutF,EAAO,GAAK,EAChB1hG,EAAI7Q,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,EAmC1D,IAjCAA,EAAQwD,KAAKmP,IAAI3S,GAEbkZ,MAAMlZ,IAAUA,IAAUixG,KAC5BvgG,EAAIwI,MAAMlZ,GAAS,EAAI,EACvB6lC,EAAI8sE,IAEJ9sE,EAAIriC,KAAKe,MAAMf,KAAK/E,IAAIuB,GAASwD,KAAKwvG,KAClChzG,GAAS4Q,EAAIpN,KAAKE,IAAI,GAAImiC,IAAM,IAClCA,IACAj1B,GAAK,IAGL5Q,GADE6lC,EAAI+sE,GAAS,EACNG,EAAKniG,EAELmiG,EAAKvvG,KAAKE,IAAI,EAAG,EAAIkvG,IAEpBhiG,GAAK,IACfi1B,IACAj1B,GAAK,GAGHi1B,EAAI+sE,GAASD,GACfjiG,EAAI,EACJm1B,EAAI8sE,GACK9sE,EAAI+sE,GAAS,GACtBliG,GAAM1Q,EAAQ4Q,EAAK,GAAKpN,KAAKE,IAAI,EAAG8uG,GACpC3sE,GAAQ+sE,IAERliG,EAAI1Q,EAAQwD,KAAKE,IAAI,EAAGkvG,EAAQ,GAAKpvG,KAAKE,IAAI,EAAG8uG,GACjD3sE,EAAI,IAID2sE,GAAQ,EAAG/6B,EAAO30D,EAASnjB,GAAS,IAAJ+Q,EAAU/Q,GAAKqlB,EAAGtU,GAAK,IAAK8hG,GAAQ,GAI3E,IAFA3sE,EAAKA,GAAK2sE,EAAQ9hG,EAClBgiG,GAAQF,EACDE,EAAO,EAAGj7B,EAAO30D,EAASnjB,GAAS,IAAJkmC,EAAUlmC,GAAKqlB,EAAG6gB,GAAK,IAAK6sE,GAAQ,GAE1Ej7B,EAAO30D,EAASnjB,EAAIqlB,IAAU,IAAJnU,I,iBCnF5B,IAAI/F,EAAW,GAAGA,SAElBmoG,EAAO35G,QAAUkX,MAAMuX,SAAW,SAAU7G,GAC1C,MAA6B,kBAAtBpW,EAAShL,KAAKohB,K,mBCHvB,OAaA,SAAY5d,EAAQ4vG,GAEnB,aAE6D,kBAAnBD,EAAO35G,QAShD25G,EAAO35G,QAAUgK,EAAO/J,SACvB25G,EAAS5vG,GAAQ,GACjB,SAAUg/D,GACT,IAAMA,EAAE/oE,SACP,MAAM,IAAIy5C,MAAO,4CAElB,OAAOkgE,EAAS5wC,IAGlB4wC,EAAS5vG,GAtBX,CA0BuB,qBAAX9J,OAAyBA,OAASuC,MAAM,SAAUvC,EAAQ25G,GAMtE,aAEA,IAAIjyF,EAAM,GAENkyF,EAAWxoG,OAAOyoG,eAElB3rG,EAAQwZ,EAAIxZ,MAEZ4rG,EAAOpyF,EAAIoyF,KAAO,SAAUj0G,GAC/B,OAAO6hB,EAAIoyF,KAAKxzG,KAAMT,IACnB,SAAUA,GACb,OAAO6hB,EAAIvf,OAAOlB,MAAO,GAAIpB,IAI1Be,EAAO8gB,EAAI9gB,KAEXjB,EAAU+hB,EAAI/hB,QAEdo0G,EAAa,GAEbzoG,EAAWyoG,EAAWzoG,SAEtB0oG,EAASD,EAAWj4F,eAEpBm4F,EAAaD,EAAO1oG,SAEpB4oG,EAAuBD,EAAW3zG,KAAM8K,QAExC+oG,EAAU,GAEVC,EAAa,SAAqB3wG,GASpC,MAAsB,oBAARA,GAA8C,kBAAjBA,EAAIge,UAC1B,oBAAbhe,EAAIpB,MAIVgyG,EAAW,SAAmB5wG,GAChC,OAAc,MAAPA,GAAeA,IAAQA,EAAIzJ,QAIhCD,EAAWC,EAAOD,SAIjBu6G,EAA4B,CAC/BpyG,MAAM,EACN8G,KAAK,EACLurG,OAAO,EACPC,UAAU,GAGX,SAASC,EAASv4F,EAAMyQ,EAAMxJ,GAG7B,IAAIhjB,EAAG+oG,EACNwL,GAHDvxF,EAAMA,GAAOppB,GAGCsP,cAAe,UAG7B,GADAqrG,EAAO7rB,KAAO3sE,EACTyQ,EACJ,IAAMxsB,KAAKm0G,GAYVpL,EAAMv8E,EAAMxsB,IAAOwsB,EAAKF,cAAgBE,EAAKF,aAActsB,KAE1Du0G,EAAOxzF,aAAc/gB,EAAG+oG,GAI3B/lF,EAAIwxF,KAAKnrG,YAAakrG,GAAShrG,WAAWC,YAAa+qG,GAIzD,SAASE,EAAQnxG,GAChB,OAAY,MAAPA,EACGA,EAAM,GAIQ,kBAARA,GAAmC,oBAARA,EACxCswG,EAAYzoG,EAAShL,KAAMmD,KAAW,gBAC/BA,EAQT,IACC5J,EAAU,QAGVg7G,EAAS,SAATA,EAAmBxoF,EAAUrqB,GAI5B,OAAO,IAAI6yG,EAAOzuC,GAAG0uC,KAAMzoF,EAAUrqB,IA0VvC,SAAS+yG,EAAatxG,GAMrB,IAAIpD,IAAWoD,GAAO,WAAYA,GAAOA,EAAIpD,OAC5C6B,EAAO0yG,EAAQnxG,GAEhB,OAAK2wG,EAAY3wG,KAAS4wG,EAAU5wG,KAIpB,UAATvB,GAA+B,IAAX7B,GACR,kBAAXA,GAAuBA,EAAS,GAAOA,EAAS,KAAOoD,GArWhEoxG,EAAOzuC,GAAKyuC,EAAOxpG,UAAY,CAG9B2pG,OAAQn7G,EAERwjB,YAAaw3F,EAGbx0G,OAAQ,EAERogB,QAAS,WACR,OAAOvY,EAAM5H,KAAM/D,OAKpBsH,IAAK,SAAUivG,GAGd,OAAY,MAAPA,EACG5qG,EAAM5H,KAAM/D,MAIbu2G,EAAM,EAAIv2G,KAAMu2G,EAAMv2G,KAAK8D,QAAW9D,KAAMu2G,IAKpDmC,UAAW,SAAUC,GAGpB,IAAI/G,EAAM0G,EAAOM,MAAO54G,KAAK8gB,cAAe63F,GAM5C,OAHA/G,EAAIiH,WAAa74G,KAGV4xG,GAIRkH,KAAM,SAAUtzG,GACf,OAAO8yG,EAAOQ,KAAM94G,KAAMwF,IAG3BgO,IAAK,SAAUhO,GACd,OAAOxF,KAAK04G,UAAWJ,EAAO9kG,IAAKxT,MAAM,SAAU+4G,EAAMn1G,GACxD,OAAO4B,EAASzB,KAAMg1G,EAAMn1G,EAAGm1G,QAIjCptG,MAAO,WACN,OAAO3L,KAAK04G,UAAW/sG,EAAMjH,MAAO1E,KAAMmE,aAG3C60G,MAAO,WACN,OAAOh5G,KAAK45B,GAAI,IAGjBq/E,KAAM,WACL,OAAOj5G,KAAK45B,IAAK,IAGlBs/E,KAAM,WACL,OAAOl5G,KAAK04G,UAAWJ,EAAOa,KAAMn5G,MAAM,SAAUo5G,EAAOx1G,GAC1D,OAASA,EAAI,GAAM,OAIrBy1G,IAAK,WACJ,OAAOr5G,KAAK04G,UAAWJ,EAAOa,KAAMn5G,MAAM,SAAUo5G,EAAOx1G,GAC1D,OAAOA,EAAI,OAIbg2B,GAAI,SAAUh2B,GACb,IAAIC,EAAM7D,KAAK8D,OACdkV,GAAKpV,GAAMA,EAAI,EAAIC,EAAM,GAC1B,OAAO7D,KAAK04G,UAAW1/F,GAAK,GAAKA,EAAInV,EAAM,CAAE7D,KAAMgZ,IAAQ,KAG5DmS,IAAK,WACJ,OAAOnrB,KAAK64G,YAAc74G,KAAK8gB,eAKhCzc,KAAMA,EACN+vC,KAAMjvB,EAAIivB,KACVjvC,OAAQggB,EAAIhgB,QAGbmzG,EAAOl5F,OAASk5F,EAAOzuC,GAAGzqD,OAAS,WAClC,IAAI1b,EAAS41G,EAAM7sG,EAAK+1F,EAAM+W,EAAa/5F,EAC1C7N,EAASxN,UAAW,IAAO,GAC3BP,EAAI,EACJE,EAASK,UAAUL,OACnBub,GAAO,EAsBR,IAnBuB,mBAAX1N,IACX0N,EAAO1N,EAGPA,EAASxN,UAAWP,IAAO,GAC3BA,KAIsB,kBAAX+N,GAAwBkmG,EAAYlmG,KAC/CA,EAAS,IAIL/N,IAAME,IACV6N,EAAS3R,KACT4D,KAGOA,EAAIE,EAAQF,IAGnB,GAAqC,OAA9BF,EAAUS,UAAWP,IAG3B,IAAM01G,KAAQ51G,EACb8+F,EAAO9+F,EAAS41G,GAIF,cAATA,GAAwB3nG,IAAW6wF,IAKnCnjF,GAAQmjF,IAAU8V,EAAOkB,cAAehX,KAC1C+W,EAAc9kG,MAAMuX,QAASw2E,MAC/B/1F,EAAMkF,EAAQ2nG,GAIb95F,EADI+5F,IAAgB9kG,MAAMuX,QAASvf,GAC3B,GACI8sG,GAAgBjB,EAAOkB,cAAe/sG,GAG1CA,EAFA,GAIT8sG,GAAc,EAGd5nG,EAAQ2nG,GAAShB,EAAOl5F,OAAQC,EAAMG,EAAOgjF,SAGzB91F,IAAT81F,IACX7wF,EAAQ2nG,GAAS9W,IAOrB,OAAO7wF,GAGR2mG,EAAOl5F,OAAQ,CAGdq6F,QAAS,UAAan8G,EAAUmK,KAAKgB,UAAWsX,QAAS,MAAO,IAGhE25F,SAAS,EAET7rG,MAAO,SAAU8rG,GAChB,MAAM,IAAI1iE,MAAO0iE,IAGlB5wF,KAAM,aAENywF,cAAe,SAAUtyG,GACxB,IAAI9J,EAAOw8G,EAIX,SAAM1yG,GAAgC,oBAAzB6H,EAAShL,KAAMmD,QAI5B9J,EAAQi6G,EAAUnwG,KASK,oBADvB0yG,EAAOnC,EAAO1zG,KAAM3G,EAAO,gBAAmBA,EAAM0jB,cACf42F,EAAW3zG,KAAM61G,KAAWjC,IAGlEkC,cAAe,SAAU3yG,GACxB,IAAIoyG,EAEJ,IAAMA,KAAQpyG,EACb,OAAO,EAER,OAAO,GAKR4yG,WAAY,SAAUn6F,EAAMjc,EAASkjB,GACpCsxF,EAASv4F,EAAM,CAAEq4F,MAAOt0G,GAAWA,EAAQs0G,OAASpxF,IAGrDkyF,KAAM,SAAU5xG,EAAK1B,GACpB,IAAI1B,EAAQF,EAAI,EAEhB,GAAK40G,EAAatxG,GAEjB,IADApD,EAASoD,EAAIpD,OACLF,EAAIE,IACqC,IAA3C0B,EAASzB,KAAMmD,EAAKtD,GAAKA,EAAGsD,EAAKtD,IADnBA,UAMpB,IAAMA,KAAKsD,EACV,IAAgD,IAA3C1B,EAASzB,KAAMmD,EAAKtD,GAAKA,EAAGsD,EAAKtD,IACrC,MAKH,OAAOsD,GAIR6yG,UAAW,SAAU50F,EAAK2R,GACzB,IAAI86E,EAAM96E,GAAW,GAarB,OAXY,MAAP3R,IACCqzF,EAAa3pG,OAAQsW,IACzBmzF,EAAOM,MAAOhH,EACE,kBAARzsF,EACN,CAAEA,GAAQA,GAGZ9gB,EAAKN,KAAM6tG,EAAKzsF,IAIXysF,GAGRoI,QAAS,SAAUjB,EAAM5zF,EAAKvhB,GAC7B,OAAc,MAAPuhB,GAAe,EAAI/hB,EAAQW,KAAMohB,EAAK4zF,EAAMn1G,IAKpDg1G,MAAO,SAAUI,EAAOiB,GAKvB,IAJA,IAAIp2G,GAAOo2G,EAAOn2G,OACjBkV,EAAI,EACJpV,EAAIo1G,EAAMl1G,OAEHkV,EAAInV,EAAKmV,IAChBggG,EAAOp1G,KAAQq2G,EAAQjhG,GAKxB,OAFAggG,EAAMl1G,OAASF,EAERo1G,GAGRG,KAAM,SAAUR,EAAOnzG,EAAUo7E,GAShC,IARA,IACCs5B,EAAU,GACVt2G,EAAI,EACJE,EAAS60G,EAAM70G,OACfq2G,GAAkBv5B,EAIXh9E,EAAIE,EAAQF,KACA4B,EAAUmzG,EAAO/0G,GAAKA,KAChBu2G,GACxBD,EAAQ71G,KAAMs0G,EAAO/0G,IAIvB,OAAOs2G,GAIR1mG,IAAK,SAAUmlG,EAAOnzG,EAAUqmG,GAC/B,IAAI/nG,EAAQG,EACXL,EAAI,EACJguG,EAAM,GAGP,GAAK4G,EAAaG,GAEjB,IADA70G,EAAS60G,EAAM70G,OACPF,EAAIE,EAAQF,IAGL,OAFdK,EAAQuB,EAAUmzG,EAAO/0G,GAAKA,EAAGioG,KAGhC+F,EAAIvtG,KAAMJ,QAMZ,IAAML,KAAK+0G,EAGI,OAFd10G,EAAQuB,EAAUmzG,EAAO/0G,GAAKA,EAAGioG,KAGhC+F,EAAIvtG,KAAMJ,GAMb,OAAOszG,EAAM3F,IAIdwI,KAAM,EAINxC,QAASA,IAGa,oBAAXpH,SACX8H,EAAOzuC,GAAI2mC,OAAOt1F,UAAaiK,EAAKqrF,OAAOt1F,WAI5Co9F,EAAOQ,KAAM,uEAAuE9sG,MAAO,MAC1F,SAAUq1E,EAAIi4B,GACb9B,EAAY,WAAa8B,EAAO,KAAQA,EAAKxmG,iBAmB/C,IAAIunG,EAWF,SAAU58G,GACZ,IAAImG,EACHg0G,EACA0C,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EAGAC,EACAv9G,EACAkpB,EACAs0F,EACAC,EACAC,EACAhB,EACAj0G,EAGAwzG,EAAU,SAAW,EAAI,IAAIxvF,KAC7BkxF,EAAe19G,EAAOD,SACtB49G,EAAU,EACVC,EAAO,EACPC,EAAaC,KACbC,EAAaD,KACbE,EAAgBF,KAChBG,EAAyBH,KACzBI,EAAY,SAAUpxG,EAAG+F,GAIxB,OAHK/F,IAAM+F,IACVwqG,GAAe,GAET,GAIRrD,EAAW,GAAKl4F,eAChB4F,EAAM,GACN1S,EAAM0S,EAAI1S,IACVmpG,EAAaz2F,EAAI9gB,KACjBA,EAAO8gB,EAAI9gB,KACXsH,EAAQwZ,EAAIxZ,MAIZvI,EAAU,SAAU2tG,EAAMgI,GAGzB,IAFA,IAAIn1G,EAAI,EACPC,EAAMktG,EAAKjtG,OACJF,EAAIC,EAAKD,IAChB,GAAKmtG,EAAMntG,KAAQm1G,EAClB,OAAOn1G,EAGT,OAAQ,GAGTi4G,EAAW,6HAMXC,EAAa,sBAGb3oD,EAAa,oFAIbrnD,EAAa,2BAA4BqnD,EAAa,OAAS2oD,EAG9D,gBAAkBA,EAIlB,2DAA6D3oD,EAAa,OAC1E2oD,EAAa,OAEdC,EAAU,KAAO5oD,EAAP,wFAOoBrnD,EAPpB,eAcVkwG,EAAc,IAAIj/F,OAAQ++F,EAAa,IAAK,KAC5CG,EAAQ,IAAIl/F,OAAQ,uEACA,KAEpBm/F,EAAS,IAAIn/F,OAAQ,8CACrBo/F,EAAe,IAAIp/F,OAAQ,wEAE3Bq/F,EAAW,IAAIr/F,OAAQ++F,EAAa,MAEpCO,EAAU,IAAIt/F,OAAQg/F,GACtBO,EAAc,IAAIv/F,OAAQ,IAAMo2C,EAAa,KAE7CopD,EAAY,CACX,GAAM,IAAIx/F,OAAQ,MAAQo2C,EAAa,KACvC,MAAS,IAAIp2C,OAAQ,QAAUo2C,EAAa,KAC5C,IAAO,IAAIp2C,OAAQ,KAAOo2C,EAAa,SACvC,KAAQ,IAAIp2C,OAAQ,IAAMjR,GAC1B,OAAU,IAAIiR,OAAQ,IAAMg/F,GAC5B,MAAS,IAAIh/F,OAAQ,4LAE+B,KACpD,KAAQ,IAAIA,OAAQ,OAAS8+F,EAAW,KAAM,KAI9C,aAAgB,IAAI9+F,OAAQ,6IAE2B,MAGxDy/F,EAAQ,SACRC,EAAU,sCACVC,EAAU,SAEVC,EAAU,yBAGVC,EAAa,mCAEbC,GAAW,OAIXC,GAAY,IAAI//F,OAAQ,8DAA8D,KACtFggG,GAAY,SAAUC,EAAQC,GAC7B,IAAIC,EAAO,KAAOF,EAAOrxG,MAAO,GAAM,MAEtC,OAAOsxG,IASNC,EAAO,EACNj2D,OAAO6oD,aAAcoN,EAAO,OAC5Bj2D,OAAO6oD,aAAcoN,GAAQ,GAAK,MAAe,KAAPA,EAAe,SAK5DC,GAAa,sDACbC,GAAa,SAAUC,EAAIC,GAC1B,OAAKA,EAGQ,OAAPD,EACG,SAIDA,EAAG1xG,MAAO,GAAI,GAAM,KAC1B0xG,EAAGz9F,WAAYy9F,EAAGv5G,OAAS,GAAIiL,SAAU,IAAO,IAI3C,KAAOsuG,GAOfE,GAAgB,WACfxC,KAGDyC,GAAqBC,IACpB,SAAU1E,GACT,OAAyB,IAAlBA,EAAK2E,UAAqD,aAAhC3E,EAAK1pF,SAASvc,gBAEhD,CAAE26F,IAAK,aAAc5tF,KAAM,WAI7B,IACCxb,EAAKK,MACFygB,EAAMxZ,EAAM5H,KAAMo3G,EAAa/2F,YACjC+2F,EAAa/2F,YAMde,EAAKg2F,EAAa/2F,WAAWtgB,QAASohB,SACrC,MAAQ4kB,IACTzlC,EAAO,CAAEK,MAAOygB,EAAIrhB,OAGnB,SAAU6N,EAAQgsG,GACjB/B,EAAWl3G,MAAOiN,EAAQhG,EAAM5H,KAAM45G,KAKvC,SAAUhsG,EAAQgsG,GAKjB,IAJA,IAAI3kG,EAAIrH,EAAO7N,OACdF,EAAI,EAGK+N,EAAQqH,KAAQ2kG,EAAK/5G,OAC/B+N,EAAO7N,OAASkV,EAAI,IAKvB,SAASqhG,GAAQvqF,EAAUrqB,EAASqxB,EAAS8mF,GAC5C,IAAIjpG,EAAG/Q,EAAGm1G,EAAM8E,EAAKrhG,EAAOshG,EAAQC,EACnCC,EAAav4G,GAAWA,EAAQohB,cAGhC3B,EAAWzf,EAAUA,EAAQyf,SAAW,EAKzC,GAHA4R,EAAUA,GAAW,GAGI,kBAAbhH,IAA0BA,GACxB,IAAb5K,GAA+B,IAAbA,GAA+B,KAAbA,EAEpC,OAAO4R,EAIR,IAAM8mF,IACL7C,EAAat1G,GACbA,EAAUA,GAAWjI,EAEhBw9G,GAAiB,CAIrB,GAAkB,KAAb91F,IAAqB1I,EAAQogG,EAAW3xG,KAAM6kB,IAGlD,GAAOnb,EAAI6H,EAAO,IAGjB,GAAkB,IAAb0I,EAAiB,CACrB,KAAO6zF,EAAOtzG,EAAQ2gB,eAAgBzR,IAUrC,OAAOmiB,EALP,GAAKiiF,EAAK5yF,KAAOxR,EAEhB,OADAmiB,EAAQzyB,KAAM00G,GACPjiF,OAYT,GAAKknF,IAAgBjF,EAAOiF,EAAW53F,eAAgBzR,KACtD1O,EAAUR,EAASszG,IACnBA,EAAK5yF,KAAOxR,EAGZ,OADAmiB,EAAQzyB,KAAM00G,GACPjiF,MAKH,IAAKta,EAAO,GAElB,OADAnY,EAAKK,MAAOoyB,EAASrxB,EAAQ+pB,qBAAsBM,IAC5CgH,EAGD,IAAOniB,EAAI6H,EAAO,KAASo7F,EAAQqG,wBACzCx4G,EAAQw4G,uBAGR,OADA55G,EAAKK,MAAOoyB,EAASrxB,EAAQw4G,uBAAwBtpG,IAC9CmiB,EAKT,GAAK8gF,EAAQsG,MACXxC,EAAwB5rF,EAAW,QACjCmrF,IAAcA,EAAUx3F,KAAMqM,MAIlB,IAAb5K,GAAqD,WAAnCzf,EAAQ4pB,SAASvc,eAA+B,CAYpE,GAVAirG,EAAcjuF,EACdkuF,EAAav4G,EASK,IAAbyf,IACFk3F,EAAS34F,KAAMqM,IAAcqsF,EAAa14F,KAAMqM,IAAe,CAqBjE,KAlBAkuF,EAAanB,GAASp5F,KAAMqM,IAAcknD,GAAavxE,EAAQ0H,aAC9D1H,KAImBA,GAAYmyG,EAAQuG,SAGhCN,EAAMp4G,EAAQyqB,aAAc,OAClC2tF,EAAMA,EAAI99F,QAASo9F,GAAYC,IAE/B33G,EAAQkf,aAAc,KAAQk5F,EAAMpE,IAMtC71G,GADAk6G,EAASrD,EAAU3qF,IACRhsB,OACHF,KACPk6G,EAAQl6G,IAAQi6G,EAAM,IAAMA,EAAM,UAAa,IAC9CO,GAAYN,EAAQl6G,IAEtBm6G,EAAcD,EAAOpqG,KAAM,KAG5B,IAIC,OAHArP,EAAKK,MAAOoyB,EACXknF,EAAWK,iBAAkBN,IAEvBjnF,EACN,MAAQwnF,GACT5C,EAAwB5rF,GAAU,GANnC,QAQM+tF,IAAQpE,GACZh0G,EAAQ6sB,gBAAiB,QAQ9B,OAAOqoF,EAAQ7qF,EAAS/P,QAASk8F,EAAO,MAAQx2G,EAASqxB,EAAS8mF,GASnE,SAASrC,KACR,IAAI9nE,EAAO,GAYX,OAVA,SAASozB,EAAOz/D,EAAKnD,GAQpB,OALKwvC,EAAKpvC,KAAM+C,EAAM,KAAQkzG,EAAKiE,oBAG3B13C,EAAOpzB,EAAKhyB,SAEXolD,EAAOz/D,EAAM,KAAQnD,GAShC,SAASu6G,GAAc30C,GAEtB,OADAA,EAAI4vC,IAAY,EACT5vC,EAOR,SAAS40C,GAAQ50C,GAChB,IAAIrlD,EAAKhnB,EAASsP,cAAe,YAEjC,IACC,QAAS+8D,EAAIrlD,GACZ,MAAQslB,IACT,OAAO,EAHR,QAOMtlB,EAAGrX,YACPqX,EAAGrX,WAAWC,YAAaoX,GAI5BA,EAAK,MASP,SAASk6F,GAAWtrF,EAAOnwB,GAI1B,IAHA,IAAIkiB,EAAMiO,EAAMpnB,MAAO,KACtBpI,EAAIuhB,EAAIrhB,OAEDF,KACP02G,EAAKqE,WAAYx5F,EAAKvhB,IAAQX,EAUhC,SAAS27G,GAAcr0G,EAAG+F,GACzB,IAAIuuG,EAAMvuG,GAAK/F,EACdk4E,EAAOo8B,GAAsB,IAAft0G,EAAE2a,UAAiC,IAAf5U,EAAE4U,UACnC3a,EAAEu0G,YAAcxuG,EAAEwuG,YAGpB,GAAKr8B,EACJ,OAAOA,EAIR,GAAKo8B,EACJ,KAAUA,EAAMA,EAAIE,aACnB,GAAKF,IAAQvuG,EACZ,OAAQ,EAKX,OAAO/F,EAAI,GAAK,EAOjB,SAASy0G,GAAmBr5G,GAC3B,OAAO,SAAUozG,GAEhB,MAAgB,UADLA,EAAK1pF,SAASvc,eACEimG,EAAKpzG,OAASA,GAQ3C,SAASs5G,GAAoBt5G,GAC5B,OAAO,SAAUozG,GAChB,IAAIO,EAAOP,EAAK1pF,SAASvc,cACzB,OAAkB,UAATwmG,GAA6B,WAATA,IAAuBP,EAAKpzG,OAASA,GAQpE,SAASu5G,GAAsBxB,GAG9B,OAAO,SAAU3E,GAKhB,MAAK,SAAUA,EASTA,EAAK5rG,aAAgC,IAAlB4rG,EAAK2E,SAGvB,UAAW3E,EACV,UAAWA,EAAK5rG,WACb4rG,EAAK5rG,WAAWuwG,WAAaA,EAE7B3E,EAAK2E,WAAaA,EAMpB3E,EAAKoG,aAAezB,GAI1B3E,EAAKoG,cAAgBzB,GACrBF,GAAoBzE,KAAW2E,EAG1B3E,EAAK2E,WAAaA,EAKd,UAAW3E,GACfA,EAAK2E,WAAaA,GAY5B,SAAS0B,GAAwBv1C,GAChC,OAAO20C,IAAc,SAAUa,GAE9B,OADAA,GAAYA,EACLb,IAAc,SAAUZ,EAAM1D,GAMpC,IALA,IAAIlhG,EACHsmG,EAAez1C,EAAI,GAAI+zC,EAAK95G,OAAQu7G,GACpCz7G,EAAI07G,EAAax7G,OAGVF,KACFg6G,EAAQ5kG,EAAIsmG,EAAc17G,MAC9Bg6G,EAAM5kG,KAASkhG,EAASlhG,GAAM4kG,EAAM5kG,WAYzC,SAASg+D,GAAavxE,GACrB,OAAOA,GAAmD,qBAAjCA,EAAQ+pB,sBAAwC/pB,EAkrC1E,IAAM7B,KA9qCNg0G,EAAUyC,GAAOzC,QAAU,GAO3B4C,EAAQH,GAAOG,MAAQ,SAAUzB,GAChC,IAAIztG,EAAYytG,GAAQA,EAAKwG,aAC5B74F,EAAUqyF,IAAUA,EAAKlyF,eAAiBkyF,GAAOl0F,gBAKlD,OAAQ23F,EAAM/4F,KAAMnY,GAAaob,GAAWA,EAAQ2I,UAAY,SAQjE0rF,EAAcV,GAAOU,YAAc,SAAU3qF,GAC5C,IAAIovF,EAAYC,EACf74F,EAAMwJ,EAAOA,EAAKvJ,eAAiBuJ,EAAO+qF,EAO3C,OAAKv0F,GAAOppB,GAA6B,IAAjBopB,EAAI1B,UAAmB0B,EAAI/B,iBAMnD6B,GADAlpB,EAAWopB,GACQ/B,gBACnBm2F,GAAkBR,EAAOh9G,GAQpB29G,GAAgB39G,IAClBiiH,EAAYjiH,EAAS4nB,cAAiBq6F,EAAUp1G,MAAQo1G,IAGrDA,EAAUz9F,iBACdy9F,EAAUz9F,iBAAkB,SAAUu7F,IAAe,GAG1CkC,EAAU79F,aACrB69F,EAAU79F,YAAa,WAAY27F,KASrC3F,EAAQuG,MAAQM,IAAQ,SAAUj6F,GAEjC,OADAkC,EAAQzZ,YAAauX,GAAKvX,YAAazP,EAASsP,cAAe,QACzB,qBAAxB0X,EAAG65F,mBACf75F,EAAG65F,iBAAkB,uBAAwBv6G,UAShD8zG,EAAQ9rG,WAAa2yG,IAAQ,SAAUj6F,GAEtC,OADAA,EAAGC,UAAY,KACPD,EAAG0L,aAAc,gBAO1B0nF,EAAQpoF,qBAAuBivF,IAAQ,SAAUj6F,GAEhD,OADAA,EAAGvX,YAAazP,EAASkiH,cAAe,MAChCl7F,EAAGgL,qBAAsB,KAAM1rB,UAIxC8zG,EAAQqG,uBAAyBtB,EAAQl5F,KAAMjmB,EAASygH,wBAMxDrG,EAAQ1xF,QAAUu4F,IAAQ,SAAUj6F,GAEnC,OADAkC,EAAQzZ,YAAauX,GAAK2B,GAAKszF,GACvBj8G,EAASmiH,oBAAsBniH,EAASmiH,kBAAmBlG,GAAU31G,UAIzE8zG,EAAQ1xF,SACZo0F,EAAKt2G,OAAL,GAAsB,SAAUmiB,GAC/B,IAAIy5F,EAASz5F,EAAGpG,QAAS+8F,GAAWC,IACpC,OAAO,SAAUhE,GAChB,OAAOA,EAAK7oF,aAAc,QAAW0vF,IAGvCtF,EAAKz7F,KAAL,GAAoB,SAAUsH,EAAI1gB,GACjC,GAAuC,qBAA3BA,EAAQ2gB,gBAAkC40F,EAAiB,CACtE,IAAIjC,EAAOtzG,EAAQ2gB,eAAgBD,GACnC,OAAO4yF,EAAO,CAAEA,GAAS,OAI3BuB,EAAKt2G,OAAL,GAAuB,SAAUmiB,GAChC,IAAIy5F,EAASz5F,EAAGpG,QAAS+8F,GAAWC,IACpC,OAAO,SAAUhE,GAChB,IAAI3oF,EAAwC,qBAA1B2oF,EAAK8G,kBACtB9G,EAAK8G,iBAAkB,MACxB,OAAOzvF,GAAQA,EAAKnsB,QAAU27G,IAMhCtF,EAAKz7F,KAAL,GAAoB,SAAUsH,EAAI1gB,GACjC,GAAuC,qBAA3BA,EAAQ2gB,gBAAkC40F,EAAiB,CACtE,IAAI5qF,EAAMxsB,EAAG+0G,EACZI,EAAOtzG,EAAQ2gB,eAAgBD,GAEhC,GAAK4yF,EAAO,CAIX,IADA3oF,EAAO2oF,EAAK8G,iBAAkB,QACjBzvF,EAAKnsB,QAAUkiB,EAC3B,MAAO,CAAE4yF,GAMV,IAFAJ,EAAQlzG,EAAQk6G,kBAAmBx5F,GACnCviB,EAAI,EACMm1G,EAAOJ,EAAO/0G,MAEvB,IADAwsB,EAAO2oF,EAAK8G,iBAAkB,QACjBzvF,EAAKnsB,QAAUkiB,EAC3B,MAAO,CAAE4yF,GAKZ,MAAO,MAMVuB,EAAKz7F,KAAL,IAAqB+4F,EAAQpoF,qBAC5B,SAAUswF,EAAKr6G,GACd,MAA6C,qBAAjCA,EAAQ+pB,qBACZ/pB,EAAQ+pB,qBAAsBswF,GAG1BlI,EAAQsG,IACZz4G,EAAQ44G,iBAAkByB,QAD3B,GAKR,SAAUA,EAAKr6G,GACd,IAAIszG,EACHnD,EAAM,GACNhyG,EAAI,EAGJkzB,EAAUrxB,EAAQ+pB,qBAAsBswF,GAGzC,GAAa,MAARA,EAAc,CAClB,KAAU/G,EAAOjiF,EAASlzB,MACF,IAAlBm1G,EAAK7zF,UACT0wF,EAAIvxG,KAAM00G,GAIZ,OAAOnD,EAER,OAAO9+E,GAITwjF,EAAKz7F,KAAL,MAAuB+4F,EAAQqG,wBAA0B,SAAUx5F,EAAWhf,GAC7E,GAA+C,qBAAnCA,EAAQw4G,wBAA0CjD,EAC7D,OAAOv1G,EAAQw4G,uBAAwBx5F,IAUzCy2F,EAAgB,GAOhBD,EAAY,IAELrD,EAAQsG,IAAMvB,EAAQl5F,KAAMjmB,EAAS6gH,qBAI3CI,IAAQ,SAAUj6F,GAEjB,IAAIu7F,EAOJr5F,EAAQzZ,YAAauX,GAAKw7F,UAAY,UAAYvG,EAAZ,qBACpBA,EADoB,kEAQjCj1F,EAAG65F,iBAAkB,wBAAyBv6G,QAClDm3G,EAAU52G,KAAM,yCAKXmgB,EAAG65F,iBAAkB,cAAev6G,QACzCm3G,EAAU52G,KAAM,mCAAoCw3G,EAAW,KAI1Dr3F,EAAG65F,iBAAkB,QAAU5E,EAAU,MAAO31G,QACrDm3G,EAAU52G,KAAM,OAQjB07G,EAAQviH,EAASsP,cAAe,UAC1B6X,aAAc,OAAQ,IAC5BH,EAAGvX,YAAa8yG,GACVv7F,EAAG65F,iBAAkB,aAAcv6G,QACxCm3G,EAAU52G,KAAM,mFAOXmgB,EAAG65F,iBAAkB,YAAav6G,QACvCm3G,EAAU52G,KAAM,YAMXmgB,EAAG65F,iBAAkB,KAAO5E,EAAU,MAAO31G,QAClDm3G,EAAU52G,KAAM,YAKjBmgB,EAAG65F,iBAAkB,QACrBpD,EAAU52G,KAAM,kBAGjBo6G,IAAQ,SAAUj6F,GACjBA,EAAGw7F,UAAY,oFAKf,IAAID,EAAQviH,EAASsP,cAAe,SACpCizG,EAAMp7F,aAAc,OAAQ,UAC5BH,EAAGvX,YAAa8yG,GAAQp7F,aAAc,OAAQ,KAIzCH,EAAG65F,iBAAkB,YAAav6G,QACtCm3G,EAAU52G,KAAM,sCAKiC,IAA7CmgB,EAAG65F,iBAAkB,YAAav6G,QACtCm3G,EAAU52G,KAAM,WAAY,aAK7BqiB,EAAQzZ,YAAauX,GAAKk5F,UAAW,EACc,IAA9Cl5F,EAAG65F,iBAAkB,aAAcv6G,QACvCm3G,EAAU52G,KAAM,WAAY,aAK7BmgB,EAAG65F,iBAAkB,QACrBpD,EAAU52G,KAAM,aAIXuzG,EAAQqI,gBAAkBtD,EAAQl5F,KAAQy2F,EAAUxzF,EAAQwzF,SAClExzF,EAAQw5F,uBACRx5F,EAAQy5F,oBACRz5F,EAAQ05F,kBACR15F,EAAQ25F,qBAER5B,IAAQ,SAAUj6F,GAIjBozF,EAAQ0I,kBAAoBpG,EAAQn2G,KAAMygB,EAAI,KAI9C01F,EAAQn2G,KAAMygB,EAAI,aAClB02F,EAAc72G,KAAM,KAAM03G,MAI5Bd,EAAYA,EAAUn3G,QAAU,IAAIiZ,OAAQk+F,EAAUvnG,KAAM,MAC5DwnG,EAAgBA,EAAcp3G,QAAU,IAAIiZ,OAAQm+F,EAAcxnG,KAAM,MAIxE8rG,EAAa7C,EAAQl5F,KAAMiD,EAAQ65F,yBAKnCt6G,EAAWu5G,GAAc7C,EAAQl5F,KAAMiD,EAAQzgB,UAC9C,SAAUsE,EAAG+F,GACZ,IAAIkwG,EAAuB,IAAfj2G,EAAE2a,SAAiB3a,EAAEsa,gBAAkBta,EAClDk2G,EAAMnwG,GAAKA,EAAEnD,WACd,OAAO5C,IAAMk2G,MAAWA,GAAwB,IAAjBA,EAAIv7F,YAClCs7F,EAAMv6G,SACLu6G,EAAMv6G,SAAUw6G,GAChBl2G,EAAEg2G,yBAA8D,GAAnCh2G,EAAEg2G,wBAAyBE,MAG3D,SAAUl2G,EAAG+F,GACZ,GAAKA,EACJ,KAAUA,EAAIA,EAAEnD,YACf,GAAKmD,IAAM/F,EACV,OAAO,EAIV,OAAO,GAOToxG,EAAY6D,EACZ,SAAUj1G,EAAG+F,GAGZ,GAAK/F,IAAM+F,EAEV,OADAwqG,GAAe,EACR,EAIR,IAAIhK,GAAWvmG,EAAEg2G,yBAA2BjwG,EAAEiwG,wBAC9C,OAAKzP,IAgBU,GAPfA,GAAYvmG,EAAEsc,eAAiBtc,KAAS+F,EAAEuW,eAAiBvW,GAC1D/F,EAAEg2G,wBAAyBjwG,GAG3B,KAIGsnG,EAAQ8I,cAAgBpwG,EAAEiwG,wBAAyBh2G,KAAQumG,EAOzDvmG,GAAK/M,GAAY+M,EAAEsc,eAAiBs0F,GACxCl1G,EAAUk1G,EAAc5wG,IAChB,EAOJ+F,GAAK9S,GAAY8S,EAAEuW,eAAiBs0F,GACxCl1G,EAAUk1G,EAAc7qG,GACjB,EAIDuqG,EACJz3G,EAASy3G,EAAWtwG,GAAMnH,EAASy3G,EAAWvqG,GAChD,EAGe,EAAVwgG,GAAe,EAAI,IAE3B,SAAUvmG,EAAG+F,GAGZ,GAAK/F,IAAM+F,EAEV,OADAwqG,GAAe,EACR,EAGR,IAAI+D,EACHj7G,EAAI,EACJ+8G,EAAMp2G,EAAE4C,WACRszG,EAAMnwG,EAAEnD,WACRyzG,EAAK,CAAEr2G,GACPs2G,EAAK,CAAEvwG,GAGR,IAAMqwG,IAAQF,EAMb,OAAOl2G,GAAK/M,GAAY,EACvB8S,GAAK9S,EAAW,EAEhBmjH,GAAO,EACPF,EAAM,EACN5F,EACEz3G,EAASy3G,EAAWtwG,GAAMnH,EAASy3G,EAAWvqG,GAChD,EAGK,GAAKqwG,IAAQF,EACnB,OAAO7B,GAAcr0G,EAAG+F,GAKzB,IADAuuG,EAAMt0G,EACIs0G,EAAMA,EAAI1xG,YACnByzG,EAAGliG,QAASmgG,GAGb,IADAA,EAAMvuG,EACIuuG,EAAMA,EAAI1xG,YACnB0zG,EAAGniG,QAASmgG,GAIb,KAAQ+B,EAAIh9G,KAAQi9G,EAAIj9G,IACvBA,IAGD,OAAOA,EAGNg7G,GAAcgC,EAAIh9G,GAAKi9G,EAAIj9G,IAO3Bg9G,EAAIh9G,IAAOu3G,GAAgB,EAC3B0F,EAAIj9G,IAAOu3G,EAAe,EAE1B,GAGK39G,GA/cCA,GAkdT68G,GAAOH,QAAU,SAAU4G,EAAMzyG,GAChC,OAAOgsG,GAAQyG,EAAM,KAAM,KAAMzyG,IAGlCgsG,GAAO4F,gBAAkB,SAAUlH,EAAM+H,GAGxC,GAFA/F,EAAahC,GAERnB,EAAQqI,iBAAmBjF,IAC9BU,EAAwBoF,EAAO,QAC7B5F,IAAkBA,EAAcz3F,KAAMq9F,OACtC7F,IAAkBA,EAAUx3F,KAAMq9F,IAErC,IACC,IAAIlP,EAAMsI,EAAQn2G,KAAMg1G,EAAM+H,GAG9B,GAAKlP,GAAOgG,EAAQ0I,mBAInBvH,EAAKv7G,UAAuC,KAA3Bu7G,EAAKv7G,SAAS0nB,SAC/B,OAAO0sF,EAEP,MAAQ9nE,IACT4xE,EAAwBoF,GAAM,GAIhC,OAAOzG,GAAQyG,EAAMtjH,EAAU,KAAM,CAAEu7G,IAASj1G,OAAS,GAG1Du2G,GAAOp0G,SAAW,SAAUR,EAASszG,GAUpC,OAHOtzG,EAAQohB,eAAiBphB,IAAajI,GAC5Cu9G,EAAat1G,GAEPQ,EAAUR,EAASszG,IAG3BsB,GAAO/0F,KAAO,SAAUyzF,EAAMO,IAOtBP,EAAKlyF,eAAiBkyF,IAAUv7G,GACtCu9G,EAAahC,GAGd,IAAIlvC,EAAKywC,EAAKqE,WAAYrF,EAAKxmG,eAG9B65F,EAAM9iC,GAAM4tC,EAAO1zG,KAAMu2G,EAAKqE,WAAYrF,EAAKxmG,eAC9C+2D,EAAIkvC,EAAMO,GAAO0B,QACjBtuG,EAEF,YAAeA,IAARigG,EACNA,EACAiL,EAAQ9rG,aAAekvG,EACtBjC,EAAK7oF,aAAcopF,IACjB3M,EAAMoM,EAAK8G,iBAAkBvG,KAAY3M,EAAIoU,UAC9CpU,EAAI1oG,MACJ,MAGJo2G,GAAO2C,OAAS,SAAUgE,GACzB,OAASA,EAAM,IAAKjhG,QAASo9F,GAAYC,KAG1C/C,GAAOxsG,MAAQ,SAAU8rG,GACxB,MAAM,IAAI1iE,MAAO,0CAA4C0iE,IAO9DU,GAAO4G,WAAa,SAAUnqF,GAC7B,IAAIiiF,EACHmI,EAAa,GACbloG,EAAI,EACJpV,EAAI,EAOL,GAJAk3G,GAAgBlD,EAAQuJ,iBACxBtG,GAAajD,EAAQwJ,YAActqF,EAAQnrB,MAAO,GAClDmrB,EAAQsd,KAAMunE,GAETb,EAAe,CACnB,KAAU/B,EAAOjiF,EAASlzB,MACpBm1G,IAASjiF,EAASlzB,KACtBoV,EAAIkoG,EAAW78G,KAAMT,IAGvB,KAAQoV,KACP8d,EAAQ3xB,OAAQ+7G,EAAYloG,GAAK,GAQnC,OAFA6hG,EAAY,KAEL/jF,GAORyjF,EAAUF,GAAOE,QAAU,SAAUxB,GACpC,IAAI3oF,EACHwhF,EAAM,GACNhuG,EAAI,EACJshB,EAAW6zF,EAAK7zF,SAEjB,GAAMA,GAQC,GAAkB,IAAbA,GAA+B,IAAbA,GAA+B,KAAbA,EAAkB,CAIjE,GAAiC,kBAArB6zF,EAAKxiF,YAChB,OAAOwiF,EAAKxiF,YAIZ,IAAMwiF,EAAOA,EAAKvmF,WAAYumF,EAAMA,EAAOA,EAAKgG,YAC/CnN,GAAO2I,EAASxB,QAGZ,GAAkB,IAAb7zF,GAA+B,IAAbA,EAC7B,OAAO6zF,EAAKplF,eAnBZ,KAAUvD,EAAO2oF,EAAMn1G,MAGtBguG,GAAO2I,EAASnqF,GAqBlB,OAAOwhF,IAGR0I,EAAOD,GAAO3qF,UAAY,CAGzB6uF,YAAa,GAEb8C,aAAc7C,GAEdhiG,MAAO+/F,EAEPoC,WAAY,GAEZ9/F,KAAM,GAENyiG,SAAU,CACT,IAAK,CAAE7T,IAAK,aAAcuL,OAAO,GACjC,IAAK,CAAEvL,IAAK,cACZ,IAAK,CAAEA,IAAK,kBAAmBuL,OAAO,GACtC,IAAK,CAAEvL,IAAK,oBAGb8T,UAAW,CACV,KAAQ,SAAU/kG,GAWjB,OAVAA,EAAO,GAAMA,EAAO,GAAIuD,QAAS+8F,GAAWC,IAG5CvgG,EAAO,IAAQA,EAAO,IAAOA,EAAO,IACnCA,EAAO,IAAO,IAAKuD,QAAS+8F,GAAWC,IAEpB,OAAfvgG,EAAO,KACXA,EAAO,GAAM,IAAMA,EAAO,GAAM,KAG1BA,EAAM7Q,MAAO,EAAG,IAGxB,MAAS,SAAU6Q,GAiClB,OArBAA,EAAO,GAAMA,EAAO,GAAI1J,cAEU,QAA7B0J,EAAO,GAAI7Q,MAAO,EAAG,IAGnB6Q,EAAO,IACZ69F,GAAOxsG,MAAO2O,EAAO,IAKtBA,EAAO,KAASA,EAAO,GACtBA,EAAO,IAAQA,EAAO,IAAO,GAC7B,GAAqB,SAAfA,EAAO,IAAiC,QAAfA,EAAO,KACvCA,EAAO,KAAWA,EAAO,GAAMA,EAAO,IAAwB,QAAfA,EAAO,KAG3CA,EAAO,IAClB69F,GAAOxsG,MAAO2O,EAAO,IAGfA,GAGR,OAAU,SAAUA,GACnB,IAAIglG,EACHC,GAAYjlG,EAAO,IAAOA,EAAO,GAElC,OAAK+/F,EAAS,MAAY94F,KAAMjH,EAAO,IAC/B,MAIHA,EAAO,GACXA,EAAO,GAAMA,EAAO,IAAOA,EAAO,IAAO,GAG9BilG,GAAYpF,EAAQ54F,KAAMg+F,KAGnCD,EAAS/G,EAAUgH,GAAU,MAG7BD,EAASC,EAASr+G,QAAS,IAAKq+G,EAAS39G,OAAS09G,GAAWC,EAAS39G,UAGxE0Y,EAAO,GAAMA,EAAO,GAAI7Q,MAAO,EAAG61G,GAClChlG,EAAO,GAAMilG,EAAS91G,MAAO,EAAG61G,IAI1BhlG,EAAM7Q,MAAO,EAAG,MAIzB3H,OAAQ,CAEP,IAAO,SAAU09G,GAChB,IAAIryF,EAAWqyF,EAAiB3hG,QAAS+8F,GAAWC,IAAYjqG,cAChE,MAA4B,MAArB4uG,EACN,WACC,OAAO,GAER,SAAU3I,GACT,OAAOA,EAAK1pF,UAAY0pF,EAAK1pF,SAASvc,gBAAkBuc,IAI3D,MAAS,SAAU5K,GAClB,IAAItW,EAAUmtG,EAAY72F,EAAY,KAEtC,OAAOtW,IACJA,EAAU,IAAI4O,OAAQ,0BACjB0H,EAAY,IAAMq3F,EAAa,SAAaR,EACjD72F,GAAW,SAAUs0F,GACpB,OAAO5qG,EAAQsV,KACY,kBAAnBs1F,EAAKt0F,WAA0Bs0F,EAAKt0F,WACd,qBAAtBs0F,EAAK7oF,cACX6oF,EAAK7oF,aAAc,UACpB,QAKN,KAAQ,SAAUopF,EAAMqI,EAAUC,GACjC,OAAO,SAAU7I,GAChB,IAAIthG,EAAS4iG,GAAO/0F,KAAMyzF,EAAMO,GAEhC,OAAe,MAAV7hG,EACgB,OAAbkqG,GAEFA,IAINlqG,GAAU,GAIU,MAAbkqG,EAAmBlqG,IAAWmqG,EACvB,OAAbD,EAAoBlqG,IAAWmqG,EAClB,OAAbD,EAAoBC,GAAqC,IAA5BnqG,EAAOrU,QAASw+G,GAChC,OAAbD,EAAoBC,GAASnqG,EAAOrU,QAASw+G,IAAW,EAC3C,OAAbD,EAAoBC,GAASnqG,EAAO9L,OAAQi2G,EAAM99G,UAAa89G,EAClD,OAAbD,GAAsB,IAAMlqG,EAAOsI,QAASi8F,EAAa,KAAQ,KAAM54G,QAASw+G,IAAW,EAC9E,OAAbD,IAAoBlqG,IAAWmqG,GAASnqG,EAAO9L,MAAO,EAAGi2G,EAAM99G,OAAS,KAAQ89G,EAAQ,QAO3F,MAAS,SAAUj8G,EAAMk8G,EAAMC,EAAW9I,EAAOC,GAChD,IAAI8I,EAAgC,QAAvBp8G,EAAKgG,MAAO,EAAG,GAC3Bq2G,EAA+B,SAArBr8G,EAAKgG,OAAQ,GACvBs2G,EAAkB,YAATJ,EAEV,OAAiB,IAAV7I,GAAwB,IAATC,EAGrB,SAAUF,GACT,QAASA,EAAK5rG,YAGf,SAAU4rG,EAAMmJ,EAAUtrF,GACzB,IAAIiwC,EAAOs7C,EAAaC,EAAYhyF,EAAMiyF,EAAWr4F,EACpDyjF,EAAMsU,IAAWC,EAAU,cAAgB,kBAC3CphG,EAASm4F,EAAK5rG,WACdmsG,EAAO2I,GAAUlJ,EAAK1pF,SAASvc,cAC/BwvG,GAAY1rF,IAAQqrF,EACpBx/B,GAAO,EAER,GAAK7hE,EAAS,CAGb,GAAKmhG,EAAS,CACb,KAAQtU,GAAM,CAEb,IADAr9E,EAAO2oF,EACG3oF,EAAOA,EAAMq9E,IACtB,GAAKwU,EACJ7xF,EAAKf,SAASvc,gBAAkBwmG,EACd,IAAlBlpF,EAAKlL,SAEL,OAAO,EAKT8E,EAAQyjF,EAAe,SAAT9nG,IAAoBqkB,GAAS,cAE5C,OAAO,EAMR,GAHAA,EAAQ,CAAEg4F,EAAUphG,EAAO4R,WAAa5R,EAAO2hG,WAG1CP,GAAWM,GAkBf,IAHA7/B,GADA4/B,GADAx7C,GAHAs7C,GAJAC,GADAhyF,EAAOxP,GACY64F,KAAerpF,EAAMqpF,GAAY,KAI1BrpF,EAAKoyF,YAC5BJ,EAAYhyF,EAAKoyF,UAAa,KAEZ78G,IAAU,IACZ,KAAQy1G,GAAWv0C,EAAO,KACzBA,EAAO,GAC3Bz2C,EAAOiyF,GAAazhG,EAAOwD,WAAYi+F,GAE7BjyF,IAASiyF,GAAajyF,GAAQA,EAAMq9E,KAG3ChrB,EAAO4/B,EAAY,IAAOr4F,EAAMvX,OAGlC,GAAuB,IAAlB2d,EAAKlL,YAAoBu9D,GAAQryD,IAAS2oF,EAAO,CACrDoJ,EAAax8G,GAAS,CAAEy1G,EAASiH,EAAW5/B,GAC5C,YAyBF,GAlBK6/B,IAaJ7/B,EADA4/B,GADAx7C,GAHAs7C,GAJAC,GADAhyF,EAAO2oF,GACYU,KAAerpF,EAAMqpF,GAAY,KAI1BrpF,EAAKoyF,YAC5BJ,EAAYhyF,EAAKoyF,UAAa,KAEZ78G,IAAU,IACZ,KAAQy1G,GAAWv0C,EAAO,KAMhC,IAAT4b,EAGJ,MAAUryD,IAASiyF,GAAajyF,GAAQA,EAAMq9E,KAC3ChrB,EAAO4/B,EAAY,IAAOr4F,EAAMvX,UAE3BwvG,EACN7xF,EAAKf,SAASvc,gBAAkBwmG,EACd,IAAlBlpF,EAAKlL,cACHu9D,IAGG6/B,KAMJH,GALAC,EAAahyF,EAAMqpF,KAChBrpF,EAAMqpF,GAAY,KAIKrpF,EAAKoyF,YAC5BJ,EAAYhyF,EAAKoyF,UAAa,KAEpB78G,GAAS,CAAEy1G,EAAS34B,IAG7BryD,IAAS2oF,MAUlB,OADAt2B,GAAQw2B,KACQD,GAAWv2B,EAAOu2B,IAAU,GAAKv2B,EAAOu2B,GAAS,KAKrE,OAAU,SAAUyJ,EAAQpD,GAM3B,IAAIniG,EACH2sD,EAAKywC,EAAKyB,QAAS0G,IAAYnI,EAAKoI,WAAYD,EAAO3vG,gBACtDunG,GAAOxsG,MAAO,uBAAyB40G,GAKzC,OAAK54C,EAAI4vC,GACD5vC,EAAIw1C,GAIPx1C,EAAG/lE,OAAS,GAChBoZ,EAAO,CAAEulG,EAAQA,EAAQ,GAAIpD,GACtB/E,EAAKoI,WAAWnjG,eAAgBkjG,EAAO3vG,eAC7C0rG,IAAc,SAAUZ,EAAM1D,GAI7B,IAHA,IAAI9xG,EACHu6G,EAAU94C,EAAI+zC,EAAMyB,GACpBz7G,EAAI++G,EAAQ7+G,OACLF,KAEPg6G,EADAx1G,EAAMhF,EAASw6G,EAAM+E,EAAS/+G,OACbs2G,EAAS9xG,GAAQu6G,EAAS/+G,OAG7C,SAAUm1G,GACT,OAAOlvC,EAAIkvC,EAAM,EAAG77F,KAIhB2sD,IAITkyC,QAAS,CAGR,IAAOyC,IAAc,SAAU1uF,GAK9B,IAAIiwF,EAAQ,GACXjpF,EAAU,GACV9G,EAAU0qF,EAAS5qF,EAAS/P,QAASk8F,EAAO,OAE7C,OAAOjsF,EAASypF,GACf+E,IAAc,SAAUZ,EAAM1D,EAASgI,EAAUtrF,GAMhD,IALA,IAAImiF,EACH6J,EAAY5yF,EAAS4tF,EAAM,KAAMhnF,EAAK,IACtChzB,EAAIg6G,EAAK95G,OAGFF,MACAm1G,EAAO6J,EAAWh/G,MACxBg6G,EAAMh6G,KAASs2G,EAASt2G,GAAMm1G,OAIjC,SAAUA,EAAMmJ,EAAUtrF,GAMzB,OALAmpF,EAAO,GAAMhH,EACb/oF,EAAS+vF,EAAO,KAAMnpF,EAAKE,GAG3BipF,EAAO,GAAM,MACLjpF,EAAQrkB,UAInB,IAAO+rG,IAAc,SAAU1uF,GAC9B,OAAO,SAAUipF,GAChB,OAAOsB,GAAQvqF,EAAUipF,GAAOj1G,OAAS,MAI3C,SAAY06G,IAAc,SAAUlyB,GAEnC,OADAA,EAAOA,EAAKvsE,QAAS+8F,GAAWC,IACzB,SAAUhE,GAChB,OAASA,EAAKxiF,aAAegkF,EAASxB,IAAS31G,QAASkpF,IAAU,MAWpE,KAAQkyB,IAAc,SAAUqE,GAO/B,OAJMvG,EAAY74F,KAAMo/F,GAAQ,KAC/BxI,GAAOxsG,MAAO,qBAAuBg1G,GAEtCA,EAAOA,EAAK9iG,QAAS+8F,GAAWC,IAAYjqG,cACrC,SAAUimG,GAChB,IAAI+J,EACJ,GACC,GAAOA,EAAW9H,EACjBjC,EAAK8J,KACL9J,EAAK7oF,aAAc,aAAgB6oF,EAAK7oF,aAAc,QAGtD,OADA4yF,EAAWA,EAAShwG,iBACA+vG,GAA2C,IAAnCC,EAAS1/G,QAASy/G,EAAO,YAE3C9J,EAAOA,EAAK5rG,aAAkC,IAAlB4rG,EAAK7zF,UAC7C,OAAO,MAKT,OAAU,SAAU6zF,GACnB,IAAIgK,EAAOtlH,EAAOulH,UAAYvlH,EAAOulH,SAASD,KAC9C,OAAOA,GAAQA,EAAKp3G,MAAO,KAAQotG,EAAK5yF,IAGzC,KAAQ,SAAU4yF,GACjB,OAAOA,IAASryF,GAGjB,MAAS,SAAUqyF,GAClB,OAAOA,IAASv7G,EAASylH,iBACrBzlH,EAAS0lH,UAAY1lH,EAAS0lH,gBAC7BnK,EAAKpzG,MAAQozG,EAAKoK,OAASpK,EAAKqK,WAItC,QAAWlE,IAAsB,GACjC,SAAYA,IAAsB,GAElC,QAAW,SAAUnG,GAIpB,IAAI1pF,EAAW0pF,EAAK1pF,SAASvc,cAC7B,MAAsB,UAAbuc,KAA0B0pF,EAAKrM,SACxB,WAAbr9E,KAA2B0pF,EAAKlqD,UAGpC,SAAY,SAAUkqD,GASrB,OALKA,EAAK5rG,YAET4rG,EAAK5rG,WAAWk2G,eAGQ,IAAlBtK,EAAKlqD,UAIb,MAAS,SAAUkqD,GAMlB,IAAMA,EAAOA,EAAKvmF,WAAYumF,EAAMA,EAAOA,EAAKgG,YAC/C,GAAKhG,EAAK7zF,SAAW,EACpB,OAAO,EAGT,OAAO,GAGR,OAAU,SAAU6zF,GACnB,OAAQuB,EAAKyB,QAAL,MAAyBhD,IAIlC,OAAU,SAAUA,GACnB,OAAO2D,EAAQj5F,KAAMs1F,EAAK1pF,WAG3B,MAAS,SAAU0pF,GAClB,OAAO0D,EAAQh5F,KAAMs1F,EAAK1pF,WAG3B,OAAU,SAAU0pF,GACnB,IAAIO,EAAOP,EAAK1pF,SAASvc,cACzB,MAAgB,UAATwmG,GAAkC,WAAdP,EAAKpzG,MAA8B,WAAT2zG,GAGtD,KAAQ,SAAUP,GACjB,IAAIzzF,EACJ,MAAuC,UAAhCyzF,EAAK1pF,SAASvc,eACN,SAAdimG,EAAKpzG,OAIuC,OAAxC2f,EAAOyzF,EAAK7oF,aAAc,UACN,SAAvB5K,EAAKxS,gBAIR,MAASssG,IAAwB,WAChC,MAAO,CAAE,MAGV,KAAQA,IAAwB,SAAUkE,EAAex/G,GACxD,MAAO,CAAEA,EAAS,MAGnB,GAAMs7G,IAAwB,SAAUkE,EAAex/G,EAAQu7G,GAC9D,MAAO,CAAEA,EAAW,EAAIA,EAAWv7G,EAASu7G,MAG7C,KAAQD,IAAwB,SAAUE,EAAcx7G,GAEvD,IADA,IAAIF,EAAI,EACAA,EAAIE,EAAQF,GAAK,EACxB07G,EAAaj7G,KAAMT,GAEpB,OAAO07G,KAGR,IAAOF,IAAwB,SAAUE,EAAcx7G,GAEtD,IADA,IAAIF,EAAI,EACAA,EAAIE,EAAQF,GAAK,EACxB07G,EAAaj7G,KAAMT,GAEpB,OAAO07G,KAGR,GAAMF,IAAwB,SAAUE,EAAcx7G,EAAQu7G,GAM7D,IALA,IAAIz7G,EAAIy7G,EAAW,EAClBA,EAAWv7G,EACXu7G,EAAWv7G,EACVA,EACAu7G,IACQz7G,GAAK,GACd07G,EAAaj7G,KAAMT,GAEpB,OAAO07G,KAGR,GAAMF,IAAwB,SAAUE,EAAcx7G,EAAQu7G,GAE7D,IADA,IAAIz7G,EAAIy7G,EAAW,EAAIA,EAAWv7G,EAASu7G,IACjCz7G,EAAIE,GACbw7G,EAAaj7G,KAAMT,GAEpB,OAAO07G,QAKLvD,QAAL,IAAwBzB,EAAKyB,QAAL,GAGb,CAAEwH,OAAO,EAAMC,UAAU,EAAMC,MAAM,EAAMC,UAAU,EAAMnqE,OAAO,GAC5E+gE,EAAKyB,QAASn4G,GAAMo7G,GAAmBp7G,GAExC,IAAMA,IAAK,CAAE+/G,QAAQ,EAAMttD,OAAO,GACjCikD,EAAKyB,QAASn4G,GAAMq7G,GAAoBr7G,GAIzC,SAAS8+G,MA0ET,SAAStE,GAAYwF,GAIpB,IAHA,IAAIhgH,EAAI,EACPC,EAAM+/G,EAAO9/G,OACbgsB,EAAW,GACJlsB,EAAIC,EAAKD,IAChBksB,GAAY8zF,EAAQhgH,GAAIK,MAEzB,OAAO6rB,EAGR,SAAS2tF,GAAeztF,EAAS6zF,EAAYC,GAC5C,IAAIrW,EAAMoW,EAAWpW,IACpBsW,EAAOF,EAAWhkG,KAClBzY,EAAM28G,GAAQtW,EACduW,EAAmBF,GAAgB,eAAR18G,EAC3B68G,EAAW5I,IAEZ,OAAOwI,EAAW7K,MAGjB,SAAUD,EAAMtzG,EAASmxB,GACxB,KAAUmiF,EAAOA,EAAMtL,IACtB,GAAuB,IAAlBsL,EAAK7zF,UAAkB8+F,EAC3B,OAAOh0F,EAAS+oF,EAAMtzG,EAASmxB,GAGjC,OAAO,GAIR,SAAUmiF,EAAMtzG,EAASmxB,GACxB,IAAIstF,EAAU/B,EAAaC,EAC1B+B,EAAW,CAAE/I,EAAS6I,GAGvB,GAAKrtF,GACJ,KAAUmiF,EAAOA,EAAMtL,IACtB,IAAuB,IAAlBsL,EAAK7zF,UAAkB8+F,IACtBh0F,EAAS+oF,EAAMtzG,EAASmxB,GAC5B,OAAO,OAKV,KAAUmiF,EAAOA,EAAMtL,IACtB,GAAuB,IAAlBsL,EAAK7zF,UAAkB8+F,EAQ3B,GAHA7B,GAJAC,EAAarJ,EAAMU,KAAeV,EAAMU,GAAY,KAI1BV,EAAKyJ,YAC5BJ,EAAYrJ,EAAKyJ,UAAa,IAE5BuB,GAAQA,IAAShL,EAAK1pF,SAASvc,cACnCimG,EAAOA,EAAMtL,IAASsL,MAChB,KAAOmL,EAAW/B,EAAa/6G,KACrC88G,EAAU,KAAQ9I,GAAW8I,EAAU,KAAQD,EAG/C,OAASE,EAAU,GAAMD,EAAU,GAOnC,GAHA/B,EAAa/6G,GAAQ+8G,EAGdA,EAAU,GAAMn0F,EAAS+oF,EAAMtzG,EAASmxB,GAC9C,OAAO,EAMZ,OAAO,GAIV,SAASwtF,GAAgBC,GACxB,OAAOA,EAASvgH,OAAS,EACxB,SAAUi1G,EAAMtzG,EAASmxB,GAExB,IADA,IAAIhzB,EAAIygH,EAASvgH,OACTF,KACP,IAAMygH,EAAUzgH,GAAKm1G,EAAMtzG,EAASmxB,GACnC,OAAO,EAGT,OAAO,GAERytF,EAAU,GAYZ,SAASC,GAAU1B,EAAWpvG,EAAKxP,EAAQyB,EAASmxB,GAOnD,IANA,IAAImiF,EACHwL,EAAe,GACf3gH,EAAI,EACJC,EAAM++G,EAAU9+G,OAChB0gH,EAAgB,MAAPhxG,EAEF5P,EAAIC,EAAKD,KACTm1G,EAAO6J,EAAWh/G,MAClBI,IAAUA,EAAQ+0G,EAAMtzG,EAASmxB,KACtC2tF,EAAalgH,KAAM00G,GACdyL,GACJhxG,EAAInP,KAAMT,KAMd,OAAO2gH,EAGR,SAASE,GAAYlD,EAAWzxF,EAAUE,EAAS00F,EAAYC,EAAYC,GAO1E,OANKF,IAAeA,EAAYjL,KAC/BiL,EAAaD,GAAYC,IAErBC,IAAeA,EAAYlL,KAC/BkL,EAAaF,GAAYE,EAAYC,IAE/BpG,IAAc,SAAUZ,EAAM9mF,EAASrxB,EAASmxB,GACtD,IAAI2lD,EAAM34E,EAAGm1G,EACZ8L,EAAS,GACTC,EAAU,GACVC,EAAcjuF,EAAQhzB,OAGtB60G,EAAQiF,GA5CX,SAA2B9tF,EAAUk1F,EAAUluF,GAG9C,IAFA,IAAIlzB,EAAI,EACPC,EAAMmhH,EAASlhH,OACRF,EAAIC,EAAKD,IAChBy2G,GAAQvqF,EAAUk1F,EAAUphH,GAAKkzB,GAElC,OAAOA,EAsCWmuF,CACfn1F,GAAY,IACZrqB,EAAQyf,SAAW,CAAEzf,GAAYA,EACjC,IAIDy/G,GAAY3D,IAAe3D,GAAS9tF,EAEnC6oF,EADA2L,GAAU3L,EAAOkM,EAAQtD,EAAW97G,EAASmxB,GAG9CuuF,EAAan1F,EAGZ20F,IAAgB/G,EAAO2D,EAAYwD,GAAeL,GAGjD,GAGA5tF,EACDouF,EAQF,GALKl1F,GACJA,EAASk1F,EAAWC,EAAY1/G,EAASmxB,GAIrC8tF,EAMJ,IALAnoC,EAAO+nC,GAAUa,EAAYL,GAC7BJ,EAAYnoC,EAAM,GAAI92E,EAASmxB,GAG/BhzB,EAAI24E,EAAKz4E,OACDF,MACAm1G,EAAOx8B,EAAM34E,MACnBuhH,EAAYL,EAASlhH,MAAWshH,EAAWJ,EAASlhH,IAAQm1G,IAK/D,GAAK6E,GACJ,GAAK+G,GAAcpD,EAAY,CAC9B,GAAKoD,EAAa,CAKjB,IAFApoC,EAAO,GACP34E,EAAIuhH,EAAWrhH,OACPF,MACAm1G,EAAOoM,EAAYvhH,KAGzB24E,EAAKl4E,KAAQ6gH,EAAWthH,GAAMm1G,GAGhC4L,EAAY,KAAQQ,EAAa,GAAM5oC,EAAM3lD,GAK9C,IADAhzB,EAAIuhH,EAAWrhH,OACPF,MACAm1G,EAAOoM,EAAYvhH,MACvB24E,EAAOooC,EAAavhH,EAASw6G,EAAM7E,GAAS8L,EAAQjhH,KAAS,IAE/Dg6G,EAAMrhC,KAAYzlD,EAASylD,GAASw8B,UAOvCoM,EAAab,GACZa,IAAeruF,EACdquF,EAAWhgH,OAAQ4/G,EAAaI,EAAWrhH,QAC3CqhH,GAEGR,EACJA,EAAY,KAAM7tF,EAASquF,EAAYvuF,GAEvCvyB,EAAKK,MAAOoyB,EAASquF,MAMzB,SAASC,GAAmBxB,GAyB3B,IAxBA,IAAIyB,EAAcr1F,EAAShX,EAC1BnV,EAAM+/G,EAAO9/G,OACbwhH,EAAkBhL,EAAKgH,SAAUsC,EAAQ,GAAIj+G,MAC7C4/G,EAAmBD,GAAmBhL,EAAKgH,SAAU,KACrD19G,EAAI0hH,EAAkB,EAAI,EAG1BE,EAAe/H,IAAe,SAAU1E,GACvC,OAAOA,IAASsM,IACdE,GAAkB,GACrBE,EAAkBhI,IAAe,SAAU1E,GAC1C,OAAO31G,EAASiiH,EAActM,IAAU,IACtCwM,GAAkB,GACrBlB,EAAW,CAAE,SAAUtL,EAAMtzG,EAASmxB,GACrC,IAAIg7E,GAAS0T,IAAqB1uF,GAAOnxB,IAAYm1G,MAClDyK,EAAe5/G,GAAUyf,SAC1BsgG,EAAczM,EAAMtzG,EAASmxB,GAC7B6uF,EAAiB1M,EAAMtzG,EAASmxB,IAIlC,OADAyuF,EAAe,KACRzT,IAGDhuG,EAAIC,EAAKD,IAChB,GAAOosB,EAAUsqF,EAAKgH,SAAUsC,EAAQhgH,GAAI+B,MAC3C0+G,EAAW,CAAE5G,GAAe2G,GAAgBC,GAAYr0F,QAClD,CAIN,IAHAA,EAAUsqF,EAAKt2G,OAAQ4/G,EAAQhgH,GAAI+B,MAAOjB,MAAO,KAAMk/G,EAAQhgH,GAAIs2G,UAGrDT,GAAY,CAIzB,IADAzgG,IAAMpV,EACEoV,EAAInV,IACNy2G,EAAKgH,SAAUsC,EAAQ5qG,GAAIrT,MADhBqT,KAKjB,OAAOyrG,GACN7gH,EAAI,GAAKwgH,GAAgBC,GACzBzgH,EAAI,GAAKw6G,GAGTwF,EACEj4G,MAAO,EAAG/H,EAAI,GACdgC,OAAQ,CAAE3B,MAAgC,MAAzB2/G,EAAQhgH,EAAI,GAAI+B,KAAe,IAAM,MACtDoa,QAASk8F,EAAO,MAClBjsF,EACApsB,EAAIoV,GAAKosG,GAAmBxB,EAAOj4G,MAAO/H,EAAGoV,IAC7CA,EAAInV,GAAOuhH,GAAqBxB,EAASA,EAAOj4G,MAAOqN,IACvDA,EAAInV,GAAOu6G,GAAYwF,IAGzBS,EAAShgH,KAAM2rB,GAIjB,OAAOo0F,GAAgBC,GAoTxB,OAtpBA3B,GAAW5zG,UAAYwrG,EAAK/oC,QAAU+oC,EAAKyB,QAC3CzB,EAAKoI,WAAa,IAAIA,GAEtBjI,EAAWJ,GAAOI,SAAW,SAAU3qF,EAAU41F,GAChD,IAAI/C,EAASnmG,EAAOonG,EAAQj+G,EAC3BggH,EAAO7H,EAAQ8H,EACfC,EAASrK,EAAY1rF,EAAW,KAEjC,GAAK+1F,EACJ,OAAOH,EAAY,EAAIG,EAAOl6G,MAAO,GAOtC,IAJAg6G,EAAQ71F,EACRguF,EAAS,GACT8H,EAAatL,EAAKiH,UAEVoE,GAAQ,CA2Bf,IAAMhgH,KAxBAg9G,KAAanmG,EAAQ0/F,EAAOjxG,KAAM06G,MAClCnpG,IAGJmpG,EAAQA,EAAMh6G,MAAO6Q,EAAO,GAAI1Y,SAAY6hH,GAE7C7H,EAAOz5G,KAAQu/G,EAAS,KAGzBjB,GAAU,GAGHnmG,EAAQ2/F,EAAalxG,KAAM06G,MACjChD,EAAUnmG,EAAMiF,QAChBmiG,EAAOv/G,KAAM,CACZJ,MAAO0+G,EAGPh9G,KAAM6W,EAAO,GAAIuD,QAASk8F,EAAO,OAElC0J,EAAQA,EAAMh6G,MAAOg3G,EAAQ7+G,SAIhBw2G,EAAKt2G,SACXwY,EAAQ+/F,EAAW52G,GAAOsF,KAAM06G,KAAgBC,EAAYjgH,MAChE6W,EAAQopG,EAAYjgH,GAAQ6W,MAC9BmmG,EAAUnmG,EAAMiF,QAChBmiG,EAAOv/G,KAAM,CACZJ,MAAO0+G,EACPh9G,KAAMA,EACNu0G,QAAS19F,IAEVmpG,EAAQA,EAAMh6G,MAAOg3G,EAAQ7+G,SAI/B,IAAM6+G,EACL,MAOF,OAAO+C,EACNC,EAAM7hH,OACN6hH,EACCtL,GAAOxsG,MAAOiiB,GAGd0rF,EAAY1rF,EAAUguF,GAASnyG,MAAO,IA4ZzC+uG,EAAUL,GAAOK,QAAU,SAAU5qF,EAAUtT,GAC9C,IAAI5Y,EACHkiH,EAAc,GACdC,EAAkB,GAClBF,EAASpK,EAAe3rF,EAAW,KAEpC,IAAM+1F,EAAS,CAOd,IAJMrpG,IACLA,EAAQi+F,EAAU3qF,IAEnBlsB,EAAI4Y,EAAM1Y,OACFF,MACPiiH,EAAST,GAAmB5oG,EAAO5Y,KACtB61G,GACZqM,EAAYzhH,KAAMwhH,GAElBE,EAAgB1hH,KAAMwhH,IAKxBA,EAASpK,EACR3rF,EArJH,SAAmCi2F,EAAiBD,GACnD,IAAIE,EAAQF,EAAYhiH,OAAS,EAChCmiH,EAAYF,EAAgBjiH,OAAS,EACrCoiH,EAAe,SAAUtI,EAAMn4G,EAASmxB,EAAKE,EAASqvF,GACrD,IAAIpN,EAAM//F,EAAGgX,EACZo2F,EAAe,EACfxiH,EAAI,IACJg/G,EAAYhF,GAAQ,GACpByI,EAAa,GACbC,EAAgB1L,EAGhBjC,EAAQiF,GAAQqI,GAAa3L,EAAKz7F,KAAL,IAAoB,IAAKsnG,GAGtDI,EAAkBnL,GAA4B,MAAjBkL,EAAwB,EAAI7+G,KAAKgB,UAAY,GAC1E5E,EAAM80G,EAAM70G,OAcb,IAZKqiH,IAMJvL,EAAmBn1G,GAAWjI,GAAYiI,GAAW0gH,GAM9CviH,IAAMC,GAAgC,OAAvBk1G,EAAOJ,EAAO/0G,IAAeA,IAAM,CACzD,GAAKqiH,GAAalN,EAAO,CAWxB,IAVA//F,EAAI,EAMEvT,GAAWszG,EAAKlyF,eAAiBrpB,IACtCu9G,EAAahC,GACbniF,GAAOokF,GAEEhrF,EAAU+1F,EAAiB/sG,MACpC,GAAKgX,EAAS+oF,EAAMtzG,GAAWjI,EAAUo5B,GAAQ,CAChDE,EAAQzyB,KAAM00G,GACd,MAGGoN,IACJ/K,EAAUmL,GAKPP,KAGGjN,GAAQ/oF,GAAW+oF,IACzBqN,IAIIxI,GACJgF,EAAUv+G,KAAM00G,IAgBnB,GATAqN,GAAgBxiH,EASXoiH,GAASpiH,IAAMwiH,EAAe,CAElC,IADAptG,EAAI,EACMgX,EAAU81F,EAAa9sG,MAChCgX,EAAS4yF,EAAWyD,EAAY5gH,EAASmxB,GAG1C,GAAKgnF,EAAO,CAGX,GAAKwI,EAAe,EACnB,KAAQxiH,KACCg/G,EAAWh/G,IAAOyiH,EAAYziH,KACrCyiH,EAAYziH,GAAM6O,EAAI1O,KAAM+yB,IAM/BuvF,EAAa/B,GAAU+B,GAIxBhiH,EAAKK,MAAOoyB,EAASuvF,GAGhBF,IAAcvI,GAAQyI,EAAWviH,OAAS,GAC5CsiH,EAAeN,EAAYhiH,OAAW,GAExCu2G,GAAO4G,WAAYnqF,GAUrB,OALKqvF,IACJ/K,EAAUmL,EACV3L,EAAmB0L,GAGb1D,GAGT,OAAOoD,EACNxH,GAAc0H,GACdA,EA4BCM,CAA0BT,EAAiBD,KAIrCh2F,SAAWA,EAEnB,OAAO+1F,GAYRlL,EAASN,GAAOM,OAAS,SAAU7qF,EAAUrqB,EAASqxB,EAAS8mF,GAC9D,IAAIh6G,EAAGggH,EAAQ6C,EAAO9gH,EAAMkZ,EAC3B6nG,EAA+B,oBAAb52F,GAA2BA,EAC7CtT,GAASohG,GAAQnD,EAAY3qF,EAAW42F,EAAS52F,UAAYA,GAM9D,GAJAgH,EAAUA,GAAW,GAIC,IAAjBta,EAAM1Y,OAAe,CAIzB,IADA8/G,EAASpnG,EAAO,GAAMA,EAAO,GAAI7Q,MAAO,IAC5B7H,OAAS,GAAsC,QAA/B2iH,EAAQ7C,EAAQ,IAAMj+G,MAC5B,IAArBF,EAAQyf,UAAkB81F,GAAkBV,EAAKgH,SAAUsC,EAAQ,GAAIj+G,MAAS,CAIhF,KAFAF,GAAY60G,EAAKz7F,KAAL,GAAmB4nG,EAAMvM,QAAS,GAC5Cn6F,QAAS+8F,GAAWC,IAAat3G,IAAa,IAAM,IAErD,OAAOqxB,EAGI4vF,IACXjhH,EAAUA,EAAQ0H,YAGnB2iB,EAAWA,EAASnkB,MAAOi4G,EAAOniG,QAAQxd,MAAMH,QAKjD,IADAF,EAAI24G,EAAS,aAAmB94F,KAAMqM,GAAa,EAAI8zF,EAAO9/G,OACtDF,MACP6iH,EAAQ7C,EAAQhgH,IAGX02G,EAAKgH,SAAY37G,EAAO8gH,EAAM9gH,QAGnC,IAAOkZ,EAAOy7F,EAAKz7F,KAAMlZ,MAGjBi4G,EAAO/+F,EACb4nG,EAAMvM,QAAS,GAAIn6F,QAAS+8F,GAAWC,IACvCF,GAASp5F,KAAMmgG,EAAQ,GAAIj+G,OAAUqxE,GAAavxE,EAAQ0H,aACzD1H,IACI,CAKL,GAFAm+G,EAAOz+G,OAAQvB,EAAG,KAClBksB,EAAW8tF,EAAK95G,QAAUs6G,GAAYwF,IAGrC,OADAv/G,EAAKK,MAAOoyB,EAAS8mF,GACd9mF,EAGR,OAeJ,OAPE4vF,GAAYhM,EAAS5qF,EAAUtT,IAChCohG,EACAn4G,GACCu1G,EACDlkF,GACCrxB,GAAWo3G,GAASp5F,KAAMqM,IAAcknD,GAAavxE,EAAQ0H,aAAgB1H,GAExEqxB,GAMR8gF,EAAQwJ,WAAa3H,EAAQztG,MAAO,IAAKooC,KAAMunE,GAAYjoG,KAAM,MAAS+lG,EAI1E7B,EAAQuJ,mBAAqBrG,EAG7BC,IAIAnD,EAAQ8I,aAAejC,IAAQ,SAAUj6F,GAGxC,OAA4E,EAArEA,EAAG+7F,wBAAyB/iH,EAASsP,cAAe,gBAMtD2xG,IAAQ,SAAUj6F,GAEvB,OADAA,EAAGw7F,UAAY,mBACiC,MAAzCx7F,EAAGgO,WAAWtC,aAAc,YAEnCwuF,GAAW,0BAA0B,SAAU3F,EAAMO,EAAMkB,GAC1D,IAAMA,EACL,OAAOzB,EAAK7oF,aAAcopF,EAA6B,SAAvBA,EAAKxmG,cAA2B,EAAI,MAOjE8kG,EAAQ9rG,YAAe2yG,IAAQ,SAAUj6F,GAG9C,OAFAA,EAAGw7F,UAAY,WACfx7F,EAAGgO,WAAW7N,aAAc,QAAS,IACY,KAA1CH,EAAGgO,WAAWtC,aAAc,aAEnCwuF,GAAW,SAAS,SAAU3F,EAAM4N,EAAOnM,GAC1C,IAAMA,GAAyC,UAAhCzB,EAAK1pF,SAASvc,cAC5B,OAAOimG,EAAK6N,gBAOTnI,IAAQ,SAAUj6F,GACvB,OAAwC,MAAjCA,EAAG0L,aAAc,gBAExBwuF,GAAW7C,GAAU,SAAU9C,EAAMO,EAAMkB,GAC1C,IAAI7N,EACJ,IAAM6N,EACL,OAAwB,IAAjBzB,EAAMO,GAAkBA,EAAKxmG,eACjC65F,EAAMoM,EAAK8G,iBAAkBvG,KAAY3M,EAAIoU,UAC9CpU,EAAI1oG,MACJ,QAKEo2G,GA14EL,CA44EG58G,GAIL66G,EAAOz5F,KAAOw7F,GACd/B,EAAOwI,KAAOzG,EAAO3qF,WAGR,KAAQ4oF,EAAOwI,KAAK/E,QACjCzD,EAAO2I,WAAa3I,EAAOuO,OAASxM,EAAO4G,WAC3C3I,EAAOhsB,KAAO+tB,EAAOE,QACrBjC,EAAOwO,SAAWzM,EAAOG,MACzBlC,EAAOryG,SAAWo0G,EAAOp0G,SACzBqyG,EAAOyO,eAAiB1M,EAAO2C,OAK/B,IAAIvP,EAAM,SAAUsL,EAAMtL,EAAKuZ,GAI9B,IAHA,IAAIrE,EAAU,GACbsE,OAAqBv6G,IAAVs6G,GAEFjO,EAAOA,EAAMtL,KAA6B,IAAlBsL,EAAK7zF,UACtC,GAAuB,IAAlB6zF,EAAK7zF,SAAiB,CAC1B,GAAK+hG,GAAY3O,EAAQS,GAAOmO,GAAIF,GACnC,MAEDrE,EAAQt+G,KAAM00G,GAGhB,OAAO4J,GAIJwE,EAAW,SAAUx6E,EAAGosE,GAG3B,IAFA,IAAI4J,EAAU,GAENh2E,EAAGA,EAAIA,EAAEoyE,YACI,IAAfpyE,EAAEznB,UAAkBynB,IAAMosE,GAC9B4J,EAAQt+G,KAAMsoC,GAIhB,OAAOg2E,GAIJyE,EAAgB9O,EAAOwI,KAAKtkG,MAAM6qG,aAItC,SAASh4F,EAAU0pF,EAAMO,GAExB,OAAOP,EAAK1pF,UAAY0pF,EAAK1pF,SAASvc,gBAAkBwmG,EAAKxmG,cAG9D,IAAIw0G,EAAe,kEAKnB,SAASC,EAAQl5G,EAAUm5G,EAAWC,GACrC,OAAK5P,EAAY2P,GACTlP,EAAOa,KAAM9qG,GAAU,SAAU0qG,EAAMn1G,GAC7C,QAAS4jH,EAAUzjH,KAAMg1G,EAAMn1G,EAAGm1G,KAAW0O,KAK1CD,EAAUtiG,SACPozF,EAAOa,KAAM9qG,GAAU,SAAU0qG,GACvC,OAASA,IAASyO,IAAgBC,KAKV,kBAAdD,EACJlP,EAAOa,KAAM9qG,GAAU,SAAU0qG,GACvC,OAAS31G,EAAQW,KAAMyjH,EAAWzO,IAAU,IAAQ0O,KAK/CnP,EAAOt0G,OAAQwjH,EAAWn5G,EAAUo5G,GAG5CnP,EAAOt0G,OAAS,SAAU88G,EAAMnI,EAAO8O,GACtC,IAAI1O,EAAOJ,EAAO,GAMlB,OAJK8O,IACJ3G,EAAO,QAAUA,EAAO,KAGH,IAAjBnI,EAAM70G,QAAkC,IAAlBi1G,EAAK7zF,SACxBozF,EAAOz5F,KAAKohG,gBAAiBlH,EAAM+H,GAAS,CAAE/H,GAAS,GAGxDT,EAAOz5F,KAAKq7F,QAAS4G,EAAMxI,EAAOa,KAAMR,GAAO,SAAUI,GAC/D,OAAyB,IAAlBA,EAAK7zF,cAIdozF,EAAOzuC,GAAGzqD,OAAQ,CACjBP,KAAM,SAAUiR,GACf,IAAIlsB,EAAGguG,EACN/tG,EAAM7D,KAAK8D,OACXmuD,EAAOjyD,KAER,GAAyB,kBAAb8vB,EACX,OAAO9vB,KAAK04G,UAAWJ,EAAQxoF,GAAW9rB,QAAQ,WACjD,IAAMJ,EAAI,EAAGA,EAAIC,EAAKD,IACrB,GAAK00G,EAAOryG,SAAUgsD,EAAMruD,GAAK5D,MAChC,OAAO,MAQX,IAFA4xG,EAAM5xG,KAAK04G,UAAW,IAEhB90G,EAAI,EAAGA,EAAIC,EAAKD,IACrB00G,EAAOz5F,KAAMiR,EAAUmiC,EAAMruD,GAAKguG,GAGnC,OAAO/tG,EAAM,EAAIy0G,EAAO2I,WAAYrP,GAAQA,GAE7C5tG,OAAQ,SAAU8rB,GACjB,OAAO9vB,KAAK04G,UAAW6O,EAAQvnH,KAAM8vB,GAAY,IAAI,KAEtD23F,IAAK,SAAU33F,GACd,OAAO9vB,KAAK04G,UAAW6O,EAAQvnH,KAAM8vB,GAAY,IAAI,KAEtDo3F,GAAI,SAAUp3F,GACb,QAASy3F,EACRvnH,KAIoB,kBAAb8vB,GAAyBs3F,EAAc3jG,KAAMqM,GACnDwoF,EAAQxoF,GACRA,GAAY,IACb,GACChsB,UASJ,IAAI4jH,EAMH9K,EAAa,uCAENtE,EAAOzuC,GAAG0uC,KAAO,SAAUzoF,EAAUrqB,EAASwR,GACpD,IAAIuF,EAAOu8F,EAGX,IAAMjpF,EACL,OAAO9vB,KAQR,GAHAiX,EAAOA,GAAQywG,EAGU,kBAAb53F,EAAwB,CAanC,KAPCtT,EALsB,MAAlBsT,EAAU,IACsB,MAApCA,EAAUA,EAAShsB,OAAS,IAC5BgsB,EAAShsB,QAAU,EAGX,CAAE,KAAMgsB,EAAU,MAGlB8sF,EAAW3xG,KAAM6kB,MAIVtT,EAAO,IAAQ/W,EA6CxB,OAAMA,GAAWA,EAAQgzG,QACtBhzG,GAAWwR,GAAO4H,KAAMiR,GAK1B9vB,KAAK8gB,YAAarb,GAAUoZ,KAAMiR,GAhDzC,GAAKtT,EAAO,GAAM,CAYjB,GAXA/W,EAAUA,aAAmB6yG,EAAS7yG,EAAS,GAAMA,EAIrD6yG,EAAOM,MAAO54G,KAAMs4G,EAAOqP,UAC1BnrG,EAAO,GACP/W,GAAWA,EAAQyf,SAAWzf,EAAQohB,eAAiBphB,EAAUjI,GACjE,IAII8pH,EAAW7jG,KAAMjH,EAAO,KAAS87F,EAAOkB,cAAe/zG,GAC3D,IAAM+W,KAAS/W,EAGToyG,EAAY73G,KAAMwc,IACtBxc,KAAMwc,GAAS/W,EAAS+W,IAIxBxc,KAAKslB,KAAM9I,EAAO/W,EAAS+W,IAK9B,OAAOxc,KAYP,OARA+4G,EAAOv7G,EAAS4oB,eAAgB5J,EAAO,OAKtCxc,KAAM,GAAM+4G,EACZ/4G,KAAK8D,OAAS,GAER9D,KAcH,OAAK8vB,EAAS5K,UACpBllB,KAAM,GAAM8vB,EACZ9vB,KAAK8D,OAAS,EACP9D,MAII63G,EAAY/nF,QACDpjB,IAAfuK,EAAK2wG,MACX3wG,EAAK2wG,MAAO93F,GAGZA,EAAUwoF,GAGLA,EAAOyB,UAAWjqF,EAAU9vB,QAIhC8O,UAAYwpG,EAAOzuC,GAGxB69C,EAAapP,EAAQ96G,GAGrB,IAAIqqH,EAAe,iCAGlBC,EAAmB,CAClB/0F,UAAU,EACVg1F,UAAU,EACVloG,MAAM,EACNC,MAAM,GAoFR,SAASkoG,EAASnJ,EAAKpR,GACtB,MAAUoR,EAAMA,EAAKpR,KAA4B,IAAjBoR,EAAI35F,WACpC,OAAO25F,EAnFRvG,EAAOzuC,GAAGzqD,OAAQ,CACjB6oG,IAAK,SAAUt2G,GACd,IAAIw3C,EAAUmvD,EAAQ3mG,EAAQ3R,MAC7BkS,EAAIi3C,EAAQrlD,OAEb,OAAO9D,KAAKgE,QAAQ,WAEnB,IADA,IAAIJ,EAAI,EACAA,EAAIsO,EAAGtO,IACd,GAAK00G,EAAOryG,SAAUjG,KAAMmpD,EAASvlD,IACpC,OAAO,MAMXskH,QAAS,SAAUx4F,EAAWjqB,GAC7B,IAAIo5G,EACHj7G,EAAI,EACJsO,EAAIlS,KAAK8D,OACT6+G,EAAU,GACVx5D,EAA+B,kBAAdz5B,GAA0B4oF,EAAQ5oF,GAGpD,IAAM03F,EAAc3jG,KAAMiM,GACzB,KAAQ9rB,EAAIsO,EAAGtO,IACd,IAAMi7G,EAAM7+G,KAAM4D,GAAKi7G,GAAOA,IAAQp5G,EAASo5G,EAAMA,EAAI1xG,WAGxD,GAAK0xG,EAAI35F,SAAW,KAAQikC,EAC3BA,EAAQnkD,MAAO65G,IAAS,EAGP,IAAjBA,EAAI35F,UACHozF,EAAOz5F,KAAKohG,gBAAiBpB,EAAKnvF,IAAgB,CAEnDizF,EAAQt+G,KAAMw6G,GACd,MAMJ,OAAO7+G,KAAK04G,UAAWiK,EAAQ7+G,OAAS,EAAIw0G,EAAO2I,WAAY0B,GAAYA,IAI5E39G,MAAO,SAAU+zG,GAGhB,OAAMA,EAKe,kBAATA,EACJ31G,EAAQW,KAAMu0G,EAAQS,GAAQ/4G,KAAM,IAIrCoD,EAAQW,KAAM/D,KAGpB+4G,EAAKN,OAASM,EAAM,GAAMA,GAZjB/4G,KAAM,IAAOA,KAAM,GAAImN,WAAenN,KAAKg5G,QAAQmP,UAAUrkH,QAAU,GAgBlFW,IAAK,SAAUqrB,EAAUrqB,GACxB,OAAOzF,KAAK04G,UACXJ,EAAO2I,WACN3I,EAAOM,MAAO54G,KAAKsH,MAAOgxG,EAAQxoF,EAAUrqB,OAK/C2iH,QAAS,SAAUt4F,GAClB,OAAO9vB,KAAKyE,IAAiB,MAAZqrB,EAChB9vB,KAAK64G,WAAa74G,KAAK64G,WAAW70G,OAAQ8rB,OAU7CwoF,EAAOQ,KAAM,CACZl4F,OAAQ,SAAUm4F,GACjB,IAAIn4F,EAASm4F,EAAK5rG,WAClB,OAAOyT,GAA8B,KAApBA,EAAOsE,SAAkBtE,EAAS,MAEpDynG,QAAS,SAAUtP,GAClB,OAAOtL,EAAKsL,EAAM,eAEnBuP,aAAc,SAAUvP,EAAM13B,EAAI2lC,GACjC,OAAOvZ,EAAKsL,EAAM,aAAciO,IAEjCnnG,KAAM,SAAUk5F,GACf,OAAOiP,EAASjP,EAAM,gBAEvBj5F,KAAM,SAAUi5F,GACf,OAAOiP,EAASjP,EAAM,oBAEvBwP,QAAS,SAAUxP,GAClB,OAAOtL,EAAKsL,EAAM,gBAEnBoP,QAAS,SAAUpP,GAClB,OAAOtL,EAAKsL,EAAM,oBAEnByP,UAAW,SAAUzP,EAAM13B,EAAI2lC,GAC9B,OAAOvZ,EAAKsL,EAAM,cAAeiO,IAElCyB,UAAW,SAAU1P,EAAM13B,EAAI2lC,GAC9B,OAAOvZ,EAAKsL,EAAM,kBAAmBiO,IAEtCG,SAAU,SAAUpO,GACnB,OAAOoO,GAAYpO,EAAK5rG,YAAc,IAAKqlB,WAAYumF,IAExDhmF,SAAU,SAAUgmF,GACnB,OAAOoO,EAAUpO,EAAKvmF,aAEvBu1F,SAAU,SAAUhP,GACnB,OAA6B,MAAxBA,EAAK2P,iBAKTrR,EAAU0B,EAAK2P,iBAER3P,EAAK2P,iBAMRr5F,EAAU0pF,EAAM,cACpBA,EAAOA,EAAK4P,SAAW5P,GAGjBT,EAAOM,MAAO,GAAIG,EAAK30F,gBAE7B,SAAUk1F,EAAMzvC,GAClByuC,EAAOzuC,GAAIyvC,GAAS,SAAU0N,EAAOl3F,GACpC,IAAI6yF,EAAUrK,EAAO9kG,IAAKxT,KAAM6pE,EAAIm9C,GAuBpC,MArB0B,UAArB1N,EAAK3tG,OAAQ,KACjBmkB,EAAWk3F,GAGPl3F,GAAgC,kBAAbA,IACvB6yF,EAAUrK,EAAOt0G,OAAQ8rB,EAAU6yF,IAG/B3iH,KAAK8D,OAAS,IAGZgkH,EAAkBxO,IACvBhB,EAAO2I,WAAY0B,GAIfkF,EAAapkG,KAAM61F,IACvBqJ,EAAQruE,WAIHt0C,KAAK04G,UAAWiK,OAGzB,IAAIiG,EAAkB,oBAsOtB,SAASC,EAAU3/G,GAClB,OAAOA,EAER,SAAS4/G,EAASt7E,GACjB,MAAMA,EAGP,SAASu7E,EAAY9kH,EAAO+kH,EAASC,EAAQC,GAC5C,IAAIjqG,EAEJ,IAGMhb,GAAS4zG,EAAc54F,EAAShb,EAAMklH,SAC1ClqG,EAAOlb,KAAME,GAAQo3G,KAAM2N,GAAUI,KAAMH,GAGhChlH,GAAS4zG,EAAc54F,EAAShb,EAAMolH,MACjDpqG,EAAOlb,KAAME,EAAO+kH,EAASC,GAQ7BD,EAAQtkH,WAAOgI,EAAW,CAAEzI,GAAQ0H,MAAOu9G,IAM3C,MAAQjlH,GAITglH,EAAOvkH,WAAOgI,EAAW,CAAEzI,KAvO7Bq0G,EAAOgR,UAAY,SAAU5lH,GAI5BA,EAA6B,kBAAZA,EAlClB,SAAwBA,GACvB,IAAIqB,EAAS,GAIb,OAHAuzG,EAAOQ,KAAMp1G,EAAQ8Y,MAAOosG,IAAmB,IAAI,SAAUW,EAAGC,GAC/DzkH,EAAQykH,IAAS,KAEXzkH,EA8BN0kH,CAAe/lH,GACf40G,EAAOl5F,OAAQ,GAAI1b,GAEpB,IACCgmH,EAGAC,EAGAC,EAGAC,EAGA9Y,EAAO,GAGP+Y,EAAQ,GAGRC,GAAe,EAGftmH,EAAO,WAQN,IALAomH,EAASA,GAAUnmH,EAAQsmH,KAI3BJ,EAAQF,GAAS,EACTI,EAAMhmH,OAAQimH,GAAe,EAEpC,IADAJ,EAASG,EAAMroG,UACLsoG,EAAchZ,EAAKjtG,SAGmC,IAA1DitG,EAAMgZ,GAAcrlH,MAAOilH,EAAQ,GAAKA,EAAQ,KACpDjmH,EAAQumH,cAGRF,EAAchZ,EAAKjtG,OACnB6lH,GAAS,GAMNjmH,EAAQimH,SACbA,GAAS,GAGVD,GAAS,EAGJG,IAIH9Y,EADI4Y,EACG,GAIA,KAMV13D,EAAO,CAGNxtD,IAAK,WA2BJ,OA1BKssG,IAGC4Y,IAAWD,IACfK,EAAchZ,EAAKjtG,OAAS,EAC5BgmH,EAAMzlH,KAAMslH,IAGb,SAAWllH,EAAKyY,GACfo7F,EAAOQ,KAAM57F,GAAM,SAAUqsG,EAAG1d,GAC1BgM,EAAYhM,GACVnoG,EAAQmjH,QAAW50D,EAAKg2D,IAAKpc,IAClCkF,EAAK1sG,KAAMwnG,GAEDA,GAAOA,EAAI/nG,QAA4B,WAAlBu0G,EAAQxM,IAGxCpnG,EAAKonG,MATR,CAYK1nG,WAEAwlH,IAAWD,GACfjmH,KAGKzD,MAIRoF,OAAQ,WAYP,OAXAkzG,EAAOQ,KAAM30G,WAAW,SAAUolH,EAAG1d,GAEpC,IADA,IAAI7mG,GACMA,EAAQszG,EAAO0B,QAASnO,EAAKkF,EAAM/rG,KAAa,GACzD+rG,EAAK5rG,OAAQH,EAAO,GAGfA,GAAS+kH,GACbA,OAII/pH,MAKRioH,IAAK,SAAUp+C,GACd,OAAOA,EACNyuC,EAAO0B,QAASnwC,EAAIknC,IAAU,EAC9BA,EAAKjtG,OAAS,GAIhBwmE,MAAO,WAIN,OAHKymC,IACJA,EAAO,IAED/wG,MAMRkqH,QAAS,WAGR,OAFAL,EAASC,EAAQ,GACjB/Y,EAAO4Y,EAAS,GACT3pH,MAER09G,SAAU,WACT,OAAQ3M,GAMToZ,KAAM,WAKL,OAJAN,EAASC,EAAQ,GACXH,GAAWD,IAChB3Y,EAAO4Y,EAAS,IAEV3pH,MAER6pH,OAAQ,WACP,QAASA,GAIVO,SAAU,SAAU3kH,EAASyX,GAS5B,OARM2sG,IAEL3sG,EAAO,CAAEzX,GADTyX,EAAOA,GAAQ,IACQvR,MAAQuR,EAAKvR,QAAUuR,GAC9C4sG,EAAMzlH,KAAM6Y,GACNwsG,GACLjmH,KAGKzD,MAIRyD,KAAM,WAEL,OADAwuD,EAAKm4D,SAAUpqH,KAAMmE,WACdnE,MAIR4pH,MAAO,WACN,QAASA,IAIZ,OAAO33D,GA4CRqmD,EAAOl5F,OAAQ,CAEdirG,SAAU,SAAUC,GACnB,IAAIC,EAAS,CAIX,CAAE,SAAU,WAAYjS,EAAOgR,UAAW,UACzChR,EAAOgR,UAAW,UAAY,GAC/B,CAAE,UAAW,OAAQhR,EAAOgR,UAAW,eACtChR,EAAOgR,UAAW,eAAiB,EAAG,YACvC,CAAE,SAAU,OAAQhR,EAAOgR,UAAW,eACrChR,EAAOgR,UAAW,eAAiB,EAAG,aAExCkB,EAAQ,UACRrB,EAAU,CACTqB,MAAO,WACN,OAAOA,GAERC,OAAQ,WAEP,OADAC,EAASrP,KAAMl3G,WAAYilH,KAAMjlH,WAC1BnE,MAER,MAAS,SAAU6pE,GAClB,OAAOs/C,EAAQE,KAAM,KAAMx/C,IAI5B8gD,KAAM,WACL,IAAIC,EAAMzmH,UAEV,OAAOm0G,EAAO+R,UAAU,SAAUQ,GACjCvS,EAAOQ,KAAMyR,GAAQ,SAAUlpC,EAAIypC,GAGlC,IAAIjhD,EAAKguC,EAAY+S,EAAKE,EAAO,MAAWF,EAAKE,EAAO,IAKxDJ,EAAUI,EAAO,KAAO,WACvB,IAAIC,EAAWlhD,GAAMA,EAAGnlE,MAAO1E,KAAMmE,WAChC4mH,GAAYlT,EAAYkT,EAAS5B,SACrC4B,EAAS5B,UACP6B,SAAUH,EAASI,QACnB5P,KAAMwP,EAAS7B,SACfI,KAAMyB,EAAS5B,QAEjB4B,EAAUC,EAAO,GAAM,QACtB9qH,KACA6pE,EAAK,CAAEkhD,GAAa5mH,iBAKxBymH,EAAM,QACHzB,WAELE,KAAM,SAAU6B,EAAaC,EAAYC,GACxC,IAAIC,EAAW,EACf,SAASrC,EAAS5xC,EAAOszC,EAAUznH,EAASqoH,GAC3C,OAAO,WACN,IAAIpyF,EAAOl5B,KACVkd,EAAO/Y,UACPonH,EAAa,WACZ,IAAIR,EAAU1B,EAKd,KAAKjyC,EAAQi0C,GAAb,CAQA,IAJAN,EAAW9nH,EAAQyB,MAAOw0B,EAAMhc,MAIdwtG,EAASvB,UAC1B,MAAM,IAAInd,UAAW,4BAOtBqd,EAAO0B,IAKgB,kBAAbA,GACY,oBAAbA,IACRA,EAAS1B,KAGLxR,EAAYwR,GAGXiC,EACJjC,EAAKtlH,KACJgnH,EACA/B,EAASqC,EAAUX,EAAU7B,EAAUyC,GACvCtC,EAASqC,EAAUX,EAAU5B,EAASwC,KAOvCD,IAEAhC,EAAKtlH,KACJgnH,EACA/B,EAASqC,EAAUX,EAAU7B,EAAUyC,GACvCtC,EAASqC,EAAUX,EAAU5B,EAASwC,GACtCtC,EAASqC,EAAUX,EAAU7B,EAC5B6B,EAASc,eASPvoH,IAAY4lH,IAChB3vF,OAAOxsB,EACPwQ,EAAO,CAAE6tG,KAKRO,GAAWZ,EAASe,aAAevyF,EAAMhc,MAK7C4pE,EAAUwkC,EACTC,EACA,WACC,IACCA,IACC,MAAQzhF,GAEJwuE,EAAO+R,SAASqB,eACpBpT,EAAO+R,SAASqB,cAAe5hF,EAC9Bg9C,EAAQ6kC,YAMLv0C,EAAQ,GAAKi0C,IAIZpoH,IAAY6lH,IAChB5vF,OAAOxsB,EACPwQ,EAAO,CAAE4sB,IAGV4gF,EAASkB,WAAY1yF,EAAMhc,MAS3Bk6D,EACJ0P,KAKKwxB,EAAO+R,SAASwB,eACpB/kC,EAAQ6kC,WAAarT,EAAO+R,SAASwB,gBAEtCpuH,EAAO+rB,WAAYs9D,KAKtB,OAAOwxB,EAAO+R,UAAU,SAAUQ,GAGjCN,EAAQ,GAAK,GAAI9lH,IAChBukH,EACC,EACA6B,EACAhT,EAAYuT,GACXA,EACAvC,EACDgC,EAASW,aAKXjB,EAAQ,GAAK,GAAI9lH,IAChBukH,EACC,EACA6B,EACAhT,EAAYqT,GACXA,EACArC,IAKH0B,EAAQ,GAAK,GAAI9lH,IAChBukH,EACC,EACA6B,EACAhT,EAAYsT,GACXA,EACArC,OAGAK,WAKLA,QAAS,SAAUjiH,GAClB,OAAc,MAAPA,EAAcoxG,EAAOl5F,OAAQlY,EAAKiiH,GAAYA,IAGvDuB,EAAW,GAkEZ,OA/DApS,EAAOQ,KAAMyR,GAAQ,SAAU3mH,EAAGknH,GACjC,IAAI/Z,EAAO+Z,EAAO,GACjBgB,EAAchB,EAAO,GAKtB3B,EAAS2B,EAAO,IAAQ/Z,EAAKtsG,IAGxBqnH,GACJ/a,EAAKtsG,KACJ,WAIC+lH,EAAQsB,IAKTvB,EAAQ,EAAI3mH,GAAK,GAAIsmH,QAIrBK,EAAQ,EAAI3mH,GAAK,GAAIsmH,QAGrBK,EAAQ,GAAK,GAAIJ,KAGjBI,EAAQ,GAAK,GAAIJ,MAOnBpZ,EAAKtsG,IAAKqmH,EAAO,GAAIrnH,MAKrBinH,EAAUI,EAAO,IAAQ,WAExB,OADAJ,EAAUI,EAAO,GAAM,QAAU9qH,OAAS0qH,OAAWh+G,EAAY1M,KAAMmE,WAChEnE,MAMR0qH,EAAUI,EAAO,GAAM,QAAW/Z,EAAKqZ,YAIxCjB,EAAQA,QAASuB,GAGZJ,GACJA,EAAKvmH,KAAM2mH,EAAUA,GAIfA,GAIRqB,KAAM,SAAUC,GACf,IAGC3d,EAAYlqG,UAAUL,OAGtBF,EAAIyqG,EAGJ4d,EAAkBx3G,MAAO7Q,GACzBsoH,EAAgBvgH,EAAM5H,KAAMI,WAG5BgoH,EAAU7T,EAAO+R,WAGjB+B,EAAa,SAAUxoH,GACtB,OAAO,SAAUK,GAChBgoH,EAAiBroH,GAAM5D,KACvBksH,EAAetoH,GAAMO,UAAUL,OAAS,EAAI6H,EAAM5H,KAAMI,WAAcF,IAC5DoqG,GACT8d,EAAQV,YAAaQ,EAAiBC,KAM1C,GAAK7d,GAAa,IACjB0a,EAAYiD,EAAaG,EAAQ9Q,KAAM+Q,EAAYxoH,IAAMolH,QAASmD,EAAQlD,QACxE5a,GAGuB,YAApB8d,EAAQ3B,SACZ3S,EAAYqU,EAAetoH,IAAOsoH,EAAetoH,GAAIylH,OAErD,OAAO8C,EAAQ9C,OAKjB,KAAQzlH,KACPmlH,EAAYmD,EAAetoH,GAAKwoH,EAAYxoH,GAAKuoH,EAAQlD,QAG1D,OAAOkD,EAAQhD,aAOjB,IAAIkD,EAAc,yDAElB/T,EAAO+R,SAASqB,cAAgB,SAAU79G,EAAOy+G,GAI3C7uH,EAAOgF,SAAWhF,EAAOgF,QAAQqmB,MAAQjb,GAASw+G,EAAY5oG,KAAM5V,EAAMyrG,OAC9E77G,EAAOgF,QAAQqmB,KAAM,8BAAgCjb,EAAM0+G,QAAS1+G,EAAMy+G,MAAOA,IAOnFhU,EAAOkU,eAAiB,SAAU3+G,GACjCpQ,EAAO+rB,YAAY,WAClB,MAAM3b,MAQR,IAAI4+G,EAAYnU,EAAO+R,WAkDvB,SAASqC,IACRlvH,EAAS0kB,oBAAqB,mBAAoBwqG,GAClDjvH,EAAOykB,oBAAqB,OAAQwqG,GACpCpU,EAAOsP,QAnDRtP,EAAOzuC,GAAG+9C,MAAQ,SAAU/9C,GAY3B,OAVA4iD,EACEpD,KAAMx/C,GAKN8iD,OAAO,SAAU9+G,GACjByqG,EAAOkU,eAAgB3+G,MAGlB7N,MAGRs4G,EAAOl5F,OAAQ,CAGds6F,SAAS,EAITkT,UAAW,EAGXhF,MAAO,SAAUiF,KAGF,IAATA,IAAkBvU,EAAOsU,UAAYtU,EAAOoB,WAKjDpB,EAAOoB,SAAU,GAGH,IAATmT,KAAmBvU,EAAOsU,UAAY,GAK3CH,EAAUhB,YAAajuH,EAAU,CAAE86G,QAIrCA,EAAOsP,MAAMyB,KAAOoD,EAAUpD,KAaD,aAAxB7rH,EAASgrB,YACa,YAAxBhrB,EAASgrB,aAA6BhrB,EAASqnB,gBAAgBioG,SAGjErvH,EAAO+rB,WAAY8uF,EAAOsP,QAK1BpqH,EAASwkB,iBAAkB,mBAAoB0qG,GAG/CjvH,EAAOukB,iBAAkB,OAAQ0qG,IAQlC,IAAIK,EAAS,SAATA,EAAmBpU,EAAO9uC,EAAIziE,EAAKnD,EAAO+oH,EAAWC,EAAUC,GAClE,IAAItpH,EAAI,EACPC,EAAM80G,EAAM70G,OACZqpH,EAAc,MAAP/lH,EAGR,GAAuB,WAAlBixG,EAAQjxG,GAEZ,IAAMxD,KADNopH,GAAY,EACD5lH,EACV2lH,EAAQpU,EAAO9uC,EAAIjmE,EAAGwD,EAAKxD,IAAK,EAAMqpH,EAAUC,QAI3C,QAAexgH,IAAVzI,IACX+oH,GAAY,EAENnV,EAAY5zG,KACjBipH,GAAM,GAGFC,IAGCD,GACJrjD,EAAG9lE,KAAM40G,EAAO10G,GAChB4lE,EAAK,OAILsjD,EAAOtjD,EACPA,EAAK,SAAUkvC,EAAMvjB,EAAMvxF,GAC1B,OAAOkpH,EAAKppH,KAAMu0G,EAAQS,GAAQ90G,MAKhC4lE,GACJ,KAAQjmE,EAAIC,EAAKD,IAChBimE,EACC8uC,EAAO/0G,GAAKwD,EAAK8lH,EAChBjpH,EACAA,EAAMF,KAAM40G,EAAO/0G,GAAKA,EAAGimE,EAAI8uC,EAAO/0G,GAAKwD,KAMhD,OAAK4lH,EACGrU,EAIHwU,EACGtjD,EAAG9lE,KAAM40G,GAGV90G,EAAMgmE,EAAI8uC,EAAO,GAAKvxG,GAAQ6lH,GAKlCG,EAAY,QACfC,EAAa,YAGd,SAASC,EAAYC,EAAMC,GAC1B,OAAOA,EAAO9hH,cAMf,SAAS+hH,EAAWliH,GACnB,OAAOA,EAAOwU,QAASqtG,EAAW,OAAQrtG,QAASstG,EAAYC,GAEhE,IAAII,EAAa,SAAUC,GAQ1B,OAA0B,IAAnBA,EAAMzoG,UAAqC,IAAnByoG,EAAMzoG,YAAsByoG,EAAMzoG,UAMlE,SAAS0oG,IACR5tH,KAAKy5G,QAAUnB,EAAOmB,QAAUmU,EAAKC,MAGtCD,EAAKC,IAAM,EAEXD,EAAK9+G,UAAY,CAEhB+3D,MAAO,SAAU8mD,GAGhB,IAAI1pH,EAAQ0pH,EAAO3tH,KAAKy5G,SA4BxB,OAzBMx1G,IACLA,EAAQ,GAKHypH,EAAYC,KAIXA,EAAMzoG,SACVyoG,EAAO3tH,KAAKy5G,SAAYx1G,EAMxB4K,OAAO6hG,eAAgBid,EAAO3tH,KAAKy5G,QAAS,CAC3Cx1G,MAAOA,EACP0sG,cAAc,MAMX1sG,GAERuC,IAAK,SAAUmnH,EAAOx7G,EAAMlO,GAC3B,IAAIG,EACHyiE,EAAQ7mE,KAAK6mE,MAAO8mD,GAIrB,GAAqB,kBAATx7G,EACX00D,EAAO4mD,EAAWt7G,IAAWlO,OAM7B,IAAMG,KAAQ+N,EACb00D,EAAO4mD,EAAWrpH,IAAW+N,EAAM/N,GAGrC,OAAOyiE,GAERv/D,IAAK,SAAUqmH,EAAOvmH,GACrB,YAAesF,IAARtF,EACNpH,KAAK6mE,MAAO8mD,GAGZA,EAAO3tH,KAAKy5G,UAAakU,EAAO3tH,KAAKy5G,SAAWgU,EAAWrmH,KAE7D2lH,OAAQ,SAAUY,EAAOvmH,EAAKnD,GAa7B,YAAayI,IAARtF,GACCA,GAAsB,kBAARA,QAAgCsF,IAAVzI,EAElCjE,KAAKsH,IAAKqmH,EAAOvmH,IASzBpH,KAAKwG,IAAKmnH,EAAOvmH,EAAKnD,QAILyI,IAAVzI,EAAsBA,EAAQmD,IAEtChC,OAAQ,SAAUuoH,EAAOvmH,GACxB,IAAIxD,EACHijE,EAAQ8mD,EAAO3tH,KAAKy5G,SAErB,QAAe/sG,IAAVm6D,EAAL,CAIA,QAAan6D,IAARtF,EAAoB,CAkBxBxD,GAXCwD,EAJIqN,MAAMuX,QAAS5kB,GAIbA,EAAIoM,IAAKi6G,IAEfrmH,EAAMqmH,EAAWrmH,MAIJy/D,EACZ,CAAEz/D,GACAA,EAAIoV,MAAOosG,IAAmB,IAG1B9kH,OAER,KAAQF,YACAijE,EAAOz/D,EAAKxD,UAKR8I,IAARtF,GAAqBkxG,EAAOuB,cAAehzC,MAM1C8mD,EAAMzoG,SACVyoG,EAAO3tH,KAAKy5G,cAAY/sG,SAEjBihH,EAAO3tH,KAAKy5G,YAItBqU,QAAS,SAAUH,GAClB,IAAI9mD,EAAQ8mD,EAAO3tH,KAAKy5G,SACxB,YAAiB/sG,IAAVm6D,IAAwByxC,EAAOuB,cAAehzC,KAGvD,IAAIknD,EAAW,IAAIH,EAEfI,EAAW,IAAIJ,EAcfK,GAAS,gCACZC,GAAa,SA2Bd,SAASC,GAAUpV,EAAM3xG,EAAK+K,GAC7B,IAAImnG,EAIJ,QAAc5sG,IAATyF,GAAwC,IAAlB4mG,EAAK7zF,SAI/B,GAHAo0F,EAAO,QAAUlyG,EAAI2Y,QAASmuG,GAAY,OAAQp7G,cAG7B,kBAFrBX,EAAO4mG,EAAK7oF,aAAcopF,IAEM,CAC/B,IACCnnG,EApCJ,SAAkBA,GACjB,MAAc,SAATA,GAIS,UAATA,IAIS,SAATA,EACG,KAIHA,KAAUA,EAAO,IACbA,EAGJ87G,GAAOxqG,KAAMtR,GACVsmD,KAAK3iC,MAAO3jB,GAGbA,GAcGi8G,CAASj8G,GACf,MAAQ23B,IAGVkkF,EAASxnH,IAAKuyG,EAAM3xG,EAAK+K,QAEzBA,OAAOzF,EAGT,OAAOyF,EAGRmmG,EAAOl5F,OAAQ,CACd0uG,QAAS,SAAU/U,GAClB,OAAOiV,EAASF,QAAS/U,IAAUgV,EAASD,QAAS/U,IAGtD5mG,KAAM,SAAU4mG,EAAMO,EAAMnnG,GAC3B,OAAO67G,EAASjB,OAAQhU,EAAMO,EAAMnnG,IAGrCk8G,WAAY,SAAUtV,EAAMO,GAC3B0U,EAAS5oH,OAAQ2zG,EAAMO,IAKxBgV,MAAO,SAAUvV,EAAMO,EAAMnnG,GAC5B,OAAO47G,EAAShB,OAAQhU,EAAMO,EAAMnnG,IAGrCo8G,YAAa,SAAUxV,EAAMO,GAC5ByU,EAAS3oH,OAAQ2zG,EAAMO,MAIzBhB,EAAOzuC,GAAGzqD,OAAQ,CACjBjN,KAAM,SAAU/K,EAAKnD,GACpB,IAAIL,EAAG01G,EAAMnnG,EACZ4mG,EAAO/4G,KAAM,GACbozB,EAAQ2lF,GAAQA,EAAKjtG,WAGtB,QAAaY,IAARtF,EAAoB,CACxB,GAAKpH,KAAK8D,SACTqO,EAAO67G,EAAS1mH,IAAKyxG,GAEE,IAAlBA,EAAK7zF,WAAmB6oG,EAASzmH,IAAKyxG,EAAM,iBAAmB,CAEnE,IADAn1G,EAAIwvB,EAAMtvB,OACFF,KAIFwvB,EAAOxvB,IAEsB,KADjC01G,EAAOlmF,EAAOxvB,GAAI01G,MACRl2G,QAAS,WAClBk2G,EAAOmU,EAAWnU,EAAK3tG,MAAO,IAC9BwiH,GAAUpV,EAAMO,EAAMnnG,EAAMmnG,KAI/ByU,EAASvnH,IAAKuyG,EAAM,gBAAgB,GAItC,OAAO5mG,EAIR,MAAoB,kBAAR/K,EACJpH,KAAK84G,MAAM,WACjBkV,EAASxnH,IAAKxG,KAAMoH,MAIf2lH,EAAQ/sH,MAAM,SAAUiE,GAC9B,IAAIkO,EAOJ,GAAK4mG,QAAkBrsG,IAAVzI,EAKZ,YAAcyI,KADdyF,EAAO67G,EAAS1mH,IAAKyxG,EAAM3xG,UAQbsF,KADdyF,EAAOg8G,GAAUpV,EAAM3xG,IALf+K,OAWR,EAIDnS,KAAK84G,MAAM,WAGVkV,EAASxnH,IAAKxG,KAAMoH,EAAKnD,QAExB,KAAMA,EAAOE,UAAUL,OAAS,EAAG,MAAM,IAG7CuqH,WAAY,SAAUjnH,GACrB,OAAOpH,KAAK84G,MAAM,WACjBkV,EAAS5oH,OAAQpF,KAAMoH,SAM1BkxG,EAAOl5F,OAAQ,CACd0qG,MAAO,SAAU/Q,EAAMpzG,EAAMwM,GAC5B,IAAI23G,EAEJ,GAAK/Q,EAYJ,OAXApzG,GAASA,GAAQ,MAAS,QAC1BmkH,EAAQiE,EAASzmH,IAAKyxG,EAAMpzG,GAGvBwM,KACE23G,GAASr1G,MAAMuX,QAAS7Z,GAC7B23G,EAAQiE,EAAShB,OAAQhU,EAAMpzG,EAAM2yG,EAAOyB,UAAW5nG,IAEvD23G,EAAMzlH,KAAM8N,IAGP23G,GAAS,IAIlB0E,QAAS,SAAUzV,EAAMpzG,GAGxB,IAAImkH,EAAQxR,EAAOwR,MAAO/Q,EAF1BpzG,EAAOA,GAAQ,MAGd8oH,EAAc3E,EAAMhmH,OACpB+lE,EAAKigD,EAAMroG,QACXitG,EAAQpW,EAAOqW,YAAa5V,EAAMpzG,GAMvB,eAAPkkE,IACJA,EAAKigD,EAAMroG,QACXgtG,KAGI5kD,IAIU,OAATlkE,GACJmkH,EAAMprG,QAAS,qBAITgwG,EAAME,KACb/kD,EAAG9lE,KAAMg1G,GApBF,WACNT,EAAOkW,QAASzV,EAAMpzG,KAmBF+oH,KAGhBD,GAAeC,GACpBA,EAAMpkD,MAAM7mE,QAKdkrH,YAAa,SAAU5V,EAAMpzG,GAC5B,IAAIyB,EAAMzB,EAAO,aACjB,OAAOooH,EAASzmH,IAAKyxG,EAAM3xG,IAAS2mH,EAAShB,OAAQhU,EAAM3xG,EAAK,CAC/DkjE,MAAOguC,EAAOgR,UAAW,eAAgB7kH,KAAK,WAC7CspH,EAAS3oH,OAAQ2zG,EAAM,CAAEpzG,EAAO,QAASyB,YAM7CkxG,EAAOzuC,GAAGzqD,OAAQ,CACjB0qG,MAAO,SAAUnkH,EAAMwM,GACtB,IAAI08G,EAAS,EAQb,MANqB,kBAATlpH,IACXwM,EAAOxM,EACPA,EAAO,KACPkpH,KAGI1qH,UAAUL,OAAS+qH,EAChBvW,EAAOwR,MAAO9pH,KAAM,GAAK2F,QAGjB+G,IAATyF,EACNnS,KACAA,KAAK84G,MAAM,WACV,IAAIgR,EAAQxR,EAAOwR,MAAO9pH,KAAM2F,EAAMwM,GAGtCmmG,EAAOqW,YAAa3uH,KAAM2F,GAEZ,OAATA,GAAgC,eAAfmkH,EAAO,IAC5BxR,EAAOkW,QAASxuH,KAAM2F,OAI1B6oH,QAAS,SAAU7oH,GAClB,OAAO3F,KAAK84G,MAAM,WACjBR,EAAOkW,QAASxuH,KAAM2F,OAGxBmpH,WAAY,SAAUnpH,GACrB,OAAO3F,KAAK8pH,MAAOnkH,GAAQ,KAAM,KAKlCwjH,QAAS,SAAUxjH,EAAMuB,GACxB,IAAI0uG,EACHmZ,EAAQ,EACRC,EAAQ1W,EAAO+R,WACfh8G,EAAWrO,KACX4D,EAAI5D,KAAK8D,OACTklH,EAAU,aACC+F,GACTC,EAAMvD,YAAap9G,EAAU,CAAEA,KAUlC,IANqB,kBAAT1I,IACXuB,EAAMvB,EACNA,OAAO+G,GAER/G,EAAOA,GAAQ,KAEP/B,MACPgyG,EAAMmY,EAASzmH,IAAK+G,EAAUzK,GAAK+B,EAAO,gBAC9BiwG,EAAItrC,QACfykD,IACAnZ,EAAItrC,MAAM7lE,IAAKukH,IAIjB,OADAA,IACOgG,EAAM7F,QAASjiH,MAGxB,IAAI+nH,GAAS,sCAAwCloH,OAEjDmoH,GAAU,IAAInyG,OAAQ,iBAAmBkyG,GAAO,cAAe,KAG/DE,GAAY,CAAE,MAAO,QAAS,SAAU,QAExCtqG,GAAkBrnB,EAASqnB,gBAI1BuqG,GAAa,SAAUrW,GACzB,OAAOT,EAAOryG,SAAU8yG,EAAKlyF,cAAekyF,IAE7CsW,GAAW,CAAEA,UAAU,GAOnBxqG,GAAgByqG,cACpBF,GAAa,SAAUrW,GACtB,OAAOT,EAAOryG,SAAU8yG,EAAKlyF,cAAekyF,IAC3CA,EAAKuW,YAAaD,MAAetW,EAAKlyF,gBAG1C,IAAI0oG,GAAqB,SAAUxW,EAAMv0F,GAOvC,MAA8B,UAH9Bu0F,EAAOv0F,GAAMu0F,GAGDhsG,MAAMshB,SACM,KAAvB0qF,EAAKhsG,MAAMshB,SAMX+gG,GAAYrW,IAEsB,SAAlCT,EAAOkX,IAAKzW,EAAM,YAKrB,SAAS0W,GAAW1W,EAAM30G,EAAMsrH,EAAYC,GAC3C,IAAIC,EAAUxwH,EACbywH,EAAgB,GAChBtmD,EAAeomD,EACd,WACC,OAAOA,EAAM9Q,OAEd,WACC,OAAOvG,EAAOkX,IAAKzW,EAAM30G,EAAM,KAEjC0rH,EAAUvmD,IACVv+D,EAAO0kH,GAAcA,EAAY,KAASpX,EAAOyX,UAAW3rH,GAAS,GAAK,MAG1E4rH,EAAgBjX,EAAK7zF,WAClBozF,EAAOyX,UAAW3rH,IAAmB,OAAT4G,IAAkB8kH,IAChDZ,GAAQjkH,KAAMqtG,EAAOkX,IAAKzW,EAAM30G,IAElC,GAAK4rH,GAAiBA,EAAe,KAAQhlH,EAAO,CAYnD,IARA8kH,GAAoB,EAGpB9kH,EAAOA,GAAQglH,EAAe,GAG9BA,GAAiBF,GAAW,EAEpBD,KAIPvX,EAAOvrG,MAAOgsG,EAAM30G,EAAM4rH,EAAgBhlH,IACnC,EAAI5L,IAAY,GAAMA,EAAQmqE,IAAiBumD,GAAW,MAAW,IAC3ED,EAAgB,GAEjBG,GAAgC5wH,EAKjCk5G,EAAOvrG,MAAOgsG,EAAM30G,GADpB4rH,GAAgC,GACUhlH,GAG1C0kH,EAAaA,GAAc,GAgB5B,OAbKA,IACJM,GAAiBA,IAAkBF,GAAW,EAG9CF,EAAWF,EAAY,GACtBM,GAAkBN,EAAY,GAAM,GAAMA,EAAY,IACrDA,EAAY,GACTC,IACJA,EAAM3kH,KAAOA,EACb2kH,EAAM3lG,MAAQgmG,EACdL,EAAMxkG,IAAMykG,IAGPA,EAIR,IAAIK,GAAoB,GAExB,SAASC,GAAmBnX,GAC3B,IAAIx8B,EACH31D,EAAMmyF,EAAKlyF,cACXwI,EAAW0pF,EAAK1pF,SAChBhB,EAAU4hG,GAAmB5gG,GAE9B,OAAKhB,IAILkuD,EAAO31D,EAAI9B,KAAK7X,YAAa2Z,EAAI9Z,cAAeuiB,IAChDhB,EAAUiqF,EAAOkX,IAAKjzC,EAAM,WAE5BA,EAAKpvE,WAAWC,YAAamvE,GAEZ,SAAZluD,IACJA,EAAU,SAEX4hG,GAAmB5gG,GAAahB,EAEzBA,GAGR,SAAS8hG,GAAU9hH,EAAU+hH,GAO5B,IANA,IAAI/hG,EAAS0qF,EACZsX,EAAS,GACTrrH,EAAQ,EACRlB,EAASuK,EAASvK,OAGXkB,EAAQlB,EAAQkB,KACvB+zG,EAAO1qG,EAAUrJ,IACN+H,QAIXshB,EAAU0qF,EAAKhsG,MAAMshB,QAChB+hG,GAKa,SAAZ/hG,IACJgiG,EAAQrrH,GAAU+oH,EAASzmH,IAAKyxG,EAAM,YAAe,KAC/CsX,EAAQrrH,KACb+zG,EAAKhsG,MAAMshB,QAAU,KAGK,KAAvB0qF,EAAKhsG,MAAMshB,SAAkBkhG,GAAoBxW,KACrDsX,EAAQrrH,GAAUkrH,GAAmBnX,KAGrB,SAAZ1qF,IACJgiG,EAAQrrH,GAAU,OAGlB+oH,EAASvnH,IAAKuyG,EAAM,UAAW1qF,KAMlC,IAAMrpB,EAAQ,EAAGA,EAAQlB,EAAQkB,IACR,MAAnBqrH,EAAQrrH,KACZqJ,EAAUrJ,GAAQ+H,MAAMshB,QAAUgiG,EAAQrrH,IAI5C,OAAOqJ,EAGRiqG,EAAOzuC,GAAGzqD,OAAQ,CACjBgxG,KAAM,WACL,OAAOD,GAAUnwH,MAAM,IAExBswH,KAAM,WACL,OAAOH,GAAUnwH,OAElBqH,OAAQ,SAAUmjH,GACjB,MAAsB,mBAAVA,EACJA,EAAQxqH,KAAKowH,OAASpwH,KAAKswH,OAG5BtwH,KAAK84G,MAAM,WACZyW,GAAoBvvH,MACxBs4G,EAAQt4G,MAAOowH,OAEf9X,EAAQt4G,MAAOswH,aAKnB,IAAIC,GAAmB,wBAEnBC,GAAa,iCAEbC,GAAgB,sCAIpB,WACC,IACC5jH,EADcrP,EAASkzH,yBACRzjH,YAAazP,EAASsP,cAAe,QACpDizG,EAAQviH,EAASsP,cAAe,SAMjCizG,EAAMp7F,aAAc,OAAQ,SAC5Bo7F,EAAMp7F,aAAc,UAAW,WAC/Bo7F,EAAMp7F,aAAc,OAAQ,KAE5B9X,EAAII,YAAa8yG,GAIjBnI,EAAQ+Y,WAAa9jH,EAAIomB,WAAW,GAAOA,WAAW,GAAOsvF,UAAU7V,QAIvE7/F,EAAImzG,UAAY,yBAChBpI,EAAQgZ,iBAAmB/jH,EAAIomB,WAAW,GAAOsvF,UAAUqE,aAK3D/5G,EAAImzG,UAAY,oBAChBpI,EAAQlkE,SAAW7mC,EAAI01G,UA5BxB,GAiCA,IAAIsO,GAAU,CAKbC,MAAO,CAAE,EAAG,UAAW,YACvBC,IAAK,CAAE,EAAG,oBAAqB,uBAC/Bh+E,GAAI,CAAE,EAAG,iBAAkB,oBAC3Bi+E,GAAI,CAAE,EAAG,qBAAsB,yBAE/BC,SAAU,CAAE,EAAG,GAAI,KAYpB,SAASC,GAAQzrH,EAASq6G,GAIzB,IAAIlO,EAYJ,OATCA,EAD4C,qBAAjCnsG,EAAQ+pB,qBACb/pB,EAAQ+pB,qBAAsBswF,GAAO,KAEI,qBAA7Br6G,EAAQ44G,iBACpB54G,EAAQ44G,iBAAkByB,GAAO,KAGjC,QAGMpzG,IAARozG,GAAqBA,GAAOzwF,EAAU5pB,EAASq6G,GAC5CxH,EAAOM,MAAO,CAAEnzG,GAAWmsG,GAG5BA,EAKR,SAASuf,GAAexY,EAAOyY,GAI9B,IAHA,IAAIxtH,EAAI,EACPsO,EAAIymG,EAAM70G,OAEHF,EAAIsO,EAAGtO,IACdmqH,EAASvnH,IACRmyG,EAAO/0G,GACP,cACCwtH,GAAerD,EAASzmH,IAAK8pH,EAAaxtH,GAAK,eA1CnDitH,GAAQQ,MAAQR,GAAQS,MAAQT,GAAQU,SAAWV,GAAQW,QAAUX,GAAQC,MAC7ED,GAAQr6G,GAAKq6G,GAAQG,GAGfpZ,EAAQlkE,SACbm9E,GAAQY,SAAWZ,GAAQn9E,OAAS,CAAE,EAAG,+BAAgC,cA2C1E,IAAI8oE,GAAQ,YAEZ,SAASkV,GAAe/Y,EAAOlzG,EAASksH,EAAS/pE,EAAWgqE,GAO3D,IANA,IAAI7Y,EAAMnD,EAAKkK,EAAK+R,EAAMC,EAAU94G,EACnC+4G,EAAWtsH,EAAQirH,yBACnBsB,EAAQ,GACRpuH,EAAI,EACJsO,EAAIymG,EAAM70G,OAEHF,EAAIsO,EAAGtO,IAGd,IAFAm1G,EAAOJ,EAAO/0G,KAEQ,IAATm1G,EAGZ,GAAwB,WAAnBV,EAAQU,GAIZT,EAAOM,MAAOoZ,EAAOjZ,EAAK7zF,SAAW,CAAE6zF,GAASA,QAG1C,GAAMyD,GAAM/4F,KAAMs1F,GAIlB,CAUN,IATAnD,EAAMA,GAAOmc,EAAS9kH,YAAaxH,EAAQqH,cAAe,QAG1DgzG,GAAQ0Q,GAASvlH,KAAM8tG,IAAU,CAAE,GAAI,KAAQ,GAAIjmG,cACnD++G,EAAOhB,GAAS/Q,IAAS+Q,GAAQI,SACjCrb,EAAIoK,UAAY6R,EAAM,GAAMvZ,EAAO2Z,cAAelZ,GAAS8Y,EAAM,GAGjE74G,EAAI64G,EAAM,GACF74G,KACP48F,EAAMA,EAAI2M,UAKXjK,EAAOM,MAAOoZ,EAAOpc,EAAIxxF,aAGzBwxF,EAAMmc,EAASv/F,YAGX+D,YAAc,QAzBlBy7F,EAAM3tH,KAAMoB,EAAQysH,eAAgBnZ,IAkCvC,IAHAgZ,EAASx7F,YAAc,GAEvB3yB,EAAI,EACMm1G,EAAOiZ,EAAOpuH,MAGvB,GAAKgkD,GAAa0wD,EAAO0B,QAASjB,EAAMnxD,IAAe,EACjDgqE,GACJA,EAAQvtH,KAAM00G,QAgBhB,GAXA+Y,EAAW1C,GAAYrW,GAGvBnD,EAAMsb,GAAQa,EAAS9kH,YAAa8rG,GAAQ,UAGvC+Y,GACJX,GAAevb,GAIX+b,EAEJ,IADA34G,EAAI,EACM+/F,EAAOnD,EAAK58F,MAChBy3G,GAAYhtG,KAAMs1F,EAAKpzG,MAAQ,KACnCgsH,EAAQttH,KAAM00G,GAMlB,OAAOgZ,EAIR,IAAII,GAAiB,sBAErB,SAASC,KACR,OAAO,EAGR,SAASC,KACR,OAAO,EASR,SAASC,GAAYvZ,EAAMpzG,GAC1B,OAASozG,IAMV,WACC,IACC,OAAOv7G,EAASylH,cACf,MAAQ5+F,KATQkuG,MAAqC,UAAT5sH,GAY/C,SAASzB,GAAI60G,EAAMyZ,EAAO1iG,EAAU3d,EAAM03D,EAAI4oD,GAC7C,IAAIC,EAAQ/sH,EAGZ,GAAsB,kBAAV6sH,EAAqB,CAShC,IAAM7sH,IANmB,kBAAbmqB,IAGX3d,EAAOA,GAAQ2d,EACfA,OAAWpjB,GAEE8lH,EACbtuH,GAAI60G,EAAMpzG,EAAMmqB,EAAU3d,EAAMqgH,EAAO7sH,GAAQ8sH,GAEhD,OAAO1Z,EAsBR,GAnBa,MAAR5mG,GAAsB,MAAN03D,GAGpBA,EAAK/5C,EACL3d,EAAO2d,OAAWpjB,GACD,MAANm9D,IACc,kBAAb/5C,GAGX+5C,EAAK13D,EACLA,OAAOzF,IAIPm9D,EAAK13D,EACLA,EAAO2d,EACPA,OAAWpjB,KAGD,IAAPm9D,EACJA,EAAKwoD,QACC,IAAMxoD,EACZ,OAAOkvC,EAeR,OAZa,IAAR0Z,IACJC,EAAS7oD,GACTA,EAAK,SAAUznD,GAId,OADAk2F,IAASh0G,IAAK8d,GACPswG,EAAOhuH,MAAO1E,KAAMmE,aAIzBi2G,KAAOsY,EAAOtY,OAAUsY,EAAOtY,KAAO9B,EAAO8B,SAE1CrB,EAAKD,MAAM,WACjBR,EAAOl2F,MAAM3d,IAAKzE,KAAMwyH,EAAO3oD,EAAI13D,EAAM2d,MA+a3C,SAAS6iG,GAAgBnuG,EAAI7e,EAAM2sH,GAG5BA,GAQNvE,EAASvnH,IAAKge,EAAI7e,GAAM,GACxB2yG,EAAOl2F,MAAM3d,IAAK+f,EAAI7e,EAAM,CAC3B2F,WAAW,EACXrI,QAAS,SAAUmf,GAClB,IAAIwwG,EAAUn7G,EACbo7G,EAAQ9E,EAASzmH,IAAKtH,KAAM2F,GAE7B,GAAyB,EAAlByc,EAAM0wG,WAAmB9yH,KAAM2F,IAKrC,GAAMktH,EAAM/uH,QAuCEw0G,EAAOl2F,MAAMkpG,QAAS3lH,IAAU,IAAKotH,cAClD3wG,EAAMywC,uBArBN,GAdAggE,EAAQlnH,EAAM5H,KAAMI,WACpB4pH,EAASvnH,IAAKxG,KAAM2F,EAAMktH,GAK1BD,EAAWN,EAAYtyH,KAAM2F,GAC7B3F,KAAM2F,KAEDktH,KADLp7G,EAASs2G,EAASzmH,IAAKtH,KAAM2F,KACJitH,EACxB7E,EAASvnH,IAAKxG,KAAM2F,GAAM,GAE1B8R,EAAS,GAELo7G,IAAUp7G,EAWd,OARA2K,EAAM8hF,2BACN9hF,EAAMuwC,iBAOCl7C,GAAUA,EAAOxT,WAef4uH,EAAM/uH,SAGjBiqH,EAASvnH,IAAKxG,KAAM2F,EAAM,CACzB1B,MAAOq0G,EAAOl2F,MAAM4wG,QAInB1a,EAAOl5F,OAAQyzG,EAAO,GAAKva,EAAO2a,MAAMnkH,WACxC+jH,EAAMlnH,MAAO,GACb3L,QAKFoiB,EAAM8hF,qCA/E0Bx3F,IAA7BqhH,EAASzmH,IAAKkd,EAAI7e,IACtB2yG,EAAOl2F,MAAM3d,IAAK+f,EAAI7e,EAAMysH,IA5a/B9Z,EAAOl2F,MAAQ,CAEd7a,OAAQ,GAER9C,IAAK,SAAUs0G,EAAMyZ,EAAOvvH,EAASkP,EAAM2d,GAE1C,IAAIojG,EAAaC,EAAavd,EAC7Bwd,EAAQzpH,EAAG0pH,EACX/H,EAASgI,EAAU3tH,EAAM4tH,EAAYC,EACrCC,EAAW1F,EAASzmH,IAAKyxG,GAG1B,GAAM2U,EAAY3U,GAuClB,IAlCK91G,EAAQA,UAEZA,GADAiwH,EAAcjwH,GACQA,QACtB6sB,EAAWojG,EAAYpjG,UAKnBA,GACJwoF,EAAOz5F,KAAKohG,gBAAiBp7F,GAAiBiL,GAIzC7sB,EAAQm3G,OACbn3G,EAAQm3G,KAAO9B,EAAO8B,SAIfgZ,EAASK,EAASL,UACzBA,EAASK,EAASL,OAASvkH,OAAO6kH,OAAQ,QAEnCP,EAAcM,EAASE,UAC9BR,EAAcM,EAASE,OAAS,SAAU7pF,GAIzC,OAAwCwuE,EAAOl2F,MAAMwxG,YAAc9pF,EAAEnkC,KACpE2yG,EAAOl2F,MAAMyxG,SAASnvH,MAAOq0G,EAAM50G,gBAAcuI,IAMpD/C,GADA6oH,GAAUA,GAAS,IAAKh2G,MAAOosG,IAAmB,CAAE,KAC1C9kH,OACF6F,KAEPhE,EAAO6tH,GADP5d,EAAMuc,GAAelnH,KAAMunH,EAAO7oH,KAAS,IACpB,GACvB4pH,GAAe3d,EAAK,IAAO,IAAK5pG,MAAO,KAAMooC,OAGvCzuC,IAKN2lH,EAAUhT,EAAOl2F,MAAMkpG,QAAS3lH,IAAU,GAG1CA,GAASmqB,EAAWw7F,EAAQyH,aAAezH,EAAQwI,WAAcnuH,EAGjE2lH,EAAUhT,EAAOl2F,MAAMkpG,QAAS3lH,IAAU,GAG1C0tH,EAAY/a,EAAOl5F,OAAQ,CAC1BzZ,KAAMA,EACN6tH,SAAUA,EACVrhH,KAAMA,EACNlP,QAASA,EACTm3G,KAAMn3G,EAAQm3G,KACdtqF,SAAUA,EACVu3F,aAAcv3F,GAAYwoF,EAAOwI,KAAKtkG,MAAM6qG,aAAa5jG,KAAMqM,GAC/DxkB,UAAWioH,EAAW7/G,KAAM,MAC1Bw/G,IAGKI,EAAWF,EAAQztH,OAC1B2tH,EAAWF,EAAQztH,GAAS,IACnBouH,cAAgB,EAGnBzI,EAAQ0I,QACiD,IAA9D1I,EAAQ0I,MAAMjwH,KAAMg1G,EAAM5mG,EAAMohH,EAAYJ,IAEvCpa,EAAK/2F,kBACT+2F,EAAK/2F,iBAAkBrc,EAAMwtH,IAK3B7H,EAAQ7mH,MACZ6mH,EAAQ7mH,IAAIV,KAAMg1G,EAAMsa,GAElBA,EAAUpwH,QAAQm3G,OACvBiZ,EAAUpwH,QAAQm3G,KAAOn3G,EAAQm3G,OAK9BtqF,EACJwjG,EAASnuH,OAAQmuH,EAASS,gBAAiB,EAAGV,GAE9CC,EAASjvH,KAAMgvH,GAIhB/a,EAAOl2F,MAAM7a,OAAQ5B,IAAS,IAMhCP,OAAQ,SAAU2zG,EAAMyZ,EAAOvvH,EAAS6sB,EAAUmkG,GAEjD,IAAIj7G,EAAGk7G,EAAWte,EACjBwd,EAAQzpH,EAAG0pH,EACX/H,EAASgI,EAAU3tH,EAAM4tH,EAAYC,EACrCC,EAAW1F,EAASD,QAAS/U,IAAUgV,EAASzmH,IAAKyxG,GAEtD,GAAM0a,IAAeL,EAASK,EAASL,QAAvC,CAOA,IADAzpH,GADA6oH,GAAUA,GAAS,IAAKh2G,MAAOosG,IAAmB,CAAE,KAC1C9kH,OACF6F,KAMP,GAJAhE,EAAO6tH,GADP5d,EAAMuc,GAAelnH,KAAMunH,EAAO7oH,KAAS,IACpB,GACvB4pH,GAAe3d,EAAK,IAAO,IAAK5pG,MAAO,KAAMooC,OAGvCzuC,EAAN,CAeA,IARA2lH,EAAUhT,EAAOl2F,MAAMkpG,QAAS3lH,IAAU,GAE1C2tH,EAAWF,EADXztH,GAASmqB,EAAWw7F,EAAQyH,aAAezH,EAAQwI,WAAcnuH,IACpC,GAC7BiwG,EAAMA,EAAK,IACV,IAAI74F,OAAQ,UAAYw2G,EAAW7/G,KAAM,iBAAoB,WAG9DwgH,EAAYl7G,EAAIs6G,EAASxvH,OACjBkV,KACPq6G,EAAYC,EAAUt6G,IAEfi7G,GAAeT,IAAaH,EAAUG,UACzCvwH,GAAWA,EAAQm3G,OAASiZ,EAAUjZ,MACtCxE,IAAOA,EAAInyF,KAAM4vG,EAAU/nH,YAC3BwkB,GAAYA,IAAaujG,EAAUvjG,WACxB,OAAbA,IAAqBujG,EAAUvjG,YAChCwjG,EAASnuH,OAAQ6T,EAAG,GAEfq6G,EAAUvjG,UACdwjG,EAASS,gBAELzI,EAAQlmH,QACZkmH,EAAQlmH,OAAOrB,KAAMg1G,EAAMsa,IAOzBa,IAAcZ,EAASxvH,SACrBwnH,EAAQ6I,WACkD,IAA/D7I,EAAQ6I,SAASpwH,KAAMg1G,EAAMwa,EAAYE,EAASE,SAElDrb,EAAO8b,YAAarb,EAAMpzG,EAAM8tH,EAASE,eAGnCP,EAAQztH,SA1Cf,IAAMA,KAAQytH,EACb9a,EAAOl2F,MAAMhd,OAAQ2zG,EAAMpzG,EAAO6sH,EAAO7oH,GAAK1G,EAAS6sB,GAAU,GA8C/DwoF,EAAOuB,cAAeuZ,IAC1BrF,EAAS3oH,OAAQ2zG,EAAM,mBAIzB8a,SAAU,SAAUQ,GAEnB,IAAIzwH,EAAGoV,EAAG44F,EAAK+Q,EAAS0Q,EAAWiB,EAClCp3G,EAAO,IAAIzI,MAAOtQ,UAAUL,QAG5Bse,EAAQk2F,EAAOl2F,MAAMmyG,IAAKF,GAE1Bf,GACCvF,EAASzmH,IAAKtH,KAAM,WAAc6O,OAAO6kH,OAAQ,OAC/CtxG,EAAMzc,OAAU,GACnB2lH,EAAUhT,EAAOl2F,MAAMkpG,QAASlpG,EAAMzc,OAAU,GAKjD,IAFAuX,EAAM,GAAMkF,EAENxe,EAAI,EAAGA,EAAIO,UAAUL,OAAQF,IAClCsZ,EAAMtZ,GAAMO,UAAWP,GAMxB,GAHAwe,EAAMoyG,eAAiBx0H,MAGlBsrH,EAAQmJ,cAA2D,IAA5CnJ,EAAQmJ,YAAY1wH,KAAM/D,KAAMoiB,GAA5D,CASA,IAJAkyG,EAAehc,EAAOl2F,MAAMkxG,SAASvvH,KAAM/D,KAAMoiB,EAAOkxG,GAGxD1vH,EAAI,GACM++G,EAAU2R,EAAc1wH,QAAYwe,EAAMsyG,wBAInD,IAHAtyG,EAAMoyC,cAAgBmuD,EAAQ5J,KAE9B//F,EAAI,GACMq6G,EAAY1Q,EAAQ2Q,SAAUt6G,QACtCoJ,EAAMuyG,iCAIDvyG,EAAMwyG,aAAsC,IAAxBvB,EAAU/nH,YACnC8W,EAAMwyG,WAAWnxG,KAAM4vG,EAAU/nH,aAEjC8W,EAAMixG,UAAYA,EAClBjxG,EAAMjQ,KAAOkhH,EAAUlhH,UAKVzF,KAHbklG,IAAU0G,EAAOl2F,MAAMkpG,QAAS+H,EAAUG,WAAc,IAAKG,QAC5DN,EAAUpwH,SAAUyB,MAAOi+G,EAAQ5J,KAAM77F,MAGT,KAAzBkF,EAAM3K,OAASm6F,KACrBxvF,EAAMuwC,iBACNvwC,EAAMywC,oBAYX,OAJKy4D,EAAQuJ,cACZvJ,EAAQuJ,aAAa9wH,KAAM/D,KAAMoiB,GAG3BA,EAAM3K,SAGd67G,SAAU,SAAUlxG,EAAOkxG,GAC1B,IAAI1vH,EAAGyvH,EAAWrS,EAAK8T,EAAiBC,EACvCT,EAAe,GACfP,EAAgBT,EAASS,cACzBlV,EAAMz8F,EAAMzQ,OAGb,GAAKoiH,GAIJlV,EAAI35F,YAOc,UAAf9C,EAAMzc,MAAoByc,EAAM4tC,QAAU,GAE7C,KAAQ6uD,IAAQ7+G,KAAM6+G,EAAMA,EAAI1xG,YAAcnN,KAI7C,GAAsB,IAAjB6+G,EAAI35F,WAAoC,UAAf9C,EAAMzc,OAAqC,IAAjBk5G,EAAInB,UAAsB,CAGjF,IAFAoX,EAAkB,GAClBC,EAAmB,GACbnxH,EAAI,EAAGA,EAAImwH,EAAenwH,SAME8I,IAA5BqoH,EAFL/T,GAHAqS,EAAYC,EAAU1vH,IAGNksB,SAAW,OAG1BilG,EAAkB/T,GAAQqS,EAAUhM,aACnC/O,EAAQ0I,EAAKhhH,MAAOgF,MAAO65G,IAAS,EACpCvG,EAAOz5F,KAAMmiG,EAAKhhH,KAAM,KAAM,CAAE6+G,IAAQ/6G,QAErCixH,EAAkB/T,IACtB8T,EAAgBzwH,KAAMgvH,GAGnByB,EAAgBhxH,QACpBwwH,EAAajwH,KAAM,CAAE00G,KAAM8F,EAAKyU,SAAUwB,IAY9C,OALAjW,EAAM7+G,KACD+zH,EAAgBT,EAASxvH,QAC7BwwH,EAAajwH,KAAM,CAAE00G,KAAM8F,EAAKyU,SAAUA,EAAS3nH,MAAOooH,KAGpDO,GAGRU,QAAS,SAAU1b,EAAM2b,GACxBpmH,OAAO6hG,eAAgB4H,EAAO2a,MAAMnkH,UAAWwqG,EAAM,CACpD4b,YAAY,EACZvkB,cAAc,EAEdrpG,IAAKuwG,EAAYod,GAChB,WACC,GAAKj1H,KAAKm1H,cACT,OAAOF,EAAMj1H,KAAKm1H,gBAGpB,WACC,GAAKn1H,KAAKm1H,cACT,OAAOn1H,KAAKm1H,cAAe7b,IAI9B9yG,IAAK,SAAUvC,GACd4K,OAAO6hG,eAAgB1wG,KAAMs5G,EAAM,CAClC4b,YAAY,EACZvkB,cAAc,EACdykB,UAAU,EACVnxH,MAAOA,QAMXswH,IAAK,SAAUY,GACd,OAAOA,EAAe7c,EAAOmB,SAC5B0b,EACA,IAAI7c,EAAO2a,MAAOkC,IAGpB7J,QAAS,CACR+J,KAAM,CAGLC,UAAU,GAEXC,MAAO,CAGNvB,MAAO,SAAU7hH,GAIhB,IAAIqS,EAAKxkB,MAAQmS,EAWjB,OARKo+G,GAAe9sG,KAAMe,EAAG7e,OAC5B6e,EAAG+wG,OAASlmG,EAAU7K,EAAI,UAG1BmuG,GAAgBnuG,EAAI,QAAS4tG,KAIvB,GAERY,QAAS,SAAU7gH,GAIlB,IAAIqS,EAAKxkB,MAAQmS,EAUjB,OAPKo+G,GAAe9sG,KAAMe,EAAG7e,OAC5B6e,EAAG+wG,OAASlmG,EAAU7K,EAAI,UAE1BmuG,GAAgBnuG,EAAI,UAId,GAKRysG,SAAU,SAAU7uG,GACnB,IAAIzQ,EAASyQ,EAAMzQ,OACnB,OAAO4+G,GAAe9sG,KAAM9R,EAAOhM,OAClCgM,EAAO4jH,OAASlmG,EAAU1d,EAAQ,UAClCo8G,EAASzmH,IAAKqK,EAAQ,UACtB0d,EAAU1d,EAAQ,OAIrB6jH,aAAc,CACbX,aAAc,SAAUzyG,QAID1V,IAAjB0V,EAAM3K,QAAwB2K,EAAM+yG,gBACxC/yG,EAAM+yG,cAAcp0G,YAAcqB,EAAM3K,YAoG7C6gG,EAAO8b,YAAc,SAAUrb,EAAMpzG,EAAMguH,GAGrC5a,EAAK72F,qBACT62F,EAAK72F,oBAAqBvc,EAAMguH,KAIlCrb,EAAO2a,MAAQ,SAAUxmH,EAAK08D,GAG7B,KAAQnpE,gBAAgBs4G,EAAO2a,OAC9B,OAAO,IAAI3a,EAAO2a,MAAOxmH,EAAK08D,GAI1B18D,GAAOA,EAAI9G,MACf3F,KAAKm1H,cAAgB1oH,EACrBzM,KAAK2F,KAAO8G,EAAI9G,KAIhB3F,KAAKy1H,mBAAqBhpH,EAAIipH,uBACHhpH,IAAzBD,EAAIipH,mBAGgB,IAApBjpH,EAAIsU,YACLqxG,GACAC,GAKDryH,KAAK2R,OAAWlF,EAAIkF,QAAkC,IAAxBlF,EAAIkF,OAAOuT,SACxCzY,EAAIkF,OAAOxE,WACXV,EAAIkF,OAEL3R,KAAKw0D,cAAgB/nD,EAAI+nD,cACzBx0D,KAAK21H,cAAgBlpH,EAAIkpH,eAIzB31H,KAAK2F,KAAO8G,EAIR08D,GACJmvC,EAAOl5F,OAAQpf,KAAMmpE,GAItBnpE,KAAK41H,UAAYnpH,GAAOA,EAAImpH,WAAa3rG,KAAKgtD,MAG9Cj3E,KAAMs4G,EAAOmB,UAAY,IAKb3qG,UAAY,CACxBgS,YAAaw3F,EAAO2a,MACpBwC,mBAAoBpD,GACpBqC,qBAAsBrC,GACtBsC,8BAA+BtC,GAC/BwD,aAAa,EAEbljE,eAAgB,WACf,IAAI7oB,EAAI9pC,KAAKm1H,cAEbn1H,KAAKy1H,mBAAqBrD,GAErBtoF,IAAM9pC,KAAK61H,aACf/rF,EAAE6oB,kBAGJE,gBAAiB,WAChB,IAAI/oB,EAAI9pC,KAAKm1H,cAEbn1H,KAAK00H,qBAAuBtC,GAEvBtoF,IAAM9pC,KAAK61H,aACf/rF,EAAE+oB,mBAGJqxC,yBAA0B,WACzB,IAAIp6D,EAAI9pC,KAAKm1H,cAEbn1H,KAAK20H,8BAAgCvC,GAEhCtoF,IAAM9pC,KAAK61H,aACf/rF,EAAEo6D,2BAGHlkG,KAAK6yD,oBAKPylD,EAAOQ,KAAM,CACZxtD,QAAQ,EACRwqE,SAAS,EACTC,YAAY,EACZtzG,gBAAgB,EAChBuhF,SAAS,EACTgyB,QAAQ,EACRC,YAAY,EACZhyB,SAAS,EACTiyB,OAAO,EACPC,OAAO,EACPpqE,UAAU,EACVqqE,MAAM,EACN,MAAQ,EACRz2G,MAAM,EACN02G,UAAU,EACVjvH,KAAK,EACL28F,SAAS,EACT/zC,QAAQ,EACRsmE,SAAS,EACT3zG,SAAS,EACTC,SAAS,EACTgoB,SAAS,EACTC,SAAS,EACTuoB,WAAW,EACXtwC,aAAa,EACbyzG,SAAS,EACTC,SAAS,EACTC,eAAe,EACfC,WAAW,EACXpjE,SAAS,EACTqjE,OAAO,GACLre,EAAOl2F,MAAM4yG,SAEhB1c,EAAOQ,KAAM,CAAEvmD,MAAO,UAAWnc,KAAM,aAAc,SAAUzwC,EAAMotH,GACpEza,EAAOl2F,MAAMkpG,QAAS3lH,GAAS,CAG9BquH,MAAO,WAQN,OAHArB,GAAgB3yH,KAAM2F,EAAM2sH,KAGrB,GAERU,QAAS,WAMR,OAHAL,GAAgB3yH,KAAM2F,IAGf,GAKRsrH,SAAU,WACT,OAAO,GAGR8B,aAAcA,MAYhBza,EAAOQ,KAAM,CACZ8d,WAAY,YACZC,WAAY,WACZC,aAAc,cACdC,aAAc,eACZ,SAAUC,EAAMzC,GAClBjc,EAAOl2F,MAAMkpG,QAAS0L,GAAS,CAC9BjE,aAAcwB,EACdT,SAAUS,EAEVZ,OAAQ,SAAUvxG,GACjB,IAAIwvF,EACHjgG,EAAS3R,KACTi3H,EAAU70G,EAAMuzG,cAChBtC,EAAYjxG,EAAMixG,UASnB,OALM4D,IAAaA,IAAYtlH,GAAW2mG,EAAOryG,SAAU0L,EAAQslH,MAClE70G,EAAMzc,KAAO0tH,EAAUG,SACvB5hB,EAAMyhB,EAAUpwH,QAAQyB,MAAO1E,KAAMmE,WACrCie,EAAMzc,KAAO4uH,GAEP3iB,OAKV0G,EAAOzuC,GAAGzqD,OAAQ,CAEjBlb,GAAI,SAAUsuH,EAAO1iG,EAAU3d,EAAM03D,GACpC,OAAO3lE,GAAIlE,KAAMwyH,EAAO1iG,EAAU3d,EAAM03D,IAEzC4oD,IAAK,SAAUD,EAAO1iG,EAAU3d,EAAM03D,GACrC,OAAO3lE,GAAIlE,KAAMwyH,EAAO1iG,EAAU3d,EAAM03D,EAAI,IAE7CvlE,IAAK,SAAUkuH,EAAO1iG,EAAU+5C,GAC/B,IAAIwpD,EAAW1tH,EACf,GAAK6sH,GAASA,EAAM7/D,gBAAkB6/D,EAAMa,UAW3C,OARAA,EAAYb,EAAMa,UAClB/a,EAAQka,EAAMgC,gBAAiBlwH,IAC9B+uH,EAAU/nH,UACT+nH,EAAUG,SAAW,IAAMH,EAAU/nH,UACrC+nH,EAAUG,SACXH,EAAUvjG,SACVujG,EAAUpwH,SAEJjD,KAER,GAAsB,kBAAVwyH,EAAqB,CAGhC,IAAM7sH,KAAQ6sH,EACbxyH,KAAKsE,IAAKqB,EAAMmqB,EAAU0iG,EAAO7sH,IAElC,OAAO3F,KAWR,OATkB,IAAb8vB,GAA0C,oBAAbA,IAGjC+5C,EAAK/5C,EACLA,OAAWpjB,IAEA,IAAPm9D,IACJA,EAAKwoD,IAECryH,KAAK84G,MAAM,WACjBR,EAAOl2F,MAAMhd,OAAQpF,KAAMwyH,EAAO3oD,EAAI/5C,SAMzC,IAKConG,GAAe,wBAGfC,GAAW,oCACXC,GAAe,2CAGhB,SAASC,GAAoBte,EAAM4P,GAClC,OAAKt5F,EAAU0pF,EAAM,UACpB1pF,EAA+B,KAArBs5F,EAAQzjG,SAAkByjG,EAAUA,EAAQn2F,WAAY,OAE3D8lF,EAAQS,GAAOhmF,SAAU,SAAW,IAGrCgmF,EAIR,SAASue,GAAeve,GAEvB,OADAA,EAAKpzG,MAAyC,OAAhCozG,EAAK7oF,aAAc,SAAsB,IAAM6oF,EAAKpzG,KAC3DozG,EAER,SAASwe,GAAexe,GAOvB,MAN2C,WAApCA,EAAKpzG,MAAQ,IAAKgG,MAAO,EAAG,GAClCotG,EAAKpzG,KAAOozG,EAAKpzG,KAAKgG,MAAO,GAE7BotG,EAAKzmF,gBAAiB,QAGhBymF,EAGR,SAASye,GAAgB/qH,EAAKgrH,GAC7B,IAAI7zH,EAAGsO,EAAGvM,EAAgB+xH,EAAUC,EAAUvE,EAE9C,GAAuB,IAAlBqE,EAAKvyG,SAAV,CAKA,GAAK6oG,EAASD,QAASrhH,KAEtB2mH,EADWrF,EAASzmH,IAAKmF,GACP2mH,QAKjB,IAAMztH,KAFNooH,EAAS3oH,OAAQqyH,EAAM,iBAETrE,EACb,IAAMxvH,EAAI,EAAGsO,EAAIkhH,EAAQztH,GAAO7B,OAAQF,EAAIsO,EAAGtO,IAC9C00G,EAAOl2F,MAAM3d,IAAKgzH,EAAM9xH,EAAMytH,EAAQztH,GAAQ/B,IAO7CoqH,EAASF,QAASrhH,KACtBirH,EAAW1J,EAASjB,OAAQtgH,GAC5BkrH,EAAWrf,EAAOl5F,OAAQ,GAAIs4G,GAE9B1J,EAASxnH,IAAKixH,EAAME,KAKtB,SAASC,GAAUnrH,EAAKgrH,GACvB,IAAIpoG,EAAWooG,EAAKpoG,SAASvc,cAGX,UAAbuc,GAAwBkhG,GAAe9sG,KAAMhX,EAAI9G,MACrD8xH,EAAK/qB,QAAUjgG,EAAIigG,QAGK,UAAbr9E,GAAqC,aAAbA,IACnCooG,EAAK7Q,aAAen6G,EAAIm6G,cAI1B,SAASiR,GAAUC,EAAY56G,EAAM1X,EAAUosH,GAG9C10G,EAAOq6F,EAAMr6F,GAEb,IAAI60G,EAAU/Y,EAAO2Y,EAASoG,EAAY3nG,EAAMxJ,EAC/ChjB,EAAI,EACJsO,EAAI4lH,EAAWh0H,OACfk0H,EAAW9lH,EAAI,EACfjO,EAAQiZ,EAAM,GACd+6G,EAAkBpgB,EAAY5zG,GAG/B,GAAKg0H,GACD/lH,EAAI,GAAsB,kBAAVjO,IAChB2zG,EAAQ+Y,YAAcwG,GAAS1zG,KAAMxf,GACxC,OAAO6zH,EAAWhf,MAAM,SAAU9zG,GACjC,IAAIitD,EAAO6lE,EAAWl+F,GAAI50B,GACrBizH,IACJ/6G,EAAM,GAAMjZ,EAAMF,KAAM/D,KAAMgF,EAAOitD,EAAKimE,SAE3CL,GAAU5lE,EAAM/0C,EAAM1X,EAAUosH,MAIlC,GAAK1/G,IAEJ8mG,GADA+Y,EAAWL,GAAex0G,EAAM46G,EAAY,GAAIjxG,eAAe,EAAOixG,EAAYlG,IACjEp/F,WAEmB,IAA/Bu/F,EAAS3tG,WAAWtgB,SACxBiuH,EAAW/Y,GAIPA,GAAS4Y,GAAU,CAOvB,IALAmG,GADApG,EAAUrZ,EAAO9kG,IAAK09G,GAAQa,EAAU,UAAYuF,KAC/BxzH,OAKbF,EAAIsO,EAAGtO,IACdwsB,EAAO2hG,EAEFnuH,IAAMo0H,IACV5nG,EAAOkoF,EAAO94F,MAAO4Q,GAAM,GAAM,GAG5B2nG,GAIJzf,EAAOM,MAAO+Y,EAAST,GAAQ9gG,EAAM,YAIvC5qB,EAASzB,KAAM+zH,EAAYl0H,GAAKwsB,EAAMxsB,GAGvC,GAAKm0H,EAOJ,IANAnxG,EAAM+qG,EAASA,EAAQ7tH,OAAS,GAAI+iB,cAGpCyxF,EAAO9kG,IAAKm+G,EAAS4F,IAGf3zH,EAAI,EAAGA,EAAIm0H,EAAYn0H,IAC5BwsB,EAAOuhG,EAAS/tH,GACX6sH,GAAYhtG,KAAM2M,EAAKzqB,MAAQ,MAClCooH,EAAShB,OAAQ38F,EAAM,eACxBkoF,EAAOryG,SAAU2gB,EAAKwJ,KAEjBA,EAAK3jB,KAA8C,YAArC2jB,EAAKzqB,MAAQ,IAAKmN,cAG/BwlG,EAAO6f,WAAa/nG,EAAK6nF,UAC7BK,EAAO6f,SAAU/nG,EAAK3jB,IAAK,CAC1BurG,MAAO5nF,EAAK4nF,OAAS5nF,EAAKF,aAAc,UACtCtJ,GAGJsxF,EAAS9nF,EAAKmG,YAAYxW,QAASq3G,GAAc,IAAMhnG,EAAMxJ,IAQnE,OAAOkxG,EAGR,SAAS1yH,GAAQ2zG,EAAMjpF,EAAUsoG,GAKhC,IAJA,IAAIhoG,EACH4hG,EAAQliG,EAAWwoF,EAAOt0G,OAAQ8rB,EAAUipF,GAASA,EACrDn1G,EAAI,EAE4B,OAAvBwsB,EAAO4hG,EAAOpuH,IAAeA,IAChCw0H,GAA8B,IAAlBhoG,EAAKlL,UACtBozF,EAAO+f,UAAWnH,GAAQ9gG,IAGtBA,EAAKjjB,aACJirH,GAAYhJ,GAAYh/F,IAC5B+gG,GAAeD,GAAQ9gG,EAAM,WAE9BA,EAAKjjB,WAAWC,YAAagjB,IAI/B,OAAO2oF,EAGRT,EAAOl5F,OAAQ,CACd6yG,cAAe,SAAUiG,GACxB,OAAOA,GAGR14G,MAAO,SAAUu5F,EAAMuf,EAAeC,GACrC,IAAI30H,EAAGsO,EAAGsmH,EAAaC,EACtBj5G,EAAQu5F,EAAK9lF,WAAW,GACxBylG,EAAStJ,GAAYrW,GAGtB,IAAMnB,EAAQgZ,iBAAsC,IAAlB7X,EAAK7zF,UAAoC,KAAlB6zF,EAAK7zF,YAC3DozF,EAAOwO,SAAU/N,GAMnB,IAHA0f,EAAevH,GAAQ1xG,GAGjB5b,EAAI,EAAGsO,GAFbsmH,EAActH,GAAQnY,IAEOj1G,OAAQF,EAAIsO,EAAGtO,IAC3Cg0H,GAAUY,EAAa50H,GAAK60H,EAAc70H,IAK5C,GAAK00H,EACJ,GAAKC,EAIJ,IAHAC,EAAcA,GAAetH,GAAQnY,GACrC0f,EAAeA,GAAgBvH,GAAQ1xG,GAEjC5b,EAAI,EAAGsO,EAAIsmH,EAAY10H,OAAQF,EAAIsO,EAAGtO,IAC3C4zH,GAAgBgB,EAAa50H,GAAK60H,EAAc70H,SAGjD4zH,GAAgBze,EAAMv5F,GAWxB,OANAi5G,EAAevH,GAAQ1xG,EAAO,WACZ1b,OAAS,GAC1BqtH,GAAesH,GAAeC,GAAUxH,GAAQnY,EAAM,WAIhDv5F,GAGR64G,UAAW,SAAU1f,GAKpB,IAJA,IAAIxmG,EAAM4mG,EAAMpzG,EACf2lH,EAAUhT,EAAOl2F,MAAMkpG,QACvB1nH,EAAI,OAE6B8I,KAAxBqsG,EAAOJ,EAAO/0G,IAAqBA,IAC5C,GAAK8pH,EAAY3U,GAAS,CACzB,GAAO5mG,EAAO4mG,EAAMgV,EAAStU,SAAc,CAC1C,GAAKtnG,EAAKihH,OACT,IAAMztH,KAAQwM,EAAKihH,OACb9H,EAAS3lH,GACb2yG,EAAOl2F,MAAMhd,OAAQ2zG,EAAMpzG,GAI3B2yG,EAAO8b,YAAarb,EAAMpzG,EAAMwM,EAAKwhH,QAOxC5a,EAAMgV,EAAStU,cAAY/sG,EAEvBqsG,EAAMiV,EAASvU,WAInBV,EAAMiV,EAASvU,cAAY/sG,OAOhC4rG,EAAOzuC,GAAGzqD,OAAQ,CACjBu5G,OAAQ,SAAU7oG,GACjB,OAAO1qB,GAAQpF,KAAM8vB,GAAU,IAGhC1qB,OAAQ,SAAU0qB,GACjB,OAAO1qB,GAAQpF,KAAM8vB,IAGtBw8D,KAAM,SAAUroF,GACf,OAAO8oH,EAAQ/sH,MAAM,SAAUiE,GAC9B,YAAiByI,IAAVzI,EACNq0G,EAAOhsB,KAAMtsF,MACbA,KAAKsqE,QAAQwuC,MAAM,WACK,IAAlB94G,KAAKklB,UAAoC,KAAlBllB,KAAKklB,UAAqC,IAAlBllB,KAAKklB,WACxDllB,KAAKu2B,YAActyB,QAGpB,KAAMA,EAAOE,UAAUL,SAG3B80H,OAAQ,WACP,OAAOf,GAAU73H,KAAMmE,WAAW,SAAU40G,GACpB,IAAlB/4G,KAAKklB,UAAoC,KAAlBllB,KAAKklB,UAAqC,IAAlBllB,KAAKklB,UAC3CmyG,GAAoBr3H,KAAM+4G,GAChC9rG,YAAa8rG,OAKvB8f,QAAS,WACR,OAAOhB,GAAU73H,KAAMmE,WAAW,SAAU40G,GAC3C,GAAuB,IAAlB/4G,KAAKklB,UAAoC,KAAlBllB,KAAKklB,UAAqC,IAAlBllB,KAAKklB,SAAiB,CACzE,IAAIvT,EAAS0lH,GAAoBr3H,KAAM+4G,GACvCpnG,EAAOmnH,aAAc/f,EAAMpnG,EAAO6gB,iBAKrC+oB,OAAQ,WACP,OAAOs8E,GAAU73H,KAAMmE,WAAW,SAAU40G,GACtC/4G,KAAKmN,YACTnN,KAAKmN,WAAW2rH,aAAc/f,EAAM/4G,UAKvCw7C,MAAO,WACN,OAAOq8E,GAAU73H,KAAMmE,WAAW,SAAU40G,GACtC/4G,KAAKmN,YACTnN,KAAKmN,WAAW2rH,aAAc/f,EAAM/4G,KAAK++G,iBAK5Cz0C,MAAO,WAIN,IAHA,IAAIyuC,EACHn1G,EAAI,EAE2B,OAAtBm1G,EAAO/4G,KAAM4D,IAAeA,IACd,IAAlBm1G,EAAK7zF,WAGTozF,EAAO+f,UAAWnH,GAAQnY,GAAM,IAGhCA,EAAKxiF,YAAc,IAIrB,OAAOv2B,MAGRwf,MAAO,SAAU84G,EAAeC,GAI/B,OAHAD,EAAiC,MAAjBA,GAAgCA,EAChDC,EAAyC,MAArBA,EAA4BD,EAAgBC,EAEzDv4H,KAAKwT,KAAK,WAChB,OAAO8kG,EAAO94F,MAAOxf,KAAMs4H,EAAeC,OAI5CL,KAAM,SAAUj0H,GACf,OAAO8oH,EAAQ/sH,MAAM,SAAUiE,GAC9B,IAAI80G,EAAO/4G,KAAM,IAAO,GACvB4D,EAAI,EACJsO,EAAIlS,KAAK8D,OAEV,QAAe4I,IAAVzI,GAAyC,IAAlB80G,EAAK7zF,SAChC,OAAO6zF,EAAKiH,UAIb,GAAsB,kBAAV/7G,IAAuBizH,GAAazzG,KAAMxf,KACpD4sH,IAAWL,GAASvlH,KAAMhH,IAAW,CAAE,GAAI,KAAQ,GAAI6O,eAAkB,CAE1E7O,EAAQq0G,EAAO2Z,cAAehuH,GAE9B,IACC,KAAQL,EAAIsO,EAAGtO,IAIS,KAHvBm1G,EAAO/4G,KAAM4D,IAAO,IAGVshB,WACTozF,EAAO+f,UAAWnH,GAAQnY,GAAM,IAChCA,EAAKiH,UAAY/7G,GAInB80G,EAAO,EAGN,MAAQjvE,KAGNivE,GACJ/4G,KAAKsqE,QAAQsuD,OAAQ30H,KAEpB,KAAMA,EAAOE,UAAUL,SAG3Bi1H,YAAa,WACZ,IAAInH,EAAU,GAGd,OAAOiG,GAAU73H,KAAMmE,WAAW,SAAU40G,GAC3C,IAAIn4F,EAAS5gB,KAAKmN,WAEbmrG,EAAO0B,QAASh6G,KAAM4xH,GAAY,IACtCtZ,EAAO+f,UAAWnH,GAAQlxH,OACrB4gB,GACJA,EAAO4F,aAAcuyF,EAAM/4G,SAK3B4xH,MAILtZ,EAAOQ,KAAM,CACZkgB,SAAU,SACVC,UAAW,UACXH,aAAc,SACdI,YAAa,QACbC,WAAY,gBACV,SAAU7f,EAAM/sE,GAClB+rE,EAAOzuC,GAAIyvC,GAAS,SAAUxpF,GAO7B,IANA,IAAI6oF,EACH/G,EAAM,GACNwnB,EAAS9gB,EAAQxoF,GACjBmpF,EAAOmgB,EAAOt1H,OAAS,EACvBF,EAAI,EAEGA,GAAKq1G,EAAMr1G,IAClB+0G,EAAQ/0G,IAAMq1G,EAAOj5G,KAAOA,KAAKwf,OAAO,GACxC84F,EAAQ8gB,EAAQx1H,IAAO2oC,GAAYosE,GAInCt0G,EAAKK,MAAOktG,EAAK+G,EAAMrxG,OAGxB,OAAOtH,KAAK04G,UAAW9G,OAGzB,IAAIynB,GAAY,IAAIt8G,OAAQ,KAAOkyG,GAAO,kBAAmB,KAEzDqK,GAAY,SAAUvgB,GAKxB,IAAIqd,EAAOrd,EAAKlyF,cAAczB,YAM9B,OAJMgxG,GAASA,EAAKmD,SACnBnD,EAAO34H,GAGD24H,EAAK/wG,iBAAkB0zF,IAG5Bx+E,GAAO,SAAUw+E,EAAMr1G,EAAS8B,GACnC,IAAIosG,EAAK0H,EACRkgB,EAAM,GAGP,IAAMlgB,KAAQ51G,EACb81H,EAAKlgB,GAASP,EAAKhsG,MAAOusG,GAC1BP,EAAKhsG,MAAOusG,GAAS51G,EAAS41G,GAM/B,IAAMA,KAHN1H,EAAMpsG,EAASzB,KAAMg1G,GAGPr1G,EACbq1G,EAAKhsG,MAAOusG,GAASkgB,EAAKlgB,GAG3B,OAAO1H,GAIJ6nB,GAAY,IAAI18G,OAAQoyG,GAAUz7G,KAAM,KAAO,KAiJnD,SAASgmH,GAAQ3gB,EAAMO,EAAMqgB,GAC5B,IAAIp6H,EAAOwpG,EAAU9Z,EAAU2iB,EAM9B7kG,EAAQgsG,EAAKhsG,MAqCd,OAnCA4sH,EAAWA,GAAYL,GAAWvgB,MAQpB,MAFbnH,EAAM+nB,EAASC,iBAAkBtgB,IAAUqgB,EAAUrgB,KAEjC8V,GAAYrW,KAC/BnH,EAAM0G,EAAOvrG,MAAOgsG,EAAMO,KAQrB1B,EAAQiiB,kBAAoBR,GAAU51G,KAAMmuF,IAAS6nB,GAAUh2G,KAAM61F,KAG1E/5G,EAAQwN,EAAMxN,MACdwpG,EAAWh8F,EAAMg8F,SACjB9Z,EAAWliF,EAAMkiF,SAGjBliF,EAAMg8F,SAAWh8F,EAAMkiF,SAAWliF,EAAMxN,MAAQqyG,EAChDA,EAAM+nB,EAASp6H,MAGfwN,EAAMxN,MAAQA,EACdwN,EAAMg8F,SAAWA,EACjBh8F,EAAMkiF,SAAWA,SAIJviF,IAARklG,EAINA,EAAM,GACNA,EAIF,SAASkoB,GAAcC,EAAaC,GAGnC,MAAO,CACN1yH,IAAK,WACJ,IAAKyyH,IASL,OAAS/5H,KAAKsH,IAAM0yH,GAASt1H,MAAO1E,KAAMmE,kBALlCnE,KAAKsH,OA3MhB,WAIC,SAAS2yH,IAGR,GAAMptH,EAAN,CAIA0rB,EAAUxrB,MAAM8W,QAAU,+EAE1BhX,EAAIE,MAAM8W,QACT,4HAGDgB,GAAgB5X,YAAasrB,GAAYtrB,YAAaJ,GAEtD,IAAIqtH,EAAWz8H,EAAO4nB,iBAAkBxY,GACxCstH,EAAoC,OAAjBD,EAAS7vH,IAG5B+vH,EAAsE,KAA9CC,EAAoBH,EAASI,YAIrDztH,EAAIE,MAAMw7B,MAAQ,MAClBgyF,EAA6D,KAAzCF,EAAoBH,EAAS3xF,OAIjDiyF,EAAgE,KAAzCH,EAAoBH,EAAS36H,OAMpDsN,EAAIE,MAAMC,SAAW,WACrBytH,EAAiE,KAA9CJ,EAAoBxtH,EAAI6tH,YAAc,GAEzD71G,GAAgBzX,YAAamrB,GAI7B1rB,EAAM,MAGP,SAASwtH,EAAoBM,GAC5B,OAAOlzH,KAAKo1B,MAAOjyB,WAAY+vH,IAGhC,IAAIR,EAAkBK,EAAsBC,EAAkBF,EAC7DK,EAAyBR,EACzB7hG,EAAY/6B,EAASsP,cAAe,OACpCD,EAAMrP,EAASsP,cAAe,OAGzBD,EAAIE,QAMVF,EAAIE,MAAM8tH,eAAiB,cAC3BhuH,EAAIomB,WAAW,GAAOlmB,MAAM8tH,eAAiB,GAC7CjjB,EAAQkjB,gBAA+C,gBAA7BjuH,EAAIE,MAAM8tH,eAEpCviB,EAAOl5F,OAAQw4F,EAAS,CACvBmjB,kBAAmB,WAElB,OADAd,IACOO,GAERX,eAAgB,WAEf,OADAI,IACOM,GAERS,cAAe,WAEd,OADAf,IACOE,GAERc,mBAAoB,WAEnB,OADAhB,IACOG,GAERc,cAAe,WAEd,OADAjB,IACOQ,GAYRU,qBAAsB,WACrB,IAAIC,EAAOroF,EAAIsoF,EAASC,EAmCxB,OAlCgC,MAA3BV,IACJQ,EAAQ59H,EAASsP,cAAe,SAChCimC,EAAKv1C,EAASsP,cAAe,MAC7BuuH,EAAU79H,EAASsP,cAAe,OAElCsuH,EAAMruH,MAAM8W,QAAU,2DACtBkvB,EAAGhmC,MAAM8W,QAAU,mBAKnBkvB,EAAGhmC,MAAM5N,OAAS,MAClBk8H,EAAQtuH,MAAM5N,OAAS,MAQvBk8H,EAAQtuH,MAAMshB,QAAU,QAExBxJ,GACE5X,YAAamuH,GACbnuH,YAAa8lC,GACb9lC,YAAaouH,GAEfC,EAAU79H,EAAO4nB,iBAAkB0tB,GACnC6nF,EAA4BvzG,SAAUi0G,EAAQn8H,OAAQ,IACrDkoB,SAAUi0G,EAAQp0G,eAAgB,IAClCG,SAAUi0G,EAAQC,kBAAmB,MAAWxoF,EAAGyoF,aAEpD32G,GAAgBzX,YAAaguH,IAEvBR,MAvIV,GAsNA,IAAIa,GAAc,CAAE,SAAU,MAAO,MACpCC,GAAal+H,EAASsP,cAAe,OAAQC,MAC7C4uH,GAAc,GAkBf,SAASC,GAAetiB,GACvB,IAAIuiB,EAAQvjB,EAAOwjB,SAAUxiB,IAAUqiB,GAAariB,GAEpD,OAAKuiB,IAGAviB,KAAQoiB,GACLpiB,EAEDqiB,GAAariB,GAxBrB,SAAyBA,GAMxB,IAHA,IAAIyiB,EAAUziB,EAAM,GAAI5tG,cAAgB4tG,EAAK3tG,MAAO,GACnD/H,EAAI63H,GAAY33H,OAETF,KAEP,IADA01G,EAAOmiB,GAAa73H,GAAMm4H,KACbL,GACZ,OAAOpiB,EAeoB0iB,CAAgB1iB,IAAUA,GAIxD,IAKC2iB,GAAe,4BACfC,GAAc,MACdC,GAAU,CAAEnvH,SAAU,WAAYshB,WAAY,SAAUD,QAAS,SACjE+tG,GAAqB,CACpBC,cAAe,IACf3nG,WAAY,OAGd,SAAS4nG,GAAmBljB,EAAOn1G,EAAOq1B,GAIzC,IAAI4gF,EAAUgV,GAAQjkH,KAAMhH,GAC5B,OAAOi2G,EAGNzyG,KAAKc,IAAK,EAAG2xG,EAAS,IAAQ5gF,GAAY,KAAU4gF,EAAS,IAAO,MACpEj2G,EAGF,SAASs4H,GAAoBxjB,EAAMxtC,EAAWzkD,EAAK01G,EAAa74G,EAAQ84G,GACvE,IAAI74H,EAAkB,UAAd2nE,EAAwB,EAAI,EACnCmxD,EAAQ,EACR/yC,EAAQ,EAGT,GAAK7iE,KAAU01G,EAAc,SAAW,WACvC,OAAO,EAGR,KAAQ54H,EAAI,EAAGA,GAAK,EAGN,WAARkjB,IACJ6iE,GAAS2uB,EAAOkX,IAAKzW,EAAMjyF,EAAMqoG,GAAWvrH,IAAK,EAAM+f,IAIlD64G,GAmBQ,YAAR11G,IACJ6iE,GAAS2uB,EAAOkX,IAAKzW,EAAM,UAAYoW,GAAWvrH,IAAK,EAAM+f,IAIjD,WAARmD,IACJ6iE,GAAS2uB,EAAOkX,IAAKzW,EAAM,SAAWoW,GAAWvrH,GAAM,SAAS,EAAM+f,MAtBvEgmE,GAAS2uB,EAAOkX,IAAKzW,EAAM,UAAYoW,GAAWvrH,IAAK,EAAM+f,GAGhD,YAARmD,EACJ6iE,GAAS2uB,EAAOkX,IAAKzW,EAAM,SAAWoW,GAAWvrH,GAAM,SAAS,EAAM+f,GAItE+4G,GAASpkB,EAAOkX,IAAKzW,EAAM,SAAWoW,GAAWvrH,GAAM,SAAS,EAAM+f,IAoCzE,OAhBM64G,GAAeC,GAAe,IAInC9yC,GAASliF,KAAKc,IAAK,EAAGd,KAAK+P,KAC1BuhG,EAAM,SAAWxtC,EAAW,GAAI7/D,cAAgB6/D,EAAU5/D,MAAO,IACjE8wH,EACA9yC,EACA+yC,EACA,MAIM,GAGD/yC,EAGR,SAASgzC,GAAkB5jB,EAAMxtC,EAAWmxD,GAG3C,IAAI/4G,EAAS21G,GAAWvgB,GAKvByjB,IADmB5kB,EAAQmjB,qBAAuB2B,IAEE,eAAnDpkB,EAAOkX,IAAKzW,EAAM,aAAa,EAAOp1F,GACvCi5G,EAAmBJ,EAEnB7vB,EAAM+sB,GAAQ3gB,EAAMxtC,EAAW5nD,GAC/Bk5G,EAAa,SAAWtxD,EAAW,GAAI7/D,cAAgB6/D,EAAU5/D,MAAO,GAIzE,GAAK0tH,GAAU51G,KAAMkpF,GAAQ,CAC5B,IAAM+vB,EACL,OAAO/vB,EAERA,EAAM,OAyCP,QAlCQiL,EAAQmjB,qBAAuByB,IAMrC5kB,EAAQujB,wBAA0B9rG,EAAU0pF,EAAM,OAI3C,SAARpM,IAIC/hG,WAAY+hG,IAA0D,WAAjD2L,EAAOkX,IAAKzW,EAAM,WAAW,EAAOp1F,KAG1Do1F,EAAK+jB,iBAAiBh5H,SAEtB04H,EAAiE,eAAnDlkB,EAAOkX,IAAKzW,EAAM,aAAa,EAAOp1F,IAKpDi5G,EAAmBC,KAAc9jB,KAEhCpM,EAAMoM,EAAM8jB,MAKdlwB,EAAM/hG,WAAY+hG,IAAS,GAI1B4vB,GACCxjB,EACAxtC,EACAmxD,IAAWF,EAAc,SAAW,WACpCI,EACAj5G,EAGAgpF,GAEE,KA+SL,SAASowB,GAAOhkB,EAAMr1G,EAASU,EAAM+mB,EAAKb,GACzC,OAAO,IAAIyyG,GAAMjuH,UAAUypG,KAAMQ,EAAMr1G,EAASU,EAAM+mB,EAAKb,GA7S5DguF,EAAOl5F,OAAQ,CAId49G,SAAU,CACT/5G,QAAS,CACR3b,IAAK,SAAUyxG,EAAM4gB,GACpB,GAAKA,EAAW,CAGf,IAAI/nB,EAAM8nB,GAAQ3gB,EAAM,WACxB,MAAe,KAARnH,EAAa,IAAMA,MAO9Bme,UAAW,CACV,yBAA2B,EAC3B,aAAe,EACf,aAAe,EACf,UAAY,EACZ,YAAc,EACd,YAAc,EACd,UAAY,EACZ,YAAc,EACd,eAAiB,EACjB,iBAAmB,EACnB,SAAW,EACX,YAAc,EACd,cAAgB,EAChB,YAAc,EACd,SAAW,EACX,OAAS,EACT,SAAW,EACX,QAAU,EACV,QAAU,EACV,MAAQ,GAKT+L,SAAU,GAGV/uH,MAAO,SAAUgsG,EAAMO,EAAMr1G,EAAOy4H,GAGnC,GAAM3jB,GAA0B,IAAlBA,EAAK7zF,UAAoC,IAAlB6zF,EAAK7zF,UAAmB6zF,EAAKhsG,MAAlE,CAKA,IAAI6kG,EAAKjsG,EAAM+oH,EACduO,EAAWxP,EAAWnU,GACtB4jB,EAAehB,GAAYz4G,KAAM61F,GACjCvsG,EAAQgsG,EAAKhsG,MAad,GARMmwH,IACL5jB,EAAOsiB,GAAeqB,IAIvBvO,EAAQpW,EAAO0kB,SAAU1jB,IAAUhB,EAAO0kB,SAAUC,QAGrCvwH,IAAVzI,EA0CJ,OAAKyqH,GAAS,QAASA,QACwBhiH,KAA5CklG,EAAM8c,EAAMpnH,IAAKyxG,GAAM,EAAO2jB,IAEzB9qB,EAID7kG,EAAOusG,GA7CA,YAHd3zG,SAAc1B,KAGc2tG,EAAMsd,GAAQjkH,KAAMhH,KAAa2tG,EAAK,KACjE3tG,EAAQwrH,GAAW1W,EAAMO,EAAM1H,GAG/BjsG,EAAO,UAIM,MAAT1B,GAAiBA,IAAUA,IAOlB,WAAT0B,GAAsBu3H,IAC1Bj5H,GAAS2tG,GAAOA,EAAK,KAAS0G,EAAOyX,UAAWkN,GAAa,GAAK,OAI7DrlB,EAAQkjB,iBAA6B,KAAV72H,GAAiD,IAAjCq1G,EAAKl2G,QAAS,gBAC9D2J,EAAOusG,GAAS,WAIXoV,GAAY,QAASA,QACsBhiH,KAA9CzI,EAAQyqH,EAAMloH,IAAKuyG,EAAM90G,EAAOy4H,MAE7BQ,EACJnwH,EAAMowH,YAAa7jB,EAAMr1G,GAEzB8I,EAAOusG,GAASr1G,MAkBpBurH,IAAK,SAAUzW,EAAMO,EAAMojB,EAAO/4G,GACjC,IAAIgpF,EAAK4J,EAAKmY,EACbuO,EAAWxP,EAAWnU,GA6BvB,OA5BgB4iB,GAAYz4G,KAAM61F,KAMjCA,EAAOsiB,GAAeqB,KAIvBvO,EAAQpW,EAAO0kB,SAAU1jB,IAAUhB,EAAO0kB,SAAUC,KAGtC,QAASvO,IACtB/hB,EAAM+hB,EAAMpnH,IAAKyxG,GAAM,EAAM2jB,SAIjBhwH,IAARigG,IACJA,EAAM+sB,GAAQ3gB,EAAMO,EAAM31F,IAId,WAARgpF,GAAoB2M,KAAQ8iB,KAChCzvB,EAAMyvB,GAAoB9iB,IAIZ,KAAVojB,GAAgBA,GACpBnmB,EAAM3rG,WAAY+hG,IACD,IAAV+vB,GAAkBhrB,SAAU6E,GAAQA,GAAO,EAAI5J,GAGhDA,KAIT2L,EAAOQ,KAAM,CAAE,SAAU,UAAW,SAAUz3B,EAAI9V,GACjD+sC,EAAO0kB,SAAUzxD,GAAc,CAC9BjkE,IAAK,SAAUyxG,EAAM4gB,EAAU+C,GAC9B,GAAK/C,EAIJ,OAAOsC,GAAax4G,KAAM60F,EAAOkX,IAAKzW,EAAM,aAQxCA,EAAK+jB,iBAAiBh5H,QAAWi1G,EAAKzxF,wBAAwB/nB,MAIjEo9H,GAAkB5jB,EAAMxtC,EAAWmxD,GAHnCniG,GAAMw+E,EAAMojB,IAAS,WACpB,OAAOQ,GAAkB5jB,EAAMxtC,EAAWmxD,OAM9Cl2H,IAAK,SAAUuyG,EAAM90G,EAAOy4H,GAC3B,IAAIxiB,EACHv2F,EAAS21G,GAAWvgB,GAIpBqkB,GAAsBxlB,EAAQsjB,iBACT,aAApBv3G,EAAO3W,SAIRwvH,GADkBY,GAAsBV,IAEY,eAAnDpkB,EAAOkX,IAAKzW,EAAM,aAAa,EAAOp1F,GACvC2V,EAAWojG,EACVH,GACCxjB,EACAxtC,EACAmxD,EACAF,EACA74G,GAED,EAqBF,OAjBK64G,GAAeY,IACnB9jG,GAAY7xB,KAAK+P,KAChBuhG,EAAM,SAAWxtC,EAAW,GAAI7/D,cAAgB6/D,EAAU5/D,MAAO,IACjEf,WAAY+Y,EAAQ4nD,IACpBgxD,GAAoBxjB,EAAMxtC,EAAW,UAAU,EAAO5nD,GACtD,KAKG2V,IAAc4gF,EAAUgV,GAAQjkH,KAAMhH,KACb,QAA3Bi2G,EAAS,IAAO,QAElBnB,EAAKhsG,MAAOw+D,GAActnE,EAC1BA,EAAQq0G,EAAOkX,IAAKzW,EAAMxtC,IAGpB+wD,GAAmBvjB,EAAM90G,EAAOq1B,QAK1Cg/E,EAAO0kB,SAAS1C,WAAaR,GAAcliB,EAAQqjB,oBAClD,SAAUliB,EAAM4gB,GACf,GAAKA,EACJ,OAAS/uH,WAAY8uH,GAAQ3gB,EAAM,gBAClCA,EAAKzxF,wBAAwBld,KAC5BmwB,GAAMw+E,EAAM,CAAEuhB,WAAY,IAAK,WAC9B,OAAOvhB,EAAKzxF,wBAAwBld,SAEnC,QAMPkuG,EAAOQ,KAAM,CACZukB,OAAQ,GACR5yF,QAAS,GACT6yF,OAAQ,UACN,SAAU12D,EAAQ22D,GACpBjlB,EAAO0kB,SAAUp2D,EAAS22D,GAAW,CACpCC,OAAQ,SAAUv5H,GAOjB,IANA,IAAIL,EAAI,EACP65H,EAAW,GAGX1xH,EAAyB,kBAAV9H,EAAqBA,EAAM+H,MAAO,KAAQ,CAAE/H,GAEpDL,EAAI,EAAGA,IACd65H,EAAU72D,EAASuoD,GAAWvrH,GAAM25H,GACnCxxH,EAAOnI,IAAOmI,EAAOnI,EAAI,IAAOmI,EAAO,GAGzC,OAAO0xH,IAIO,WAAX72D,IACJ0xC,EAAO0kB,SAAUp2D,EAAS22D,GAAS/2H,IAAM81H,OAI3ChkB,EAAOzuC,GAAGzqD,OAAQ,CACjBowG,IAAK,SAAUlW,EAAMr1G,GACpB,OAAO8oH,EAAQ/sH,MAAM,SAAU+4G,EAAMO,EAAMr1G,GAC1C,IAAI0f,EAAQ9f,EACX2P,EAAM,GACN5P,EAAI,EAEL,GAAK6Q,MAAMuX,QAASstF,GAAS,CAI5B,IAHA31F,EAAS21G,GAAWvgB,GACpBl1G,EAAMy1G,EAAKx1G,OAEHF,EAAIC,EAAKD,IAChB4P,EAAK8lG,EAAM11G,IAAQ00G,EAAOkX,IAAKzW,EAAMO,EAAM11G,IAAK,EAAO+f,GAGxD,OAAOnQ,EAGR,YAAiB9G,IAAVzI,EACNq0G,EAAOvrG,MAAOgsG,EAAMO,EAAMr1G,GAC1Bq0G,EAAOkX,IAAKzW,EAAMO,KACjBA,EAAMr1G,EAAOE,UAAUL,OAAS,MAQrCw0G,EAAOykB,MAAQA,GAEfA,GAAMjuH,UAAY,CACjBgS,YAAai8G,GACbxkB,KAAM,SAAUQ,EAAMr1G,EAASU,EAAM+mB,EAAKb,EAAQtf,GACjDhL,KAAK+4G,KAAOA,EACZ/4G,KAAKoE,KAAOA,EACZpE,KAAKsqB,OAASA,GAAUguF,EAAOhuF,OAAO2mG,SACtCjxH,KAAK0D,QAAUA,EACf1D,KAAKgqB,MAAQhqB,KAAKi3E,IAAMj3E,KAAK6+G,MAC7B7+G,KAAKmrB,IAAMA,EACXnrB,KAAKgL,KAAOA,IAAUstG,EAAOyX,UAAW3rH,GAAS,GAAK,OAEvDy6G,IAAK,WACJ,IAAI6P,EAAQqO,GAAMW,UAAW19H,KAAKoE,MAElC,OAAOsqH,GAASA,EAAMpnH,IACrBonH,EAAMpnH,IAAKtH,MACX+8H,GAAMW,UAAUzM,SAAS3pH,IAAKtH,OAEhC29H,IAAK,SAAUr0C,GACd,IAAIs0C,EACHlP,EAAQqO,GAAMW,UAAW19H,KAAKoE,MAoB/B,OAlBKpE,KAAK0D,QAAQwmB,SACjBlqB,KAAKorB,IAAMwyG,EAAQtlB,EAAOhuF,OAAQtqB,KAAKsqB,QACtCg/D,EAAStpF,KAAK0D,QAAQwmB,SAAWo/D,EAAS,EAAG,EAAGtpF,KAAK0D,QAAQwmB,UAG9DlqB,KAAKorB,IAAMwyG,EAAQt0C,EAEpBtpF,KAAKi3E,KAAQj3E,KAAKmrB,IAAMnrB,KAAKgqB,OAAU4zG,EAAQ59H,KAAKgqB,MAE/ChqB,KAAK0D,QAAQm6H,MACjB79H,KAAK0D,QAAQm6H,KAAK95H,KAAM/D,KAAK+4G,KAAM/4G,KAAKi3E,IAAKj3E,MAGzC0uH,GAASA,EAAMloH,IACnBkoH,EAAMloH,IAAKxG,MAEX+8H,GAAMW,UAAUzM,SAASzqH,IAAKxG,MAExBA,OAIT+8H,GAAMjuH,UAAUypG,KAAKzpG,UAAYiuH,GAAMjuH,UAEvCiuH,GAAMW,UAAY,CACjBzM,SAAU,CACT3pH,IAAK,SAAUqoH,GACd,IAAIl4G,EAIJ,OAA6B,IAAxBk4G,EAAM5W,KAAK7zF,UACa,MAA5ByqG,EAAM5W,KAAM4W,EAAMvrH,OAAoD,MAAlCurH,EAAM5W,KAAKhsG,MAAO4iH,EAAMvrH,MACrDurH,EAAM5W,KAAM4W,EAAMvrH,OAO1BqT,EAAS6gG,EAAOkX,IAAKG,EAAM5W,KAAM4W,EAAMvrH,KAAM,MAGhB,SAAXqT,EAAwBA,EAAJ,GAEvCjR,IAAK,SAAUmpH,GAKTrX,EAAOn/F,GAAG0kH,KAAMlO,EAAMvrH,MAC1Bk0G,EAAOn/F,GAAG0kH,KAAMlO,EAAMvrH,MAAQurH,GACK,IAAxBA,EAAM5W,KAAK7zF,WACtBozF,EAAO0kB,SAAUrN,EAAMvrH,OAC6B,MAAnDurH,EAAM5W,KAAKhsG,MAAO6uH,GAAejM,EAAMvrH,OAGxCurH,EAAM5W,KAAM4W,EAAMvrH,MAASurH,EAAM14C,IAFjCqhC,EAAOvrG,MAAO4iH,EAAM5W,KAAM4W,EAAMvrH,KAAMurH,EAAM14C,IAAM04C,EAAM3kH,SAU5D+xH,GAAMW,UAAU14G,UAAY+3G,GAAMW,UAAU34G,WAAa,CACxDve,IAAK,SAAUmpH,GACTA,EAAM5W,KAAK7zF,UAAYyqG,EAAM5W,KAAK5rG,aACtCwiH,EAAM5W,KAAM4W,EAAMvrH,MAASurH,EAAM14C,OAKpCqhC,EAAOhuF,OAAS,CACfwzG,OAAQ,SAAUp0H,GACjB,OAAOA,GAERq0H,MAAO,SAAUr0H,GAChB,MAAO,GAAMjC,KAAKM,IAAK2B,EAAIjC,KAAKI,IAAO,GAExCopH,SAAU,UAGX3Y,EAAOn/F,GAAK4jH,GAAMjuH,UAAUypG,MAGlBslB,KAAO,GAKjB,IACCG,GAAOC,GACPC,GAAW,yBACXC,GAAO,cAER,SAASC,KACHH,MACqB,IAApBzgI,EAAS6gI,QAAoB5gI,EAAO0rB,sBACxC1rB,EAAO0rB,sBAAuBi1G,IAE9B3gI,EAAO+rB,WAAY40G,GAAU9lB,EAAOn/F,GAAGmlH,UAGxChmB,EAAOn/F,GAAGwR,QAKZ,SAAS4zG,KAIR,OAHA9gI,EAAO+rB,YAAY,WAClBw0G,QAAQtxH,KAEAsxH,GAAQ/zG,KAAKgtD,MAIvB,SAASunD,GAAO74H,EAAM84H,GACrB,IAAI9H,EACH/yH,EAAI,EACJwvB,EAAQ,CAAEj0B,OAAQwG,GAKnB,IADA84H,EAAeA,EAAe,EAAI,EAC1B76H,EAAI,EAAGA,GAAK,EAAI66H,EAEvBrrG,EAAO,UADPujG,EAAQxH,GAAWvrH,KACSwvB,EAAO,UAAYujG,GAAUhxH,EAO1D,OAJK84H,IACJrrG,EAAMnQ,QAAUmQ,EAAM7zB,MAAQoG,GAGxBytB,EAGR,SAASsrG,GAAaz6H,EAAOG,EAAMu6H,GAKlC,IAJA,IAAIhP,EACHmI,GAAe8G,GAAUC,SAAUz6H,IAAU,IAAKwB,OAAQg5H,GAAUC,SAAU,MAC9E75H,EAAQ,EACRlB,EAASg0H,EAAWh0H,OACbkB,EAAQlB,EAAQkB,IACvB,GAAO2qH,EAAQmI,EAAY9yH,GAAQjB,KAAM46H,EAAWv6H,EAAMH,GAGzD,OAAO0rH,EAsNV,SAASiP,GAAW7lB,EAAMnqG,EAAYlL,GACrC,IAAI+T,EACHqnH,EACA95H,EAAQ,EACRlB,EAAS86H,GAAUG,WAAWj7H,OAC9B4mH,EAAWpS,EAAO+R,WAAWI,QAAQ,kBAG7B9/F,EAAKouF,QAEbpuF,EAAO,WACN,GAAKm0G,EACJ,OAAO,EAYR,IAVA,IAAIj0G,EAAcmzG,IAASO,KAC1BlwB,EAAY5mG,KAAKc,IAAK,EAAGo2H,EAAU7nD,UAAY6nD,EAAUz0G,SAAWW,GAKpEy+D,EAAU,GADH+kB,EAAYswB,EAAUz0G,UAAY,GAEzCllB,EAAQ,EACRlB,EAAS66H,EAAUK,OAAOl7H,OAEnBkB,EAAQlB,EAAQkB,IACvB25H,EAAUK,OAAQh6H,GAAQ24H,IAAKr0C,GAMhC,OAHAohC,EAASc,WAAYzS,EAAM,CAAE4lB,EAAWr1C,EAAS+kB,IAG5C/kB,EAAU,GAAKxlF,EACZuqG,GAIFvqG,GACL4mH,EAASc,WAAYzS,EAAM,CAAE4lB,EAAW,EAAG,IAI5CjU,EAASe,YAAa1S,EAAM,CAAE4lB,KACvB,IAERA,EAAYjU,EAASvB,QAAS,CAC7BpQ,KAAMA,EACN5vC,MAAOmvC,EAAOl5F,OAAQ,GAAIxQ,GAC1Bwd,KAAMksF,EAAOl5F,QAAQ,EAAM,CAC1B6/G,cAAe,GACf30G,OAAQguF,EAAOhuF,OAAO2mG,UACpBvtH,GACH8rD,mBAAoB5gD,EACpBswH,gBAAiBx7H,EACjBozE,UAAWknD,IAASO,KACpBr0G,SAAUxmB,EAAQwmB,SAClB80G,OAAQ,GACRN,YAAa,SAAUt6H,EAAM+mB,GAC5B,IAAIwkG,EAAQrX,EAAOykB,MAAOhkB,EAAM4lB,EAAUvyG,KAAMhoB,EAAM+mB,EACrDwzG,EAAUvyG,KAAK6yG,cAAe76H,IAAUu6H,EAAUvyG,KAAK9B,QAExD,OADAq0G,EAAUK,OAAO36H,KAAMsrH,GAChBA,GAERf,KAAM,SAAUuQ,GACf,IAAIn6H,EAAQ,EAIXlB,EAASq7H,EAAUR,EAAUK,OAAOl7H,OAAS,EAC9C,GAAKg7H,EACJ,OAAO9+H,KAGR,IADA8+H,GAAU,EACF95H,EAAQlB,EAAQkB,IACvB25H,EAAUK,OAAQh6H,GAAQ24H,IAAK,GAUhC,OANKwB,GACJzU,EAASc,WAAYzS,EAAM,CAAE4lB,EAAW,EAAG,IAC3CjU,EAASe,YAAa1S,EAAM,CAAE4lB,EAAWQ,KAEzCzU,EAASkB,WAAY7S,EAAM,CAAE4lB,EAAWQ,IAElCn/H,QAGTmpE,EAAQw1D,EAAUx1D,MAInB,KA/HD,SAAqBA,EAAO81D,GAC3B,IAAIj6H,EAAOs0G,EAAMhvF,EAAQrmB,EAAOyqH,EAGhC,IAAM1pH,KAASmkE,EAed,GAbA7+C,EAAS20G,EADT3lB,EAAOmU,EAAWzoH,IAElBf,EAAQklE,EAAOnkE,GACVyP,MAAMuX,QAAS/nB,KACnBqmB,EAASrmB,EAAO,GAChBA,EAAQklE,EAAOnkE,GAAUf,EAAO,IAG5Be,IAAUs0G,IACdnwC,EAAOmwC,GAASr1G,SACTklE,EAAOnkE,KAGf0pH,EAAQpW,EAAO0kB,SAAU1jB,KACX,WAAYoV,EAMzB,IAAM1pH,KALNf,EAAQyqH,EAAM8O,OAAQv5H,UACfklE,EAAOmwC,GAICr1G,EACNe,KAASmkE,IAChBA,EAAOnkE,GAAUf,EAAOe,GACxBi6H,EAAej6H,GAAUslB,QAI3B20G,EAAe3lB,GAAShvF,EA6F1B80G,CAAYj2D,EAAOw1D,EAAUvyG,KAAK6yG,eAE1Bj6H,EAAQlB,EAAQkB,IAEvB,GADAyS,EAASmnH,GAAUG,WAAY/5H,GAAQjB,KAAM46H,EAAW5lB,EAAM5vC,EAAOw1D,EAAUvyG,MAM9E,OAJKyrF,EAAYpgG,EAAOm3G,QACvBtW,EAAOqW,YAAagQ,EAAU5lB,KAAM4lB,EAAUvyG,KAAK09F,OAAQ8E,KAC1Dn3G,EAAOm3G,KAAKx3E,KAAM3/B,IAEbA,EAyBT,OArBA6gG,EAAO9kG,IAAK21D,EAAOu1D,GAAaC,GAE3B9mB,EAAY8mB,EAAUvyG,KAAKpC,QAC/B20G,EAAUvyG,KAAKpC,MAAMjmB,KAAMg1G,EAAM4lB,GAIlCA,EACE3T,SAAU2T,EAAUvyG,KAAK4+F,UACzB3P,KAAMsjB,EAAUvyG,KAAKivF,KAAMsjB,EAAUvyG,KAAK2pB,UAC1CqzE,KAAMuV,EAAUvyG,KAAKg9F,MACrBqB,OAAQkU,EAAUvyG,KAAKq+F,QAEzBnS,EAAOn/F,GAAGkmH,MACT/mB,EAAOl5F,OAAQuL,EAAM,CACpBouF,KAAMA,EACNumB,KAAMX,EACN7U,MAAO6U,EAAUvyG,KAAK09F,SAIjB6U,EAGRrmB,EAAOsmB,UAAYtmB,EAAOl5F,OAAQw/G,GAAW,CAE5CC,SAAU,CACT,IAAK,CAAE,SAAUz6H,EAAMH,GACtB,IAAI0rH,EAAQ3vH,KAAK0+H,YAAat6H,EAAMH,GAEpC,OADAwrH,GAAWE,EAAM5W,KAAM30G,EAAM8qH,GAAQjkH,KAAMhH,GAAS0rH,GAC7CA,KAIT4P,QAAS,SAAUp2D,EAAO3jE,GACpBqyG,EAAY1uC,IAChB3jE,EAAW2jE,EACXA,EAAQ,CAAE,MAEVA,EAAQA,EAAM3sD,MAAOosG,GAOtB,IAJA,IAAIxkH,EACHY,EAAQ,EACRlB,EAASqlE,EAAMrlE,OAERkB,EAAQlB,EAAQkB,IACvBZ,EAAO+kE,EAAOnkE,GACd45H,GAAUC,SAAUz6H,GAASw6H,GAAUC,SAAUz6H,IAAU,GAC3Dw6H,GAAUC,SAAUz6H,GAAOsa,QAASlZ,IAItCu5H,WAAY,CA3Wb,SAA2BhmB,EAAM5vC,EAAO/8C,GACvC,IAAIhoB,EAAMH,EAAOoD,EAAQqnH,EAAO8Q,EAASC,EAAWC,EAAgBrxG,EACnEsxG,EAAQ,UAAWx2D,GAAS,WAAYA,EACxCm2D,EAAOt/H,KACPg3H,EAAO,GACPjqH,EAAQgsG,EAAKhsG,MACbsxH,EAAStlB,EAAK7zF,UAAYqqG,GAAoBxW,GAC9C6mB,EAAW7R,EAASzmH,IAAKyxG,EAAM,UA6BhC,IAAM30G,KA1BAgoB,EAAK09F,QAEa,OADvB4E,EAAQpW,EAAOqW,YAAa5V,EAAM,OACvB8mB,WACVnR,EAAMmR,SAAW,EACjBL,EAAU9Q,EAAMpkD,MAAM7mE,KACtBirH,EAAMpkD,MAAM7mE,KAAO,WACZirH,EAAMmR,UACXL,MAIH9Q,EAAMmR,WAENP,EAAK7U,QAAQ,WAGZ6U,EAAK7U,QAAQ,WACZiE,EAAMmR,WACAvnB,EAAOwR,MAAO/Q,EAAM,MAAOj1G,QAChC4qH,EAAMpkD,MAAM7mE,cAOF0lE,EAEb,GADAllE,EAAQklE,EAAO/kE,GACV85H,GAASz6G,KAAMxf,GAAU,CAG7B,UAFOklE,EAAO/kE,GACdiD,EAASA,GAAoB,WAAVpD,EACdA,KAAYo6H,EAAS,OAAS,QAAW,CAI7C,GAAe,SAAVp6H,IAAoB27H,QAAiClzH,IAArBkzH,EAAUx7H,GAK9C,SAJAi6H,GAAS,EAOXrH,EAAM5yH,GAASw7H,GAAYA,EAAUx7H,IAAUk0G,EAAOvrG,MAAOgsG,EAAM30G,GAMrE,IADAq7H,GAAannB,EAAOuB,cAAe1wC,MAChBmvC,EAAOuB,cAAemd,GA8DzC,IAAM5yH,KAzDDu7H,GAA2B,IAAlB5mB,EAAK7zF,WAMlBkH,EAAK0zG,SAAW,CAAE/yH,EAAM+yH,SAAU/yH,EAAMgzH,UAAWhzH,EAAMizH,WAIlC,OADvBN,EAAiBE,GAAYA,EAASvxG,WAErCqxG,EAAiB3R,EAASzmH,IAAKyxG,EAAM,YAGrB,UADjB1qF,EAAUiqF,EAAOkX,IAAKzW,EAAM,cAEtB2mB,EACJrxG,EAAUqxG,GAIVvP,GAAU,CAAEpX,IAAQ,GACpB2mB,EAAiB3mB,EAAKhsG,MAAMshB,SAAWqxG,EACvCrxG,EAAUiqF,EAAOkX,IAAKzW,EAAM,WAC5BoX,GAAU,CAAEpX,OAKG,WAAZ1qF,GAAoC,iBAAZA,GAAgD,MAAlBqxG,IACrB,SAAhCpnB,EAAOkX,IAAKzW,EAAM,WAGhB0mB,IACLH,EAAKjkB,MAAM,WACVtuG,EAAMshB,QAAUqxG,KAEM,MAAlBA,IACJrxG,EAAUthB,EAAMshB,QAChBqxG,EAA6B,SAAZrxG,EAAqB,GAAKA,IAG7CthB,EAAMshB,QAAU,iBAKdjC,EAAK0zG,WACT/yH,EAAM+yH,SAAW,SACjBR,EAAK7U,QAAQ,WACZ19G,EAAM+yH,SAAW1zG,EAAK0zG,SAAU,GAChC/yH,EAAMgzH,UAAY3zG,EAAK0zG,SAAU,GACjC/yH,EAAMizH,UAAY5zG,EAAK0zG,SAAU,OAKnCL,GAAY,EACEzI,EAGPyI,IACAG,EACC,WAAYA,IAChBvB,EAASuB,EAASvB,QAGnBuB,EAAW7R,EAAShB,OAAQhU,EAAM,SAAU,CAAE1qF,QAASqxG,IAInDr4H,IACJu4H,EAASvB,QAAUA,GAIfA,GACJlO,GAAU,CAAEpX,IAAQ,GAKrBumB,EAAKjkB,MAAM,WASV,IAAMj3G,KAJAi6H,GACLlO,GAAU,CAAEpX,IAEbgV,EAAS3oH,OAAQ2zG,EAAM,UACTie,EACb1e,EAAOvrG,MAAOgsG,EAAM30G,EAAM4yH,EAAM5yH,QAMnCq7H,EAAYf,GAAaL,EAASuB,EAAUx7H,GAAS,EAAGA,EAAMk7H,GACtDl7H,KAAQw7H,IACfA,EAAUx7H,GAASq7H,EAAUz1G,MACxBq0G,IACJoB,EAAUt0G,IAAMs0G,EAAUz1G,MAC1By1G,EAAUz1G,MAAQ,MAuMrBi2G,UAAW,SAAUz6H,EAAUqzH,GACzBA,EACJ+F,GAAUG,WAAWrgH,QAASlZ,GAE9Bo5H,GAAUG,WAAW16H,KAAMmB,MAK9B8yG,EAAO4nB,MAAQ,SAAUA,EAAO51G,EAAQu/C,GACvC,IAAIs2D,EAAMD,GAA0B,kBAAVA,EAAqB5nB,EAAOl5F,OAAQ,GAAI8gH,GAAU,CAC3EnqF,SAAU8zB,IAAOA,GAAMv/C,GACtButF,EAAYqoB,IAAWA,EACxBh2G,SAAUg2G,EACV51G,OAAQu/C,GAAMv/C,GAAUA,IAAWutF,EAAYvtF,IAAYA,GAoC5D,OAhCKguF,EAAOn/F,GAAG7U,IACd67H,EAAIj2G,SAAW,EAGc,kBAAjBi2G,EAAIj2G,WACVi2G,EAAIj2G,YAAYouF,EAAOn/F,GAAGinH,OAC9BD,EAAIj2G,SAAWouF,EAAOn/F,GAAGinH,OAAQD,EAAIj2G,UAGrCi2G,EAAIj2G,SAAWouF,EAAOn/F,GAAGinH,OAAOnP,UAMjB,MAAbkP,EAAIrW,QAA+B,IAAdqW,EAAIrW,QAC7BqW,EAAIrW,MAAQ,MAIbqW,EAAI3G,IAAM2G,EAAIpqF,SAEdoqF,EAAIpqF,SAAW,WACT8hE,EAAYsoB,EAAI3G,MACpB2G,EAAI3G,IAAIz1H,KAAM/D,MAGVmgI,EAAIrW,OACRxR,EAAOkW,QAASxuH,KAAMmgI,EAAIrW,QAIrBqW,GAGR7nB,EAAOzuC,GAAGzqD,OAAQ,CACjBihH,OAAQ,SAAUH,EAAOn9D,EAAIz4C,EAAQ9kB,GAGpC,OAAOxF,KAAKgE,OAAQurH,IAAqBC,IAAK,UAAW,GAAIY,OAG3DjlG,MAAMtB,QAAS,CAAE5G,QAAS8/C,GAAMm9D,EAAO51G,EAAQ9kB,IAElDqkB,QAAS,SAAUzlB,EAAM87H,EAAO51G,EAAQ9kB,GACvC,IAAI8kE,EAAQguC,EAAOuB,cAAez1G,GACjCk8H,EAAShoB,EAAO4nB,MAAOA,EAAO51G,EAAQ9kB,GACtC+6H,EAAc,WAGb,IAAIjB,EAAOV,GAAW5+H,KAAMs4G,EAAOl5F,OAAQ,GAAIhb,GAAQk8H,IAGlDh2D,GAASyjD,EAASzmH,IAAKtH,KAAM,YACjCs/H,EAAK1Q,MAAM,IAMd,OAFA2R,EAAYp2G,OAASo2G,EAEdj2D,IAA0B,IAAjBg2D,EAAOxW,MACtB9pH,KAAK84G,KAAMynB,GACXvgI,KAAK8pH,MAAOwW,EAAOxW,MAAOyW,IAE5B3R,KAAM,SAAUjpH,EAAMmpH,EAAYqQ,GACjC,IAAIqB,EAAY,SAAU9R,GACzB,IAAIE,EAAOF,EAAME,YACVF,EAAME,KACbA,EAAMuQ,IAYP,MATqB,kBAATx5H,IACXw5H,EAAUrQ,EACVA,EAAanpH,EACbA,OAAO+G,GAEHoiH,GACJ9uH,KAAK8pH,MAAOnkH,GAAQ,KAAM,IAGpB3F,KAAK84G,MAAM,WACjB,IAAI0V,GAAU,EACbxpH,EAAgB,MAARW,GAAgBA,EAAO,aAC/B86H,EAASnoB,EAAOmoB,OAChBtuH,EAAO47G,EAASzmH,IAAKtH,MAEtB,GAAKgF,EACCmN,EAAMnN,IAAWmN,EAAMnN,GAAQ4pH,MACnC4R,EAAWruH,EAAMnN,SAGlB,IAAMA,KAASmN,EACTA,EAAMnN,IAAWmN,EAAMnN,GAAQ4pH,MAAQuP,GAAK16G,KAAMze,IACtDw7H,EAAWruH,EAAMnN,IAKpB,IAAMA,EAAQy7H,EAAO38H,OAAQkB,KACvBy7H,EAAQz7H,GAAQ+zG,OAAS/4G,MACnB,MAAR2F,GAAgB86H,EAAQz7H,GAAQ8kH,QAAUnkH,IAE5C86H,EAAQz7H,GAAQs6H,KAAK1Q,KAAMuQ,GAC3B3Q,GAAU,EACViS,EAAOt7H,OAAQH,EAAO,KAOnBwpH,GAAY2Q,GAChB7mB,EAAOkW,QAASxuH,KAAM2F,OAIzBwkB,OAAQ,SAAUxkB,GAIjB,OAHc,IAATA,IACJA,EAAOA,GAAQ,MAET3F,KAAK84G,MAAM,WACjB,IAAI9zG,EACHmN,EAAO47G,EAASzmH,IAAKtH,MACrB8pH,EAAQ33G,EAAMxM,EAAO,SACrB+oH,EAAQv8G,EAAMxM,EAAO,cACrB86H,EAASnoB,EAAOmoB,OAChB38H,EAASgmH,EAAQA,EAAMhmH,OAAS,EAajC,IAVAqO,EAAKgY,QAAS,EAGdmuF,EAAOwR,MAAO9pH,KAAM2F,EAAM,IAErB+oH,GAASA,EAAME,MACnBF,EAAME,KAAK7qH,KAAM/D,MAAM,GAIlBgF,EAAQy7H,EAAO38H,OAAQkB,KACvBy7H,EAAQz7H,GAAQ+zG,OAAS/4G,MAAQygI,EAAQz7H,GAAQ8kH,QAAUnkH,IAC/D86H,EAAQz7H,GAAQs6H,KAAK1Q,MAAM,GAC3B6R,EAAOt7H,OAAQH,EAAO,IAKxB,IAAMA,EAAQ,EAAGA,EAAQlB,EAAQkB,IAC3B8kH,EAAO9kH,IAAW8kH,EAAO9kH,GAAQmlB,QACrC2/F,EAAO9kH,GAAQmlB,OAAOpmB,KAAM/D,aAKvBmS,EAAKgY,aAKfmuF,EAAOQ,KAAM,CAAE,SAAU,OAAQ,SAAU,SAAUz3B,EAAIi4B,GACxD,IAAIonB,EAAQpoB,EAAOzuC,GAAIyvC,GACvBhB,EAAOzuC,GAAIyvC,GAAS,SAAU4mB,EAAO51G,EAAQ9kB,GAC5C,OAAgB,MAAT06H,GAAkC,mBAAVA,EAC9BQ,EAAMh8H,MAAO1E,KAAMmE,WACnBnE,KAAK6pB,QAAS20G,GAAOllB,GAAM,GAAQ4mB,EAAO51G,EAAQ9kB,OAKrD8yG,EAAOQ,KAAM,CACZ6nB,UAAWnC,GAAO,QAClBoC,QAASpC,GAAO,QAChBqC,YAAarC,GAAO,UACpBsC,OAAQ,CAAE79G,QAAS,QACnB89G,QAAS,CAAE99G,QAAS,QACpB+9G,WAAY,CAAE/9G,QAAS,YACrB,SAAUq2F,EAAMnwC,GAClBmvC,EAAOzuC,GAAIyvC,GAAS,SAAU4mB,EAAO51G,EAAQ9kB,GAC5C,OAAOxF,KAAK6pB,QAASs/C,EAAO+2D,EAAO51G,EAAQ9kB,OAI7C8yG,EAAOmoB,OAAS,GAChBnoB,EAAOn/F,GAAGwR,KAAO,WAChB,IAAI00G,EACHz7H,EAAI,EACJ68H,EAASnoB,EAAOmoB,OAIjB,IAFAzC,GAAQ/zG,KAAKgtD,MAELrzE,EAAI68H,EAAO38H,OAAQF,KAC1By7H,EAAQoB,EAAQ78H,OAGC68H,EAAQ78H,KAAQy7H,GAChCoB,EAAOt7H,OAAQvB,IAAK,GAIhB68H,EAAO38H,QACZw0G,EAAOn/F,GAAGy1G,OAEXoP,QAAQtxH,GAGT4rG,EAAOn/F,GAAGkmH,MAAQ,SAAUA,GAC3B/mB,EAAOmoB,OAAOp8H,KAAMg7H,GACpB/mB,EAAOn/F,GAAG6Q,SAGXsuF,EAAOn/F,GAAGmlH,SAAW,GACrBhmB,EAAOn/F,GAAG6Q,MAAQ,WACZi0G,KAILA,IAAa,EACbG,OAGD9lB,EAAOn/F,GAAGy1G,KAAO,WAChBqP,GAAa,MAGd3lB,EAAOn/F,GAAGinH,OAAS,CAClBa,KAAM,IACNC,KAAM,IAGNjQ,SAAU,KAMX3Y,EAAOzuC,GAAG+xB,MAAQ,SAAU7xE,EAAMpkB,GAIjC,OAHAokB,EAAOuuF,EAAOn/F,IAAKm/F,EAAOn/F,GAAGinH,OAAQr2G,IAAiBA,EACtDpkB,EAAOA,GAAQ,KAER3F,KAAK8pH,MAAOnkH,GAAM,SAAUka,EAAM6uG,GACxC,IAAIyS,EAAU1jI,EAAO+rB,WAAY3J,EAAMkK,GACvC2kG,EAAME,KAAO,WACZnxH,EAAOksB,aAAcw3G,QAMxB,WACC,IAAIphB,EAAQviH,EAASsP,cAAe,SAEnCqzH,EADS3iI,EAASsP,cAAe,UACpBG,YAAazP,EAASsP,cAAe,WAEnDizG,EAAMp6G,KAAO,WAIbiyG,EAAQwpB,QAA0B,KAAhBrhB,EAAM97G,MAIxB2zG,EAAQypB,YAAclB,EAAItxE,UAI1BkxD,EAAQviH,EAASsP,cAAe,UAC1B7I,MAAQ,IACd87G,EAAMp6G,KAAO,QACbiyG,EAAQ0pB,WAA6B,MAAhBvhB,EAAM97G,MApB5B,GAwBA,IAAIs9H,GACH5iB,GAAarG,EAAOwI,KAAKnC,WAE1BrG,EAAOzuC,GAAGzqD,OAAQ,CACjBkG,KAAM,SAAUg0F,EAAMr1G,GACrB,OAAO8oH,EAAQ/sH,KAAMs4G,EAAOhzF,KAAMg0F,EAAMr1G,EAAOE,UAAUL,OAAS,IAGnE09H,WAAY,SAAUloB,GACrB,OAAOt5G,KAAK84G,MAAM,WACjBR,EAAOkpB,WAAYxhI,KAAMs5G,SAK5BhB,EAAOl5F,OAAQ,CACdkG,KAAM,SAAUyzF,EAAMO,EAAMr1G,GAC3B,IAAI2tG,EAAK8c,EACR+S,EAAQ1oB,EAAK7zF,SAGd,GAAe,IAAVu8G,GAAyB,IAAVA,GAAyB,IAAVA,EAKnC,MAAkC,qBAAtB1oB,EAAK7oF,aACTooF,EAAOl0G,KAAM20G,EAAMO,EAAMr1G,IAKlB,IAAVw9H,GAAgBnpB,EAAOwO,SAAU/N,KACrC2V,EAAQpW,EAAOopB,UAAWpoB,EAAKxmG,iBAC5BwlG,EAAOwI,KAAKtkG,MAAMmlH,KAAKl+G,KAAM61F,GAASioB,QAAW70H,SAGtCA,IAAVzI,EACW,OAAVA,OACJq0G,EAAOkpB,WAAYzoB,EAAMO,GAIrBoV,GAAS,QAASA,QACuBhiH,KAA3CklG,EAAM8c,EAAMloH,IAAKuyG,EAAM90G,EAAOq1G,IACzB1H,GAGRmH,EAAKp0F,aAAc20F,EAAMr1G,EAAQ,IAC1BA,GAGHyqH,GAAS,QAASA,GAA+C,QAApC9c,EAAM8c,EAAMpnH,IAAKyxG,EAAMO,IACjD1H,EAMM,OAHdA,EAAM0G,EAAOz5F,KAAKyG,KAAMyzF,EAAMO,SAGT5sG,EAAYklG,IAGlC8vB,UAAW,CACV/7H,KAAM,CACLa,IAAK,SAAUuyG,EAAM90G,GACpB,IAAM2zG,EAAQ0pB,YAAwB,UAAVr9H,GAC3BorB,EAAU0pF,EAAM,SAAY,CAC5B,IAAIpM,EAAMoM,EAAK90G,MAKf,OAJA80G,EAAKp0F,aAAc,OAAQ1gB,GACtB0oG,IACJoM,EAAK90G,MAAQ0oG,GAEP1oG,MAMXu9H,WAAY,SAAUzoB,EAAM90G,GAC3B,IAAIq1G,EACH11G,EAAI,EAIJg+H,EAAY39H,GAASA,EAAMuY,MAAOosG,GAEnC,GAAKgZ,GAA+B,IAAlB7oB,EAAK7zF,SACtB,KAAUo0F,EAAOsoB,EAAWh+H,MAC3Bm1G,EAAKzmF,gBAAiBgnF,MAO1BioB,GAAW,CACV/6H,IAAK,SAAUuyG,EAAM90G,EAAOq1G,GAQ3B,OAPe,IAAVr1G,EAGJq0G,EAAOkpB,WAAYzoB,EAAMO,GAEzBP,EAAKp0F,aAAc20F,EAAMA,GAEnBA,IAIThB,EAAOQ,KAAMR,EAAOwI,KAAKtkG,MAAMmlH,KAAK56H,OAAOyV,MAAO,SAAU,SAAU6kE,EAAIi4B,GACzE,IAAIuoB,EAASljB,GAAYrF,IAAUhB,EAAOz5F,KAAKyG,KAE/Cq5F,GAAYrF,GAAS,SAAUP,EAAMO,EAAMkB,GAC1C,IAAI5I,EAAK+hB,EACRmO,EAAgBxoB,EAAKxmG,cAYtB,OAVM0nG,IAGLmZ,EAAShV,GAAYmjB,GACrBnjB,GAAYmjB,GAAkBlwB,EAC9BA,EAAqC,MAA/BiwB,EAAQ9oB,EAAMO,EAAMkB,GACzBsnB,EACA,KACDnjB,GAAYmjB,GAAkBnO,GAExB/hB,MAOT,IAAImwB,GAAa,sCAChBC,GAAa,gBAyIb,SAASC,GAAkBh+H,GAE1B,OADaA,EAAMuY,MAAOosG,IAAmB,IAC/Bl1G,KAAM,KAItB,SAASwuH,GAAUnpB,GAClB,OAAOA,EAAK7oF,cAAgB6oF,EAAK7oF,aAAc,UAAa,GAG7D,SAASiyG,GAAgBl+H,GACxB,OAAKwQ,MAAMuX,QAAS/nB,GACZA,EAEc,kBAAVA,GACJA,EAAMuY,MAAOosG,IAEd,GAxJRtQ,EAAOzuC,GAAGzqD,OAAQ,CACjBhb,KAAM,SAAUk1G,EAAMr1G,GACrB,OAAO8oH,EAAQ/sH,KAAMs4G,EAAOl0G,KAAMk1G,EAAMr1G,EAAOE,UAAUL,OAAS,IAGnEs+H,WAAY,SAAU9oB,GACrB,OAAOt5G,KAAK84G,MAAM,kBACV94G,KAAMs4G,EAAO+pB,QAAS/oB,IAAUA,SAK1ChB,EAAOl5F,OAAQ,CACdhb,KAAM,SAAU20G,EAAMO,EAAMr1G,GAC3B,IAAI2tG,EAAK8c,EACR+S,EAAQ1oB,EAAK7zF,SAGd,GAAe,IAAVu8G,GAAyB,IAAVA,GAAyB,IAAVA,EAWnC,OAPe,IAAVA,GAAgBnpB,EAAOwO,SAAU/N,KAGrCO,EAAOhB,EAAO+pB,QAAS/oB,IAAUA,EACjCoV,EAAQpW,EAAOolB,UAAWpkB,SAGZ5sG,IAAVzI,EACCyqH,GAAS,QAASA,QACuBhiH,KAA3CklG,EAAM8c,EAAMloH,IAAKuyG,EAAM90G,EAAOq1G,IACzB1H,EAGCmH,EAAMO,GAASr1G,EAGpByqH,GAAS,QAASA,GAA+C,QAApC9c,EAAM8c,EAAMpnH,IAAKyxG,EAAMO,IACjD1H,EAGDmH,EAAMO,IAGdokB,UAAW,CACVta,SAAU,CACT97G,IAAK,SAAUyxG,GAOd,IAAIupB,EAAWhqB,EAAOz5F,KAAKyG,KAAMyzF,EAAM,YAEvC,OAAKupB,EACGj7G,SAAUi7G,EAAU,IAI3BP,GAAWt+G,KAAMs1F,EAAK1pF,WACtB2yG,GAAWv+G,KAAMs1F,EAAK1pF,WACtB0pF,EAAKoK,KAEE,GAGA,KAKXkf,QAAS,CACR,IAAO,UACP,MAAS,eAYLzqB,EAAQypB,cACb/oB,EAAOolB,UAAU7uE,SAAW,CAC3BvnD,IAAK,SAAUyxG,GAId,IAAIn4F,EAASm4F,EAAK5rG,WAIlB,OAHKyT,GAAUA,EAAOzT,YACrByT,EAAOzT,WAAWk2G,cAEZ,MAER78G,IAAK,SAAUuyG,GAId,IAAIn4F,EAASm4F,EAAK5rG,WACbyT,IACJA,EAAOyiG,cAEFziG,EAAOzT,YACXyT,EAAOzT,WAAWk2G,kBAOvB/K,EAAOQ,KAAM,CACZ,WACA,WACA,YACA,cACA,cACA,UACA,UACA,SACA,cACA,oBACE,WACFR,EAAO+pB,QAASriI,KAAK8S,eAAkB9S,QA4BxCs4G,EAAOzuC,GAAGzqD,OAAQ,CACjBiH,SAAU,SAAUpiB,GACnB,IAAIs+H,EAASxpB,EAAM8F,EAAK2jB,EAAUC,EAAOzpH,EAAGm8B,EAC3CvxC,EAAI,EAEL,GAAKi0G,EAAY5zG,GAChB,OAAOjE,KAAK84G,MAAM,SAAU9/F,GAC3Bs/F,EAAQt4G,MAAOqmB,SAAUpiB,EAAMF,KAAM/D,KAAMgZ,EAAGkpH,GAAUliI,WAM1D,IAFAuiI,EAAUJ,GAAgBl+H,IAEbH,OACZ,KAAUi1G,EAAO/4G,KAAM4D,MAItB,GAHA4+H,EAAWN,GAAUnpB,GACrB8F,EAAwB,IAAlB9F,EAAK7zF,UAAoB,IAAM+8G,GAAkBO,GAAa,IAEzD,CAEV,IADAxpH,EAAI,EACMypH,EAAQF,EAASvpH,MACrB6lG,EAAIz7G,QAAS,IAAMq/H,EAAQ,KAAQ,IACvC5jB,GAAO4jB,EAAQ,KAMZD,KADLrtF,EAAa8sF,GAAkBpjB,KAE9B9F,EAAKp0F,aAAc,QAASwwB,GAMhC,OAAOn1C,MAGR0iI,YAAa,SAAUz+H,GACtB,IAAIs+H,EAASxpB,EAAM8F,EAAK2jB,EAAUC,EAAOzpH,EAAGm8B,EAC3CvxC,EAAI,EAEL,GAAKi0G,EAAY5zG,GAChB,OAAOjE,KAAK84G,MAAM,SAAU9/F,GAC3Bs/F,EAAQt4G,MAAO0iI,YAAaz+H,EAAMF,KAAM/D,KAAMgZ,EAAGkpH,GAAUliI,WAI7D,IAAMmE,UAAUL,OACf,OAAO9D,KAAKslB,KAAM,QAAS,IAK5B,IAFAi9G,EAAUJ,GAAgBl+H,IAEbH,OACZ,KAAUi1G,EAAO/4G,KAAM4D,MAMtB,GALA4+H,EAAWN,GAAUnpB,GAGrB8F,EAAwB,IAAlB9F,EAAK7zF,UAAoB,IAAM+8G,GAAkBO,GAAa,IAEzD,CAEV,IADAxpH,EAAI,EACMypH,EAAQF,EAASvpH,MAG1B,KAAQ6lG,EAAIz7G,QAAS,IAAMq/H,EAAQ,MAAS,GAC3C5jB,EAAMA,EAAI9+F,QAAS,IAAM0iH,EAAQ,IAAK,KAMnCD,KADLrtF,EAAa8sF,GAAkBpjB,KAE9B9F,EAAKp0F,aAAc,QAASwwB,GAMhC,OAAOn1C,MAGR2iI,YAAa,SAAU1+H,EAAO2+H,GAC7B,IAAIj9H,SAAc1B,EACjB4+H,EAAwB,WAATl9H,GAAqB8O,MAAMuX,QAAS/nB,GAEpD,MAAyB,mBAAb2+H,GAA0BC,EAC9BD,EAAW5iI,KAAKqmB,SAAUpiB,GAAUjE,KAAK0iI,YAAaz+H,GAGzD4zG,EAAY5zG,GACTjE,KAAK84G,MAAM,SAAUl1G,GAC3B00G,EAAQt4G,MAAO2iI,YACd1+H,EAAMF,KAAM/D,KAAM4D,EAAGs+H,GAAUliI,MAAQ4iI,GACvCA,MAKI5iI,KAAK84G,MAAM,WACjB,IAAIr0F,EAAW7gB,EAAGquD,EAAMhiC,EAExB,GAAK4yG,EAOJ,IAJAj/H,EAAI,EACJquD,EAAOqmD,EAAQt4G,MACfiwB,EAAakyG,GAAgBl+H,GAEnBwgB,EAAYwL,EAAYrsB,MAG5BquD,EAAK6wE,SAAUr+G,GACnBwtC,EAAKywE,YAAaj+G,GAElBwtC,EAAK5rC,SAAU5B,aAKI/X,IAAVzI,GAAgC,YAAT0B,KAClC8e,EAAYy9G,GAAUliI,QAIrB+tH,EAASvnH,IAAKxG,KAAM,gBAAiBykB,GAOjCzkB,KAAK2kB,cACT3kB,KAAK2kB,aAAc,QAClBF,IAAuB,IAAVxgB,EACZ,GACA8pH,EAASzmH,IAAKtH,KAAM,kBAAqB,SAO/C8iI,SAAU,SAAUhzG,GACnB,IAAIrL,EAAWs0F,EACdn1G,EAAI,EAGL,IADA6gB,EAAY,IAAMqL,EAAW,IACnBipF,EAAO/4G,KAAM4D,MACtB,GAAuB,IAAlBm1G,EAAK7zF,WACP,IAAM+8G,GAAkBC,GAAUnpB,IAAW,KAAM31G,QAASqhB,IAAe,EAC7E,OAAO,EAIT,OAAO,KAOT,IAAIs+G,GAAU,MAEdzqB,EAAOzuC,GAAGzqD,OAAQ,CACjButF,IAAK,SAAU1oG,GACd,IAAIyqH,EAAO9c,EAAKqmB,EACflf,EAAO/4G,KAAM,GAEd,OAAMmE,UAAUL,QA0BhBm0H,EAAkBpgB,EAAY5zG,GAEvBjE,KAAK84G,MAAM,SAAUl1G,GAC3B,IAAI+oG,EAEmB,IAAlB3sG,KAAKklB,WAWE,OANXynF,EADIsrB,EACEh0H,EAAMF,KAAM/D,KAAM4D,EAAG00G,EAAQt4G,MAAO2sG,OAEpC1oG,GAKN0oG,EAAM,GAEoB,kBAARA,EAClBA,GAAO,GAEIl4F,MAAMuX,QAAS2gF,KAC1BA,EAAM2L,EAAO9kG,IAAKm5F,GAAK,SAAU1oG,GAChC,OAAgB,MAATA,EAAgB,GAAKA,EAAQ,QAItCyqH,EAAQpW,EAAO0qB,SAAUhjI,KAAK2F,OAAU2yG,EAAO0qB,SAAUhjI,KAAKqvB,SAASvc,iBAGrD,QAAS47G,QAA+ChiH,IAApCgiH,EAAMloH,IAAKxG,KAAM2sG,EAAK,WAC3D3sG,KAAKiE,MAAQ0oG,QAzDToM,GACJ2V,EAAQpW,EAAO0qB,SAAUjqB,EAAKpzG,OAC7B2yG,EAAO0qB,SAAUjqB,EAAK1pF,SAASvc,iBAG/B,QAAS47G,QACgChiH,KAAvCklG,EAAM8c,EAAMpnH,IAAKyxG,EAAM,UAElBnH,EAMY,kBAHpBA,EAAMmH,EAAK90G,OAIH2tG,EAAI7xF,QAASgjH,GAAS,IAIhB,MAAPnxB,EAAc,GAAKA,OAG3B,KAyCH0G,EAAOl5F,OAAQ,CACd4jH,SAAU,CACTtvF,OAAQ,CACPpsC,IAAK,SAAUyxG,GAEd,IAAIpM,EAAM2L,EAAOz5F,KAAKyG,KAAMyzF,EAAM,SAClC,OAAc,MAAPpM,EACNA,EAMAs1B,GAAkB3pB,EAAOhsB,KAAMysB,MAGlC4B,OAAQ,CACPrzG,IAAK,SAAUyxG,GACd,IAAI90G,EAAOyvC,EAAQ9vC,EAClBF,EAAUq1G,EAAKr1G,QACfsB,EAAQ+zG,EAAKsK,cACboP,EAAoB,eAAd1Z,EAAKpzG,KACX0qH,EAASoC,EAAM,KAAO,GACtBlqH,EAAMkqH,EAAMztH,EAAQ,EAAItB,EAAQI,OAUjC,IAPCF,EADIoB,EAAQ,EACRuD,EAGAkqH,EAAMztH,EAAQ,EAIXpB,EAAI2E,EAAK3E,IAKhB,KAJA8vC,EAAShwC,EAASE,IAIJirD,UAAYjrD,IAAMoB,KAG7B0uC,EAAOgqE,YACLhqE,EAAOvmC,WAAWuwG,WACnBruF,EAAUqkB,EAAOvmC,WAAY,aAAiB,CAMjD,GAHAlJ,EAAQq0G,EAAQ5kE,GAASi5D,MAGpB8lB,EACJ,OAAOxuH,EAIRosH,EAAOhsH,KAAMJ,GAIf,OAAOosH,GAGR7pH,IAAK,SAAUuyG,EAAM90G,GAMpB,IALA,IAAIg/H,EAAWvvF,EACdhwC,EAAUq1G,EAAKr1G,QACf2sH,EAAS/X,EAAOyB,UAAW91G,GAC3BL,EAAIF,EAAQI,OAELF,OACP8vC,EAAShwC,EAASE,IAINirD,SACXypD,EAAO0B,QAAS1B,EAAO0qB,SAAStvF,OAAOpsC,IAAKosC,GAAU28E,IAAY,KAElE4S,GAAY,GAUd,OAHMA,IACLlqB,EAAKsK,eAAiB,GAEhBgN,OAOX/X,EAAOQ,KAAM,CAAE,QAAS,aAAc,WACrCR,EAAO0qB,SAAUhjI,MAAS,CACzBwG,IAAK,SAAUuyG,EAAM90G,GACpB,GAAKwQ,MAAMuX,QAAS/nB,GACnB,OAAS80G,EAAKrM,QAAU4L,EAAO0B,QAAS1B,EAAQS,GAAOpM,MAAO1oG,IAAW,IAItE2zG,EAAQwpB,UACb9oB,EAAO0qB,SAAUhjI,MAAOsH,IAAM,SAAUyxG,GACvC,OAAwC,OAAjCA,EAAK7oF,aAAc,SAAqB,KAAO6oF,EAAK90G,WAW9D2zG,EAAQsrB,QAAU,cAAezlI,EAGjC,IAAI0lI,GAAc,kCACjBC,GAA0B,SAAUt5F,GACnCA,EAAE+oB,mBAGJylD,EAAOl5F,OAAQk5F,EAAOl2F,MAAO,CAE5B4wG,QAAS,SAAU5wG,EAAOjQ,EAAM4mG,EAAMsqB,GAErC,IAAIz/H,EAAGi7G,EAAKjJ,EAAK0tB,EAAYC,EAAQ5P,EAAQrI,EAASkY,EACrDC,EAAY,CAAE1qB,GAAQv7G,GACtBmI,EAAO8xG,EAAO1zG,KAAMqe,EAAO,QAAWA,EAAMzc,KAAOyc,EACnDmxG,EAAa9b,EAAO1zG,KAAMqe,EAAO,aAAgBA,EAAM9W,UAAUU,MAAO,KAAQ,GAKjF,GAHA6yG,EAAM2kB,EAAc5tB,EAAMmD,EAAOA,GAAQv7G,EAGlB,IAAlBu7G,EAAK7zF,UAAoC,IAAlB6zF,EAAK7zF,WAK5Bi+G,GAAY1/G,KAAM9d,EAAO2yG,EAAOl2F,MAAMwxG,aAItCjuH,EAAKvC,QAAS,MAAS,IAG3BmwH,EAAa5tH,EAAKqG,MAAO,KACzBrG,EAAO4tH,EAAW9xG,QAClB8xG,EAAWn/E,QAEZmvF,EAAS59H,EAAKvC,QAAS,KAAQ,GAAK,KAAOuC,GAG3Cyc,EAAQA,EAAOk2F,EAAOmB,SACrBr3F,EACA,IAAIk2F,EAAO2a,MAAOttH,EAAuB,kBAAVyc,GAAsBA,IAGhD0wG,UAAYuQ,EAAe,EAAI,EACrCjhH,EAAM9W,UAAYioH,EAAW7/G,KAAM,KACnC0O,EAAMwyG,WAAaxyG,EAAM9W,UACxB,IAAIyR,OAAQ,UAAYw2G,EAAW7/G,KAAM,iBAAoB,WAC7D,KAGD0O,EAAM3K,YAAS/K,EACT0V,EAAMzQ,SACXyQ,EAAMzQ,OAASonG,GAIhB5mG,EAAe,MAARA,EACN,CAAEiQ,GACFk2F,EAAOyB,UAAW5nG,EAAM,CAAEiQ,IAG3BkpG,EAAUhT,EAAOl2F,MAAMkpG,QAAS3lH,IAAU,GACpC09H,IAAgB/X,EAAQ0H,UAAmD,IAAxC1H,EAAQ0H,QAAQtuH,MAAOq0G,EAAM5mG,IAAtE,CAMA,IAAMkxH,IAAiB/X,EAAQgK,WAAaxd,EAAUiB,GAAS,CAM9D,IAJAuqB,EAAahY,EAAQyH,cAAgBptH,EAC/Bw9H,GAAY1/G,KAAM6/G,EAAa39H,KACpCk5G,EAAMA,EAAI1xG,YAEH0xG,EAAKA,EAAMA,EAAI1xG,WACtBs2H,EAAUp/H,KAAMw6G,GAChBjJ,EAAMiJ,EAIFjJ,KAAUmD,EAAKlyF,eAAiBrpB,IACpCimI,EAAUp/H,KAAMuxG,EAAIxwF,aAAewwF,EAAI8tB,cAAgBjmI,GAMzD,IADAmG,EAAI,GACMi7G,EAAM4kB,EAAW7/H,QAAYwe,EAAMsyG,wBAC5C8O,EAAc3kB,EACdz8F,EAAMzc,KAAO/B,EAAI,EAChB0/H,EACAhY,EAAQwI,UAAYnuH,GAGrBguH,GAAW5F,EAASzmH,IAAKu3G,EAAK,WAAchwG,OAAO6kH,OAAQ,OAAUtxG,EAAMzc,OAC1EooH,EAASzmH,IAAKu3G,EAAK,YAEnB8U,EAAOjvH,MAAOm6G,EAAK1sG,IAIpBwhH,EAAS4P,GAAU1kB,EAAK0kB,KACT5P,EAAOjvH,OAASgpH,EAAY7O,KAC1Cz8F,EAAM3K,OAASk8G,EAAOjvH,MAAOm6G,EAAK1sG,IACZ,IAAjBiQ,EAAM3K,QACV2K,EAAMuwC,kBA8CT,OA1CAvwC,EAAMzc,KAAOA,EAGP09H,GAAiBjhH,EAAMqzG,sBAEpBnK,EAAQ2F,WACqC,IAApD3F,EAAQ2F,SAASvsH,MAAO++H,EAAUhxH,MAAON,KACzCu7G,EAAY3U,IAIPwqB,GAAU1rB,EAAYkB,EAAMpzG,MAAamyG,EAAUiB,MAGvDnD,EAAMmD,EAAMwqB,MAGXxqB,EAAMwqB,GAAW,MAIlBjrB,EAAOl2F,MAAMwxG,UAAYjuH,EAEpByc,EAAMsyG,wBACV8O,EAAYxhH,iBAAkBrc,EAAMy9H,IAGrCrqB,EAAMpzG,KAEDyc,EAAMsyG,wBACV8O,EAAYthH,oBAAqBvc,EAAMy9H,IAGxC9qB,EAAOl2F,MAAMwxG,eAAYlnH,EAEpBkpG,IACJmD,EAAMwqB,GAAW3tB,IAMdxzF,EAAM3K,SAKdksH,SAAU,SAAUh+H,EAAMozG,EAAM32F,GAC/B,IAAI0nB,EAAIwuE,EAAOl5F,OACd,IAAIk5F,EAAO2a,MACX7wG,EACA,CACCzc,KAAMA,EACNkwH,aAAa,IAIfvd,EAAOl2F,MAAM4wG,QAASlpF,EAAG,KAAMivE,MAKjCT,EAAOzuC,GAAGzqD,OAAQ,CAEjB4zG,QAAS,SAAUrtH,EAAMwM,GACxB,OAAOnS,KAAK84G,MAAM,WACjBR,EAAOl2F,MAAM4wG,QAASrtH,EAAMwM,EAAMnS,UAGpC4jI,eAAgB,SAAUj+H,EAAMwM,GAC/B,IAAI4mG,EAAO/4G,KAAM,GACjB,GAAK+4G,EACJ,OAAOT,EAAOl2F,MAAM4wG,QAASrtH,EAAMwM,EAAM4mG,GAAM,MAc5CnB,EAAQsrB,SACb5qB,EAAOQ,KAAM,CAAEvmD,MAAO,UAAWnc,KAAM,aAAc,SAAU4gF,EAAMzC,GAGpE,IAAItxH,EAAU,SAAUmf,GACvBk2F,EAAOl2F,MAAMuhH,SAAUpP,EAAKnyG,EAAMzQ,OAAQ2mG,EAAOl2F,MAAMmyG,IAAKnyG,KAG7Dk2F,EAAOl2F,MAAMkpG,QAASiJ,GAAQ,CAC7BP,MAAO,WAIN,IAAIptG,EAAM5mB,KAAK6mB,eAAiB7mB,KAAKxC,UAAYwC,KAChD6jI,EAAW9V,EAAShB,OAAQnmG,EAAK2tG,GAE5BsP,GACLj9G,EAAI5E,iBAAkBg1G,EAAM/zH,GAAS,GAEtC8qH,EAAShB,OAAQnmG,EAAK2tG,GAAOsP,GAAY,GAAM,IAEhD1P,SAAU,WACT,IAAIvtG,EAAM5mB,KAAK6mB,eAAiB7mB,KAAKxC,UAAYwC,KAChD6jI,EAAW9V,EAAShB,OAAQnmG,EAAK2tG,GAAQ,EAEpCsP,EAKL9V,EAAShB,OAAQnmG,EAAK2tG,EAAKsP,IAJ3Bj9G,EAAI1E,oBAAqB80G,EAAM/zH,GAAS,GACxC8qH,EAAS3oH,OAAQwhB,EAAK2tG,SAS3B,IAAIvR,GAAWvlH,EAAOulH,SAElBhL,GAAQ,CAAEoC,KAAMnwF,KAAKgtD,OAErB6sD,GAAW,KAKfxrB,EAAOyrB,SAAW,SAAU5xH,GAC3B,IAAIykB,EAAKotG,EACT,IAAM7xH,GAAwB,kBAATA,EACpB,OAAO,KAKR,IACCykB,GAAQ,IAAIn5B,EAAOgB,WAAcy4B,gBAAiB/kB,EAAM,YACvD,MAAQ23B,IAYV,OAVAk6F,EAAkBptG,GAAOA,EAAIpH,qBAAsB,eAAiB,GAC9DoH,IAAOotG,GACZ1rB,EAAOzqG,MAAO,iBACbm2H,EACC1rB,EAAO9kG,IAAKwwH,EAAgB5/G,YAAY,SAAUI,GACjD,OAAOA,EAAG+R,eACP7iB,KAAM,MACVvB,IAGIykB,GAIR,IACCqtG,GAAW,QACXC,GAAQ,SACRC,GAAkB,wCAClBC,GAAe,qCAEhB,SAASC,GAAaz9D,EAAQ1/D,EAAKo9H,EAAa7/H,GAC/C,IAAI60G,EAEJ,GAAK7kG,MAAMuX,QAAS9kB,GAGnBoxG,EAAOQ,KAAM5xG,GAAK,SAAUtD,EAAGsF,GACzBo7H,GAAeL,GAASxgH,KAAMmjD,GAGlCniE,EAAKmiE,EAAQ19D,GAKbm7H,GACCz9D,EAAS,KAAqB,kBAAN19D,GAAuB,MAALA,EAAYtF,EAAI,IAAO,IACjEsF,EACAo7H,EACA7/H,WAKG,GAAM6/H,GAAiC,WAAlBjsB,EAAQnxG,GAUnCzC,EAAKmiE,EAAQ1/D,QAPb,IAAMoyG,KAAQpyG,EACbm9H,GAAaz9D,EAAS,IAAM0yC,EAAO,IAAKpyG,EAAKoyG,GAAQgrB,EAAa7/H,GAYrE6zG,EAAO7vF,MAAQ,SAAUle,EAAG+5H,GAC3B,IAAI19D,EACH9xD,EAAI,GACJrQ,EAAM,SAAU2C,EAAKm9H,GAGpB,IAAItgI,EAAQ4zG,EAAY0sB,GACvBA,IACAA,EAEDzvH,EAAGA,EAAEhR,QAAW0gI,mBAAoBp9H,GAAQ,IAC3Co9H,mBAA6B,MAATvgI,EAAgB,GAAKA,IAG5C,GAAU,MAALsG,EACJ,MAAO,GAIR,GAAKkK,MAAMuX,QAASzhB,IAASA,EAAEkuG,SAAWH,EAAOkB,cAAejvG,GAG/D+tG,EAAOQ,KAAMvuG,GAAG,WACf9F,EAAKzE,KAAKs5G,KAAMt5G,KAAKiE,eAOtB,IAAM2iE,KAAUr8D,EACf85H,GAAaz9D,EAAQr8D,EAAGq8D,GAAU09D,EAAa7/H,GAKjD,OAAOqQ,EAAEpB,KAAM,MAGhB4kG,EAAOzuC,GAAGzqD,OAAQ,CACjBqlH,UAAW,WACV,OAAOnsB,EAAO7vF,MAAOzoB,KAAK0kI,mBAE3BA,eAAgB,WACf,OAAO1kI,KAAKwT,KAAK,WAGhB,IAAInF,EAAWiqG,EAAOl0G,KAAMpE,KAAM,YAClC,OAAOqO,EAAWiqG,EAAOyB,UAAW1rG,GAAarO,QAC9CgE,QAAQ,WACX,IAAI2B,EAAO3F,KAAK2F,KAGhB,OAAO3F,KAAKs5G,OAAShB,EAAQt4G,MAAOknH,GAAI,cACvCkd,GAAa3gH,KAAMzjB,KAAKqvB,YAAe80G,GAAgB1gH,KAAM9d,KAC3D3F,KAAK0sG,UAAY6jB,GAAe9sG,KAAM9d,OACtC6N,KAAK,SAAU6tE,EAAI03B,GACtB,IAAIpM,EAAM2L,EAAQt4G,MAAO2sG,MAEzB,OAAY,MAAPA,EACG,KAGHl4F,MAAMuX,QAAS2gF,GACZ2L,EAAO9kG,IAAKm5F,GAAK,SAAUA,GACjC,MAAO,CAAE2M,KAAMP,EAAKO,KAAMr1G,MAAO0oG,EAAI5sF,QAASmkH,GAAO,YAIhD,CAAE5qB,KAAMP,EAAKO,KAAMr1G,MAAO0oG,EAAI5sF,QAASmkH,GAAO,YAClD58H,SAKN,IACCq9H,GAAM,OACNC,GAAQ,OACRC,GAAa,gBACbC,GAAW,6BAIXC,GAAa,iBACbC,GAAY,QAWZjG,GAAa,GAObkG,GAAa,GAGbC,GAAW,KAAKt/H,OAAQ,KAGxBu/H,GAAe3nI,EAASsP,cAAe,KAKxC,SAASs4H,GAA6BC,GAGrC,OAAO,SAAUC,EAAoBhb,GAED,kBAAvBgb,IACXhb,EAAOgb,EACPA,EAAqB,KAGtB,IAAIC,EACH3hI,EAAI,EACJ4hI,EAAYF,EAAmBxyH,cAAc0J,MAAOosG,IAAmB,GAExE,GAAK/Q,EAAYyS,GAGhB,KAAUib,EAAWC,EAAW5hI,MAGR,MAAlB2hI,EAAU,IACdA,EAAWA,EAAS55H,MAAO,IAAO,KAChC05H,EAAWE,GAAaF,EAAWE,IAAc,IAAK7mH,QAAS4rG,KAI/D+a,EAAWE,GAAaF,EAAWE,IAAc,IAAKlhI,KAAMimH,IAQnE,SAASmb,GAA+BJ,EAAW3hI,EAASw7H,EAAiBwG,GAE5E,IAAIC,EAAY,GACfC,EAAqBP,IAAcJ,GAEpC,SAAS7zB,EAASm0B,GACjB,IAAI12E,EAcJ,OAbA82E,EAAWJ,IAAa,EACxBjtB,EAAOQ,KAAMusB,EAAWE,IAAc,IAAI,SAAUhc,EAAGsc,GACtD,IAAIC,EAAsBD,EAAoBniI,EAASw7H,EAAiBwG,GACxE,MAAoC,kBAAxBI,GACVF,GAAqBD,EAAWG,GAKtBF,IACD/2E,EAAWi3E,QADf,GAHNpiI,EAAQ8hI,UAAU9mH,QAASonH,GAC3B10B,EAAS00B,IACF,MAKFj3E,EAGR,OAAOuiD,EAAS1tG,EAAQ8hI,UAAW,MAAUG,EAAW,MAASv0B,EAAS,KAM3E,SAAS20B,GAAYp0H,EAAQlF,GAC5B,IAAIrF,EAAKiY,EACR2mH,EAAc1tB,EAAO2tB,aAAaD,aAAe,GAElD,IAAM5+H,KAAOqF,OACQC,IAAfD,EAAKrF,MACP4+H,EAAa5+H,GAAQuK,EAAW0N,IAAUA,EAAO,KAAUjY,GAAQqF,EAAKrF,IAO5E,OAJKiY,GACJi5F,EAAOl5F,QAAQ,EAAMzN,EAAQ0N,GAGvB1N,EA/ERwzH,GAAahiB,KAAOH,GAASG,KAgP7B7K,EAAOl5F,OAAQ,CAGdivC,OAAQ,EAGR63E,aAAc,GACdC,KAAM,GAENF,aAAc,CACb/5H,IAAK82G,GAASG,KACdx9G,KAAM,MACNygI,QAxRgB,4DAwRQ3iH,KAAMu/F,GAASqjB,UACvC9+H,QAAQ,EACR++H,aAAa,EACbC,OAAO,EACPC,YAAa,mDAcbC,QAAS,CACR,IAAKvB,GACL54C,KAAM,aACN4rC,KAAM,YACNthG,IAAK,4BACL2hC,KAAM,qCAGPwvD,SAAU,CACTnxF,IAAK,UACLshG,KAAM,SACN3/D,KAAM,YAGPmuE,eAAgB,CACf9vG,IAAK,cACL01D,KAAM,eACN/zB,KAAM,gBAKPouE,WAAY,CAGX,SAAU1/E,OAGV,aAAa,EAGb,YAAawR,KAAK3iC,MAGlB,WAAYwiF,EAAOyrB,UAOpBiC,YAAa,CACZ95H,KAAK,EACLzG,SAAS,IAOXmhI,UAAW,SAAUj1H,EAAQk1H,GAC5B,OAAOA,EAGNd,GAAYA,GAAYp0H,EAAQ2mG,EAAO2tB,cAAgBY,GAGvDd,GAAYztB,EAAO2tB,aAAct0H,IAGnCm1H,cAAe1B,GAA6BrG,IAC5CgI,cAAe3B,GAA6BH,IAG5C+B,KAAM,SAAU96H,EAAKxI,GAGA,kBAARwI,IACXxI,EAAUwI,EACVA,OAAMQ,GAMP,IAAIu6H,EAGHC,EAGAC,EACAC,EAGAC,EAGAC,EAGA5a,EAGA6a,EAGA3jI,EAGA4jI,EAGA1yH,EAAIwjG,EAAOsuB,UAAW,GA9BvBljI,EAAUA,GAAW,IAiCpB+jI,EAAkB3yH,EAAErP,SAAWqP,EAG/B4yH,EAAqB5yH,EAAErP,UACpBgiI,EAAgBviH,UAAYuiH,EAAgBhvB,QAC9CH,EAAQmvB,GACRnvB,EAAOl2F,MAGRsoG,EAAWpS,EAAO+R,WAClBsd,EAAmBrvB,EAAOgR,UAAW,eAGrCse,EAAa9yH,EAAE8yH,YAAc,GAG7BC,EAAiB,GACjBC,EAAsB,GAGtBC,EAAW,WAGXrC,EAAQ,CACPl9G,WAAY,EAGZw/G,kBAAmB,SAAU5gI,GAC5B,IAAIoV,EACJ,GAAKkwG,EAAY,CAChB,IAAM0a,EAEL,IADAA,EAAkB,GACR5qH,EAAQsoH,GAAS75H,KAAMk8H,IAChCC,EAAiB5qH,EAAO,GAAI1J,cAAgB,MACzCs0H,EAAiB5qH,EAAO,GAAI1J,cAAgB,MAAS,IACrDlN,OAAQ4W,EAAO,IAGpBA,EAAQ4qH,EAAiBhgI,EAAI0L,cAAgB,KAE9C,OAAgB,MAAT0J,EAAgB,KAAOA,EAAM9I,KAAM,OAI3Cu0H,sBAAuB,WACtB,OAAOvb,EAAYya,EAAwB,MAI5Cv+G,iBAAkB,SAAU0wF,EAAMr1G,GAMjC,OALkB,MAAbyoH,IACJpT,EAAOwuB,EAAqBxuB,EAAKxmG,eAChCg1H,EAAqBxuB,EAAKxmG,gBAAmBwmG,EAC9CuuB,EAAgBvuB,GAASr1G,GAEnBjE,MAIRkoI,iBAAkB,SAAUviI,GAI3B,OAHkB,MAAb+mH,IACJ53G,EAAEqzH,SAAWxiI,GAEP3F,MAIR4nI,WAAY,SAAUp0H,GACrB,IAAImM,EACJ,GAAKnM,EACJ,GAAKk5G,EAGJgZ,EAAMjb,OAAQj3G,EAAKkyH,EAAMjrG,cAIzB,IAAM9a,KAAQnM,EACbo0H,EAAYjoH,GAAS,CAAEioH,EAAYjoH,GAAQnM,EAAKmM,IAInD,OAAO3f,MAIRqqB,MAAO,SAAU+9G,GAChB,IAAIC,EAAYD,GAAcL,EAK9B,OAJKd,GACJA,EAAU58G,MAAOg+G,GAElBhtB,EAAM,EAAGgtB,GACFroI,OAoBV,GAfA0qH,EAASvB,QAASuc,GAKlB5wH,EAAE5I,MAAUA,GAAO4I,EAAE5I,KAAO82G,GAASG,MAAS,IAC5CpjG,QAASilH,GAAWhiB,GAASqjB,SAAW,MAG1CvxH,EAAEnP,KAAOjC,EAAQub,QAAUvb,EAAQiC,MAAQmP,EAAEmK,QAAUnK,EAAEnP,KAGzDmP,EAAE0wH,WAAc1wH,EAAEywH,UAAY,KAAMzyH,cAAc0J,MAAOosG,IAAmB,CAAE,IAGxD,MAAjB9zG,EAAEwzH,YAAsB,CAC5BhB,EAAY9pI,EAASsP,cAAe,KAKpC,IACCw6H,EAAUnkB,KAAOruG,EAAE5I,IAInBo7H,EAAUnkB,KAAOmkB,EAAUnkB,KAC3BruG,EAAEwzH,YAAcnD,GAAakB,SAAW,KAAOlB,GAAalgH,OAC3DqiH,EAAUjB,SAAW,KAAOiB,EAAUriH,KACtC,MAAQ6kB,GAITh1B,EAAEwzH,aAAc,GAalB,GARKxzH,EAAE3C,MAAQ2C,EAAEwxH,aAAiC,kBAAXxxH,EAAE3C,OACxC2C,EAAE3C,KAAOmmG,EAAO7vF,MAAO3T,EAAE3C,KAAM2C,EAAEwvH,cAIlCmB,GAA+B1G,GAAYjqH,EAAGpR,EAASgiI,GAGlDhZ,EACJ,OAAOgZ,EA8ER,IAAM9hI,KAzEN2jI,EAAcjvB,EAAOl2F,OAAStN,EAAEvN,SAGQ,IAApB+wG,EAAOjqD,UAC1BiqD,EAAOl2F,MAAM4wG,QAAS,aAIvBl+G,EAAEnP,KAAOmP,EAAEnP,KAAK+F,cAGhBoJ,EAAEyzH,YAAcxD,GAAWthH,KAAM3O,EAAEnP,MAKnCuhI,EAAWpyH,EAAE5I,IAAI6T,QAAS6kH,GAAO,IAG3B9vH,EAAEyzH,WAwBIzzH,EAAE3C,MAAQ2C,EAAEwxH,aACoD,KAAzExxH,EAAE0xH,aAAe,IAAKpjI,QAAS,uCACjC0R,EAAE3C,KAAO2C,EAAE3C,KAAK4N,QAAS4kH,GAAK,OAvB9B6C,EAAW1yH,EAAE5I,IAAIP,MAAOu7H,EAASpjI,QAG5BgR,EAAE3C,OAAU2C,EAAEwxH,aAAiC,kBAAXxxH,EAAE3C,QAC1C+0H,IAAcpD,GAAOrgH,KAAMyjH,GAAa,IAAM,KAAQpyH,EAAE3C,YAGjD2C,EAAE3C,OAIO,IAAZ2C,EAAE+xD,QACNqgE,EAAWA,EAASnnH,QAAS8kH,GAAY,MACzC2C,GAAa1D,GAAOrgH,KAAMyjH,GAAa,IAAM,KAAQ,KAASlvB,GAAMoC,OACnEotB,GAIF1yH,EAAE5I,IAAMg7H,EAAWM,GASf1yH,EAAE0zH,aACDlwB,EAAO4tB,aAAcgB,IACzBxB,EAAM98G,iBAAkB,oBAAqB0vF,EAAO4tB,aAAcgB,IAE9D5uB,EAAO6tB,KAAMe,IACjBxB,EAAM98G,iBAAkB,gBAAiB0vF,EAAO6tB,KAAMe,MAKnDpyH,EAAE3C,MAAQ2C,EAAEyzH,aAAgC,IAAlBzzH,EAAE0xH,aAAyB9iI,EAAQ8iI,cACjEd,EAAM98G,iBAAkB,eAAgB9T,EAAE0xH,aAI3Cd,EAAM98G,iBACL,SACA9T,EAAE0wH,UAAW,IAAO1wH,EAAE2xH,QAAS3xH,EAAE0wH,UAAW,IAC3C1wH,EAAE2xH,QAAS3xH,EAAE0wH,UAAW,KACA,MAArB1wH,EAAE0wH,UAAW,GAAc,KAAON,GAAW,WAAa,IAC7DpwH,EAAE2xH,QAAS,MAIF3xH,EAAE2zH,QACZ/C,EAAM98G,iBAAkBhlB,EAAGkR,EAAE2zH,QAAS7kI,IAIvC,GAAKkR,EAAE4zH,cAC+C,IAAnD5zH,EAAE4zH,WAAW3kI,KAAM0jI,EAAiB/B,EAAO5wH,IAAiB43G,GAG9D,OAAOgZ,EAAMr7G,QAed,GAXA09G,EAAW,QAGXJ,EAAiBljI,IAAKqQ,EAAEihC,UACxB2vF,EAAMrqB,KAAMvmG,EAAE6zH,SACdjD,EAAMtc,KAAMt0G,EAAEjH,OAGdo5H,EAAYxB,GAA+BR,GAAYnwH,EAAGpR,EAASgiI,GAK5D,CASN,GARAA,EAAMl9G,WAAa,EAGd++G,GACJG,EAAmB1U,QAAS,WAAY,CAAE0S,EAAO5wH,IAI7C43G,EACJ,OAAOgZ,EAIH5wH,EAAEyxH,OAASzxH,EAAEqsH,QAAU,IAC3BkG,EAAe5pI,EAAO+rB,YAAY,WACjCk8G,EAAMr7G,MAAO,aACXvV,EAAEqsH,UAGN,IACCzU,GAAY,EACZua,EAAUp+G,KAAMg/G,EAAgBxsB,GAC/B,MAAQvxE,GAGT,GAAK4iF,EACJ,MAAM5iF,EAIPuxE,GAAO,EAAGvxE,SAhCXuxE,GAAO,EAAG,gBAqCX,SAASA,EAAM5gF,EAAQmuG,EAAkBC,EAAWJ,GACnD,IAAIK,EAAWH,EAAS96H,EAAOk7H,EAAUC,EACxCZ,EAAaQ,EAGTlc,IAILA,GAAY,EAGP2a,GACJ5pI,EAAOksB,aAAc09G,GAKtBJ,OAAYv6H,EAGZy6H,EAAwBsB,GAAW,GAGnC/C,EAAMl9G,WAAaiS,EAAS,EAAI,EAAI,EAGpCquG,EAAYruG,GAAU,KAAOA,EAAS,KAAkB,MAAXA,EAGxCouG,IACJE,EA7lBJ,SAA8Bj0H,EAAG4wH,EAAOmD,GAOvC,IALA,IAAII,EAAItjI,EAAMujI,EAAeC,EAC5BphB,EAAWjzG,EAAEizG,SACbyd,EAAY1wH,EAAE0wH,UAGY,MAAnBA,EAAW,IAClBA,EAAU/jH,aACE/U,IAAPu8H,IACJA,EAAKn0H,EAAEqzH,UAAYzC,EAAMsC,kBAAmB,iBAK9C,GAAKiB,EACJ,IAAMtjI,KAAQoiH,EACb,GAAKA,EAAUpiH,IAAUoiH,EAAUpiH,GAAO8d,KAAMwlH,GAAO,CACtDzD,EAAU9mH,QAAS/Y,GACnB,MAMH,GAAK6/H,EAAW,KAAOqD,EACtBK,EAAgB1D,EAAW,OACrB,CAGN,IAAM7/H,KAAQkjI,EAAY,CACzB,IAAMrD,EAAW,IAAO1wH,EAAE6xH,WAAYhhI,EAAO,IAAM6/H,EAAW,IAAQ,CACrE0D,EAAgBvjI,EAChB,MAEKwjI,IACLA,EAAgBxjI,GAKlBujI,EAAgBA,GAAiBC,EAMlC,GAAKD,EAIJ,OAHKA,IAAkB1D,EAAW,IACjCA,EAAU9mH,QAASwqH,GAEbL,EAAWK,GA0iBLE,CAAqBt0H,EAAG4wH,EAAOmD,KAIrCC,GACLxwB,EAAO0B,QAAS,SAAUllG,EAAE0wH,YAAe,GAC3CltB,EAAO0B,QAAS,OAAQllG,EAAE0wH,WAAc,IACxC1wH,EAAE6xH,WAAY,eAAkB,cAIjCoC,EA9iBH,SAAsBj0H,EAAGi0H,EAAUrD,EAAOoD,GACzC,IAAIO,EAAOhjI,EAASijI,EAAM1zB,EAAK91F,EAC9B6mH,EAAa,GAGbnB,EAAY1wH,EAAE0wH,UAAU75H,QAGzB,GAAK65H,EAAW,GACf,IAAM8D,KAAQx0H,EAAE6xH,WACfA,EAAY2C,EAAKx2H,eAAkBgC,EAAE6xH,WAAY2C,GAOnD,IAHAjjI,EAAUm/H,EAAU/jH,QAGZpb,GAcP,GAZKyO,EAAE4xH,eAAgBrgI,KACtBq/H,EAAO5wH,EAAE4xH,eAAgBrgI,IAAc0iI,IAIlCjpH,GAAQgpH,GAAah0H,EAAEy0H,aAC5BR,EAAWj0H,EAAEy0H,WAAYR,EAAUj0H,EAAEywH,WAGtCzlH,EAAOzZ,EACPA,EAAUm/H,EAAU/jH,QAKnB,GAAiB,MAAZpb,EAEJA,EAAUyZ,OAGJ,GAAc,MAATA,GAAgBA,IAASzZ,EAAU,CAM9C,KAHAijI,EAAO3C,EAAY7mH,EAAO,IAAMzZ,IAAasgI,EAAY,KAAOtgI,IAI/D,IAAMgjI,KAAS1C,EAId,IADA/wB,EAAMyzB,EAAMr9H,MAAO,MACT,KAAQ3F,IAGjBijI,EAAO3C,EAAY7mH,EAAO,IAAM81F,EAAK,KACpC+wB,EAAY,KAAO/wB,EAAK,KACb,EAGG,IAAT0zB,EACJA,EAAO3C,EAAY0C,IAGgB,IAAxB1C,EAAY0C,KACvBhjI,EAAUuvG,EAAK,GACf4vB,EAAU9mH,QAASk3F,EAAK,KAEzB,MAOJ,IAAc,IAAT0zB,EAGJ,GAAKA,GAAQx0H,EAAE00H,OACdT,EAAWO,EAAMP,QAEjB,IACCA,EAAWO,EAAMP,GAChB,MAAQj/F,GACT,MAAO,CACN0gF,MAAO,cACP38G,MAAOy7H,EAAOx/F,EAAI,sBAAwBhqB,EAAO,OAASzZ,IASjE,MAAO,CAAEmkH,MAAO,UAAWr4G,KAAM42H,GAidpBU,CAAa30H,EAAGi0H,EAAUrD,EAAOoD,GAGvCA,GAGCh0H,EAAE0zH,cACNQ,EAAWtD,EAAMsC,kBAAmB,oBAEnC1vB,EAAO4tB,aAAcgB,GAAa8B,IAEnCA,EAAWtD,EAAMsC,kBAAmB,WAEnC1vB,EAAO6tB,KAAMe,GAAa8B,IAKZ,MAAXvuG,GAA6B,SAAX3lB,EAAEnP,KACxByiI,EAAa,YAGS,MAAX3tG,EACX2tG,EAAa,eAIbA,EAAaW,EAASve,MACtBme,EAAUI,EAAS52H,KAEnB22H,IADAj7H,EAAQk7H,EAASl7H,UAMlBA,EAAQu6H,GACH3tG,GAAW2tG,IACfA,EAAa,QACR3tG,EAAS,IACbA,EAAS,KAMZirG,EAAMjrG,OAASA,EACfirG,EAAM0C,YAAeQ,GAAoBR,GAAe,GAGnDU,EACJpe,EAASe,YAAagc,EAAiB,CAAEkB,EAASP,EAAY1C,IAE9Dhb,EAASkB,WAAY6b,EAAiB,CAAE/B,EAAO0C,EAAYv6H,IAI5D63H,EAAMkC,WAAYA,GAClBA,OAAal7H,EAER66H,GACJG,EAAmB1U,QAAS8V,EAAY,cAAgB,YACvD,CAAEpD,EAAO5wH,EAAGg0H,EAAYH,EAAU96H,IAIpC85H,EAAiBvd,SAAUqd,EAAiB,CAAE/B,EAAO0C,IAEhDb,IACJG,EAAmB1U,QAAS,eAAgB,CAAE0S,EAAO5wH,MAG3CwjG,EAAOjqD,QAChBiqD,EAAOl2F,MAAM4wG,QAAS,cAKzB,OAAO0S,GAGRgE,QAAS,SAAUx9H,EAAKiG,EAAM3M,GAC7B,OAAO8yG,EAAOhxG,IAAK4E,EAAKiG,EAAM3M,EAAU,SAGzCmkI,UAAW,SAAUz9H,EAAK1G,GACzB,OAAO8yG,EAAOhxG,IAAK4E,OAAKQ,EAAWlH,EAAU,aAI/C8yG,EAAOQ,KAAM,CAAE,MAAO,SAAU,SAAUz3B,EAAIpiE,GAC7Cq5F,EAAQr5F,GAAW,SAAU/S,EAAKiG,EAAM3M,EAAUG,GAUjD,OAPKkyG,EAAY1lG,KAChBxM,EAAOA,GAAQH,EACfA,EAAW2M,EACXA,OAAOzF,GAID4rG,EAAO0uB,KAAM1uB,EAAOl5F,OAAQ,CAClClT,IAAKA,EACLvG,KAAMsZ,EACNsmH,SAAU5/H,EACVwM,KAAMA,EACNw2H,QAASnjI,GACP8yG,EAAOkB,cAAettG,IAASA,QAIpCosG,EAAOwuB,eAAe,SAAUhyH,GAC/B,IAAIlR,EACJ,IAAMA,KAAKkR,EAAE2zH,QACa,iBAApB7kI,EAAEkP,gBACNgC,EAAE0xH,YAAc1xH,EAAE2zH,QAAS7kI,IAAO,OAMrC00G,EAAO6f,SAAW,SAAUjsH,EAAKxI,EAASkjB,GACzC,OAAO0xF,EAAO0uB,KAAM,CACnB96H,IAAKA,EAGLvG,KAAM,MACN4/H,SAAU,SACV1+D,OAAO,EACP0/D,OAAO,EACPh/H,QAAQ,EAKRo/H,WAAY,CACX,cAAe,cAEhB4C,WAAY,SAAUR,GACrBzwB,EAAOwB,WAAYivB,EAAUrlI,EAASkjB,OAMzC0xF,EAAOzuC,GAAGzqD,OAAQ,CACjBwqH,QAAS,SAAU1R,GAClB,IAAIrG,EAyBJ,OAvBK7xH,KAAM,KACL63G,EAAYqgB,KAChBA,EAAOA,EAAKn0H,KAAM/D,KAAM,KAIzB6xH,EAAOvZ,EAAQ4f,EAAMl4H,KAAM,GAAI6mB,eAAgB+S,GAAI,GAAIpa,OAAO,GAEzDxf,KAAM,GAAImN,YACd0kH,EAAKiH,aAAc94H,KAAM,IAG1B6xH,EAAKr+G,KAAK,WAGT,IAFA,IAAIulG,EAAO/4G,KAEH+4G,EAAK8wB,mBACZ9wB,EAAOA,EAAK8wB,kBAGb,OAAO9wB,KACJ6f,OAAQ54H,OAGNA,MAGR8pI,UAAW,SAAU5R,GACpB,OAAKrgB,EAAYqgB,GACTl4H,KAAK84G,MAAM,SAAUl1G,GAC3B00G,EAAQt4G,MAAO8pI,UAAW5R,EAAKn0H,KAAM/D,KAAM4D,OAItC5D,KAAK84G,MAAM,WACjB,IAAI7mD,EAAOqmD,EAAQt4G,MAClB+nH,EAAW91D,EAAK81D,WAEZA,EAASjkH,OACbikH,EAAS6hB,QAAS1R,GAGlBjmE,EAAK2mE,OAAQV,OAKhBrG,KAAM,SAAUqG,GACf,IAAI6R,EAAiBlyB,EAAYqgB,GAEjC,OAAOl4H,KAAK84G,MAAM,SAAUl1G,GAC3B00G,EAAQt4G,MAAO4pI,QAASG,EAAiB7R,EAAKn0H,KAAM/D,KAAM4D,GAAMs0H,OAIlE8R,OAAQ,SAAUl6G,GAIjB,OAHA9vB,KAAK4gB,OAAQkP,GAAW23F,IAAK,QAAS3O,MAAM,WAC3CR,EAAQt4G,MAAO+4H,YAAa/4H,KAAKokB,eAE3BpkB,QAKTs4G,EAAOwI,KAAK/E,QAAQsiB,OAAS,SAAUtlB,GACtC,OAAQT,EAAOwI,KAAK/E,QAAQhtF,QAASgqF,IAEtCT,EAAOwI,KAAK/E,QAAQhtF,QAAU,SAAUgqF,GACvC,SAAWA,EAAK2hB,aAAe3hB,EAAKyiB,cAAgBziB,EAAK+jB,iBAAiBh5H,SAM3Ew0G,EAAO2tB,aAAa79G,IAAM,WACzB,IACC,OAAO,IAAI3qB,EAAO4qB,eACjB,MAAQyhB,MAGX,IAAImgG,GAAmB,CAGrB7zC,EAAG,IAIH8zC,KAAM,KAEPC,GAAe7xB,EAAO2tB,aAAa79G,MAEpCwvF,EAAQwyB,OAASD,IAAkB,oBAAqBA,GACxDvyB,EAAQovB,KAAOmD,KAAiBA,GAEhC7xB,EAAOyuB,eAAe,SAAUrjI,GAC/B,IAAI8B,EAAU6kI,EAGd,GAAKzyB,EAAQwyB,MAAQD,KAAiBzmI,EAAQ4kI,YAC7C,MAAO,CACNz/G,KAAM,SAAU4/G,EAAS1yF,GACxB,IAAInyC,EACHwkB,EAAM1kB,EAAQ0kB,MAWf,GATAA,EAAIO,KACHjlB,EAAQiC,KACRjC,EAAQwI,IACRxI,EAAQ6iI,MACR7iI,EAAQ4mI,SACR5mI,EAAQggH,UAIJhgH,EAAQ6mI,UACZ,IAAM3mI,KAAKF,EAAQ6mI,UAClBniH,EAAKxkB,GAAMF,EAAQ6mI,UAAW3mI,GAmBhC,IAAMA,KAdDF,EAAQykI,UAAY//G,EAAI8/G,kBAC5B9/G,EAAI8/G,iBAAkBxkI,EAAQykI,UAQzBzkI,EAAQ4kI,aAAgBG,EAAS,sBACtCA,EAAS,oBAAuB,kBAItBA,EACVrgH,EAAIQ,iBAAkBhlB,EAAG6kI,EAAS7kI,IAInC4B,EAAW,SAAUG,GACpB,OAAO,WACDH,IACJA,EAAW6kI,EAAgBjiH,EAAI7b,OAC9B6b,EAAI5b,QAAU4b,EAAIoiH,QAAUpiH,EAAIqiH,UAC/BriH,EAAIG,mBAAqB,KAEb,UAAT5iB,EACJyiB,EAAIiC,QACgB,UAAT1kB,EAKgB,kBAAfyiB,EAAIqS,OACfsb,EAAU,EAAG,SAEbA,EAGC3tB,EAAIqS,OACJrS,EAAIggH,YAINryF,EACCk0F,GAAkB7hH,EAAIqS,SAAYrS,EAAIqS,OACtCrS,EAAIggH,WAK+B,UAAjChgH,EAAIsiH,cAAgB,SACM,kBAArBtiH,EAAIuiH,aACV,CAAEC,OAAQxiH,EAAI2gH,UACd,CAAEz8C,KAAMlkE,EAAIuiH,cACbviH,EAAI6/G,4BAQT7/G,EAAI7b,OAAS/G,IACb6kI,EAAgBjiH,EAAI5b,QAAU4b,EAAIqiH,UAAYjlI,EAAU,cAKnCkH,IAAhB0b,EAAIoiH,QACRpiH,EAAIoiH,QAAUH,EAEdjiH,EAAIG,mBAAqB,WAGA,IAAnBH,EAAII,YAMR/qB,EAAO+rB,YAAY,WACbhkB,GACJ6kI,QAQL7kI,EAAWA,EAAU,SAErB,IAGC4iB,EAAIS,KAAMnlB,EAAQ6kI,YAAc7kI,EAAQyO,MAAQ,MAC/C,MAAQ23B,GAGT,GAAKtkC,EACJ,MAAMskC,IAKTzf,MAAO,WACD7kB,GACJA,SAWL8yG,EAAOwuB,eAAe,SAAUhyH,GAC1BA,EAAEwzH,cACNxzH,EAAEizG,SAAS5P,QAAS,MAKtBG,EAAOsuB,UAAW,CACjBH,QAAS,CACRtuB,OAAQ,6FAGT4P,SAAU,CACT5P,OAAQ,2BAETwuB,WAAY,CACX,cAAe,SAAUr6C,GAExB,OADAgsB,EAAOwB,WAAYxtB,GACZA,MAMVgsB,EAAOwuB,cAAe,UAAU,SAAUhyH,QACxBpI,IAAZoI,EAAE+xD,QACN/xD,EAAE+xD,OAAQ,GAEN/xD,EAAEwzH,cACNxzH,EAAEnP,KAAO,UAKX2yG,EAAOyuB,cAAe,UAAU,SAAUjyH,GAIxC,IAAIqjG,EAAQ3yG,EADb,GAAKsP,EAAEwzH,aAAexzH,EAAE+1H,YAEvB,MAAO,CACNhiH,KAAM,SAAU0gG,EAAGxzE,GAClBoiE,EAASG,EAAQ,YACfhzF,KAAMxQ,EAAE+1H,aAAe,IACvBzmI,KAAM,CAAE0mI,QAASh2H,EAAEi2H,cAAet+H,IAAKqI,EAAE5I,MACzChI,GAAI,aAAcsB,EAAW,SAAU0tD,GACvCilD,EAAO/yG,SACPI,EAAW,KACN0tD,GACJnd,EAAuB,UAAbmd,EAAIvtD,KAAmB,IAAM,IAAKutD,EAAIvtD,QAKnDnI,EAAS46G,KAAKnrG,YAAakrG,EAAQ,KAEpC9tF,MAAO,WACD7kB,GACJA,SAUL,IAAIwlI,GAAe,GAClBC,GAAS,oBAGV3yB,EAAOsuB,UAAW,CACjBsE,MAAO,WACPC,cAAe,WACd,IAAI3lI,EAAWwlI,GAAav4H,OAAW6lG,EAAOmB,QAAU,IAAQzB,GAAMoC,OAEtE,OADAp6G,KAAMwF,IAAa,EACZA,KAKT8yG,EAAOwuB,cAAe,cAAc,SAAUhyH,EAAGs2H,EAAkB1F,GAElE,IAAI2F,EAAcC,EAAaC,EAC9BC,GAAuB,IAAZ12H,EAAEo2H,QAAqBD,GAAOxnH,KAAM3O,EAAE5I,KAChD,MACkB,kBAAX4I,EAAE3C,MAE6C,KADnD2C,EAAE0xH,aAAe,IACjBpjI,QAAS,sCACX6nI,GAAOxnH,KAAM3O,EAAE3C,OAAU,QAI5B,GAAKq5H,GAAiC,UAArB12H,EAAE0wH,UAAW,GA8D7B,OA3DA6F,EAAev2H,EAAEq2H,cAAgBtzB,EAAY/iG,EAAEq2H,eAC9Cr2H,EAAEq2H,gBACFr2H,EAAEq2H,cAGEK,EACJ12H,EAAG02H,GAAa12H,EAAG02H,GAAWzrH,QAASkrH,GAAQ,KAAOI,IAC/B,IAAZv2H,EAAEo2H,QACbp2H,EAAE5I,MAAS43H,GAAOrgH,KAAM3O,EAAE5I,KAAQ,IAAM,KAAQ4I,EAAEo2H,MAAQ,IAAMG,GAIjEv2H,EAAE6xH,WAAY,eAAkB,WAI/B,OAHM4E,GACLjzB,EAAOzqG,MAAOw9H,EAAe,mBAEvBE,EAAmB,IAI3Bz2H,EAAE0wH,UAAW,GAAM,OAGnB8F,EAAc7tI,EAAQ4tI,GACtB5tI,EAAQ4tI,GAAiB,WACxBE,EAAoBpnI,WAIrBuhI,EAAMjb,QAAQ,gBAGQ/9G,IAAhB4+H,EACJhzB,EAAQ76G,GAAS2kI,WAAYiJ,GAI7B5tI,EAAQ4tI,GAAiBC,EAIrBx2H,EAAGu2H,KAGPv2H,EAAEq2H,cAAgBC,EAAiBD,cAGnCH,GAAa3mI,KAAMgnI,IAIfE,GAAqB1zB,EAAYyzB,IACrCA,EAAaC,EAAmB,IAGjCA,EAAoBD,OAAc5+H,KAI5B,YAYTkrG,EAAQ/5G,mBAAuB,WAC9B,IAAIinB,EAAOtnB,EAASI,eAAeC,mBAAoB,IAAKinB,KAE5D,OADAA,EAAKk7F,UAAY,6BACiB,IAA3Bl7F,EAAKV,WAAWtgB,OAHO,GAW/Bw0G,EAAOqP,UAAY,SAAUx1G,EAAM1M,EAASgmI,GAC3C,MAAqB,kBAATt5H,EACJ,IAEgB,mBAAZ1M,IACXgmI,EAAchmI,EACdA,GAAU,GAKLA,IAIAmyG,EAAQ/5G,qBAMZimH,GALAr+G,EAAUjI,EAASI,eAAeC,mBAAoB,KAKvCiP,cAAe,SACzBq2G,KAAO3lH,EAASwlH,SAASG,KAC9B19G,EAAQ2yG,KAAKnrG,YAAa62G,IAE1Br+G,EAAUjI,GAKZm0H,GAAW8Z,GAAe,IAD1BlvH,EAAS+qG,EAAWr8G,KAAMkH,IAKlB,CAAE1M,EAAQqH,cAAeyP,EAAQ,MAGzCA,EAASm1G,GAAe,CAAEv/G,GAAQ1M,EAASksH,GAEtCA,GAAWA,EAAQ7tH,QACvBw0G,EAAQqZ,GAAUvsH,SAGZkzG,EAAOM,MAAO,GAAIr8F,EAAO6H,cAlChC,IAAI0/F,EAAMvnG,EAAQo1G,GAyCnBrZ,EAAOzuC,GAAGwrD,KAAO,SAAUnpH,EAAKw/H,EAAQlmI,GACvC,IAAIsqB,EAAUnqB,EAAMojI,EACnB92E,EAAOjyD,KACPsE,EAAM4H,EAAI9I,QAAS,KAsDpB,OApDKkB,GAAO,IACXwrB,EAAWmyG,GAAkB/1H,EAAIP,MAAOrH,IACxC4H,EAAMA,EAAIP,MAAO,EAAGrH,IAIhBuzG,EAAY6zB,IAGhBlmI,EAAWkmI,EACXA,OAASh/H,GAGEg/H,GAA4B,kBAAXA,IAC5B/lI,EAAO,QAIHssD,EAAKnuD,OAAS,GAClBw0G,EAAO0uB,KAAM,CACZ96H,IAAKA,EAKLvG,KAAMA,GAAQ,MACd4/H,SAAU,OACVpzH,KAAMu5H,IACHrwB,MAAM,SAAUsvB,GAGnB5B,EAAW5kI,UAEX8tD,EAAKimE,KAAMpoG,EAIVwoF,EAAQ,SAAUsgB,OAAQtgB,EAAOqP,UAAWgjB,IAAiB9rH,KAAMiR,GAGnE66G,MAKElgB,OAAQjlH,GAAY,SAAUkgI,EAAOjrG,GACxCw3B,EAAK6mD,MAAM,WACVtzG,EAASd,MAAO1E,KAAM+oI,GAAY,CAAErD,EAAMiF,aAAclwG,EAAQirG,SAK5D1lI,MAMRs4G,EAAOwI,KAAK/E,QAAQ4vB,SAAW,SAAU5yB,GACxC,OAAOT,EAAOa,KAAMb,EAAOmoB,QAAQ,SAAU52D,GAC5C,OAAOkvC,IAASlvC,EAAGkvC,QAChBj1G,QAMLw0G,EAAOvxF,OAAS,CACf6kH,UAAW,SAAU7yB,EAAMr1G,EAASE,GACnC,IAAIioI,EAAaC,EAASC,EAAWC,EAAQC,EAAWC,EACvDl/H,EAAWsrG,EAAOkX,IAAKzW,EAAM,YAC7BozB,EAAU7zB,EAAQS,GAClB5vC,EAAQ,GAGS,WAAbn8D,IACJ+rG,EAAKhsG,MAAMC,SAAW,YAGvBi/H,EAAYE,EAAQplH,SACpBglH,EAAYzzB,EAAOkX,IAAKzW,EAAM,OAC9BmzB,EAAa5zB,EAAOkX,IAAKzW,EAAM,SACI,aAAb/rG,GAAwC,UAAbA,KAC9C++H,EAAYG,GAAa9oI,QAAS,SAAY,GAMhD4oI,GADAH,EAAcM,EAAQn/H,YACD3C,IACrByhI,EAAUD,EAAYzhI,OAGtB4hI,EAASphI,WAAYmhI,IAAe,EACpCD,EAAUlhI,WAAYshI,IAAgB,GAGlCr0B,EAAYn0G,KAGhBA,EAAUA,EAAQK,KAAMg1G,EAAMn1G,EAAG00G,EAAOl5F,OAAQ,GAAI6sH,KAGjC,MAAfvoI,EAAQ2G,MACZ8+D,EAAM9+D,IAAQ3G,EAAQ2G,IAAM4hI,EAAU5hI,IAAQ2hI,GAE1B,MAAhBtoI,EAAQ0G,OACZ++D,EAAM/+D,KAAS1G,EAAQ0G,KAAO6hI,EAAU7hI,KAAS0hI,GAG7C,UAAWpoI,EACfA,EAAQ0oI,MAAMroI,KAAMg1G,EAAM5vC,GAG1BgjE,EAAQ3c,IAAKrmD,KAKhBmvC,EAAOzuC,GAAGzqD,OAAQ,CAGjB2H,OAAQ,SAAUrjB,GAGjB,GAAKS,UAAUL,OACd,YAAmB4I,IAAZhJ,EACN1D,KACAA,KAAK84G,MAAM,SAAUl1G,GACpB00G,EAAOvxF,OAAO6kH,UAAW5rI,KAAM0D,EAASE,MAI3C,IAAIyiD,EAAMgmF,EACTtzB,EAAO/4G,KAAM,GAEd,OAAM+4G,EAQAA,EAAK+jB,iBAAiBh5H,QAK5BuiD,EAAO0yD,EAAKzxF,wBACZ+kH,EAAMtzB,EAAKlyF,cAAczB,YAClB,CACN/a,IAAKg8C,EAAKh8C,IAAMgiI,EAAIC,YACpBliI,KAAMi8C,EAAKj8C,KAAOiiI,EAAIE,cARf,CAAEliI,IAAK,EAAGD,KAAM,QATxB,GAuBD4C,SAAU,WACT,GAAMhN,KAAM,GAAZ,CAIA,IAAIwsI,EAAczlH,EAAQH,EACzBmyF,EAAO/4G,KAAM,GACbysI,EAAe,CAAEpiI,IAAK,EAAGD,KAAM,GAGhC,GAAwC,UAAnCkuG,EAAOkX,IAAKzW,EAAM,YAGtBhyF,EAASgyF,EAAKzxF,4BAER,CAON,IANAP,EAAS/mB,KAAK+mB,SAIdH,EAAMmyF,EAAKlyF,cACX2lH,EAAezzB,EAAKyzB,cAAgB5lH,EAAI/B,gBAChC2nH,IACLA,IAAiB5lH,EAAI9B,MAAQ0nH,IAAiB5lH,EAAI/B,kBACT,WAA3CyzF,EAAOkX,IAAKgd,EAAc,aAE1BA,EAAeA,EAAar/H,WAExBq/H,GAAgBA,IAAiBzzB,GAAkC,IAA1ByzB,EAAatnH,YAG1DunH,EAAen0B,EAAQk0B,GAAezlH,UACzB1c,KAAOiuG,EAAOkX,IAAKgd,EAAc,kBAAkB,GAChEC,EAAariI,MAAQkuG,EAAOkX,IAAKgd,EAAc,mBAAmB,IAKpE,MAAO,CACNniI,IAAK0c,EAAO1c,IAAMoiI,EAAapiI,IAAMiuG,EAAOkX,IAAKzW,EAAM,aAAa,GACpE3uG,KAAM2c,EAAO3c,KAAOqiI,EAAariI,KAAOkuG,EAAOkX,IAAKzW,EAAM,cAAc,MAc1EyzB,aAAc,WACb,OAAOxsI,KAAKwT,KAAK,WAGhB,IAFA,IAAIg5H,EAAexsI,KAAKwsI,aAEhBA,GAA2D,WAA3Cl0B,EAAOkX,IAAKgd,EAAc,aACjDA,EAAeA,EAAaA,aAG7B,OAAOA,GAAgB3nH,SAM1ByzF,EAAOQ,KAAM,CAAE/zF,WAAY,cAAeC,UAAW,gBAAiB,SAAU/F,EAAQ7a,GACvF,IAAIiG,EAAM,gBAAkBjG,EAE5Bk0G,EAAOzuC,GAAI5qD,GAAW,SAAU0tF,GAC/B,OAAOogB,EAAQ/sH,MAAM,SAAU+4G,EAAM95F,EAAQ0tF,GAG5C,IAAI0/B,EAOJ,GANKv0B,EAAUiB,GACdszB,EAAMtzB,EACuB,IAAlBA,EAAK7zF,WAChBmnH,EAAMtzB,EAAK3zF,kBAGC1Y,IAARigG,EACJ,OAAO0/B,EAAMA,EAAKjoI,GAAS20G,EAAM95F,GAG7BotH,EACJA,EAAIK,SACFriI,EAAYgiI,EAAIE,YAAV5/B,EACPtiG,EAAMsiG,EAAM0/B,EAAIC,aAIjBvzB,EAAM95F,GAAW0tF,IAEhB1tF,EAAQ0tF,EAAKxoG,UAAUL,YAU5Bw0G,EAAOQ,KAAM,CAAE,MAAO,SAAU,SAAUz3B,EAAIj9E,GAC7Ck0G,EAAO0kB,SAAU54H,GAAS01H,GAAcliB,EAAQojB,eAC/C,SAAUjiB,EAAM4gB,GACf,GAAKA,EAIJ,OAHAA,EAAWD,GAAQ3gB,EAAM30G,GAGlBi1H,GAAU51G,KAAMk2G,GACtBrhB,EAAQS,GAAO/rG,WAAY5I,GAAS,KACpCu1H,QAQLrhB,EAAOQ,KAAM,CAAE6zB,OAAQ,SAAUC,MAAO,UAAW,SAAUtzB,EAAM3zG,GAClE2yG,EAAOQ,KAAM,CACZruE,QAAS,QAAU6uE,EACnBqP,QAAShjH,EACT,GAAI,QAAU2zG,IACZ,SAAUuzB,EAAcC,GAG1Bx0B,EAAOzuC,GAAIijE,GAAa,SAAUzP,EAAQp5H,GACzC,IAAI+oH,EAAY7oH,UAAUL,SAAY+oI,GAAkC,mBAAXxP,GAC5DX,EAAQmQ,KAA6B,IAAXxP,IAA6B,IAAVp5H,EAAiB,SAAW,UAE1E,OAAO8oH,EAAQ/sH,MAAM,SAAU+4G,EAAMpzG,EAAM1B,GAC1C,IAAI2iB,EAEJ,OAAKkxF,EAAUiB,GAGyB,IAAhC+zB,EAAS1pI,QAAS,SACxB21G,EAAM,QAAUO,GAChBP,EAAKv7G,SAASqnB,gBAAiB,SAAWy0F,GAIrB,IAAlBP,EAAK7zF,UACT0B,EAAMmyF,EAAKl0F,gBAIJpd,KAAKc,IACXwwG,EAAKj0F,KAAM,SAAWw0F,GAAQ1yF,EAAK,SAAW0yF,GAC9CP,EAAKj0F,KAAM,SAAWw0F,GAAQ1yF,EAAK,SAAW0yF,GAC9C1yF,EAAK,SAAW0yF,UAID5sG,IAAVzI,EAGNq0G,EAAOkX,IAAKzW,EAAMpzG,EAAM+2H,GAGxBpkB,EAAOvrG,MAAOgsG,EAAMpzG,EAAM1B,EAAOy4H,KAChC/2H,EAAMqnH,EAAYqQ,OAAS3wH,EAAWsgH,UAM5C1U,EAAOQ,KAAM,CACZ,YACA,WACA,eACA,YACA,cACA,aACE,SAAUz3B,EAAI17E,GAChB2yG,EAAOzuC,GAAIlkE,GAAS,SAAUkkE,GAC7B,OAAO7pE,KAAKkE,GAAIyB,EAAMkkE,OAOxByuC,EAAOzuC,GAAGzqD,OAAQ,CAEjBg4B,KAAM,SAAUo7E,EAAOrgH,EAAM03D,GAC5B,OAAO7pE,KAAKkE,GAAIsuH,EAAO,KAAMrgH,EAAM03D,IAEpCkjE,OAAQ,SAAUva,EAAO3oD,GACxB,OAAO7pE,KAAKsE,IAAKkuH,EAAO,KAAM3oD,IAG/BmjE,SAAU,SAAUl9G,EAAU0iG,EAAOrgH,EAAM03D,GAC1C,OAAO7pE,KAAKkE,GAAIsuH,EAAO1iG,EAAU3d,EAAM03D,IAExCojE,WAAY,SAAUn9G,EAAU0iG,EAAO3oD,GAGtC,OAA4B,IAArB1lE,UAAUL,OAChB9D,KAAKsE,IAAKwrB,EAAU,MACpB9vB,KAAKsE,IAAKkuH,EAAO1iG,GAAY,KAAM+5C,IAGrCqjE,MAAO,SAAUC,EAAQC,GACxB,OAAOptI,KAAK42H,WAAYuW,GAAStW,WAAYuW,GAASD,MAIxD70B,EAAOQ,KACN,wLAE4D9sG,MAAO,MACnE,SAAUq1E,EAAIi4B,GAGbhB,EAAOzuC,GAAIyvC,GAAS,SAAUnnG,EAAM03D,GACnC,OAAO1lE,UAAUL,OAAS,EACzB9D,KAAKkE,GAAIo1G,EAAM,KAAMnnG,EAAM03D,GAC3B7pE,KAAKgzH,QAAS1Z,OAUlB,IAAI2C,GAAQ,qCAMZ3D,EAAO+0B,MAAQ,SAAUxjE,EAAIpkE,GAC5B,IAAImwG,EAAK14F,EAAMmwH,EAUf,GARwB,kBAAZ5nI,IACXmwG,EAAM/rC,EAAIpkE,GACVA,EAAUokE,EACVA,EAAK+rC,GAKAiC,EAAYhuC,GAalB,OARA3sD,EAAOvR,EAAM5H,KAAMI,UAAW,IAC9BkpI,EAAQ,WACP,OAAOxjE,EAAGnlE,MAAOe,GAAWzF,KAAMkd,EAAKtX,OAAQ+F,EAAM5H,KAAMI,eAItDi2G,KAAOvwC,EAAGuwC,KAAOvwC,EAAGuwC,MAAQ9B,EAAO8B,OAElCizB,GAGR/0B,EAAOg1B,UAAY,SAAUC,GACvBA,EACJj1B,EAAOsU,YAEPtU,EAAOsP,OAAO,IAGhBtP,EAAOtsF,QAAUvX,MAAMuX,QACvBssF,EAAOk1B,UAAY/0E,KAAK3iC,MACxBwiF,EAAOjpF,SAAWA,EAClBipF,EAAOT,WAAaA,EACpBS,EAAOR,SAAWA,EAClBQ,EAAOmV,UAAYA,EACnBnV,EAAO3yG,KAAO0yG,EAEdC,EAAOrhC,IAAMhtD,KAAKgtD,IAElBqhC,EAAOm1B,UAAY,SAAUvmI,GAK5B,IAAIvB,EAAO2yG,EAAO3yG,KAAMuB,GACxB,OAAkB,WAATvB,GAA8B,WAATA,KAK5BwX,MAAOjW,EAAM0D,WAAY1D,KAG5BoxG,EAAOr7F,KAAO,SAAUqvE,GACvB,OAAe,MAARA,EACN,IACEA,EAAO,IAAKvsE,QAASk8F,GAAO,UAmBzB,kBACL,OAAO3D,GADF,QAAY,OAAZ,aAQP,IAGCo1B,GAAUjwI,EAAO66G,OAGjBq1B,GAAKlwI,EAAOmwI,EAwBb,OAtBAt1B,EAAOu1B,WAAa,SAAUxuH,GAS7B,OARK5hB,EAAOmwI,IAAMt1B,IACjB76G,EAAOmwI,EAAID,IAGPtuH,GAAQ5hB,EAAO66G,SAAWA,IAC9B76G,EAAO66G,OAASo1B,IAGVp1B,GAMiB,qBAAblB,IACX35G,EAAO66G,OAAS76G,EAAOmwI,EAAIt1B,GAMrBA","file":"static/js/4.14be6f42.chunk.js","sourcesContent":["/* build: `node build.js modules=ALL exclude=gestures,accessors requirejs minifier=uglifyjs` */\n/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */\n\nvar fabric = fabric || { version: '4.4.0' };\nif (typeof exports !== 'undefined') {\n  exports.fabric = fabric;\n}\n/* _AMD_START_ */\nelse if (typeof define === 'function' && define.amd) {\n  define([], function() { return fabric; });\n}\n/* _AMD_END_ */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  if (document instanceof (typeof HTMLDocument !== 'undefined' ? HTMLDocument : Document)) {\n    fabric.document = document;\n  }\n  else {\n    fabric.document = document.implementation.createHTMLDocument('');\n  }\n  fabric.window = window;\n}\nelse {\n  // assume we're running under node.js when document/window are not present\n  var jsdom = require('jsdom');\n  var virtualWindow = new jsdom.JSDOM(\n    decodeURIComponent('%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E'),\n    {\n      features: {\n        FetchExternalResources: ['img']\n      },\n      resources: 'usable'\n    }).window;\n  fabric.document = virtualWindow.document;\n  fabric.jsdomImplForWrapper = require('jsdom/lib/jsdom/living/generated/utils').implForWrapper;\n  fabric.nodeCanvas = require('jsdom/lib/jsdom/utils').Canvas;\n  fabric.window = virtualWindow;\n  DOMParser = fabric.window.DOMParser;\n}\n\n/**\n * True when in environment that supports touch events\n * @type boolean\n */\nfabric.isTouchSupported = 'ontouchstart' in fabric.window || 'ontouchstart' in fabric.document ||\n  (fabric.window && fabric.window.navigator && fabric.window.navigator.maxTouchPoints > 0);\n\n/**\n * True when in environment that's probably Node.js\n * @type boolean\n */\nfabric.isLikelyNode = typeof Buffer !== 'undefined' &&\n                      typeof window === 'undefined';\n\n/* _FROM_SVG_START_ */\n/**\n * Attributes parsed from all SVG elements\n * @type array\n */\nfabric.SHARED_ATTRIBUTES = [\n  'display',\n  'transform',\n  'fill', 'fill-opacity', 'fill-rule',\n  'opacity',\n  'stroke', 'stroke-dasharray', 'stroke-linecap', 'stroke-dashoffset',\n  'stroke-linejoin', 'stroke-miterlimit',\n  'stroke-opacity', 'stroke-width',\n  'id', 'paint-order', 'vector-effect',\n  'instantiated_by_use', 'clip-path',\n];\n/* _FROM_SVG_END_ */\n\n/**\n * Pixel per Inch as a default value set to 96. Can be changed for more realistic conversion.\n */\nfabric.DPI = 96;\nfabric.reNum = '(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)';\nfabric.commaWsp = '(?:\\\\s+,?\\\\s*|,\\\\s*)';\nfabric.rePathCommand = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:[eE][-+]?\\d+)?)/ig;\nfabric.reNonWord = /[ \\n\\.,;!\\?\\-]/;\nfabric.fontPaths = { };\nfabric.iMatrix = [1, 0, 0, 1, 0, 0];\nfabric.svgNS = 'http://www.w3.org/2000/svg';\n\n/**\n * Pixel limit for cache canvases. 1Mpx , 4Mpx should be fine.\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.perfLimitSizeTotal = 2097152;\n\n/**\n * Pixel limit for cache canvases width or height. IE fixes the maximum at 5000\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.maxCacheSideLimit = 4096;\n\n/**\n * Lowest pixel limit for cache canvases, set at 256PX\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.minCacheSideLimit = 256;\n\n/**\n * Cache Object for widths of chars in text rendering.\n */\nfabric.charWidthsCache = { };\n\n/**\n * if webgl is enabled and available, textureSize will determine the size\n * of the canvas backend\n * @since 2.0.0\n * @type Number\n * @default\n */\nfabric.textureSize = 2048;\n\n/**\n * When 'true', style information is not retained when copy/pasting text, making\n * pasted text use destination style.\n * Defaults to 'false'.\n * @type Boolean\n * @default\n */\nfabric.disableStyleCopyPaste = false;\n\n/**\n * Enable webgl for filtering picture is available\n * A filtering backend will be initialized, this will both take memory and\n * time since a default 2048x2048 canvas will be created for the gl context\n * @since 2.0.0\n * @type Boolean\n * @default\n */\nfabric.enableGLFiltering = true;\n\n/**\n * Device Pixel Ratio\n * @see https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/SettingUptheCanvas/SettingUptheCanvas.html\n */\nfabric.devicePixelRatio = fabric.window.devicePixelRatio ||\n                          fabric.window.webkitDevicePixelRatio ||\n                          fabric.window.mozDevicePixelRatio ||\n                          1;\n/**\n * Browser-specific constant to adjust CanvasRenderingContext2D.shadowBlur value,\n * which is unitless and not rendered equally across browsers.\n *\n * Values that work quite well (as of October 2017) are:\n * - Chrome: 1.5\n * - Edge: 1.75\n * - Firefox: 0.9\n * - Safari: 0.95\n *\n * @since 2.0.0\n * @type Number\n * @default 1\n */\nfabric.browserShadowBlurConstant = 1;\n\n/**\n * This object contains the result of arc to bezier conversion for faster retrieving if the same arc needs to be converted again.\n * It was an internal variable, is accessible since version 2.3.4\n */\nfabric.arcToSegmentsCache = { };\n\n/**\n * This object keeps the results of the boundsOfCurve calculation mapped by the joined arguments necessary to calculate it.\n * It does speed up calculation, if you parse and add always the same paths, but in case of heavy usage of freedrawing\n * you do not get any speed benefit and you get a big object in memory.\n * The object was a private variable before, while now is appended to the lib so that you have access to it and you\n * can eventually clear it.\n * It was an internal variable, is accessible since version 2.3.4\n */\nfabric.boundsOfCurveCache = { };\n\n/**\n * If disabled boundsOfCurveCache is not used. For apps that make heavy usage of pencil drawing probably disabling it is better\n * @default true\n */\nfabric.cachesBoundsOfCurve = true;\n\n/**\n * Skip performance testing of setupGLContext and force the use of putImageData that seems to be the one that works best on\n * Chrome + old hardware. if your users are experiencing empty images after filtering you may try to force this to true\n * this has to be set before instantiating the filtering backend ( before filtering the first image )\n * @type Boolean\n * @default false\n */\nfabric.forceGLPutImageData = false;\n\nfabric.initFilterBackend = function() {\n  if (fabric.enableGLFiltering && fabric.isWebglSupported && fabric.isWebglSupported(fabric.textureSize)) {\n    console.log('max texture size: ' + fabric.maxTextureSize);\n    return (new fabric.WebglFilterBackend({ tileSize: fabric.textureSize }));\n  }\n  else if (fabric.Canvas2dFilterBackend) {\n    return (new fabric.Canvas2dFilterBackend());\n  }\n};\n\n\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  // ensure globality even if entire library were function wrapped (as in Meteor.js packaging system)\n  window.fabric = fabric;\n}\n\n\n(function() {\n\n  /**\n   * @private\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  function _removeEventListener(eventName, handler) {\n    if (!this.__eventListeners[eventName]) {\n      return;\n    }\n    var eventListener = this.__eventListeners[eventName];\n    if (handler) {\n      eventListener[eventListener.indexOf(handler)] = false;\n    }\n    else {\n      fabric.util.array.fill(eventListener, false);\n    }\n  }\n\n  /**\n   * Observes specified event\n   * @memberOf fabric.Observable\n   * @alias on\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function that receives a notification when an event of the specified type occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function on(eventName, handler) {\n    if (!this.__eventListeners) {\n      this.__eventListeners = { };\n    }\n    // one object with key/value pairs was passed\n    if (arguments.length === 1) {\n      for (var prop in eventName) {\n        this.on(prop, eventName[prop]);\n      }\n    }\n    else {\n      if (!this.__eventListeners[eventName]) {\n        this.__eventListeners[eventName] = [];\n      }\n      this.__eventListeners[eventName].push(handler);\n    }\n    return this;\n  }\n\n  /**\n   * Stops event observing for a particular event handler. Calling this method\n   * without arguments removes all handlers for all events\n   * @memberOf fabric.Observable\n   * @alias off\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function to be deleted from EventListeners\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function off(eventName, handler) {\n    if (!this.__eventListeners) {\n      return this;\n    }\n\n    // remove all key/value pairs (event name -> event handler)\n    if (arguments.length === 0) {\n      for (eventName in this.__eventListeners) {\n        _removeEventListener.call(this, eventName);\n      }\n    }\n    // one object with key/value pairs was passed\n    else if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      for (var prop in eventName) {\n        _removeEventListener.call(this, prop, eventName[prop]);\n      }\n    }\n    else {\n      _removeEventListener.call(this, eventName, handler);\n    }\n    return this;\n  }\n\n  /**\n   * Fires event with an optional options object\n   * @memberOf fabric.Observable\n   * @param {String} eventName Event name to fire\n   * @param {Object} [options] Options object\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function fire(eventName, options) {\n    if (!this.__eventListeners) {\n      return this;\n    }\n\n    var listenersForEvent = this.__eventListeners[eventName];\n    if (!listenersForEvent) {\n      return this;\n    }\n\n    for (var i = 0, len = listenersForEvent.length; i < len; i++) {\n      listenersForEvent[i] && listenersForEvent[i].call(this, options || { });\n    }\n    this.__eventListeners[eventName] = listenersForEvent.filter(function(value) {\n      return value !== false;\n    });\n    return this;\n  }\n\n  /**\n   * @namespace fabric.Observable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#events}\n   * @see {@link http://fabricjs.com/events|Events demo}\n   */\n  fabric.Observable = {\n    fire: fire,\n    on: on,\n    off: off,\n  };\n})();\n\n\n/**\n * @namespace fabric.Collection\n */\nfabric.Collection = {\n\n  _objects: [],\n\n  /**\n   * Adds objects to collection, Canvas or Group, then renders canvas\n   * (if `renderOnAddRemove` is not `false`).\n   * in case of Group no changes to bounding box are made.\n   * Objects should be instances of (or inherit from) fabric.Object\n   * Use of this function is highly discouraged for groups.\n   * you can add a bunch of objects with the add method but then you NEED\n   * to run a addWithUpdate call for the Group class or position/bbox will be wrong.\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  add: function () {\n    this._objects.push.apply(this._objects, arguments);\n    if (this._onObjectAdded) {\n      for (var i = 0, length = arguments.length; i < length; i++) {\n        this._onObjectAdded(arguments[i]);\n      }\n    }\n    this.renderOnAddRemove && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Inserts an object into collection at specified index, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * An object should be an instance of (or inherit from) fabric.Object\n   * Use of this function is highly discouraged for groups.\n   * you can add a bunch of objects with the insertAt method but then you NEED\n   * to run a addWithUpdate call for the Group class or position/bbox will be wrong.\n   * @param {Object} object Object to insert\n   * @param {Number} index Index to insert object at\n   * @param {Boolean} nonSplicing When `true`, no splicing (shifting) of objects occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  insertAt: function (object, index, nonSplicing) {\n    var objects = this._objects;\n    if (nonSplicing) {\n      objects[index] = object;\n    }\n    else {\n      objects.splice(index, 0, object);\n    }\n    this._onObjectAdded && this._onObjectAdded(object);\n    this.renderOnAddRemove && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Removes objects from a collection, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  remove: function() {\n    var objects = this._objects,\n        index, somethingRemoved = false;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      index = objects.indexOf(arguments[i]);\n\n      // only call onObjectRemoved if an object was actually removed\n      if (index !== -1) {\n        somethingRemoved = true;\n        objects.splice(index, 1);\n        this._onObjectRemoved && this._onObjectRemoved(arguments[i]);\n      }\n    }\n\n    this.renderOnAddRemove && somethingRemoved && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Executes given function for each object in this group\n   * @param {Function} callback\n   *                   Callback invoked with current object as first argument,\n   *                   index - as second and an array of all objects - as third.\n   *                   Callback is invoked in a context of Global Object (e.g. `window`)\n   *                   when no `context` argument is given\n   *\n   * @param {Object} context Context (aka thisObject)\n   * @return {Self} thisArg\n   * @chainable\n   */\n  forEachObject: function(callback, context) {\n    var objects = this.getObjects();\n    for (var i = 0, len = objects.length; i < len; i++) {\n      callback.call(context, objects[i], i, objects);\n    }\n    return this;\n  },\n\n  /**\n   * Returns an array of children objects of this instance\n   * Type parameter introduced in 1.3.10\n   * since 2.3.5 this method return always a COPY of the array;\n   * @param {String} [type] When specified, only objects of this type are returned\n   * @return {Array}\n   */\n  getObjects: function(type) {\n    if (typeof type === 'undefined') {\n      return this._objects.concat();\n    }\n    return this._objects.filter(function(o) {\n      return o.type === type;\n    });\n  },\n\n  /**\n   * Returns object at specified index\n   * @param {Number} index\n   * @return {Self} thisArg\n   */\n  item: function (index) {\n    return this._objects[index];\n  },\n\n  /**\n   * Returns true if collection contains no objects\n   * @return {Boolean} true if collection is empty\n   */\n  isEmpty: function () {\n    return this._objects.length === 0;\n  },\n\n  /**\n   * Returns a size of a collection (i.e: length of an array containing its objects)\n   * @return {Number} Collection size\n   */\n  size: function() {\n    return this._objects.length;\n  },\n\n  /**\n   * Returns true if collection contains an object\n   * @param {Object} object Object to check against\n   * @return {Boolean} `true` if collection contains an object\n   */\n  contains: function(object) {\n    return this._objects.indexOf(object) > -1;\n  },\n\n  /**\n   * Returns number representation of a collection complexity\n   * @return {Number} complexity\n   */\n  complexity: function () {\n    return this._objects.reduce(function (memo, current) {\n      memo += current.complexity ? current.complexity() : 0;\n      return memo;\n    }, 0);\n  }\n};\n\n\n/**\n * @namespace fabric.CommonMethods\n */\nfabric.CommonMethods = {\n\n  /**\n   * Sets object's properties from options\n   * @param {Object} [options] Options object\n   */\n  _setOptions: function(options) {\n    for (var prop in options) {\n      this.set(prop, options[prop]);\n    }\n  },\n\n  /**\n   * @private\n   * @param {Object} [filler] Options object\n   * @param {String} [property] property to set the Gradient to\n   */\n  _initGradient: function(filler, property) {\n    if (filler && filler.colorStops && !(filler instanceof fabric.Gradient)) {\n      this.set(property, new fabric.Gradient(filler));\n    }\n  },\n\n  /**\n   * @private\n   * @param {Object} [filler] Options object\n   * @param {String} [property] property to set the Pattern to\n   * @param {Function} [callback] callback to invoke after pattern load\n   */\n  _initPattern: function(filler, property, callback) {\n    if (filler && filler.source && !(filler instanceof fabric.Pattern)) {\n      this.set(property, new fabric.Pattern(filler, callback));\n    }\n    else {\n      callback && callback();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _setObject: function(obj) {\n    for (var prop in obj) {\n      this._set(prop, obj[prop]);\n    }\n  },\n\n  /**\n   * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n   * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n   * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  set: function(key, value) {\n    if (typeof key === 'object') {\n      this._setObject(key);\n    }\n    else {\n      this._set(key, value);\n    }\n    return this;\n  },\n\n  _set: function(key, value) {\n    this[key] = value;\n  },\n\n  /**\n   * Toggles specified property from `true` to `false` or from `false` to `true`\n   * @param {String} property Property to toggle\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  toggle: function(property) {\n    var value = this.get(property);\n    if (typeof value === 'boolean') {\n      this.set(property, !value);\n    }\n    return this;\n  },\n\n  /**\n   * Basic getter\n   * @param {String} property Property name\n   * @return {*} value of a property\n   */\n  get: function(property) {\n    return this[property];\n  }\n};\n\n\n(function(global) {\n\n  var sqrt = Math.sqrt,\n      atan2 = Math.atan2,\n      pow = Math.pow,\n      PiBy180 = Math.PI / 180,\n      PiBy2 = Math.PI / 2;\n\n  /**\n   * @namespace fabric.util\n   */\n  fabric.util = {\n\n    /**\n     * Calculate the cos of an angle, avoiding returning floats for known results\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} angle the angle in radians or in degree\n     * @return {Number}\n     */\n    cos: function(angle) {\n      if (angle === 0) { return 1; }\n      if (angle < 0) {\n        // cos(a) = cos(-a)\n        angle = -angle;\n      }\n      var angleSlice = angle / PiBy2;\n      switch (angleSlice) {\n        case 1: case 3: return 0;\n        case 2: return -1;\n      }\n      return Math.cos(angle);\n    },\n\n    /**\n     * Calculate the sin of an angle, avoiding returning floats for known results\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} angle the angle in radians or in degree\n     * @return {Number}\n     */\n    sin: function(angle) {\n      if (angle === 0) { return 0; }\n      var angleSlice = angle / PiBy2, sign = 1;\n      if (angle < 0) {\n        // sin(-a) = -sin(a)\n        sign = -1;\n      }\n      switch (angleSlice) {\n        case 1: return sign;\n        case 2: return 0;\n        case 3: return -sign;\n      }\n      return Math.sin(angle);\n    },\n\n    /**\n     * Removes value from an array.\n     * Presence of value (and its position in an array) is determined via `Array.prototype.indexOf`\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} array\n     * @param {*} value\n     * @return {Array} original array\n     */\n    removeFromArray: function(array, value) {\n      var idx = array.indexOf(value);\n      if (idx !== -1) {\n        array.splice(idx, 1);\n      }\n      return array;\n    },\n\n    /**\n     * Returns random number between 2 specified ones.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} min lower limit\n     * @param {Number} max upper limit\n     * @return {Number} random value (between min and max)\n     */\n    getRandomInt: function(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n\n    /**\n     * Transforms degrees to radians.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} degrees value in degrees\n     * @return {Number} value in radians\n     */\n    degreesToRadians: function(degrees) {\n      return degrees * PiBy180;\n    },\n\n    /**\n     * Transforms radians to degrees.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} radians value in radians\n     * @return {Number} value in degrees\n     */\n    radiansToDegrees: function(radians) {\n      return radians / PiBy180;\n    },\n\n    /**\n     * Rotates `point` around `origin` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {fabric.Point} point The point to rotate\n     * @param {fabric.Point} origin The origin of the rotation\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {fabric.Point} The new rotated point\n     */\n    rotatePoint: function(point, origin, radians) {\n      point.subtractEquals(origin);\n      var v = fabric.util.rotateVector(point, radians);\n      return new fabric.Point(v.x, v.y).addEquals(origin);\n    },\n\n    /**\n     * Rotates `vector` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} vector The vector to rotate (x and y)\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {Object} The new rotated point\n     */\n    rotateVector: function(vector, radians) {\n      var sin = fabric.util.sin(radians),\n          cos = fabric.util.cos(radians),\n          rx = vector.x * cos - vector.y * sin,\n          ry = vector.x * sin + vector.y * cos;\n      return {\n        x: rx,\n        y: ry\n      };\n    },\n\n    /**\n     * Apply transform t to point p\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Point} p The point to transform\n     * @param  {Array} t The transform\n     * @param  {Boolean} [ignoreOffset] Indicates that the offset should not be applied\n     * @return {fabric.Point} The transformed point\n     */\n    transformPoint: function(p, t, ignoreOffset) {\n      if (ignoreOffset) {\n        return new fabric.Point(\n          t[0] * p.x + t[2] * p.y,\n          t[1] * p.x + t[3] * p.y\n        );\n      }\n      return new fabric.Point(\n        t[0] * p.x + t[2] * p.y + t[4],\n        t[1] * p.x + t[3] * p.y + t[5]\n      );\n    },\n\n    /**\n     * Returns coordinates of points's bounding rectangle (left, top, width, height)\n     * @param {Array} points 4 points array\n     * @param {Array} [transform] an array of 6 numbers representing a 2x3 transform matrix\n     * @return {Object} Object with left, top, width, height properties\n     */\n    makeBoundingBoxFromPoints: function(points, transform) {\n      if (transform) {\n        for (var i = 0; i < points.length; i++) {\n          points[i] = fabric.util.transformPoint(points[i], transform);\n        }\n      }\n      var xPoints = [points[0].x, points[1].x, points[2].x, points[3].x],\n          minX = fabric.util.array.min(xPoints),\n          maxX = fabric.util.array.max(xPoints),\n          width = maxX - minX,\n          yPoints = [points[0].y, points[1].y, points[2].y, points[3].y],\n          minY = fabric.util.array.min(yPoints),\n          maxY = fabric.util.array.max(yPoints),\n          height = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height\n      };\n    },\n\n    /**\n     * Invert transformation t\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} t The transform\n     * @return {Array} The inverted transform\n     */\n    invertTransform: function(t) {\n      var a = 1 / (t[0] * t[3] - t[1] * t[2]),\n          r = [a * t[3], -a * t[1], -a * t[2], a * t[0]],\n          o = fabric.util.transformPoint({ x: t[4], y: t[5] }, r, true);\n      r[4] = -o.x;\n      r[5] = -o.y;\n      return r;\n    },\n\n    /**\n     * A wrapper around Number#toFixed, which contrary to native method returns number, not string.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number|String} number number to operate on\n     * @param {Number} fractionDigits number of fraction digits to \"leave\"\n     * @return {Number}\n     */\n    toFixed: function(number, fractionDigits) {\n      return parseFloat(Number(number).toFixed(fractionDigits));\n    },\n\n    /**\n     * Converts from attribute value to pixel value if applicable.\n     * Returns converted pixels or original value not converted.\n     * @param {Number|String} value number to operate on\n     * @param {Number} fontSize\n     * @return {Number|String}\n     */\n    parseUnit: function(value, fontSize) {\n      var unit = /\\D{0,2}$/.exec(value),\n          number = parseFloat(value);\n      if (!fontSize) {\n        fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      }\n      switch (unit[0]) {\n        case 'mm':\n          return number * fabric.DPI / 25.4;\n\n        case 'cm':\n          return number * fabric.DPI / 2.54;\n\n        case 'in':\n          return number * fabric.DPI;\n\n        case 'pt':\n          return number * fabric.DPI / 72; // or * 4 / 3\n\n        case 'pc':\n          return number * fabric.DPI / 72 * 12; // or * 16\n\n        case 'em':\n          return number * fontSize;\n\n        default:\n          return number;\n      }\n    },\n\n    /**\n     * Function which always returns `false`.\n     * @static\n     * @memberOf fabric.util\n     * @return {Boolean}\n     */\n    falseFunction: function() {\n      return false;\n    },\n\n    /**\n     * Returns klass \"Class\" object of given namespace\n     * @memberOf fabric.util\n     * @param {String} type Type of object (eg. 'circle')\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @return {Object} klass \"Class\"\n     */\n    getKlass: function(type, namespace) {\n      // capitalize first letter only\n      type = fabric.util.string.camelize(type.charAt(0).toUpperCase() + type.slice(1));\n      return fabric.util.resolveNamespace(namespace)[type];\n    },\n\n    /**\n     * Returns array of attributes for given svg that fabric parses\n     * @memberOf fabric.util\n     * @param {String} type Type of svg element (eg. 'circle')\n     * @return {Array} string names of supported attributes\n     */\n    getSvgAttributes: function(type) {\n      var attributes = [\n        'instantiated_by_use',\n        'style',\n        'id',\n        'class'\n      ];\n      switch (type) {\n        case 'linearGradient':\n          attributes = attributes.concat(['x1', 'y1', 'x2', 'y2', 'gradientUnits', 'gradientTransform']);\n          break;\n        case 'radialGradient':\n          attributes = attributes.concat(['gradientUnits', 'gradientTransform', 'cx', 'cy', 'r', 'fx', 'fy', 'fr']);\n          break;\n        case 'stop':\n          attributes = attributes.concat(['offset', 'stop-color', 'stop-opacity']);\n          break;\n      }\n      return attributes;\n    },\n\n    /**\n     * Returns object of given namespace\n     * @memberOf fabric.util\n     * @param {String} namespace Namespace string e.g. 'fabric.Image.filter' or 'fabric'\n     * @return {Object} Object for given namespace (default fabric)\n     */\n    resolveNamespace: function(namespace) {\n      if (!namespace) {\n        return fabric;\n      }\n\n      var parts = namespace.split('.'),\n          len = parts.length, i,\n          obj = global || fabric.window;\n\n      for (i = 0; i < len; ++i) {\n        obj = obj[parts[i]];\n      }\n\n      return obj;\n    },\n\n    /**\n     * Loads image element from given url and passes it to a callback\n     * @memberOf fabric.util\n     * @param {String} url URL representing an image\n     * @param {Function} callback Callback; invoked with loaded image\n     * @param {*} [context] Context to invoke callback in\n     * @param {Object} [crossOrigin] crossOrigin value to set image element to\n     */\n    loadImage: function(url, callback, context, crossOrigin) {\n      if (!url) {\n        callback && callback.call(context, url);\n        return;\n      }\n\n      var img = fabric.util.createImage();\n\n      /** @ignore */\n      var onLoadCallback = function () {\n        callback && callback.call(context, img, false);\n        img = img.onload = img.onerror = null;\n      };\n\n      img.onload = onLoadCallback;\n      /** @ignore */\n      img.onerror = function() {\n        fabric.log('Error loading ' + img.src);\n        callback && callback.call(context, null, true);\n        img = img.onload = img.onerror = null;\n      };\n\n      // data-urls appear to be buggy with crossOrigin\n      // https://github.com/kangax/fabric.js/commit/d0abb90f1cd5c5ef9d2a94d3fb21a22330da3e0a#commitcomment-4513767\n      // see https://code.google.com/p/chromium/issues/detail?id=315152\n      //     https://bugzilla.mozilla.org/show_bug.cgi?id=935069\n      // crossOrigin null is the same as not set.\n      if (url.indexOf('data') !== 0 &&\n        crossOrigin !== undefined &&\n        crossOrigin !== null) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      // IE10 / IE11-Fix: SVG contents from data: URI\n      // will only be available if the IMG is present\n      // in the DOM (and visible)\n      if (url.substring(0,14) === 'data:image/svg') {\n        img.onload = null;\n        fabric.util.loadImageInDom(img, onLoadCallback);\n      }\n\n      img.src = url;\n    },\n\n    /**\n     * Attaches SVG image with data: URL to the dom\n     * @memberOf fabric.util\n     * @param {Object} img Image object with data:image/svg src\n     * @param {Function} callback Callback; invoked with loaded image\n     * @return {Object} DOM element (div containing the SVG image)\n     */\n    loadImageInDom: function(img, onLoadCallback) {\n      var div = fabric.document.createElement('div');\n      div.style.width = div.style.height = '1px';\n      div.style.left = div.style.top = '-100%';\n      div.style.position = 'absolute';\n      div.appendChild(img);\n      fabric.document.querySelector('body').appendChild(div);\n      /**\n       * Wrap in function to:\n       *   1. Call existing callback\n       *   2. Cleanup DOM\n       */\n      img.onload = function () {\n        onLoadCallback();\n        div.parentNode.removeChild(div);\n        div = null;\n      };\n    },\n\n    /**\n     * Creates corresponding fabric instances from their object representations\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} objects Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @param {Function} reviver Method for further parsing of object elements,\n     * called after each fabric object created.\n     */\n    enlivenObjects: function(objects, callback, namespace, reviver) {\n      objects = objects || [];\n\n      var enlivenedObjects = [],\n          numLoadedObjects = 0,\n          numTotalObjects = objects.length;\n\n      function onLoaded() {\n        if (++numLoadedObjects === numTotalObjects) {\n          callback && callback(enlivenedObjects.filter(function(obj) {\n            // filter out undefined objects (objects that gave error)\n            return obj;\n          }));\n        }\n      }\n\n      if (!numTotalObjects) {\n        callback && callback(enlivenedObjects);\n        return;\n      }\n\n      objects.forEach(function (o, index) {\n        // if sparse array\n        if (!o || !o.type) {\n          onLoaded();\n          return;\n        }\n        var klass = fabric.util.getKlass(o.type, namespace);\n        klass.fromObject(o, function (obj, error) {\n          error || (enlivenedObjects[index] = obj);\n          reviver && reviver(o, obj, error);\n          onLoaded();\n        });\n      });\n    },\n\n    /**\n     * Create and wait for loading of patterns\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} patterns Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * called after each fabric object created.\n     */\n    enlivenPatterns: function(patterns, callback) {\n      patterns = patterns || [];\n\n      function onLoaded() {\n        if (++numLoadedPatterns === numPatterns) {\n          callback && callback(enlivenedPatterns);\n        }\n      }\n\n      var enlivenedPatterns = [],\n          numLoadedPatterns = 0,\n          numPatterns = patterns.length;\n\n      if (!numPatterns) {\n        callback && callback(enlivenedPatterns);\n        return;\n      }\n\n      patterns.forEach(function (p, index) {\n        if (p && p.source) {\n          new fabric.Pattern(p, function(pattern) {\n            enlivenedPatterns[index] = pattern;\n            onLoaded();\n          });\n        }\n        else {\n          enlivenedPatterns[index] = p;\n          onLoaded();\n        }\n      });\n    },\n\n    /**\n     * Groups SVG elements (usually those retrieved from SVG document)\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} elements SVG elements to group\n     * @param {Object} [options] Options object\n     * @param {String} path Value to set sourcePath to\n     * @return {fabric.Object|fabric.Group}\n     */\n    groupSVGElements: function(elements, options, path) {\n      var object;\n      if (elements && elements.length === 1) {\n        return elements[0];\n      }\n      if (options) {\n        if (options.width && options.height) {\n          options.centerPoint = {\n            x: options.width / 2,\n            y: options.height / 2\n          };\n        }\n        else {\n          delete options.width;\n          delete options.height;\n        }\n      }\n      object = new fabric.Group(elements, options);\n      if (typeof path !== 'undefined') {\n        object.sourcePath = path;\n      }\n      return object;\n    },\n\n    /**\n     * Populates an object with properties of another object\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} source Source object\n     * @param {Object} destination Destination object\n     * @return {Array} properties Properties names to include\n     */\n    populateWithProperties: function(source, destination, properties) {\n      if (properties && Object.prototype.toString.call(properties) === '[object Array]') {\n        for (var i = 0, len = properties.length; i < len; i++) {\n          if (properties[i] in source) {\n            destination[properties[i]] = source[properties[i]];\n          }\n        }\n      }\n    },\n\n    /**\n     * Draws a dashed line between two points\n     *\n     * This method is used to draw dashed line around selection area.\n     * See <a href=\"http://stackoverflow.com/questions/4576724/dotted-stroke-in-canvas\">dotted stroke in canvas</a>\n     *\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x  start x coordinate\n     * @param {Number} y start y coordinate\n     * @param {Number} x2 end x coordinate\n     * @param {Number} y2 end y coordinate\n     * @param {Array} da dash array pattern\n     */\n    drawDashedLine: function(ctx, x, y, x2, y2, da) {\n      var dx = x2 - x,\n          dy = y2 - y,\n          len = sqrt(dx * dx + dy * dy),\n          rot = atan2(dy, dx),\n          dc = da.length,\n          di = 0,\n          draw = true;\n\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.moveTo(0, 0);\n      ctx.rotate(rot);\n\n      x = 0;\n      while (len > x) {\n        x += da[di++ % dc];\n        if (x > len) {\n          x = len;\n        }\n        ctx[draw ? 'lineTo' : 'moveTo'](x, 0);\n        draw = !draw;\n      }\n\n      ctx.restore();\n    },\n\n    /**\n     * Creates canvas element\n     * @static\n     * @memberOf fabric.util\n     * @return {CanvasElement} initialized canvas element\n     */\n    createCanvasElement: function() {\n      return fabric.document.createElement('canvas');\n    },\n\n    /**\n     * Creates a canvas element that is a copy of another and is also painted\n     * @param {CanvasElement} canvas to copy size and content of\n     * @static\n     * @memberOf fabric.util\n     * @return {CanvasElement} initialized canvas element\n     */\n    copyCanvasElement: function(canvas) {\n      var newCanvas = fabric.util.createCanvasElement();\n      newCanvas.width = canvas.width;\n      newCanvas.height = canvas.height;\n      newCanvas.getContext('2d').drawImage(canvas, 0, 0);\n      return newCanvas;\n    },\n\n    /**\n     * since 2.6.0 moved from canvas instance to utility.\n     * @param {CanvasElement} canvasEl to copy size and content of\n     * @param {String} format 'jpeg' or 'png', in some browsers 'webp' is ok too\n     * @param {Number} quality <= 1 and > 0\n     * @static\n     * @memberOf fabric.util\n     * @return {String} data url\n     */\n    toDataURL: function(canvasEl, format, quality) {\n      return canvasEl.toDataURL('image/' + format, quality);\n    },\n\n    /**\n     * Creates image element (works on client and node)\n     * @static\n     * @memberOf fabric.util\n     * @return {HTMLImageElement} HTML image element\n     */\n    createImage: function() {\n      return fabric.document.createElement('img');\n    },\n\n    /**\n     * Multiply matrix A by matrix B to nest transformations\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a First transformMatrix\n     * @param  {Array} b Second transformMatrix\n     * @param  {Boolean} is2x2 flag to multiply matrices as 2x2 matrices\n     * @return {Array} The product of the two transform matrices\n     */\n    multiplyTransformMatrices: function(a, b, is2x2) {\n      // Matrix multiply a * b\n      return [\n        a[0] * b[0] + a[2] * b[1],\n        a[1] * b[0] + a[3] * b[1],\n        a[0] * b[2] + a[2] * b[3],\n        a[1] * b[2] + a[3] * b[3],\n        is2x2 ? 0 : a[0] * b[4] + a[2] * b[5] + a[4],\n        is2x2 ? 0 : a[1] * b[4] + a[3] * b[5] + a[5]\n      ];\n    },\n\n    /**\n     * Decomposes standard 2x3 matrix into transform components\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a transformMatrix\n     * @return {Object} Components of transform\n     */\n    qrDecompose: function(a) {\n      var angle = atan2(a[1], a[0]),\n          denom = pow(a[0], 2) + pow(a[1], 2),\n          scaleX = sqrt(denom),\n          scaleY = (a[0] * a[3] - a[2] * a[1]) / scaleX,\n          skewX = atan2(a[0] * a[2] + a[1] * a [3], denom);\n      return {\n        angle: angle / PiBy180,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        skewX: skewX / PiBy180,\n        skewY: 0,\n        translateX: a[4],\n        translateY: a[5]\n      };\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.angle] angle in degrees\n     * @return {Number[]} transform matrix\n     */\n    calcRotateMatrix: function(options) {\n      if (!options.angle) {\n        return fabric.iMatrix.concat();\n      }\n      var theta = fabric.util.degreesToRadians(options.angle),\n          cos = fabric.util.cos(theta),\n          sin = fabric.util.sin(theta);\n      return [cos, sin, -sin, cos, 0, 0];\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet.\n     * is called DimensionsTransformMatrix because those properties are the one that influence\n     * the size of the resulting box of the object.\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.scaleX]\n     * @param  {Number} [options.scaleY]\n     * @param  {Boolean} [options.flipX]\n     * @param  {Boolean} [options.flipY]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.skewX]\n     * @return {Number[]} transform matrix\n     */\n    calcDimensionsMatrix: function(options) {\n      var scaleX = typeof options.scaleX === 'undefined' ? 1 : options.scaleX,\n          scaleY = typeof options.scaleY === 'undefined' ? 1 : options.scaleY,\n          scaleMatrix = [\n            options.flipX ? -scaleX : scaleX,\n            0,\n            0,\n            options.flipY ? -scaleY : scaleY,\n            0,\n            0],\n          multiply = fabric.util.multiplyTransformMatrices,\n          degreesToRadians = fabric.util.degreesToRadians;\n      if (options.skewX) {\n        scaleMatrix = multiply(\n          scaleMatrix,\n          [1, 0, Math.tan(degreesToRadians(options.skewX)), 1],\n          true);\n      }\n      if (options.skewY) {\n        scaleMatrix = multiply(\n          scaleMatrix,\n          [1, Math.tan(degreesToRadians(options.skewY)), 0, 1],\n          true);\n      }\n      return scaleMatrix;\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.angle]\n     * @param  {Number} [options.scaleX]\n     * @param  {Number} [options.scaleY]\n     * @param  {Boolean} [options.flipX]\n     * @param  {Boolean} [options.flipY]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.translateX]\n     * @param  {Number} [options.translateY]\n     * @return {Number[]} transform matrix\n     */\n    composeMatrix: function(options) {\n      var matrix = [1, 0, 0, 1, options.translateX || 0, options.translateY || 0],\n          multiply = fabric.util.multiplyTransformMatrices;\n      if (options.angle) {\n        matrix = multiply(matrix, fabric.util.calcRotateMatrix(options));\n      }\n      if (options.scaleX !== 1 || options.scaleY !== 1 ||\n          options.skewX || options.skewY || options.flipX || options.flipY) {\n        matrix = multiply(matrix, fabric.util.calcDimensionsMatrix(options));\n      }\n      return matrix;\n    },\n\n    /**\n     * reset an object transform state to neutral. Top and left are not accounted for\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Object} target object to transform\n     */\n    resetObjectTransform: function (target) {\n      target.scaleX = 1;\n      target.scaleY = 1;\n      target.skewX = 0;\n      target.skewY = 0;\n      target.flipX = false;\n      target.flipY = false;\n      target.rotate(0);\n    },\n\n    /**\n     * Extract Object transform values\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Object} target object to read from\n     * @return {Object} Components of transform\n     */\n    saveObjectTransform: function (target) {\n      return {\n        scaleX: target.scaleX,\n        scaleY: target.scaleY,\n        skewX: target.skewX,\n        skewY: target.skewY,\n        angle: target.angle,\n        left: target.left,\n        flipX: target.flipX,\n        flipY: target.flipY,\n        top: target.top\n      };\n    },\n\n    /**\n     * Returns true if context has transparent pixel\n     * at specified location (taking tolerance into account)\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x x coordinate\n     * @param {Number} y y coordinate\n     * @param {Number} tolerance Tolerance\n     */\n    isTransparent: function(ctx, x, y, tolerance) {\n\n      // If tolerance is > 0 adjust start coords to take into account.\n      // If moves off Canvas fix to 0\n      if (tolerance > 0) {\n        if (x > tolerance) {\n          x -= tolerance;\n        }\n        else {\n          x = 0;\n        }\n        if (y > tolerance) {\n          y -= tolerance;\n        }\n        else {\n          y = 0;\n        }\n      }\n\n      var _isTransparent = true, i, temp,\n          imageData = ctx.getImageData(x, y, (tolerance * 2) || 1, (tolerance * 2) || 1),\n          l = imageData.data.length;\n\n      // Split image data - for tolerance > 1, pixelDataSize = 4;\n      for (i = 3; i < l; i += 4) {\n        temp = imageData.data[i];\n        _isTransparent = temp <= 0;\n        if (_isTransparent === false) {\n          break; // Stop if colour found\n        }\n      }\n\n      imageData = null;\n\n      return _isTransparent;\n    },\n\n    /**\n     * Parse preserveAspectRatio attribute from element\n     * @param {string} attribute to be parsed\n     * @return {Object} an object containing align and meetOrSlice attribute\n     */\n    parsePreserveAspectRatioAttribute: function(attribute) {\n      var meetOrSlice = 'meet', alignX = 'Mid', alignY = 'Mid',\n          aspectRatioAttrs = attribute.split(' '), align;\n\n      if (aspectRatioAttrs && aspectRatioAttrs.length) {\n        meetOrSlice = aspectRatioAttrs.pop();\n        if (meetOrSlice !== 'meet' && meetOrSlice !== 'slice') {\n          align = meetOrSlice;\n          meetOrSlice = 'meet';\n        }\n        else if (aspectRatioAttrs.length) {\n          align = aspectRatioAttrs.pop();\n        }\n      }\n      //divide align in alignX and alignY\n      alignX = align !== 'none' ? align.slice(1, 4) : 'none';\n      alignY = align !== 'none' ? align.slice(5, 8) : 'none';\n      return {\n        meetOrSlice: meetOrSlice,\n        alignX: alignX,\n        alignY: alignY\n      };\n    },\n\n    /**\n     * Clear char widths cache for the given font family or all the cache if no\n     * fontFamily is specified.\n     * Use it if you know you are loading fonts in a lazy way and you are not waiting\n     * for custom fonts to load properly when adding text objects to the canvas.\n     * If a text object is added when its own font is not loaded yet, you will get wrong\n     * measurement and so wrong bounding boxes.\n     * After the font cache is cleared, either change the textObject text content or call\n     * initDimensions() to trigger a recalculation\n     * @memberOf fabric.util\n     * @param {String} [fontFamily] font family to clear\n     */\n    clearFabricFontCache: function(fontFamily) {\n      fontFamily = (fontFamily || '').toLowerCase();\n      if (!fontFamily) {\n        fabric.charWidthsCache = { };\n      }\n      else if (fabric.charWidthsCache[fontFamily]) {\n        delete fabric.charWidthsCache[fontFamily];\n      }\n    },\n\n    /**\n     * Given current aspect ratio, determines the max width and height that can\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Number} ar aspect ratio\n     * @param {Number} maximumArea Maximum area you want to achieve\n     * @return {Object.x} Limited dimensions by X\n     * @return {Object.y} Limited dimensions by Y\n     */\n    limitDimsByArea: function(ar, maximumArea) {\n      var roughWidth = Math.sqrt(maximumArea * ar),\n          perfLimitSizeY = Math.floor(maximumArea / roughWidth);\n      return { x: Math.floor(roughWidth), y: perfLimitSizeY };\n    },\n\n    capValue: function(min, value, max) {\n      return Math.max(min, Math.min(value, max));\n    },\n\n    /**\n     * Finds the scale for the object source to fit inside the object destination,\n     * keeping aspect ratio intact.\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Object | fabric.Object} source\n     * @param {Number} source.height natural unscaled height of the object\n     * @param {Number} source.width natural unscaled width of the object\n     * @param {Object | fabric.Object} destination\n     * @param {Number} destination.height natural unscaled height of the object\n     * @param {Number} destination.width natural unscaled width of the object\n     * @return {Number} scale factor to apply to source to fit into destination\n     */\n    findScaleToFit: function(source, destination) {\n      return Math.min(destination.width / source.width, destination.height / source.height);\n    },\n\n    /**\n     * Finds the scale for the object source to cover entirely the object destination,\n     * keeping aspect ratio intact.\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Object | fabric.Object} source\n     * @param {Number} source.height natural unscaled height of the object\n     * @param {Number} source.width natural unscaled width of the object\n     * @param {Object | fabric.Object} destination\n     * @param {Number} destination.height natural unscaled height of the object\n     * @param {Number} destination.width natural unscaled width of the object\n     * @return {Number} scale factor to apply to source to cover destination\n     */\n    findScaleToCover: function(source, destination) {\n      return Math.max(destination.width / source.width, destination.height / source.height);\n    },\n\n    /**\n     * given an array of 6 number returns something like `\"matrix(...numbers)\"`\n     * @memberOf fabric.util\n     * @param {Array} transform an array with 6 numbers\n     * @return {String} transform matrix for svg\n     * @return {Object.y} Limited dimensions by Y\n     */\n    matrixToSVG: function(transform) {\n      return 'matrix(' + transform.map(function(value) {\n        return fabric.util.toFixed(value, fabric.Object.NUM_FRACTION_DIGITS);\n      }).join(' ') + ')';\n    },\n\n    /**\n     * given an object and a transform, apply the inverse transform to the object,\n     * this is equivalent to remove from that object that transformation, so that\n     * added in a space with the removed transform, the object will be the same as before.\n     * Removing from an object a transform that scale by 2 is like scaling it by 1/2.\n     * Removing from an object a transfrom that rotate by 30deg is like rotating by 30deg\n     * in the opposite direction.\n     * This util is used to add objects inside transformed groups or nested groups.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    removeTransformFromObject: function(object, transform) {\n      var inverted = fabric.util.invertTransform(transform),\n          finalTransform = fabric.util.multiplyTransformMatrices(inverted, object.calcOwnMatrix());\n      fabric.util.applyTransformToObject(object, finalTransform);\n    },\n\n    /**\n     * given an object and a transform, apply the transform to the object.\n     * this is equivalent to change the space where the object is drawn.\n     * Adding to an object a transform that scale by 2 is like scaling it by 2.\n     * This is used when removing an object from an active selection for example.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    addTransformToObject: function(object, transform) {\n      fabric.util.applyTransformToObject(\n        object,\n        fabric.util.multiplyTransformMatrices(transform, object.calcOwnMatrix())\n      );\n    },\n\n    /**\n     * discard an object transform state and apply the one from the matrix.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    applyTransformToObject: function(object, transform) {\n      var options = fabric.util.qrDecompose(transform),\n          center = new fabric.Point(options.translateX, options.translateY);\n      object.flipX = false;\n      object.flipY = false;\n      object.set('scaleX', options.scaleX);\n      object.set('scaleY', options.scaleY);\n      object.skewX = options.skewX;\n      object.skewY = options.skewY;\n      object.angle = options.angle;\n      object.setPositionByOrigin(center, 'center', 'center');\n    },\n\n    /**\n     * given a width and height, return the size of the bounding box\n     * that can contains the box with width/height with applied transform\n     * described in options.\n     * Use to calculate the boxes around objects for controls.\n     * @memberOf fabric.util\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Object} options\n     * @param {Number} options.scaleX\n     * @param {Number} options.scaleY\n     * @param {Number} options.skewX\n     * @param {Number} options.skewY\n     * @return {Object.x} width of containing\n     * @return {Object.y} height of containing\n     */\n    sizeAfterTransform: function(width, height, options) {\n      var dimX = width / 2, dimY = height / 2,\n          points = [\n            {\n              x: -dimX,\n              y: -dimY\n            },\n            {\n              x: dimX,\n              y: -dimY\n            },\n            {\n              x: -dimX,\n              y: dimY\n            },\n            {\n              x: dimX,\n              y: dimY\n            }],\n          transformMatrix = fabric.util.calcDimensionsMatrix(options),\n          bbox = fabric.util.makeBoundingBoxFromPoints(points, transformMatrix);\n      return {\n        x: bbox.width,\n        y: bbox.height,\n      };\n    }\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n  var _join = Array.prototype.join,\n      commandLengths = {\n        m: 2,\n        l: 2,\n        h: 1,\n        v: 1,\n        c: 6,\n        s: 4,\n        q: 4,\n        t: 2,\n        a: 7\n      },\n      repeatedCommands = {\n        m: 'l',\n        M: 'L'\n      };\n  function segmentToBezier(th2, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY) {\n    var costh2 = fabric.util.cos(th2),\n        sinth2 = fabric.util.sin(th2),\n        costh3 = fabric.util.cos(th3),\n        sinth3 = fabric.util.sin(th3),\n        toX = cosTh * rx * costh3 - sinTh * ry * sinth3 + cx1,\n        toY = sinTh * rx * costh3 + cosTh * ry * sinth3 + cy1,\n        cp1X = fromX + mT * ( -cosTh * rx * sinth2 - sinTh * ry * costh2),\n        cp1Y = fromY + mT * ( -sinTh * rx * sinth2 + cosTh * ry * costh2),\n        cp2X = toX + mT * ( cosTh * rx * sinth3 + sinTh * ry * costh3),\n        cp2Y = toY + mT * ( sinTh * rx * sinth3 - cosTh * ry * costh3);\n\n    return ['C',\n      cp1X, cp1Y,\n      cp2X, cp2Y,\n      toX, toY\n    ];\n  }\n\n  /* Adapted from http://dxr.mozilla.org/mozilla-central/source/content/svg/content/src/nsSVGPathDataParser.cpp\n   * by Andrea Bogazzi code is under MPL. if you don't have a copy of the license you can take it here\n   * http://mozilla.org/MPL/2.0/\n   */\n  function arcToSegments(toX, toY, rx, ry, large, sweep, rotateX) {\n    var PI = Math.PI, th = rotateX * PI / 180,\n        sinTh = fabric.util.sin(th),\n        cosTh = fabric.util.cos(th),\n        fromX = 0, fromY = 0;\n\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n\n    var px = -cosTh * toX * 0.5 - sinTh * toY * 0.5,\n        py = -cosTh * toY * 0.5 + sinTh * toX * 0.5,\n        rx2 = rx * rx, ry2 = ry * ry, py2 = py * py, px2 = px * px,\n        pl = rx2 * ry2 - rx2 * py2 - ry2 * px2,\n        root = 0;\n\n    if (pl < 0) {\n      var s = Math.sqrt(1 - pl / (rx2 * ry2));\n      rx *= s;\n      ry *= s;\n    }\n    else {\n      root = (large === sweep ? -1.0 : 1.0) *\n              Math.sqrt( pl / (rx2 * py2 + ry2 * px2));\n    }\n\n    var cx = root * rx * py / ry,\n        cy = -root * ry * px / rx,\n        cx1 = cosTh * cx - sinTh * cy + toX * 0.5,\n        cy1 = sinTh * cx + cosTh * cy + toY * 0.5,\n        mTheta = calcVectorAngle(1, 0, (px - cx) / rx, (py - cy) / ry),\n        dtheta = calcVectorAngle((px - cx) / rx, (py - cy) / ry, (-px - cx) / rx, (-py - cy) / ry);\n\n    if (sweep === 0 && dtheta > 0) {\n      dtheta -= 2 * PI;\n    }\n    else if (sweep === 1 && dtheta < 0) {\n      dtheta += 2 * PI;\n    }\n\n    // Convert into cubic bezier segments <= 90deg\n    var segments = Math.ceil(Math.abs(dtheta / PI * 2)),\n        result = [], mDelta = dtheta / segments,\n        mT = 8 / 3 * Math.sin(mDelta / 4) * Math.sin(mDelta / 4) / Math.sin(mDelta / 2),\n        th3 = mTheta + mDelta;\n\n    for (var i = 0; i < segments; i++) {\n      result[i] = segmentToBezier(mTheta, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY);\n      fromX = result[i][5];\n      fromY = result[i][6];\n      mTheta = th3;\n      th3 += mDelta;\n    }\n    return result;\n  }\n\n  /*\n   * Private\n   */\n  function calcVectorAngle(ux, uy, vx, vy) {\n    var ta = Math.atan2(uy, ux),\n        tb = Math.atan2(vy, vx);\n    if (tb >= ta) {\n      return tb - ta;\n    }\n    else {\n      return 2 * Math.PI - (ta - tb);\n    }\n  }\n\n  /**\n   * Calculate bounding box of a beziercurve\n   * @param {Number} x0 starting point\n   * @param {Number} y0\n   * @param {Number} x1 first control point\n   * @param {Number} y1\n   * @param {Number} x2 secondo control point\n   * @param {Number} y2\n   * @param {Number} x3 end of bezier\n   * @param {Number} y3\n   */\n  // taken from http://jsbin.com/ivomiq/56/edit  no credits available for that.\n  // TODO: can we normalize this with the starting points set at 0 and then translated the bbox?\n  function getBoundsOfCurve(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var argsString;\n    if (fabric.cachesBoundsOfCurve) {\n      argsString = _join.call(arguments);\n      if (fabric.boundsOfCurveCache[argsString]) {\n        return fabric.boundsOfCurveCache[argsString];\n      }\n    }\n\n    var sqrt = Math.sqrt,\n        min = Math.min, max = Math.max,\n        abs = Math.abs, tvalues = [],\n        bounds = [[], []],\n        a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n    b = 6 * x0 - 12 * x1 + 6 * x2;\n    a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n    c = 3 * x1 - 3 * x0;\n\n    for (var i = 0; i < 2; ++i) {\n      if (i > 0) {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n\n      if (abs(a) < 1e-12) {\n        if (abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      if (b2ac < 0) {\n        continue;\n      }\n      sqrtb2ac = sqrt(b2ac);\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    var x, y, j = tvalues.length, jlen = j, mt;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n      bounds[0][j] = x;\n\n      y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n      bounds[1][j] = y;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    var result = [\n      {\n        x: min.apply(null, bounds[0]),\n        y: min.apply(null, bounds[1])\n      },\n      {\n        x: max.apply(null, bounds[0]),\n        y: max.apply(null, bounds[1])\n      }\n    ];\n    if (fabric.cachesBoundsOfCurve) {\n      fabric.boundsOfCurveCache[argsString] = result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts arc to a bunch of bezier curves\n   * @param {Number} fx starting point x\n   * @param {Number} fy starting point y\n   * @param {Array} coords Arc command\n   */\n  function fromArcToBeziers(fx, fy, coords) {\n    var rx = coords[1],\n        ry = coords[2],\n        rot = coords[3],\n        large = coords[4],\n        sweep = coords[5],\n        tx = coords[6],\n        ty = coords[7],\n        segsNorm = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segsNorm.length; i < len; i++) {\n      segsNorm[i][1] += fx;\n      segsNorm[i][2] += fy;\n      segsNorm[i][3] += fx;\n      segsNorm[i][4] += fy;\n      segsNorm[i][5] += fx;\n      segsNorm[i][6] += fy;\n    }\n    return segsNorm;\n  };\n\n  /**\n   * This function take a parsed SVG path and make it simpler for fabricJS logic.\n   * simplification consist of: only UPPERCASE absolute commands ( relative converted to absolute )\n   * S converted in C, T converted in Q, A converted in C.\n   * @param {Array} path the array of commands of a parsed svg path for fabric.Path\n   * @return {Array} the simplified array of commands of a parsed svg path for fabric.Path\n   */\n  function makePathSimpler(path) {\n    // x and y represent the last point of the path. the previous command point.\n    // we add them to each relative command to make it an absolute comment.\n    // we also swap the v V h H with L, because are easier to transform.\n    var x = 0, y = 0, len = path.length,\n        // x1 and y1 represent the last point of the subpath. the subpath is started with\n        // m or M command. When a z or Z command is drawn, x and y need to be resetted to\n        // the last x1 and y1.\n        x1 = 0, y1 = 0, current, i, converted,\n        // previous will host the letter of the previous command, to handle S and T.\n        // controlX and controlY will host the previous reflected control point\n        destinationPath = [], previous, controlX, controlY;\n    for (i = 0; i < len; ++i) {\n      converted = false;\n      current = path[i].slice(0);\n      switch (current[0]) { // first letter\n        case 'l': // lineto, relative\n          current[0] = 'L';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'L':\n          x = current[1];\n          y = current[2];\n          break;\n        case 'h': // horizontal lineto, relative\n          current[1] += x;\n          // falls through\n        case 'H':\n          current[0] = 'L';\n          current[2] = y;\n          x = current[1];\n          break;\n        case 'v': // vertical lineto, relative\n          current[1] += y;\n          // falls through\n        case 'V':\n          current[0] = 'L';\n          y = current[1];\n          current[1] = x;\n          current[2] = y;\n          break;\n        case 'm': // moveTo, relative\n          current[0] = 'M';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'M':\n          x = current[1];\n          y = current[2];\n          x1 = current[1];\n          y1 = current[2];\n          break;\n        case 'c': // bezierCurveTo, relative\n          current[0] = 'C';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          current[5] += x;\n          current[6] += y;\n          // falls through\n        case 'C':\n          controlX = current[3];\n          controlY = current[4];\n          x = current[5];\n          y = current[6];\n          break;\n        case 's': // shorthand cubic bezierCurveTo, relative\n          current[0] = 'S';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          // falls through\n        case 'S':\n          // would be sScC but since we are swapping sSc for C, we check just that.\n          if (previous === 'C') {\n            // calculate reflection of previous control points\n            controlX = 2 * x - controlX;\n            controlY = 2 * y - controlY;\n          }\n          else {\n            // If there is no previous command or if the previous command was not a C, c, S, or s,\n            // the control point is coincident with the current point\n            controlX = x;\n            controlY = y;\n          }\n          x = current[3];\n          y = current[4];\n          current[0] = 'C';\n          current[5] = current[3];\n          current[6] = current[4];\n          current[3] = current[1];\n          current[4] = current[2];\n          current[1] = controlX;\n          current[2] = controlY;\n          // current[3] and current[4] are NOW the second control point.\n          // we keep it for the next reflection.\n          controlX = current[3];\n          controlY = current[4];\n          break;\n        case 'q': // quadraticCurveTo, relative\n          current[0] = 'Q';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          // falls through\n        case 'Q':\n          controlX = current[1];\n          controlY = current[2];\n          x = current[3];\n          y = current[4];\n          break;\n        case 't': // shorthand quadraticCurveTo, relative\n          current[0] = 'T';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'T':\n          if (previous === 'Q') {\n            // calculate reflection of previous control point\n            controlX = 2 * x - controlX;\n            controlY = 2 * y - controlY;\n          }\n          else {\n            // If there is no previous command or if the previous command was not a Q, q, T or t,\n            // assume the control point is coincident with the current point\n            controlX = x;\n            controlY = y;\n          }\n          current[0] = 'Q';\n          x = current[1];\n          y = current[2];\n          current[1] = controlX;\n          current[2] = controlY;\n          current[3] = x;\n          current[4] = y;\n          break;\n        case 'a':\n          current[0] = 'A';\n          current[6] += x;\n          current[7] += y;\n          // falls through\n        case 'A':\n          converted = true;\n          destinationPath = destinationPath.concat(fromArcToBeziers(x, y, current));\n          x = current[6];\n          y = current[7];\n          break;\n        case 'z':\n        case 'Z':\n          x = x1;\n          y = y1;\n          break;\n        default:\n      }\n      if (!converted) {\n        destinationPath.push(current);\n      }\n      previous = current[0];\n    }\n    return destinationPath;\n  };\n\n  /**\n   * Calc length from point x1,y1 to x2,y2\n   * @param {Number} x1 starting point x\n   * @param {Number} y1 starting point y\n   * @param {Number} x2 starting point x\n   * @param {Number} y2 starting point y\n   * @return {Number} length of segment\n   */\n  function calcLineLength(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  // functions for the Cubic beizer\n  // taken from: https://github.com/konvajs/konva/blob/7.0.5/src/shapes/Path.ts#L350\n  function CB1(t) {\n    return t * t * t;\n  }\n  function CB2(t) {\n    return 3 * t * t * (1 - t);\n  }\n  function CB3(t) {\n    return 3 * t * (1 - t) * (1 - t);\n  }\n  function CB4(t) {\n    return (1 - t) * (1 - t) * (1 - t);\n  }\n\n  function getPointOnCubicBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return function(pct) {\n      var c1 = CB1(pct), c2 = CB2(pct), c3 = CB3(pct), c4 = CB4(pct);\n      return {\n        x: p4x * c1 + p3x * c2 + p2x * c3 + p1x * c4,\n        y: p4y * c1 + p3y * c2 + p2y * c3 + p1y * c4\n      };\n    };\n  }\n\n  function getTangentCubicIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return function (pct) {\n      var invT = 1 - pct,\n          tangentX = (3 * invT * invT * (p2x - p1x)) + (6 * invT * pct * (p3x - p2x)) +\n          (3 * pct * pct * (p4x - p3x)),\n          tangentY = (3 * invT * invT * (p2y - p1y)) + (6 * invT * pct * (p3y - p2y)) +\n          (3 * pct * pct * (p4y - p3y));\n      return Math.atan2(tangentY, tangentX);\n    };\n  }\n\n  function QB1(t) {\n    return t * t;\n  }\n\n  function QB2(t) {\n    return 2 * t * (1 - t);\n  }\n\n  function QB3(t) {\n    return (1 - t) * (1 - t);\n  }\n\n  function getPointOnQuadraticBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return function(pct) {\n      var c1 = QB1(pct), c2 = QB2(pct), c3 = QB3(pct);\n      return {\n        x: p3x * c1 + p2x * c2 + p1x * c3,\n        y: p3y * c1 + p2y * c2 + p1y * c3\n      };\n    };\n  }\n\n  function getTangentQuadraticIterator(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return function (pct) {\n      var invT = 1 - pct,\n          tangentX = (2 * invT * (p2x - p1x)) + (2 * pct * (p3x - p2x)),\n          tangentY = (2 * invT * (p2y - p1y)) + (2 * pct * (p3y - p2y));\n      return Math.atan2(tangentY, tangentX);\n    };\n  }\n\n\n  // this will run over a path segment ( a cubic or quadratic segment) and approximate it\n  // with 100 segemnts. This will good enough to calculate the length of the curve\n  function pathIterator(iterator, x1, y1) {\n    var tempP = { x: x1, y: y1 }, p, tmpLen = 0, perc;\n    for (perc = 0.01; perc <= 1; perc += 0.01) {\n      p = iterator(perc);\n      tmpLen += calcLineLength(tempP.x, tempP.y, p.x, p.y);\n      tempP = p;\n    }\n    return tmpLen;\n  }\n\n  /**\n   * Given a pathInfo, and a distance in pixels, find the percentage from 0 to 1\n   * that correspond to that pixels run over the path.\n   * The percentage will be then used to find the correct point on the canvas for the path.\n   * @param {Array} segInfo fabricJS collection of information on a parsed path\n   * @param {Number} distance from starting point, in pixels.\n   * @return {Object} info object with x and y ( the point on canvas ) and angle, the tangent on that point;\n   */\n  function findPercentageForDistance(segInfo, distance) {\n    var perc = 0, tmpLen = 0, iterator = segInfo.iterator, tempP = { x: segInfo.x, y: segInfo.y },\n        p, nextLen, nextStep = 0.01, angleFinder = segInfo.angleFinder, lastPerc;\n    // nextStep > 0.0001 covers 0.00015625 that 1/64th of 1/100\n    // the path\n    while (tmpLen < distance && perc <= 1 && nextStep > 0.0001) {\n      p = iterator(perc);\n      lastPerc = perc;\n      nextLen = calcLineLength(tempP.x, tempP.y, p.x, p.y);\n      // compare tmpLen each cycle with distance, decide next perc to test.\n      if ((nextLen + tmpLen) > distance) {\n        // we discard this step and we make smaller steps.\n        nextStep /= 2;\n        perc -= nextStep;\n      }\n      else {\n        tempP = p;\n        perc += nextStep;\n        tmpLen += nextLen;\n      }\n    }\n    p.angle = angleFinder(lastPerc);\n    return p;\n  }\n\n  /**\n   * Run over a parsed and simplifed path and extrac some informations.\n   * informations are length of each command and starting point\n   * @param {Array} path fabricJS parsed path commands\n   * @return {Array} path commands informations\n   */\n  function getPathSegmentsInfo(path) {\n    var totalLength = 0, len = path.length, current,\n        //x2 and y2 are the coords of segment start\n        //x1 and y1 are the coords of the current point\n        x1 = 0, y1 = 0, x2 = 0, y2 = 0, info = [], iterator, tempInfo, angleFinder;\n    for (var i = 0; i < len; i++) {\n      current = path[i];\n      tempInfo = {\n        x: x1,\n        y: y1,\n        command: current[0],\n      };\n      switch (current[0]) { //first letter\n        case 'M':\n          tempInfo.length = 0;\n          x2 = x1 = current[1];\n          y2 = y1 = current[2];\n          break;\n        case 'L':\n          tempInfo.length = calcLineLength(x1, y1, current[1], current[2]);\n          x1 = current[1];\n          y1 = current[2];\n          break;\n        case 'C':\n          iterator = getPointOnCubicBezierIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4],\n            current[5],\n            current[6]\n          );\n          angleFinder = getTangentCubicIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4],\n            current[5],\n            current[6]\n          );\n          tempInfo.iterator = iterator;\n          tempInfo.angleFinder = angleFinder;\n          tempInfo.length = pathIterator(iterator, x1, y1);\n          x1 = current[5];\n          y1 = current[6];\n          break;\n        case 'Q':\n          iterator = getPointOnQuadraticBezierIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4]\n          );\n          angleFinder = getTangentQuadraticIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4]\n          );\n          tempInfo.iterator = iterator;\n          tempInfo.angleFinder = angleFinder;\n          tempInfo.length = pathIterator(iterator, x1, y1);\n          x1 = current[3];\n          y1 = current[4];\n          break;\n        case 'Z':\n        case 'z':\n          // we add those in order to ease calculations later\n          tempInfo.destX = x2;\n          tempInfo.destY = y2;\n          tempInfo.length = calcLineLength(x1, y1, x2, y2);\n          x1 = x2;\n          y1 = y2;\n          break;\n      }\n      totalLength += tempInfo.length;\n      info.push(tempInfo);\n    }\n    info.push({ length: totalLength, x: x1, y: y1 });\n    return info;\n  }\n\n  function getPointOnPath(path, distance, infos) {\n    if (!infos) {\n      infos = getPathSegmentsInfo(path);\n    }\n    var i = 0;\n    while ((distance - infos[i].length > 0) && i < (infos.length - 2)) {\n      distance -= infos[i].length;\n      i++;\n    }\n    // var distance = infos[infos.length - 1] * perc;\n    var segInfo = infos[i], segPercent = distance / segInfo.length,\n        command = segInfo.command, segment = path[i], info;\n\n    switch (command) {\n      case 'M':\n        return { x: segInfo.x, y: segInfo.y, angle: 0 };\n      case 'Z':\n      case 'z':\n        info = new fabric.Point(segInfo.x, segInfo.y).lerp(\n          new fabric.Point(segInfo.destX, segInfo.destY),\n          segPercent\n        );\n        info.angle = Math.atan2(segInfo.destY - segInfo.y, segInfo.destX - segInfo.x);\n        return info;\n      case 'L':\n        info = new fabric.Point(segInfo.x, segInfo.y).lerp(\n          new fabric.Point(segment[1], segment[2]),\n          segPercent\n        );\n        info.angle = Math.atan2(segment[2] - segInfo.y, segment[1] - segInfo.x);\n        return info;\n      case 'C':\n        return findPercentageForDistance(segInfo, distance);\n      case 'Q':\n        return findPercentageForDistance(segInfo, distance);\n    }\n  }\n\n  function parsePath(pathString) {\n    var result = [],\n        coords = [],\n        currentPath,\n        parsed,\n        re = fabric.rePathCommand,\n        rNumber = '[-+]?(?:\\\\d*\\\\.\\\\d+|\\\\d+\\\\.?)(?:[eE][-+]?\\\\d+)?\\\\s*',\n        rNumberCommaWsp = '(' + rNumber + ')' + fabric.commaWsp,\n        rFlagCommaWsp = '([01])' + fabric.commaWsp + '?',\n        rArcSeq = rNumberCommaWsp + '?' + rNumberCommaWsp + '?' + rNumberCommaWsp + rFlagCommaWsp + rFlagCommaWsp +\n          rNumberCommaWsp + '?(' + rNumber + ')',\n        regArcArgumentSequence = new RegExp(rArcSeq, 'g'),\n        match,\n        coordsStr,\n        // one of commands (m,M,l,L,q,Q,c,C,etc.) followed by non-command characters (i.e. command values)\n        path;\n    if (!pathString || !pathString.match) {\n      return result;\n    }\n    path = pathString.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);\n\n    for (var i = 0, coordsParsed, len = path.length; i < len; i++) {\n      currentPath = path[i];\n\n      coordsStr = currentPath.slice(1).trim();\n      coords.length = 0;\n\n      var command = currentPath.charAt(0);\n      coordsParsed = [command];\n\n      if (command.toLowerCase() === 'a') {\n        // arcs have special flags that apparently don't require spaces so handle special\n        for (var args; (args = regArcArgumentSequence.exec(coordsStr));) {\n          for (var j = 1; j < args.length; j++) {\n            coords.push(args[j]);\n          }\n        }\n      }\n      else {\n        while ((match = re.exec(coordsStr))) {\n          coords.push(match[0]);\n        }\n      }\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        parsed = parseFloat(coords[j]);\n        if (!isNaN(parsed)) {\n          coordsParsed.push(parsed);\n        }\n      }\n\n      var commandLength = commandLengths[command.toLowerCase()],\n          repeatedCommand = repeatedCommands[command] || command;\n\n      if (coordsParsed.length - 1 > commandLength) {\n        for (var k = 1, klen = coordsParsed.length; k < klen; k += commandLength) {\n          result.push([command].concat(coordsParsed.slice(k, k + commandLength)));\n          command = repeatedCommand;\n        }\n      }\n      else {\n        result.push(coordsParsed);\n      }\n    }\n\n    return result;\n  };\n\n  /**\n   * Calculate bounding box of a elliptic-arc\n   * @deprecated\n   * @param {Number} fx start point of arc\n   * @param {Number} fy\n   * @param {Number} rx horizontal radius\n   * @param {Number} ry vertical radius\n   * @param {Number} rot angle of horizontal axis\n   * @param {Number} large 1 or 0, whatever the arc is the big or the small on the 2 points\n   * @param {Number} sweep 1 or 0, 1 clockwise or counterclockwise direction\n   * @param {Number} tx end point of arc\n   * @param {Number} ty\n   */\n  function getBoundsOfArc(fx, fy, rx, ry, rot, large, sweep, tx, ty) {\n\n    var fromX = 0, fromY = 0, bound, bounds = [],\n        segs = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segs.length; i < len; i++) {\n      bound = getBoundsOfCurve(fromX, fromY, segs[i][1], segs[i][2], segs[i][3], segs[i][4], segs[i][5], segs[i][6]);\n      bounds.push({ x: bound[0].x + fx, y: bound[0].y + fy });\n      bounds.push({ x: bound[1].x + fx, y: bound[1].y + fy });\n      fromX = segs[i][5];\n      fromY = segs[i][6];\n    }\n    return bounds;\n  };\n\n  /**\n   * Draws arc\n   * @deprecated\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Number} fx\n   * @param {Number} fy\n   * @param {Array} coords coords of the arc, without the front 'A/a'\n   */\n  function drawArc(ctx, fx, fy, coords) {\n    coords = coords.slice(0).unshift('X'); // command A or a does not matter\n    var beziers = fromArcToBeziers(fx, fy, coords);\n    beziers.forEach(function(bezier) {\n      ctx.bezierCurveTo.apply(ctx, bezier.slice(1));\n    });\n  };\n\n  fabric.util.parsePath = parsePath;\n  fabric.util.makePathSimpler = makePathSimpler;\n  fabric.util.getPathSegmentsInfo = getPathSegmentsInfo;\n  fabric.util.fromArcToBeziers = fromArcToBeziers;\n  /**\n   * Typo of `fromArcToBeziers` kept for not breaking the api once corrected.\n   * Will be removed in fabric 5.0\n   * @deprecated\n   */\n  fabric.util.fromArcToBeizers = fromArcToBeziers;\n  fabric.util.getBoundsOfCurve = getBoundsOfCurve;\n  fabric.util.getPointOnPath = getPointOnPath;\n  // kept because we do not want to make breaking changes.\n  // but useless and deprecated.\n  fabric.util.getBoundsOfArc = getBoundsOfArc;\n  fabric.util.drawArc = drawArc;\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice;\n\n  /**\n   * Invokes method on all items in a given array\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} method Name of a method to invoke\n   * @return {Array}\n   */\n  function invoke(array, method) {\n    var args = slice.call(arguments, 2), result = [];\n    for (var i = 0, len = array.length; i < len; i++) {\n      result[i] = args.length ? array[i][method].apply(array[i], args) : array[i][method].call(array[i]);\n    }\n    return result;\n  }\n\n  /**\n   * Finds maximum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function max(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 >= value2;\n    });\n  }\n\n  /**\n   * Finds minimum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function min(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 < value2;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function fill(array, value) {\n    var k = array.length;\n    while (k--) {\n      array[k] = value;\n    }\n    return array;\n  }\n\n  /**\n   * @private\n   */\n  function find(array, byProperty, condition) {\n    if (!array || array.length === 0) {\n      return;\n    }\n\n    var i = array.length - 1,\n        result = byProperty ? array[i][byProperty] : array[i];\n    if (byProperty) {\n      while (i--) {\n        if (condition(array[i][byProperty], result)) {\n          result = array[i][byProperty];\n        }\n      }\n    }\n    else {\n      while (i--) {\n        if (condition(array[i], result)) {\n          result = array[i];\n        }\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @namespace fabric.util.array\n   */\n  fabric.util.array = {\n    fill: fill,\n    invoke: invoke,\n    min: min,\n    max: max\n  };\n\n})();\n\n\n(function() {\n  /**\n   * Copies all enumerable properties of one js object to another\n   * this does not and cannot compete with generic utils.\n   * Does not clone or extend fabric.Object subclasses.\n   * This is mostly for internal use and has extra handling for fabricJS objects\n   * it skips the canvas and group properties in deep cloning.\n   * @memberOf fabric.util.object\n   * @param {Object} destination Where to copy to\n   * @param {Object} source Where to copy from\n   * @return {Object}\n   */\n\n  function extend(destination, source, deep) {\n    // JScript DontEnum bug is not taken care of\n    // the deep clone is for internal use, is not meant to avoid\n    // javascript traps or cloning html element or self referenced objects.\n    if (deep) {\n      if (!fabric.isLikelyNode && source instanceof Element) {\n        // avoid cloning deep images, canvases,\n        destination = source;\n      }\n      else if (source instanceof Array) {\n        destination = [];\n        for (var i = 0, len = source.length; i < len; i++) {\n          destination[i] = extend({ }, source[i], deep);\n        }\n      }\n      else if (source && typeof source === 'object') {\n        for (var property in source) {\n          if (property === 'canvas' || property === 'group') {\n            // we do not want to clone this props at all.\n            // we want to keep the keys in the copy\n            destination[property] = null;\n          }\n          else if (source.hasOwnProperty(property)) {\n            destination[property] = extend({ }, source[property], deep);\n          }\n        }\n      }\n      else {\n        // this sounds odd for an extend but is ok for recursive use\n        destination = source;\n      }\n    }\n    else {\n      for (var property in source) {\n        destination[property] = source[property];\n      }\n    }\n    return destination;\n  }\n\n  /**\n   * Creates an empty object and copies all enumerable properties of another object to it\n   * @memberOf fabric.util.object\n   * TODO: this function return an empty object if you try to clone null\n   * @param {Object} object Object to clone\n   * @return {Object}\n   */\n  function clone(object, deep) {\n    return extend({ }, object, deep);\n  }\n\n  /** @namespace fabric.util.object */\n  fabric.util.object = {\n    extend: extend,\n    clone: clone\n  };\n  fabric.util.object.extend(fabric.util, fabric.Observable);\n})();\n\n\n(function() {\n\n  /**\n   * Camelizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to camelize\n   * @return {String} Camelized version of a string\n   */\n  function camelize(string) {\n    return string.replace(/-+(.)?/g, function(match, character) {\n      return character ? character.toUpperCase() : '';\n    });\n  }\n\n  /**\n   * Capitalizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to capitalize\n   * @param {Boolean} [firstLetterOnly] If true only first letter is capitalized\n   * and other letters stay untouched, if false first letter is capitalized\n   * and other letters are converted to lowercase.\n   * @return {String} Capitalized version of a string\n   */\n  function capitalize(string, firstLetterOnly) {\n    return string.charAt(0).toUpperCase() +\n      (firstLetterOnly ? string.slice(1) : string.slice(1).toLowerCase());\n  }\n\n  /**\n   * Escapes XML in a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to escape\n   * @return {String} Escaped version of a string\n   */\n  function escapeXml(string) {\n    return string.replace(/&/g, '&amp;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n\n  /**\n   * Divide a string in the user perceived single units\n   * @memberOf fabric.util.string\n   * @param {String} textstring String to escape\n   * @return {Array} array containing the graphemes\n   */\n  function graphemeSplit(textstring) {\n    var i = 0, chr, graphemes = [];\n    for (i = 0, chr; i < textstring.length; i++) {\n      if ((chr = getWholeChar(textstring, i)) === false) {\n        continue;\n      }\n      graphemes.push(chr);\n    }\n    return graphemes;\n  }\n\n  // taken from mdn in the charAt doc page.\n  function getWholeChar(str, i) {\n    var code = str.charCodeAt(i);\n\n    if (isNaN(code)) {\n      return ''; // Position not found\n    }\n    if (code < 0xD800 || code > 0xDFFF) {\n      return str.charAt(i);\n    }\n\n    // High surrogate (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xD800 <= code && code <= 0xDBFF) {\n      if (str.length <= (i + 1)) {\n        throw 'High surrogate without following low surrogate';\n      }\n      var next = str.charCodeAt(i + 1);\n      if (0xDC00 > next || next > 0xDFFF) {\n        throw 'High surrogate without following low surrogate';\n      }\n      return str.charAt(i) + str.charAt(i + 1);\n    }\n    // Low surrogate (0xDC00 <= code && code <= 0xDFFF)\n    if (i === 0) {\n      throw 'Low surrogate without preceding high surrogate';\n    }\n    var prev = str.charCodeAt(i - 1);\n\n    // (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xD800 > prev || prev > 0xDBFF) {\n      throw 'Low surrogate without preceding high surrogate';\n    }\n    // We can pass over low surrogates now as the second component\n    // in a pair which we have already processed\n    return false;\n  }\n\n\n  /**\n   * String utilities\n   * @namespace fabric.util.string\n   */\n  fabric.util.string = {\n    camelize: camelize,\n    capitalize: capitalize,\n    escapeXml: escapeXml,\n    graphemeSplit: graphemeSplit\n  };\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice, emptyFunction = function() { },\n\n      IS_DONTENUM_BUGGY = (function() {\n        for (var p in { toString: 1 }) {\n          if (p === 'toString') {\n            return false;\n          }\n        }\n        return true;\n      })(),\n\n      /** @ignore */\n      addMethods = function(klass, source, parent) {\n        for (var property in source) {\n\n          if (property in klass.prototype &&\n              typeof klass.prototype[property] === 'function' &&\n              (source[property] + '').indexOf('callSuper') > -1) {\n\n            klass.prototype[property] = (function(property) {\n              return function() {\n\n                var superclass = this.constructor.superclass;\n                this.constructor.superclass = parent;\n                var returnValue = source[property].apply(this, arguments);\n                this.constructor.superclass = superclass;\n\n                if (property !== 'initialize') {\n                  return returnValue;\n                }\n              };\n            })(property);\n          }\n          else {\n            klass.prototype[property] = source[property];\n          }\n\n          if (IS_DONTENUM_BUGGY) {\n            if (source.toString !== Object.prototype.toString) {\n              klass.prototype.toString = source.toString;\n            }\n            if (source.valueOf !== Object.prototype.valueOf) {\n              klass.prototype.valueOf = source.valueOf;\n            }\n          }\n        }\n      };\n\n  function Subclass() { }\n\n  function callSuper(methodName) {\n    var parentMethod = null,\n        _this = this;\n\n    // climb prototype chain to find method not equal to callee's method\n    while (_this.constructor.superclass) {\n      var superClassMethod = _this.constructor.superclass.prototype[methodName];\n      if (_this[methodName] !== superClassMethod) {\n        parentMethod = superClassMethod;\n        break;\n      }\n      // eslint-disable-next-line\n      _this = _this.constructor.superclass.prototype;\n    }\n\n    if (!parentMethod) {\n      return console.log('tried to callSuper ' + methodName + ', method not found in prototype chain', this);\n    }\n\n    return (arguments.length > 1)\n      ? parentMethod.apply(this, slice.call(arguments, 1))\n      : parentMethod.call(this);\n  }\n\n  /**\n   * Helper for creation of \"classes\".\n   * @memberOf fabric.util\n   * @param {Function} [parent] optional \"Class\" to inherit from\n   * @param {Object} [properties] Properties shared by all instances of this class\n   *                  (be careful modifying objects defined here as this would affect all instances)\n   */\n  function createClass() {\n    var parent = null,\n        properties = slice.call(arguments, 0);\n\n    if (typeof properties[0] === 'function') {\n      parent = properties.shift();\n    }\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      Subclass.prototype = parent.prototype;\n      klass.prototype = new Subclass();\n      parent.subclasses.push(klass);\n    }\n    for (var i = 0, length = properties.length; i < length; i++) {\n      addMethods(klass, properties[i], parent);\n    }\n    if (!klass.prototype.initialize) {\n      klass.prototype.initialize = emptyFunction;\n    }\n    klass.prototype.constructor = klass;\n    klass.prototype.callSuper = callSuper;\n    return klass;\n  }\n\n  fabric.util.createClass = createClass;\n})();\n\n\n(function () {\n  // since ie11 can use addEventListener but they do not support options, i need to check\n  var couldUseAttachEvent = !!fabric.document.createElement('div').attachEvent,\n      touchEvents = ['touchstart', 'touchmove', 'touchend'];\n  /**\n   * Adds an event listener to an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.addListener = function(element, eventName, handler, options) {\n    element && element.addEventListener(eventName, handler, couldUseAttachEvent ? false : options);\n  };\n\n  /**\n   * Removes an event listener from an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.removeListener = function(element, eventName, handler, options) {\n    element && element.removeEventListener(eventName, handler, couldUseAttachEvent ? false : options);\n  };\n\n  function getTouchInfo(event) {\n    var touchProp = event.changedTouches;\n    if (touchProp && touchProp[0]) {\n      return touchProp[0];\n    }\n    return event;\n  }\n\n  fabric.util.getPointer = function(event) {\n    var element = event.target,\n        scroll = fabric.util.getScrollLeftTop(element),\n        _evt = getTouchInfo(event);\n    return {\n      x: _evt.clientX + scroll.left,\n      y: _evt.clientY + scroll.top\n    };\n  };\n\n  fabric.util.isTouchEvent = function(event) {\n    return touchEvents.indexOf(event.type) > -1 || event.pointerType === 'touch';\n  };\n})();\n\n\n(function () {\n\n  /**\n   * Cross-browser wrapper for setting element's style\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {Object} styles\n   * @return {HTMLElement} Element that was passed as a first argument\n   */\n  function setStyle(element, styles) {\n    var elementStyle = element.style;\n    if (!elementStyle) {\n      return element;\n    }\n    if (typeof styles === 'string') {\n      element.style.cssText += ';' + styles;\n      return styles.indexOf('opacity') > -1\n        ? setOpacity(element, styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1])\n        : element;\n    }\n    for (var property in styles) {\n      if (property === 'opacity') {\n        setOpacity(element, styles[property]);\n      }\n      else {\n        var normalizedProperty = (property === 'float' || property === 'cssFloat')\n          ? (typeof elementStyle.styleFloat === 'undefined' ? 'cssFloat' : 'styleFloat')\n          : property;\n        elementStyle[normalizedProperty] = styles[property];\n      }\n    }\n    return element;\n  }\n\n  var parseEl = fabric.document.createElement('div'),\n      supportsOpacity = typeof parseEl.style.opacity === 'string',\n      supportsFilters = typeof parseEl.style.filter === 'string',\n      reOpacity = /alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,\n\n      /** @ignore */\n      setOpacity = function (element) { return element; };\n\n  if (supportsOpacity) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      element.style.opacity = value;\n      return element;\n    };\n  }\n  else if (supportsFilters) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      var es = element.style;\n      if (element.currentStyle && !element.currentStyle.hasLayout) {\n        es.zoom = 1;\n      }\n      if (reOpacity.test(es.filter)) {\n        value = value >= 0.9999 ? '' : ('alpha(opacity=' + (value * 100) + ')');\n        es.filter = es.filter.replace(reOpacity, value);\n      }\n      else {\n        es.filter += ' alpha(opacity=' + (value * 100) + ')';\n      }\n      return element;\n    };\n  }\n\n  fabric.util.setStyle = setStyle;\n\n})();\n\n\n(function() {\n\n  var _slice = Array.prototype.slice;\n\n  /**\n   * Takes id and returns an element with that id (if one exists in a document)\n   * @memberOf fabric.util\n   * @param {String|HTMLElement} id\n   * @return {HTMLElement|null}\n   */\n  function getById(id) {\n    return typeof id === 'string' ? fabric.document.getElementById(id) : id;\n  }\n\n  var sliceCanConvertNodelists,\n      /**\n       * Converts an array-like object (e.g. arguments or NodeList) to an array\n       * @memberOf fabric.util\n       * @param {Object} arrayLike\n       * @return {Array}\n       */\n      toArray = function(arrayLike) {\n        return _slice.call(arrayLike, 0);\n      };\n\n  try {\n    sliceCanConvertNodelists = toArray(fabric.document.childNodes) instanceof Array;\n  }\n  catch (err) { }\n\n  if (!sliceCanConvertNodelists) {\n    toArray = function(arrayLike) {\n      var arr = new Array(arrayLike.length), i = arrayLike.length;\n      while (i--) {\n        arr[i] = arrayLike[i];\n      }\n      return arr;\n    };\n  }\n\n  /**\n   * Creates specified element with specified attributes\n   * @memberOf fabric.util\n   * @param {String} tagName Type of an element to create\n   * @param {Object} [attributes] Attributes to set on an element\n   * @return {HTMLElement} Newly created element\n   */\n  function makeElement(tagName, attributes) {\n    var el = fabric.document.createElement(tagName);\n    for (var prop in attributes) {\n      if (prop === 'class') {\n        el.className = attributes[prop];\n      }\n      else if (prop === 'for') {\n        el.htmlFor = attributes[prop];\n      }\n      else {\n        el.setAttribute(prop, attributes[prop]);\n      }\n    }\n    return el;\n  }\n\n  /**\n   * Adds class to an element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to add class to\n   * @param {String} className Class to add to an element\n   */\n  function addClass(element, className) {\n    if (element && (' ' + element.className + ' ').indexOf(' ' + className + ' ') === -1) {\n      element.className += (element.className ? ' ' : '') + className;\n    }\n  }\n\n  /**\n   * Wraps element with another element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to wrap\n   * @param {HTMLElement|String} wrapper Element to wrap with\n   * @param {Object} [attributes] Attributes to set on a wrapper\n   * @return {HTMLElement} wrapper\n   */\n  function wrapElement(element, wrapper, attributes) {\n    if (typeof wrapper === 'string') {\n      wrapper = makeElement(wrapper, attributes);\n    }\n    if (element.parentNode) {\n      element.parentNode.replaceChild(wrapper, element);\n    }\n    wrapper.appendChild(element);\n    return wrapper;\n  }\n\n  /**\n   * Returns element scroll offsets\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to operate on\n   * @return {Object} Object with left/top values\n   */\n  function getScrollLeftTop(element) {\n\n    var left = 0,\n        top = 0,\n        docElement = fabric.document.documentElement,\n        body = fabric.document.body || {\n          scrollLeft: 0, scrollTop: 0\n        };\n\n    // While loop checks (and then sets element to) .parentNode OR .host\n    //  to account for ShadowDOM. We still want to traverse up out of ShadowDOM,\n    //  but the .parentNode of a root ShadowDOM node will always be null, instead\n    //  it should be accessed through .host. See http://stackoverflow.com/a/24765528/4383938\n    while (element && (element.parentNode || element.host)) {\n\n      // Set element to element parent, or 'host' in case of ShadowDOM\n      element = element.parentNode || element.host;\n\n      if (element === fabric.document) {\n        left = body.scrollLeft || docElement.scrollLeft || 0;\n        top = body.scrollTop ||  docElement.scrollTop || 0;\n      }\n      else {\n        left += element.scrollLeft || 0;\n        top += element.scrollTop || 0;\n      }\n\n      if (element.nodeType === 1 && element.style.position === 'fixed') {\n        break;\n      }\n    }\n\n    return { left: left, top: top };\n  }\n\n  /**\n   * Returns offset for a given element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get offset for\n   * @return {Object} Object with \"left\" and \"top\" properties\n   */\n  function getElementOffset(element) {\n    var docElem,\n        doc = element && element.ownerDocument,\n        box = { left: 0, top: 0 },\n        offset = { left: 0, top: 0 },\n        scrollLeftTop,\n        offsetAttributes = {\n          borderLeftWidth: 'left',\n          borderTopWidth:  'top',\n          paddingLeft:     'left',\n          paddingTop:      'top'\n        };\n\n    if (!doc) {\n      return offset;\n    }\n\n    for (var attr in offsetAttributes) {\n      offset[offsetAttributes[attr]] += parseInt(getElementStyle(element, attr), 10) || 0;\n    }\n\n    docElem = doc.documentElement;\n    if ( typeof element.getBoundingClientRect !== 'undefined' ) {\n      box = element.getBoundingClientRect();\n    }\n\n    scrollLeftTop = getScrollLeftTop(element);\n\n    return {\n      left: box.left + scrollLeftTop.left - (docElem.clientLeft || 0) + offset.left,\n      top: box.top + scrollLeftTop.top - (docElem.clientTop || 0)  + offset.top\n    };\n  }\n\n  /**\n   * Returns style attribute value of a given element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get style attribute for\n   * @param {String} attr Style attribute to get for element\n   * @return {String} Style attribute value of the given element.\n   */\n  var getElementStyle;\n  if (fabric.document.defaultView && fabric.document.defaultView.getComputedStyle) {\n    getElementStyle = function(element, attr) {\n      var style = fabric.document.defaultView.getComputedStyle(element, null);\n      return style ? style[attr] : undefined;\n    };\n  }\n  else {\n    getElementStyle = function(element, attr) {\n      var value = element.style[attr];\n      if (!value && element.currentStyle) {\n        value = element.currentStyle[attr];\n      }\n      return value;\n    };\n  }\n\n  (function () {\n    var style = fabric.document.documentElement.style,\n        selectProp = 'userSelect' in style\n          ? 'userSelect'\n          : 'MozUserSelect' in style\n            ? 'MozUserSelect'\n            : 'WebkitUserSelect' in style\n              ? 'WebkitUserSelect'\n              : 'KhtmlUserSelect' in style\n                ? 'KhtmlUserSelect'\n                : '';\n\n    /**\n     * Makes element unselectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make unselectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementUnselectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = fabric.util.falseFunction;\n      }\n      if (selectProp) {\n        element.style[selectProp] = 'none';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = 'on';\n      }\n      return element;\n    }\n\n    /**\n     * Makes element selectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make selectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementSelectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = null;\n      }\n      if (selectProp) {\n        element.style[selectProp] = '';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = '';\n      }\n      return element;\n    }\n\n    fabric.util.makeElementUnselectable = makeElementUnselectable;\n    fabric.util.makeElementSelectable = makeElementSelectable;\n  })();\n\n  function getNodeCanvas(element) {\n    var impl = fabric.jsdomImplForWrapper(element);\n    return impl._canvas || impl._image;\n  };\n\n  function cleanUpJsdomNode(element) {\n    if (!fabric.isLikelyNode) {\n      return;\n    }\n    var impl = fabric.jsdomImplForWrapper(element);\n    if (impl) {\n      impl._image = null;\n      impl._canvas = null;\n      // unsure if necessary\n      impl._currentSrc = null;\n      impl._attributes = null;\n      impl._classList = null;\n    }\n  }\n\n  function setImageSmoothing(ctx, value) {\n    ctx.imageSmoothingEnabled = ctx.imageSmoothingEnabled || ctx.webkitImageSmoothingEnabled\n      || ctx.mozImageSmoothingEnabled || ctx.msImageSmoothingEnabled || ctx.oImageSmoothingEnabled;\n    ctx.imageSmoothingEnabled = value;\n  }\n\n  /**\n   * setImageSmoothing sets the context imageSmoothingEnabled property.\n   * Used by canvas and by ImageObject.\n   * @memberOf fabric.util\n   * @since 4.0.0\n   * @param {HTMLRenderingContext2D} ctx to set on\n   * @param {Boolean} value true or false\n   */\n  fabric.util.setImageSmoothing = setImageSmoothing;\n  fabric.util.getById = getById;\n  fabric.util.toArray = toArray;\n  fabric.util.addClass = addClass;\n  fabric.util.makeElement = makeElement;\n  fabric.util.wrapElement = wrapElement;\n  fabric.util.getScrollLeftTop = getScrollLeftTop;\n  fabric.util.getElementOffset = getElementOffset;\n  fabric.util.getNodeCanvas = getNodeCanvas;\n  fabric.util.cleanUpJsdomNode = cleanUpJsdomNode;\n\n})();\n\n\n(function() {\n\n  function addParamToUrl(url, param) {\n    return url + (/\\?/.test(url) ? '&' : '?') + param;\n  }\n\n  function emptyFn() { }\n\n  /**\n   * Cross-browser abstraction for sending XMLHttpRequest\n   * @memberOf fabric.util\n   * @param {String} url URL to send XMLHttpRequest to\n   * @param {Object} [options] Options object\n   * @param {String} [options.method=\"GET\"]\n   * @param {String} [options.parameters] parameters to append to url in GET or in body\n   * @param {String} [options.body] body to send with POST or PUT request\n   * @param {Function} options.onComplete Callback to invoke when request is completed\n   * @return {XMLHttpRequest} request\n   */\n  function request(url, options) {\n    options || (options = { });\n\n    var method = options.method ? options.method.toUpperCase() : 'GET',\n        onComplete = options.onComplete || function() { },\n        xhr = new fabric.window.XMLHttpRequest(),\n        body = options.body || options.parameters;\n\n    /** @ignore */\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState === 4) {\n        onComplete(xhr);\n        xhr.onreadystatechange = emptyFn;\n      }\n    };\n\n    if (method === 'GET') {\n      body = null;\n      if (typeof options.parameters === 'string') {\n        url = addParamToUrl(url, options.parameters);\n      }\n    }\n\n    xhr.open(method, url, true);\n\n    if (method === 'POST' || method === 'PUT') {\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n\n    xhr.send(body);\n    return xhr;\n  }\n\n  fabric.util.request = request;\n})();\n\n\n/**\n * Wrapper around `console.log` (when available)\n * @param {*} [values] Values to log\n */\nfabric.log = console.log;\n\n/**\n * Wrapper around `console.warn` (when available)\n * @param {*} [values] Values to log as a warning\n */\nfabric.warn = console.warn;\n\n\n(function() {\n\n  function noop() {\n    return false;\n  }\n\n  function defaultEasing(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Changes value from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Number} [options.startValue=0] Starting value\n   * @param {Number} [options.endValue=100] Ending value\n   * @param {Number} [options.byValue=100] Value to modify the property by\n   * @param {Function} [options.easing] Easing function\n   * @param {Number} [options.duration=500] Duration of change (in ms)\n   * @param {Function} [options.abort] Additional function with logic. If returns true, onComplete is called.\n   */\n  function animate(options) {\n\n    requestAnimFrame(function(timestamp) {\n      options || (options = { });\n\n      var start = timestamp || +new Date(),\n          duration = options.duration || 500,\n          finish = start + duration, time,\n          onChange = options.onChange || noop,\n          abort = options.abort || noop,\n          onComplete = options.onComplete || noop,\n          easing = options.easing || defaultEasing,\n          startValue = 'startValue' in options ? options.startValue : 0,\n          endValue = 'endValue' in options ? options.endValue : 100,\n          byValue = options.byValue || endValue - startValue;\n\n      options.onStart && options.onStart();\n\n      (function tick(ticktime) {\n        // TODO: move abort call after calculation\n        // and pass (current,valuePerc, timePerc) as arguments\n        time = ticktime || +new Date();\n        var currentTime = time > finish ? duration : (time - start),\n            timePerc = currentTime / duration,\n            current = easing(currentTime, startValue, byValue, duration),\n            valuePerc = Math.abs((current - startValue) / byValue);\n        if (abort()) {\n          onComplete(endValue, 1, 1);\n          return;\n        }\n        if (time > finish) {\n          onChange(endValue, 1, 1);\n          onComplete(endValue, 1, 1);\n          return;\n        }\n        else {\n          onChange(current, valuePerc, timePerc);\n          requestAnimFrame(tick);\n        }\n      })(start);\n    });\n  }\n\n  var _requestAnimFrame = fabric.window.requestAnimationFrame       ||\n                          fabric.window.webkitRequestAnimationFrame ||\n                          fabric.window.mozRequestAnimationFrame    ||\n                          fabric.window.oRequestAnimationFrame      ||\n                          fabric.window.msRequestAnimationFrame     ||\n                          function(callback) {\n                            return fabric.window.setTimeout(callback, 1000 / 60);\n                          };\n\n  var _cancelAnimFrame = fabric.window.cancelAnimationFrame || fabric.window.clearTimeout;\n\n  /**\n   * requestAnimationFrame polyfill based on http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   * In order to get a precise start time, `requestAnimFrame` should be called as an entry into the method\n   * @memberOf fabric.util\n   * @param {Function} callback Callback to invoke\n   * @param {DOMElement} element optional Element to associate with animation\n   */\n  function requestAnimFrame() {\n    return _requestAnimFrame.apply(fabric.window, arguments);\n  }\n\n  function cancelAnimFrame() {\n    return _cancelAnimFrame.apply(fabric.window, arguments);\n  }\n\n  fabric.util.animate = animate;\n  fabric.util.requestAnimFrame = requestAnimFrame;\n  fabric.util.cancelAnimFrame = cancelAnimFrame;\n})();\n\n\n(function() {\n  // Calculate an in-between color. Returns a \"rgba()\" string.\n  // Credit: Edwin Martin <edwin@bitstorm.org>\n  //         http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors.js\n  function calculateColor(begin, end, pos) {\n    var color = 'rgba('\n        + parseInt((begin[0] + pos * (end[0] - begin[0])), 10) + ','\n        + parseInt((begin[1] + pos * (end[1] - begin[1])), 10) + ','\n        + parseInt((begin[2] + pos * (end[2] - begin[2])), 10);\n\n    color += ',' + (begin && end ? parseFloat(begin[3] + pos * (end[3] - begin[3])) : 1);\n    color += ')';\n    return color;\n  }\n\n  /**\n   * Changes the color from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {String} fromColor The starting color in hex or rgb(a) format.\n   * @param {String} toColor The starting color in hex or rgb(a) format.\n   * @param {Number} [duration] Duration of change (in ms).\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Function} [options.colorEasing] Easing function. Note that this function only take two arguments (currentTime, duration). Thus the regular animation easing functions cannot be used.\n   * @param {Function} [options.abort] Additional function with logic. If returns true, onComplete is called.\n   */\n  function animateColor(fromColor, toColor, duration, options) {\n    var startColor = new fabric.Color(fromColor).getSource(),\n        endColor = new fabric.Color(toColor).getSource(),\n        originalOnComplete = options.onComplete,\n        originalOnChange = options.onChange;\n    options = options || {};\n\n    fabric.util.animate(fabric.util.object.extend(options, {\n      duration: duration || 500,\n      startValue: startColor,\n      endValue: endColor,\n      byValue: endColor,\n      easing: function (currentTime, startValue, byValue, duration) {\n        var posValue = options.colorEasing\n          ? options.colorEasing(currentTime, duration)\n          : 1 - Math.cos(currentTime / duration * (Math.PI / 2));\n        return calculateColor(startValue, byValue, posValue);\n      },\n      // has to take in account for color restoring;\n      onComplete: function(current, valuePerc, timePerc) {\n        if (originalOnComplete) {\n          return originalOnComplete(\n            calculateColor(endColor, endColor, 0),\n            valuePerc,\n            timePerc\n          );\n        }\n      },\n      onChange: function(current, valuePerc, timePerc) {\n        if (originalOnChange) {\n          if (Array.isArray(current)) {\n            return originalOnChange(\n              calculateColor(current, current, 0),\n              valuePerc,\n              timePerc\n            );\n          }\n          originalOnChange(current, valuePerc, timePerc);\n        }\n      }\n    }));\n  }\n\n  fabric.util.animateColor = animateColor;\n\n})();\n\n\n(function() {\n\n  function normalize(a, c, p, s) {\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    }\n    else {\n      //handle the 0/0 case:\n      if (c === 0 && a === 0) {\n        s = p / (2 * Math.PI) * Math.asin(1);\n      }\n      else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n    }\n    return { a: a, c: c, p: p, s: s };\n  }\n\n  function elastic(opts, t, d) {\n    return opts.a *\n      Math.pow(2, 10 * (t -= 1)) *\n      Math.sin( (t * d - opts.s) * (2 * Math.PI) / opts.p );\n  }\n\n  /**\n   * Cubic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCubic(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n\n  /**\n   * Cubic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCubic(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t + 2) + b;\n  }\n\n  /**\n   * Quartic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuart(t, b, c, d) {\n    return c * (t /= d) * t * t * t + b;\n  }\n\n  /**\n   * Quartic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuart(t, b, c, d) {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n\n  /**\n   * Quartic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuart(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t + b;\n    }\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n  }\n\n  /**\n   * Quintic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuint(t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  }\n\n  /**\n   * Quintic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuint(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n\n  /**\n   * Quintic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuint(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n\n  /**\n   * Sinusoidal easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInSine(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Sinusoidal easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutSine(t, b, c, d) {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n\n  /**\n   * Sinusoidal easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutSine(t, b, c, d) {\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  }\n\n  /**\n   * Exponential easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInExpo(t, b, c, d) {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  }\n\n  /**\n   * Exponential easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutExpo(t, b, c, d) {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n\n  /**\n   * Exponential easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutExpo(t, b, c, d) {\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    }\n    return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n\n  /**\n   * Circular easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInCirc(t, b, c, d) {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  }\n\n  /**\n   * Circular easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCirc(t, b, c, d) {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n\n  /**\n   * Circular easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCirc(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    }\n    return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n\n  /**\n   * Elastic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return -elastic(opts, t, d) + b;\n  }\n\n  /**\n   * Elastic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return opts.a * Math.pow(2, -10 * t) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) + opts.c + b;\n  }\n\n  /**\n   * Elastic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d / 2;\n    if (t === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    var opts = normalize(a, c, p, s);\n    if (t < 1) {\n      return -0.5 * elastic(opts, t, d) + b;\n    }\n    return opts.a * Math.pow(2, -10 * (t -= 1)) *\n      Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) * 0.5 + opts.c + b;\n  }\n\n  /**\n   * Backwards easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  }\n\n  /**\n   * Backwards easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n\n  /**\n   * Backwards easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n    }\n    return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n  }\n\n  /**\n   * Bouncing easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBounce(t, b, c, d) {\n    return c - easeOutBounce (d - t, 0, c, d) + b;\n  }\n\n  /**\n   * Bouncing easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBounce(t, b, c, d) {\n    if ((t /= d) < (1 / 2.75)) {\n      return c * (7.5625 * t * t) + b;\n    }\n    else if (t < (2 / 2.75)) {\n      return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n    }\n    else if (t < (2.5 / 2.75)) {\n      return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n    }\n    else {\n      return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n    }\n  }\n\n  /**\n   * Bouncing easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBounce(t, b, c, d) {\n    if (t < d / 2) {\n      return easeInBounce (t * 2, 0, c, d) * 0.5 + b;\n    }\n    return easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n  }\n\n  /**\n   * Easing functions\n   * See <a href=\"http://gizma.com/easing/\">Easing Equations by Robert Penner</a>\n   * @namespace fabric.util.ease\n   */\n  fabric.util.ease = {\n\n    /**\n     * Quadratic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n\n    /**\n     * Quadratic easing out\n     * @memberOf fabric.util.ease\n     */\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n\n    /**\n     * Quadratic easing in and out\n     * @memberOf fabric.util.ease\n     */\n    easeInOutQuad: function(t, b, c, d) {\n      t /= (d / 2);\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n\n    /**\n     * Cubic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n    easeInSine: easeInSine,\n    easeOutSine: easeOutSine,\n    easeInOutSine: easeInOutSine,\n    easeInExpo: easeInExpo,\n    easeOutExpo: easeOutExpo,\n    easeInOutExpo: easeInOutExpo,\n    easeInCirc: easeInCirc,\n    easeOutCirc: easeOutCirc,\n    easeInOutCirc: easeInOutCirc,\n    easeInElastic: easeInElastic,\n    easeOutElastic: easeOutElastic,\n    easeInOutElastic: easeInOutElastic,\n    easeInBack: easeInBack,\n    easeOutBack: easeOutBack,\n    easeInOutBack: easeInOutBack,\n    easeInBounce: easeInBounce,\n    easeOutBounce: easeOutBounce,\n    easeInOutBounce: easeInOutBounce\n  };\n\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  /**\n   * @name fabric\n   * @namespace\n   */\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      parseUnit = fabric.util.parseUnit,\n      multiplyTransformMatrices = fabric.util.multiplyTransformMatrices,\n\n      svgValidTagNames = ['path', 'circle', 'polygon', 'polyline', 'ellipse', 'rect', 'line',\n        'image', 'text'],\n      svgViewBoxElements = ['symbol', 'image', 'marker', 'pattern', 'view', 'svg'],\n      svgInvalidAncestors = ['pattern', 'defs', 'symbol', 'metadata', 'clipPath', 'mask', 'desc'],\n      svgValidParents = ['symbol', 'g', 'a', 'svg', 'clipPath', 'defs'],\n\n      attributesMap = {\n        cx:                   'left',\n        x:                    'left',\n        r:                    'radius',\n        cy:                   'top',\n        y:                    'top',\n        display:              'visible',\n        visibility:           'visible',\n        transform:            'transformMatrix',\n        'fill-opacity':       'fillOpacity',\n        'fill-rule':          'fillRule',\n        'font-family':        'fontFamily',\n        'font-size':          'fontSize',\n        'font-style':         'fontStyle',\n        'font-weight':        'fontWeight',\n        'letter-spacing':     'charSpacing',\n        'paint-order':        'paintFirst',\n        'stroke-dasharray':   'strokeDashArray',\n        'stroke-dashoffset':  'strokeDashOffset',\n        'stroke-linecap':     'strokeLineCap',\n        'stroke-linejoin':    'strokeLineJoin',\n        'stroke-miterlimit':  'strokeMiterLimit',\n        'stroke-opacity':     'strokeOpacity',\n        'stroke-width':       'strokeWidth',\n        'text-decoration':    'textDecoration',\n        'text-anchor':        'textAnchor',\n        opacity:              'opacity',\n        'clip-path':          'clipPath',\n        'clip-rule':          'clipRule',\n        'vector-effect':      'strokeUniform',\n        'image-rendering':    'imageSmoothing',\n      },\n\n      colorAttributes = {\n        stroke: 'strokeOpacity',\n        fill:   'fillOpacity'\n      },\n\n      fSize = 'font-size', cPath = 'clip-path';\n\n  fabric.svgValidTagNamesRegEx = getSvgRegex(svgValidTagNames);\n  fabric.svgViewBoxElementsRegEx = getSvgRegex(svgViewBoxElements);\n  fabric.svgInvalidAncestorsRegEx = getSvgRegex(svgInvalidAncestors);\n  fabric.svgValidParentsRegEx = getSvgRegex(svgValidParents);\n\n  fabric.cssRules = { };\n  fabric.gradientDefs = { };\n  fabric.clipPaths = { };\n\n  function normalizeAttr(attr) {\n    // transform attribute names\n    if (attr in attributesMap) {\n      return attributesMap[attr];\n    }\n    return attr;\n  }\n\n  function normalizeValue(attr, value, parentAttributes, fontSize) {\n    var isArray = Object.prototype.toString.call(value) === '[object Array]',\n        parsed;\n\n    if ((attr === 'fill' || attr === 'stroke') && value === 'none') {\n      value = '';\n    }\n    else if (attr === 'strokeUniform') {\n      return (value === 'non-scaling-stroke');\n    }\n    else if (attr === 'strokeDashArray') {\n      if (value === 'none') {\n        value = null;\n      }\n      else {\n        value = value.replace(/,/g, ' ').split(/\\s+/).map(parseFloat);\n      }\n    }\n    else if (attr === 'transformMatrix') {\n      if (parentAttributes && parentAttributes.transformMatrix) {\n        value = multiplyTransformMatrices(\n          parentAttributes.transformMatrix, fabric.parseTransformAttribute(value));\n      }\n      else {\n        value = fabric.parseTransformAttribute(value);\n      }\n    }\n    else if (attr === 'visible') {\n      value = value !== 'none' && value !== 'hidden';\n      // display=none on parent element always takes precedence over child element\n      if (parentAttributes && parentAttributes.visible === false) {\n        value = false;\n      }\n    }\n    else if (attr === 'opacity') {\n      value = parseFloat(value);\n      if (parentAttributes && typeof parentAttributes.opacity !== 'undefined') {\n        value *= parentAttributes.opacity;\n      }\n    }\n    else if (attr === 'textAnchor' /* text-anchor */) {\n      value = value === 'start' ? 'left' : value === 'end' ? 'right' : 'center';\n    }\n    else if (attr === 'charSpacing') {\n      // parseUnit returns px and we convert it to em\n      parsed = parseUnit(value, fontSize) / fontSize * 1000;\n    }\n    else if (attr === 'paintFirst') {\n      var fillIndex = value.indexOf('fill');\n      var strokeIndex = value.indexOf('stroke');\n      var value = 'fill';\n      if (fillIndex > -1 && strokeIndex > -1 && strokeIndex < fillIndex) {\n        value = 'stroke';\n      }\n      else if (fillIndex === -1 && strokeIndex > -1) {\n        value = 'stroke';\n      }\n    }\n    else if (attr === 'href' || attr === 'xlink:href' || attr === 'font') {\n      return value;\n    }\n    else if (attr === 'imageSmoothing') {\n      return (value === 'optimizeQuality');\n    }\n    else {\n      parsed = isArray ? value.map(parseUnit) : parseUnit(value, fontSize);\n    }\n\n    return (!isArray && isNaN(parsed) ? value : parsed);\n  }\n\n  /**\n    * @private\n    */\n  function getSvgRegex(arr) {\n    return new RegExp('^(' + arr.join('|') + ')\\\\b', 'i');\n  }\n\n  /**\n   * @private\n   * @param {Object} attributes Array of attributes to parse\n   */\n  function _setStrokeFillOpacity(attributes) {\n    for (var attr in colorAttributes) {\n\n      if (typeof attributes[colorAttributes[attr]] === 'undefined' || attributes[attr] === '') {\n        continue;\n      }\n\n      if (typeof attributes[attr] === 'undefined') {\n        if (!fabric.Object.prototype[attr]) {\n          continue;\n        }\n        attributes[attr] = fabric.Object.prototype[attr];\n      }\n\n      if (attributes[attr].indexOf('url(') === 0) {\n        continue;\n      }\n\n      var color = new fabric.Color(attributes[attr]);\n      attributes[attr] = color.setAlpha(toFixed(color.getAlpha() * attributes[colorAttributes[attr]], 2)).toRgba();\n    }\n    return attributes;\n  }\n\n  /**\n   * @private\n   */\n  function _getMultipleNodes(doc, nodeNames) {\n    var nodeName, nodeArray = [], nodeList, i, len;\n    for (i = 0, len = nodeNames.length; i < len; i++) {\n      nodeName = nodeNames[i];\n      nodeList = doc.getElementsByTagName(nodeName);\n      nodeArray = nodeArray.concat(Array.prototype.slice.call(nodeList));\n    }\n    return nodeArray;\n  }\n\n  /**\n   * Parses \"transform\" attribute, returning an array of values\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {String} attributeValue String containing attribute value\n   * @return {Array} Array of 6 elements representing transformation matrix\n   */\n  fabric.parseTransformAttribute = (function() {\n    function rotateMatrix(matrix, args) {\n      var cos = fabric.util.cos(args[0]), sin = fabric.util.sin(args[0]),\n          x = 0, y = 0;\n      if (args.length === 3) {\n        x = args[1];\n        y = args[2];\n      }\n\n      matrix[0] = cos;\n      matrix[1] = sin;\n      matrix[2] = -sin;\n      matrix[3] = cos;\n      matrix[4] = x - (cos * x - sin * y);\n      matrix[5] = y - (sin * x + cos * y);\n    }\n\n    function scaleMatrix(matrix, args) {\n      var multiplierX = args[0],\n          multiplierY = (args.length === 2) ? args[1] : args[0];\n\n      matrix[0] = multiplierX;\n      matrix[3] = multiplierY;\n    }\n\n    function skewMatrix(matrix, args, pos) {\n      matrix[pos] = Math.tan(fabric.util.degreesToRadians(args[0]));\n    }\n\n    function translateMatrix(matrix, args) {\n      matrix[4] = args[0];\n      if (args.length === 2) {\n        matrix[5] = args[1];\n      }\n    }\n\n    // identity matrix\n    var iMatrix = fabric.iMatrix,\n\n        // == begin transform regexp\n        number = fabric.reNum,\n\n        commaWsp = fabric.commaWsp,\n\n        skewX = '(?:(skewX)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        skewY = '(?:(skewY)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        rotate = '(?:(rotate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + ')' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        scale = '(?:(scale)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        translate = '(?:(translate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        matrix = '(?:(matrix)\\\\s*\\\\(\\\\s*' +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' +\n                  '\\\\s*\\\\))',\n\n        transform = '(?:' +\n                    matrix + '|' +\n                    translate + '|' +\n                    scale + '|' +\n                    rotate + '|' +\n                    skewX + '|' +\n                    skewY +\n                    ')',\n\n        transforms = '(?:' + transform + '(?:' + commaWsp + '*' + transform + ')*' + ')',\n\n        transformList = '^\\\\s*(?:' + transforms + '?)\\\\s*$',\n\n        // http://www.w3.org/TR/SVG/coords.html#TransformAttribute\n        reTransformList = new RegExp(transformList),\n        // == end transform regexp\n\n        reTransform = new RegExp(transform, 'g');\n\n    return function(attributeValue) {\n\n      // start with identity matrix\n      var matrix = iMatrix.concat(),\n          matrices = [];\n\n      // return if no argument was given or\n      // an argument does not match transform attribute regexp\n      if (!attributeValue || (attributeValue && !reTransformList.test(attributeValue))) {\n        return matrix;\n      }\n\n      attributeValue.replace(reTransform, function(match) {\n\n        var m = new RegExp(transform).exec(match).filter(function (match) {\n              // match !== '' && match != null\n              return (!!match);\n            }),\n            operation = m[1],\n            args = m.slice(2).map(parseFloat);\n\n        switch (operation) {\n          case 'translate':\n            translateMatrix(matrix, args);\n            break;\n          case 'rotate':\n            args[0] = fabric.util.degreesToRadians(args[0]);\n            rotateMatrix(matrix, args);\n            break;\n          case 'scale':\n            scaleMatrix(matrix, args);\n            break;\n          case 'skewX':\n            skewMatrix(matrix, args, 2);\n            break;\n          case 'skewY':\n            skewMatrix(matrix, args, 1);\n            break;\n          case 'matrix':\n            matrix = args;\n            break;\n        }\n\n        // snapshot current matrix into matrices array\n        matrices.push(matrix.concat());\n        // reset\n        matrix = iMatrix.concat();\n      });\n\n      var combinedMatrix = matrices[0];\n      while (matrices.length > 1) {\n        matrices.shift();\n        combinedMatrix = fabric.util.multiplyTransformMatrices(combinedMatrix, matrices[0]);\n      }\n      return combinedMatrix;\n    };\n  })();\n\n  /**\n   * @private\n   */\n  function parseStyleString(style, oStyle) {\n    var attr, value;\n    style.replace(/;\\s*$/, '').split(';').forEach(function (chunk) {\n      var pair = chunk.split(':');\n\n      attr = pair[0].trim().toLowerCase();\n      value =  pair[1].trim();\n\n      oStyle[attr] = value;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function parseStyleObject(style, oStyle) {\n    var attr, value;\n    for (var prop in style) {\n      if (typeof style[prop] === 'undefined') {\n        continue;\n      }\n\n      attr = prop.toLowerCase();\n      value = style[prop];\n\n      oStyle[attr] = value;\n    }\n  }\n\n  /**\n   * @private\n   */\n  function getGlobalStylesForElement(element, svgUid) {\n    var styles = { };\n    for (var rule in fabric.cssRules[svgUid]) {\n      if (elementMatchesRule(element, rule.split(' '))) {\n        for (var property in fabric.cssRules[svgUid][rule]) {\n          styles[property] = fabric.cssRules[svgUid][rule][property];\n        }\n      }\n    }\n    return styles;\n  }\n\n  /**\n   * @private\n   */\n  function elementMatchesRule(element, selectors) {\n    var firstMatching, parentMatching = true;\n    //start from rightmost selector.\n    firstMatching = selectorMatches(element, selectors.pop());\n    if (firstMatching && selectors.length) {\n      parentMatching = doesSomeParentMatch(element, selectors);\n    }\n    return firstMatching && parentMatching && (selectors.length === 0);\n  }\n\n  function doesSomeParentMatch(element, selectors) {\n    var selector, parentMatching = true;\n    while (element.parentNode && element.parentNode.nodeType === 1 && selectors.length) {\n      if (parentMatching) {\n        selector = selectors.pop();\n      }\n      element = element.parentNode;\n      parentMatching = selectorMatches(element, selector);\n    }\n    return selectors.length === 0;\n  }\n\n  /**\n   * @private\n   */\n  function selectorMatches(element, selector) {\n    var nodeName = element.nodeName,\n        classNames = element.getAttribute('class'),\n        id = element.getAttribute('id'), matcher, i;\n    // i check if a selector matches slicing away part from it.\n    // if i get empty string i should match\n    matcher = new RegExp('^' + nodeName, 'i');\n    selector = selector.replace(matcher, '');\n    if (id && selector.length) {\n      matcher = new RegExp('#' + id + '(?![a-zA-Z\\\\-]+)', 'i');\n      selector = selector.replace(matcher, '');\n    }\n    if (classNames && selector.length) {\n      classNames = classNames.split(' ');\n      for (i = classNames.length; i--;) {\n        matcher = new RegExp('\\\\.' + classNames[i] + '(?![a-zA-Z\\\\-]+)', 'i');\n        selector = selector.replace(matcher, '');\n      }\n    }\n    return selector.length === 0;\n  }\n\n  /**\n   * @private\n   * to support IE8 missing getElementById on SVGdocument and on node xmlDOM\n   */\n  function elementById(doc, id) {\n    var el;\n    doc.getElementById && (el = doc.getElementById(id));\n    if (el) {\n      return el;\n    }\n    var node, i, len, nodelist = doc.getElementsByTagName('*');\n    for (i = 0, len = nodelist.length; i < len; i++) {\n      node = nodelist[i];\n      if (id === node.getAttribute('id')) {\n        return node;\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  function parseUseDirectives(doc) {\n    var nodelist = _getMultipleNodes(doc, ['use', 'svg:use']), i = 0;\n    while (nodelist.length && i < nodelist.length) {\n      var el = nodelist[i],\n          xlink = (el.getAttribute('xlink:href') || el.getAttribute('href')).substr(1),\n          x = el.getAttribute('x') || 0,\n          y = el.getAttribute('y') || 0,\n          el2 = elementById(doc, xlink).cloneNode(true),\n          currentTrans = (el2.getAttribute('transform') || '') + ' translate(' + x + ', ' + y + ')',\n          parentNode, oldLength = nodelist.length, attr, j, attrs, len, namespace = fabric.svgNS;\n\n      applyViewboxTransform(el2);\n      if (/^svg$/i.test(el2.nodeName)) {\n        var el3 = el2.ownerDocument.createElementNS(namespace, 'g');\n        for (j = 0, attrs = el2.attributes, len = attrs.length; j < len; j++) {\n          attr = attrs.item(j);\n          el3.setAttributeNS(namespace, attr.nodeName, attr.nodeValue);\n        }\n        // el2.firstChild != null\n        while (el2.firstChild) {\n          el3.appendChild(el2.firstChild);\n        }\n        el2 = el3;\n      }\n\n      for (j = 0, attrs = el.attributes, len = attrs.length; j < len; j++) {\n        attr = attrs.item(j);\n        if (attr.nodeName === 'x' || attr.nodeName === 'y' ||\n          attr.nodeName === 'xlink:href' || attr.nodeName === 'href') {\n          continue;\n        }\n\n        if (attr.nodeName === 'transform') {\n          currentTrans = attr.nodeValue + ' ' + currentTrans;\n        }\n        else {\n          el2.setAttribute(attr.nodeName, attr.nodeValue);\n        }\n      }\n\n      el2.setAttribute('transform', currentTrans);\n      el2.setAttribute('instantiated_by_use', '1');\n      el2.removeAttribute('id');\n      parentNode = el.parentNode;\n      parentNode.replaceChild(el2, el);\n      // some browsers do not shorten nodelist after replaceChild (IE8)\n      if (nodelist.length === oldLength) {\n        i++;\n      }\n    }\n  }\n\n  // http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute\n  // matches, e.g.: +14.56e-12, etc.\n  var reViewBoxAttrValue = new RegExp(\n    '^' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*' +\n    '$'\n  );\n\n  /**\n   * Add a <g> element that envelop all child elements and makes the viewbox transformMatrix descend on all elements\n   */\n  function applyViewboxTransform(element) {\n    if (!fabric.svgViewBoxElementsRegEx.test(element.nodeName)) {\n      return;\n    }\n    var viewBoxAttr = element.getAttribute('viewBox'),\n        scaleX = 1,\n        scaleY = 1,\n        minX = 0,\n        minY = 0,\n        viewBoxWidth, viewBoxHeight, matrix, el,\n        widthAttr = element.getAttribute('width'),\n        heightAttr = element.getAttribute('height'),\n        x = element.getAttribute('x') || 0,\n        y = element.getAttribute('y') || 0,\n        preserveAspectRatio = element.getAttribute('preserveAspectRatio') || '',\n        missingViewBox = (!viewBoxAttr || !(viewBoxAttr = viewBoxAttr.match(reViewBoxAttrValue))),\n        missingDimAttr = (!widthAttr || !heightAttr || widthAttr === '100%' || heightAttr === '100%'),\n        toBeParsed = missingViewBox && missingDimAttr,\n        parsedDim = { }, translateMatrix = '', widthDiff = 0, heightDiff = 0;\n\n    parsedDim.width = 0;\n    parsedDim.height = 0;\n    parsedDim.toBeParsed = toBeParsed;\n\n    if (missingViewBox) {\n      if (((x || y) && element.parentNode.nodeName !== '#document')) {\n        translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n        matrix = (element.getAttribute('transform') || '') + translateMatrix;\n        element.setAttribute('transform', matrix);\n        element.removeAttribute('x');\n        element.removeAttribute('y');\n      }\n    }\n\n    if (toBeParsed) {\n      return parsedDim;\n    }\n\n    if (missingViewBox) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      // set a transform for elements that have x y and are inner(only) SVGs\n      return parsedDim;\n    }\n    minX = -parseFloat(viewBoxAttr[1]);\n    minY = -parseFloat(viewBoxAttr[2]);\n    viewBoxWidth = parseFloat(viewBoxAttr[3]);\n    viewBoxHeight = parseFloat(viewBoxAttr[4]);\n    parsedDim.minX = minX;\n    parsedDim.minY = minY;\n    parsedDim.viewBoxWidth = viewBoxWidth;\n    parsedDim.viewBoxHeight = viewBoxHeight;\n    if (!missingDimAttr) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      scaleX = parsedDim.width / viewBoxWidth;\n      scaleY = parsedDim.height / viewBoxHeight;\n    }\n    else {\n      parsedDim.width = viewBoxWidth;\n      parsedDim.height = viewBoxHeight;\n    }\n\n    // default is to preserve aspect ratio\n    preserveAspectRatio = fabric.util.parsePreserveAspectRatioAttribute(preserveAspectRatio);\n    if (preserveAspectRatio.alignX !== 'none') {\n      //translate all container for the effect of Mid, Min, Max\n      if (preserveAspectRatio.meetOrSlice === 'meet') {\n        scaleY = scaleX = (scaleX > scaleY ? scaleY : scaleX);\n        // calculate additional translation to move the viewbox\n      }\n      if (preserveAspectRatio.meetOrSlice === 'slice') {\n        scaleY = scaleX = (scaleX > scaleY ? scaleX : scaleY);\n        // calculate additional translation to move the viewbox\n      }\n      widthDiff = parsedDim.width - viewBoxWidth * scaleX;\n      heightDiff = parsedDim.height - viewBoxHeight * scaleX;\n      if (preserveAspectRatio.alignX === 'Mid') {\n        widthDiff /= 2;\n      }\n      if (preserveAspectRatio.alignY === 'Mid') {\n        heightDiff /= 2;\n      }\n      if (preserveAspectRatio.alignX === 'Min') {\n        widthDiff = 0;\n      }\n      if (preserveAspectRatio.alignY === 'Min') {\n        heightDiff = 0;\n      }\n    }\n\n    if (scaleX === 1 && scaleY === 1 && minX === 0 && minY === 0 && x === 0 && y === 0) {\n      return parsedDim;\n    }\n    if ((x || y) && element.parentNode.nodeName !== '#document') {\n      translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n    }\n\n    matrix = translateMatrix + ' matrix(' + scaleX +\n                  ' 0' +\n                  ' 0 ' +\n                  scaleY + ' ' +\n                  (minX * scaleX + widthDiff) + ' ' +\n                  (minY * scaleY + heightDiff) + ') ';\n    // seems unused.\n    // parsedDim.viewboxTransform = fabric.parseTransformAttribute(matrix);\n    if (element.nodeName === 'svg') {\n      el = element.ownerDocument.createElementNS(fabric.svgNS, 'g');\n      // element.firstChild != null\n      while (element.firstChild) {\n        el.appendChild(element.firstChild);\n      }\n      element.appendChild(el);\n    }\n    else {\n      el = element;\n      el.removeAttribute('x');\n      el.removeAttribute('y');\n      matrix = el.getAttribute('transform') + matrix;\n    }\n    el.setAttribute('transform', matrix);\n    return parsedDim;\n  }\n\n  function hasAncestorWithNodeName(element, nodeName) {\n    while (element && (element = element.parentNode)) {\n      if (element.nodeName && nodeName.test(element.nodeName.replace('svg:', ''))\n        && !element.getAttribute('instantiated_by_use')) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Parses an SVG document, converts it to an array of corresponding fabric.* instances and passes them to a callback\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {SVGDocument} doc SVG document to parse\n   * @param {Function} callback Callback to call when parsing is finished;\n   * It's being passed an array of elements (parsed from a document).\n   * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n   * @param {Object} [parsingOptions] options for parsing document\n   * @param {String} [parsingOptions.crossOrigin] crossOrigin settings\n   */\n  fabric.parseSVGDocument = function(doc, callback, reviver, parsingOptions) {\n    if (!doc) {\n      return;\n    }\n\n    parseUseDirectives(doc);\n\n    var svgUid =  fabric.Object.__uid++, i, len,\n        options = applyViewboxTransform(doc),\n        descendants = fabric.util.toArray(doc.getElementsByTagName('*'));\n    options.crossOrigin = parsingOptions && parsingOptions.crossOrigin;\n    options.svgUid = svgUid;\n\n    if (descendants.length === 0 && fabric.isLikelyNode) {\n      // we're likely in node, where \"o3-xml\" library fails to gEBTN(\"*\")\n      // https://github.com/ajaxorg/node-o3-xml/issues/21\n      descendants = doc.selectNodes('//*[name(.)!=\"svg\"]');\n      var arr = [];\n      for (i = 0, len = descendants.length; i < len; i++) {\n        arr[i] = descendants[i];\n      }\n      descendants = arr;\n    }\n\n    var elements = descendants.filter(function(el) {\n      applyViewboxTransform(el);\n      return fabric.svgValidTagNamesRegEx.test(el.nodeName.replace('svg:', '')) &&\n            !hasAncestorWithNodeName(el, fabric.svgInvalidAncestorsRegEx); // http://www.w3.org/TR/SVG/struct.html#DefsElement\n    });\n    if (!elements || (elements && !elements.length)) {\n      callback && callback([], {});\n      return;\n    }\n    var clipPaths = { };\n    descendants.filter(function(el) {\n      return el.nodeName.replace('svg:', '') === 'clipPath';\n    }).forEach(function(el) {\n      var id = el.getAttribute('id');\n      clipPaths[id] = fabric.util.toArray(el.getElementsByTagName('*')).filter(function(el) {\n        return fabric.svgValidTagNamesRegEx.test(el.nodeName.replace('svg:', ''));\n      });\n    });\n    fabric.gradientDefs[svgUid] = fabric.getGradientDefs(doc);\n    fabric.cssRules[svgUid] = fabric.getCSSRules(doc);\n    fabric.clipPaths[svgUid] = clipPaths;\n    // Precedence of rules:   style > class > attribute\n    fabric.parseElements(elements, function(instances, elements) {\n      if (callback) {\n        callback(instances, options, elements, descendants);\n        delete fabric.gradientDefs[svgUid];\n        delete fabric.cssRules[svgUid];\n        delete fabric.clipPaths[svgUid];\n      }\n    }, clone(options), reviver, parsingOptions);\n  };\n\n  function recursivelyParseGradientsXlink(doc, gradient) {\n    var gradientsAttrs = ['gradientTransform', 'x1', 'x2', 'y1', 'y2', 'gradientUnits', 'cx', 'cy', 'r', 'fx', 'fy'],\n        xlinkAttr = 'xlink:href',\n        xLink = gradient.getAttribute(xlinkAttr).substr(1),\n        referencedGradient = elementById(doc, xLink);\n    if (referencedGradient && referencedGradient.getAttribute(xlinkAttr)) {\n      recursivelyParseGradientsXlink(doc, referencedGradient);\n    }\n    gradientsAttrs.forEach(function(attr) {\n      if (referencedGradient && !gradient.hasAttribute(attr) && referencedGradient.hasAttribute(attr)) {\n        gradient.setAttribute(attr, referencedGradient.getAttribute(attr));\n      }\n    });\n    if (!gradient.children.length) {\n      var referenceClone = referencedGradient.cloneNode(true);\n      while (referenceClone.firstChild) {\n        gradient.appendChild(referenceClone.firstChild);\n      }\n    }\n    gradient.removeAttribute(xlinkAttr);\n  }\n\n  var reFontDeclaration = new RegExp(\n    '(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*' +\n    '(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(' +\n      fabric.reNum +\n    '(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|' + fabric.reNum + '))?\\\\s+(.*)');\n\n  extend(fabric, {\n    /**\n     * Parses a short font declaration, building adding its properties to a style object\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {String} value font declaration\n     * @param {Object} oStyle definition\n     */\n    parseFontDeclaration: function(value, oStyle) {\n      var match = value.match(reFontDeclaration);\n\n      if (!match) {\n        return;\n      }\n      var fontStyle = match[1],\n          // font variant is not used\n          // fontVariant = match[2],\n          fontWeight = match[3],\n          fontSize = match[4],\n          lineHeight = match[5],\n          fontFamily = match[6];\n\n      if (fontStyle) {\n        oStyle.fontStyle = fontStyle;\n      }\n      if (fontWeight) {\n        oStyle.fontWeight = isNaN(parseFloat(fontWeight)) ? fontWeight : parseFloat(fontWeight);\n      }\n      if (fontSize) {\n        oStyle.fontSize = parseUnit(fontSize);\n      }\n      if (fontFamily) {\n        oStyle.fontFamily = fontFamily;\n      }\n      if (lineHeight) {\n        oStyle.lineHeight = lineHeight === 'normal' ? 1 : lineHeight;\n      }\n    },\n\n    /**\n     * Parses an SVG document, returning all of the gradient declarations found in it\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} Gradient definitions; key corresponds to element id, value -- to gradient definition element\n     */\n    getGradientDefs: function(doc) {\n      var tagArray = [\n            'linearGradient',\n            'radialGradient',\n            'svg:linearGradient',\n            'svg:radialGradient'],\n          elList = _getMultipleNodes(doc, tagArray),\n          el, j = 0, gradientDefs = { };\n      j = elList.length;\n      while (j--) {\n        el = elList[j];\n        if (el.getAttribute('xlink:href')) {\n          recursivelyParseGradientsXlink(doc, el);\n        }\n        gradientDefs[el.getAttribute('id')] = el;\n      }\n      return gradientDefs;\n    },\n\n    /**\n     * Returns an object of attributes' name/value, given element and an array of attribute names;\n     * Parses parent \"g\" nodes recursively upwards.\n     * @static\n     * @memberOf fabric\n     * @param {DOMElement} element Element to parse\n     * @param {Array} attributes Array of attributes to parse\n     * @return {Object} object containing parsed attributes' names/values\n     */\n    parseAttributes: function(element, attributes, svgUid) {\n\n      if (!element) {\n        return;\n      }\n\n      var value,\n          parentAttributes = { },\n          fontSize, parentFontSize;\n\n      if (typeof svgUid === 'undefined') {\n        svgUid = element.getAttribute('svgUid');\n      }\n      // if there's a parent container (`g` or `a` or `symbol` node), parse its attributes recursively upwards\n      if (element.parentNode && fabric.svgValidParentsRegEx.test(element.parentNode.nodeName)) {\n        parentAttributes = fabric.parseAttributes(element.parentNode, attributes, svgUid);\n      }\n\n      var ownAttributes = attributes.reduce(function(memo, attr) {\n        value = element.getAttribute(attr);\n        if (value) { // eslint-disable-line\n          memo[attr] = value;\n        }\n        return memo;\n      }, { });\n      // add values parsed from style, which take precedence over attributes\n      // (see: http://www.w3.org/TR/SVG/styling.html#UsingPresentationAttributes)\n      var cssAttrs = extend(\n        getGlobalStylesForElement(element, svgUid),\n        fabric.parseStyleAttribute(element)\n      );\n      ownAttributes = extend(\n        ownAttributes,\n        cssAttrs\n      );\n      if (cssAttrs[cPath]) {\n        element.setAttribute(cPath, cssAttrs[cPath]);\n      }\n      fontSize = parentFontSize = parentAttributes.fontSize || fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      if (ownAttributes[fSize]) {\n        // looks like the minimum should be 9px when dealing with ems. this is what looks like in browsers.\n        ownAttributes[fSize] = fontSize = parseUnit(ownAttributes[fSize], parentFontSize);\n      }\n\n      var normalizedAttr, normalizedValue, normalizedStyle = {};\n      for (var attr in ownAttributes) {\n        normalizedAttr = normalizeAttr(attr);\n        normalizedValue = normalizeValue(normalizedAttr, ownAttributes[attr], parentAttributes, fontSize);\n        normalizedStyle[normalizedAttr] = normalizedValue;\n      }\n      if (normalizedStyle && normalizedStyle.font) {\n        fabric.parseFontDeclaration(normalizedStyle.font, normalizedStyle);\n      }\n      var mergedAttrs = extend(parentAttributes, normalizedStyle);\n      return fabric.svgValidParentsRegEx.test(element.nodeName) ? mergedAttrs : _setStrokeFillOpacity(mergedAttrs);\n    },\n\n    /**\n     * Transforms an array of svg elements to corresponding fabric.* instances\n     * @static\n     * @memberOf fabric\n     * @param {Array} elements Array of elements to parse\n     * @param {Function} callback Being passed an array of fabric instances (transformed from SVG elements)\n     * @param {Object} [options] Options object\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     */\n    parseElements: function(elements, callback, options, reviver, parsingOptions) {\n      new fabric.ElementsParser(elements, callback, options, reviver, parsingOptions).parse();\n    },\n\n    /**\n     * Parses \"style\" attribute, retuning an object with values\n     * @static\n     * @memberOf fabric\n     * @param {SVGElement} element Element to parse\n     * @return {Object} Objects with values parsed from style attribute of an element\n     */\n    parseStyleAttribute: function(element) {\n      var oStyle = { },\n          style = element.getAttribute('style');\n\n      if (!style) {\n        return oStyle;\n      }\n\n      if (typeof style === 'string') {\n        parseStyleString(style, oStyle);\n      }\n      else {\n        parseStyleObject(style, oStyle);\n      }\n\n      return oStyle;\n    },\n\n    /**\n     * Parses \"points\" attribute, returning an array of values\n     * @static\n     * @memberOf fabric\n     * @param {String} points points attribute string\n     * @return {Array} array of points\n     */\n    parsePointsAttribute: function(points) {\n\n      // points attribute is required and must not be empty\n      if (!points) {\n        return null;\n      }\n\n      // replace commas with whitespace and remove bookending whitespace\n      points = points.replace(/,/g, ' ').trim();\n\n      points = points.split(/\\s+/);\n      var parsedPoints = [], i, len;\n\n      for (i = 0, len = points.length; i < len; i += 2) {\n        parsedPoints.push({\n          x: parseFloat(points[i]),\n          y: parseFloat(points[i + 1])\n        });\n      }\n\n      // odd number of points is an error\n      // if (parsedPoints.length % 2 !== 0) {\n      //   return null;\n      // }\n\n      return parsedPoints;\n    },\n\n    /**\n     * Returns CSS rules for a given SVG document\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} CSS rules of this document\n     */\n    getCSSRules: function(doc) {\n      var styles = doc.getElementsByTagName('style'), i, len,\n          allRules = { }, rules;\n\n      // very crude parsing of style contents\n      for (i = 0, len = styles.length; i < len; i++) {\n        var styleContents = styles[i].textContent;\n\n        // remove comments\n        styleContents = styleContents.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n        if (styleContents.trim() === '') {\n          continue;\n        }\n        rules = styleContents.match(/[^{]*\\{[\\s\\S]*?\\}/g);\n        rules = rules.map(function(rule) { return rule.trim(); });\n        // eslint-disable-next-line no-loop-func\n        rules.forEach(function(rule) {\n\n          var match = rule.match(/([\\s\\S]*?)\\s*\\{([^}]*)\\}/),\n              ruleObj = { }, declaration = match[2].trim(),\n              propertyValuePairs = declaration.replace(/;$/, '').split(/\\s*;\\s*/);\n\n          for (i = 0, len = propertyValuePairs.length; i < len; i++) {\n            var pair = propertyValuePairs[i].split(/\\s*:\\s*/),\n                property = pair[0],\n                value = pair[1];\n            ruleObj[property] = value;\n          }\n          rule = match[1];\n          rule.split(',').forEach(function(_rule) {\n            _rule = _rule.replace(/^svg/i, '').trim();\n            if (_rule === '') {\n              return;\n            }\n            if (allRules[_rule]) {\n              fabric.util.object.extend(allRules[_rule], ruleObj);\n            }\n            else {\n              allRules[_rule] = fabric.util.object.clone(ruleObj);\n            }\n          });\n        });\n      }\n      return allRules;\n    },\n\n    /**\n     * Takes url corresponding to an SVG document, and parses it into a set of fabric objects.\n     * Note that SVG is fetched via XMLHttpRequest, so it needs to conform to SOP (Same Origin Policy)\n     * @memberOf fabric\n     * @param {String} url\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     * @param {Object} [options] Object containing options for parsing\n     * @param {String} [options.crossOrigin] crossOrigin crossOrigin setting to use for external resources\n     */\n    loadSVGFromURL: function(url, callback, reviver, options) {\n\n      url = url.replace(/^\\n\\s*/, '').trim();\n      new fabric.util.request(url, {\n        method: 'get',\n        onComplete: onComplete\n      });\n\n      function onComplete(r) {\n\n        var xml = r.responseXML;\n        if (!xml || !xml.documentElement) {\n          callback && callback(null);\n          return false;\n        }\n\n        fabric.parseSVGDocument(xml.documentElement, function (results, _options, elements, allElements) {\n          callback && callback(results, _options, elements, allElements);\n        }, reviver, options);\n      }\n    },\n\n    /**\n     * Takes string corresponding to an SVG document, and parses it into a set of fabric objects\n     * @memberOf fabric\n     * @param {String} string\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     * @param {Object} [options] Object containing options for parsing\n     * @param {String} [options.crossOrigin] crossOrigin crossOrigin setting to use for external resources\n     */\n    loadSVGFromString: function(string, callback, reviver, options) {\n      var parser = new fabric.window.DOMParser(),\n          doc = parser.parseFromString(string.trim(), 'text/xml');\n      fabric.parseSVGDocument(doc.documentElement, function (results, _options, elements, allElements) {\n        callback(results, _options, elements, allElements);\n      }, reviver, options);\n    }\n  });\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.ElementsParser = function(elements, callback, options, reviver, parsingOptions, doc) {\n  this.elements = elements;\n  this.callback = callback;\n  this.options = options;\n  this.reviver = reviver;\n  this.svgUid = (options && options.svgUid) || 0;\n  this.parsingOptions = parsingOptions;\n  this.regexUrl = /^url\\(['\"]?#([^'\"]+)['\"]?\\)/g;\n  this.doc = doc;\n};\n\n(function(proto) {\n  proto.parse = function() {\n    this.instances = new Array(this.elements.length);\n    this.numElements = this.elements.length;\n    this.createObjects();\n  };\n\n  proto.createObjects = function() {\n    var _this = this;\n    this.elements.forEach(function(element, i) {\n      element.setAttribute('svgUid', _this.svgUid);\n      _this.createObject(element, i);\n    });\n  };\n\n  proto.findTag = function(el) {\n    return fabric[fabric.util.string.capitalize(el.tagName.replace('svg:', ''))];\n  };\n\n  proto.createObject = function(el, index) {\n    var klass = this.findTag(el);\n    if (klass && klass.fromElement) {\n      try {\n        klass.fromElement(el, this.createCallback(index, el), this.options);\n      }\n      catch (err) {\n        fabric.log(err);\n      }\n    }\n    else {\n      this.checkIfDone();\n    }\n  };\n\n  proto.createCallback = function(index, el) {\n    var _this = this;\n    return function(obj) {\n      var _options;\n      _this.resolveGradient(obj, el, 'fill');\n      _this.resolveGradient(obj, el, 'stroke');\n      if (obj instanceof fabric.Image && obj._originalElement) {\n        _options = obj.parsePreserveAspectRatioAttribute(el);\n      }\n      obj._removeTransformMatrix(_options);\n      _this.resolveClipPath(obj, el);\n      _this.reviver && _this.reviver(el, obj);\n      _this.instances[index] = obj;\n      _this.checkIfDone();\n    };\n  };\n\n  proto.extractPropertyDefinition = function(obj, property, storage) {\n    var value = obj[property], regex = this.regexUrl;\n    if (!regex.test(value)) {\n      return;\n    }\n    regex.lastIndex = 0;\n    var id = regex.exec(value)[1];\n    regex.lastIndex = 0;\n    return fabric[storage][this.svgUid][id];\n  };\n\n  proto.resolveGradient = function(obj, el, property) {\n    var gradientDef = this.extractPropertyDefinition(obj, property, 'gradientDefs');\n    if (gradientDef) {\n      var opacityAttr = el.getAttribute(property + '-opacity');\n      var gradient = fabric.Gradient.fromElement(gradientDef, obj, opacityAttr, this.options);\n      obj.set(property, gradient);\n    }\n  };\n\n  proto.createClipPathCallback = function(obj, container) {\n    return function(_newObj) {\n      _newObj._removeTransformMatrix();\n      _newObj.fillRule = _newObj.clipRule;\n      container.push(_newObj);\n    };\n  };\n\n  proto.resolveClipPath = function(obj, usingElement) {\n    var clipPath = this.extractPropertyDefinition(obj, 'clipPath', 'clipPaths'),\n        element, klass, objTransformInv, container, gTransform, options;\n    if (clipPath) {\n      container = [];\n      objTransformInv = fabric.util.invertTransform(obj.calcTransformMatrix());\n      // move the clipPath tag as sibling to the real element that is using it\n      var clipPathTag = clipPath[0].parentNode;\n      var clipPathOwner = usingElement;\n      while (clipPathOwner.parentNode && clipPathOwner.getAttribute('clip-path') !== obj.clipPath) {\n        clipPathOwner = clipPathOwner.parentNode;\n      }\n      clipPathOwner.parentNode.appendChild(clipPathTag);\n      for (var i = 0; i < clipPath.length; i++) {\n        element = clipPath[i];\n        klass = this.findTag(element);\n        klass.fromElement(\n          element,\n          this.createClipPathCallback(obj, container),\n          this.options\n        );\n      }\n      if (container.length === 1) {\n        clipPath = container[0];\n      }\n      else {\n        clipPath = new fabric.Group(container);\n      }\n      gTransform = fabric.util.multiplyTransformMatrices(\n        objTransformInv,\n        clipPath.calcTransformMatrix()\n      );\n      if (clipPath.clipPath) {\n        this.resolveClipPath(clipPath, clipPathOwner);\n      }\n      var options = fabric.util.qrDecompose(gTransform);\n      clipPath.flipX = false;\n      clipPath.flipY = false;\n      clipPath.set('scaleX', options.scaleX);\n      clipPath.set('scaleY', options.scaleY);\n      clipPath.angle = options.angle;\n      clipPath.skewX = options.skewX;\n      clipPath.skewY = 0;\n      clipPath.setPositionByOrigin({ x: options.translateX, y: options.translateY }, 'center', 'center');\n      obj.clipPath = clipPath;\n    }\n    else {\n      // if clip-path does not resolve to any element, delete the property.\n      delete obj.clipPath;\n    }\n  };\n\n  proto.checkIfDone = function() {\n    if (--this.numElements === 0) {\n      this.instances = this.instances.filter(function(el) {\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        return el != null;\n      });\n      this.callback(this.instances, this.elements);\n    }\n  };\n})(fabric.ElementsParser.prototype);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Point) {\n    fabric.warn('fabric.Point is already defined');\n    return;\n  }\n\n  fabric.Point = Point;\n\n  /**\n   * Point class\n   * @class fabric.Point\n   * @memberOf fabric\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @return {fabric.Point} thisArg\n   */\n  function Point(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  Point.prototype = /** @lends fabric.Point.prototype */ {\n\n    type: 'point',\n\n    constructor: Point,\n\n    /**\n     * Adds another point to this one and returns another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point instance with added values\n     */\n    add: function (that) {\n      return new Point(this.x + that.x, this.y + that.y);\n    },\n\n    /**\n     * Adds another point to this one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    addEquals: function (that) {\n      this.x += that.x;\n      this.y += that.y;\n      return this;\n    },\n\n    /**\n     * Adds value to this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point} new Point with added value\n     */\n    scalarAdd: function (scalar) {\n      return new Point(this.x + scalar, this.y + scalar);\n    },\n\n    /**\n     * Adds value to this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarAddEquals: function (scalar) {\n      this.x += scalar;\n      this.y += scalar;\n      return this;\n    },\n\n    /**\n     * Subtracts another point from this point and returns a new one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point object with subtracted values\n     */\n    subtract: function (that) {\n      return new Point(this.x - that.x, this.y - that.y);\n    },\n\n    /**\n     * Subtracts another point from this point\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    subtractEquals: function (that) {\n      this.x -= that.x;\n      this.y -= that.y;\n      return this;\n    },\n\n    /**\n     * Subtracts value from this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    scalarSubtract: function (scalar) {\n      return new Point(this.x - scalar, this.y - scalar);\n    },\n\n    /**\n     * Subtracts value from this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarSubtractEquals: function (scalar) {\n      this.x -= scalar;\n      this.y -= scalar;\n      return this;\n    },\n\n    /**\n     * Multiplies this point by a value and returns a new one\n     * TODO: rename in scalarMultiply in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    multiply: function (scalar) {\n      return new Point(this.x * scalar, this.y * scalar);\n    },\n\n    /**\n     * Multiplies this point by a value\n     * TODO: rename in scalarMultiplyEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    multiplyEquals: function (scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      return this;\n    },\n\n    /**\n     * Divides this point by a value and returns a new one\n     * TODO: rename in scalarDivide in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    divide: function (scalar) {\n      return new Point(this.x / scalar, this.y / scalar);\n    },\n\n    /**\n     * Divides this point by a value\n     * TODO: rename in scalarDivideEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    divideEquals: function (scalar) {\n      this.x /= scalar;\n      this.y /= scalar;\n      return this;\n    },\n\n    /**\n     * Returns true if this point is equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    eq: function (that) {\n      return (this.x === that.x && this.y === that.y);\n    },\n\n    /**\n     * Returns true if this point is less than another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lt: function (that) {\n      return (this.x < that.x && this.y < that.y);\n    },\n\n    /**\n     * Returns true if this point is less than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lte: function (that) {\n      return (this.x <= that.x && this.y <= that.y);\n    },\n\n    /**\n\n     * Returns true if this point is greater another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gt: function (that) {\n      return (this.x > that.x && this.y > that.y);\n    },\n\n    /**\n     * Returns true if this point is greater than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gte: function (that) {\n      return (this.x >= that.x && this.y >= that.y);\n    },\n\n    /**\n     * Returns new point which is the result of linear interpolation with this one and another one\n     * @param {fabric.Point} that\n     * @param {Number} t , position of interpolation, between 0 and 1 default 0.5\n     * @return {fabric.Point}\n     */\n    lerp: function (that, t) {\n      if (typeof t === 'undefined') {\n        t = 0.5;\n      }\n      t = Math.max(Math.min(1, t), 0);\n      return new Point(this.x + (that.x - this.x) * t, this.y + (that.y - this.y) * t);\n    },\n\n    /**\n     * Returns distance from this point and another one\n     * @param {fabric.Point} that\n     * @return {Number}\n     */\n    distanceFrom: function (that) {\n      var dx = this.x - that.x,\n          dy = this.y - that.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    },\n\n    /**\n     * Returns the point between this point and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    midPointFrom: function (that) {\n      return this.lerp(that);\n    },\n\n    /**\n     * Returns a new point which is the min of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    min: function (that) {\n      return new Point(Math.min(this.x, that.x), Math.min(this.y, that.y));\n    },\n\n    /**\n     * Returns a new point which is the max of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    max: function (that) {\n      return new Point(Math.max(this.x, that.x), Math.max(this.y, that.y));\n    },\n\n    /**\n     * Returns string representation of this point\n     * @return {String}\n     */\n    toString: function () {\n      return this.x + ',' + this.y;\n    },\n\n    /**\n     * Sets x/y of this point\n     * @param {Number} x\n     * @param {Number} y\n     * @chainable\n     */\n    setXY: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x of this point\n     * @param {Number} x\n     * @chainable\n     */\n    setX: function (x) {\n      this.x = x;\n      return this;\n    },\n\n    /**\n     * Sets y of this point\n     * @param {Number} y\n     * @chainable\n     */\n    setY: function (y) {\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x/y of this point from another point\n     * @param {fabric.Point} that\n     * @chainable\n     */\n    setFromPoint: function (that) {\n      this.x = that.x;\n      this.y = that.y;\n      return this;\n    },\n\n    /**\n     * Swaps x/y of this point and another point\n     * @param {fabric.Point} that\n     */\n    swap: function (that) {\n      var x = this.x,\n          y = this.y;\n      this.x = that.x;\n      this.y = that.y;\n      that.x = x;\n      that.y = y;\n    },\n\n    /**\n     * return a cloned instance of the point\n     * @return {fabric.Point}\n     */\n    clone: function () {\n      return new Point(this.x, this.y);\n    }\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Intersection) {\n    fabric.warn('fabric.Intersection is already defined');\n    return;\n  }\n\n  /**\n   * Intersection class\n   * @class fabric.Intersection\n   * @memberOf fabric\n   * @constructor\n   */\n  function Intersection(status) {\n    this.status = status;\n    this.points = [];\n  }\n\n  fabric.Intersection = Intersection;\n\n  fabric.Intersection.prototype = /** @lends fabric.Intersection.prototype */ {\n\n    constructor: Intersection,\n\n    /**\n     * Appends a point to intersection\n     * @param {fabric.Point} point\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoint: function (point) {\n      this.points.push(point);\n      return this;\n    },\n\n    /**\n     * Appends points to intersection\n     * @param {Array} points\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoints: function (points) {\n      this.points = this.points.concat(points);\n      return this;\n    }\n  };\n\n  /**\n   * Checks if one line intersects another\n   * TODO: rename in intersectSegmentSegment\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {fabric.Point} b1\n   * @param {fabric.Point} b2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLineLine = function (a1, a2, b1, b2) {\n    var result,\n        uaT = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x),\n        ubT = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x),\n        uB = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n    if (uB !== 0) {\n      var ua = uaT / uB,\n          ub = ubT / uB;\n      if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n        result = new Intersection('Intersection');\n        result.appendPoint(new fabric.Point(a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y)));\n      }\n      else {\n        result = new Intersection();\n      }\n    }\n    else {\n      if (uaT === 0 || ubT === 0) {\n        result = new Intersection('Coincident');\n      }\n      else {\n        result = new Intersection('Parallel');\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Checks if line intersects polygon\n   * TODO: rename in intersectSegmentPolygon\n   * fix detection of coincident\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {Array} points\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLinePolygon = function(a1, a2, points) {\n    var result = new Intersection(),\n        length = points.length,\n        b1, b2, inter, i;\n\n    for (i = 0; i < length; i++) {\n      b1 = points[i];\n      b2 = points[(i + 1) % length];\n      inter = Intersection.intersectLineLine(a1, a2, b1, b2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects another polygon\n   * @static\n   * @param {Array} points1\n   * @param {Array} points2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonPolygon = function (points1, points2) {\n    var result = new Intersection(),\n        length = points1.length, i;\n\n    for (i = 0; i < length; i++) {\n      var a1 = points1[i],\n          a2 = points1[(i + 1) % length],\n          inter = Intersection.intersectLinePolygon(a1, a2, points2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects rectangle\n   * @static\n   * @param {Array} points\n   * @param {fabric.Point} r1\n   * @param {fabric.Point} r2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonRectangle = function (points, r1, r2) {\n    var min = r1.min(r2),\n        max = r1.max(r2),\n        topRight = new fabric.Point(max.x, min.y),\n        bottomLeft = new fabric.Point(min.x, max.y),\n        inter1 = Intersection.intersectLinePolygon(min, topRight, points),\n        inter2 = Intersection.intersectLinePolygon(topRight, max, points),\n        inter3 = Intersection.intersectLinePolygon(max, bottomLeft, points),\n        inter4 = Intersection.intersectLinePolygon(bottomLeft, min, points),\n        result = new Intersection();\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Color) {\n    fabric.warn('fabric.Color is already defined.');\n    return;\n  }\n\n  /**\n   * Color class\n   * The purpose of {@link fabric.Color} is to abstract and encapsulate common color operations;\n   * {@link fabric.Color} is a constructor and creates instances of {@link fabric.Color} objects.\n   *\n   * @class fabric.Color\n   * @param {String} color optional in hex or rgb(a) or hsl format or from known color list\n   * @return {fabric.Color} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2/#colors}\n   */\n  function Color(color) {\n    if (!color) {\n      this.setSource([0, 0, 0, 1]);\n    }\n    else {\n      this._tryParsingColor(color);\n    }\n  }\n\n  fabric.Color = Color;\n\n  fabric.Color.prototype = /** @lends fabric.Color.prototype */ {\n\n    /**\n     * @private\n     * @param {String|Array} color Color value to parse\n     */\n    _tryParsingColor: function(color) {\n      var source;\n\n      if (color in Color.colorNameMap) {\n        color = Color.colorNameMap[color];\n      }\n\n      if (color === 'transparent') {\n        source = [255, 255, 255, 0];\n      }\n\n      if (!source) {\n        source = Color.sourceFromHex(color);\n      }\n      if (!source) {\n        source = Color.sourceFromRgb(color);\n      }\n      if (!source) {\n        source = Color.sourceFromHsl(color);\n      }\n      if (!source) {\n        //if color is not recognize let's make black as canvas does\n        source = [0, 0, 0, 1];\n      }\n      if (source) {\n        this.setSource(source);\n      }\n    },\n\n    /**\n     * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n     * @private\n     * @param {Number} r Red color value\n     * @param {Number} g Green color value\n     * @param {Number} b Blue color value\n     * @return {Array} Hsl color\n     */\n    _rgbToHsl: function(r, g, b) {\n      r /= 255; g /= 255; b /= 255;\n\n      var h, s, l,\n          max = fabric.util.array.max([r, g, b]),\n          min = fabric.util.array.min([r, g, b]);\n\n      l = (max + min) / 2;\n\n      if (max === min) {\n        h = s = 0; // achromatic\n      }\n      else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n        }\n        h /= 6;\n      }\n\n      return [\n        Math.round(h * 360),\n        Math.round(s * 100),\n        Math.round(l * 100)\n      ];\n    },\n\n    /**\n     * Returns source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @return {Array}\n     */\n    getSource: function() {\n      return this._source;\n    },\n\n    /**\n     * Sets source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @param {Array} source\n     */\n    setSource: function(source) {\n      this._source = source;\n    },\n\n    /**\n     * Returns color representation in RGB format\n     * @return {String} ex: rgb(0-255,0-255,0-255)\n     */\n    toRgb: function() {\n      var source = this.getSource();\n      return 'rgb(' + source[0] + ',' + source[1] + ',' + source[2] + ')';\n    },\n\n    /**\n     * Returns color representation in RGBA format\n     * @return {String} ex: rgba(0-255,0-255,0-255,0-1)\n     */\n    toRgba: function() {\n      var source = this.getSource();\n      return 'rgba(' + source[0] + ',' + source[1] + ',' + source[2] + ',' + source[3] + ')';\n    },\n\n    /**\n     * Returns color representation in HSL format\n     * @return {String} ex: hsl(0-360,0%-100%,0%-100%)\n     */\n    toHsl: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsl(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%)';\n    },\n\n    /**\n     * Returns color representation in HSLA format\n     * @return {String} ex: hsla(0-360,0%-100%,0%-100%,0-1)\n     */\n    toHsla: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsla(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%,' + source[3] + ')';\n    },\n\n    /**\n     * Returns color representation in HEX format\n     * @return {String} ex: FF5555\n     */\n    toHex: function() {\n      var source = this.getSource(), r, g, b;\n\n      r = source[0].toString(16);\n      r = (r.length === 1) ? ('0' + r) : r;\n\n      g = source[1].toString(16);\n      g = (g.length === 1) ? ('0' + g) : g;\n\n      b = source[2].toString(16);\n      b = (b.length === 1) ? ('0' + b) : b;\n\n      return r.toUpperCase() + g.toUpperCase() + b.toUpperCase();\n    },\n\n    /**\n     * Returns color representation in HEXA format\n     * @return {String} ex: FF5555CC\n     */\n    toHexa: function() {\n      var source = this.getSource(), a;\n\n      a = Math.round(source[3] * 255);\n      a = a.toString(16);\n      a = (a.length === 1) ? ('0' + a) : a;\n\n      return this.toHex() + a.toUpperCase();\n    },\n\n    /**\n     * Gets value of alpha channel for this color\n     * @return {Number} 0-1\n     */\n    getAlpha: function() {\n      return this.getSource()[3];\n    },\n\n    /**\n     * Sets value of alpha channel for this color\n     * @param {Number} alpha Alpha value 0-1\n     * @return {fabric.Color} thisArg\n     */\n    setAlpha: function(alpha) {\n      var source = this.getSource();\n      source[3] = alpha;\n      this.setSource(source);\n      return this;\n    },\n\n    /**\n     * Transforms color to its grayscale representation\n     * @return {fabric.Color} thisArg\n     */\n    toGrayscale: function() {\n      var source = this.getSource(),\n          average = parseInt((source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0), 10),\n          currentAlpha = source[3];\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Transforms color to its black and white representation\n     * @param {Number} threshold\n     * @return {fabric.Color} thisArg\n     */\n    toBlackWhite: function(threshold) {\n      var source = this.getSource(),\n          average = (source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0),\n          currentAlpha = source[3];\n\n      threshold = threshold || 127;\n\n      average = (Number(average) < Number(threshold)) ? 0 : 255;\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Overlays color with another color\n     * @param {String|fabric.Color} otherColor\n     * @return {fabric.Color} thisArg\n     */\n    overlayWith: function(otherColor) {\n      if (!(otherColor instanceof Color)) {\n        otherColor = new Color(otherColor);\n      }\n\n      var result = [],\n          alpha = this.getAlpha(),\n          otherAlpha = 0.5,\n          source = this.getSource(),\n          otherSource = otherColor.getSource(), i;\n\n      for (i = 0; i < 3; i++) {\n        result.push(Math.round((source[i] * (1 - otherAlpha)) + (otherSource[i] * otherAlpha)));\n      }\n\n      result[3] = alpha;\n      this.setSource(result);\n      return this;\n    }\n  };\n\n  /**\n   * Regex matching color in RGB or RGBA formats (ex: rgb(0, 0, 0), rgba(255, 100, 10, 0.5), rgba( 255 , 100 , 10 , 0.5 ), rgb(1,1,1), rgba(100%, 60%, 10%, 0.5))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  // eslint-disable-next-line max-len\n  fabric.Color.reRGBa = /^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i;\n\n  /**\n   * Regex matching color in HSL or HSLA formats (ex: hsl(200, 80%, 10%), hsla(300, 50%, 80%, 0.5), hsla( 300 , 50% , 80% , 0.5 ))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHSLa = /^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i;\n\n  /**\n   * Regex matching color in HEX format (ex: #FF5544CC, #FF5555, 010155, aff)\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;\n\n  /**\n   * Map of the 148 color names with HEX code\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   * @see: https://www.w3.org/TR/css3-color/#svg-color\n   */\n  fabric.Color.colorNameMap = {\n    aliceblue:            '#F0F8FF',\n    antiquewhite:         '#FAEBD7',\n    aqua:                 '#00FFFF',\n    aquamarine:           '#7FFFD4',\n    azure:                '#F0FFFF',\n    beige:                '#F5F5DC',\n    bisque:               '#FFE4C4',\n    black:                '#000000',\n    blanchedalmond:       '#FFEBCD',\n    blue:                 '#0000FF',\n    blueviolet:           '#8A2BE2',\n    brown:                '#A52A2A',\n    burlywood:            '#DEB887',\n    cadetblue:            '#5F9EA0',\n    chartreuse:           '#7FFF00',\n    chocolate:            '#D2691E',\n    coral:                '#FF7F50',\n    cornflowerblue:       '#6495ED',\n    cornsilk:             '#FFF8DC',\n    crimson:              '#DC143C',\n    cyan:                 '#00FFFF',\n    darkblue:             '#00008B',\n    darkcyan:             '#008B8B',\n    darkgoldenrod:        '#B8860B',\n    darkgray:             '#A9A9A9',\n    darkgrey:             '#A9A9A9',\n    darkgreen:            '#006400',\n    darkkhaki:            '#BDB76B',\n    darkmagenta:          '#8B008B',\n    darkolivegreen:       '#556B2F',\n    darkorange:           '#FF8C00',\n    darkorchid:           '#9932CC',\n    darkred:              '#8B0000',\n    darksalmon:           '#E9967A',\n    darkseagreen:         '#8FBC8F',\n    darkslateblue:        '#483D8B',\n    darkslategray:        '#2F4F4F',\n    darkslategrey:        '#2F4F4F',\n    darkturquoise:        '#00CED1',\n    darkviolet:           '#9400D3',\n    deeppink:             '#FF1493',\n    deepskyblue:          '#00BFFF',\n    dimgray:              '#696969',\n    dimgrey:              '#696969',\n    dodgerblue:           '#1E90FF',\n    firebrick:            '#B22222',\n    floralwhite:          '#FFFAF0',\n    forestgreen:          '#228B22',\n    fuchsia:              '#FF00FF',\n    gainsboro:            '#DCDCDC',\n    ghostwhite:           '#F8F8FF',\n    gold:                 '#FFD700',\n    goldenrod:            '#DAA520',\n    gray:                 '#808080',\n    grey:                 '#808080',\n    green:                '#008000',\n    greenyellow:          '#ADFF2F',\n    honeydew:             '#F0FFF0',\n    hotpink:              '#FF69B4',\n    indianred:            '#CD5C5C',\n    indigo:               '#4B0082',\n    ivory:                '#FFFFF0',\n    khaki:                '#F0E68C',\n    lavender:             '#E6E6FA',\n    lavenderblush:        '#FFF0F5',\n    lawngreen:            '#7CFC00',\n    lemonchiffon:         '#FFFACD',\n    lightblue:            '#ADD8E6',\n    lightcoral:           '#F08080',\n    lightcyan:            '#E0FFFF',\n    lightgoldenrodyellow: '#FAFAD2',\n    lightgray:            '#D3D3D3',\n    lightgrey:            '#D3D3D3',\n    lightgreen:           '#90EE90',\n    lightpink:            '#FFB6C1',\n    lightsalmon:          '#FFA07A',\n    lightseagreen:        '#20B2AA',\n    lightskyblue:         '#87CEFA',\n    lightslategray:       '#778899',\n    lightslategrey:       '#778899',\n    lightsteelblue:       '#B0C4DE',\n    lightyellow:          '#FFFFE0',\n    lime:                 '#00FF00',\n    limegreen:            '#32CD32',\n    linen:                '#FAF0E6',\n    magenta:              '#FF00FF',\n    maroon:               '#800000',\n    mediumaquamarine:     '#66CDAA',\n    mediumblue:           '#0000CD',\n    mediumorchid:         '#BA55D3',\n    mediumpurple:         '#9370DB',\n    mediumseagreen:       '#3CB371',\n    mediumslateblue:      '#7B68EE',\n    mediumspringgreen:    '#00FA9A',\n    mediumturquoise:      '#48D1CC',\n    mediumvioletred:      '#C71585',\n    midnightblue:         '#191970',\n    mintcream:            '#F5FFFA',\n    mistyrose:            '#FFE4E1',\n    moccasin:             '#FFE4B5',\n    navajowhite:          '#FFDEAD',\n    navy:                 '#000080',\n    oldlace:              '#FDF5E6',\n    olive:                '#808000',\n    olivedrab:            '#6B8E23',\n    orange:               '#FFA500',\n    orangered:            '#FF4500',\n    orchid:               '#DA70D6',\n    palegoldenrod:        '#EEE8AA',\n    palegreen:            '#98FB98',\n    paleturquoise:        '#AFEEEE',\n    palevioletred:        '#DB7093',\n    papayawhip:           '#FFEFD5',\n    peachpuff:            '#FFDAB9',\n    peru:                 '#CD853F',\n    pink:                 '#FFC0CB',\n    plum:                 '#DDA0DD',\n    powderblue:           '#B0E0E6',\n    purple:               '#800080',\n    rebeccapurple:        '#663399',\n    red:                  '#FF0000',\n    rosybrown:            '#BC8F8F',\n    royalblue:            '#4169E1',\n    saddlebrown:          '#8B4513',\n    salmon:               '#FA8072',\n    sandybrown:           '#F4A460',\n    seagreen:             '#2E8B57',\n    seashell:             '#FFF5EE',\n    sienna:               '#A0522D',\n    silver:               '#C0C0C0',\n    skyblue:              '#87CEEB',\n    slateblue:            '#6A5ACD',\n    slategray:            '#708090',\n    slategrey:            '#708090',\n    snow:                 '#FFFAFA',\n    springgreen:          '#00FF7F',\n    steelblue:            '#4682B4',\n    tan:                  '#D2B48C',\n    teal:                 '#008080',\n    thistle:              '#D8BFD8',\n    tomato:               '#FF6347',\n    turquoise:            '#40E0D0',\n    violet:               '#EE82EE',\n    wheat:                '#F5DEB3',\n    white:                '#FFFFFF',\n    whitesmoke:           '#F5F5F5',\n    yellow:               '#FFFF00',\n    yellowgreen:          '#9ACD32'\n  };\n\n  /**\n   * @private\n   * @param {Number} p\n   * @param {Number} q\n   * @param {Number} t\n   * @return {Number}\n   */\n  function hue2rgb(p, q, t) {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  /**\n   * Returns new color object, when given a color in RGB format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255)\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgb = function(color) {\n    return Color.fromSource(Color.sourceFromRgb(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in RGB or RGBA format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255), rgb(0%-100%,0%-100%,0%-100%)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromRgb = function(color) {\n    var match = color.match(Color.reRGBa);\n    if (match) {\n      var r = parseInt(match[1], 10) / (/%$/.test(match[1]) ? 100 : 1) * (/%$/.test(match[1]) ? 255 : 1),\n          g = parseInt(match[2], 10) / (/%$/.test(match[2]) ? 100 : 1) * (/%$/.test(match[2]) ? 255 : 1),\n          b = parseInt(match[3], 10) / (/%$/.test(match[3]) ? 100 : 1) * (/%$/.test(match[3]) ? 255 : 1);\n\n      return [\n        parseInt(r, 10),\n        parseInt(g, 10),\n        parseInt(b, 10),\n        match[4] ? parseFloat(match[4]) : 1\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given a color in RGBA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgba = Color.fromRgb;\n\n  /**\n   * Returns new color object, when given a color in HSL format\n   * @param {String} color Color value ex: hsl(0-260,0%-100%,0%-100%)\n   * @memberOf fabric.Color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsl = function(color) {\n    return Color.fromSource(Color.sourceFromHsl(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HSL or HSLA format.\n   * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: hsl(0-360,0%-100%,0%-100%) or hsla(0-360,0%-100%,0%-100%, 0-1)\n   * @return {Array} source\n   * @see http://http://www.w3.org/TR/css3-color/#hsl-color\n   */\n  fabric.Color.sourceFromHsl = function(color) {\n    var match = color.match(Color.reHSLa);\n    if (!match) {\n      return;\n    }\n\n    var h = (((parseFloat(match[1]) % 360) + 360) % 360) / 360,\n        s = parseFloat(match[2]) / (/%$/.test(match[2]) ? 100 : 1),\n        l = parseFloat(match[3]) / (/%$/.test(match[3]) ? 100 : 1),\n        r, g, b;\n\n    if (s === 0) {\n      r = g = b = l;\n    }\n    else {\n      var q = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n          p = l * 2 - q;\n\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [\n      Math.round(r * 255),\n      Math.round(g * 255),\n      Math.round(b * 255),\n      match[4] ? parseFloat(match[4]) : 1\n    ];\n  };\n\n  /**\n   * Returns new color object, when given a color in HSLA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsla = Color.fromHsl;\n\n  /**\n   * Returns new color object, when given a color in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: FF5555\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHex = function(color) {\n    return Color.fromSource(Color.sourceFromHex(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color ex: FF5555 or FF5544CC (RGBa)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromHex = function(color) {\n    if (color.match(Color.reHex)) {\n      var value = color.slice(color.indexOf('#') + 1),\n          isShortNotation = (value.length === 3 || value.length === 4),\n          isRGBa = (value.length === 8 || value.length === 4),\n          r = isShortNotation ? (value.charAt(0) + value.charAt(0)) : value.substring(0, 2),\n          g = isShortNotation ? (value.charAt(1) + value.charAt(1)) : value.substring(2, 4),\n          b = isShortNotation ? (value.charAt(2) + value.charAt(2)) : value.substring(4, 6),\n          a = isRGBa ? (isShortNotation ? (value.charAt(3) + value.charAt(3)) : value.substring(6, 8)) : 'FF';\n\n      return [\n        parseInt(r, 16),\n        parseInt(g, 16),\n        parseInt(b, 16),\n        parseFloat((parseInt(a, 16) / 255).toFixed(2))\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given color in array representation (ex: [200, 100, 100, 0.5])\n   * @static\n   * @memberOf fabric.Color\n   * @param {Array} source\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromSource = function(source) {\n    var oColor = new Color();\n    oColor.setSource(source);\n    return oColor;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      scaleMap = ['e', 'se', 's', 'sw', 'w', 'nw', 'n', 'ne', 'e'],\n      skewMap = ['ns', 'nesw', 'ew', 'nwse'],\n      controls = {},\n      LEFT = 'left', TOP = 'top', RIGHT = 'right', BOTTOM = 'bottom', CENTER = 'center',\n      opposite = {\n        top: BOTTOM,\n        bottom: TOP,\n        left: RIGHT,\n        right: LEFT,\n        center: CENTER,\n      }, radiansToDegrees = fabric.util.radiansToDegrees,\n      sign = (Math.sign || function(x) { return ((x > 0) - (x < 0)) || +x; });\n\n  /**\n   * Combine control position and object angle to find the control direction compared\n   * to the object center.\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   * @param {fabric.Control} control the control class\n   * @return {Number} 0 - 7 a quadrant number\n   */\n  function findCornerQuadrant(fabricObject, control) {\n    var cornerAngle = fabricObject.angle + radiansToDegrees(Math.atan2(control.y, control.x)) + 360;\n    return Math.round((cornerAngle % 360) / 45);\n  }\n\n  function fireEvent(eventName, options) {\n    var target = options.transform.target,\n        canvas = target.canvas,\n        canvasOptions = fabric.util.object.clone(options);\n    canvasOptions.target = target;\n    canvas && canvas.fire('object:' + eventName, canvasOptions);\n    target.fire(eventName, options);\n  }\n\n  /**\n   * Inspect event and fabricObject properties to understand if the scaling action\n   * @param {Event} eventData from the user action\n   * @param {fabric.Object} fabricObject the fabric object about to scale\n   * @return {Boolean} true if scale is proportional\n   */\n  function scaleIsProportional(eventData, fabricObject) {\n    var canvas = fabricObject.canvas, uniScaleKey = canvas.uniScaleKey,\n        uniformIsToggled = eventData[uniScaleKey];\n    return (canvas.uniformScaling && !uniformIsToggled) ||\n    (!canvas.uniformScaling && uniformIsToggled);\n  }\n\n  /**\n   * Checks if transform is centered\n   * @param {Object} transform transform data\n   * @return {Boolean} true if transform is centered\n   */\n  function isTransformCentered(transform) {\n    return transform.originX === CENTER && transform.originY === CENTER;\n  }\n\n  /**\n   * Inspect fabricObject to understand if the current scaling action is allowed\n   * @param {fabric.Object} fabricObject the fabric object about to scale\n   * @param {String} by 'x' or 'y' or ''\n   * @param {Boolean} scaleProportionally true if we are trying to scale proportionally\n   * @return {Boolean} true if scaling is not allowed at current conditions\n   */\n  function scalingIsForbidden(fabricObject, by, scaleProportionally) {\n    var lockX = fabricObject.lockScalingX, lockY = fabricObject.lockScalingY;\n    if (lockX && lockY) {\n      return true;\n    }\n    if (!by && (lockX || lockY) && scaleProportionally) {\n      return true;\n    }\n    if (lockX && by === 'x') {\n      return true;\n    }\n    if (lockY && by === 'y') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * return the correct cursor style for the scale action\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function scaleCursorStyleHandler(eventData, control, fabricObject) {\n    var notAllowed = 'not-allowed',\n        scaleProportionally = scaleIsProportional(eventData, fabricObject),\n        by = '';\n    if (control.x !== 0 && control.y === 0) {\n      by = 'x';\n    }\n    else if (control.x === 0 && control.y !== 0) {\n      by = 'y';\n    }\n    if (scalingIsForbidden(fabricObject, by, scaleProportionally)) {\n      return notAllowed;\n    }\n    var n = findCornerQuadrant(fabricObject, control);\n    return scaleMap[n] + '-resize';\n  }\n\n  /**\n   * return the correct cursor style for the skew action\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function skewCursorStyleHandler(eventData, control, fabricObject) {\n    var notAllowed = 'not-allowed';\n    if (control.x !== 0 && fabricObject.lockSkewingY) {\n      return notAllowed;\n    }\n    if (control.y !== 0 && fabricObject.lockSkewingX) {\n      return notAllowed;\n    }\n    var n = findCornerQuadrant(fabricObject, control) % 4;\n    return skewMap[n] + '-resize';\n  }\n\n  /**\n   * Combine skew and scale style handlers to cover fabric standard use case\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function scaleSkewCursorStyleHandler(eventData, control, fabricObject) {\n    if (eventData[fabricObject.canvas.altActionKey]) {\n      return controls.skewCursorStyleHandler(eventData, control, fabricObject);\n    }\n    return controls.scaleCursorStyleHandler(eventData, control, fabricObject);\n  }\n\n  /**\n   * Inspect event, control and fabricObject to return the correct action name\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} an action name\n   */\n  function scaleOrSkewActionName(eventData, control, fabricObject) {\n    var isAlternative = eventData[fabricObject.canvas.altActionKey];\n    if (control.x === 0) {\n      // then is scaleY or skewX\n      return isAlternative ? 'skewX' : 'scaleY';\n    }\n    if (control.y === 0) {\n      // then is scaleY or skewX\n      return isAlternative ? 'skewY' : 'scaleX';\n    }\n  }\n\n  /**\n   * Find the correct style for the control that is used for rotation.\n   * this function is very simple and it just take care of not-allowed or standard cursor\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function rotationStyleHandler(eventData, control, fabricObject) {\n    if (fabricObject.lockRotation) {\n      return 'not-allowed';\n    }\n    return control.cursorStyle;\n  }\n\n  function commonEventInfo(eventData, transform, x, y) {\n    return {\n      e: eventData,\n      transform: transform,\n      pointer: {\n        x: x,\n        y: y,\n      }\n    };\n  }\n\n  /**\n   * Wrap an action handler with saving/restoring object position on the transform.\n   * this is the code that permits to objects to keep their position while transforming.\n   * @param {Function} actionHandler the function to wrap\n   * @return {Function} a function with an action handler signature\n   */\n  function wrapWithFixedAnchor(actionHandler) {\n    return function(eventData, transform, x, y) {\n      var target = transform.target, centerPoint = target.getCenterPoint(),\n          constraint = target.translateToOriginPoint(centerPoint, transform.originX, transform.originY),\n          actionPerformed = actionHandler(eventData, transform, x, y);\n      target.setPositionByOrigin(constraint, transform.originX, transform.originY);\n      return actionPerformed;\n    };\n  }\n\n  /**\n   * Transforms a point described by x and y in a distance from the top left corner of the object\n   * bounding box.\n   * @param {Object} transform\n   * @param {String} originX\n   * @param {String} originY\n   * @param {number} x\n   * @param {number} y\n   * @return {Fabric.Point} the normalized point\n   */\n  function getLocalPoint(transform, originX, originY, x, y) {\n    var target = transform.target,\n        control = target.controls[transform.corner],\n        zoom = target.canvas.getZoom(),\n        padding = target.padding / zoom,\n        localPoint = target.toLocalPoint(new fabric.Point(x, y), originX, originY);\n    if (localPoint.x >= padding) {\n      localPoint.x -= padding;\n    }\n    if (localPoint.x <= -padding) {\n      localPoint.x += padding;\n    }\n    if (localPoint.y >= padding) {\n      localPoint.y -= padding;\n    }\n    if (localPoint.y <= padding) {\n      localPoint.y += padding;\n    }\n    localPoint.x -= control.offsetX;\n    localPoint.y -= control.offsetY;\n    return localPoint;\n  }\n\n  /**\n   * Detect if the fabric object is flipped on one side.\n   * @param {fabric.Object} target\n   * @return {Boolean} true if one flip, but not two.\n   */\n  function targetHasOneFlip(target) {\n    return target.flipX !== target.flipY;\n  }\n\n  /**\n   * Utility function to compensate the scale factor when skew is applied on both axes\n   * @private\n   */\n  function compensateScaleForSkew(target, oppositeSkew, scaleToCompensate, axis, reference) {\n    if (target[oppositeSkew] !== 0) {\n      var newDim = target._getTransformedDimensions()[axis];\n      var newValue = reference / newDim * target[scaleToCompensate];\n      target.set(scaleToCompensate, newValue);\n    }\n  }\n\n  /**\n   * Action handler for skewing on the X axis\n   * @private\n   */\n  function skewObjectX(eventData, transform, x, y) {\n    var target = transform.target,\n        // find how big the object would be, if there was no skewX. takes in account scaling\n        dimNoSkew = target._getTransformedDimensions(0, target.skewY),\n        localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        // the mouse is in the center of the object, and we want it to stay there.\n        // so the object will grow twice as much as the mouse.\n        // this makes the skew growth to localPoint * 2 - dimNoSkew.\n        totalSkewSize = Math.abs(localPoint.x * 2) - dimNoSkew.x,\n        currentSkew = target.skewX, newSkew;\n    if (totalSkewSize < 2) {\n      // let's make it easy to go back to position 0.\n      newSkew = 0;\n    }\n    else {\n      newSkew = radiansToDegrees(\n        Math.atan2((totalSkewSize / target.scaleX), (dimNoSkew.y / target.scaleY))\n      );\n      // now we have to find the sign of the skew.\n      // it mostly depend on the origin of transformation.\n      if (transform.originX === LEFT && transform.originY === BOTTOM) {\n        newSkew = -newSkew;\n      }\n      if (transform.originX === RIGHT && transform.originY === TOP) {\n        newSkew = -newSkew;\n      }\n      if (targetHasOneFlip(target)) {\n        newSkew = -newSkew;\n      }\n    }\n    var hasSkewed = currentSkew !== newSkew;\n    if (hasSkewed) {\n      var dimBeforeSkewing = target._getTransformedDimensions().y;\n      target.set('skewX', newSkew);\n      compensateScaleForSkew(target, 'skewY', 'scaleY', 'y', dimBeforeSkewing);\n      fireEvent('skewing', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasSkewed;\n  }\n\n  /**\n   * Action handler for skewing on the Y axis\n   * @private\n   */\n  function skewObjectY(eventData, transform, x, y) {\n    var target = transform.target,\n        // find how big the object would be, if there was no skewX. takes in account scaling\n        dimNoSkew = target._getTransformedDimensions(target.skewX, 0),\n        localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        // the mouse is in the center of the object, and we want it to stay there.\n        // so the object will grow twice as much as the mouse.\n        // this makes the skew growth to localPoint * 2 - dimNoSkew.\n        totalSkewSize = Math.abs(localPoint.y * 2) - dimNoSkew.y,\n        currentSkew = target.skewY, newSkew;\n    if (totalSkewSize < 2) {\n      // let's make it easy to go back to position 0.\n      newSkew = 0;\n    }\n    else {\n      newSkew = radiansToDegrees(\n        Math.atan2((totalSkewSize / target.scaleY), (dimNoSkew.x / target.scaleX))\n      );\n      // now we have to find the sign of the skew.\n      // it mostly depend on the origin of transformation.\n      if (transform.originX === LEFT && transform.originY === BOTTOM) {\n        newSkew = -newSkew;\n      }\n      if (transform.originX === RIGHT && transform.originY === TOP) {\n        newSkew = -newSkew;\n      }\n      if (targetHasOneFlip(target)) {\n        newSkew = -newSkew;\n      }\n    }\n    var hasSkewed = currentSkew !== newSkew;\n    if (hasSkewed) {\n      var dimBeforeSkewing = target._getTransformedDimensions().x;\n      target.set('skewY', newSkew);\n      compensateScaleForSkew(target, 'skewX', 'scaleX', 'x', dimBeforeSkewing);\n      fireEvent('skewing', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasSkewed;\n  }\n\n  /**\n   * Wrapped Action handler for skewing on the Y axis, takes care of the\n   * skew direction and determine the correct transform origin for the anchor point\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function skewHandlerX(eventData, transform, x, y) {\n    // step1 figure out and change transform origin.\n    // if skewX > 0 and originY bottom we anchor on right\n    // if skewX > 0 and originY top we anchor on left\n    // if skewX < 0 and originY bottom we anchor on left\n    // if skewX < 0 and originY top we anchor on right\n    // if skewX is 0, we look for mouse position to understand where are we going.\n    var target = transform.target, currentSkew = target.skewX, originX, originY = transform.originY;\n    if (target.lockSkewingX) {\n      return false;\n    }\n    if (currentSkew === 0) {\n      var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);\n      if (localPointFromCenter.x > 0) {\n        // we are pulling right, anchor left;\n        originX = LEFT;\n      }\n      else {\n        // we are pulling right, anchor right\n        originX = RIGHT;\n      }\n    }\n    else {\n      if (currentSkew > 0) {\n        originX = originY === TOP ? LEFT : RIGHT;\n      }\n      if (currentSkew < 0) {\n        originX = originY === TOP ? RIGHT : LEFT;\n      }\n      // is the object flipped on one side only? swap the origin.\n      if (targetHasOneFlip(target)) {\n        originX = originX === LEFT ? RIGHT : LEFT;\n      }\n    }\n\n    // once we have the origin, we find the anchor point\n    transform.originX = originX;\n    var finalHandler = wrapWithFixedAnchor(skewObjectX);\n    return finalHandler(eventData, transform, x, y);\n  }\n\n  /**\n   * Wrapped Action handler for skewing on the Y axis, takes care of the\n   * skew direction and determine the correct transform origin for the anchor point\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function skewHandlerY(eventData, transform, x, y) {\n    // step1 figure out and change transform origin.\n    // if skewY > 0 and originX left we anchor on top\n    // if skewY > 0 and originX right we anchor on bottom\n    // if skewY < 0 and originX left we anchor on bottom\n    // if skewY < 0 and originX right we anchor on top\n    // if skewY is 0, we look for mouse position to understand where are we going.\n    var target = transform.target, currentSkew = target.skewY, originY, originX = transform.originX;\n    if (target.lockSkewingY) {\n      return false;\n    }\n    if (currentSkew === 0) {\n      var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);\n      if (localPointFromCenter.y > 0) {\n        // we are pulling down, anchor up;\n        originY = TOP;\n      }\n      else {\n        // we are pulling up, anchor down\n        originY = BOTTOM;\n      }\n    }\n    else {\n      if (currentSkew > 0) {\n        originY = originX === LEFT ? TOP : BOTTOM;\n      }\n      if (currentSkew < 0) {\n        originY = originX === LEFT ? BOTTOM : TOP;\n      }\n      // is the object flipped on one side only? swap the origin.\n      if (targetHasOneFlip(target)) {\n        originY = originY === TOP ? BOTTOM : TOP;\n      }\n    }\n\n    // once we have the origin, we find the anchor point\n    transform.originY = originY;\n    var finalHandler = wrapWithFixedAnchor(skewObjectY);\n    return finalHandler(eventData, transform, x, y);\n  }\n\n  /**\n   * Action handler for rotation and snapping, without anchor point.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   * @private\n   */\n  function rotationWithSnapping(eventData, transform, x, y) {\n    var t = transform,\n        target = t.target,\n        pivotPoint = target.translateToOriginPoint(target.getCenterPoint(), t.originX, t.originY);\n\n    if (target.lockRotation) {\n      return false;\n    }\n\n    var lastAngle = Math.atan2(t.ey - pivotPoint.y, t.ex - pivotPoint.x),\n        curAngle = Math.atan2(y - pivotPoint.y, x - pivotPoint.x),\n        angle = radiansToDegrees(curAngle - lastAngle + t.theta),\n        hasRotated = true;\n\n    if (target.snapAngle > 0) {\n      var snapAngle  = target.snapAngle,\n          snapThreshold  = target.snapThreshold || snapAngle,\n          rightAngleLocked = Math.ceil(angle / snapAngle) * snapAngle,\n          leftAngleLocked = Math.floor(angle / snapAngle) * snapAngle;\n\n      if (Math.abs(angle - leftAngleLocked) < snapThreshold) {\n        angle = leftAngleLocked;\n      }\n      else if (Math.abs(angle - rightAngleLocked) < snapThreshold) {\n        angle = rightAngleLocked;\n      }\n    }\n\n    // normalize angle to positive value\n    if (angle < 0) {\n      angle = 360 + angle;\n    }\n    angle %= 360;\n\n    hasRotated = target.angle !== angle;\n    target.angle = angle;\n    if (hasRotated) {\n      fireEvent('rotating', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasRotated;\n  }\n\n  /**\n   * Basic scaling logic, reused with different constrain for scaling X,Y, freely or equally.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @param {Object} options additional information for scaling\n   * @param {String} options.by 'x', 'y', 'equally' or '' to indicate type of scaling\n   * @return {Boolean} true if some change happened\n   * @private\n   */\n  function scaleObject(eventData, transform, x, y, options) {\n    options = options || {};\n    var target = transform.target,\n        lockScalingX = target.lockScalingX, lockScalingY = target.lockScalingY,\n        by = options.by, newPoint, scaleX, scaleY, dim,\n        scaleProportionally = scaleIsProportional(eventData, target),\n        forbidScaling = scalingIsForbidden(target, by, scaleProportionally),\n        signX, signY, gestureScale = transform.gestureScale;\n\n    if (forbidScaling) {\n      return false;\n    }\n    if (gestureScale) {\n      scaleX = transform.scaleX * gestureScale;\n      scaleY = transform.scaleY * gestureScale;\n    }\n    else {\n      newPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y);\n      // use of sign: We use sign to detect change of direction of an action. sign usually change when\n      // we cross the origin point with the mouse. So a scale flip for example. There is an issue when scaling\n      // by center and scaling using one middle control ( default: mr, mt, ml, mb), the mouse movement can easily\n      // cross many time the origin point and flip the object. so we need a way to filter out the noise.\n      // This ternary here should be ok to filter out X scaling when we want Y only and vice versa.\n      signX = by !== 'y' ? sign(newPoint.x) : 1;\n      signY = by !== 'x' ? sign(newPoint.y) : 1;\n      if (!transform.signX) {\n        transform.signX = signX;\n      }\n      if (!transform.signY) {\n        transform.signY = signY;\n      }\n\n      if (target.lockScalingFlip &&\n        (transform.signX !== signX || transform.signY !== signY)\n      ) {\n        return false;\n      }\n\n      dim = target._getTransformedDimensions();\n      // missing detection of flip and logic to switch the origin\n      if (scaleProportionally && !by) {\n        // uniform scaling\n        var distance = Math.abs(newPoint.x) + Math.abs(newPoint.y),\n            original = transform.original,\n            originalDistance = Math.abs(dim.x * original.scaleX / target.scaleX) +\n              Math.abs(dim.y * original.scaleY / target.scaleY),\n            scale = distance / originalDistance, hasScaled;\n        scaleX = original.scaleX * scale;\n        scaleY = original.scaleY * scale;\n      }\n      else {\n        scaleX = Math.abs(newPoint.x * target.scaleX / dim.x);\n        scaleY = Math.abs(newPoint.y * target.scaleY / dim.y);\n      }\n      // if we are scaling by center, we need to double the scale\n      if (isTransformCentered(transform)) {\n        scaleX *= 2;\n        scaleY *= 2;\n      }\n      if (transform.signX !== signX && by !== 'y') {\n        transform.originX = opposite[transform.originX];\n        scaleX *= -1;\n        transform.signX = signX;\n      }\n      if (transform.signY !== signY && by !== 'x') {\n        transform.originY = opposite[transform.originY];\n        scaleY *= -1;\n        transform.signY = signY;\n      }\n    }\n    // minScale is taken are in the setter.\n    var oldScaleX = target.scaleX, oldScaleY = target.scaleY;\n    if (!by) {\n      !lockScalingX && target.set('scaleX', scaleX);\n      !lockScalingY && target.set('scaleY', scaleY);\n    }\n    else {\n      // forbidden cases already handled on top here.\n      by === 'x' && target.set('scaleX', scaleX);\n      by === 'y' && target.set('scaleY', scaleY);\n    }\n    hasScaled = oldScaleX !== target.scaleX || oldScaleY !== target.scaleY;\n    if (hasScaled) {\n      fireEvent('scaling', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasScaled;\n  }\n\n  /**\n   * Generic scaling logic, to scale from corners either equally or freely.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectFromCorner(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y);\n  }\n\n  /**\n   * Scaling logic for the X axis.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectX(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y , { by: 'x' });\n  }\n\n  /**\n   * Scaling logic for the Y axis.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectY(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y , { by: 'y' });\n  }\n\n  /**\n   * Composed action handler to either scale Y or skew X\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scalingYOrSkewingX(eventData, transform, x, y) {\n    // ok some safety needed here.\n    if (eventData[transform.target.canvas.altActionKey]) {\n      return controls.skewHandlerX(eventData, transform, x, y);\n    }\n    return controls.scalingY(eventData, transform, x, y);\n  }\n\n  /**\n   * Composed action handler to either scale X or skew Y\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scalingXOrSkewingY(eventData, transform, x, y) {\n    // ok some safety needed here.\n    if (eventData[transform.target.canvas.altActionKey]) {\n      return controls.skewHandlerY(eventData, transform, x, y);\n    }\n    return controls.scalingX(eventData, transform, x, y);\n  }\n\n  /**\n   * Action handler to change textbox width\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function changeWidth(eventData, transform, x, y) {\n    var target = transform.target, localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        strokePadding = target.strokeWidth / (target.strokeUniform ? target.scaleX : 1),\n        multiplier = isTransformCentered(transform) ? 2 : 1,\n        oldWidth = target.width, hasResized,\n        newWidth = Math.abs(localPoint.x * multiplier / target.scaleX) - strokePadding;\n    target.set('width', Math.max(newWidth, 0));\n    hasResized = oldWidth !== newWidth;\n    if (hasResized) {\n      fireEvent('resizing', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasResized;\n  }\n\n  /**\n   * Action handler\n   * @private\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if the translation occurred\n   */\n  function dragHandler(eventData, transform, x, y) {\n    var target = transform.target,\n        newLeft = x - transform.offsetX,\n        newTop = y - transform.offsetY,\n        moveX = !target.get('lockMovementX') && target.left !== newLeft,\n        moveY = !target.get('lockMovementY') && target.top !== newTop;\n    moveX && target.set('left', newLeft);\n    moveY && target.set('top', newTop);\n    if (moveX || moveY) {\n      fireEvent('moving', commonEventInfo(eventData, transform, x, y));\n    }\n    return moveX || moveY;\n  }\n\n  controls.scaleCursorStyleHandler = scaleCursorStyleHandler;\n  controls.skewCursorStyleHandler = skewCursorStyleHandler;\n  controls.scaleSkewCursorStyleHandler = scaleSkewCursorStyleHandler;\n  controls.rotationWithSnapping = wrapWithFixedAnchor(rotationWithSnapping);\n  controls.scalingEqually = wrapWithFixedAnchor(scaleObjectFromCorner);\n  controls.scalingX = wrapWithFixedAnchor(scaleObjectX);\n  controls.scalingY = wrapWithFixedAnchor(scaleObjectY);\n  controls.scalingYOrSkewingX = scalingYOrSkewingX;\n  controls.scalingXOrSkewingY = scalingXOrSkewingY;\n  controls.changeWidth = wrapWithFixedAnchor(changeWidth);\n  controls.skewHandlerX = skewHandlerX;\n  controls.skewHandlerY = skewHandlerY;\n  controls.dragHandler = dragHandler;\n  controls.scaleOrSkewActionName = scaleOrSkewActionName;\n  controls.rotationStyleHandler = rotationStyleHandler;\n  controls.fireEvent = fireEvent;\n  controls.wrapWithFixedAnchor = wrapWithFixedAnchor;\n  controls.getLocalPoint = getLocalPoint;\n  fabric.controlsUtils = controls;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      degreesToRadians = fabric.util.degreesToRadians,\n      controls = fabric.controlsUtils;\n\n  /**\n   * Render a round control, as per fabric features.\n   * This function is written to respect object properties like transparentCorners, cornerSize\n   * cornerColor, cornerStrokeColor\n   * plus the addition of offsetY and offsetX.\n   * @param {CanvasRenderingContext2D} ctx context to render on\n   * @param {Number} left x coordinate where the control center should be\n   * @param {Number} top y coordinate where the control center should be\n   * @param {Object} styleOverride override for fabric.Object controls style\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   */\n  function renderCircleControl (ctx, left, top, styleOverride, fabricObject) {\n    styleOverride = styleOverride || {};\n    var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize,\n        ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize,\n        transparentCorners = typeof styleOverride.transparentCorners !== 'undefined' ?\n          styleOverride.transparentCorners : this.transparentCorners,\n        methodName = transparentCorners ? 'stroke' : 'fill',\n        stroke = !transparentCorners && (styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor),\n        myLeft = left,\n        myTop = top, size;\n    ctx.save();\n    ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;\n    ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;\n    // as soon as fabric react v5, remove ie11, use proper ellipse code.\n    if (xSize > ySize) {\n      size = xSize;\n      ctx.scale(1.0, ySize / xSize);\n      myTop = top * xSize / ySize;\n    }\n    else if (ySize > xSize) {\n      size = ySize;\n      ctx.scale(xSize / ySize, 1.0);\n      myLeft = left * ySize / xSize;\n    }\n    else {\n      size = xSize;\n    }\n    // this is still wrong\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.arc(myLeft, myTop, size / 2, 0, 2 * Math.PI, false);\n    ctx[methodName]();\n    if (stroke) {\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n\n  /**\n   * Render a square control, as per fabric features.\n   * This function is written to respect object properties like transparentCorners, cornerSize\n   * cornerColor, cornerStrokeColor\n   * plus the addition of offsetY and offsetX.\n   * @param {CanvasRenderingContext2D} ctx context to render on\n   * @param {Number} left x coordinate where the control center should be\n   * @param {Number} top y coordinate where the control center should be\n   * @param {Object} styleOverride override for fabric.Object controls style\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   */\n  function renderSquareControl(ctx, left, top, styleOverride, fabricObject) {\n    styleOverride = styleOverride || {};\n    var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize,\n        ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize,\n        transparentCorners = typeof styleOverride.transparentCorners !== 'undefined' ?\n          styleOverride.transparentCorners : fabricObject.transparentCorners,\n        methodName = transparentCorners ? 'stroke' : 'fill',\n        stroke = !transparentCorners && (\n          styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor\n        ), xSizeBy2 = xSize / 2, ySizeBy2 = ySize / 2;\n    ctx.save();\n    ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;\n    ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;\n    // this is still wrong\n    ctx.lineWidth = 1;\n    ctx.translate(left, top);\n    ctx.rotate(degreesToRadians(fabricObject.angle));\n    // this does not work, and fixed with ( && ) does not make sense.\n    // to have real transparent corners we need the controls on upperCanvas\n    // transparentCorners || ctx.clearRect(-xSizeBy2, -ySizeBy2, xSize, ySize);\n    ctx[methodName + 'Rect'](-xSizeBy2, -ySizeBy2, xSize, ySize);\n    if (stroke) {\n      ctx.strokeRect(-xSizeBy2, -ySizeBy2, xSize, ySize);\n    }\n    ctx.restore();\n  }\n\n  controls.renderCircleControl = renderCircleControl;\n  controls.renderSquareControl = renderSquareControl;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  function Control(options) {\n    for (var i in options) {\n      this[i] = options[i];\n    }\n  }\n\n  fabric.Control = Control;\n\n  fabric.Control.prototype = /** @lends fabric.Control.prototype */ {\n\n    /**\n     * keep track of control visibility.\n     * mainly for backward compatibility.\n     * if you do not want to see a control, you can remove it\n     * from the controlset.\n     * @type {Boolean}\n     * @default true\n     */\n    visible: true,\n\n    /**\n     * Name of the action that the control will likely execute.\n     * This is optional. FabricJS uses to identify what the user is doing for some\n     * extra optimizations. If you are writing a custom control and you want to know\n     * somewhere else in the code what is going on, you can use this string here.\n     * you can also provide a custom getActionName if your control run multiple actions\n     * depending on some external state.\n     * default to scale since is the most common, used on 4 corners by default\n     * @type {String}\n     * @default 'scale'\n     */\n    actionName: 'scale',\n\n    /**\n     * Drawing angle of the control.\n     * NOT used for now, but name marked as needed for internal logic\n     * example: to reuse the same drawing function for different rotated controls\n     * @type {Number}\n     * @default 0\n     */\n    angle: 0,\n\n    /**\n     * Relative position of the control. X\n     * 0,0 is the center of the Object, while -0.5 (left) or 0.5 (right) are the extremities\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    x: 0,\n\n    /**\n     * Relative position of the control. Y\n     * 0,0 is the center of the Object, while -0.5 (top) or 0.5 (bottom) are the extremities\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    y: 0,\n\n    /**\n     * Horizontal offset of the control from the defined position. In pixels\n     * Positive offset moves the control to the right, negative to the left.\n     * It used when you want to have position of control that does not scale with\n     * the bounding box. Example: rotation control is placed at x:0, y: 0.5 on\n     * the boundindbox, with an offset of 30 pixels vertically. Those 30 pixels will\n     * stay 30 pixels no matter how the object is big. Another example is having 2\n     * controls in the corner, that stay in the same position when the object scale.\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset of the control from the defined position. In pixels\n     * Positive offset moves the control to the bottom, negative to the top.\n     * @type {Number}\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * Sets the length of the control. If null, defaults to object's cornerSize.\n     * Expects both sizeX and sizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    sizeX: null,\n\n    /**\n     * Sets the height of the control. If null, defaults to object's cornerSize.\n     * Expects both sizeX and sizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    sizeY: null,\n\n    /**\n     * Sets the length of the touch area of the control. If null, defaults to object's touchCornerSize.\n     * Expects both touchSizeX and touchSizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    touchSizeX: null,\n\n    /**\n     * Sets the height of the touch area of the control. If null, defaults to object's touchCornerSize.\n     * Expects both touchSizeX and touchSizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    touchSizeY: null,\n\n    /**\n     * Css cursor style to display when the control is hovered.\n     * if the method `cursorStyleHandler` is provided, this property is ignored.\n     * @type {String}\n     * @default 'crosshair'\n     */\n    cursorStyle: 'crosshair',\n\n    /**\n     * If controls has an offsetY or offsetX, draw a line that connects\n     * the control to the bounding box\n     * @type {Boolean}\n     * @default false\n     */\n    withConnection: false,\n\n    /**\n     * The control actionHandler, provide one to handle action ( control being moved )\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    actionHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * The control handler for mouse down, provide one to handle mouse down on control\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    mouseDownHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * The control mouseUpHandler, provide one to handle an effect on mouse up.\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    mouseUpHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * Returns control actionHandler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getActionHandler: function(/* eventData, fabricObject, control */) {\n      return this.actionHandler;\n    },\n\n    /**\n     * Returns control mouseDown handler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getMouseDownHandler: function(/* eventData, fabricObject, control */) {\n      return this.mouseDownHandler;\n    },\n\n    /**\n     * Returns control mouseUp handler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getMouseUpHandler: function(/* eventData, fabricObject, control */) {\n      return this.mouseUpHandler;\n    },\n\n    /**\n     * Returns control cursorStyle for css using cursorStyle. If you need a more elaborate\n     * function you can pass one in the constructor\n     * the cursorStyle property\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Control} control the current control ( likely this)\n     * @param {fabric.Object} object on which the control is displayed\n     * @return {String}\n     */\n    cursorStyleHandler: function(eventData, control /* fabricObject */) {\n      return control.cursorStyle;\n    },\n\n    /**\n     * Returns the action name. The basic implementation just return the actionName property.\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Control} control the current control ( likely this)\n     * @param {fabric.Object} object on which the control is displayed\n     * @return {String}\n     */\n    getActionName: function(eventData, control /* fabricObject */) {\n      return control.actionName;\n    },\n\n    /**\n     * Returns controls visibility\n     * @param {fabric.Object} object on which the control is displayed\n     * @param {String} controlKey key where the control is memorized on the\n     * @return {Boolean}\n     */\n    getVisibility: function(fabricObject, controlKey) {\n      var objectVisibility = fabricObject._controlsVisibility;\n      if (objectVisibility && typeof objectVisibility[controlKey] !== 'undefined') {\n        return objectVisibility[controlKey];\n      }\n      return this.visible;\n    },\n\n    /**\n     * Sets controls visibility\n     * @param {Boolean} visibility for the object\n     * @return {Void}\n     */\n    setVisibility: function(visibility /* name, fabricObject */) {\n      this.visible = visibility;\n    },\n\n\n    positionHandler: function(dim, finalMatrix /*, fabricObject, currentControl */) {\n      var point = fabric.util.transformPoint({\n        x: this.x * dim.x + this.offsetX,\n        y: this.y * dim.y + this.offsetY }, finalMatrix);\n      return point;\n    },\n\n    /**\n     * Returns the coords for this control based on object values.\n     * @param {Number} objectAngle angle from the fabric object holding the control\n     * @param {Number} objectCornerSize cornerSize from the fabric object holding the control (or touchCornerSize if\n     *   isTouch is true)\n     * @param {Number} centerX x coordinate where the control center should be\n     * @param {Number} centerY y coordinate where the control center should be\n     * @param {boolean} isTouch true if touch corner, false if normal corner\n     */\n    calcCornerCoords: function(objectAngle, objectCornerSize, centerX, centerY, isTouch) {\n      var cosHalfOffset,\n          sinHalfOffset,\n          cosHalfOffsetComp,\n          sinHalfOffsetComp,\n          xSize = (isTouch) ? this.touchSizeX : this.sizeX,\n          ySize = (isTouch) ? this.touchSizeY : this.sizeY;\n      if (xSize && ySize && xSize !== ySize) {\n        // handle rectangular corners\n        var controlTriangleAngle = Math.atan2(ySize, xSize);\n        var cornerHypotenuse = Math.sqrt(xSize * xSize + ySize * ySize) / 2;\n        var newTheta = controlTriangleAngle - fabric.util.degreesToRadians(objectAngle);\n        var newThetaComp = Math.PI / 2 - controlTriangleAngle - fabric.util.degreesToRadians(objectAngle);\n        cosHalfOffset = cornerHypotenuse * fabric.util.cos(newTheta);\n        sinHalfOffset = cornerHypotenuse * fabric.util.sin(newTheta);\n        // use complementary angle for two corners\n        cosHalfOffsetComp = cornerHypotenuse * fabric.util.cos(newThetaComp);\n        sinHalfOffsetComp = cornerHypotenuse * fabric.util.sin(newThetaComp);\n      }\n      else {\n        // handle square corners\n        // use default object corner size unless size is defined\n        var cornerSize = (xSize && ySize) ? xSize : objectCornerSize;\n        /* 0.7071067812 stands for sqrt(2)/2 */\n        cornerHypotenuse = cornerSize * 0.7071067812;\n        // complementary angles are equal since they're both 45 degrees\n        var newTheta = fabric.util.degreesToRadians(45 - objectAngle);\n        cosHalfOffset = cosHalfOffsetComp = cornerHypotenuse * fabric.util.cos(newTheta);\n        sinHalfOffset = sinHalfOffsetComp = cornerHypotenuse * fabric.util.sin(newTheta);\n      }\n\n      return {\n        tl: {\n          x: centerX - sinHalfOffsetComp,\n          y: centerY - cosHalfOffsetComp,\n        },\n        tr: {\n          x: centerX + cosHalfOffset,\n          y: centerY - sinHalfOffset,\n        },\n        bl: {\n          x: centerX - cosHalfOffset,\n          y: centerY + sinHalfOffset,\n        },\n        br: {\n          x: centerX + sinHalfOffsetComp,\n          y: centerY + cosHalfOffsetComp,\n        },\n      };\n    },\n\n    /**\n    * Render function for the control.\n    * When this function runs the context is unscaled. unrotate. Just retina scaled.\n    * all the functions will have to translate to the point left,top before starting Drawing\n    * if they want to draw a control where the position is detected.\n    * left and top are the result of the positionHandler function\n    * @param {RenderingContext2D} ctx the context where the control will be drawn\n    * @param {Number} left position of the canvas where we are about to render the control.\n    * @param {Number} top position of the canvas where we are about to render the control.\n    * @param {Object} styleOverride\n    * @param {fabric.Object} fabricObject the object where the control is about to be rendered\n    */\n    render: function(ctx, left, top, styleOverride, fabricObject) {\n      styleOverride = styleOverride || {};\n      switch (styleOverride.cornerStyle || fabricObject.cornerStyle) {\n        case 'circle':\n          fabric.controlsUtils.renderCircleControl.call(this, ctx, left, top, styleOverride, fabricObject);\n          break;\n        default:\n          fabric.controlsUtils.renderSquareControl.call(this, ctx, left, top, styleOverride, fabricObject);\n      }\n    },\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  /* _FROM_SVG_START_ */\n  function getColorStop(el, multiplier) {\n    var style = el.getAttribute('style'),\n        offset = el.getAttribute('offset') || 0,\n        color, colorAlpha, opacity, i;\n\n    // convert percents to absolute values\n    offset = parseFloat(offset) / (/%$/.test(offset) ? 100 : 1);\n    offset = offset < 0 ? 0 : offset > 1 ? 1 : offset;\n    if (style) {\n      var keyValuePairs = style.split(/\\s*;\\s*/);\n\n      if (keyValuePairs[keyValuePairs.length - 1] === '') {\n        keyValuePairs.pop();\n      }\n\n      for (i = keyValuePairs.length; i--; ) {\n\n        var split = keyValuePairs[i].split(/\\s*:\\s*/),\n            key = split[0].trim(),\n            value = split[1].trim();\n\n        if (key === 'stop-color') {\n          color = value;\n        }\n        else if (key === 'stop-opacity') {\n          opacity = value;\n        }\n      }\n    }\n\n    if (!color) {\n      color = el.getAttribute('stop-color') || 'rgb(0,0,0)';\n    }\n    if (!opacity) {\n      opacity = el.getAttribute('stop-opacity');\n    }\n\n    color = new fabric.Color(color);\n    colorAlpha = color.getAlpha();\n    opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);\n    opacity *= colorAlpha * multiplier;\n\n    return {\n      offset: offset,\n      color: color.toRgb(),\n      opacity: opacity\n    };\n  }\n\n  function getLinearCoords(el) {\n    return {\n      x1: el.getAttribute('x1') || 0,\n      y1: el.getAttribute('y1') || 0,\n      x2: el.getAttribute('x2') || '100%',\n      y2: el.getAttribute('y2') || 0\n    };\n  }\n\n  function getRadialCoords(el) {\n    return {\n      x1: el.getAttribute('fx') || el.getAttribute('cx') || '50%',\n      y1: el.getAttribute('fy') || el.getAttribute('cy') || '50%',\n      r1: 0,\n      x2: el.getAttribute('cx') || '50%',\n      y2: el.getAttribute('cy') || '50%',\n      r2: el.getAttribute('r') || '50%'\n    };\n  }\n  /* _FROM_SVG_END_ */\n\n  var clone = fabric.util.object.clone;\n\n  /**\n   * Gradient class\n   * @class fabric.Gradient\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#gradients}\n   * @see {@link fabric.Gradient#initialize} for constructor definition\n   */\n  fabric.Gradient = fabric.util.createClass(/** @lends fabric.Gradient.prototype */ {\n\n    /**\n     * Horizontal offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * A transform matrix to apply to the gradient before painting.\n     * Imported from svg gradients, is not applied with the current transform in the center.\n     * Before this transform is applied, the origin point is at the top left corner of the object\n     * plus the addition of offsetY and offsetX.\n     * @type Number[]\n     * @default null\n     */\n    gradientTransform: null,\n\n    /**\n     * coordinates units for coords.\n     * If `pixels`, the number of coords are in the same unit of width / height.\n     * If set as `percentage` the coords are still a number, but 1 means 100% of width\n     * for the X and 100% of the height for the y. It can be bigger than 1 and negative.\n     * allowed values pixels or percentage.\n     * @type String\n     * @default 'pixels'\n     */\n    gradientUnits: 'pixels',\n\n    /**\n     * Gradient type linear or radial\n     * @type String\n     * @default 'pixels'\n     */\n    type: 'linear',\n\n    /**\n     * Constructor\n     * @param {Object} options Options object with type, coords, gradientUnits and colorStops\n     * @param {Object} [options.type] gradient type linear or radial\n     * @param {Object} [options.gradientUnits] gradient units\n     * @param {Object} [options.offsetX] SVG import compatibility\n     * @param {Object} [options.offsetY] SVG import compatibility\n     * @param {Object[]} options.colorStops contains the colorstops.\n     * @param {Object} options.coords contains the coords of the gradient\n     * @param {Number} [options.coords.x1] X coordiante of the first point for linear or of the focal point for radial\n     * @param {Number} [options.coords.y1] Y coordiante of the first point for linear or of the focal point for radial\n     * @param {Number} [options.coords.x2] X coordiante of the second point for linear or of the center point for radial\n     * @param {Number} [options.coords.y2] Y coordiante of the second point for linear or of the center point for radial\n     * @param {Number} [options.coords.r1] only for radial gradient, radius of the inner circle\n     * @param {Number} [options.coords.r2] only for radial gradient, radius of the external circle\n     * @return {fabric.Gradient} thisArg\n     */\n    initialize: function(options) {\n      options || (options = { });\n      options.coords || (options.coords = { });\n\n      var coords, _this = this;\n\n      // sets everything, then coords and colorstops get sets again\n      Object.keys(options).forEach(function(option) {\n        _this[option] = options[option];\n      });\n\n      if (this.id) {\n        this.id += '_' + fabric.Object.__uid++;\n      }\n      else {\n        this.id = fabric.Object.__uid++;\n      }\n\n      coords = {\n        x1: options.coords.x1 || 0,\n        y1: options.coords.y1 || 0,\n        x2: options.coords.x2 || 0,\n        y2: options.coords.y2 || 0\n      };\n\n      if (this.type === 'radial') {\n        coords.r1 = options.coords.r1 || 0;\n        coords.r2 = options.coords.r2 || 0;\n      }\n\n      this.coords = coords;\n      this.colorStops = options.colorStops.slice();\n    },\n\n    /**\n     * Adds another colorStop\n     * @param {Object} colorStop Object with offset and color\n     * @return {fabric.Gradient} thisArg\n     */\n    addColorStop: function(colorStops) {\n      for (var position in colorStops) {\n        var color = new fabric.Color(colorStops[position]);\n        this.colorStops.push({\n          offset: parseFloat(position),\n          color: color.toRgb(),\n          opacity: color.getAlpha()\n        });\n      }\n      return this;\n    },\n\n    /**\n     * Returns object representation of a gradient\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object}\n     */\n    toObject: function(propertiesToInclude) {\n      var object = {\n        type: this.type,\n        coords: this.coords,\n        colorStops: this.colorStops,\n        offsetX: this.offsetX,\n        offsetY: this.offsetY,\n        gradientUnits: this.gradientUnits,\n        gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an gradient\n     * @param {Object} object Object to create a gradient for\n     * @return {String} SVG representation of an gradient (linear/radial)\n     */\n    toSVG: function(object, options) {\n      var coords = clone(this.coords, true), i, len, options = options || {},\n          markup, commonAttributes, colorStops = clone(this.colorStops, true),\n          needsSwap = coords.r1 > coords.r2,\n          transform = this.gradientTransform ? this.gradientTransform.concat() : fabric.iMatrix.concat(),\n          offsetX = -this.offsetX, offsetY = -this.offsetY,\n          withViewport = !!options.additionalTransform,\n          gradientUnits = this.gradientUnits === 'pixels' ? 'userSpaceOnUse' : 'objectBoundingBox';\n      // colorStops must be sorted ascending\n      colorStops.sort(function(a, b) {\n        return a.offset - b.offset;\n      });\n\n      if (gradientUnits === 'objectBoundingBox') {\n        offsetX /= object.width;\n        offsetY /= object.height;\n      }\n      else {\n        offsetX += object.width / 2;\n        offsetY += object.height / 2;\n      }\n      if (object.type === 'path' && this.gradientUnits !== 'percentage') {\n        offsetX -= object.pathOffset.x;\n        offsetY -= object.pathOffset.y;\n      }\n\n\n      transform[4] -= offsetX;\n      transform[5] -= offsetY;\n\n      commonAttributes = 'id=\"SVGID_' + this.id +\n                     '\" gradientUnits=\"' + gradientUnits + '\"';\n      commonAttributes += ' gradientTransform=\"' + (withViewport ?\n        options.additionalTransform + ' ' : '') + fabric.util.matrixToSVG(transform) + '\" ';\n\n      if (this.type === 'linear') {\n        markup = [\n          '<linearGradient ',\n          commonAttributes,\n          ' x1=\"', coords.x1,\n          '\" y1=\"', coords.y1,\n          '\" x2=\"', coords.x2,\n          '\" y2=\"', coords.y2,\n          '\">\\n'\n        ];\n      }\n      else if (this.type === 'radial') {\n        // svg radial gradient has just 1 radius. the biggest.\n        markup = [\n          '<radialGradient ',\n          commonAttributes,\n          ' cx=\"', needsSwap ? coords.x1 : coords.x2,\n          '\" cy=\"', needsSwap ? coords.y1 : coords.y2,\n          '\" r=\"', needsSwap ? coords.r1 : coords.r2,\n          '\" fx=\"', needsSwap ? coords.x2 : coords.x1,\n          '\" fy=\"', needsSwap ? coords.y2 : coords.y1,\n          '\">\\n'\n        ];\n      }\n\n      if (this.type === 'radial') {\n        if (needsSwap) {\n          // svg goes from internal to external radius. if radius are inverted, swap color stops.\n          colorStops = colorStops.concat();\n          colorStops.reverse();\n          for (i = 0, len = colorStops.length; i < len; i++) {\n            colorStops[i].offset = 1 - colorStops[i].offset;\n          }\n        }\n        var minRadius = Math.min(coords.r1, coords.r2);\n        if (minRadius > 0) {\n          // i have to shift all colorStops and add new one in 0.\n          var maxRadius = Math.max(coords.r1, coords.r2),\n              percentageShift = minRadius / maxRadius;\n          for (i = 0, len = colorStops.length; i < len; i++) {\n            colorStops[i].offset += percentageShift * (1 - colorStops[i].offset);\n          }\n        }\n      }\n\n      for (i = 0, len = colorStops.length; i < len; i++) {\n        var colorStop = colorStops[i];\n        markup.push(\n          '<stop ',\n          'offset=\"', (colorStop.offset * 100) + '%',\n          '\" style=\"stop-color:', colorStop.color,\n          (typeof colorStop.opacity !== 'undefined' ? ';stop-opacity: ' + colorStop.opacity : ';'),\n          '\"/>\\n'\n        );\n      }\n\n      markup.push((this.type === 'linear' ? '</linearGradient>\\n' : '</radialGradient>\\n'));\n\n      return markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns an instance of CanvasGradient\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {CanvasGradient}\n     */\n    toLive: function(ctx) {\n      var gradient, coords = fabric.util.object.clone(this.coords), i, len;\n\n      if (!this.type) {\n        return;\n      }\n\n      if (this.type === 'linear') {\n        gradient = ctx.createLinearGradient(\n          coords.x1, coords.y1, coords.x2, coords.y2);\n      }\n      else if (this.type === 'radial') {\n        gradient = ctx.createRadialGradient(\n          coords.x1, coords.y1, coords.r1, coords.x2, coords.y2, coords.r2);\n      }\n\n      for (i = 0, len = this.colorStops.length; i < len; i++) {\n        var color = this.colorStops[i].color,\n            opacity = this.colorStops[i].opacity,\n            offset = this.colorStops[i].offset;\n\n        if (typeof opacity !== 'undefined') {\n          color = new fabric.Color(color).setAlpha(opacity).toRgba();\n        }\n        gradient.addColorStop(offset, color);\n      }\n\n      return gradient;\n    }\n  });\n\n  fabric.util.object.extend(fabric.Gradient, {\n\n    /* _FROM_SVG_START_ */\n    /**\n     * Returns {@link fabric.Gradient} instance from an SVG element\n     * @static\n     * @memberOf fabric.Gradient\n     * @param {SVGGradientElement} el SVG gradient element\n     * @param {fabric.Object} instance\n     * @param {String} opacityAttr A fill-opacity or stroke-opacity attribute to multiply to each stop's opacity.\n     * @param {Object} svgOptions an object containing the size of the SVG in order to parse correctly gradients\n     * that uses gradientUnits as 'userSpaceOnUse' and percentages.\n     * @param {Object.number} viewBoxWidth width part of the viewBox attribute on svg\n     * @param {Object.number} viewBoxHeight height part of the viewBox attribute on svg\n     * @param {Object.number} width width part of the svg tag if viewBox is not specified\n     * @param {Object.number} height height part of the svg tag if viewBox is not specified\n     * @return {fabric.Gradient} Gradient instance\n     * @see http://www.w3.org/TR/SVG/pservers.html#LinearGradientElement\n     * @see http://www.w3.org/TR/SVG/pservers.html#RadialGradientElement\n     */\n    fromElement: function(el, instance, opacityAttr, svgOptions) {\n      /**\n       *  @example:\n       *\n       *  <linearGradient id=\"linearGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\"/>\n       *    <stop offset=\"100%\" stop-color=\"black\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <linearGradient id=\"linearGrad2\">\n       *    <stop offset=\"0\" style=\"stop-color:rgb(255,255,255)\"/>\n       *    <stop offset=\"1\" style=\"stop-color:rgb(0,0,0)\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *    <stop offset=\"50%\" stop-color=\"black\" stop-opacity=\"0.5\" />\n       *    <stop offset=\"100%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *  </radialGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad2\">\n       *    <stop offset=\"0\" stop-color=\"rgb(255,255,255)\" />\n       *    <stop offset=\"0.5\" stop-color=\"rgb(0,0,0)\" />\n       *    <stop offset=\"1\" stop-color=\"rgb(255,255,255)\" />\n       *  </radialGradient>\n       *\n       */\n\n      var multiplier = parseFloat(opacityAttr) / (/%$/.test(opacityAttr) ? 100 : 1);\n      multiplier = multiplier < 0 ? 0 : multiplier > 1 ? 1 : multiplier;\n      if (isNaN(multiplier)) {\n        multiplier = 1;\n      }\n\n      var colorStopEls = el.getElementsByTagName('stop'),\n          type,\n          gradientUnits = el.getAttribute('gradientUnits') === 'userSpaceOnUse' ?\n            'pixels' : 'percentage',\n          gradientTransform = el.getAttribute('gradientTransform') || '',\n          colorStops = [],\n          coords, i, offsetX = 0, offsetY = 0,\n          transformMatrix;\n      if (el.nodeName === 'linearGradient' || el.nodeName === 'LINEARGRADIENT') {\n        type = 'linear';\n        coords = getLinearCoords(el);\n      }\n      else {\n        type = 'radial';\n        coords = getRadialCoords(el);\n      }\n\n      for (i = colorStopEls.length; i--; ) {\n        colorStops.push(getColorStop(colorStopEls[i], multiplier));\n      }\n\n      transformMatrix = fabric.parseTransformAttribute(gradientTransform);\n\n      __convertPercentUnitsToValues(instance, coords, svgOptions, gradientUnits);\n\n      if (gradientUnits === 'pixels') {\n        offsetX = -instance.left;\n        offsetY = -instance.top;\n      }\n\n      var gradient = new fabric.Gradient({\n        id: el.getAttribute('id'),\n        type: type,\n        coords: coords,\n        colorStops: colorStops,\n        gradientUnits: gradientUnits,\n        gradientTransform: transformMatrix,\n        offsetX: offsetX,\n        offsetY: offsetY,\n      });\n\n      return gradient;\n    }\n    /* _FROM_SVG_END_ */\n  });\n\n  /**\n   * @private\n   */\n  function __convertPercentUnitsToValues(instance, options, svgOptions, gradientUnits) {\n    var propValue, finalValue;\n    Object.keys(options).forEach(function(prop) {\n      propValue = options[prop];\n      if (propValue === 'Infinity') {\n        finalValue = 1;\n      }\n      else if (propValue === '-Infinity') {\n        finalValue = 0;\n      }\n      else {\n        finalValue = parseFloat(options[prop], 10);\n        if (typeof propValue === 'string' && /^(\\d+\\.\\d+)%|(\\d+)%$/.test(propValue)) {\n          finalValue *= 0.01;\n          if (gradientUnits === 'pixels') {\n            // then we need to fix those percentages here in svg parsing\n            if (prop === 'x1' || prop === 'x2' || prop === 'r2') {\n              finalValue *= svgOptions.viewBoxWidth || svgOptions.width;\n            }\n            if (prop === 'y1' || prop === 'y2') {\n              finalValue *= svgOptions.viewBoxHeight || svgOptions.height;\n            }\n          }\n        }\n      }\n      options[prop] = finalValue;\n    });\n  }\n})();\n\n\n(function() {\n\n  'use strict';\n\n  var toFixed = fabric.util.toFixed;\n\n  /**\n   * Pattern class\n   * @class fabric.Pattern\n   * @see {@link http://fabricjs.com/patterns|Pattern demo}\n   * @see {@link http://fabricjs.com/dynamic-patterns|DynamicPattern demo}\n   * @see {@link fabric.Pattern#initialize} for constructor definition\n   */\n\n\n  fabric.Pattern = fabric.util.createClass(/** @lends fabric.Pattern.prototype */ {\n\n    /**\n     * Repeat property of a pattern (one of repeat, repeat-x, repeat-y or no-repeat)\n     * @type String\n     * @default\n     */\n    repeat: 'repeat',\n\n    /**\n     * Pattern horizontal offset from object's left/top corner\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Pattern vertical offset from object's left/top corner\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @type String\n     * @default\n     */\n    crossOrigin: '',\n\n    /**\n     * transform matrix to change the pattern, imported from svgs.\n     * @type Array\n     * @default\n     */\n    patternTransform: null,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @param {Function} [callback] function to invoke after callback init.\n     * @return {fabric.Pattern} thisArg\n     */\n    initialize: function(options, callback) {\n      options || (options = { });\n\n      this.id = fabric.Object.__uid++;\n      this.setOptions(options);\n      if (!options.source || (options.source && typeof options.source !== 'string')) {\n        callback && callback(this);\n        return;\n      }\n      else {\n        // img src string\n        var _this = this;\n        this.source = fabric.util.createImage();\n        fabric.util.loadImage(options.source, function(img, isError) {\n          _this.source = img;\n          callback && callback(_this, isError);\n        }, null, this.crossOrigin);\n      }\n    },\n\n    /**\n     * Returns object representation of a pattern\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of a pattern instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          source, object;\n\n      // <img> element\n      if (typeof this.source.src === 'string') {\n        source = this.source.src;\n      }\n      // <canvas> element\n      else if (typeof this.source === 'object' && this.source.toDataURL) {\n        source = this.source.toDataURL();\n      }\n\n      object = {\n        type: 'pattern',\n        source: source,\n        repeat: this.repeat,\n        crossOrigin: this.crossOrigin,\n        offsetX: toFixed(this.offsetX, NUM_FRACTION_DIGITS),\n        offsetY: toFixed(this.offsetY, NUM_FRACTION_DIGITS),\n        patternTransform: this.patternTransform ? this.patternTransform.concat() : null\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a pattern\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a pattern\n     */\n    toSVG: function(object) {\n      var patternSource = typeof this.source === 'function' ? this.source() : this.source,\n          patternWidth = patternSource.width / object.width,\n          patternHeight = patternSource.height / object.height,\n          patternOffsetX = this.offsetX / object.width,\n          patternOffsetY = this.offsetY / object.height,\n          patternImgSrc = '';\n      if (this.repeat === 'repeat-x' || this.repeat === 'no-repeat') {\n        patternHeight = 1;\n        if (patternOffsetY) {\n          patternHeight += Math.abs(patternOffsetY);\n        }\n      }\n      if (this.repeat === 'repeat-y' || this.repeat === 'no-repeat') {\n        patternWidth = 1;\n        if (patternOffsetX) {\n          patternWidth += Math.abs(patternOffsetX);\n        }\n\n      }\n      if (patternSource.src) {\n        patternImgSrc = patternSource.src;\n      }\n      else if (patternSource.toDataURL) {\n        patternImgSrc = patternSource.toDataURL();\n      }\n\n      return '<pattern id=\"SVGID_' + this.id +\n                    '\" x=\"' + patternOffsetX +\n                    '\" y=\"' + patternOffsetY +\n                    '\" width=\"' + patternWidth +\n                    '\" height=\"' + patternHeight + '\">\\n' +\n               '<image x=\"0\" y=\"0\"' +\n                      ' width=\"' + patternSource.width +\n                      '\" height=\"' + patternSource.height +\n                      '\" xlink:href=\"' + patternImgSrc +\n               '\"></image>\\n' +\n             '</pattern>\\n';\n    },\n    /* _TO_SVG_END_ */\n\n    setOptions: function(options) {\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n    },\n\n    /**\n     * Returns an instance of CanvasPattern\n     * @param {CanvasRenderingContext2D} ctx Context to create pattern\n     * @return {CanvasPattern}\n     */\n    toLive: function(ctx) {\n      var source = this.source;\n      // if the image failed to load, return, and allow rest to continue loading\n      if (!source) {\n        return '';\n      }\n\n      // if an image\n      if (typeof source.src !== 'undefined') {\n        if (!source.complete) {\n          return '';\n        }\n        if (source.naturalWidth === 0 || source.naturalHeight === 0) {\n          return '';\n        }\n      }\n      return ctx.createPattern(source, this.repeat);\n    }\n  });\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Shadow) {\n    fabric.warn('fabric.Shadow is already defined.');\n    return;\n  }\n\n  /**\n   * Shadow class\n   * @class fabric.Shadow\n   * @see {@link http://fabricjs.com/shadows|Shadow demo}\n   * @see {@link fabric.Shadow#initialize} for constructor definition\n   */\n  fabric.Shadow = fabric.util.createClass(/** @lends fabric.Shadow.prototype */ {\n\n    /**\n     * Shadow color\n     * @type String\n     * @default\n     */\n    color: 'rgb(0,0,0)',\n\n    /**\n     * Shadow blur\n     * @type Number\n     */\n    blur: 0,\n\n    /**\n     * Shadow horizontal offset\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Shadow vertical offset\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * Whether the shadow should affect stroke operations\n     * @type Boolean\n     * @default\n     */\n    affectStroke: false,\n\n    /**\n     * Indicates whether toObject should include default values\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * When `false`, the shadow will scale with the object.\n     * When `true`, the shadow's offsetX, offsetY, and blur will not be affected by the object's scale.\n     * default to false\n     * @type Boolean\n     * @default\n     */\n    nonScaling: false,\n\n    /**\n     * Constructor\n     * @param {Object|String} [options] Options object with any of color, blur, offsetX, offsetY properties or string (e.g. \"rgba(0,0,0,0.2) 2px 2px 10px\")\n     * @return {fabric.Shadow} thisArg\n     */\n    initialize: function(options) {\n\n      if (typeof options === 'string') {\n        options = this._parseShadow(options);\n      }\n\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n\n      this.id = fabric.Object.__uid++;\n    },\n\n    /**\n     * @private\n     * @param {String} shadow Shadow value to parse\n     * @return {Object} Shadow object with color, offsetX, offsetY and blur\n     */\n    _parseShadow: function(shadow) {\n      var shadowStr = shadow.trim(),\n          offsetsAndBlur = fabric.Shadow.reOffsetsAndBlur.exec(shadowStr) || [],\n          color = shadowStr.replace(fabric.Shadow.reOffsetsAndBlur, '') || 'rgb(0,0,0)';\n\n      return {\n        color: color.trim(),\n        offsetX: parseInt(offsetsAndBlur[1], 10) || 0,\n        offsetY: parseInt(offsetsAndBlur[2], 10) || 0,\n        blur: parseInt(offsetsAndBlur[3], 10) || 0\n      };\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @see http://www.w3.org/TR/css-text-decor-3/#text-shadow\n     * @return {String} Returns CSS3 text-shadow declaration\n     */\n    toString: function() {\n      return [this.offsetX, this.offsetY, this.blur, this.color].join('px ');\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a shadow\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a shadow\n     */\n    toSVG: function(object) {\n      var fBoxX = 40, fBoxY = 40, NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          offset = fabric.util.rotateVector(\n            { x: this.offsetX, y: this.offsetY },\n            fabric.util.degreesToRadians(-object.angle)),\n          BLUR_BOX = 20, color = new fabric.Color(this.color);\n\n      if (object.width && object.height) {\n        //http://www.w3.org/TR/SVG/filters.html#FilterEffectsRegion\n        // we add some extra space to filter box to contain the blur ( 20 )\n        fBoxX = toFixed((Math.abs(offset.x) + this.blur) / object.width, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n        fBoxY = toFixed((Math.abs(offset.y) + this.blur) / object.height, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n      }\n      if (object.flipX) {\n        offset.x *= -1;\n      }\n      if (object.flipY) {\n        offset.y *= -1;\n      }\n\n      return (\n        '<filter id=\"SVGID_' + this.id + '\" y=\"-' + fBoxY + '%\" height=\"' + (100 + 2 * fBoxY) + '%\" ' +\n          'x=\"-' + fBoxX + '%\" width=\"' + (100 + 2 * fBoxX) + '%\" ' + '>\\n' +\n          '\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"' +\n            toFixed(this.blur ? this.blur / 2 : 0, NUM_FRACTION_DIGITS) + '\"></feGaussianBlur>\\n' +\n          '\\t<feOffset dx=\"' + toFixed(offset.x, NUM_FRACTION_DIGITS) +\n          '\" dy=\"' + toFixed(offset.y, NUM_FRACTION_DIGITS) + '\" result=\"oBlur\" ></feOffset>\\n' +\n          '\\t<feFlood flood-color=\"' + color.toRgb() + '\" flood-opacity=\"' + color.getAlpha() + '\"/>\\n' +\n          '\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n' +\n          '\\t<feMerge>\\n' +\n            '\\t\\t<feMergeNode></feMergeNode>\\n' +\n            '\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n' +\n          '\\t</feMerge>\\n' +\n        '</filter>\\n');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns object representation of a shadow\n     * @return {Object} Object representation of a shadow instance\n     */\n    toObject: function() {\n      if (this.includeDefaultValues) {\n        return {\n          color: this.color,\n          blur: this.blur,\n          offsetX: this.offsetX,\n          offsetY: this.offsetY,\n          affectStroke: this.affectStroke,\n          nonScaling: this.nonScaling\n        };\n      }\n      var obj = { }, proto = fabric.Shadow.prototype;\n\n      ['color', 'blur', 'offsetX', 'offsetY', 'affectStroke', 'nonScaling'].forEach(function(prop) {\n        if (this[prop] !== proto[prop]) {\n          obj[prop] = this[prop];\n        }\n      }, this);\n\n      return obj;\n    }\n  });\n\n  /**\n   * Regex matching shadow offsetX, offsetY and blur (ex: \"2px 2px 10px rgba(0,0,0,0.2)\", \"rgb(0,255,0) 2px 2px\")\n   * @static\n   * @field\n   * @memberOf fabric.Shadow\n   */\n  // eslint-disable-next-line max-len\n  fabric.Shadow.reOffsetsAndBlur = /(?:\\s|^)(-?\\d+(?:px)?(?:\\s?|$))?(-?\\d+(?:px)?(?:\\s?|$))?(\\d+(?:px)?)?(?:\\s?|$)(?:$|\\s)/;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function () {\n\n  'use strict';\n\n  if (fabric.StaticCanvas) {\n    fabric.warn('fabric.StaticCanvas is already defined.');\n    return;\n  }\n\n  // aliases for faster resolution\n  var extend = fabric.util.object.extend,\n      getElementOffset = fabric.util.getElementOffset,\n      removeFromArray = fabric.util.removeFromArray,\n      toFixed = fabric.util.toFixed,\n      transformPoint = fabric.util.transformPoint,\n      invertTransform = fabric.util.invertTransform,\n      getNodeCanvas = fabric.util.getNodeCanvas,\n      createCanvasElement = fabric.util.createCanvasElement,\n\n      CANVAS_INIT_ERROR = new Error('Could not initialize `canvas` element');\n\n  /**\n   * Static canvas class\n   * @class fabric.StaticCanvas\n   * @mixes fabric.Collection\n   * @mixes fabric.Observable\n   * @see {@link http://fabricjs.com/static_canvas|StaticCanvas demo}\n   * @see {@link fabric.StaticCanvas#initialize} for constructor definition\n   * @fires before:render\n   * @fires after:render\n   * @fires canvas:cleared\n   * @fires object:added\n   * @fires object:removed\n   */\n  fabric.StaticCanvas = fabric.util.createClass(fabric.CommonMethods, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n      this.renderAndResetBound = this.renderAndReset.bind(this);\n      this.requestRenderAllBound = this.requestRenderAll.bind(this);\n      this._initStatic(el, options);\n    },\n\n    /**\n     * Background color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setBackgroundColor}.\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    backgroundColor: '',\n\n    /**\n     * Background image of canvas instance.\n     * since 2.4.0 image caching is active, please when putting an image as background, add to the\n     * canvas property a reference to the canvas it is on. Otherwise the image cannot detect the zoom\n     * vale. As an alternative you can disable image objectCaching\n     * @type fabric.Image\n     * @default\n     */\n    backgroundImage: null,\n\n    /**\n     * Overlay color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setOverlayColor}\n     * @since 1.3.9\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    overlayColor: '',\n\n    /**\n     * Overlay image of canvas instance.\n     * since 2.4.0 image caching is active, please when putting an image as overlay, add to the\n     * canvas property a reference to the canvas it is on. Otherwise the image cannot detect the zoom\n     * vale. As an alternative you can disable image objectCaching\n     * @type fabric.Image\n     * @default\n     */\n    overlayImage: null,\n\n    /**\n     * Indicates whether toObject/toDatalessObject should include default values\n     * if set to false, takes precedence over the object value.\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * Indicates whether objects' state should be saved\n     * @type Boolean\n     * @default\n     */\n    stateful: false,\n\n    /**\n     * Indicates whether {@link fabric.Collection.add}, {@link fabric.Collection.insertAt} and {@link fabric.Collection.remove},\n     * {@link fabric.StaticCanvas.moveTo}, {@link fabric.StaticCanvas.clear} and many more, should also re-render canvas.\n     * Disabling this option will not give a performance boost when adding/removing a lot of objects to/from canvas at once\n     * since the renders are quequed and executed one per frame.\n     * Disabling is suggested anyway and managing the renders of the app manually is not a big effort ( canvas.requestRenderAll() )\n     * Left default to true to do not break documentation and old app, fiddles.\n     * @type Boolean\n     * @default\n     */\n    renderOnAddRemove: true,\n\n    /**\n     * Indicates whether object controls (borders/controls) are rendered above overlay image\n     * @type Boolean\n     * @default\n     */\n    controlsAboveOverlay: false,\n\n    /**\n     * Indicates whether the browser can be scrolled when using a touchscreen and dragging on the canvas\n     * @type Boolean\n     * @default\n     */\n    allowTouchScrolling: false,\n\n    /**\n     * Indicates whether this canvas will use image smoothing, this is on by default in browsers\n     * @type Boolean\n     * @default\n     */\n    imageSmoothingEnabled: true,\n\n    /**\n     * The transformation (in the format of Canvas transform) which focuses the viewport\n     * @type Array\n     * @default\n     */\n    viewportTransform: fabric.iMatrix.concat(),\n\n    /**\n     * if set to false background image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    backgroundVpt: true,\n\n    /**\n     * if set to false overlya image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    overlayVpt: true,\n\n    /**\n     * When true, canvas is scaled by devicePixelRatio for better rendering on retina screens\n     * @type Boolean\n     * @default\n     */\n    enableRetinaScaling: true,\n\n    /**\n     * Describe canvas element extension over design\n     * properties are tl,tr,bl,br.\n     * if canvas is not zoomed/panned those points are the four corner of canvas\n     * if canvas is viewportTransformed you those points indicate the extension\n     * of canvas element in plain untrasformed coordinates\n     * The coordinates get updated with @method calcViewportBoundaries.\n     * @memberOf fabric.StaticCanvas.prototype\n     */\n    vptCoords: { },\n\n    /**\n     * Based on vptCoords and object.aCoords, skip rendering of objects that\n     * are not included in current viewport.\n     * May greatly help in applications with crowded canvas and use of zoom/pan\n     * If One of the corner of the bounding box of the object is on the canvas\n     * the objects get rendered.\n     * @memberOf fabric.StaticCanvas.prototype\n     * @type Boolean\n     * @default\n     */\n    skipOffscreen: true,\n\n    /**\n     * a fabricObject that, without stroke define a clipping area with their shape. filled in black\n     * the clipPath object gets used when the canvas has rendered, and the context is placed in the\n     * top left corner of the canvas.\n     * clipPath will clip away controls, if you do not want this to happen use controlsAboveOverlay = true\n     * @type fabric.Object\n     */\n    clipPath: undefined,\n\n    /**\n     * @private\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     */\n    _initStatic: function(el, options) {\n      var cb = this.requestRenderAllBound;\n      this._objects = [];\n      this._createLowerCanvas(el);\n      this._initOptions(options);\n      // only initialize retina scaling once\n      if (!this.interactive) {\n        this._initRetinaScaling();\n      }\n\n      if (options.overlayImage) {\n        this.setOverlayImage(options.overlayImage, cb);\n      }\n      if (options.backgroundImage) {\n        this.setBackgroundImage(options.backgroundImage, cb);\n      }\n      if (options.backgroundColor) {\n        this.setBackgroundColor(options.backgroundColor, cb);\n      }\n      if (options.overlayColor) {\n        this.setOverlayColor(options.overlayColor, cb);\n      }\n      this.calcOffset();\n    },\n\n    /**\n     * @private\n     */\n    _isRetinaScaling: function() {\n      return (fabric.devicePixelRatio !== 1 && this.enableRetinaScaling);\n    },\n\n    /**\n     * @private\n     * @return {Number} retinaScaling if applied, otherwise 1;\n     */\n    getRetinaScaling: function() {\n      return this._isRetinaScaling() ? fabric.devicePixelRatio : 1;\n    },\n\n    /**\n     * @private\n     */\n    _initRetinaScaling: function() {\n      if (!this._isRetinaScaling()) {\n        return;\n      }\n      var scaleRatio = fabric.devicePixelRatio;\n      this.__initRetinaScaling(scaleRatio, this.lowerCanvasEl, this.contextContainer);\n      if (this.upperCanvasEl) {\n        this.__initRetinaScaling(scaleRatio, this.upperCanvasEl, this.contextTop);\n      }\n    },\n\n    __initRetinaScaling: function(scaleRatio, canvas, context) {\n      canvas.setAttribute('width', this.width * scaleRatio);\n      canvas.setAttribute('height', this.height * scaleRatio);\n      context.scale(scaleRatio, scaleRatio);\n    },\n\n\n    /**\n     * Calculates canvas element offset relative to the document\n     * This method is also attached as \"resize\" event handler of window\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    calcOffset: function () {\n      this._offset = getElementOffset(this.lowerCanvasEl);\n      return this;\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayImage|overlay image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set overlay to\n     * @param {Function} callback callback to invoke when image is loaded and set as an overlay\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|overlay image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/MnzHT/|jsFiddle demo}\n     * @example <caption>Normal overlayImage with left/top = 0</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage with different properties</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched overlayImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/jail_cell_bars.png', function(img, isError) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setOverlayImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched overlayImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage loaded from cross-origin</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    setOverlayImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('overlayImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundImage|background image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set background to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|background image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/djnr8o7a/28/|jsFiddle demo}\n     * @example <caption>Normal backgroundImage with left/top = 0</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage with different properties</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched backgroundImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/honey_im_subtle.png', function(img, isError) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched backgroundImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage loaded from cross-origin</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    // TODO: fix stretched examples\n    setBackgroundImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('backgroundImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayColor|foreground color} for this canvas\n     * @param {(String|fabric.Pattern)} overlayColor Color or pattern to set foreground color to\n     * @param {Function} callback Callback to invoke when foreground color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/pB55h/|jsFiddle demo}\n     * @example <caption>Normal overlayColor - color value</caption>\n     * canvas.setOverlayColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor with repeat and offset</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setOverlayColor: function(overlayColor, callback) {\n      return this.__setBgOverlayColor('overlayColor', overlayColor, callback);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundColor|background color} for this canvas\n     * @param {(String|fabric.Pattern)} backgroundColor Color or pattern to set background color to\n     * @param {Function} callback Callback to invoke when background color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/hXzvk/|jsFiddle demo}\n     * @example <caption>Normal backgroundColor - color value</caption>\n     * canvas.setBackgroundColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor with repeat and offset</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setBackgroundColor: function(backgroundColor, callback) {\n      return this.__setBgOverlayColor('backgroundColor', backgroundColor, callback);\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundImage|backgroundImage}\n     * or {@link fabric.StaticCanvas#overlayImage|overlayImage})\n     * @param {(fabric.Image|String|null)} image fabric.Image instance, URL of an image or null to set background or overlay to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background or overlay. The first argument is the created image, the second argument is a flag indicating whether an error occurred or not.\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|image}.\n     */\n    __setBgOverlayImage: function(property, image, callback, options) {\n      if (typeof image === 'string') {\n        fabric.util.loadImage(image, function(img, isError) {\n          if (img) {\n            var instance = new fabric.Image(img, options);\n            this[property] = instance;\n            instance.canvas = this;\n          }\n          callback && callback(img, isError);\n        }, this, options && options.crossOrigin);\n      }\n      else {\n        options && image.setOptions(options);\n        this[property] = image;\n        image && (image.canvas = this);\n        callback && callback(image, false);\n      }\n\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundColor|backgroundColor}\n     * or {@link fabric.StaticCanvas#overlayColor|overlayColor})\n     * @param {(Object|String|null)} color Object with pattern information, color value or null\n     * @param {Function} [callback] Callback is invoked when color is set\n     */\n    __setBgOverlayColor: function(property, color, callback) {\n      this[property] = color;\n      this._initGradient(color, property);\n      this._initPattern(color, property, callback);\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _createCanvasElement: function() {\n      var element = createCanvasElement();\n      if (!element) {\n        throw CANVAS_INIT_ERROR;\n      }\n      if (!element.style) {\n        element.style = { };\n      }\n      if (typeof element.getContext === 'undefined') {\n        throw CANVAS_INIT_ERROR;\n      }\n      return element;\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initOptions: function (options) {\n      var lowerCanvasEl = this.lowerCanvasEl;\n      this._setOptions(options);\n\n      this.width = this.width || parseInt(lowerCanvasEl.width, 10) || 0;\n      this.height = this.height || parseInt(lowerCanvasEl.height, 10) || 0;\n\n      if (!this.lowerCanvasEl.style) {\n        return;\n      }\n\n      lowerCanvasEl.width = this.width;\n      lowerCanvasEl.height = this.height;\n\n      lowerCanvasEl.style.width = this.width + 'px';\n      lowerCanvasEl.style.height = this.height + 'px';\n\n      this.viewportTransform = this.viewportTransform.slice();\n    },\n\n    /**\n     * Creates a bottom canvas\n     * @private\n     * @param {HTMLElement} [canvasEl]\n     */\n    _createLowerCanvas: function (canvasEl) {\n      // canvasEl === 'HTMLCanvasElement' does not work on jsdom/node\n      if (canvasEl && canvasEl.getContext) {\n        this.lowerCanvasEl = canvasEl;\n      }\n      else {\n        this.lowerCanvasEl = fabric.util.getById(canvasEl) || this._createCanvasElement();\n      }\n\n      fabric.util.addClass(this.lowerCanvasEl, 'lower-canvas');\n\n      if (this.interactive) {\n        this._applyCanvasStyle(this.lowerCanvasEl);\n      }\n\n      this.contextContainer = this.lowerCanvasEl.getContext('2d');\n    },\n\n    /**\n     * Returns canvas width (in px)\n     * @return {Number}\n     */\n    getWidth: function () {\n      return this.width;\n    },\n\n    /**\n     * Returns canvas height (in px)\n     * @return {Number}\n     */\n    getHeight: function () {\n      return this.height;\n    },\n\n    /**\n     * Sets width of this canvas instance\n     * @param {Number|String} value                         Value to set width to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setWidth: function (value, options) {\n      return this.setDimensions({ width: value }, options);\n    },\n\n    /**\n     * Sets height of this canvas instance\n     * @param {Number|String} value                         Value to set height to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setHeight: function (value, options) {\n      return this.setDimensions({ height: value }, options);\n    },\n\n    /**\n     * Sets dimensions (width, height) of this canvas instance. when options.cssOnly flag active you should also supply the unit of measure (px/%/em)\n     * @param {Object}        dimensions                    Object with width/height properties\n     * @param {Number|String} [dimensions.width]            Width of canvas element\n     * @param {Number|String} [dimensions.height]           Height of canvas element\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setDimensions: function (dimensions, options) {\n      var cssValue;\n\n      options = options || {};\n\n      for (var prop in dimensions) {\n        cssValue = dimensions[prop];\n\n        if (!options.cssOnly) {\n          this._setBackstoreDimension(prop, dimensions[prop]);\n          cssValue += 'px';\n          this.hasLostContext = true;\n        }\n\n        if (!options.backstoreOnly) {\n          this._setCssDimension(prop, cssValue);\n        }\n      }\n      if (this._isCurrentlyDrawing) {\n        this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles();\n      }\n      this._initRetinaScaling();\n      this.calcOffset();\n\n      if (!options.cssOnly) {\n        this.requestRenderAll();\n      }\n\n      return this;\n    },\n\n    /**\n     * Helper for setting width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {Number} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setBackstoreDimension: function (prop, value) {\n      this.lowerCanvasEl[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl[prop] = value;\n      }\n\n      if (this.cacheCanvasEl) {\n        this.cacheCanvasEl[prop] = value;\n      }\n\n      this[prop] = value;\n\n      return this;\n    },\n\n    /**\n     * Helper for setting css width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {String} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setCssDimension: function (prop, value) {\n      this.lowerCanvasEl.style[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl.style[prop] = value;\n      }\n\n      if (this.wrapperEl) {\n        this.wrapperEl.style[prop] = value;\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns canvas zoom level\n     * @return {Number}\n     */\n    getZoom: function () {\n      return this.viewportTransform[0];\n    },\n\n    /**\n     * Sets viewport transform of this canvas instance\n     * @param {Array} vpt the transform in the form of context.transform\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setViewportTransform: function (vpt) {\n      var activeObject = this._activeObject,\n          backgroundObject = this.backgroundImage,\n          overlayObject = this.overlayImage,\n          object, i, len;\n      this.viewportTransform = vpt;\n      for (i = 0, len = this._objects.length; i < len; i++) {\n        object = this._objects[i];\n        object.group || object.setCoords(true);\n      }\n      if (activeObject) {\n        activeObject.setCoords();\n      }\n      if (backgroundObject) {\n        backgroundObject.setCoords(true);\n      }\n      if (overlayObject) {\n        overlayObject.setCoords(true);\n      }\n      this.calcViewportBoundaries();\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Sets zoom level of this canvas instance, the zoom centered around point\n     * meaning that following zoom to point with the same point will have the visual\n     * effect of the zoom originating from that point. The point won't move.\n     * It has nothing to do with canvas center or visual center of the viewport.\n     * @param {fabric.Point} point to zoom with respect to\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    zoomToPoint: function (point, value) {\n      // TODO: just change the scale, preserve other transformations\n      var before = point, vpt = this.viewportTransform.slice(0);\n      point = transformPoint(point, invertTransform(this.viewportTransform));\n      vpt[0] = value;\n      vpt[3] = value;\n      var after = transformPoint(point, vpt);\n      vpt[4] += before.x - after.x;\n      vpt[5] += before.y - after.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Sets zoom level of this canvas instance\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setZoom: function (value) {\n      this.zoomToPoint(new fabric.Point(0, 0), value);\n      return this;\n    },\n\n    /**\n     * Pan viewport so as to place point at top left corner of canvas\n     * @param {fabric.Point} point to move to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    absolutePan: function (point) {\n      var vpt = this.viewportTransform.slice(0);\n      vpt[4] = -point.x;\n      vpt[5] = -point.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Pans viewpoint relatively\n     * @param {fabric.Point} point (position vector) to move by\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    relativePan: function (point) {\n      return this.absolutePan(new fabric.Point(\n        -point.x - this.viewportTransform[4],\n        -point.y - this.viewportTransform[5]\n      ));\n    },\n\n    /**\n     * Returns &lt;canvas> element corresponding to this instance\n     * @return {HTMLCanvasElement}\n     */\n    getElement: function () {\n      return this.lowerCanvasEl;\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was added\n     */\n    _onObjectAdded: function(obj) {\n      this.stateful && obj.setupState();\n      obj._set('canvas', this);\n      obj.setCoords();\n      this.fire('object:added', { target: obj });\n      obj.fire('added');\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      this.fire('object:removed', { target: obj });\n      obj.fire('removed');\n      delete obj.canvas;\n    },\n\n    /**\n     * Clears specified context of canvas element\n     * @param {CanvasRenderingContext2D} ctx Context to clear\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clearContext: function(ctx) {\n      ctx.clearRect(0, 0, this.width, this.height);\n      return this;\n    },\n\n    /**\n     * Returns context of canvas where objects are drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getContext: function () {\n      return this.contextContainer;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      this._objects.length = 0;\n      this.backgroundImage = null;\n      this.overlayImage = null;\n      this.backgroundColor = '';\n      this.overlayColor = '';\n      if (this._hasITextHandlers) {\n        this.off('mouse:up', this._mouseUpITextHandler);\n        this._iTextInstances = null;\n        this._hasITextHandlers = false;\n      }\n      this.clearContext(this.contextContainer);\n      this.fire('canvas:cleared');\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Renders the canvas\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._objects);\n      return this;\n    },\n\n    /**\n     * Function created to be instance bound at initialization\n     * used in requestAnimationFrame rendering\n     * Let the fabricJS call it. If you call it manually you could have more\n     * animationFrame stacking on to of each other\n     * for an imperative rendering, use canvas.renderAll\n     * @private\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAndReset: function() {\n      this.isRendering = 0;\n      this.renderAll();\n    },\n\n    /**\n     * Append a renderAll request to next animation frame.\n     * unless one is already in progress, in that case nothing is done\n     * a boolean flag will avoid appending more.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    requestRenderAll: function () {\n      if (!this.isRendering) {\n        this.isRendering = fabric.util.requestAnimFrame(this.renderAndResetBound);\n      }\n      return this;\n    },\n\n    /**\n     * Calculate the position of the 4 corner of canvas with current viewportTransform.\n     * helps to determinate when an object is in the current rendering viewport using\n     * object absolute coordinates ( aCoords )\n     * @return {Object} points.tl\n     * @chainable\n     */\n    calcViewportBoundaries: function() {\n      var points = { }, width = this.width, height = this.height,\n          iVpt = invertTransform(this.viewportTransform);\n      points.tl = transformPoint({ x: 0, y: 0 }, iVpt);\n      points.br = transformPoint({ x: width, y: height }, iVpt);\n      points.tr = new fabric.Point(points.br.x, points.tl.y);\n      points.bl = new fabric.Point(points.tl.x, points.br.y);\n      this.vptCoords = points;\n      return points;\n    },\n\n    cancelRequestedRender: function() {\n      if (this.isRendering) {\n        fabric.util.cancelAnimFrame(this.isRendering);\n        this.isRendering = 0;\n      }\n    },\n\n    /**\n     * Renders background, objects, overlay and controls.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {Array} objects to render\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderCanvas: function(ctx, objects) {\n      var v = this.viewportTransform, path = this.clipPath;\n      this.cancelRequestedRender();\n      this.calcViewportBoundaries();\n      this.clearContext(ctx);\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothingEnabled);\n      this.fire('before:render', { ctx: ctx, });\n      this._renderBackground(ctx);\n\n      ctx.save();\n      //apply viewport transform once for all rendering process\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      this._renderObjects(ctx, objects);\n      ctx.restore();\n      if (!this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      if (path) {\n        path.canvas = this;\n        // needed to setup a couple of variables\n        path.shouldCache();\n        path._transformDone = true;\n        path.renderCache({ forClipping: true });\n        this.drawClipPathOnCanvas(ctx);\n      }\n      this._renderOverlay(ctx);\n      if (this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      this.fire('after:render', { ctx: ctx, });\n    },\n\n    /**\n     * Paint the cached clipPath on the lowerCanvasEl\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawClipPathOnCanvas: function(ctx) {\n      var v = this.viewportTransform, path = this.clipPath;\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      // DEBUG: uncomment this line, comment the following\n      // ctx.globalAlpha = 0.4;\n      ctx.globalCompositeOperation = 'destination-in';\n      path.transform(ctx);\n      ctx.scale(1 / path.zoomX, 1 / path.zoomY);\n      ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} objects to render\n     */\n    _renderObjects: function(ctx, objects) {\n      var i, len;\n      for (i = 0, len = objects.length; i < len; ++i) {\n        objects[i] && objects[i].render(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {string} property 'background' or 'overlay'\n     */\n    _renderBackgroundOrOverlay: function(ctx, property) {\n      var fill = this[property + 'Color'], object = this[property + 'Image'],\n          v = this.viewportTransform, needsVpt = this[property + 'Vpt'];\n      if (!fill && !object) {\n        return;\n      }\n      if (fill) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.moveTo(0, 0);\n        ctx.lineTo(this.width, 0);\n        ctx.lineTo(this.width, this.height);\n        ctx.lineTo(0, this.height);\n        ctx.closePath();\n        ctx.fillStyle = fill.toLive\n          ? fill.toLive(ctx, this)\n          : fill;\n        if (needsVpt) {\n          ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        }\n        ctx.transform(1, 0, 0, 1, fill.offsetX || 0, fill.offsetY || 0);\n        var m = fill.gradientTransform || fill.patternTransform;\n        m && ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        ctx.fill();\n        ctx.restore();\n      }\n      if (object) {\n        ctx.save();\n        if (needsVpt) {\n          ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        }\n        object.render(ctx);\n        ctx.restore();\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'background');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderOverlay: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'overlay');\n    },\n\n    /**\n     * Returns coordinates of a center of canvas.\n     * Returned value is an object with top and left properties\n     * @return {Object} object with \"top\" and \"left\" number values\n     */\n    getCenter: function () {\n      return {\n        top: this.height / 2,\n        left: this.width / 2\n      };\n    },\n\n    /**\n     * Centers object horizontally in the canvas\n     * @param {fabric.Object} object Object to center horizontally\n     * @return {fabric.Canvas} thisArg\n     */\n    centerObjectH: function (object) {\n      return this._centerObject(object, new fabric.Point(this.getCenter().left, object.getCenterPoint().y));\n    },\n\n    /**\n     * Centers object vertically in the canvas\n     * @param {fabric.Object} object Object to center vertically\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObjectV: function (object) {\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, this.getCenter().top));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the canvas\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObject: function(object) {\n      var center = this.getCenter();\n\n      return this._centerObject(object, new fabric.Point(center.left, center.top));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the viewport\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObject: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, vpCenter);\n    },\n\n    /**\n     * Centers object horizontally in the viewport, object.top is unchanged\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectH: function(object) {\n      var vpCenter = this.getVpCenter();\n      this._centerObject(object, new fabric.Point(vpCenter.x, object.getCenterPoint().y));\n      return this;\n    },\n\n    /**\n     * Centers object Vertically in the viewport, object.top is unchanged\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectV: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, vpCenter.y));\n    },\n\n    /**\n     * Calculate the point in canvas that correspond to the center of actual viewport.\n     * @return {fabric.Point} vpCenter, viewport center\n     * @chainable\n     */\n    getVpCenter: function() {\n      var center = this.getCenter(),\n          iVpt = invertTransform(this.viewportTransform);\n      return transformPoint({ x: center.left, y: center.top }, iVpt);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} object Object to center\n     * @param {fabric.Point} center Center point\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    _centerObject: function(object, center) {\n      object.setPositionByOrigin(center, 'center', 'center');\n      object.setCoords();\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Returns dataless JSON representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {String} json string\n     */\n    toDatalessJSON: function (propertiesToInclude) {\n      return this.toDatalessObject(propertiesToInclude);\n    },\n\n    /**\n     * Returns object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toObject', propertiesToInclude);\n    },\n\n    /**\n     * Returns dataless object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toDatalessObject', propertiesToInclude);\n    },\n\n    /**\n     * @private\n     */\n    _toObjectMethod: function (methodName, propertiesToInclude) {\n\n      var clipPath = this.clipPath, data = {\n        version: fabric.version,\n        objects: this._toObjects(methodName, propertiesToInclude),\n      };\n      if (clipPath) {\n        data.clipPath = this._toObject(this.clipPath, methodName, propertiesToInclude);\n      }\n      extend(data, this.__serializeBgOverlay(methodName, propertiesToInclude));\n\n      fabric.util.populateWithProperties(this, data, propertiesToInclude);\n\n      return data;\n    },\n\n    /**\n     * @private\n     */\n    _toObjects: function(methodName, propertiesToInclude) {\n      return this._objects.filter(function(object) {\n        return !object.excludeFromExport;\n      }).map(function(instance) {\n        return this._toObject(instance, methodName, propertiesToInclude);\n      }, this);\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      var originalValue;\n\n      if (!this.includeDefaultValues) {\n        originalValue = instance.includeDefaultValues;\n        instance.includeDefaultValues = false;\n      }\n\n      var object = instance[methodName](propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        instance.includeDefaultValues = originalValue;\n      }\n      return object;\n    },\n\n    /**\n     * @private\n     */\n    __serializeBgOverlay: function(methodName, propertiesToInclude) {\n      var data = { }, bgImage = this.backgroundImage, overlay = this.overlayImage;\n\n      if (this.backgroundColor) {\n        data.background = this.backgroundColor.toObject\n          ? this.backgroundColor.toObject(propertiesToInclude)\n          : this.backgroundColor;\n      }\n\n      if (this.overlayColor) {\n        data.overlay = this.overlayColor.toObject\n          ? this.overlayColor.toObject(propertiesToInclude)\n          : this.overlayColor;\n      }\n      if (bgImage && !bgImage.excludeFromExport) {\n        data.backgroundImage = this._toObject(bgImage, methodName, propertiesToInclude);\n      }\n      if (overlay && !overlay.excludeFromExport) {\n        data.overlayImage = this._toObject(overlay, methodName, propertiesToInclude);\n      }\n\n      return data;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * When true, getSvgTransform() will apply the StaticCanvas.viewportTransform to the SVG transformation. When true,\n     * a zoomed canvas will then produce zoomed SVG output.\n     * @type Boolean\n     * @default\n     */\n    svgViewportTransformation: true,\n\n    /**\n     * Returns SVG representation of canvas\n     * @function\n     * @param {Object} [options] Options object for SVG output\n     * @param {Boolean} [options.suppressPreamble=false] If true xml tag is not included\n     * @param {Object} [options.viewBox] SVG viewbox object\n     * @param {Number} [options.viewBox.x] x-coordinate of viewbox\n     * @param {Number} [options.viewBox.y] y-coordinate of viewbox\n     * @param {Number} [options.viewBox.width] Width of viewbox\n     * @param {Number} [options.viewBox.height] Height of viewbox\n     * @param {String} [options.encoding=UTF-8] Encoding of SVG output\n     * @param {String} [options.width] desired width of svg with or without units\n     * @param {String} [options.height] desired height of svg with or without units\n     * @param {Function} [reviver] Method for further parsing of svg elements, called after each fabric object converted into svg representation.\n     * @return {String} SVG string\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n     * @see {@link http://jsfiddle.net/fabricjs/jQ3ZZ/|jsFiddle demo}\n     * @example <caption>Normal SVG output</caption>\n     * var svg = canvas.toSVG();\n     * @example <caption>SVG output without preamble (without &lt;?xml ../>)</caption>\n     * var svg = canvas.toSVG({suppressPreamble: true});\n     * @example <caption>SVG output with viewBox attribute</caption>\n     * var svg = canvas.toSVG({\n     *   viewBox: {\n     *     x: 100,\n     *     y: 100,\n     *     width: 200,\n     *     height: 300\n     *   }\n     * });\n     * @example <caption>SVG output with different encoding (default: UTF-8)</caption>\n     * var svg = canvas.toSVG({encoding: 'ISO-8859-1'});\n     * @example <caption>Modify SVG output with reviver function</caption>\n     * var svg = canvas.toSVG(null, function(svg) {\n     *   return svg.replace('stroke-dasharray: ; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; ', '');\n     * });\n     */\n    toSVG: function(options, reviver) {\n      options || (options = { });\n      options.reviver = reviver;\n      var markup = [];\n\n      this._setSVGPreamble(markup, options);\n      this._setSVGHeader(markup, options);\n      if (this.clipPath) {\n        markup.push('<g clip-path=\"url(#' + this.clipPath.clipPathId + ')\" >\\n');\n      }\n      this._setSVGBgOverlayColor(markup, 'background');\n      this._setSVGBgOverlayImage(markup, 'backgroundImage', reviver);\n      this._setSVGObjects(markup, reviver);\n      if (this.clipPath) {\n        markup.push('</g>\\n');\n      }\n      this._setSVGBgOverlayColor(markup, 'overlay');\n      this._setSVGBgOverlayImage(markup, 'overlayImage', reviver);\n\n      markup.push('</svg>');\n\n      return markup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _setSVGPreamble: function(markup, options) {\n      if (options.suppressPreamble) {\n        return;\n      }\n      markup.push(\n        '<?xml version=\"1.0\" encoding=\"', (options.encoding || 'UTF-8'), '\" standalone=\"no\" ?>\\n',\n        '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ',\n        '\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n'\n      );\n    },\n\n    /**\n     * @private\n     */\n    _setSVGHeader: function(markup, options) {\n      var width = options.width || this.width,\n          height = options.height || this.height,\n          vpt, viewBox = 'viewBox=\"0 0 ' + this.width + ' ' + this.height + '\" ',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      if (options.viewBox) {\n        viewBox = 'viewBox=\"' +\n                options.viewBox.x + ' ' +\n                options.viewBox.y + ' ' +\n                options.viewBox.width + ' ' +\n                options.viewBox.height + '\" ';\n      }\n      else {\n        if (this.svgViewportTransformation) {\n          vpt = this.viewportTransform;\n          viewBox = 'viewBox=\"' +\n                  toFixed(-vpt[4] / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(-vpt[5] / vpt[3], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.width / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.height / vpt[3], NUM_FRACTION_DIGITS) + '\" ';\n        }\n      }\n\n      markup.push(\n        '<svg ',\n        'xmlns=\"http://www.w3.org/2000/svg\" ',\n        'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ',\n        'version=\"1.1\" ',\n        'width=\"', width, '\" ',\n        'height=\"', height, '\" ',\n        viewBox,\n        'xml:space=\"preserve\">\\n',\n        '<desc>Created with Fabric.js ', fabric.version, '</desc>\\n',\n        '<defs>\\n',\n        this.createSVGFontFacesMarkup(),\n        this.createSVGRefElementsMarkup(),\n        this.createSVGClipPathMarkup(options),\n        '</defs>\\n'\n      );\n    },\n\n    createSVGClipPathMarkup: function(options) {\n      var clipPath = this.clipPath;\n      if (clipPath) {\n        clipPath.clipPathId = 'CLIPPATH_' + fabric.Object.__uid++;\n        return  '<clipPath id=\"' + clipPath.clipPathId + '\" >\\n' +\n          this.clipPath.toClipPathSVG(options.reviver) +\n          '</clipPath>\\n';\n      }\n      return '';\n    },\n\n    /**\n     * Creates markup containing SVG referenced elements like patterns, gradients etc.\n     * @return {String}\n     */\n    createSVGRefElementsMarkup: function() {\n      var _this = this,\n          markup = ['background', 'overlay'].map(function(prop) {\n            var fill = _this[prop + 'Color'];\n            if (fill && fill.toLive) {\n              var shouldTransform = _this[prop + 'Vpt'], vpt = _this.viewportTransform,\n                  object = {\n                    width: _this.width / (shouldTransform ? vpt[0] : 1),\n                    height: _this.height / (shouldTransform ? vpt[3] : 1)\n                  };\n              return fill.toSVG(\n                object,\n                { additionalTransform: shouldTransform ? fabric.util.matrixToSVG(vpt) : '' }\n              );\n            }\n          });\n      return markup.join('');\n    },\n\n    /**\n     * Creates markup containing SVG font faces,\n     * font URLs for font faces must be collected by developers\n     * and are not extracted from the DOM by fabricjs\n     * @param {Array} objects Array of fabric objects\n     * @return {String}\n     */\n    createSVGFontFacesMarkup: function() {\n      var markup = '', fontList = { }, obj, fontFamily,\n          style, row, rowIndex, _char, charIndex, i, len,\n          fontPaths = fabric.fontPaths, objects = [];\n\n      this._objects.forEach(function add(object) {\n        objects.push(object);\n        if (object._objects) {\n          object._objects.forEach(add);\n        }\n      });\n\n      for (i = 0, len = objects.length; i < len; i++) {\n        obj = objects[i];\n        fontFamily = obj.fontFamily;\n        if (obj.type.indexOf('text') === -1 || fontList[fontFamily] || !fontPaths[fontFamily]) {\n          continue;\n        }\n        fontList[fontFamily] = true;\n        if (!obj.styles) {\n          continue;\n        }\n        style = obj.styles;\n        for (rowIndex in style) {\n          row = style[rowIndex];\n          for (charIndex in row) {\n            _char = row[charIndex];\n            fontFamily = _char.fontFamily;\n            if (!fontList[fontFamily] && fontPaths[fontFamily]) {\n              fontList[fontFamily] = true;\n            }\n          }\n        }\n      }\n\n      for (var j in fontList) {\n        markup += [\n          '\\t\\t@font-face {\\n',\n          '\\t\\t\\tfont-family: \\'', j, '\\';\\n',\n          '\\t\\t\\tsrc: url(\\'', fontPaths[j], '\\');\\n',\n          '\\t\\t}\\n'\n        ].join('');\n      }\n\n      if (markup) {\n        markup = [\n          '\\t<style type=\"text/css\">',\n          '<![CDATA[\\n',\n          markup,\n          ']]>',\n          '</style>\\n'\n        ].join('');\n      }\n\n      return markup;\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObjects: function(markup, reviver) {\n      var instance, i, len, objects = this._objects;\n      for (i = 0, len = objects.length; i < len; i++) {\n        instance = objects[i];\n        if (instance.excludeFromExport) {\n          continue;\n        }\n        this._setSVGObject(markup, instance, reviver);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      markup.push(instance.toSVG(reviver));\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayImage: function(markup, property, reviver) {\n      if (this[property] && !this[property].excludeFromExport && this[property].toSVG) {\n        markup.push(this[property].toSVG(reviver));\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayColor: function(markup, property) {\n      var filler = this[property + 'Color'], vpt = this.viewportTransform, finalWidth = this.width,\n          finalHeight = this.height;\n      if (!filler) {\n        return;\n      }\n      if (filler.toLive) {\n        var repeat = filler.repeat, iVpt = fabric.util.invertTransform(vpt), shouldInvert = this[property + 'Vpt'],\n            additionalTransform = shouldInvert ? fabric.util.matrixToSVG(iVpt) : '';\n        markup.push(\n          '<rect transform=\"' + additionalTransform + ' translate(', finalWidth / 2, ',', finalHeight / 2, ')\"',\n          ' x=\"', filler.offsetX - finalWidth / 2,\n          '\" y=\"', filler.offsetY - finalHeight / 2, '\" ',\n          'width=\"',\n          (repeat === 'repeat-y' || repeat === 'no-repeat'\n            ? filler.source.width\n            : finalWidth ),\n          '\" height=\"',\n          (repeat === 'repeat-x' || repeat === 'no-repeat'\n            ? filler.source.height\n            : finalHeight),\n          '\" fill=\"url(#SVGID_' + filler.id + ')\"',\n          '></rect>\\n'\n        );\n      }\n      else {\n        markup.push(\n          '<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ',\n          'fill=\"', filler, '\"',\n          '></rect>\\n'\n        );\n      }\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the bottom of the stack of drawn objects\n     * @param {fabric.Object} object Object to send to back\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendToBack: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, objs;\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.unshift(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.unshift(object);\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the top of the stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringToFront: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, objs;\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.push(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.push(object);\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Moves an object or a selection down in stack of drawn objects\n     * An optional parameter, intersecting allows to move the object in behind\n     * the first intersecting object. Where intersection is calculated with\n     * bounding box. If no intersection is found, there will not be change in the\n     * stack.\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendBackwards: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, idx, newIdx, objs, objsMoved = 0;\n\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx > 0 + objsMoved) {\n            newIdx = idx - 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n          objsMoved++;\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== 0) {\n          // if object is not on the bottom of stack\n          newIdx = this._findNewLowerIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewLowerIndex: function(object, idx, intersecting) {\n      var newIdx, i;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse down the stack looking for the nearest intersecting object\n        for (i = idx - 1; i >= 0; --i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx - 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object or a selection up in stack of drawn objects\n     * An optional parameter, intersecting allows to move the object in front\n     * of the first intersecting object. Where intersection is calculated with\n     * bounding box. If no intersection is found, there will not be change in the\n     * stack.\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringForward: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, idx, newIdx, objs, objsMoved = 0;\n\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx < this._objects.length - 1 - objsMoved) {\n            newIdx = idx + 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n          objsMoved++;\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== this._objects.length - 1) {\n          // if object is not on top of stack (last item in an array)\n          newIdx = this._findNewUpperIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewUpperIndex: function(object, idx, intersecting) {\n      var newIdx, i, len;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse up the stack looking for the nearest intersecting object\n        for (i = idx + 1, len = this._objects.length; i < len; ++i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx + 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object to specified level in stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @param {Number} index Position to move to\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    moveTo: function (object, index) {\n      removeFromArray(this._objects, object);\n      this._objects.splice(index, 0, object);\n      return this.renderOnAddRemove && this.requestRenderAll();\n    },\n\n    /**\n     * Clears a canvas element and dispose objects\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      // cancel eventually ongoing renders\n      if (this.isRendering) {\n        fabric.util.cancelAnimFrame(this.isRendering);\n        this.isRendering = 0;\n      }\n      this.forEachObject(function(object) {\n        object.dispose && object.dispose();\n      });\n      this._objects = [];\n      if (this.backgroundImage && this.backgroundImage.dispose) {\n        this.backgroundImage.dispose();\n      }\n      this.backgroundImage = null;\n      if (this.overlayImage && this.overlayImage.dispose) {\n        this.overlayImage.dispose();\n      }\n      this.overlayImage = null;\n      this._iTextInstances = null;\n      this.contextContainer = null;\n      fabric.util.cleanUpJsdomNode(this.lowerCanvasEl);\n      this.lowerCanvasEl = undefined;\n      return this;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function () {\n      return '#<fabric.Canvas (' + this.complexity() + '): ' +\n               '{ objects: ' + this._objects.length + ' }>';\n    }\n  });\n\n  extend(fabric.StaticCanvas.prototype, fabric.Observable);\n  extend(fabric.StaticCanvas.prototype, fabric.Collection);\n  extend(fabric.StaticCanvas.prototype, fabric.DataURLExporter);\n\n  extend(fabric.StaticCanvas, /** @lends fabric.StaticCanvas */ {\n\n    /**\n     * @static\n     * @type String\n     * @default\n     */\n    EMPTY_JSON: '{\"objects\": [], \"background\": \"white\"}',\n\n    /**\n     * Provides a way to check support of some of the canvas methods\n     * (either those of HTMLCanvasElement itself, or rendering context)\n     *\n     * @param {String} methodName Method to check support for;\n     *                            Could be one of \"setLineDash\"\n     * @return {Boolean | null} `true` if method is supported (or at least exists),\n     *                          `null` if canvas element or context can not be initialized\n     */\n    supports: function (methodName) {\n      var el = createCanvasElement();\n\n      if (!el || !el.getContext) {\n        return null;\n      }\n\n      var ctx = el.getContext('2d');\n      if (!ctx) {\n        return null;\n      }\n\n      switch (methodName) {\n\n        case 'setLineDash':\n          return typeof ctx.setLineDash !== 'undefined';\n\n        default:\n          return null;\n      }\n    }\n  });\n\n  /**\n   * Returns Object representation of canvas\n   * this alias is provided because if you call JSON.stringify on an instance,\n   * the toJSON object will be invoked if it exists.\n   * Having a toJSON method means you can do JSON.stringify(myCanvas)\n   * @function\n   * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n   * @return {Object} JSON compatible object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n   * @see {@link http://jsfiddle.net/fabricjs/pec86/|jsFiddle demo}\n   * @example <caption>JSON without additional properties</caption>\n   * var json = canvas.toJSON();\n   * @example <caption>JSON with additional properties included</caption>\n   * var json = canvas.toJSON(['lockMovementX', 'lockMovementY', 'lockRotation', 'lockScalingX', 'lockScalingY']);\n   * @example <caption>JSON without default values</caption>\n   * canvas.includeDefaultValues = false;\n   * var json = canvas.toJSON();\n   */\n  fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject;\n\n  if (fabric.isLikelyNode) {\n    fabric.StaticCanvas.prototype.createPNGStream = function() {\n      var impl = getNodeCanvas(this.lowerCanvasEl);\n      return impl && impl.createPNGStream();\n    };\n    fabric.StaticCanvas.prototype.createJPEGStream = function(opts) {\n      var impl = getNodeCanvas(this.lowerCanvasEl);\n      return impl && impl.createJPEGStream(opts);\n    };\n  }\n})();\n\n\n/**\n * BaseBrush class\n * @class fabric.BaseBrush\n * @see {@link http://fabricjs.com/freedrawing|Freedrawing demo}\n */\nfabric.BaseBrush = fabric.util.createClass(/** @lends fabric.BaseBrush.prototype */ {\n\n  /**\n   * Color of a brush\n   * @type String\n   * @default\n   */\n  color: 'rgb(0, 0, 0)',\n\n  /**\n   * Width of a brush, has to be a Number, no string literals\n   * @type Number\n   * @default\n   */\n  width: 1,\n\n  /**\n   * Shadow object representing shadow of this shape.\n   * <b>Backwards incompatibility note:</b> This property replaces \"shadowColor\" (String), \"shadowOffsetX\" (Number),\n   * \"shadowOffsetY\" (Number) and \"shadowBlur\" (Number) since v1.2.12\n   * @type fabric.Shadow\n   * @default\n   */\n  shadow: null,\n\n  /**\n   * Line endings style of a brush (one of \"butt\", \"round\", \"square\")\n   * @type String\n   * @default\n   */\n  strokeLineCap: 'round',\n\n  /**\n   * Corner style of a brush (one of \"bevel\", \"round\", \"miter\")\n   * @type String\n   * @default\n   */\n  strokeLineJoin: 'round',\n\n  /**\n   * Maximum miter length (used for strokeLineJoin = \"miter\") of a brush's\n   * @type Number\n   * @default\n   */\n  strokeMiterLimit:         10,\n\n  /**\n   * Stroke Dash Array.\n   * @type Array\n   * @default\n   */\n  strokeDashArray: null,\n\n  /**\n   * When `true`, the free drawing is limited to the whiteboard size. Default to false.\n   * @type Boolean\n   * @default false\n  */\n\n  limitedToCanvasSize: false,\n\n\n  /**\n   * Sets brush styles\n   * @private\n   */\n  _setBrushStyles: function() {\n    var ctx = this.canvas.contextTop;\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.width;\n    ctx.lineCap = this.strokeLineCap;\n    ctx.miterLimit = this.strokeMiterLimit;\n    ctx.lineJoin = this.strokeLineJoin;\n    if (fabric.StaticCanvas.supports('setLineDash')) {\n      ctx.setLineDash(this.strokeDashArray || []);\n    }\n  },\n\n  /**\n   * Sets the transformation on given context\n   * @param {RenderingContext2d} ctx context to render on\n   * @private\n   */\n  _saveAndTransform: function(ctx) {\n    var v = this.canvas.viewportTransform;\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n  },\n\n  /**\n   * Sets brush shadow styles\n   * @private\n   */\n  _setShadow: function() {\n    if (!this.shadow) {\n      return;\n    }\n\n    var canvas = this.canvas,\n        shadow = this.shadow,\n        ctx = canvas.contextTop,\n        zoom = canvas.getZoom();\n    if (canvas && canvas._isRetinaScaling()) {\n      zoom *= fabric.devicePixelRatio;\n    }\n\n    ctx.shadowColor = shadow.color;\n    ctx.shadowBlur = shadow.blur * zoom;\n    ctx.shadowOffsetX = shadow.offsetX * zoom;\n    ctx.shadowOffsetY = shadow.offsetY * zoom;\n  },\n\n  needsFullRender: function() {\n    var color = new fabric.Color(this.color);\n    return color.getAlpha() < 1 || !!this.shadow;\n  },\n\n  /**\n   * Removes brush shadow styles\n   * @private\n   */\n  _resetShadow: function() {\n    var ctx = this.canvas.contextTop;\n\n    ctx.shadowColor = '';\n    ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n  },\n\n  /**\n   * Check is pointer is outside canvas boundaries\n   * @param {Object} pointer\n   * @private\n  */\n  _isOutSideCanvas: function(pointer) {\n    return pointer.x < 0 || pointer.x > this.canvas.getWidth() || pointer.y < 0 || pointer.y > this.canvas.getHeight();\n  }\n});\n\n\n(function() {\n  /**\n   * PencilBrush class\n   * @class fabric.PencilBrush\n   * @extends fabric.BaseBrush\n   */\n  fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.PencilBrush.prototype */ {\n\n    /**\n     * Discard points that are less than `decimate` pixel distant from each other\n     * @type Number\n     * @default 0.4\n     */\n    decimate: 0.4,\n\n    /**\n     * Constructor\n     * @param {fabric.Canvas} canvas\n     * @return {fabric.PencilBrush} Instance of a pencil brush\n     */\n    initialize: function(canvas) {\n      this.canvas = canvas;\n      this._points = [];\n    },\n\n    /**\n     * Invoked inside on mouse down and mouse move\n     * @param {Object} pointer\n     */\n    _drawSegment: function (ctx, p1, p2) {\n      var midPoint = p1.midPointFrom(p2);\n      ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n      return midPoint;\n    },\n\n    /**\n     * Invoked on mouse down\n     * @param {Object} pointer\n     */\n    onMouseDown: function(pointer, options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return;\n      }\n      this._prepareForDrawing(pointer);\n      // capture coordinates immediately\n      // this allows to draw dots (when movement never occurs)\n      this._captureDrawingPath(pointer);\n      this._render();\n    },\n\n    /**\n     * Invoked on mouse move\n     * @param {Object} pointer\n     */\n    onMouseMove: function(pointer, options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return;\n      }\n      if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n        return;\n      }\n      if (this._captureDrawingPath(pointer) && this._points.length > 1) {\n        if (this.needsFullRender()) {\n          // redraw curve\n          // clear top canvas\n          this.canvas.clearContext(this.canvas.contextTop);\n          this._render();\n        }\n        else {\n          var points = this._points, length = points.length, ctx = this.canvas.contextTop;\n          // draw the curve update\n          this._saveAndTransform(ctx);\n          if (this.oldEnd) {\n            ctx.beginPath();\n            ctx.moveTo(this.oldEnd.x, this.oldEnd.y);\n          }\n          this.oldEnd = this._drawSegment(ctx, points[length - 2], points[length - 1], true);\n          ctx.stroke();\n          ctx.restore();\n        }\n      }\n    },\n\n    /**\n     * Invoked on mouse up\n     */\n    onMouseUp: function(options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return true;\n      }\n      this.oldEnd = undefined;\n      this._finalizeAndAddPath();\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _prepareForDrawing: function(pointer) {\n\n      var p = new fabric.Point(pointer.x, pointer.y);\n\n      this._reset();\n      this._addPoint(p);\n      this.canvas.contextTop.moveTo(p.x, p.y);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Point} point Point to be added to points array\n     */\n    _addPoint: function(point) {\n      if (this._points.length > 1 && point.eq(this._points[this._points.length - 1])) {\n        return false;\n      }\n      this._points.push(point);\n      return true;\n    },\n\n    /**\n     * Clear points array and set contextTop canvas style.\n     * @private\n     */\n    _reset: function() {\n      this._points = [];\n      this._setBrushStyles();\n      this._setShadow();\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _captureDrawingPath: function(pointer) {\n      var pointerPoint = new fabric.Point(pointer.x, pointer.y);\n      return this._addPoint(pointerPoint);\n    },\n\n    /**\n     * Draw a smooth path on the topCanvas using quadraticCurveTo\n     * @private\n     */\n    _render: function() {\n      var ctx  = this.canvas.contextTop, i, len,\n          p1 = this._points[0],\n          p2 = this._points[1];\n\n      this._saveAndTransform(ctx);\n      ctx.beginPath();\n      //if we only have 2 points in the path and they are the same\n      //it means that the user only clicked the canvas without moving the mouse\n      //then we should be drawing a dot. A path isn't drawn between two identical dots\n      //that's why we set them apart a bit\n      if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n        var width = this.width / 1000;\n        p1 = new fabric.Point(p1.x, p1.y);\n        p2 = new fabric.Point(p2.x, p2.y);\n        p1.x -= width;\n        p2.x += width;\n      }\n      ctx.moveTo(p1.x, p1.y);\n\n      for (i = 1, len = this._points.length; i < len; i++) {\n        // we pick the point between pi + 1 & pi + 2 as the\n        // end point and p1 as our control point.\n        this._drawSegment(ctx, p1, p2);\n        p1 = this._points[i];\n        p2 = this._points[i + 1];\n      }\n      // Draw last line as a straight line while\n      // we wait for the next point to be able to calculate\n      // the bezier control point\n      ctx.lineTo(p1.x, p1.y);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * Converts points to SVG path\n     * @param {Array} points Array of points\n     * @return {String} SVG path\n     */\n    convertPointsToSVGPath: function(points) {\n      var path = [], i, width = this.width / 1000,\n          p1 = new fabric.Point(points[0].x, points[0].y),\n          p2 = new fabric.Point(points[1].x, points[1].y),\n          len = points.length, multSignX = 1, multSignY = 0, manyPoints = len > 2;\n\n      if (manyPoints) {\n        multSignX = points[2].x < p2.x ? -1 : points[2].x === p2.x ? 0 : 1;\n        multSignY = points[2].y < p2.y ? -1 : points[2].y === p2.y ? 0 : 1;\n      }\n      path.push('M ', p1.x - multSignX * width, ' ', p1.y - multSignY * width, ' ');\n      for (i = 1; i < len; i++) {\n        if (!p1.eq(p2)) {\n          var midPoint = p1.midPointFrom(p2);\n          // p1 is our bezier control point\n          // midpoint is our endpoint\n          // start point is p(i-1) value.\n          path.push('Q ', p1.x, ' ', p1.y, ' ', midPoint.x, ' ', midPoint.y, ' ');\n        }\n        p1 = points[i];\n        if ((i + 1) < points.length) {\n          p2 = points[i + 1];\n        }\n      }\n      if (manyPoints) {\n        multSignX = p1.x > points[i - 2].x ? 1 : p1.x === points[i - 2].x ? 0 : -1;\n        multSignY = p1.y > points[i - 2].y ? 1 : p1.y === points[i - 2].y ? 0 : -1;\n      }\n      path.push('L ', p1.x + multSignX * width, ' ', p1.y + multSignY * width);\n      return path;\n    },\n\n    /**\n     * Creates fabric.Path object to add on canvas\n     * @param {String} pathData Path data\n     * @return {fabric.Path} Path to add on canvas\n     */\n    createPath: function(pathData) {\n      var path = new fabric.Path(pathData, {\n        fill: null,\n        stroke: this.color,\n        strokeWidth: this.width,\n        strokeLineCap: this.strokeLineCap,\n        strokeMiterLimit: this.strokeMiterLimit,\n        strokeLineJoin: this.strokeLineJoin,\n        strokeDashArray: this.strokeDashArray,\n      });\n      if (this.shadow) {\n        this.shadow.affectStroke = true;\n        path.shadow = new fabric.Shadow(this.shadow);\n      }\n\n      return path;\n    },\n\n    /**\n     * Decimate points array with the decimate value\n     */\n    decimatePoints: function(points, distance) {\n      if (points.length <= 2) {\n        return points;\n      }\n      var zoom = this.canvas.getZoom(), adjustedDistance = Math.pow(distance / zoom, 2),\n          i, l = points.length - 1, lastPoint = points[0], newPoints = [lastPoint],\n          cDistance;\n      for (i = 1; i < l; i++) {\n        cDistance = Math.pow(lastPoint.x - points[i].x, 2) + Math.pow(lastPoint.y - points[i].y, 2);\n        if (cDistance >= adjustedDistance) {\n          lastPoint = points[i];\n          newPoints.push(lastPoint);\n        }\n      }\n      if (newPoints.length === 1) {\n        newPoints.push(new fabric.Point(newPoints[0].x, newPoints[0].y));\n      }\n      return newPoints;\n    },\n\n    /**\n     * On mouseup after drawing the path on contextTop canvas\n     * we use the points captured to create an new fabric path object\n     * and add it to the fabric canvas.\n     */\n    _finalizeAndAddPath: function() {\n      var ctx = this.canvas.contextTop;\n      ctx.closePath();\n      if (this.decimate) {\n        this._points = this.decimatePoints(this._points, this.decimate);\n      }\n      var pathData = this.convertPointsToSVGPath(this._points).join('');\n      if (pathData === 'M 0 0 Q 0 0 0 0 L 0 0') {\n        // do not create 0 width/height paths, as they are\n        // rendered inconsistently across browsers\n        // Firefox 4, for example, renders a dot,\n        // whereas Chrome 10 renders nothing\n        this.canvas.requestRenderAll();\n        return;\n      }\n\n      var path = this.createPath(pathData);\n      this.canvas.clearContext(this.canvas.contextTop);\n      this.canvas.fire('before:path:created', { path: path });\n      this.canvas.add(path);\n      this.canvas.requestRenderAll();\n      path.setCoords();\n      this._resetShadow();\n\n\n      // fire event 'path' created\n      this.canvas.fire('path:created', { path: path });\n    }\n  });\n})();\n\n\n/**\n * CircleBrush class\n * @class fabric.CircleBrush\n */\nfabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.CircleBrush.prototype */ {\n\n  /**\n   * Width of a brush\n   * @type Number\n   * @default\n   */\n  width: 10,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.CircleBrush} Instance of a circle brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.points = [];\n  },\n\n  /**\n   * Invoked inside on mouse down and mouse move\n   * @param {Object} pointer\n   */\n  drawDot: function(pointer) {\n    var point = this.addPoint(pointer),\n        ctx = this.canvas.contextTop;\n    this._saveAndTransform(ctx);\n    this.dot(ctx, point);\n    ctx.restore();\n  },\n\n  dot: function(ctx, point) {\n    ctx.fillStyle = point.fill;\n    ctx.beginPath();\n    ctx.arc(point.x, point.y, point.radius, 0, Math.PI * 2, false);\n    ctx.closePath();\n    ctx.fill();\n  },\n\n  /**\n   * Invoked on mouse down\n   */\n  onMouseDown: function(pointer) {\n    this.points.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n    this.drawDot(pointer);\n  },\n\n  /**\n   * Render the full state of the brush\n   * @private\n   */\n  _render: function() {\n    var ctx  = this.canvas.contextTop, i, len,\n        points = this.points;\n    this._saveAndTransform(ctx);\n    for (i = 0, len = points.length; i < len; i++) {\n      this.dot(ctx, points[i]);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n      return;\n    }\n    if (this.needsFullRender()) {\n      this.canvas.clearContext(this.canvas.contextTop);\n      this.addPoint(pointer);\n      this._render();\n    }\n    else {\n      this.drawDot(pointer);\n    }\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove, i, len;\n    this.canvas.renderOnAddRemove = false;\n\n    var circles = [];\n\n    for (i = 0, len = this.points.length; i < len; i++) {\n      var point = this.points[i],\n          circle = new fabric.Circle({\n            radius: point.radius,\n            left: point.x,\n            top: point.y,\n            originX: 'center',\n            originY: 'center',\n            fill: point.fill\n          });\n\n      this.shadow && (circle.shadow = new fabric.Shadow(this.shadow));\n\n      circles.push(circle);\n    }\n    var group = new fabric.Group(circles);\n    group.canvas = this.canvas;\n\n    this.canvas.fire('before:path:created', { path: group });\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.requestRenderAll();\n  },\n\n  /**\n   * @param {Object} pointer\n   * @return {fabric.Point} Just added pointer point\n   */\n  addPoint: function(pointer) {\n    var pointerPoint = new fabric.Point(pointer.x, pointer.y),\n\n        circleRadius = fabric.util.getRandomInt(\n          Math.max(0, this.width - 20), this.width + 20) / 2,\n\n        circleColor = new fabric.Color(this.color)\n          .setAlpha(fabric.util.getRandomInt(0, 100) / 100)\n          .toRgba();\n\n    pointerPoint.radius = circleRadius;\n    pointerPoint.fill = circleColor;\n\n    this.points.push(pointerPoint);\n\n    return pointerPoint;\n  }\n});\n\n\n/**\n * SprayBrush class\n * @class fabric.SprayBrush\n */\nfabric.SprayBrush = fabric.util.createClass( fabric.BaseBrush, /** @lends fabric.SprayBrush.prototype */ {\n\n  /**\n   * Width of a spray\n   * @type Number\n   * @default\n   */\n  width:              10,\n\n  /**\n   * Density of a spray (number of dots per chunk)\n   * @type Number\n   * @default\n   */\n  density:            20,\n\n  /**\n   * Width of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidth:           1,\n\n  /**\n   * Width variance of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidthVariance:   1,\n\n  /**\n   * Whether opacity of a dot should be random\n   * @type Boolean\n   * @default\n   */\n  randomOpacity:        false,\n\n  /**\n   * Whether overlapping dots (rectangles) should be removed (for performance reasons)\n   * @type Boolean\n   * @default\n   */\n  optimizeOverlapping:  true,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.SprayBrush} Instance of a spray brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.sprayChunks = [];\n  },\n\n  /**\n   * Invoked on mouse down\n   * @param {Object} pointer\n   */\n  onMouseDown: function(pointer) {\n    this.sprayChunks.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n\n    this.addSprayChunk(pointer);\n    this.render(this.sprayChunkPoints);\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n      return;\n    }\n    this.addSprayChunk(pointer);\n    this.render(this.sprayChunkPoints);\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove;\n    this.canvas.renderOnAddRemove = false;\n\n    var rects = [];\n\n    for (var i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      var sprayChunk = this.sprayChunks[i];\n\n      for (var j = 0, jlen = sprayChunk.length; j < jlen; j++) {\n\n        var rect = new fabric.Rect({\n          width: sprayChunk[j].width,\n          height: sprayChunk[j].width,\n          left: sprayChunk[j].x + 1,\n          top: sprayChunk[j].y + 1,\n          originX: 'center',\n          originY: 'center',\n          fill: this.color\n        });\n        rects.push(rect);\n      }\n    }\n\n    if (this.optimizeOverlapping) {\n      rects = this._getOptimizedRects(rects);\n    }\n\n    var group = new fabric.Group(rects);\n    this.shadow && group.set('shadow', new fabric.Shadow(this.shadow));\n    this.canvas.fire('before:path:created', { path: group });\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.requestRenderAll();\n  },\n\n  /**\n   * @private\n   * @param {Array} rects\n   */\n  _getOptimizedRects: function(rects) {\n\n    // avoid creating duplicate rects at the same coordinates\n    var uniqueRects = { }, key, i, len;\n\n    for (i = 0, len = rects.length; i < len; i++) {\n      key = rects[i].left + '' + rects[i].top;\n      if (!uniqueRects[key]) {\n        uniqueRects[key] = rects[i];\n      }\n    }\n    var uniqueRectsArray = [];\n    for (key in uniqueRects) {\n      uniqueRectsArray.push(uniqueRects[key]);\n    }\n\n    return uniqueRectsArray;\n  },\n\n  /**\n   * Render new chunk of spray brush\n   */\n  render: function(sprayChunk) {\n    var ctx = this.canvas.contextTop, i, len;\n    ctx.fillStyle = this.color;\n\n    this._saveAndTransform(ctx);\n\n    for (i = 0, len = sprayChunk.length; i < len; i++) {\n      var point = sprayChunk[i];\n      if (typeof point.opacity !== 'undefined') {\n        ctx.globalAlpha = point.opacity;\n      }\n      ctx.fillRect(point.x, point.y, point.width, point.width);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * Render all spray chunks\n   */\n  _render: function() {\n    var ctx = this.canvas.contextTop, i, ilen;\n    ctx.fillStyle = this.color;\n\n    this._saveAndTransform(ctx);\n\n    for (i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      this.render(this.sprayChunks[i]);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * @param {Object} pointer\n   */\n  addSprayChunk: function(pointer) {\n    this.sprayChunkPoints = [];\n\n    var x, y, width, radius = this.width / 2, i;\n\n    for (i = 0; i < this.density; i++) {\n\n      x = fabric.util.getRandomInt(pointer.x - radius, pointer.x + radius);\n      y = fabric.util.getRandomInt(pointer.y - radius, pointer.y + radius);\n\n      if (this.dotWidthVariance) {\n        width = fabric.util.getRandomInt(\n          // bottom clamp width to 1\n          Math.max(1, this.dotWidth - this.dotWidthVariance),\n          this.dotWidth + this.dotWidthVariance);\n      }\n      else {\n        width = this.dotWidth;\n      }\n\n      var point = new fabric.Point(x, y);\n      point.width = width;\n\n      if (this.randomOpacity) {\n        point.opacity = fabric.util.getRandomInt(0, 100) / 100;\n      }\n\n      this.sprayChunkPoints.push(point);\n    }\n\n    this.sprayChunks.push(this.sprayChunkPoints);\n  }\n});\n\n\n/**\n * PatternBrush class\n * @class fabric.PatternBrush\n * @extends fabric.BaseBrush\n */\nfabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, /** @lends fabric.PatternBrush.prototype */ {\n\n  getPatternSrc: function() {\n\n    var dotWidth = 20,\n        dotDistance = 5,\n        patternCanvas = fabric.util.createCanvasElement(),\n        patternCtx = patternCanvas.getContext('2d');\n\n    patternCanvas.width = patternCanvas.height = dotWidth + dotDistance;\n\n    patternCtx.fillStyle = this.color;\n    patternCtx.beginPath();\n    patternCtx.arc(dotWidth / 2, dotWidth / 2, dotWidth / 2, 0, Math.PI * 2, false);\n    patternCtx.closePath();\n    patternCtx.fill();\n\n    return patternCanvas;\n  },\n\n  getPatternSrcFunction: function() {\n    return String(this.getPatternSrc).replace('this.color', '\"' + this.color + '\"');\n  },\n\n  /**\n   * Creates \"pattern\" instance property\n   */\n  getPattern: function() {\n    return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), 'repeat');\n  },\n\n  /**\n   * Sets brush styles\n   */\n  _setBrushStyles: function() {\n    this.callSuper('_setBrushStyles');\n    this.canvas.contextTop.strokeStyle = this.getPattern();\n  },\n\n  /**\n   * Creates path\n   */\n  createPath: function(pathData) {\n    var path = this.callSuper('createPath', pathData),\n        topLeft = path._getLeftTopCoords().scalarAdd(path.strokeWidth / 2);\n\n    path.stroke = new fabric.Pattern({\n      source: this.source || this.getPatternSrcFunction(),\n      offsetX: -topLeft.x,\n      offsetY: -topLeft.y\n    });\n    return path;\n  }\n});\n\n\n(function() {\n\n  var getPointer = fabric.util.getPointer,\n      degreesToRadians = fabric.util.degreesToRadians,\n      abs = Math.abs,\n      supportLineDash = fabric.StaticCanvas.supports('setLineDash'),\n      isTouchEvent = fabric.util.isTouchEvent,\n      STROKE_OFFSET = 0.5;\n\n  /**\n   * Canvas class\n   * @class fabric.Canvas\n   * @extends fabric.StaticCanvas\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#canvas}\n   * @see {@link fabric.Canvas#initialize} for constructor definition\n   *\n   * @fires object:modified at the end of a transform or any change when statefull is true\n   * @fires object:rotating while an object is being rotated from the control\n   * @fires object:scaling while an object is being scaled by controls\n   * @fires object:moving while an object is being dragged\n   * @fires object:skewing while an object is being skewed from the controls\n   *\n   * @fires before:transform before a transform is is started\n   * @fires before:selection:cleared\n   * @fires selection:cleared\n   * @fires selection:updated\n   * @fires selection:created\n   *\n   * @fires path:created after a drawing operation ends and the path is added\n   * @fires mouse:down\n   * @fires mouse:move\n   * @fires mouse:up\n   * @fires mouse:down:before  on mouse down, before the inner fabric logic runs\n   * @fires mouse:move:before on mouse move, before the inner fabric logic runs\n   * @fires mouse:up:before on mouse up, before the inner fabric logic runs\n   * @fires mouse:over\n   * @fires mouse:out\n   * @fires mouse:dblclick whenever a native dbl click event fires on the canvas.\n   *\n   * @fires dragover\n   * @fires dragenter\n   * @fires dragleave\n   * @fires drop\n   * @fires after:render at the end of the render process, receives the context in the callback\n   * @fires before:render at start the render process, receives the context in the callback\n   *\n   * the following events are deprecated:\n   * @fires object:rotated at the end of a rotation transform\n   * @fires object:scaled at the end of a scale transform\n   * @fires object:moved at the end of translation transform\n   * @fires object:skewed at the end of a skew transform\n   */\n  fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n      this.renderAndResetBound = this.renderAndReset.bind(this);\n      this.requestRenderAllBound = this.requestRenderAll.bind(this);\n      this._initStatic(el, options);\n      this._initInteractive();\n      this._createCacheCanvas();\n    },\n\n    /**\n     * When true, objects can be transformed by one side (unproportionally)\n     * when dragged on the corners that normally would not do that.\n     * @type Boolean\n     * @default\n     * @since fabric 4.0 // changed name and default value\n     */\n    uniformScaling:      true,\n\n    /**\n     * Indicates which key switches uniform scaling.\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled.\n     * totally wrong named. this sounds like `uniform scaling`\n     * if Canvas.uniformScaling is true, pressing this will set it to false\n     * and viceversa.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    uniScaleKey:           'shiftKey',\n\n    /**\n     * When true, objects use center point as the origin of scale transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:        false,\n\n    /**\n     * When true, objects use center point as the origin of rotate transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:       false,\n\n    /**\n     * Indicates which key enable centered Transform\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    centeredKey:           'altKey',\n\n    /**\n     * Indicates which key enable alternate action on corner\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    altActionKey:           'shiftKey',\n\n    /**\n     * Indicates that canvas is interactive. This property should not be changed.\n     * @type Boolean\n     * @default\n     */\n    interactive:            true,\n\n    /**\n     * Indicates whether group selection should be enabled\n     * @type Boolean\n     * @default\n     */\n    selection:              true,\n\n    /**\n     * Indicates which key or keys enable multiple click selection\n     * Pass value as a string or array of strings\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or empty or containing any other string that is not a modifier key\n     * feature is disabled.\n     * @since 1.6.2\n     * @type String|Array\n     * @default\n     */\n    selectionKey:           'shiftKey',\n\n    /**\n     * Indicates which key enable alternative selection\n     * in case of target overlapping with active object\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * For a series of reason that come from the general expectations on how\n     * things should work, this feature works only for preserveObjectStacking true.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled.\n     * @since 1.6.5\n     * @type null|String\n     * @default\n     */\n    altSelectionKey:           null,\n\n    /**\n     * Color of selection\n     * @type String\n     * @default\n     */\n    selectionColor:         'rgba(100, 100, 255, 0.3)', // blue\n\n    /**\n     * Default dash array pattern\n     * If not empty the selection border is dashed\n     * @type Array\n     */\n    selectionDashArray:     [],\n\n    /**\n     * Color of the border of selection (usually slightly darker than color of selection itself)\n     * @type String\n     * @default\n     */\n    selectionBorderColor:   'rgba(255, 255, 255, 0.3)',\n\n    /**\n     * Width of a line used in object/group selection\n     * @type Number\n     * @default\n     */\n    selectionLineWidth:     1,\n\n    /**\n     * Select only shapes that are fully contained in the dragged selection rectangle.\n     * @type Boolean\n     * @default\n     */\n    selectionFullyContained: false,\n\n    /**\n     * Default cursor value used when hovering over an object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:            'move',\n\n    /**\n     * Default cursor value used when moving an object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:             'move',\n\n    /**\n     * Default cursor value used for the entire canvas\n     * @type String\n     * @default\n     */\n    defaultCursor:          'default',\n\n    /**\n     * Cursor value used during free drawing\n     * @type String\n     * @default\n     */\n    freeDrawingCursor:      'crosshair',\n\n    /**\n     * Cursor value used for rotation point\n     * @type String\n     * @default\n     */\n    rotationCursor:         'crosshair',\n\n    /**\n     * Cursor value used for disabled elements ( corners with disabled action )\n     * @type String\n     * @since 2.0.0\n     * @default\n     */\n    notAllowedCursor:         'not-allowed',\n\n    /**\n     * Default element class that's given to wrapper (div) element of canvas\n     * @type String\n     * @default\n     */\n    containerClass:         'canvas-container',\n\n    /**\n     * When true, object detection happens on per-pixel basis rather than on per-bounding-box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:     false,\n\n    /**\n     * Number of pixels around target pixel to tolerate (consider active) during object detection\n     * @type Number\n     * @default\n     */\n    targetFindTolerance:    0,\n\n    /**\n     * When true, target detection is skipped. Target detection will return always undefined.\n     * click selection won't work anymore, events will fire with no targets.\n     * if something is selected before setting it to true, it will be deselected at the first click.\n     * area selection will still work. check the `selection` property too.\n     * if you deactivate both, you should look into staticCanvas.\n     * @type Boolean\n     * @default\n     */\n    skipTargetFind:         false,\n\n    /**\n     * When true, mouse events on canvas (mousedown/mousemove/mouseup) result in free drawing.\n     * After mousedown, mousemove creates a shape,\n     * and then mouseup finalizes it and adds an instance of `fabric.Path` onto canvas.\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-4#free_drawing}\n     * @type Boolean\n     * @default\n     */\n    isDrawingMode:          false,\n\n    /**\n     * Indicates whether objects should remain in current stack position when selected.\n     * When false objects are brought to top and rendered as part of the selection group\n     * @type Boolean\n     * @default\n     */\n    preserveObjectStacking: false,\n\n    /**\n     * Indicates the angle that an object will lock to while rotating.\n     * @type Number\n     * @since 1.6.7\n     * @default\n     */\n    snapAngle: 0,\n\n    /**\n     * Indicates the distance from the snapAngle the rotation will lock to the snapAngle.\n     * When `null`, the snapThreshold will default to the snapAngle.\n     * @type null|Number\n     * @since 1.6.7\n     * @default\n     */\n    snapThreshold: null,\n\n    /**\n     * Indicates if the right click on canvas can output the context menu or not\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    stopContextMenu: false,\n\n    /**\n     * Indicates if the canvas can fire right click events\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    fireRightClick: false,\n\n    /**\n     * Indicates if the canvas can fire middle click events\n     * @type Boolean\n     * @since 1.7.8\n     * @default\n     */\n    fireMiddleClick: false,\n\n    /**\n     * Keep track of the subTargets for Mouse Events\n     * @type fabric.Object[]\n     */\n    targets: [],\n\n    /**\n     * Keep track of the hovered target\n     * @type fabric.Object\n     * @private\n     */\n    _hoveredTarget: null,\n\n    /**\n     * hold the list of nested targets hovered\n     * @type fabric.Object[]\n     * @private\n     */\n    _hoveredTargets: [],\n\n    /**\n     * @private\n     */\n    _initInteractive: function() {\n      this._currentTransform = null;\n      this._groupSelector = null;\n      this._initWrapperElement();\n      this._createUpperCanvas();\n      this._initEventListeners();\n\n      this._initRetinaScaling();\n\n      this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);\n\n      this.calcOffset();\n    },\n\n    /**\n     * Divides objects in two groups, one to render immediately\n     * and one to render as activeGroup.\n     * @return {Array} objects to render immediately and pushes the other in the activeGroup.\n     */\n    _chooseObjectsToRender: function() {\n      var activeObjects = this.getActiveObjects(),\n          object, objsToRender, activeGroupObjects;\n\n      if (activeObjects.length > 0 && !this.preserveObjectStacking) {\n        objsToRender = [];\n        activeGroupObjects = [];\n        for (var i = 0, length = this._objects.length; i < length; i++) {\n          object = this._objects[i];\n          if (activeObjects.indexOf(object) === -1 ) {\n            objsToRender.push(object);\n          }\n          else {\n            activeGroupObjects.push(object);\n          }\n        }\n        if (activeObjects.length > 1) {\n          this._activeObject._objects = activeGroupObjects;\n        }\n        objsToRender.push.apply(objsToRender, activeGroupObjects);\n      }\n      else {\n        objsToRender = this._objects;\n      }\n      return objsToRender;\n    },\n\n    /**\n     * Renders both the top canvas and the secondary container canvas.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      if (this.contextTopDirty && !this._groupSelector && !this.isDrawingMode) {\n        this.clearContext(this.contextTop);\n        this.contextTopDirty = false;\n      }\n      if (this.hasLostContext) {\n        this.renderTopLayer(this.contextTop);\n      }\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._chooseObjectsToRender());\n      return this;\n    },\n\n    renderTopLayer: function(ctx) {\n      ctx.save();\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this.freeDrawingBrush && this.freeDrawingBrush._render();\n        this.contextTopDirty = true;\n      }\n      // we render the top context - last object\n      if (this.selection && this._groupSelector) {\n        this._drawSelection(ctx);\n        this.contextTopDirty = true;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * Method to render only the top canvas.\n     * Also used to render the group selection box.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    renderTop: function () {\n      var ctx = this.contextTop;\n      this.clearContext(ctx);\n      this.renderTopLayer(ctx);\n      this.fire('after:render');\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _normalizePointer: function (object, pointer) {\n      var m = object.calcTransformMatrix(),\n          invertedM = fabric.util.invertTransform(m),\n          vptPointer = this.restorePointerVpt(pointer);\n      return fabric.util.transformPoint(vptPointer, invertedM);\n    },\n\n    /**\n     * Returns true if object is transparent at a certain location\n     * @param {fabric.Object} target Object to check\n     * @param {Number} x Left coordinate\n     * @param {Number} y Top coordinate\n     * @return {Boolean}\n     */\n    isTargetTransparent: function (target, x, y) {\n      // in case the target is the activeObject, we cannot execute this optimization\n      // because we need to draw controls too.\n      if (target.shouldCache() && target._cacheCanvas && target !== this._activeObject) {\n        var normalizedPointer = this._normalizePointer(target, {x: x, y: y}),\n            targetRelativeX = Math.max(target.cacheTranslationX + (normalizedPointer.x * target.zoomX), 0),\n            targetRelativeY = Math.max(target.cacheTranslationY + (normalizedPointer.y * target.zoomY), 0);\n\n        var isTransparent = fabric.util.isTransparent(\n          target._cacheContext, Math.round(targetRelativeX), Math.round(targetRelativeY), this.targetFindTolerance);\n\n        return isTransparent;\n      }\n\n      var ctx = this.contextCache,\n          originalColor = target.selectionBackgroundColor, v = this.viewportTransform;\n\n      target.selectionBackgroundColor = '';\n\n      this.clearContext(ctx);\n\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      target.render(ctx);\n      ctx.restore();\n\n      target.selectionBackgroundColor = originalColor;\n\n      var isTransparent = fabric.util.isTransparent(\n        ctx, x, y, this.targetFindTolerance);\n\n      return isTransparent;\n    },\n\n    /**\n     * takes an event and determines if selection key has been pressed\n     * @private\n     * @param {Event} e Event object\n     */\n    _isSelectionKeyPressed: function(e) {\n      var selectionKeyPressed = false;\n\n      if (Object.prototype.toString.call(this.selectionKey) === '[object Array]') {\n        selectionKeyPressed = !!this.selectionKey.find(function(key) { return e[key] === true; });\n      }\n      else {\n        selectionKeyPressed = e[this.selectionKey];\n      }\n\n      return selectionKeyPressed;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _shouldClearSelection: function (e, target) {\n      var activeObjects = this.getActiveObjects(),\n          activeObject = this._activeObject;\n\n      return (\n        !target\n        ||\n        (target &&\n          activeObject &&\n          activeObjects.length > 1 &&\n          activeObjects.indexOf(target) === -1 &&\n          activeObject !== target &&\n          !this._isSelectionKeyPressed(e))\n        ||\n        (target && !target.evented)\n        ||\n        (target &&\n          !target.selectable &&\n          activeObject &&\n          activeObject !== target)\n      );\n    },\n\n    /**\n     * centeredScaling from object can't override centeredScaling from canvas.\n     * this should be fixed, since object setting should take precedence over canvas.\n     * also this should be something that will be migrated in the control properties.\n     * as ability to define the origin of the transformation that the control provide.\n     * @private\n     * @param {fabric.Object} target\n     * @param {String} action\n     * @param {Boolean} altKey\n     */\n    _shouldCenterTransform: function (target, action, altKey) {\n      if (!target) {\n        return;\n      }\n\n      var centerTransform;\n\n      if (action === 'scale' || action === 'scaleX' || action === 'scaleY' || action === 'resizing') {\n        centerTransform = this.centeredScaling || target.centeredScaling;\n      }\n      else if (action === 'rotate') {\n        centerTransform = this.centeredRotation || target.centeredRotation;\n      }\n\n      return centerTransform ? !altKey : altKey;\n    },\n\n    /**\n     * should disappear before release 4.0\n     * @private\n     */\n    _getOriginFromCorner: function(target, corner) {\n      var origin = {\n        x: target.originX,\n        y: target.originY\n      };\n\n      if (corner === 'ml' || corner === 'tl' || corner === 'bl') {\n        origin.x = 'right';\n      }\n      else if (corner === 'mr' || corner === 'tr' || corner === 'br') {\n        origin.x = 'left';\n      }\n\n      if (corner === 'tl' || corner === 'mt' || corner === 'tr') {\n        origin.y = 'bottom';\n      }\n      else if (corner === 'bl' || corner === 'mb' || corner === 'br') {\n        origin.y = 'top';\n      }\n      return origin;\n    },\n\n    /**\n     * @private\n     * @param {Boolean} alreadySelected true if target is already selected\n     * @param {String} corner a string representing the corner ml, mr, tl ...\n     * @param {Event} e Event object\n     * @param {fabric.Object} [target] inserted back to help overriding. Unused\n     */\n    _getActionFromCorner: function(alreadySelected, corner, e, target) {\n      if (!corner || !alreadySelected) {\n        return 'drag';\n      }\n      var control = target.controls[corner];\n      return control.getActionName(e, control, target);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _setupCurrentTransform: function (e, target, alreadySelected) {\n      if (!target) {\n        return;\n      }\n\n      var pointer = this.getPointer(e), corner = target.__corner,\n          control = target.controls[corner],\n          actionHandler = (alreadySelected && corner) ?\n            control.getActionHandler(e, target, control) : fabric.controlsUtils.dragHandler,\n          action = this._getActionFromCorner(alreadySelected, corner, e, target),\n          origin = this._getOriginFromCorner(target, corner),\n          altKey = e[this.centeredKey],\n          transform = {\n            target: target,\n            action: action,\n            actionHandler: actionHandler,\n            corner: corner,\n            scaleX: target.scaleX,\n            scaleY: target.scaleY,\n            skewX: target.skewX,\n            skewY: target.skewY,\n            // used by transation\n            offsetX: pointer.x - target.left,\n            offsetY: pointer.y - target.top,\n            originX: origin.x,\n            originY: origin.y,\n            ex: pointer.x,\n            ey: pointer.y,\n            lastX: pointer.x,\n            lastY: pointer.y,\n            // unsure they are useful anymore.\n            // left: target.left,\n            // top: target.top,\n            theta: degreesToRadians(target.angle),\n            // end of unsure\n            width: target.width * target.scaleX,\n            shiftKey: e.shiftKey,\n            altKey: altKey,\n            original: fabric.util.saveObjectTransform(target),\n          };\n\n      if (this._shouldCenterTransform(target, action, altKey)) {\n        transform.originX = 'center';\n        transform.originY = 'center';\n      }\n      transform.original.originX = origin.x;\n      transform.original.originY = origin.y;\n      this._currentTransform = transform;\n      this._beforeTransform(e);\n    },\n\n    /**\n     * Set the cursor type of the canvas element\n     * @param {String} value Cursor type of the canvas element.\n     * @see http://www.w3.org/TR/css3-ui/#cursor\n     */\n    setCursor: function (value) {\n      this.upperCanvasEl.style.cursor = value;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx to draw the selection on\n     */\n    _drawSelection: function (ctx) {\n      var groupSelector = this._groupSelector,\n          left = groupSelector.left,\n          top = groupSelector.top,\n          aleft = abs(left),\n          atop = abs(top);\n\n      if (this.selectionColor) {\n        ctx.fillStyle = this.selectionColor;\n\n        ctx.fillRect(\n          groupSelector.ex - ((left > 0) ? 0 : -left),\n          groupSelector.ey - ((top > 0) ? 0 : -top),\n          aleft,\n          atop\n        );\n      }\n\n      if (!this.selectionLineWidth || !this.selectionBorderColor) {\n        return;\n      }\n      ctx.lineWidth = this.selectionLineWidth;\n      ctx.strokeStyle = this.selectionBorderColor;\n\n      // selection border\n      if (this.selectionDashArray.length > 1 && !supportLineDash) {\n\n        var px = groupSelector.ex + STROKE_OFFSET - ((left > 0) ? 0 : aleft),\n            py = groupSelector.ey + STROKE_OFFSET - ((top > 0) ? 0 : atop);\n\n        ctx.beginPath();\n\n        fabric.util.drawDashedLine(ctx, px, py, px + aleft, py, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px, py + atop - 1, px + aleft, py + atop - 1, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px, py, px, py + atop, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px + aleft - 1, py, px + aleft - 1, py + atop, this.selectionDashArray);\n\n        ctx.closePath();\n        ctx.stroke();\n      }\n      else {\n        fabric.Object.prototype._setLineDash.call(this, ctx, this.selectionDashArray);\n        ctx.strokeRect(\n          groupSelector.ex + STROKE_OFFSET - ((left > 0) ? 0 : aleft),\n          groupSelector.ey + STROKE_OFFSET - ((top > 0) ? 0 : atop),\n          aleft,\n          atop\n        );\n      }\n    },\n\n    /**\n     * Method that determines what object we are clicking on\n     * the skipGroup parameter is for internal use, is needed for shift+click action\n     * 11/09/2018 TODO: would be cool if findTarget could discern between being a full target\n     * or the outside part of the corner.\n     * @param {Event} e mouse event\n     * @param {Boolean} skipGroup when true, activeGroup is skipped and only objects are traversed through\n     * @return {fabric.Object} the target found\n     */\n    findTarget: function (e, skipGroup) {\n      if (this.skipTargetFind) {\n        return;\n      }\n\n      var ignoreZoom = true,\n          pointer = this.getPointer(e, ignoreZoom),\n          activeObject = this._activeObject,\n          aObjects = this.getActiveObjects(),\n          activeTarget, activeTargetSubs,\n          isTouch = isTouchEvent(e),\n          shouldLookForActive = (aObjects.length > 1 && !skipGroup) || aObjects.length === 1;\n\n      // first check current group (if one exists)\n      // active group does not check sub targets like normal groups.\n      // if active group just exits.\n      this.targets = [];\n\n      // if we hit the corner of an activeObject, let's return that.\n      if (shouldLookForActive && activeObject._findTargetCorner(pointer, isTouch)) {\n        return activeObject;\n      }\n      if (aObjects.length > 1 && !skipGroup && activeObject === this._searchPossibleTargets([activeObject], pointer)) {\n        return activeObject;\n      }\n      if (aObjects.length === 1 &&\n        activeObject === this._searchPossibleTargets([activeObject], pointer)) {\n        if (!this.preserveObjectStacking) {\n          return activeObject;\n        }\n        else {\n          activeTarget = activeObject;\n          activeTargetSubs = this.targets;\n          this.targets = [];\n        }\n      }\n      var target = this._searchPossibleTargets(this._objects, pointer);\n      if (e[this.altSelectionKey] && target && activeTarget && target !== activeTarget) {\n        target = activeTarget;\n        this.targets = activeTargetSubs;\n      }\n      return target;\n    },\n\n    /**\n     * Checks point is inside the object.\n     * @param {Object} [pointer] x,y object of point coordinates we want to check.\n     * @param {fabric.Object} obj Object to test against\n     * @param {Object} [globalPointer] x,y object of point coordinates relative to canvas used to search per pixel target.\n     * @return {Boolean} true if point is contained within an area of given object\n     * @private\n     */\n    _checkTarget: function(pointer, obj, globalPointer) {\n      if (obj &&\n          obj.visible &&\n          obj.evented &&\n          // http://www.geog.ubc.ca/courses/klink/gis.notes/ncgia/u32.html\n          // http://idav.ucdavis.edu/~okreylos/TAship/Spring2000/PointInPolygon.html\n          obj.containsPoint(pointer)\n      ) {\n        if ((this.perPixelTargetFind || obj.perPixelTargetFind) && !obj.isEditing) {\n          var isTransparent = this.isTargetTransparent(obj, globalPointer.x, globalPointer.y);\n          if (!isTransparent) {\n            return true;\n          }\n        }\n        else {\n          return true;\n        }\n      }\n    },\n\n    /**\n     * Function used to search inside objects an object that contains pointer in bounding box or that contains pointerOnCanvas when painted\n     * @param {Array} [objects] objects array to look into\n     * @param {Object} [pointer] x,y object of point coordinates we want to check.\n     * @return {fabric.Object} object that contains pointer\n     * @private\n     */\n    _searchPossibleTargets: function(objects, pointer) {\n      // Cache all targets where their bounding box contains point.\n      var target, i = objects.length, subTarget;\n      // Do not check for currently grouped objects, since we check the parent group itself.\n      // until we call this function specifically to search inside the activeGroup\n      while (i--) {\n        var objToCheck = objects[i];\n        var pointerToUse = objToCheck.group ?\n          this._normalizePointer(objToCheck.group, pointer) : pointer;\n        if (this._checkTarget(pointerToUse, objToCheck, pointer)) {\n          target = objects[i];\n          if (target.subTargetCheck && target instanceof fabric.Group) {\n            subTarget = this._searchPossibleTargets(target._objects, pointer);\n            subTarget && this.targets.push(subTarget);\n          }\n          break;\n        }\n      }\n      return target;\n    },\n\n    /**\n     * Returns pointer coordinates without the effect of the viewport\n     * @param {Object} pointer with \"x\" and \"y\" number values\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    restorePointerVpt: function(pointer) {\n      return fabric.util.transformPoint(\n        pointer,\n        fabric.util.invertTransform(this.viewportTransform)\n      );\n    },\n\n    /**\n     * Returns pointer coordinates relative to canvas.\n     * Can return coordinates with or without viewportTransform.\n     * ignoreZoom false gives back coordinates that represent\n     * the point clicked on canvas element.\n     * ignoreZoom true gives back coordinates after being processed\n     * by the viewportTransform ( sort of coordinates of what is displayed\n     * on the canvas where you are clicking.\n     * ignoreZoom true = HTMLElement coordinates relative to top,left\n     * ignoreZoom false, default = fabric space coordinates, the same used for shape position\n     * To interact with your shapes top and left you want to use ignoreZoom true\n     * most of the time, while ignoreZoom false will give you coordinates\n     * compatible with the object.oCoords system.\n     * of the time.\n     * @param {Event} e\n     * @param {Boolean} ignoreZoom\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    getPointer: function (e, ignoreZoom) {\n      // return cached values if we are in the event processing chain\n      if (this._absolutePointer && !ignoreZoom) {\n        return this._absolutePointer;\n      }\n      if (this._pointer && ignoreZoom) {\n        return this._pointer;\n      }\n\n      var pointer = getPointer(e),\n          upperCanvasEl = this.upperCanvasEl,\n          bounds = upperCanvasEl.getBoundingClientRect(),\n          boundsWidth = bounds.width || 0,\n          boundsHeight = bounds.height || 0,\n          cssScale;\n\n      if (!boundsWidth || !boundsHeight ) {\n        if ('top' in bounds && 'bottom' in bounds) {\n          boundsHeight = Math.abs( bounds.top - bounds.bottom );\n        }\n        if ('right' in bounds && 'left' in bounds) {\n          boundsWidth = Math.abs( bounds.right - bounds.left );\n        }\n      }\n\n      this.calcOffset();\n      pointer.x = pointer.x - this._offset.left;\n      pointer.y = pointer.y - this._offset.top;\n      if (!ignoreZoom) {\n        pointer = this.restorePointerVpt(pointer);\n      }\n\n      var retinaScaling = this.getRetinaScaling();\n      if (retinaScaling !== 1) {\n        pointer.x /= retinaScaling;\n        pointer.y /= retinaScaling;\n      }\n\n      if (boundsWidth === 0 || boundsHeight === 0) {\n        // If bounds are not available (i.e. not visible), do not apply scale.\n        cssScale = { width: 1, height: 1 };\n      }\n      else {\n        cssScale = {\n          width: upperCanvasEl.width / boundsWidth,\n          height: upperCanvasEl.height / boundsHeight\n        };\n      }\n\n      return {\n        x: pointer.x * cssScale.width,\n        y: pointer.y * cssScale.height\n      };\n    },\n\n    /**\n     * @private\n     * @throws {CANVAS_INIT_ERROR} If canvas can not be initialized\n     */\n    _createUpperCanvas: function () {\n      var lowerCanvasClass = this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/, ''),\n          lowerCanvasEl = this.lowerCanvasEl, upperCanvasEl = this.upperCanvasEl;\n\n      // there is no need to create a new upperCanvas element if we have already one.\n      if (upperCanvasEl) {\n        upperCanvasEl.className = '';\n      }\n      else {\n        upperCanvasEl = this._createCanvasElement();\n        this.upperCanvasEl = upperCanvasEl;\n      }\n      fabric.util.addClass(upperCanvasEl, 'upper-canvas ' + lowerCanvasClass);\n\n      this.wrapperEl.appendChild(upperCanvasEl);\n\n      this._copyCanvasStyle(lowerCanvasEl, upperCanvasEl);\n      this._applyCanvasStyle(upperCanvasEl);\n      this.contextTop = upperCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _createCacheCanvas: function () {\n      this.cacheCanvasEl = this._createCanvasElement();\n      this.cacheCanvasEl.setAttribute('width', this.width);\n      this.cacheCanvasEl.setAttribute('height', this.height);\n      this.contextCache = this.cacheCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _initWrapperElement: function () {\n      this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, 'div', {\n        'class': this.containerClass\n      });\n      fabric.util.setStyle(this.wrapperEl, {\n        width: this.width + 'px',\n        height: this.height + 'px',\n        position: 'relative'\n      });\n      fabric.util.makeElementUnselectable(this.wrapperEl);\n    },\n\n    /**\n     * @private\n     * @param {HTMLElement} element canvas element to apply styles on\n     */\n    _applyCanvasStyle: function (element) {\n      var width = this.width || element.width,\n          height = this.height || element.height;\n\n      fabric.util.setStyle(element, {\n        position: 'absolute',\n        width: width + 'px',\n        height: height + 'px',\n        left: 0,\n        top: 0,\n        'touch-action': this.allowTouchScrolling ? 'manipulation' : 'none',\n        '-ms-touch-action': this.allowTouchScrolling ? 'manipulation' : 'none'\n      });\n      element.width = width;\n      element.height = height;\n      fabric.util.makeElementUnselectable(element);\n    },\n\n    /**\n     * Copy the entire inline style from one element (fromEl) to another (toEl)\n     * @private\n     * @param {Element} fromEl Element style is copied from\n     * @param {Element} toEl Element copied style is applied to\n     */\n    _copyCanvasStyle: function (fromEl, toEl) {\n      toEl.style.cssText = fromEl.style.cssText;\n    },\n\n    /**\n     * Returns context of canvas where object selection is drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getSelectionContext: function() {\n      return this.contextTop;\n    },\n\n    /**\n     * Returns &lt;canvas> element on which object selection is drawn\n     * @return {HTMLCanvasElement}\n     */\n    getSelectionElement: function () {\n      return this.upperCanvasEl;\n    },\n\n    /**\n     * Returns currently active object\n     * @return {fabric.Object} active object\n     */\n    getActiveObject: function () {\n      return this._activeObject;\n    },\n\n    /**\n     * Returns an array with the current selected objects\n     * @return {fabric.Object} active object\n     */\n    getActiveObjects: function () {\n      var active = this._activeObject;\n      if (active) {\n        if (active.type === 'activeSelection' && active._objects) {\n          return active._objects.slice(0);\n        }\n        else {\n          return [active];\n        }\n      }\n      return [];\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      // removing active object should fire \"selection:cleared\" events\n      if (obj === this._activeObject) {\n        this.fire('before:selection:cleared', { target: obj });\n        this._discardActiveObject();\n        this.fire('selection:cleared', { target: obj });\n        obj.fire('deselected');\n      }\n      if (obj === this._hoveredTarget){\n        this._hoveredTarget = null;\n        this._hoveredTargets = [];\n      }\n      this.callSuper('_onObjectRemoved', obj);\n    },\n\n    /**\n     * @private\n     * Compares the old activeObject with the current one and fires correct events\n     * @param {fabric.Object} obj old activeObject\n     */\n    _fireSelectionEvents: function(oldObjects, e) {\n      var somethingChanged = false, objects = this.getActiveObjects(),\n          added = [], removed = [];\n      oldObjects.forEach(function(oldObject) {\n        if (objects.indexOf(oldObject) === -1) {\n          somethingChanged = true;\n          oldObject.fire('deselected', {\n            e: e,\n            target: oldObject\n          });\n          removed.push(oldObject);\n        }\n      });\n      objects.forEach(function(object) {\n        if (oldObjects.indexOf(object) === -1) {\n          somethingChanged = true;\n          object.fire('selected', {\n            e: e,\n            target: object\n          });\n          added.push(object);\n        }\n      });\n      if (oldObjects.length > 0 && objects.length > 0) {\n        somethingChanged && this.fire('selection:updated', {\n          e: e,\n          selected: added,\n          deselected: removed,\n          // added for backward compatibility\n          // deprecated\n          updated: added[0] || removed[0],\n          target: this._activeObject,\n        });\n      }\n      else if (objects.length > 0) {\n        this.fire('selection:created', {\n          e: e,\n          selected: added,\n          target: this._activeObject,\n        });\n      }\n      else if (oldObjects.length > 0) {\n        this.fire('selection:cleared', {\n          e: e,\n          deselected: removed,\n        });\n      }\n    },\n\n    /**\n     * Sets given object as the only active object on canvas\n     * @param {fabric.Object} object Object to set as an active one\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setActiveObject: function (object, e) {\n      var currentActives = this.getActiveObjects();\n      this._setActiveObject(object, e);\n      this._fireSelectionEvents(currentActives, e);\n      return this;\n    },\n\n    /**\n     * This is a private method for now.\n     * This is supposed to be equivalent to setActiveObject but without firing\n     * any event. There is commitment to have this stay this way.\n     * This is the functional part of setActiveObject.\n     * @private\n     * @param {Object} object to set as active\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {Boolean} true if the selection happened\n     */\n    _setActiveObject: function(object, e) {\n      if (this._activeObject === object) {\n        return false;\n      }\n      if (!this._discardActiveObject(e, object)) {\n        return false;\n      }\n      if (object.onSelect({ e: e })) {\n        return false;\n      }\n      this._activeObject = object;\n      return true;\n    },\n\n    /**\n     * This is a private method for now.\n     * This is supposed to be equivalent to discardActiveObject but without firing\n     * any events. There is commitment to have this stay this way.\n     * This is the functional part of discardActiveObject.\n     * @param {Event} [e] Event (passed along when firing \"object:deselected\")\n     * @param {Object} object to set as active\n     * @return {Boolean} true if the selection happened\n     * @private\n     */\n    _discardActiveObject: function(e, object) {\n      var obj = this._activeObject;\n      if (obj) {\n        // onDeselect return TRUE to cancel selection;\n        if (obj.onDeselect({ e: e, object: object })) {\n          return false;\n        }\n        this._activeObject = null;\n      }\n      return true;\n    },\n\n    /**\n     * Discards currently active object and fire events. If the function is called by fabric\n     * as a consequence of a mouse event, the event is passed as a parameter and\n     * sent to the fire function for the custom events. When used as a method the\n     * e param does not have any application.\n     * @param {event} e\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    discardActiveObject: function (e) {\n      var currentActives = this.getActiveObjects(), activeObject = this.getActiveObject();\n      if (currentActives.length) {\n        this.fire('before:selection:cleared', { target: activeObject, e: e });\n      }\n      this._discardActiveObject(e);\n      this._fireSelectionEvents(currentActives, e);\n      return this;\n    },\n\n    /**\n     * Clears a canvas element and removes all event listeners\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      var wrapper = this.wrapperEl;\n      this.removeListeners();\n      wrapper.removeChild(this.upperCanvasEl);\n      wrapper.removeChild(this.lowerCanvasEl);\n      this.contextCache = null;\n      this.contextTop = null;\n      ['upperCanvasEl', 'cacheCanvasEl'].forEach((function(element) {\n        fabric.util.cleanUpJsdomNode(this[element]);\n        this[element] = undefined;\n      }).bind(this));\n      if (wrapper.parentNode) {\n        wrapper.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl);\n      }\n      delete this.wrapperEl;\n      fabric.StaticCanvas.prototype.dispose.call(this);\n      return this;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      // this.discardActiveGroup();\n      this.discardActiveObject();\n      this.clearContext(this.contextTop);\n      return this.callSuper('clear');\n    },\n\n    /**\n     * Draws objects' controls (borders/controls)\n     * @param {CanvasRenderingContext2D} ctx Context to render controls on\n     */\n    drawControls: function(ctx) {\n      var activeObject = this._activeObject;\n\n      if (activeObject) {\n        activeObject._renderControls(ctx);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      //If the object is part of the current selection group, it should\n      //be transformed appropriately\n      //i.e. it should be serialised as it would appear if the selection group\n      //were to be destroyed.\n      var originalProperties = this._realizeGroupTransformOnObject(instance),\n          object = this.callSuper('_toObject', instance, methodName, propertiesToInclude);\n      //Undo the damage we did by changing all of its properties\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n      return object;\n    },\n\n    /**\n     * Realises an object's group transformation on it\n     * @private\n     * @param {fabric.Object} [instance] the object to transform (gets mutated)\n     * @returns the original values of instance which were changed\n     */\n    _realizeGroupTransformOnObject: function(instance) {\n      if (instance.group && instance.group.type === 'activeSelection' && this._activeObject === instance.group) {\n        var layoutProps = ['angle', 'flipX', 'flipY', 'left', 'scaleX', 'scaleY', 'skewX', 'skewY', 'top'];\n        //Copy all the positionally relevant properties across now\n        var originalValues = {};\n        layoutProps.forEach(function(prop) {\n          originalValues[prop] = instance[prop];\n        });\n        fabric.util.addTransformToObject(instance, this._activeObject.calcOwnMatrix());\n        return originalValues;\n      }\n      else {\n        return null;\n      }\n    },\n\n    /**\n     * Restores the changed properties of instance\n     * @private\n     * @param {fabric.Object} [instance] the object to un-transform (gets mutated)\n     * @param {Object} [originalValues] the original values of instance, as returned by _realizeGroupTransformOnObject\n     */\n    _unwindGroupTransformOnObject: function(instance, originalValues) {\n      if (originalValues) {\n        instance.set(originalValues);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      //If the object is in a selection group, simulate what would happen to that\n      //object when the group is deselected\n      var originalProperties = this._realizeGroupTransformOnObject(instance);\n      this.callSuper('_setSVGObject', markup, instance, reviver);\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n    },\n\n    setViewportTransform: function (vpt) {\n      if (this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing) {\n        this._activeObject.clearContextTop();\n      }\n      fabric.StaticCanvas.prototype.setViewportTransform.call(this, vpt);\n    }\n  });\n\n  // copying static properties manually to work around Opera's bug,\n  // where \"prototype\" property is enumerable and overrides existing prototype\n  for (var prop in fabric.StaticCanvas) {\n    if (prop !== 'prototype') {\n      fabric.Canvas[prop] = fabric.StaticCanvas[prop];\n    }\n  }\n})();\n\n\n(function() {\n\n  var addListener = fabric.util.addListener,\n      removeListener = fabric.util.removeListener,\n      RIGHT_CLICK = 3, MIDDLE_CLICK = 2, LEFT_CLICK = 1,\n      addEventOptions = { passive: false };\n\n  function checkClick(e, value) {\n    return e.button && (e.button === value - 1);\n  }\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Contains the id of the touch event that owns the fabric transform\n     * @type Number\n     * @private\n     */\n    mainTouchId: null,\n\n    /**\n     * Adds mouse listeners to canvas\n     * @private\n     */\n    _initEventListeners: function () {\n      // in case we initialized the class twice. This should not happen normally\n      // but in some kind of applications where the canvas element may be changed\n      // this is a workaround to having double listeners.\n      this.removeListeners();\n      this._bindEvents();\n      this.addOrRemove(addListener, 'add');\n    },\n\n    /**\n     * return an event prefix pointer or mouse.\n     * @private\n     */\n    _getEventPrefix: function () {\n      return this.enablePointerEvents ? 'pointer' : 'mouse';\n    },\n\n    addOrRemove: function(functor, eventjsFunctor) {\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      functor(fabric.window, 'resize', this._onResize);\n      functor(canvasElement, eventTypePrefix + 'down', this._onMouseDown);\n      functor(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      functor(canvasElement, eventTypePrefix + 'out', this._onMouseOut);\n      functor(canvasElement, eventTypePrefix + 'enter', this._onMouseEnter);\n      functor(canvasElement, 'wheel', this._onMouseWheel);\n      functor(canvasElement, 'contextmenu', this._onContextMenu);\n      functor(canvasElement, 'dblclick', this._onDoubleClick);\n      functor(canvasElement, 'dragover', this._onDragOver);\n      functor(canvasElement, 'dragenter', this._onDragEnter);\n      functor(canvasElement, 'dragleave', this._onDragLeave);\n      functor(canvasElement, 'drop', this._onDrop);\n      if (!this.enablePointerEvents) {\n        functor(canvasElement, 'touchstart', this._onTouchStart, addEventOptions);\n      }\n      if (typeof eventjs !== 'undefined' && eventjsFunctor in eventjs) {\n        eventjs[eventjsFunctor](canvasElement, 'gesture', this._onGesture);\n        eventjs[eventjsFunctor](canvasElement, 'drag', this._onDrag);\n        eventjs[eventjsFunctor](canvasElement, 'orientation', this._onOrientationChange);\n        eventjs[eventjsFunctor](canvasElement, 'shake', this._onShake);\n        eventjs[eventjsFunctor](canvasElement, 'longpress', this._onLongPress);\n      }\n    },\n\n    /**\n     * Removes all event listeners\n     */\n    removeListeners: function() {\n      this.addOrRemove(removeListener, 'remove');\n      // if you dispose on a mouseDown, before mouse up, you need to clean document to...\n      var eventTypePrefix = this._getEventPrefix();\n      removeListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n      removeListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      removeListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n    },\n\n    /**\n     * @private\n     */\n    _bindEvents: function() {\n      if (this.eventsBound) {\n        // for any reason we pass here twice we do not want to bind events twice.\n        return;\n      }\n      this._onMouseDown = this._onMouseDown.bind(this);\n      this._onTouchStart = this._onTouchStart.bind(this);\n      this._onMouseMove = this._onMouseMove.bind(this);\n      this._onMouseUp = this._onMouseUp.bind(this);\n      this._onTouchEnd = this._onTouchEnd.bind(this);\n      this._onResize = this._onResize.bind(this);\n      this._onGesture = this._onGesture.bind(this);\n      this._onDrag = this._onDrag.bind(this);\n      this._onShake = this._onShake.bind(this);\n      this._onLongPress = this._onLongPress.bind(this);\n      this._onOrientationChange = this._onOrientationChange.bind(this);\n      this._onMouseWheel = this._onMouseWheel.bind(this);\n      this._onMouseOut = this._onMouseOut.bind(this);\n      this._onMouseEnter = this._onMouseEnter.bind(this);\n      this._onContextMenu = this._onContextMenu.bind(this);\n      this._onDoubleClick = this._onDoubleClick.bind(this);\n      this._onDragOver = this._onDragOver.bind(this);\n      this._onDragEnter = this._simpleEventHandler.bind(this, 'dragenter');\n      this._onDragLeave = this._simpleEventHandler.bind(this, 'dragleave');\n      this._onDrop = this._simpleEventHandler.bind(this, 'drop');\n      this.eventsBound = true;\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js gesture\n     * @param {Event} [self] Inner Event object\n     */\n    _onGesture: function(e, self) {\n      this.__onTransformGesture && this.__onTransformGesture(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js drag\n     * @param {Event} [self] Inner Event object\n     */\n    _onDrag: function(e, self) {\n      this.__onDrag && this.__onDrag(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on wheel event\n     */\n    _onMouseWheel: function(e) {\n      this.__onMouseWheel(e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseOut: function(e) {\n      var target = this._hoveredTarget;\n      this.fire('mouse:out', { target: target, e: e });\n      this._hoveredTarget = null;\n      target && target.fire('mouseout', { e: e });\n\n      var _this = this;\n      this._hoveredTargets.forEach(function(_target){\n        _this.fire('mouse:out', { target: target, e: e });\n        _target && target.fire('mouseout', { e: e });\n      });\n      this._hoveredTargets = [];\n\n      if (this._iTextInstances) {\n        this._iTextInstances.forEach(function(obj) {\n          if (obj.isEditing) {\n            obj.hiddenTextarea.focus();\n          }\n        });\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseenter\n     */\n    _onMouseEnter: function(e) {\n      // This find target and consequent 'mouse:over' is used to\n      // clear old instances on hovered target.\n      // calling findTarget has the side effect of killing target.__corner.\n      // as a short term fix we are not firing this if we are currently transforming.\n      // as a long term fix we need to separate the action of finding a target with the\n      // side effects we added to it.\n      if (!this._currentTransform && !this.findTarget(e)) {\n        this.fire('mouse:over', { target: null, e: e });\n        this._hoveredTarget = null;\n        this._hoveredTargets = [];\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js orientation change\n     * @param {Event} [self] Inner Event object\n     */\n    _onOrientationChange: function(e, self) {\n      this.__onOrientationChange && this.__onOrientationChange(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onShake: function(e, self) {\n      this.__onShake && this.__onShake(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onLongPress: function(e, self) {\n      this.__onLongPress && this.__onLongPress(e, self);\n    },\n\n    /**\n     * prevent default to allow drop event to be fired\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     */\n    _onDragOver: function(e) {\n      e.preventDefault();\n      var target = this._simpleEventHandler('dragover', e);\n      this._fireEnterLeaveEvents(target, e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onContextMenu: function (e) {\n      if (this.stopContextMenu) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onDoubleClick: function (e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'dblclick');\n      this._resetTransformEventData(e);\n    },\n\n    /**\n     * Return a the id of an event.\n     * returns either the pointerId or the identifier or 0 for the mouse event\n     * @private\n     * @param {Event} evt Event object\n     */\n    getPointerId: function(evt) {\n      var changedTouches = evt.changedTouches;\n\n      if (changedTouches) {\n        return changedTouches[0] && changedTouches[0].identifier;\n      }\n\n      if (this.enablePointerEvents) {\n        return evt.pointerId;\n      }\n\n      return -1;\n    },\n\n    /**\n     * Determines if an event has the id of the event that is considered main\n     * @private\n     * @param {evt} event Event object\n     */\n    _isMainEvent: function(evt) {\n      if (evt.isPrimary === true) {\n        return true;\n      }\n      if (evt.isPrimary === false) {\n        return false;\n      }\n      if (evt.type === 'touchend' && evt.touches.length === 0) {\n        return true;\n      }\n      if (evt.changedTouches) {\n        return evt.changedTouches[0].identifier === this.mainTouchId;\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onTouchStart: function(e) {\n      e.preventDefault();\n      if (this.mainTouchId === null) {\n        this.mainTouchId = this.getPointerId(e);\n      }\n      this.__onMouseDown(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      addListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      addListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n      // Unbind mousedown to prevent double triggers from touch devices\n      removeListener(canvasElement, eventTypePrefix + 'down', this._onMouseDown);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDown: function (e) {\n      this.__onMouseDown(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      removeListener(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      addListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n      addListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onTouchEnd: function(e) {\n      if (e.touches.length > 0) {\n        // if there are still touches stop here\n        return;\n      }\n      this.__onMouseUp(e);\n      this._resetTransformEventData();\n      this.mainTouchId = null;\n      var eventTypePrefix = this._getEventPrefix();\n      removeListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n      var _this = this;\n      if (this._willAddMouseDown) {\n        clearTimeout(this._willAddMouseDown);\n      }\n      this._willAddMouseDown = setTimeout(function() {\n        // Wait 400ms before rebinding mousedown to prevent double triggers\n        // from touch devices\n        addListener(_this.upperCanvasEl, eventTypePrefix + 'down', _this._onMouseDown);\n        _this._willAddMouseDown = 0;\n      }, 400);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUp: function (e) {\n      this.__onMouseUp(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      if (this._isMainEvent(e)) {\n        removeListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n        removeListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n        addListener(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMove: function (e) {\n      !this.allowTouchScrolling && e.preventDefault && e.preventDefault();\n      this.__onMouseMove(e);\n    },\n\n    /**\n     * @private\n     */\n    _onResize: function () {\n      this.calcOffset();\n    },\n\n    /**\n     * Decides whether the canvas should be redrawn in mouseup and mousedown events.\n     * @private\n     * @param {Object} target\n     */\n    _shouldRender: function(target) {\n      var activeObject = this._activeObject;\n\n      if (\n        !!activeObject !== !!target ||\n        (activeObject && target && (activeObject !== target))\n      ) {\n        // this covers: switch of target, from target to no target, selection of target\n        // multiSelection with key and mouse\n        return true;\n      }\n      else if (activeObject && activeObject.isEditing) {\n        // if we mouse up/down over a editing textbox a cursor change,\n        // there is no need to re render\n        return false;\n      }\n      return false;\n    },\n\n    /**\n     * Method that defines the actions when mouse is released on canvas.\n     * The method resets the currentTransform parameters, store the image corner\n     * position in the image object and render the canvas on top.\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseUp: function (e) {\n      var target, transform = this._currentTransform,\n          groupSelector = this._groupSelector, shouldRender = false,\n          isClick = (!groupSelector || (groupSelector.left === 0 && groupSelector.top === 0));\n      this._cacheTransformEventData(e);\n      target = this._target;\n      this._handleEvent(e, 'up:before');\n      // if right/middle click just fire events and return\n      // target undefined will make the _handleEvent search the target\n      if (checkClick(e, RIGHT_CLICK)) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'up', RIGHT_CLICK, isClick);\n        }\n        return;\n      }\n\n      if (checkClick(e, MIDDLE_CLICK)) {\n        if (this.fireMiddleClick) {\n          this._handleEvent(e, 'up', MIDDLE_CLICK, isClick);\n        }\n        this._resetTransformEventData();\n        return;\n      }\n\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this._onMouseUpInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n      if (transform) {\n        this._finalizeCurrentTransform(e);\n        shouldRender = transform.actionPerformed;\n      }\n      if (!isClick) {\n        var targetWasActive = target === this._activeObject;\n        this._maybeGroupObjects(e);\n        if (!shouldRender) {\n          shouldRender = (\n            this._shouldRender(target) ||\n            (!targetWasActive && target === this._activeObject)\n          );\n        }\n      }\n      if (target) {\n        if (target.selectable && target !== this._activeObject && target.activeOn === 'up') {\n          this.setActiveObject(target, e);\n          shouldRender = true;\n        }\n        else {\n          var corner = target._findTargetCorner(\n            this.getPointer(e, true),\n            fabric.util.isTouchEvent(e)\n          );\n          var control = target.controls[corner],\n              mouseUpHandler = control && control.getMouseUpHandler(e, target, control);\n          if (mouseUpHandler) {\n            var pointer = this.getPointer(e);\n            mouseUpHandler(e, transform, pointer.x, pointer.y);\n          }\n        }\n        target.isMoving = false;\n      }\n      this._setCursorFromEvent(e, target);\n      this._handleEvent(e, 'up', LEFT_CLICK, isClick);\n      this._groupSelector = null;\n      this._currentTransform = null;\n      // reset the target information about which corner is selected\n      target && (target.__corner = 0);\n      if (shouldRender) {\n        this.requestRenderAll();\n      }\n      else if (!isClick) {\n        this.renderTop();\n      }\n    },\n\n    /**\n     * @private\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @return {Fabric.Object} target return the the target found, for internal reasons.\n     */\n    _simpleEventHandler: function(eventType, e) {\n      var target = this.findTarget(e),\n          targets = this.targets,\n          options = {\n            e: e,\n            target: target,\n            subTargets: targets,\n          };\n      this.fire(eventType, options);\n      target && target.fire(eventType, options);\n      if (!targets) {\n        return target;\n      }\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire(eventType, options);\n      }\n      return target;\n    },\n\n    /**\n     * @private\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @param {fabric.Object} targetObj receiving event\n     * @param {Number} [button] button used in the event 1 = left, 2 = middle, 3 = right\n     * @param {Boolean} isClick for left button only, indicates that the mouse up happened without move.\n     */\n    _handleEvent: function(e, eventType, button, isClick) {\n      var target = this._target,\n          targets = this.targets || [],\n          options = {\n            e: e,\n            target: target,\n            subTargets: targets,\n            button: button || LEFT_CLICK,\n            isClick: isClick || false,\n            pointer: this._pointer,\n            absolutePointer: this._absolutePointer,\n            transform: this._currentTransform\n          };\n      if (eventType === 'up') {\n        options.currentTarget = this.findTarget(e);\n        options.currentSubTargets = this.targets;\n      }\n      this.fire('mouse:' + eventType, options);\n      target && target.fire('mouse' + eventType, options);\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire('mouse' + eventType, options);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e send the mouse event that generate the finalize down, so it can be used in the event\n     */\n    _finalizeCurrentTransform: function(e) {\n\n      var transform = this._currentTransform,\n          target = transform.target,\n          eventName,\n          options = {\n            e: e,\n            target: target,\n            transform: transform,\n            action: transform.action,\n          };\n\n      if (target._scaling) {\n        target._scaling = false;\n      }\n\n      target.setCoords();\n\n      if (transform.actionPerformed || (this.stateful && target.hasStateChanged())) {\n        if (transform.actionPerformed) {\n          // this is not friendly to the new control api.\n          // is deprecated.\n          eventName = this._addEventOptions(options, transform);\n          this._fire(eventName, options);\n        }\n        this._fire('modified', options);\n      }\n    },\n\n    /**\n     * Mutate option object in order to add by property and give back the event name.\n     * @private\n     * @deprecated since 4.2.0\n     * @param {Object} options to mutate\n     * @param {Object} transform to inspect action from\n     */\n    _addEventOptions: function(options, transform) {\n      // we can probably add more details at low cost\n      // scale change, rotation changes, translation changes\n      var eventName, by;\n      switch (transform.action) {\n        case 'scaleX':\n          eventName = 'scaled';\n          by = 'x';\n          break;\n        case 'scaleY':\n          eventName = 'scaled';\n          by = 'y';\n          break;\n        case 'skewX':\n          eventName = 'skewed';\n          by = 'x';\n          break;\n        case 'skewY':\n          eventName = 'skewed';\n          by = 'y';\n          break;\n        case 'scale':\n          eventName = 'scaled';\n          by = 'equally';\n          break;\n        case 'rotate':\n          eventName = 'rotated';\n          break;\n        case 'drag':\n          eventName = 'moved';\n          break;\n      }\n      options.by = by;\n      return eventName;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDownInDrawingMode: function(e) {\n      this._isCurrentlyDrawing = true;\n      if (this.getActiveObject()) {\n        this.discardActiveObject(e).requestRenderAll();\n      }\n      var pointer = this.getPointer(e);\n      this.freeDrawingBrush.onMouseDown(pointer, { e: e, pointer: pointer });\n      this._handleEvent(e, 'down');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMoveInDrawingMode: function(e) {\n      if (this._isCurrentlyDrawing) {\n        var pointer = this.getPointer(e);\n        this.freeDrawingBrush.onMouseMove(pointer, { e: e, pointer: pointer });\n      }\n      this.setCursor(this.freeDrawingCursor);\n      this._handleEvent(e, 'move');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUpInDrawingMode: function(e) {\n      var pointer = this.getPointer(e);\n      this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({ e: e, pointer: pointer });\n      this._handleEvent(e, 'up');\n    },\n\n    /**\n     * Method that defines the actions when mouse is clicked on canvas.\n     * The method inits the currentTransform parameters and renders all the\n     * canvas so the current image can be placed on the top canvas and the rest\n     * in on the container one.\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    __onMouseDown: function (e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'down:before');\n      var target = this._target;\n      // if right click just fire events\n      if (checkClick(e, RIGHT_CLICK)) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'down', RIGHT_CLICK);\n        }\n        return;\n      }\n\n      if (checkClick(e, MIDDLE_CLICK)) {\n        if (this.fireMiddleClick) {\n          this._handleEvent(e, 'down', MIDDLE_CLICK);\n        }\n        return;\n      }\n\n      if (this.isDrawingMode) {\n        this._onMouseDownInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n\n      // ignore if some object is being transformed at this moment\n      if (this._currentTransform) {\n        return;\n      }\n\n      var pointer = this._pointer;\n      // save pointer for check in __onMouseUp event\n      this._previousPointer = pointer;\n      var shouldRender = this._shouldRender(target),\n          shouldGroup = this._shouldGroup(e, target);\n      if (this._shouldClearSelection(e, target)) {\n        this.discardActiveObject(e);\n      }\n      else if (shouldGroup) {\n        this._handleGrouping(e, target);\n        target = this._activeObject;\n      }\n\n      if (this.selection && (!target ||\n        (!target.selectable && !target.isEditing && target !== this._activeObject))) {\n        this._groupSelector = {\n          ex: pointer.x,\n          ey: pointer.y,\n          top: 0,\n          left: 0\n        };\n      }\n\n      if (target) {\n        var alreadySelected = target === this._activeObject;\n        if (target.selectable && target.activeOn === 'down') {\n          this.setActiveObject(target, e);\n        }\n        var corner = target._findTargetCorner(\n          this.getPointer(e, true),\n          fabric.util.isTouchEvent(e)\n        );\n        target.__corner = corner;\n        if (target === this._activeObject && (corner || !shouldGroup)) {\n          this._setupCurrentTransform(e, target, alreadySelected);\n          var control = target.controls[corner],\n              pointer = this.getPointer(e),\n              mouseDownHandler = control && control.getMouseDownHandler(e, target, control);\n          if (mouseDownHandler) {\n            mouseDownHandler(e, this._currentTransform, pointer.x, pointer.y);\n          }\n        }\n      }\n      this._handleEvent(e, 'down');\n      // we must renderAll so that we update the visuals\n      (shouldRender || shouldGroup) && this.requestRenderAll();\n    },\n\n    /**\n     * reset cache form common information needed during event processing\n     * @private\n     */\n    _resetTransformEventData: function() {\n      this._target = null;\n      this._pointer = null;\n      this._absolutePointer = null;\n    },\n\n    /**\n     * Cache common information needed during event processing\n     * @private\n     * @param {Event} e Event object fired on event\n     */\n    _cacheTransformEventData: function(e) {\n      // reset in order to avoid stale caching\n      this._resetTransformEventData();\n      this._pointer = this.getPointer(e, true);\n      this._absolutePointer = this.restorePointerVpt(this._pointer);\n      this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(e) || null;\n    },\n\n    /**\n     * @private\n     */\n    _beforeTransform: function(e) {\n      var t = this._currentTransform;\n      this.stateful && t.target.saveState();\n      this.fire('before:transform', {\n        e: e,\n        transform: t,\n      });\n    },\n\n    /**\n     * Method that defines the actions when mouse is hovering the canvas.\n     * The currentTransform parameter will define whether the user is rotating/scaling/translating\n     * an image or neither of them (only hovering). A group selection is also possible and would cancel\n     * all any other type of action.\n     * In case of an image transformation only the top canvas will be rendered.\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    __onMouseMove: function (e) {\n      this._handleEvent(e, 'move:before');\n      this._cacheTransformEventData(e);\n      var target, pointer;\n\n      if (this.isDrawingMode) {\n        this._onMouseMoveInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n\n      var groupSelector = this._groupSelector;\n\n      // We initially clicked in an empty area, so we draw a box for multiple selection\n      if (groupSelector) {\n        pointer = this._pointer;\n\n        groupSelector.left = pointer.x - groupSelector.ex;\n        groupSelector.top = pointer.y - groupSelector.ey;\n\n        this.renderTop();\n      }\n      else if (!this._currentTransform) {\n        target = this.findTarget(e) || null;\n        this._setCursorFromEvent(e, target);\n        this._fireOverOutEvents(target, e);\n      }\n      else {\n        this._transformObject(e);\n      }\n      this._handleEvent(e, 'move');\n      this._resetTransformEventData();\n    },\n\n    /**\n     * Manage the mouseout, mouseover events for the fabric object on the canvas\n     * @param {Fabric.Object} target the target where the target from the mousemove event\n     * @param {Event} e Event object fired on mousemove\n     * @private\n     */\n    _fireOverOutEvents: function(target, e) {\n      var _hoveredTarget = this._hoveredTarget,\n          _hoveredTargets = this._hoveredTargets, targets = this.targets,\n          length = Math.max(_hoveredTargets.length, targets.length);\n\n      this.fireSyntheticInOutEvents(target, e, {\n        oldTarget: _hoveredTarget,\n        evtOut: 'mouseout',\n        canvasEvtOut: 'mouse:out',\n        evtIn: 'mouseover',\n        canvasEvtIn: 'mouse:over',\n      });\n      for (var i = 0; i < length; i++){\n        this.fireSyntheticInOutEvents(targets[i], e, {\n          oldTarget: _hoveredTargets[i],\n          evtOut: 'mouseout',\n          evtIn: 'mouseover',\n        });\n      }\n      this._hoveredTarget = target;\n      this._hoveredTargets = this.targets.concat();\n    },\n\n    /**\n     * Manage the dragEnter, dragLeave events for the fabric objects on the canvas\n     * @param {Fabric.Object} target the target where the target from the onDrag event\n     * @param {Event} e Event object fired on ondrag\n     * @private\n     */\n    _fireEnterLeaveEvents: function(target, e) {\n      var _draggedoverTarget = this._draggedoverTarget,\n          _hoveredTargets = this._hoveredTargets, targets = this.targets,\n          length = Math.max(_hoveredTargets.length, targets.length);\n\n      this.fireSyntheticInOutEvents(target, e, {\n        oldTarget: _draggedoverTarget,\n        evtOut: 'dragleave',\n        evtIn: 'dragenter',\n      });\n      for (var i = 0; i < length; i++) {\n        this.fireSyntheticInOutEvents(targets[i], e, {\n          oldTarget: _hoveredTargets[i],\n          evtOut: 'dragleave',\n          evtIn: 'dragenter',\n        });\n      }\n      this._draggedoverTarget = target;\n    },\n\n    /**\n     * Manage the synthetic in/out events for the fabric objects on the canvas\n     * @param {Fabric.Object} target the target where the target from the supported events\n     * @param {Event} e Event object fired\n     * @param {Object} config configuration for the function to work\n     * @param {String} config.targetName property on the canvas where the old target is stored\n     * @param {String} [config.canvasEvtOut] name of the event to fire at canvas level for out\n     * @param {String} config.evtOut name of the event to fire for out\n     * @param {String} [config.canvasEvtIn] name of the event to fire at canvas level for in\n     * @param {String} config.evtIn name of the event to fire for in\n     * @private\n     */\n    fireSyntheticInOutEvents: function(target, e, config) {\n      var inOpt, outOpt, oldTarget = config.oldTarget, outFires, inFires,\n          targetChanged = oldTarget !== target, canvasEvtIn = config.canvasEvtIn, canvasEvtOut = config.canvasEvtOut;\n      if (targetChanged) {\n        inOpt = { e: e, target: target, previousTarget: oldTarget };\n        outOpt = { e: e, target: oldTarget, nextTarget: target };\n      }\n      inFires = target && targetChanged;\n      outFires = oldTarget && targetChanged;\n      if (outFires) {\n        canvasEvtOut && this.fire(canvasEvtOut, outOpt);\n        oldTarget.fire(config.evtOut, outOpt);\n      }\n      if (inFires) {\n        canvasEvtIn && this.fire(canvasEvtIn, inOpt);\n        target.fire(config.evtIn, inOpt);\n      }\n    },\n\n    /**\n     * Method that defines actions when an Event Mouse Wheel\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseWheel: function(e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'wheel');\n      this._resetTransformEventData();\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event fired on mousemove\n     */\n    _transformObject: function(e) {\n      var pointer = this.getPointer(e),\n          transform = this._currentTransform;\n\n      transform.reset = false;\n      transform.shiftKey = e.shiftKey;\n      transform.altKey = e[this.centeredKey];\n\n      this._performTransformAction(e, transform, pointer);\n      transform.actionPerformed && this.requestRenderAll();\n    },\n\n    /**\n     * @private\n     */\n    _performTransformAction: function(e, transform, pointer) {\n      var x = pointer.x,\n          y = pointer.y,\n          action = transform.action,\n          actionPerformed = false,\n          actionHandler = transform.actionHandler;\n          // this object could be created from the function in the control handlers\n\n\n      if (actionHandler) {\n        actionPerformed = actionHandler(e, transform, x, y);\n      }\n      if (action === 'drag' && actionPerformed) {\n        transform.target.isMoving = true;\n        this.setCursor(transform.target.moveCursor || this.moveCursor);\n      }\n      transform.actionPerformed = transform.actionPerformed || actionPerformed;\n    },\n\n    /**\n     * @private\n     */\n    _fire: fabric.controlsUtils.fireEvent,\n\n    /**\n     * Sets the cursor depending on where the canvas is being hovered.\n     * Note: very buggy in Opera\n     * @param {Event} e Event object\n     * @param {Object} target Object that the mouse is hovering, if so.\n     */\n    _setCursorFromEvent: function (e, target) {\n      if (!target) {\n        this.setCursor(this.defaultCursor);\n        return false;\n      }\n      var hoverCursor = target.hoverCursor || this.hoverCursor,\n          activeSelection = this._activeObject && this._activeObject.type === 'activeSelection' ?\n            this._activeObject : null,\n          // only show proper corner when group selection is not active\n          corner = (!activeSelection || !activeSelection.contains(target))\n          // here we call findTargetCorner always with undefined for the touch parameter.\n          // we assume that if you are using a cursor you do not need to interact with\n          // the bigger touch area.\n                    && target._findTargetCorner(this.getPointer(e, true));\n\n      if (!corner) {\n        if (target.subTargetCheck){\n          // hoverCursor should come from top-most subTarget,\n          // so we walk the array backwards\n          this.targets.concat().reverse().map(function(_target){\n            hoverCursor = _target.hoverCursor || hoverCursor;\n          });\n        }\n        this.setCursor(hoverCursor);\n      }\n      else {\n        this.setCursor(this.getCornerCursor(corner, target, e));\n      }\n    },\n\n    /**\n     * @private\n     */\n    getCornerCursor: function(corner, target, e) {\n      var control = target.controls[corner];\n      return control.cursorStyleHandler(e, control, target);\n    }\n  });\n})();\n\n\n(function() {\n\n  var min = Math.min,\n      max = Math.max;\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     * @return {Boolean}\n     */\n    _shouldGroup: function(e, target) {\n      var activeObject = this._activeObject;\n      return activeObject && this._isSelectionKeyPressed(e) && target && target.selectable && this.selection &&\n            (activeObject !== target || activeObject.type === 'activeSelection') && !target.onSelect({ e: e });\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _handleGrouping: function (e, target) {\n      var activeObject = this._activeObject;\n      // avoid multi select when shift click on a corner\n      if (activeObject.__corner) {\n        return;\n      }\n      if (target === activeObject) {\n        // if it's a group, find target again, using activeGroup objects\n        target = this.findTarget(e, true);\n        // if even object is not found or we are on activeObjectCorner, bail out\n        if (!target || !target.selectable) {\n          return;\n        }\n      }\n      if (activeObject && activeObject.type === 'activeSelection') {\n        this._updateActiveSelection(target, e);\n      }\n      else {\n        this._createActiveSelection(target, e);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _updateActiveSelection: function(target, e) {\n      var activeSelection = this._activeObject,\n          currentActiveObjects = activeSelection._objects.slice(0);\n      if (activeSelection.contains(target)) {\n        activeSelection.removeWithUpdate(target);\n        this._hoveredTarget = target;\n        this._hoveredTargets = this.targets.concat();\n        if (activeSelection.size() === 1) {\n          // activate last remaining object\n          this._setActiveObject(activeSelection.item(0), e);\n        }\n      }\n      else {\n        activeSelection.addWithUpdate(target);\n        this._hoveredTarget = activeSelection;\n        this._hoveredTargets = this.targets.concat();\n      }\n      this._fireSelectionEvents(currentActiveObjects, e);\n    },\n\n    /**\n     * @private\n     */\n    _createActiveSelection: function(target, e) {\n      var currentActives = this.getActiveObjects(), group = this._createGroup(target);\n      this._hoveredTarget = group;\n      // ISSUE 4115: should we consider subTargets here?\n      // this._hoveredTargets = [];\n      // this._hoveredTargets = this.targets.concat();\n      this._setActiveObject(group, e);\n      this._fireSelectionEvents(currentActives, e);\n    },\n\n    /**\n     * @private\n     * @param {Object} target\n     */\n    _createGroup: function(target) {\n      var objects = this._objects,\n          isActiveLower = objects.indexOf(this._activeObject) < objects.indexOf(target),\n          groupObjects = isActiveLower\n            ? [this._activeObject, target]\n            : [target, this._activeObject];\n      this._activeObject.isEditing && this._activeObject.exitEditing();\n      return new fabric.ActiveSelection(groupObjects, {\n        canvas: this\n      });\n    },\n\n    /**\n     * @private\n     * @param {Event} e mouse event\n     */\n    _groupSelectedObjects: function (e) {\n\n      var group = this._collectObjects(e),\n          aGroup;\n\n      // do not create group for 1 element only\n      if (group.length === 1) {\n        this.setActiveObject(group[0], e);\n      }\n      else if (group.length > 1) {\n        aGroup = new fabric.ActiveSelection(group.reverse(), {\n          canvas: this\n        });\n        this.setActiveObject(aGroup, e);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _collectObjects: function(e) {\n      var group = [],\n          currentObject,\n          x1 = this._groupSelector.ex,\n          y1 = this._groupSelector.ey,\n          x2 = x1 + this._groupSelector.left,\n          y2 = y1 + this._groupSelector.top,\n          selectionX1Y1 = new fabric.Point(min(x1, x2), min(y1, y2)),\n          selectionX2Y2 = new fabric.Point(max(x1, x2), max(y1, y2)),\n          allowIntersect = !this.selectionFullyContained,\n          isClick = x1 === x2 && y1 === y2;\n      // we iterate reverse order to collect top first in case of click.\n      for (var i = this._objects.length; i--; ) {\n        currentObject = this._objects[i];\n\n        if (!currentObject || !currentObject.selectable || !currentObject.visible) {\n          continue;\n        }\n\n        if ((allowIntersect && currentObject.intersectsWithRect(selectionX1Y1, selectionX2Y2)) ||\n            currentObject.isContainedWithinRect(selectionX1Y1, selectionX2Y2) ||\n            (allowIntersect && currentObject.containsPoint(selectionX1Y1)) ||\n            (allowIntersect && currentObject.containsPoint(selectionX2Y2))\n        ) {\n          group.push(currentObject);\n          // only add one object if it's a click\n          if (isClick) {\n            break;\n          }\n        }\n      }\n\n      if (group.length > 1) {\n        group = group.filter(function(object) {\n          return !object.onSelect({ e: e });\n        });\n      }\n\n      return group;\n    },\n\n    /**\n     * @private\n     */\n    _maybeGroupObjects: function(e) {\n      if (this.selection && this._groupSelector) {\n        this._groupSelectedObjects(e);\n      }\n      this.setCursor(this.defaultCursor);\n      // clear selection and current transformation\n      this._groupSelector = null;\n    }\n  });\n\n})();\n\n\n(function () {\n  fabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Exports canvas element to a dataurl image. Note that when multiplier is used, cropping is scaled appropriately\n     * @param {Object} [options] Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by, to have consistent\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 2.0.0\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     * @see {@link http://jsfiddle.net/fabricjs/NfZVb/|jsFiddle demo}\n     * @example <caption>Generate jpeg dataURL with lower quality</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'jpeg',\n     *   quality: 0.8\n     * });\n     * @example <caption>Generate cropped png dataURL (clipping of canvas)</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   left: 100,\n     *   top: 100,\n     *   width: 200,\n     *   height: 200\n     * });\n     * @example <caption>Generate double scaled png dataURL</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   multiplier: 2\n     * });\n     */\n    toDataURL: function (options) {\n      options || (options = { });\n\n      var format = options.format || 'png',\n          quality = options.quality || 1,\n          multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? this.getRetinaScaling() : 1),\n          canvasEl = this.toCanvasElement(multiplier, options);\n      return fabric.util.toDataURL(canvasEl, format, quality);\n    },\n\n    /**\n     * Create a new HTMLCanvas element painted with the current canvas content.\n     * No need to resize the actual one or repaint it.\n     * Will transfer object ownership to a new canvas, paint it, and set everything back.\n     * This is an intermediary step used to get to a dataUrl but also it is useful to\n     * create quick image copies of a canvas without passing for the dataUrl string\n     * @param {Number} [multiplier] a zoom factor.\n     * @param {Object} [cropping] Cropping informations\n     * @param {Number} [cropping.left] Cropping left offset.\n     * @param {Number} [cropping.top] Cropping top offset.\n     * @param {Number} [cropping.width] Cropping width.\n     * @param {Number} [cropping.height] Cropping height.\n     */\n    toCanvasElement: function(multiplier, cropping) {\n      multiplier = multiplier || 1;\n      cropping = cropping || { };\n      var scaledWidth = (cropping.width || this.width) * multiplier,\n          scaledHeight = (cropping.height || this.height) * multiplier,\n          zoom = this.getZoom(),\n          originalWidth = this.width,\n          originalHeight = this.height,\n          newZoom = zoom * multiplier,\n          vp = this.viewportTransform,\n          translateX = (vp[4] - (cropping.left || 0)) * multiplier,\n          translateY = (vp[5] - (cropping.top || 0)) * multiplier,\n          originalInteractive = this.interactive,\n          newVp = [newZoom, 0, 0, newZoom, translateX, translateY],\n          originalRetina = this.enableRetinaScaling,\n          canvasEl = fabric.util.createCanvasElement(),\n          originalContextTop = this.contextTop;\n      canvasEl.width = scaledWidth;\n      canvasEl.height = scaledHeight;\n      this.contextTop = null;\n      this.enableRetinaScaling = false;\n      this.interactive = false;\n      this.viewportTransform = newVp;\n      this.width = scaledWidth;\n      this.height = scaledHeight;\n      this.calcViewportBoundaries();\n      this.renderCanvas(canvasEl.getContext('2d'), this._objects);\n      this.viewportTransform = vp;\n      this.width = originalWidth;\n      this.height = originalHeight;\n      this.calcViewportBoundaries();\n      this.interactive = originalInteractive;\n      this.enableRetinaScaling = originalRetina;\n      this.contextTop = originalContextTop;\n      return canvasEl;\n    },\n  });\n\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n  /**\n   * Populates canvas with data from the specified JSON.\n   * JSON format must conform to the one of {@link fabric.Canvas#toJSON}\n   * @param {String|Object} json JSON string or object\n   * @param {Function} callback Callback, invoked when json is parsed\n   *                            and corresponding objects (e.g: {@link fabric.Image})\n   *                            are initialized\n   * @param {Function} [reviver] Method for further parsing of JSON elements, called after each fabric object created.\n   * @return {fabric.Canvas} instance\n   * @chainable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#deserialization}\n   * @see {@link http://jsfiddle.net/fabricjs/fmgXt/|jsFiddle demo}\n   * @example <caption>loadFromJSON</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas));\n   * @example <caption>loadFromJSON with reviver</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas), function(o, object) {\n   *   // `o` = json object\n   *   // `object` = fabric.Object instance\n   *   // ... do some stuff ...\n   * });\n   */\n  loadFromJSON: function (json, callback, reviver) {\n    if (!json) {\n      return;\n    }\n\n    // serialize if it wasn't already\n    var serialized = (typeof json === 'string')\n      ? JSON.parse(json)\n      : fabric.util.object.clone(json);\n\n    var _this = this,\n        clipPath = serialized.clipPath,\n        renderOnAddRemove = this.renderOnAddRemove;\n\n    this.renderOnAddRemove = false;\n\n    delete serialized.clipPath;\n\n    this._enlivenObjects(serialized.objects, function (enlivenedObjects) {\n      _this.clear();\n      _this._setBgOverlay(serialized, function () {\n        if (clipPath) {\n          _this._enlivenObjects([clipPath], function (enlivenedCanvasClip) {\n            _this.clipPath = enlivenedCanvasClip[0];\n            _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);\n          });\n        }\n        else {\n          _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);\n        }\n      });\n    }, reviver);\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Array} restored canvas objects\n   * @param {Function} cached renderOnAddRemove callback\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  __setupCanvas: function(serialized, enlivenedObjects, renderOnAddRemove, callback) {\n    var _this = this;\n    enlivenedObjects.forEach(function(obj, index) {\n      // we splice the array just in case some custom classes restored from JSON\n      // will add more object to canvas at canvas init.\n      _this.insertAt(obj, index);\n    });\n    this.renderOnAddRemove = renderOnAddRemove;\n    // remove parts i cannot set as options\n    delete serialized.objects;\n    delete serialized.backgroundImage;\n    delete serialized.overlayImage;\n    delete serialized.background;\n    delete serialized.overlay;\n    // this._initOptions does too many things to just\n    // call it. Normally loading an Object from JSON\n    // create the Object instance. Here the Canvas is\n    // already an instance and we are just loading things over it\n    this._setOptions(serialized);\n    this.renderAll();\n    callback && callback();\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  _setBgOverlay: function(serialized, callback) {\n    var loaded = {\n      backgroundColor: false,\n      overlayColor: false,\n      backgroundImage: false,\n      overlayImage: false\n    };\n\n    if (!serialized.backgroundImage && !serialized.overlayImage && !serialized.background && !serialized.overlay) {\n      callback && callback();\n      return;\n    }\n\n    var cbIfLoaded = function () {\n      if (loaded.backgroundImage && loaded.overlayImage && loaded.backgroundColor && loaded.overlayColor) {\n        callback && callback();\n      }\n    };\n\n    this.__setBgOverlay('backgroundImage', serialized.backgroundImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayImage', serialized.overlayImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('backgroundColor', serialized.background, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayColor', serialized.overlay, loaded, cbIfLoaded);\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to set (backgroundImage, overlayImage, backgroundColor, overlayColor)\n   * @param {(Object|String)} value Value to set\n   * @param {Object} loaded Set loaded property to true if property is set\n   * @param {Object} callback Callback function to invoke after property is set\n   */\n  __setBgOverlay: function(property, value, loaded, callback) {\n    var _this = this;\n\n    if (!value) {\n      loaded[property] = true;\n      callback && callback();\n      return;\n    }\n\n    if (property === 'backgroundImage' || property === 'overlayImage') {\n      fabric.util.enlivenObjects([value], function(enlivedObject){\n        _this[property] = enlivedObject[0];\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n    else {\n      this['set' + fabric.util.string.capitalize(property, true)](value, function() {\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {Array} objects\n   * @param {Function} callback\n   * @param {Function} [reviver]\n   */\n  _enlivenObjects: function (objects, callback, reviver) {\n    if (!objects || objects.length === 0) {\n      callback && callback([]);\n      return;\n    }\n\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\n      callback && callback(enlivenedObjects);\n    }, null, reviver);\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Function} callback\n   */\n  _toDataURL: function (format, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURL(format));\n    });\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Number} multiplier\n   * @param {Function} callback\n   */\n  _toDataURLWithMultiplier: function (format, multiplier, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURLWithMultiplier(format, multiplier));\n    });\n  },\n\n  /**\n   * Clones canvas instance\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   * @param {Array} [properties] Array of properties to include in the cloned canvas and children\n   */\n  clone: function (callback, properties) {\n    var data = JSON.stringify(this.toJSON(properties));\n    this.cloneWithoutData(function(clone) {\n      clone.loadFromJSON(data, function() {\n        callback && callback(clone);\n      });\n    });\n  },\n\n  /**\n   * Clones canvas instance without cloning existing data.\n   * This essentially copies canvas dimensions, clipping properties, etc.\n   * but leaves data empty (so that you can populate it with your own)\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   */\n  cloneWithoutData: function(callback) {\n    var el = fabric.util.createCanvasElement();\n\n    el.width = this.width;\n    el.height = this.height;\n\n    var clone = new fabric.Canvas(el);\n    if (this.backgroundImage) {\n      clone.setBackgroundImage(this.backgroundImage.src, function() {\n        clone.renderAll();\n        callback && callback(clone);\n      });\n      clone.backgroundImageOpacity = this.backgroundImageOpacity;\n      clone.backgroundImageStretch = this.backgroundImageStretch;\n    }\n    else {\n      callback && callback(clone);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      capitalize = fabric.util.string.capitalize,\n      degreesToRadians = fabric.util.degreesToRadians,\n      supportsLineDash = fabric.StaticCanvas.supports('setLineDash'),\n      objectCaching = !fabric.isLikelyNode,\n      ALIASING_LIMIT = 2;\n\n  if (fabric.Object) {\n    return;\n  }\n\n  /**\n   * Root object class from which all 2d shape classes inherit from\n   * @class fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#objects}\n   * @see {@link fabric.Object#initialize} for constructor definition\n   *\n   * @fires added\n   * @fires removed\n   *\n   * @fires selected\n   * @fires deselected\n   * @fires modified\n   * @fires modified\n   * @fires moved\n   * @fires scaled\n   * @fires rotated\n   * @fires skewed\n   *\n   * @fires rotating\n   * @fires scaling\n   * @fires moving\n   * @fires skewing\n   *\n   * @fires mousedown\n   * @fires mouseup\n   * @fires mouseover\n   * @fires mouseout\n   * @fires mousewheel\n   * @fires mousedblclick\n   *\n   * @fires dragover\n   * @fires dragenter\n   * @fires dragleave\n   * @fires drop\n   */\n  fabric.Object = fabric.util.createClass(fabric.CommonMethods, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Type of an object (rect, circle, path, etc.).\n     * Note that this property is meant to be read-only and not meant to be modified.\n     * If you modify, certain parts of Fabric (such as JSON loading) won't work correctly.\n     * @type String\n     * @default\n     */\n    type:                     'object',\n\n    /**\n     * Horizontal origin of transformation of an object (one of \"left\", \"right\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/244/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originX:                  'left',\n\n    /**\n     * Vertical origin of transformation of an object (one of \"top\", \"bottom\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/244/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originY:                  'top',\n\n    /**\n     * Top position of an object. Note that by default it's relative to object top. You can change this by setting originY={top/center/bottom}\n     * @type Number\n     * @default\n     */\n    top:                      0,\n\n    /**\n     * Left position of an object. Note that by default it's relative to object left. You can change this by setting originX={left/center/right}\n     * @type Number\n     * @default\n     */\n    left:                     0,\n\n    /**\n     * Object width\n     * @type Number\n     * @default\n     */\n    width:                    0,\n\n    /**\n     * Object height\n     * @type Number\n     * @default\n     */\n    height:                   0,\n\n    /**\n     * Object scale factor (horizontal)\n     * @type Number\n     * @default\n     */\n    scaleX:                   1,\n\n    /**\n     * Object scale factor (vertical)\n     * @type Number\n     * @default\n     */\n    scaleY:                   1,\n\n    /**\n     * When true, an object is rendered as flipped horizontally\n     * @type Boolean\n     * @default\n     */\n    flipX:                    false,\n\n    /**\n     * When true, an object is rendered as flipped vertically\n     * @type Boolean\n     * @default\n     */\n    flipY:                    false,\n\n    /**\n     * Opacity of an object\n     * @type Number\n     * @default\n     */\n    opacity:                  1,\n\n    /**\n     * Angle of rotation of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    angle:                    0,\n\n    /**\n     * Angle of skew on x axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewX:                    0,\n\n    /**\n     * Angle of skew on y axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewY:                    0,\n\n    /**\n     * Size of object's controlling corners (in pixels)\n     * @type Number\n     * @default\n     */\n    cornerSize:               13,\n\n    /**\n     * Size of object's controlling corners when touch interaction is detected\n     * @type Number\n     * @default\n     */\n    touchCornerSize:               24,\n\n    /**\n     * When true, object's controlling corners are rendered as transparent inside (i.e. stroke instead of fill)\n     * @type Boolean\n     * @default\n     */\n    transparentCorners:       true,\n\n    /**\n     * Default cursor value used when hovering over this object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:              null,\n\n    /**\n     * Default cursor value used when moving this object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:               null,\n\n    /**\n     * Padding between object and its controlling borders (in pixels)\n     * @type Number\n     * @default\n     */\n    padding:                  0,\n\n    /**\n     * Color of controlling borders of an object (when it's active)\n     * @type String\n     * @default\n     */\n    borderColor:              'rgb(178,204,255)',\n\n    /**\n     * Array specifying dash pattern of an object's borders (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    borderDashArray:          null,\n\n    /**\n     * Color of controlling corners of an object (when it's active)\n     * @type String\n     * @default\n     */\n    cornerColor:              'rgb(178,204,255)',\n\n    /**\n     * Color of controlling corners of an object (when it's active and transparentCorners false)\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    cornerStrokeColor:        null,\n\n    /**\n     * Specify style of control, 'rect' or 'circle'\n     * @since 1.6.2\n     * @type String\n     */\n    cornerStyle:          'rect',\n\n    /**\n     * Array specifying dash pattern of an object's control (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    cornerDashArray:          null,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being scaled via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:          false,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being rotated via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:         true,\n\n    /**\n     * Color of object's fill\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    fill:                     'rgb(0,0,0)',\n\n    /**\n     * Fill rule used to fill an object\n     * accepted values are nonzero, evenodd\n     * <b>Backwards incompatibility note:</b> This property was used for setting globalCompositeOperation until v1.4.12 (use `fabric.Object#globalCompositeOperation` instead)\n     * @type String\n     * @default\n     */\n    fillRule:                 'nonzero',\n\n    /**\n     * Composite rule used for canvas globalCompositeOperation\n     * @type String\n     * @default\n     */\n    globalCompositeOperation: 'source-over',\n\n    /**\n     * Background color of an object.\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    backgroundColor:          '',\n\n    /**\n     * Selection Background color of an object. colored layer behind the object when it is active.\n     * does not mix good with globalCompositeOperation methods.\n     * @type String\n     * @default\n     */\n    selectionBackgroundColor:          '',\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    stroke:                   null,\n\n    /**\n     * Width of a stroke used to render this object\n     * @type Number\n     * @default\n     */\n    strokeWidth:              1,\n\n    /**\n     * Array specifying dash pattern of an object's stroke (stroke must be defined)\n     * @type Array\n     */\n    strokeDashArray:          null,\n\n    /**\n     * Line offset of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeDashOffset: 0,\n\n    /**\n     * Line endings style of an object's stroke (one of \"butt\", \"round\", \"square\")\n     * @type String\n     * @default\n     */\n    strokeLineCap:            'butt',\n\n    /**\n     * Corner style of an object's stroke (one of \"bevel\", \"round\", \"miter\")\n     * @type String\n     * @default\n     */\n    strokeLineJoin:           'miter',\n\n    /**\n     * Maximum miter length (used for strokeLineJoin = \"miter\") of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeMiterLimit:         4,\n\n    /**\n     * Shadow object representing shadow of this shape\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:                   null,\n\n    /**\n     * Opacity of object's controlling borders when object is active and moving\n     * @type Number\n     * @default\n     */\n    borderOpacityWhenMoving:  0.4,\n\n    /**\n     * Scale factor of object's controlling borders\n     * bigger number will make a thicker border\n     * border is 1, so this is basically a border thickness\n     * since there is no way to change the border itself.\n     * @type Number\n     * @default\n     */\n    borderScaleFactor:        1,\n\n    /**\n     * Minimum allowed scale value of an object\n     * @type Number\n     * @default\n     */\n    minScaleLimit:            0,\n\n    /**\n     * When set to `false`, an object can not be selected for modification (using either point-click-based or group-based selection).\n     * But events still fire on it.\n     * @type Boolean\n     * @default\n     */\n    selectable:               true,\n\n    /**\n     * When set to `false`, an object can not be a target of events. All events propagate through it. Introduced in v1.3.4\n     * @type Boolean\n     * @default\n     */\n    evented:                  true,\n\n    /**\n     * When set to `false`, an object is not rendered on canvas\n     * @type Boolean\n     * @default\n     */\n    visible:                  true,\n\n    /**\n     * When set to `false`, object's controls are not displayed and can not be used to manipulate object\n     * @type Boolean\n     * @default\n     */\n    hasControls:              true,\n\n    /**\n     * When set to `false`, object's controlling borders are not rendered\n     * @type Boolean\n     * @default\n     */\n    hasBorders:               true,\n\n    /**\n     * When set to `true`, objects are \"found\" on canvas on per-pixel basis rather than according to bounding box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:       false,\n\n    /**\n     * When `false`, default object's values are not included in its serialization\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues:     true,\n\n    /**\n     * When `true`, object horizontal movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementX:            false,\n\n    /**\n     * When `true`, object vertical movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementY:            false,\n\n    /**\n     * When `true`, object rotation is locked\n     * @type Boolean\n     * @default\n     */\n    lockRotation:             false,\n\n    /**\n     * When `true`, object horizontal scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingX:             false,\n\n    /**\n     * When `true`, object vertical scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingY:             false,\n\n    /**\n     * When `true`, object horizontal skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingX:             false,\n\n    /**\n     * When `true`, object vertical skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingY:             false,\n\n    /**\n     * When `true`, object cannot be flipped by scaling into negative values\n     * @type Boolean\n     * @default\n     */\n    lockScalingFlip:          false,\n\n    /**\n     * When `true`, object is not exported in OBJECT/JSON\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    excludeFromExport:        false,\n\n    /**\n     * When `true`, object is cached on an additional canvas.\n     * When `false`, object is not cached unless necessary ( clipPath )\n     * default to true\n     * @since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    objectCaching:            objectCaching,\n\n    /**\n     * When `true`, object properties are checked for cache invalidation. In some particular\n     * situation you may want this to be disabled ( spray brush, very big, groups)\n     * or if your application does not allow you to modify properties for groups child you want\n     * to disable it for groups.\n     * default to false\n     * since 1.7.0\n     * @type Boolean\n     * @default false\n     */\n    statefullCache:            false,\n\n    /**\n     * When `true`, cache does not get updated during scaling. The picture will get blocky if scaled\n     * too much and will be redrawn with correct details at the end of scaling.\n     * this setting is performance and application dependant.\n     * default to true\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    noScaleCache:              true,\n\n    /**\n     * When `false`, the stoke width will scale with the object.\n     * When `true`, the stroke will always match the exact pixel size entered for stroke width.\n     * default to false\n     * @since 2.6.0\n     * @type Boolean\n     * @default false\n     * @type Boolean\n     * @default false\n     */\n    strokeUniform:              false,\n\n    /**\n     * When set to `true`, object's cache will be rerendered next render call.\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    dirty:                true,\n\n    /**\n     * keeps the value of the last hovered corner during mouse move.\n     * 0 is no corner, or 'mt', 'ml', 'mtr' etc..\n     * It should be private, but there is no harm in using it as\n     * a read-only property.\n     * @type number|string|any\n     * @default 0\n     */\n    __corner: 0,\n\n    /**\n     * Determines if the fill or the stroke is drawn first (one of \"fill\" or \"stroke\")\n     * @type String\n     * @default\n     */\n    paintFirst:           'fill',\n\n    /**\n     * When 'down', object is set to active on mousedown/touchstart\n     * When 'up', object is set to active on mouseup/touchend\n     * Experimental. Let's see if this breaks anything before supporting officially\n     * @private\n     * since 4.4.0\n     * @type String\n     * @default 'down'\n     */\n    activeOn:           'down',\n\n    /**\n     * List of properties to consider when checking if state\n     * of an object is changed (fabric.Object#hasStateChanged)\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: (\n      'top left width height scaleX scaleY flipX flipY originX originY transformMatrix ' +\n      'stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit ' +\n      'angle opacity fill globalCompositeOperation shadow visible backgroundColor ' +\n      'skewX skewY fillRule paintFirst clipPath strokeUniform'\n    ).split(' '),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * Those properties are checked by statefullCache ON ( or lazy mode if we want ) or from single\n     * calls to Object.set(key, value). If the key is in this list, the object is marked as dirty\n     * and refreshed at the next render\n     * @type Array\n     */\n    cacheProperties: (\n      'fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform' +\n      ' strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath'\n    ).split(' '),\n\n    /**\n     * List of properties to consider for animating colors.\n     * @type Array\n     */\n    colorProperties: (\n      'fill stroke backgroundColor'\n    ).split(' '),\n\n    /**\n     * a fabricObject that, without stroke define a clipping area with their shape. filled in black\n     * the clipPath object gets used when the object has rendered, and the context is placed in the center\n     * of the object cacheCanvas.\n     * If you want 0,0 of a clipPath to align with an object center, use clipPath.originX/Y to 'center'\n     * @type fabric.Object\n     */\n    clipPath: undefined,\n\n    /**\n     * Meaningful ONLY when the object is used as clipPath.\n     * if true, the clipPath will make the object clip to the outside of the clipPath\n     * since 2.4.0\n     * @type boolean\n     * @default false\n     */\n    inverted: false,\n\n    /**\n     * Meaningful ONLY when the object is used as clipPath.\n     * if true, the clipPath will have its top and left relative to canvas, and will\n     * not be influenced by the object transform. This will make the clipPath relative\n     * to the canvas, but clipping just a particular object.\n     * WARNING this is beta, this feature may change or be renamed.\n     * since 2.4.0\n     * @type boolean\n     * @default false\n     */\n    absolutePositioned: false,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      if (options) {\n        this.setOptions(options);\n      }\n    },\n\n    /**\n     * Create a the canvas used to keep the cached copy of the object\n     * @private\n     */\n    _createCacheCanvas: function() {\n      this._cacheProperties = {};\n      this._cacheCanvas = fabric.util.createCanvasElement();\n      this._cacheContext = this._cacheCanvas.getContext('2d');\n      this._updateCacheCanvas();\n      // if canvas gets created, is empty, so dirty.\n      this.dirty = true;\n    },\n\n    /**\n     * Limit the cache dimensions so that X * Y do not cross fabric.perfLimitSizeTotal\n     * and each side do not cross fabric.cacheSideLimit\n     * those numbers are configurable so that you can get as much detail as you want\n     * making bargain with performances.\n     * @param {Object} dims\n     * @param {Object} dims.width width of canvas\n     * @param {Object} dims.height height of canvas\n     * @param {Object} dims.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @param {Object} dims.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _limitCacheSize: function(dims) {\n      var perfLimitSizeTotal = fabric.perfLimitSizeTotal,\n          width = dims.width, height = dims.height,\n          max = fabric.maxCacheSideLimit, min = fabric.minCacheSideLimit;\n      if (width <= max && height <= max && width * height <= perfLimitSizeTotal) {\n        if (width < min) {\n          dims.width = min;\n        }\n        if (height < min) {\n          dims.height = min;\n        }\n        return dims;\n      }\n      var ar = width / height, limitedDims = fabric.util.limitDimsByArea(ar, perfLimitSizeTotal),\n          capValue = fabric.util.capValue,\n          x = capValue(min, limitedDims.x, max),\n          y = capValue(min, limitedDims.y, max);\n      if (width > x) {\n        dims.zoomX /= width / x;\n        dims.width = x;\n        dims.capped = true;\n      }\n      if (height > y) {\n        dims.zoomY /= height / y;\n        dims.height = y;\n        dims.capped = true;\n      }\n      return dims;\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @return {Object}.x width of object to be cached\n     * @return {Object}.y height of object to be cached\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var objectScale = this.getTotalObjectScaling(),\n          // caculate dimensions without skewing\n          dim = this._getTransformedDimensions(0, 0),\n          neededX = dim.x * objectScale.scaleX / this.scaleX,\n          neededY = dim.y * objectScale.scaleY / this.scaleY;\n      return {\n        // for sure this ALIASING_LIMIT is slightly creating problem\n        // in situation in which the cache canvas gets an upper limit\n        // also objectScale contains already scaleX and scaleY\n        width: neededX + ALIASING_LIMIT,\n        height: neededY + ALIASING_LIMIT,\n        zoomX: objectScale.scaleX,\n        zoomY: objectScale.scaleY,\n        x: neededX,\n        y: neededY\n      };\n    },\n\n    /**\n     * Update width and height of the canvas for cache\n     * returns true or false if canvas needed resize.\n     * @private\n     * @return {Boolean} true if the canvas has been resized\n     */\n    _updateCacheCanvas: function() {\n      var targetCanvas = this.canvas;\n      if (this.noScaleCache && targetCanvas && targetCanvas._currentTransform) {\n        var target = targetCanvas._currentTransform.target,\n            action = targetCanvas._currentTransform.action;\n        if (this === target && action.slice && action.slice(0, 5) === 'scale') {\n          return false;\n        }\n      }\n      var canvas = this._cacheCanvas,\n          dims = this._limitCacheSize(this._getCacheCanvasDimensions()),\n          minCacheSize = fabric.minCacheSideLimit,\n          width = dims.width, height = dims.height, drawingWidth, drawingHeight,\n          zoomX = dims.zoomX, zoomY = dims.zoomY,\n          dimensionsChanged = width !== this.cacheWidth || height !== this.cacheHeight,\n          zoomChanged = this.zoomX !== zoomX || this.zoomY !== zoomY,\n          shouldRedraw = dimensionsChanged || zoomChanged,\n          additionalWidth = 0, additionalHeight = 0, shouldResizeCanvas = false;\n      if (dimensionsChanged) {\n        var canvasWidth = this._cacheCanvas.width,\n            canvasHeight = this._cacheCanvas.height,\n            sizeGrowing = width > canvasWidth || height > canvasHeight,\n            sizeShrinking = (width < canvasWidth * 0.9 || height < canvasHeight * 0.9) &&\n              canvasWidth > minCacheSize && canvasHeight > minCacheSize;\n        shouldResizeCanvas = sizeGrowing || sizeShrinking;\n        if (sizeGrowing && !dims.capped && (width > minCacheSize || height > minCacheSize)) {\n          additionalWidth = width * 0.1;\n          additionalHeight = height * 0.1;\n        }\n      }\n      if (shouldRedraw) {\n        if (shouldResizeCanvas) {\n          canvas.width = Math.ceil(width + additionalWidth);\n          canvas.height = Math.ceil(height + additionalHeight);\n        }\n        else {\n          this._cacheContext.setTransform(1, 0, 0, 1, 0, 0);\n          this._cacheContext.clearRect(0, 0, canvas.width, canvas.height);\n        }\n        drawingWidth = dims.x / 2;\n        drawingHeight = dims.y / 2;\n        this.cacheTranslationX = Math.round(canvas.width / 2 - drawingWidth) + drawingWidth;\n        this.cacheTranslationY = Math.round(canvas.height / 2 - drawingHeight) + drawingHeight;\n        this.cacheWidth = width;\n        this.cacheHeight = height;\n        this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY);\n        this._cacheContext.scale(zoomX, zoomY);\n        this.zoomX = zoomX;\n        this.zoomY = zoomY;\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Sets object's properties from options\n     * @param {Object} [options] Options object\n     */\n    setOptions: function(options) {\n      this._setOptions(options);\n      this._initGradient(options.fill, 'fill');\n      this._initGradient(options.stroke, 'stroke');\n      this._initPattern(options.fill, 'fill');\n      this._initPattern(options.stroke, 'stroke');\n    },\n\n    /**\n     * Transforms context when rendering an object\n     * @param {CanvasRenderingContext2D} ctx Context\n     */\n    transform: function(ctx) {\n      var needFullTransform = (this.group && !this.group._transformDone) ||\n         (this.group && this.canvas && ctx === this.canvas.contextTop);\n      var m = this.calcTransformMatrix(!needFullTransform);\n      ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    },\n\n    /**\n     * Returns an object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n\n          object = {\n            type:                     this.type,\n            version:                  fabric.version,\n            originX:                  this.originX,\n            originY:                  this.originY,\n            left:                     toFixed(this.left, NUM_FRACTION_DIGITS),\n            top:                      toFixed(this.top, NUM_FRACTION_DIGITS),\n            width:                    toFixed(this.width, NUM_FRACTION_DIGITS),\n            height:                   toFixed(this.height, NUM_FRACTION_DIGITS),\n            fill:                     (this.fill && this.fill.toObject) ? this.fill.toObject() : this.fill,\n            stroke:                   (this.stroke && this.stroke.toObject) ? this.stroke.toObject() : this.stroke,\n            strokeWidth:              toFixed(this.strokeWidth, NUM_FRACTION_DIGITS),\n            strokeDashArray:          this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,\n            strokeLineCap:            this.strokeLineCap,\n            strokeDashOffset:         this.strokeDashOffset,\n            strokeLineJoin:           this.strokeLineJoin,\n            strokeUniform:            this.strokeUniform,\n            strokeMiterLimit:         toFixed(this.strokeMiterLimit, NUM_FRACTION_DIGITS),\n            scaleX:                   toFixed(this.scaleX, NUM_FRACTION_DIGITS),\n            scaleY:                   toFixed(this.scaleY, NUM_FRACTION_DIGITS),\n            angle:                    toFixed(this.angle, NUM_FRACTION_DIGITS),\n            flipX:                    this.flipX,\n            flipY:                    this.flipY,\n            opacity:                  toFixed(this.opacity, NUM_FRACTION_DIGITS),\n            shadow:                   (this.shadow && this.shadow.toObject) ? this.shadow.toObject() : this.shadow,\n            visible:                  this.visible,\n            backgroundColor:          this.backgroundColor,\n            fillRule:                 this.fillRule,\n            paintFirst:               this.paintFirst,\n            globalCompositeOperation: this.globalCompositeOperation,\n            skewX:                    toFixed(this.skewX, NUM_FRACTION_DIGITS),\n            skewY:                    toFixed(this.skewY, NUM_FRACTION_DIGITS),\n          };\n\n      if (this.clipPath) {\n        object.clipPath = this.clipPath.toObject(propertiesToInclude);\n        object.clipPath.inverted = this.clipPath.inverted;\n        object.clipPath.absolutePositioned = this.clipPath.absolutePositioned;\n      }\n\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        object = this._removeDefaultValues(object);\n      }\n\n      return object;\n    },\n\n    /**\n     * Returns (dataless) object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      // will be overwritten by subclasses\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     */\n    _removeDefaultValues: function(object) {\n      var prototype = fabric.util.getKlass(object.type).prototype,\n          stateProperties = prototype.stateProperties;\n      stateProperties.forEach(function(prop) {\n        if (prop === 'left' || prop === 'top') {\n          return;\n        }\n        if (object[prop] === prototype[prop]) {\n          delete object[prop];\n        }\n        var isArray = Object.prototype.toString.call(object[prop]) === '[object Array]' &&\n                      Object.prototype.toString.call(prototype[prop]) === '[object Array]';\n\n        // basically a check for [] === []\n        if (isArray && object[prop].length === 0 && prototype[prop].length === 0) {\n          delete object[prop];\n        }\n      });\n\n      return object;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.' + capitalize(this.type) + '>';\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getObjectScaling: function() {\n      var options = fabric.util.qrDecompose(this.calcTransformMatrix());\n      return { scaleX: Math.abs(options.scaleX), scaleY: Math.abs(options.scaleY) };\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling, zoom and retina\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getTotalObjectScaling: function() {\n      var scale = this.getObjectScaling(), scaleX = scale.scaleX, scaleY = scale.scaleY;\n      if (this.canvas) {\n        var zoom = this.canvas.getZoom();\n        var retina = this.canvas.getRetinaScaling();\n        scaleX *= zoom * retina;\n        scaleY *= zoom * retina;\n      }\n      return { scaleX: scaleX, scaleY: scaleY };\n    },\n\n    /**\n     * Return the object opacity counting also the group property\n     * @return {Number}\n     */\n    getObjectOpacity: function() {\n      var opacity = this.opacity;\n      if (this.group) {\n        opacity *= this.group.getObjectOpacity();\n      }\n      return opacity;\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Object} thisArg\n     */\n    _set: function(key, value) {\n      var shouldConstrainValue = (key === 'scaleX' || key === 'scaleY'),\n          isChanged = this[key] !== value, groupNeedsUpdate = false;\n\n      if (shouldConstrainValue) {\n        value = this._constrainScale(value);\n      }\n      if (key === 'scaleX' && value < 0) {\n        this.flipX = !this.flipX;\n        value *= -1;\n      }\n      else if (key === 'scaleY' && value < 0) {\n        this.flipY = !this.flipY;\n        value *= -1;\n      }\n      else if (key === 'shadow' && value && !(value instanceof fabric.Shadow)) {\n        value = new fabric.Shadow(value);\n      }\n      else if (key === 'dirty' && this.group) {\n        this.group.set('dirty', value);\n      }\n\n      this[key] = value;\n\n      if (isChanged) {\n        groupNeedsUpdate = this.group && this.group.isOnACache();\n        if (this.cacheProperties.indexOf(key) > -1) {\n          this.dirty = true;\n          groupNeedsUpdate && this.group.set('dirty', true);\n        }\n        else if (groupNeedsUpdate && this.stateProperties.indexOf(key) > -1) {\n          this.group.set('dirty', true);\n        }\n      }\n      return this;\n    },\n\n    /**\n     * This callback function is called by the parent group of an object every\n     * time a non-delegated property changes on the group. It is passed the key\n     * and value as parameters. Not adding in this function's signature to avoid\n     * Travis build error about unused variables.\n     */\n    setOnGroup: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n    /**\n     * Retrieves viewportTransform from Object's canvas if possible\n     * @method getViewportTransform\n     * @memberOf fabric.Object.prototype\n     * @return {Array}\n     */\n    getViewportTransform: function() {\n      if (this.canvas && this.canvas.viewportTransform) {\n        return this.canvas.viewportTransform;\n      }\n      return fabric.iMatrix.concat();\n    },\n\n    /*\n     * @private\n     * return if the object would be visible in rendering\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean}\n     */\n    isNotVisible: function() {\n      return this.opacity === 0 ||\n        (!this.width && !this.height && this.strokeWidth === 0) ||\n        !this.visible;\n    },\n\n    /**\n     * Renders an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      // do not render if width/height are zeros or object is not visible\n      if (this.isNotVisible()) {\n        return;\n      }\n      if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {\n        return;\n      }\n      ctx.save();\n      this._setupCompositeOperation(ctx);\n      this.drawSelectionBackground(ctx);\n      this.transform(ctx);\n      this._setOpacity(ctx);\n      this._setShadow(ctx, this);\n      if (this.shouldCache()) {\n        this.renderCache();\n        this.drawCacheOnCanvas(ctx);\n      }\n      else {\n        this._removeCacheCanvas();\n        this.dirty = false;\n        this.drawObject(ctx);\n        if (this.objectCaching && this.statefullCache) {\n          this.saveState({ propertySet: 'cacheProperties' });\n        }\n      }\n      ctx.restore();\n    },\n\n    renderCache: function(options) {\n      options = options || {};\n      if (!this._cacheCanvas) {\n        this._createCacheCanvas();\n      }\n      if (this.isCacheDirty()) {\n        this.statefullCache && this.saveState({ propertySet: 'cacheProperties' });\n        this.drawObject(this._cacheContext, options.forClipping);\n        this.dirty = false;\n      }\n    },\n\n    /**\n     * Remove cacheCanvas and its dimensions from the objects\n     */\n    _removeCacheCanvas: function() {\n      this._cacheCanvas = null;\n      this.cacheWidth = 0;\n      this.cacheHeight = 0;\n    },\n\n    /**\n     * return true if the object will draw a stroke\n     * Does not consider text styles. This is just a shortcut used at rendering time\n     * We want it to be an approximation and be fast.\n     * wrote to avoid extra caching, it has to return true when stroke happens,\n     * can guess when it will not happen at 100% chance, does not matter if it misses\n     * some use case where the stroke is invisible.\n     * @since 3.0.0\n     * @returns Boolean\n     */\n    hasStroke: function() {\n      return this.stroke && this.stroke !== 'transparent' && this.strokeWidth !== 0;\n    },\n\n    /**\n     * return true if the object will draw a fill\n     * Does not consider text styles. This is just a shortcut used at rendering time\n     * We want it to be an approximation and be fast.\n     * wrote to avoid extra caching, it has to return true when fill happens,\n     * can guess when it will not happen at 100% chance, does not matter if it misses\n     * some use case where the fill is invisible.\n     * @since 3.0.0\n     * @returns Boolean\n     */\n    hasFill: function() {\n      return this.fill && this.fill !== 'transparent';\n    },\n\n    /**\n     * When set to `true`, force the object to have its own cache, even if it is inside a group\n     * it may be needed when your object behave in a particular way on the cache and always needs\n     * its own isolated canvas to render correctly.\n     * Created to be overridden\n     * since 1.7.12\n     * @returns Boolean\n     */\n    needsItsOwnCache: function() {\n      if (this.paintFirst === 'stroke' &&\n        this.hasFill() && this.hasStroke() && typeof this.shadow === 'object') {\n        return true;\n      }\n      if (this.clipPath) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * objectCaching is a global flag, wins over everything\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * Read as: cache if is needed, or if the feature is enabled but we are not already caching.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      this.ownCaching = this.needsItsOwnCache() || (\n        this.objectCaching &&\n        (!this.group || !this.group.isOnACache())\n      );\n      return this.ownCaching;\n    },\n\n    /**\n     * Check if this object or a child object will cast a shadow\n     * used by Group.shouldCache to know if child has a shadow recursively\n     * @return {Boolean}\n     */\n    willDrawShadow: function() {\n      return !!this.shadow && (this.shadow.offsetX !== 0 || this.shadow.offsetY !== 0);\n    },\n\n    /**\n     * Execute the drawing operation for an object clipPath\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawClipPathOnCache: function(ctx) {\n      var path = this.clipPath;\n      ctx.save();\n      // DEBUG: uncomment this line, comment the following\n      // ctx.globalAlpha = 0.4\n      if (path.inverted) {\n        ctx.globalCompositeOperation = 'destination-out';\n      }\n      else {\n        ctx.globalCompositeOperation = 'destination-in';\n      }\n      //ctx.scale(1 / 2, 1 / 2);\n      if (path.absolutePositioned) {\n        var m = fabric.util.invertTransform(this.calcTransformMatrix());\n        ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n      }\n      path.transform(ctx);\n      ctx.scale(1 / path.zoomX, 1 / path.zoomY);\n      ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);\n      ctx.restore();\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawObject: function(ctx, forClipping) {\n      var originalFill = this.fill, originalStroke = this.stroke;\n      if (forClipping) {\n        this.fill = 'black';\n        this.stroke = '';\n        this._setClippingProperties(ctx);\n      }\n      else {\n        this._renderBackground(ctx);\n      }\n      this._render(ctx);\n      this._drawClipPath(ctx);\n      this.fill = originalFill;\n      this.stroke = originalStroke;\n    },\n\n    _drawClipPath: function(ctx) {\n      var path = this.clipPath;\n      if (!path) { return; }\n      // needed to setup a couple of variables\n      // path canvas gets overridden with this one.\n      // TODO find a better solution?\n      path.canvas = this.canvas;\n      path.shouldCache();\n      path._transformDone = true;\n      path.renderCache({ forClipping: true });\n      this.drawClipPathOnCache(ctx);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      ctx.scale(1 / this.zoomX, 1 / this.zoomY);\n      ctx.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY);\n    },\n\n    /**\n     * Check if cache is dirty\n     * @param {Boolean} skipCanvas skip canvas checks because this object is painted\n     * on parent canvas.\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (this.isNotVisible()) {\n        return false;\n      }\n      if (this._cacheCanvas && !skipCanvas && this._updateCacheCanvas()) {\n        // in this case the context is already cleared.\n        return true;\n      }\n      else {\n        if (this.dirty ||\n          (this.clipPath && this.clipPath.absolutePositioned) ||\n          (this.statefullCache && this.hasStateChanged('cacheProperties'))\n        ) {\n          if (this._cacheCanvas && !skipCanvas) {\n            var width = this.cacheWidth / this.zoomX;\n            var height = this.cacheHeight / this.zoomY;\n            this._cacheContext.clearRect(-width / 2, -height / 2, width, height);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Draws a background for the object big as its untransformed dimensions\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      if (!this.backgroundColor) {\n        return;\n      }\n      var dim = this._getNonTransformedDimensions();\n      ctx.fillStyle = this.backgroundColor;\n\n      ctx.fillRect(\n        -dim.x / 2,\n        -dim.y / 2,\n        dim.x,\n        dim.y\n      );\n      // if there is background color no other shadows\n      // should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setOpacity: function(ctx) {\n      if (this.group && !this.group._transformDone) {\n        ctx.globalAlpha = this.getObjectOpacity();\n      }\n      else {\n        ctx.globalAlpha *= this.opacity;\n      }\n    },\n\n    _setStrokeStyles: function(ctx, decl) {\n      var stroke = decl.stroke;\n      if (stroke) {\n        ctx.lineWidth = decl.strokeWidth;\n        ctx.lineCap = decl.strokeLineCap;\n        ctx.lineDashOffset = decl.strokeDashOffset;\n        ctx.lineJoin = decl.strokeLineJoin;\n        ctx.miterLimit = decl.strokeMiterLimit;\n        if (stroke.toLive) {\n          if (stroke.gradientUnits === 'percentage' || stroke.gradientTrasnform || stroke.patternTransform) {\n            // need to transform gradient in a pattern.\n            // this is a slow process. If you are hitting this codepath, and the object\n            // is not using caching, you should consider switching it on.\n            // we need a canvas as big as the current object caching canvas.\n            this._applyPatternForTransformedGradient(ctx, stroke);\n          }\n          else {\n            // is a simple gradient or pattern\n            ctx.strokeStyle = stroke.toLive(ctx, this);\n            this._applyPatternGradientTransform(ctx, stroke);\n          }\n        }\n        else {\n          // is a color\n          ctx.strokeStyle = decl.stroke;\n        }\n      }\n    },\n\n    _setFillStyles: function(ctx, decl) {\n      var fill = decl.fill;\n      if (fill) {\n        if (fill.toLive) {\n          ctx.fillStyle = fill.toLive(ctx, this);\n          this._applyPatternGradientTransform(ctx, decl.fill);\n        }\n        else {\n          ctx.fillStyle = fill;\n        }\n      }\n    },\n\n    _setClippingProperties: function(ctx) {\n      ctx.globalAlpha = 1;\n      ctx.strokeStyle = 'transparent';\n      ctx.fillStyle = '#000000';\n    },\n\n    /**\n     * @private\n     * Sets line dash\n     * @param {CanvasRenderingContext2D} ctx Context to set the dash line on\n     * @param {Array} dashArray array representing dashes\n     * @param {Function} alternative function to call if browser does not support lineDash\n     */\n    _setLineDash: function(ctx, dashArray, alternative) {\n      if (!dashArray || dashArray.length === 0) {\n        return;\n      }\n      // Spec requires the concatenation of two copies the dash list when the number of elements is odd\n      if (1 & dashArray.length) {\n        dashArray.push.apply(dashArray, dashArray);\n      }\n      if (supportsLineDash) {\n        ctx.setLineDash(dashArray);\n      }\n      else {\n        alternative && alternative(ctx);\n      }\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [styleOverride] properties to override the object style\n     */\n    _renderControls: function(ctx, styleOverride) {\n      var vpt = this.getViewportTransform(),\n          matrix = this.calcTransformMatrix(),\n          options, drawBorders, drawControls;\n      styleOverride = styleOverride || { };\n      drawBorders = typeof styleOverride.hasBorders !== 'undefined' ? styleOverride.hasBorders : this.hasBorders;\n      drawControls = typeof styleOverride.hasControls !== 'undefined' ? styleOverride.hasControls : this.hasControls;\n      matrix = fabric.util.multiplyTransformMatrices(vpt, matrix);\n      options = fabric.util.qrDecompose(matrix);\n      ctx.save();\n      ctx.translate(options.translateX, options.translateY);\n      ctx.lineWidth = 1 * this.borderScaleFactor;\n      if (!this.group) {\n        ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      }\n      if (styleOverride.forActiveSelection) {\n        ctx.rotate(degreesToRadians(options.angle));\n        drawBorders && this.drawBordersInGroup(ctx, options, styleOverride);\n      }\n      else {\n        ctx.rotate(degreesToRadians(this.angle));\n        drawBorders && this.drawBorders(ctx, styleOverride);\n      }\n      drawControls && this.drawControls(ctx, styleOverride);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      var shadow = this.shadow, canvas = this.canvas, scaling,\n          multX = (canvas && canvas.viewportTransform[0]) || 1,\n          multY = (canvas && canvas.viewportTransform[3]) || 1;\n      if (shadow.nonScaling) {\n        scaling = { scaleX: 1, scaleY: 1 };\n      }\n      else {\n        scaling = this.getObjectScaling();\n      }\n      if (canvas && canvas._isRetinaScaling()) {\n        multX *= fabric.devicePixelRatio;\n        multY *= fabric.devicePixelRatio;\n      }\n      ctx.shadowColor = shadow.color;\n      ctx.shadowBlur = shadow.blur * fabric.browserShadowBlurConstant *\n        (multX + multY) * (scaling.scaleX + scaling.scaleY) / 4;\n      ctx.shadowOffsetX = shadow.offsetX * multX * scaling.scaleX;\n      ctx.shadowOffsetY = shadow.offsetY * multY * scaling.scaleY;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _removeShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      ctx.shadowColor = '';\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} filler fabric.Pattern or fabric.Gradient\n     * @return {Object} offset.offsetX offset for text rendering\n     * @return {Object} offset.offsetY offset for text rendering\n     */\n    _applyPatternGradientTransform: function(ctx, filler) {\n      if (!filler || !filler.toLive) {\n        return { offsetX: 0, offsetY: 0 };\n      }\n      var t = filler.gradientTransform || filler.patternTransform;\n      var offsetX = -this.width / 2 + filler.offsetX || 0,\n          offsetY = -this.height / 2 + filler.offsetY || 0;\n\n      if (filler.gradientUnits === 'percentage') {\n        ctx.transform(this.width, 0, 0, this.height, offsetX, offsetY);\n      }\n      else {\n        ctx.transform(1, 0, 0, 1, offsetX, offsetY);\n      }\n      if (t) {\n        ctx.transform(t[0], t[1], t[2], t[3], t[4], t[5]);\n      }\n      return { offsetX: offsetX, offsetY: offsetY };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderPaintInOrder: function(ctx) {\n      if (this.paintFirst === 'stroke') {\n        this._renderStroke(ctx);\n        this._renderFill(ctx);\n      }\n      else {\n        this._renderFill(ctx);\n        this._renderStroke(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * function that actually render something on the context.\n     * empty here to allow Obects to work on tests to benchmark fabric functionalites\n     * not related to rendering\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(/* ctx */) {\n\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderFill: function(ctx) {\n      if (!this.fill) {\n        return;\n      }\n\n      ctx.save();\n      this._setFillStyles(ctx, this);\n      if (this.fillRule === 'evenodd') {\n        ctx.fill('evenodd');\n      }\n      else {\n        ctx.fill();\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderStroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      if (this.strokeUniform && this.group) {\n        var scaling = this.getObjectScaling();\n        ctx.scale(1 / scaling.scaleX, 1 / scaling.scaleY);\n      }\n      else if (this.strokeUniform) {\n        ctx.scale(1 / this.scaleX, 1 / this.scaleY);\n      }\n      this._setLineDash(ctx, this.strokeDashArray, this._renderDashedStroke);\n      this._setStrokeStyles(ctx, this);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * This function try to patch the missing gradientTransform on canvas gradients.\n     * transforming a context to transform the gradient, is going to transform the stroke too.\n     * we want to transform the gradient but not the stroke operation, so we create\n     * a transformed gradient on a pattern and then we use the pattern instead of the gradient.\n     * this method has drwabacks: is slow, is in low resolution, needs a patch for when the size\n     * is limited.\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {fabric.Gradient} filler a fabric gradient instance\n     */\n    _applyPatternForTransformedGradient: function(ctx, filler) {\n      var dims = this._limitCacheSize(this._getCacheCanvasDimensions()),\n          pCanvas = fabric.util.createCanvasElement(), pCtx, retinaScaling = this.canvas.getRetinaScaling(),\n          width = dims.x / this.scaleX / retinaScaling, height = dims.y / this.scaleY / retinaScaling;\n      pCanvas.width = width;\n      pCanvas.height = height;\n      pCtx = pCanvas.getContext('2d');\n      pCtx.beginPath(); pCtx.moveTo(0, 0); pCtx.lineTo(width, 0); pCtx.lineTo(width, height);\n      pCtx.lineTo(0, height); pCtx.closePath();\n      pCtx.translate(width / 2, height / 2);\n      pCtx.scale(\n        dims.zoomX / this.scaleX / retinaScaling,\n        dims.zoomY / this.scaleY / retinaScaling\n      );\n      this._applyPatternGradientTransform(pCtx, filler);\n      pCtx.fillStyle = filler.toLive(ctx);\n      pCtx.fill();\n      ctx.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2);\n      ctx.scale(\n        retinaScaling * this.scaleX / dims.zoomX,\n        retinaScaling * this.scaleY / dims.zoomY\n      );\n      ctx.strokeStyle = pCtx.createPattern(pCanvas, 'no-repeat');\n    },\n\n    /**\n     * This function is an helper for svg import. it returns the center of the object in the svg\n     * untransformed coordinates\n     * @private\n     * @return {Object} center point from element coordinates\n     */\n    _findCenterFromElement: function() {\n      return { x: this.left + this.width / 2, y: this.top + this.height / 2 };\n    },\n\n    /**\n     * This function is an helper for svg import. it decompose the transformMatrix\n     * and assign properties to object.\n     * untransformed coordinates\n     * @private\n     * @chainable\n     */\n    _assignTransformMatrixProps: function() {\n      if (this.transformMatrix) {\n        var options = fabric.util.qrDecompose(this.transformMatrix);\n        this.flipX = false;\n        this.flipY = false;\n        this.set('scaleX', options.scaleX);\n        this.set('scaleY', options.scaleY);\n        this.angle = options.angle;\n        this.skewX = options.skewX;\n        this.skewY = 0;\n      }\n    },\n\n    /**\n     * This function is an helper for svg import. it removes the transform matrix\n     * and set to object properties that fabricjs can handle\n     * @private\n     * @param {Object} preserveAspectRatioOptions\n     * @return {thisArg}\n     */\n    _removeTransformMatrix: function(preserveAspectRatioOptions) {\n      var center = this._findCenterFromElement();\n      if (this.transformMatrix) {\n        this._assignTransformMatrixProps();\n        center = fabric.util.transformPoint(center, this.transformMatrix);\n      }\n      this.transformMatrix = null;\n      if (preserveAspectRatioOptions) {\n        this.scaleX *= preserveAspectRatioOptions.scaleX;\n        this.scaleY *= preserveAspectRatioOptions.scaleY;\n        this.cropX = preserveAspectRatioOptions.cropX;\n        this.cropY = preserveAspectRatioOptions.cropY;\n        center.x += preserveAspectRatioOptions.offsetLeft;\n        center.y += preserveAspectRatioOptions.offsetTop;\n        this.width = preserveAspectRatioOptions.width;\n        this.height = preserveAspectRatioOptions.height;\n      }\n      this.setPositionByOrigin(center, 'center', 'center');\n    },\n\n    /**\n     * Clones an instance, using a callback method will work for every object.\n     * @param {Function} callback Callback is invoked with a clone as a first argument\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     */\n    clone: function(callback, propertiesToInclude) {\n      var objectForm = this.toObject(propertiesToInclude);\n      if (this.constructor.fromObject) {\n        this.constructor.fromObject(objectForm, callback);\n      }\n      else {\n        fabric.Object._fromObject('Object', objectForm, callback);\n      }\n    },\n\n    /**\n     * Creates an instance of fabric.Image out of an object\n     * makes use of toCanvasElement.\n     * Once this method was based on toDataUrl and loadImage, so it also had a quality\n     * and format option. toCanvasElement is faster and produce no loss of quality.\n     * If you need to get a real Jpeg or Png from an object, using toDataURL is the right way to do it.\n     * toCanvasElement and then toBlob from the obtained canvas is also a good option.\n     * This method is sync now, but still support the callback because we did not want to break.\n     * When fabricJS 5.0 will be planned, this will probably be changed to not have a callback.\n     * @param {Function} callback callback, invoked with an instance as a first argument\n     * @param {Object} [options] for clone as image, passed to toDataURL\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {fabric.Object} thisArg\n     */\n    cloneAsImage: function(callback, options) {\n      var canvasEl = this.toCanvasElement(options);\n      if (callback) {\n        callback(new fabric.Image(canvasEl));\n      }\n      return this;\n    },\n\n    /**\n     * Converts an object into a HTMLCanvas element\n     * @param {Object} options Options object\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {HTMLCanvasElement} Returns DOM element <canvas> with the fabric.Object\n     */\n    toCanvasElement: function(options) {\n      options || (options = { });\n\n      var utils = fabric.util, origParams = utils.saveObjectTransform(this),\n          originalGroup = this.group,\n          originalShadow = this.shadow, abs = Math.abs,\n          multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? fabric.devicePixelRatio : 1);\n      delete this.group;\n      if (options.withoutTransform) {\n        utils.resetObjectTransform(this);\n      }\n      if (options.withoutShadow) {\n        this.shadow = null;\n      }\n\n      var el = fabric.util.createCanvasElement(),\n          // skip canvas zoom and calculate with setCoords now.\n          boundingRect = this.getBoundingRect(true, true),\n          shadow = this.shadow, scaling,\n          shadowOffset = { x: 0, y: 0 }, shadowBlur,\n          width, height;\n\n      if (shadow) {\n        shadowBlur = shadow.blur;\n        if (shadow.nonScaling) {\n          scaling = { scaleX: 1, scaleY: 1 };\n        }\n        else {\n          scaling = this.getObjectScaling();\n        }\n        // consider non scaling shadow.\n        shadowOffset.x = 2 * Math.round(abs(shadow.offsetX) + shadowBlur) * (abs(scaling.scaleX));\n        shadowOffset.y = 2 * Math.round(abs(shadow.offsetY) + shadowBlur) * (abs(scaling.scaleY));\n      }\n      width = boundingRect.width + shadowOffset.x;\n      height = boundingRect.height + shadowOffset.y;\n      // if the current width/height is not an integer\n      // we need to make it so.\n      el.width = Math.ceil(width);\n      el.height = Math.ceil(height);\n      var canvas = new fabric.StaticCanvas(el, {\n        enableRetinaScaling: false,\n        renderOnAddRemove: false,\n        skipOffscreen: false,\n      });\n      if (options.format === 'jpeg') {\n        canvas.backgroundColor = '#fff';\n      }\n      this.setPositionByOrigin(new fabric.Point(canvas.width / 2, canvas.height / 2), 'center', 'center');\n\n      var originalCanvas = this.canvas;\n      canvas.add(this);\n      var canvasEl = canvas.toCanvasElement(multiplier || 1, options);\n      this.shadow = originalShadow;\n      this.set('canvas', originalCanvas);\n      if (originalGroup) {\n        this.group = originalGroup;\n      }\n      this.set(origParams).setCoords();\n      // canvas.dispose will call image.dispose that will nullify the elements\n      // since this canvas is a simple element for the process, we remove references\n      // to objects in this way in order to avoid object trashing.\n      canvas._objects = [];\n      canvas.dispose();\n      canvas = null;\n\n      return canvasEl;\n    },\n\n    /**\n     * Converts an object into a data-url-like string\n     * @param {Object} options Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     */\n    toDataURL: function(options) {\n      options || (options = { });\n      return fabric.util.toDataURL(this.toCanvasElement(options), options.format || 'png', options.quality || 1);\n    },\n\n    /**\n     * Returns true if specified type is identical to the type of an instance\n     * @param {String} type Type to check against\n     * @return {Boolean}\n     */\n    isType: function(type) {\n      return this.type === type;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance (is 1 unless subclassed)\n     */\n    complexity: function() {\n      return 1;\n    },\n\n    /**\n     * Returns a JSON representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} JSON\n     */\n    toJSON: function(propertiesToInclude) {\n      // delegate, not alias\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * Sets \"angle\" of an instance with centered rotation\n     * @param {Number} angle Angle value (in degrees)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    rotate: function(angle) {\n      var shouldCenterOrigin = (this.originX !== 'center' || this.originY !== 'center') && this.centeredRotation;\n\n      if (shouldCenterOrigin) {\n        this._setOriginToCenter();\n      }\n\n      this.set('angle', angle);\n\n      if (shouldCenterOrigin) {\n        this._resetOrigin();\n      }\n\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerH: function () {\n      this.canvas && this.canvas.centerObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterH: function () {\n      this.canvas && this.canvas.viewportCenterObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerV: function () {\n      this.canvas && this.canvas.centerObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterV: function () {\n      this.canvas && this.canvas.viewportCenterObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically and horizontally on canvas to which is was added last\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    center: function () {\n      this.canvas && this.canvas.centerObject(this);\n      return this;\n    },\n\n    /**\n     * Centers object on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenter: function () {\n      this.canvas && this.canvas.viewportCenterObject(this);\n      return this;\n    },\n\n    /**\n     * Returns coordinates of a pointer relative to an object\n     * @param {Event} e Event to operate upon\n     * @param {Object} [pointer] Pointer to operate upon (instead of event)\n     * @return {Object} Coordinates of a pointer (x, y)\n     */\n    getLocalPointer: function(e, pointer) {\n      pointer = pointer || this.canvas.getPointer(e);\n      var pClicked = new fabric.Point(pointer.x, pointer.y),\n          objectLeftTop = this._getLeftTopCoords();\n      if (this.angle) {\n        pClicked = fabric.util.rotatePoint(\n          pClicked, objectLeftTop, degreesToRadians(-this.angle));\n      }\n      return {\n        x: pClicked.x - objectLeftTop.x,\n        y: pClicked.y - objectLeftTop.y\n      };\n    },\n\n    /**\n     * Sets canvas globalCompositeOperation for specific object\n     * custom composition operation for the particular object can be specified using globalCompositeOperation property\n     * @param {CanvasRenderingContext2D} ctx Rendering canvas context\n     */\n    _setupCompositeOperation: function (ctx) {\n      if (this.globalCompositeOperation) {\n        ctx.globalCompositeOperation = this.globalCompositeOperation;\n      }\n    }\n  });\n\n  fabric.util.createAccessors && fabric.util.createAccessors(fabric.Object);\n\n  extend(fabric.Object.prototype, fabric.Observable);\n\n  /**\n   * Defines the number of fraction digits to use when serializing object values.\n   * You can use it to increase/decrease precision of such values like left, top, scaleX, scaleY, etc.\n   * @static\n   * @memberOf fabric.Object\n   * @constant\n   * @type Number\n   */\n  fabric.Object.NUM_FRACTION_DIGITS = 2;\n\n  fabric.Object._fromObject = function(className, object, callback, extraParam) {\n    var klass = fabric[className];\n    object = clone(object, true);\n    fabric.util.enlivenPatterns([object.fill, object.stroke], function(patterns) {\n      if (typeof patterns[0] !== 'undefined') {\n        object.fill = patterns[0];\n      }\n      if (typeof patterns[1] !== 'undefined') {\n        object.stroke = patterns[1];\n      }\n      fabric.util.enlivenObjects([object.clipPath], function(enlivedProps) {\n        object.clipPath = enlivedProps[0];\n        var instance = extraParam ? new klass(object[extraParam], object) : new klass(object);\n        callback && callback(instance);\n      });\n    });\n  };\n\n  /**\n   * Unique id used internally when creating SVG elements\n   * @static\n   * @memberOf fabric.Object\n   * @type Number\n   */\n  fabric.Object.__uid = 0;\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians,\n      originXOffset = {\n        left: -0.5,\n        center: 0,\n        right: 0.5\n      },\n      originYOffset = {\n        top: -0.5,\n        center: 0,\n        bottom: 0.5\n      };\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Translates the coordinates from a set of origin to another (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} fromOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} fromOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @param {String} toOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} toOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToGivenOrigin: function(point, fromOriginX, fromOriginY, toOriginX, toOriginY) {\n      var x = point.x,\n          y = point.y,\n          offsetX, offsetY, dim;\n\n      if (typeof fromOriginX === 'string') {\n        fromOriginX = originXOffset[fromOriginX];\n      }\n      else {\n        fromOriginX -= 0.5;\n      }\n\n      if (typeof toOriginX === 'string') {\n        toOriginX = originXOffset[toOriginX];\n      }\n      else {\n        toOriginX -= 0.5;\n      }\n\n      offsetX = toOriginX - fromOriginX;\n\n      if (typeof fromOriginY === 'string') {\n        fromOriginY = originYOffset[fromOriginY];\n      }\n      else {\n        fromOriginY -= 0.5;\n      }\n\n      if (typeof toOriginY === 'string') {\n        toOriginY = originYOffset[toOriginY];\n      }\n      else {\n        toOriginY -= 0.5;\n      }\n\n      offsetY = toOriginY - fromOriginY;\n\n      if (offsetX || offsetY) {\n        dim = this._getTransformedDimensions();\n        x = point.x + offsetX * dim.x;\n        y = point.y + offsetY * dim.y;\n      }\n\n      return new fabric.Point(x, y);\n    },\n\n    /**\n     * Translates the coordinates from origin to center coordinates (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToCenterPoint: function(point, originX, originY) {\n      var p = this.translateToGivenOrigin(point, originX, originY, 'center', 'center');\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, point, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Translates the coordinates from center to origin coordinates (based on the object's dimensions)\n     * @param {fabric.Point} center The point which corresponds to center of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToOriginPoint: function(center, originX, originY) {\n      var p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, center, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Returns the real center coordinates of the object\n     * @return {fabric.Point}\n     */\n    getCenterPoint: function() {\n      var leftTop = new fabric.Point(this.left, this.top);\n      return this.translateToCenterPoint(leftTop, this.originX, this.originY);\n    },\n\n    /**\n     * Returns the coordinates of the object based on center coordinates\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @return {fabric.Point}\n     */\n    // getOriginPoint: function(center) {\n    //   return this.translateToOriginPoint(center, this.originX, this.originY);\n    // },\n\n    /**\n     * Returns the coordinates of the object as if it has a different origin\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    getPointByOrigin: function(originX, originY) {\n      var center = this.getCenterPoint();\n      return this.translateToOriginPoint(center, originX, originY);\n    },\n\n    /**\n     * Returns the point in local coordinates\n     * @param {fabric.Point} point The point relative to the global coordinate system\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    toLocalPoint: function(point, originX, originY) {\n      var center = this.getCenterPoint(),\n          p, p2;\n\n      if (typeof originX !== 'undefined' && typeof originY !== 'undefined' ) {\n        p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      }\n      else {\n        p = new fabric.Point(this.left, this.top);\n      }\n\n      p2 = new fabric.Point(point.x, point.y);\n      if (this.angle) {\n        p2 = fabric.util.rotatePoint(p2, center, -degreesToRadians(this.angle));\n      }\n      return p2.subtractEquals(p);\n    },\n\n    /**\n     * Returns the point in global coordinates\n     * @param {fabric.Point} The point relative to the local coordinate system\n     * @return {fabric.Point}\n     */\n    // toGlobalPoint: function(point) {\n    //   return fabric.util.rotatePoint(point, this.getCenterPoint(), degreesToRadians(this.angle)).addEquals(new fabric.Point(this.left, this.top));\n    // },\n\n    /**\n     * Sets the position of the object taking into consideration the object's origin\n     * @param {fabric.Point} pos The new position of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {void}\n     */\n    setPositionByOrigin: function(pos, originX, originY) {\n      var center = this.translateToCenterPoint(pos, originX, originY),\n          position = this.translateToOriginPoint(center, this.originX, this.originY);\n      this.set('left', position.x);\n      this.set('top', position.y);\n    },\n\n    /**\n     * @param {String} to One of 'left', 'center', 'right'\n     */\n    adjustPosition: function(to) {\n      var angle = degreesToRadians(this.angle),\n          hypotFull = this.getScaledWidth(),\n          xFull = fabric.util.cos(angle) * hypotFull,\n          yFull = fabric.util.sin(angle) * hypotFull,\n          offsetFrom, offsetTo;\n\n      //TODO: this function does not consider mixed situation like top, center.\n      if (typeof this.originX === 'string') {\n        offsetFrom = originXOffset[this.originX];\n      }\n      else {\n        offsetFrom = this.originX - 0.5;\n      }\n      if (typeof to === 'string') {\n        offsetTo = originXOffset[to];\n      }\n      else {\n        offsetTo = to - 0.5;\n      }\n      this.left += xFull * (offsetTo - offsetFrom);\n      this.top += yFull * (offsetTo - offsetFrom);\n      this.setCoords();\n      this.originX = to;\n    },\n\n    /**\n     * Sets the origin/position of the object to it's center point\n     * @private\n     * @return {void}\n     */\n    _setOriginToCenter: function() {\n      this._originalOriginX = this.originX;\n      this._originalOriginY = this.originY;\n\n      var center = this.getCenterPoint();\n\n      this.originX = 'center';\n      this.originY = 'center';\n\n      this.left = center.x;\n      this.top = center.y;\n    },\n\n    /**\n     * Resets the origin/position of the object to it's original origin\n     * @private\n     * @return {void}\n     */\n    _resetOrigin: function() {\n      var originPoint = this.translateToOriginPoint(\n        this.getCenterPoint(),\n        this._originalOriginX,\n        this._originalOriginY);\n\n      this.originX = this._originalOriginX;\n      this.originY = this._originalOriginY;\n\n      this.left = originPoint.x;\n      this.top = originPoint.y;\n\n      this._originalOriginX = null;\n      this._originalOriginY = null;\n    },\n\n    /**\n     * @private\n     */\n    _getLeftTopCoords: function() {\n      return this.translateToOriginPoint(this.getCenterPoint(), 'left', 'top');\n    },\n  });\n\n})();\n\n\n(function() {\n\n  function arrayFromCoords(coords) {\n    return [\n      new fabric.Point(coords.tl.x, coords.tl.y),\n      new fabric.Point(coords.tr.x, coords.tr.y),\n      new fabric.Point(coords.br.x, coords.br.y),\n      new fabric.Point(coords.bl.x, coords.bl.y)\n    ];\n  }\n\n  var util = fabric.util,\n      degreesToRadians = util.degreesToRadians,\n      multiplyMatrices = util.multiplyTransformMatrices,\n      transformPoint = util.transformPoint;\n\n  util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Describe object's corner position in canvas element coordinates.\n     * properties are depending on control keys and padding the main controls.\n     * each property is an object with x, y and corner.\n     * The `corner` property contains in a similar manner the 4 points of the\n     * interactive area of the corner.\n     * The coordinates depends from the controls positionHandler and are used\n     * to draw and locate controls\n     * @memberOf fabric.Object.prototype\n     */\n    oCoords: null,\n\n    /**\n     * Describe object's corner position in canvas object absolute coordinates\n     * properties are tl,tr,bl,br and describe the four main corner.\n     * each property is an object with x, y, instance of Fabric.Point.\n     * The coordinates depends from this properties: width, height, scaleX, scaleY\n     * skewX, skewY, angle, strokeWidth, top, left.\n     * Those coordinates are useful to understand where an object is. They get updated\n     * with oCoords but they do not need to be updated when zoom or panning change.\n     * The coordinates get updated with @method setCoords.\n     * You can calculate them without updating with @method calcACoords();\n     * @memberOf fabric.Object.prototype\n     */\n    aCoords: null,\n\n    /**\n     * Describe object's corner position in canvas element coordinates.\n     * includes padding. Used of object detection.\n     * set and refreshed with setCoords and calcCoords.\n     * @memberOf fabric.Object.prototype\n     */\n    lineCoords: null,\n\n    /**\n     * storage for object transform matrix\n     */\n    ownMatrixCache: null,\n\n    /**\n     * storage for object full transform matrix\n     */\n    matrixCache: null,\n\n    /**\n     * custom controls interface\n     * controls are added by default_controls.js\n     */\n    controls: { },\n\n    /**\n     * return correct set of coordinates for intersection\n     * this will return either aCoords or lineCoords.\n     * @param {Boolean} absolute will return aCoords if true or lineCoords\n     * @return {Object} {tl, tr, br, bl} points\n     */\n    _getCoords: function(absolute, calculate) {\n      if (calculate) {\n        return (absolute ? this.calcACoords() : this.calcLineCoords());\n      }\n      if (!this.aCoords || !this.lineCoords) {\n        this.setCoords(true);\n      }\n      return (absolute ? this.aCoords : this.lineCoords);\n    },\n\n    /**\n     * return correct set of coordinates for intersection\n     * this will return either aCoords or lineCoords.\n     * The coords are returned in an array.\n     * @return {Array} [tl, tr, br, bl] of points\n     */\n    getCoords: function(absolute, calculate) {\n      return arrayFromCoords(this._getCoords(absolute, calculate));\n    },\n\n    /**\n     * Checks if object intersects with an area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object intersects with an area formed by 2 points\n     */\n    intersectsWithRect: function(pointTL, pointBR, absolute, calculate) {\n      var coords = this.getCoords(absolute, calculate),\n          intersection = fabric.Intersection.intersectPolygonRectangle(\n            coords,\n            pointTL,\n            pointBR\n          );\n      return intersection.status === 'Intersection';\n    },\n\n    /**\n     * Checks if object intersects with another object\n     * @param {Object} other Object to test\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object intersects with another object\n     */\n    intersectsWithObject: function(other, absolute, calculate) {\n      var intersection = fabric.Intersection.intersectPolygonPolygon(\n        this.getCoords(absolute, calculate),\n        other.getCoords(absolute, calculate)\n      );\n\n      return intersection.status === 'Intersection'\n        || other.isContainedWithinObject(this, absolute, calculate)\n        || this.isContainedWithinObject(other, absolute, calculate);\n    },\n\n    /**\n     * Checks if object is fully contained within area of another object\n     * @param {Object} other Object to test\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is fully contained within area of another object\n     */\n    isContainedWithinObject: function(other, absolute, calculate) {\n      var points = this.getCoords(absolute, calculate),\n          otherCoords = absolute ? other.aCoords : other.lineCoords,\n          i = 0, lines = other._getImageLines(otherCoords);\n      for (; i < 4; i++) {\n        if (!other.containsPoint(points[i], lines)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Checks if object is fully contained within area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is fully contained within area formed by 2 points\n     */\n    isContainedWithinRect: function(pointTL, pointBR, absolute, calculate) {\n      var boundingRect = this.getBoundingRect(absolute, calculate);\n\n      return (\n        boundingRect.left >= pointTL.x &&\n        boundingRect.left + boundingRect.width <= pointBR.x &&\n        boundingRect.top >= pointTL.y &&\n        boundingRect.top + boundingRect.height <= pointBR.y\n      );\n    },\n\n    /**\n     * Checks if point is inside the object\n     * @param {fabric.Point} point Point to check against\n     * @param {Object} [lines] object returned from @method _getImageLines\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if point is inside the object\n     */\n    containsPoint: function(point, lines, absolute, calculate) {\n      var coords = this._getCoords(absolute, calculate),\n          lines = lines || this._getImageLines(coords),\n          xPoints = this._findCrossPoints(point, lines);\n      // if xPoints is odd then point is inside the object\n      return (xPoints !== 0 && xPoints % 2 === 1);\n    },\n\n    /**\n     * Checks if object is contained within the canvas with current viewportTransform\n     * the check is done stopping at first point that appears on screen\n     * @param {Boolean} [calculate] use coordinates of current position instead of .aCoords\n     * @return {Boolean} true if object is fully or partially contained within canvas\n     */\n    isOnScreen: function(calculate) {\n      if (!this.canvas) {\n        return false;\n      }\n      var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;\n      var points = this.getCoords(true, calculate);\n      // if some point is on screen, the object is on screen.\n      if (points.some(function(point) {\n        return point.x <= pointBR.x && point.x >= pointTL.x &&\n        point.y <= pointBR.y && point.y >= pointTL.y;\n      })) {\n        return true;\n      }\n      // no points on screen, check intersection with absolute coordinates\n      if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {\n        return true;\n      }\n      return this._containsCenterOfCanvas(pointTL, pointBR, calculate);\n    },\n\n    /**\n     * Checks if the object contains the midpoint between canvas extremities\n     * Does not make sense outside the context of isOnScreen and isPartiallyOnScreen\n     * @private\n     * @param {Fabric.Point} pointTL Top Left point\n     * @param {Fabric.Point} pointBR Top Right point\n     * @param {Boolean} calculate use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if the object contains the point\n     */\n    _containsCenterOfCanvas: function(pointTL, pointBR, calculate) {\n      // worst case scenario the object is so big that contains the screen\n      var centerPoint = { x: (pointTL.x + pointBR.x) / 2, y: (pointTL.y + pointBR.y) / 2 };\n      if (this.containsPoint(centerPoint, null, true, calculate)) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Checks if object is partially contained within the canvas with current viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is partially contained within canvas\n     */\n    isPartiallyOnScreen: function(calculate) {\n      if (!this.canvas) {\n        return false;\n      }\n      var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;\n      if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {\n        return true;\n      }\n      var allPointsAreOutside = this.getCoords(true, calculate).every(function(point) {\n        return (point.x >= pointBR.x || point.x <= pointTL.x) &&\n        (point.y >= pointBR.y || point.y <= pointTL.y);\n      });\n      return allPointsAreOutside && this._containsCenterOfCanvas(pointTL, pointBR, calculate);\n    },\n\n    /**\n     * Method that returns an object with the object edges in it, given the coordinates of the corners\n     * @private\n     * @param {Object} oCoords Coordinates of the object corners\n     */\n    _getImageLines: function(oCoords) {\n\n      var lines = {\n        topline: {\n          o: oCoords.tl,\n          d: oCoords.tr\n        },\n        rightline: {\n          o: oCoords.tr,\n          d: oCoords.br\n        },\n        bottomline: {\n          o: oCoords.br,\n          d: oCoords.bl\n        },\n        leftline: {\n          o: oCoords.bl,\n          d: oCoords.tl\n        }\n      };\n\n      // // debugging\n      // if (this.canvas.contextTop) {\n      //   this.canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n      // }\n\n      return lines;\n    },\n\n    /**\n     * Helper method to determine how many cross points are between the 4 object edges\n     * and the horizontal line determined by a point on canvas\n     * @private\n     * @param {fabric.Point} point Point to check\n     * @param {Object} lines Coordinates of the object being evaluated\n     */\n    // remove yi, not used but left code here just in case.\n    _findCrossPoints: function(point, lines) {\n      var b1, b2, a1, a2, xi, // yi,\n          xcount = 0,\n          iLine;\n\n      for (var lineKey in lines) {\n        iLine = lines[lineKey];\n        // optimisation 1: line below point. no cross\n        if ((iLine.o.y < point.y) && (iLine.d.y < point.y)) {\n          continue;\n        }\n        // optimisation 2: line above point. no cross\n        if ((iLine.o.y >= point.y) && (iLine.d.y >= point.y)) {\n          continue;\n        }\n        // optimisation 3: vertical line case\n        if ((iLine.o.x === iLine.d.x) && (iLine.o.x >= point.x)) {\n          xi = iLine.o.x;\n          // yi = point.y;\n        }\n        // calculate the intersection point\n        else {\n          b1 = 0;\n          b2 = (iLine.d.y - iLine.o.y) / (iLine.d.x - iLine.o.x);\n          a1 = point.y - b1 * point.x;\n          a2 = iLine.o.y - b2 * iLine.o.x;\n\n          xi = -(a1 - a2) / (b1 - b2);\n          // yi = a1 + b1 * xi;\n        }\n        // dont count xi < point.x cases\n        if (xi >= point.x) {\n          xcount += 1;\n        }\n        // optimisation 4: specific for square images\n        if (xcount === 2) {\n          break;\n        }\n      }\n      return xcount;\n    },\n\n    /**\n     * Returns coordinates of object's bounding rectangle (left, top, width, height)\n     * the box is intended as aligned to axis of canvas.\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords / .aCoords\n     * @return {Object} Object with left, top, width, height properties\n     */\n    getBoundingRect: function(absolute, calculate) {\n      var coords = this.getCoords(absolute, calculate);\n      return util.makeBoundingBoxFromPoints(coords);\n    },\n\n    /**\n     * Returns width of an object's bounding box counting transformations\n     * before 2.0 it was named getWidth();\n     * @return {Number} width value\n     */\n    getScaledWidth: function() {\n      return this._getTransformedDimensions().x;\n    },\n\n    /**\n     * Returns height of an object bounding box counting transformations\n     * before 2.0 it was named getHeight();\n     * @return {Number} height value\n     */\n    getScaledHeight: function() {\n      return this._getTransformedDimensions().y;\n    },\n\n    /**\n     * Makes sure the scale is valid and modifies it if necessary\n     * @private\n     * @param {Number} value\n     * @return {Number}\n     */\n    _constrainScale: function(value) {\n      if (Math.abs(value) < this.minScaleLimit) {\n        if (value < 0) {\n          return -this.minScaleLimit;\n        }\n        else {\n          return this.minScaleLimit;\n        }\n      }\n      else if (value === 0) {\n        return 0.0001;\n      }\n      return value;\n    },\n\n    /**\n     * Scales an object (equally by x and y)\n     * @param {Number} value Scale factor\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scale: function(value) {\n      this._set('scaleX', value);\n      this._set('scaleY', value);\n      return this.setCoords();\n    },\n\n    /**\n     * Scales an object to a given width, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New width value\n     * @param {Boolean} absolute ignore viewport\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToWidth: function(value, absolute) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect(absolute).width / this.getScaledWidth();\n      return this.scale(value / this.width / boundingRectFactor);\n    },\n\n    /**\n     * Scales an object to a given height, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New height value\n     * @param {Boolean} absolute ignore viewport\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToHeight: function(value, absolute) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect(absolute).height / this.getScaledHeight();\n      return this.scale(value / this.height / boundingRectFactor);\n    },\n\n    /**\n     * Calculates and returns the .coords of an object.\n     * unused by the library, only for the end dev.\n     * @return {Object} Object with tl, tr, br, bl ....\n     * @chainable\n     * @deprecated\n     */\n    calcCoords: function(absolute) {\n      // this is a compatibility function to avoid removing calcCoords now.\n      if (absolute) {\n        return this.calcACoords();\n      }\n      return this.calcOCoords();\n    },\n\n    calcLineCoords: function() {\n      var vpt = this.getViewportTransform(),\n          padding = this.padding, angle = degreesToRadians(this.angle),\n          cos = util.cos(angle), sin = util.sin(angle),\n          cosP = cos * padding, sinP = sin * padding, cosPSinP = cosP + sinP,\n          cosPMinusSinP = cosP - sinP, aCoords = this.calcACoords();\n\n      var lineCoords = {\n        tl: transformPoint(aCoords.tl, vpt),\n        tr: transformPoint(aCoords.tr, vpt),\n        bl: transformPoint(aCoords.bl, vpt),\n        br: transformPoint(aCoords.br, vpt),\n      };\n\n      if (padding) {\n        lineCoords.tl.x -= cosPMinusSinP;\n        lineCoords.tl.y -= cosPSinP;\n        lineCoords.tr.x += cosPSinP;\n        lineCoords.tr.y -= cosPMinusSinP;\n        lineCoords.bl.x -= cosPSinP;\n        lineCoords.bl.y += cosPMinusSinP;\n        lineCoords.br.x += cosPMinusSinP;\n        lineCoords.br.y += cosPSinP;\n      }\n\n      return lineCoords;\n    },\n\n    calcOCoords: function() {\n      var rotateMatrix = this._calcRotateMatrix(),\n          translateMatrix = this._calcTranslateMatrix(),\n          vpt = this.getViewportTransform(),\n          startMatrix = multiplyMatrices(vpt, translateMatrix),\n          finalMatrix = multiplyMatrices(startMatrix, rotateMatrix),\n          finalMatrix = multiplyMatrices(finalMatrix, [1 / vpt[0], 0, 0, 1 / vpt[3], 0, 0]),\n          dim = this._calculateCurrentDimensions(),\n          coords = {};\n      this.forEachControl(function(control, key, fabricObject) {\n        coords[key] = control.positionHandler(dim, finalMatrix, fabricObject);\n      });\n\n      // debug code\n      // var canvas = this.canvas;\n      // setTimeout(function() {\n      //   canvas.contextTop.clearRect(0, 0, 700, 700);\n      //   canvas.contextTop.fillStyle = 'green';\n      //   Object.keys(coords).forEach(function(key) {\n      //     var control = coords[key];\n      //     canvas.contextTop.fillRect(control.x, control.y, 3, 3);\n      //   });\n      // }, 50);\n      return coords;\n    },\n\n    calcACoords: function() {\n      var rotateMatrix = this._calcRotateMatrix(),\n          translateMatrix = this._calcTranslateMatrix(),\n          finalMatrix = multiplyMatrices(translateMatrix, rotateMatrix),\n          dim = this._getTransformedDimensions(),\n          w = dim.x / 2, h = dim.y / 2;\n      return {\n        // corners\n        tl: transformPoint({ x: -w, y: -h }, finalMatrix),\n        tr: transformPoint({ x: w, y: -h }, finalMatrix),\n        bl: transformPoint({ x: -w, y: h }, finalMatrix),\n        br: transformPoint({ x: w, y: h }, finalMatrix)\n      };\n    },\n\n    /**\n     * Sets corner and controls position coordinates based on current angle, width and height, left and top.\n     * oCoords are used to find the corners\n     * aCoords are used to quickly find an object on the canvas\n     * lineCoords are used to quickly find object during pointer events.\n     * See {@link https://github.com/kangax/fabric.js/wiki/When-to-call-setCoords|When-to-call-setCoords}\n     * @param {Boolean} [skipCorners] skip calculation of oCoords.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setCoords: function(skipCorners) {\n      this.aCoords = this.calcACoords();\n      // in case we are in a group, for how the inner group target check works,\n      // lineCoords are exactly aCoords. Since the vpt gets absorbed by the normalized pointer.\n      this.lineCoords = this.group ? this.aCoords : this.calcLineCoords();\n      if (skipCorners) {\n        return this;\n      }\n      // set coordinates of the draggable boxes in the corners used to scale/rotate the image\n      this.oCoords = this.calcOCoords();\n      this._setCornerCoords && this._setCornerCoords();\n      return this;\n    },\n\n    /**\n     * calculate rotation matrix of an object\n     * @return {Array} rotation matrix for the object\n     */\n    _calcRotateMatrix: function() {\n      return util.calcRotateMatrix(this);\n    },\n\n    /**\n     * calculate the translation matrix for an object transform\n     * @return {Array} rotation matrix for the object\n     */\n    _calcTranslateMatrix: function() {\n      var center = this.getCenterPoint();\n      return [1, 0, 0, 1, center.x, center.y];\n    },\n\n    transformMatrixKey: function(skipGroup) {\n      var sep = '_', prefix = '';\n      if (!skipGroup && this.group) {\n        prefix = this.group.transformMatrixKey(skipGroup) + sep;\n      };\n      return prefix + this.top + sep + this.left + sep + this.scaleX + sep + this.scaleY +\n        sep + this.skewX + sep + this.skewY + sep + this.angle + sep + this.originX + sep + this.originY +\n        sep + this.width + sep + this.height + sep + this.strokeWidth + this.flipX + this.flipY;\n    },\n\n    /**\n     * calculate transform matrix that represents the current transformations from the\n     * object's properties.\n     * @param {Boolean} [skipGroup] return transform matrix for object not counting parent transformations\n     * There are some situation in which this is useful to avoid the fake rotation.\n     * @return {Array} transform matrix for the object\n     */\n    calcTransformMatrix: function(skipGroup) {\n      var matrix = this.calcOwnMatrix();\n      if (skipGroup || !this.group) {\n        return matrix;\n      }\n      var key = this.transformMatrixKey(skipGroup), cache = this.matrixCache || (this.matrixCache = {});\n      if (cache.key === key) {\n        return cache.value;\n      }\n      if (this.group) {\n        matrix = multiplyMatrices(this.group.calcTransformMatrix(false), matrix);\n      }\n      cache.key = key;\n      cache.value = matrix;\n      return matrix;\n    },\n\n    /**\n     * calculate transform matrix that represents the current transformations from the\n     * object's properties, this matrix does not include the group transformation\n     * @return {Array} transform matrix for the object\n     */\n    calcOwnMatrix: function() {\n      var key = this.transformMatrixKey(true), cache = this.ownMatrixCache || (this.ownMatrixCache = {});\n      if (cache.key === key) {\n        return cache.value;\n      }\n      var tMatrix = this._calcTranslateMatrix(),\n          options = {\n            angle: this.angle,\n            translateX: tMatrix[4],\n            translateY: tMatrix[5],\n            scaleX: this.scaleX,\n            scaleY: this.scaleY,\n            skewX: this.skewX,\n            skewY: this.skewY,\n            flipX: this.flipX,\n            flipY: this.flipY,\n          };\n      cache.key = key;\n      cache.value = util.composeMatrix(options);\n      return cache.value;\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     * @deprecated since 3.4.0, please use fabric.util._calcDimensionsTransformMatrix\n     * not including or including flipX, flipY to emulate the flipping boolean\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _calcDimensionsTransformMatrix: function(skewX, skewY, flipping) {\n      return util.calcDimensionsMatrix({\n        skewX: skewX,\n        skewY: skewY,\n        scaleX: this.scaleX * (flipping && this.flipX ? -1 : 1),\n        scaleY: this.scaleY * (flipping && this.flipY ? -1 : 1)\n      });\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _getNonTransformedDimensions: function() {\n      var strokeWidth = this.strokeWidth,\n          w = this.width + strokeWidth,\n          h = this.height + strokeWidth;\n      return { x: w, y: h };\n    },\n\n    /*\n     * Calculate object bounding box dimensions from its properties scale, skew.\n     * @param {Number} skewX, a value to override current skewX\n     * @param {Number} skewY, a value to override current skewY\n     * @private\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _getTransformedDimensions: function(skewX, skewY) {\n      if (typeof skewX === 'undefined') {\n        skewX = this.skewX;\n      }\n      if (typeof skewY === 'undefined') {\n        skewY = this.skewY;\n      }\n      var dimensions = this._getNonTransformedDimensions(), dimX, dimY,\n          noSkew = skewX === 0 && skewY === 0;\n\n      if (this.strokeUniform) {\n        dimX = this.width;\n        dimY = this.height;\n      }\n      else {\n        dimX = dimensions.x;\n        dimY = dimensions.y;\n      }\n      if (noSkew) {\n        return this._finalizeDimensions(dimX * this.scaleX, dimY * this.scaleY);\n      }\n      var bbox = util.sizeAfterTransform(dimX, dimY, {\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        skewX: skewX,\n        skewY: skewY,\n      });\n      return this._finalizeDimensions(bbox.x, bbox.y);\n    },\n\n    /*\n     * Calculate object bounding box dimensions from its properties scale, skew.\n     * @param Number width width of the bbox\n     * @param Number height height of the bbox\n     * @private\n     * @return {Object} .x finalized width dimension\n     * @return {Object} .y finalized height dimension\n     */\n    _finalizeDimensions: function(width, height) {\n      return this.strokeUniform ?\n        { x: width + this.strokeWidth, y: height + this.strokeWidth }\n        :\n        { x: width, y: height };\n    },\n\n    /*\n     * Calculate object dimensions for controls box, including padding and canvas zoom.\n     * and active selection\n     * private\n     */\n    _calculateCurrentDimensions: function()  {\n      var vpt = this.getViewportTransform(),\n          dim = this._getTransformedDimensions(),\n          p = transformPoint(dim, vpt, true);\n      return p.scalarAdd(2 * this.padding);\n    },\n  });\n})();\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * Moves an object to the bottom of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendToBack: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendToBack.call(this.group, this);\n    }\n    else if (this.canvas) {\n      this.canvas.sendToBack(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to the top of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringToFront: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringToFront.call(this.group, this);\n    }\n    else if (this.canvas) {\n      this.canvas.bringToFront(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object down in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendBackwards: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, intersecting);\n    }\n    else if (this.canvas) {\n      this.canvas.sendBackwards(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object up in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringForward: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringForward.call(this.group, this, intersecting);\n    }\n    else if (this.canvas) {\n      this.canvas.bringForward(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to specified level in stack of drawn objects\n   * @param {Number} index New position of object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  moveTo: function(index) {\n    if (this.group && this.group.type !== 'activeSelection') {\n      fabric.StaticCanvas.prototype.moveTo.call(this.group, this, index);\n    }\n    else if (this.canvas) {\n      this.canvas.moveTo(this, index);\n    }\n    return this;\n  }\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  function getSvgColorString(prop, value) {\n    if (!value) {\n      return prop + ': none; ';\n    }\n    else if (value.toLive) {\n      return prop + ': url(#SVGID_' + value.id + '); ';\n    }\n    else {\n      var color = new fabric.Color(value),\n          str = prop + ': ' + color.toRgb() + '; ',\n          opacity = color.getAlpha();\n      if (opacity !== 1) {\n        //change the color in rgb + opacity\n        str += prop + '-opacity: ' + opacity.toString() + '; ';\n      }\n      return str;\n    }\n  }\n\n  var toFixed = fabric.util.toFixed;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n\n      var fillRule = this.fillRule ? this.fillRule : 'nonzero',\n          strokeWidth = this.strokeWidth ? this.strokeWidth : '0',\n          strokeDashArray = this.strokeDashArray ? this.strokeDashArray.join(' ') : 'none',\n          strokeDashOffset = this.strokeDashOffset ? this.strokeDashOffset : '0',\n          strokeLineCap = this.strokeLineCap ? this.strokeLineCap : 'butt',\n          strokeLineJoin = this.strokeLineJoin ? this.strokeLineJoin : 'miter',\n          strokeMiterLimit = this.strokeMiterLimit ? this.strokeMiterLimit : '4',\n          opacity = typeof this.opacity !== 'undefined' ? this.opacity : '1',\n          visibility = this.visible ? '' : ' visibility: hidden;',\n          filter = skipShadow ? '' : this.getSvgFilter(),\n          fill = getSvgColorString('fill', this.fill),\n          stroke = getSvgColorString('stroke', this.stroke);\n\n      return [\n        stroke,\n        'stroke-width: ', strokeWidth, '; ',\n        'stroke-dasharray: ', strokeDashArray, '; ',\n        'stroke-linecap: ', strokeLineCap, '; ',\n        'stroke-dashoffset: ', strokeDashOffset, '; ',\n        'stroke-linejoin: ', strokeLineJoin, '; ',\n        'stroke-miterlimit: ', strokeMiterLimit, '; ',\n        fill,\n        'fill-rule: ', fillRule, '; ',\n        'opacity: ', opacity, ';',\n        filter,\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns styles-string for svg-export\n     * @param {Object} style the object from which to retrieve style properties\n     * @param {Boolean} useWhiteSpace a boolean to include an additional attribute in the style.\n     * @return {String}\n     */\n    getSvgSpanStyles: function(style, useWhiteSpace) {\n      var term = '; ';\n      var fontFamily = style.fontFamily ?\n        'font-family: ' + (((style.fontFamily.indexOf('\\'') === -1 && style.fontFamily.indexOf('\"') === -1) ?\n          '\\'' + style.fontFamily  + '\\'' : style.fontFamily)) + term : '';\n      var strokeWidth = style.strokeWidth ? 'stroke-width: ' + style.strokeWidth + term : '',\n          fontFamily = fontFamily,\n          fontSize = style.fontSize ? 'font-size: ' + style.fontSize + 'px' + term : '',\n          fontStyle = style.fontStyle ? 'font-style: ' + style.fontStyle + term : '',\n          fontWeight = style.fontWeight ? 'font-weight: ' + style.fontWeight + term : '',\n          fill = style.fill ? getSvgColorString('fill', style.fill) : '',\n          stroke = style.stroke ? getSvgColorString('stroke', style.stroke) : '',\n          textDecoration = this.getSvgTextDecoration(style),\n          deltaY = style.deltaY ? 'baseline-shift: ' + (-style.deltaY) + '; ' : '';\n      if (textDecoration) {\n        textDecoration = 'text-decoration: ' + textDecoration + term;\n      }\n\n      return [\n        stroke,\n        strokeWidth,\n        fontFamily,\n        fontSize,\n        fontStyle,\n        fontWeight,\n        textDecoration,\n        fill,\n        deltaY,\n        useWhiteSpace ? 'white-space: pre; ' : ''\n      ].join('');\n    },\n\n    /**\n     * Returns text-decoration property for svg-export\n     * @param {Object} style the object from which to retrieve style properties\n     * @return {String}\n     */\n    getSvgTextDecoration: function(style) {\n      return ['overline', 'underline', 'line-through'].filter(function(decoration) {\n        return style[decoration.replace('-', '')];\n      }).join(' ');\n    },\n\n    /**\n     * Returns filter for svg shadow\n     * @return {String}\n     */\n    getSvgFilter: function() {\n      return this.shadow ? 'filter: url(#SVGID_' + this.shadow.id + ');' : '';\n    },\n\n    /**\n     * Returns id attribute for svg output\n     * @return {String}\n     */\n    getSvgCommons: function() {\n      return [\n        this.id ? 'id=\"' + this.id + '\" ' : '',\n        this.clipPath ? 'clip-path=\"url(#' + this.clipPath.clipPathId + ')\" ' : '',\n      ].join('');\n    },\n\n    /**\n     * Returns transform-string for svg-export\n     * @param {Boolean} use the full transform or the single object one.\n     * @return {String}\n     */\n    getSvgTransform: function(full, additionalTransform) {\n      var transform = full ? this.calcTransformMatrix() : this.calcOwnMatrix(),\n          svgTransform = 'transform=\"' + fabric.util.matrixToSVG(transform);\n      return svgTransform +\n        (additionalTransform || '') + '\" ';\n    },\n\n    _setSVGBg: function(textBgRects) {\n      if (this.backgroundColor) {\n        var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n        textBgRects.push(\n          '\\t\\t<rect ',\n          this._getFillAttributes(this.backgroundColor),\n          ' x=\"',\n          toFixed(-this.width / 2, NUM_FRACTION_DIGITS),\n          '\" y=\"',\n          toFixed(-this.height / 2, NUM_FRACTION_DIGITS),\n          '\" width=\"',\n          toFixed(this.width, NUM_FRACTION_DIGITS),\n          '\" height=\"',\n          toFixed(this.height, NUM_FRACTION_DIGITS),\n          '\"></rect>\\n');\n      }\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return this._createBaseSVGMarkup(this._toSVG(reviver), { reviver: reviver });\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      return '\\t' + this._createBaseClipPathSVGMarkup(this._toSVG(reviver), { reviver: reviver });\n    },\n\n    /**\n     * @private\n     */\n    _createBaseClipPathSVGMarkup: function(objectMarkup, options) {\n      options = options || {};\n      var reviver = options.reviver,\n          additionalTransform = options.additionalTransform || '',\n          commonPieces = [\n            this.getSvgTransform(true, additionalTransform),\n            this.getSvgCommons(),\n          ].join(''),\n          // insert commons in the markup, style and svgCommons\n          index = objectMarkup.indexOf('COMMON_PARTS');\n      objectMarkup[index] = commonPieces;\n      return reviver ? reviver(objectMarkup.join('')) : objectMarkup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _createBaseSVGMarkup: function(objectMarkup, options) {\n      options = options || {};\n      var noStyle = options.noStyle,\n          reviver = options.reviver,\n          styleInfo = noStyle ? '' : 'style=\"' + this.getSvgStyles() + '\" ',\n          shadowInfo = options.withShadow ? 'style=\"' + this.getSvgFilter() + '\" ' : '',\n          clipPath = this.clipPath,\n          vectorEffect = this.strokeUniform ? 'vector-effect=\"non-scaling-stroke\" ' : '',\n          absoluteClipPath = clipPath && clipPath.absolutePositioned,\n          stroke = this.stroke, fill = this.fill, shadow = this.shadow,\n          commonPieces, markup = [], clipPathMarkup,\n          // insert commons in the markup, style and svgCommons\n          index = objectMarkup.indexOf('COMMON_PARTS'),\n          additionalTransform = options.additionalTransform;\n      if (clipPath) {\n        clipPath.clipPathId = 'CLIPPATH_' + fabric.Object.__uid++;\n        clipPathMarkup = '<clipPath id=\"' + clipPath.clipPathId + '\" >\\n' +\n          clipPath.toClipPathSVG(reviver) +\n          '</clipPath>\\n';\n      }\n      if (absoluteClipPath) {\n        markup.push(\n          '<g ', shadowInfo, this.getSvgCommons(), ' >\\n'\n        );\n      }\n      markup.push(\n        '<g ',\n        this.getSvgTransform(false),\n        !absoluteClipPath ? shadowInfo + this.getSvgCommons() : '',\n        ' >\\n'\n      );\n      commonPieces = [\n        styleInfo,\n        vectorEffect,\n        noStyle ? '' : this.addPaintOrder(), ' ',\n        additionalTransform ? 'transform=\"' + additionalTransform + '\" ' : '',\n      ].join('');\n      objectMarkup[index] = commonPieces;\n      if (fill && fill.toLive) {\n        markup.push(fill.toSVG(this));\n      }\n      if (stroke && stroke.toLive) {\n        markup.push(stroke.toSVG(this));\n      }\n      if (shadow) {\n        markup.push(shadow.toSVG(this));\n      }\n      if (clipPath) {\n        markup.push(clipPathMarkup);\n      }\n      markup.push(objectMarkup.join(''));\n      markup.push('</g>\\n');\n      absoluteClipPath && markup.push('</g>\\n');\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n\n    addPaintOrder: function() {\n      return this.paintFirst !== 'fill' ? ' paint-order=\"' + this.paintFirst + '\" ' : '';\n    }\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function() {\n\n  var extend = fabric.util.object.extend,\n      originalSet = 'stateProperties';\n\n  /*\n    Depends on `stateProperties`\n  */\n  function saveProps(origin, destination, props) {\n    var tmpObj = { }, deep = true;\n    props.forEach(function(prop) {\n      tmpObj[prop] = origin[prop];\n    });\n\n    extend(origin[destination], tmpObj, deep);\n  }\n\n  function _isEqual(origValue, currentValue, firstPass) {\n    if (origValue === currentValue) {\n      // if the objects are identical, return\n      return true;\n    }\n    else if (Array.isArray(origValue)) {\n      if (!Array.isArray(currentValue) || origValue.length !== currentValue.length) {\n        return false;\n      }\n      for (var i = 0, len = origValue.length; i < len; i++) {\n        if (!_isEqual(origValue[i], currentValue[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    else if (origValue && typeof origValue === 'object') {\n      var keys = Object.keys(origValue), key;\n      if (!currentValue ||\n          typeof currentValue !== 'object' ||\n          (!firstPass && keys.length !== Object.keys(currentValue).length)\n      ) {\n        return false;\n      }\n      for (var i = 0, len = keys.length; i < len; i++) {\n        key = keys[i];\n        // since clipPath is in the statefull cache list and the clipPath objects\n        // would be iterated as an object, this would lead to possible infinite recursion\n        // we do not want to compare those.\n        if (key === 'canvas' || key === 'group') {\n          continue;\n        }\n        if (!_isEqual(origValue[key], currentValue[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Returns true if object state (one of its state properties) was changed\n     * @param {String} [propertySet] optional name for the set of property we want to save\n     * @return {Boolean} true if instance' state has changed since `{@link fabric.Object#saveState}` was called\n     */\n    hasStateChanged: function(propertySet) {\n      propertySet = propertySet || originalSet;\n      var dashedPropertySet = '_' + propertySet;\n      if (Object.keys(this[dashedPropertySet]).length < this[propertySet].length) {\n        return true;\n      }\n      return !_isEqual(this[dashedPropertySet], this, true);\n    },\n\n    /**\n     * Saves state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    saveState: function(options) {\n      var propertySet = options && options.propertySet || originalSet,\n          destination = '_' + propertySet;\n      if (!this[destination]) {\n        return this.setupState(options);\n      }\n      saveProps(this, destination, this[propertySet]);\n      if (options && options.stateProperties) {\n        saveProps(this, destination, options.stateProperties);\n      }\n      return this;\n    },\n\n    /**\n     * Setups state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    setupState: function(options) {\n      options = options || { };\n      var propertySet = options.propertySet || originalSet;\n      options.propertySet = propertySet;\n      this['_' + propertySet] = { };\n      this.saveState(options);\n      return this;\n    }\n  });\n})();\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Determines which corner has been clicked\n     * @private\n     * @param {Object} pointer The pointer indicating the mouse position\n     * @return {String|Boolean} corner code (tl, tr, bl, br, etc.), or false if nothing is found\n     */\n    _findTargetCorner: function(pointer, forTouch) {\n      // objects in group, anykind, are not self modificable,\n      // must not return an hovered corner.\n      if (!this.hasControls || this.group || (!this.canvas || this.canvas._activeObject !== this)) {\n        return false;\n      }\n\n      var ex = pointer.x,\n          ey = pointer.y,\n          xPoints,\n          lines, keys = Object.keys(this.oCoords),\n          j = keys.length - 1, i;\n      this.__corner = 0;\n\n      // cycle in reverse order so we pick first the one on top\n      for (; j >= 0; j--) {\n        i = keys[j];\n        if (!this.isControlVisible(i)) {\n          continue;\n        }\n\n        lines = this._getImageLines(forTouch ? this.oCoords[i].touchCorner : this.oCoords[i].corner);\n        // // debugging\n        //\n        // this.canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n\n        xPoints = this._findCrossPoints({ x: ex, y: ey }, lines);\n        if (xPoints !== 0 && xPoints % 2 === 1) {\n          this.__corner = i;\n          return i;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Calls a function for each control. The function gets called,\n     * with the control, the object that is calling the iterator and the control's key\n     * @param {Function} fn function to iterate over the controls over\n     */\n    forEachControl: function(fn) {\n      for (var i in this.controls) {\n        fn(this.controls[i], i, this);\n      };\n    },\n\n    /**\n     * Sets the coordinates of the draggable boxes in the corners of\n     * the image used to scale/rotate it.\n     * note: if we would switch to ROUND corner area, all of this would disappear.\n     * everything would resolve to a single point and a pythagorean theorem for the distance\n     * @private\n     */\n    _setCornerCoords: function() {\n      var coords = this.oCoords;\n\n      for (var control in coords) {\n        var controlObject = this.controls[control];\n        coords[control].corner = controlObject.calcCornerCoords(\n          this.angle, this.cornerSize, coords[control].x, coords[control].y, false);\n        coords[control].touchCorner = controlObject.calcCornerCoords(\n          this.angle, this.touchCornerSize, coords[control].x, coords[control].y, true);\n      }\n    },\n\n    /**\n     * Draws a colored layer behind the object, inside its selection borders.\n     * Requires public options: padding, selectionBackgroundColor\n     * this function is called when the context is transformed\n     * has checks to be skipped when the object is on a staticCanvas\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawSelectionBackground: function(ctx) {\n      if (!this.selectionBackgroundColor ||\n        (this.canvas && !this.canvas.interactive) ||\n        (this.canvas && this.canvas._activeObject !== this)\n      ) {\n        return this;\n      }\n      ctx.save();\n      var center = this.getCenterPoint(), wh = this._calculateCurrentDimensions(),\n          vpt = this.canvas.viewportTransform;\n      ctx.translate(center.x, center.y);\n      ctx.scale(1 / vpt[0], 1 / vpt[3]);\n      ctx.rotate(degreesToRadians(this.angle));\n      ctx.fillStyle = this.selectionBackgroundColor;\n      ctx.fillRect(-wh.x / 2, -wh.y / 2, wh.x, wh.y);\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBorders: function(ctx, styleOverride) {\n      styleOverride = styleOverride || {};\n      var wh = this._calculateCurrentDimensions(),\n          strokeWidth = this.borderScaleFactor,\n          width = wh.x + strokeWidth,\n          height = wh.y + strokeWidth,\n          hasControls = typeof styleOverride.hasControls !== 'undefined' ?\n            styleOverride.hasControls : this.hasControls,\n          shouldStroke = false;\n\n      ctx.save();\n      ctx.strokeStyle = styleOverride.borderColor || this.borderColor;\n      this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray, null);\n\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      if (hasControls) {\n        ctx.beginPath();\n        this.forEachControl(function(control, key, fabricObject) {\n          // in this moment, the ctx is centered on the object.\n          // width and height of the above function are the size of the bbox.\n          if (control.withConnection && control.getVisibility(fabricObject, key)) {\n            // reset movement for each control\n            shouldStroke = true;\n            ctx.moveTo(control.x * width, control.y * height);\n            ctx.lineTo(\n              control.x * width + control.offsetX,\n              control.y * height + control.offsetY\n            );\n          }\n        });\n        if (shouldStroke) {\n          ctx.stroke();\n        }\n      }\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box when it is inside a group.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {object} options object representing current object parameters\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBordersInGroup: function(ctx, options, styleOverride) {\n      styleOverride = styleOverride || {};\n      var bbox = fabric.util.sizeAfterTransform(this.width, this.height, options),\n          strokeWidth = this.strokeWidth,\n          strokeUniform = this.strokeUniform,\n          borderScaleFactor = this.borderScaleFactor,\n          width =\n            bbox.x + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleX) + borderScaleFactor,\n          height =\n            bbox.y + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleY) + borderScaleFactor;\n      ctx.save();\n      this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray, null);\n      ctx.strokeStyle = styleOverride.borderColor || this.borderColor;\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws corners of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: cornerSize, padding\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawControls: function(ctx, styleOverride) {\n      styleOverride = styleOverride || {};\n      ctx.save();\n      ctx.setTransform(this.canvas.getRetinaScaling(), 0, 0, this.canvas.getRetinaScaling(), 0, 0);\n      ctx.strokeStyle = ctx.fillStyle = styleOverride.cornerColor || this.cornerColor;\n      if (!this.transparentCorners) {\n        ctx.strokeStyle = styleOverride.cornerStrokeColor || this.cornerStrokeColor;\n      }\n      this._setLineDash(ctx, styleOverride.cornerDashArray || this.cornerDashArray, null);\n      this.setCoords();\n      this.forEachControl(function(control, key, fabricObject) {\n        if (control.getVisibility(fabricObject, key)) {\n          control.render(ctx,\n            fabricObject.oCoords[key].x,\n            fabricObject.oCoords[key].y, styleOverride, fabricObject);\n        }\n      });\n      ctx.restore();\n\n      return this;\n    },\n\n    /**\n     * Returns true if the specified control is visible, false otherwise.\n     * @param {String} controlKey The key of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @returns {Boolean} true if the specified control is visible, false otherwise\n     */\n    isControlVisible: function(controlKey) {\n      return this.controls[controlKey] && this.controls[controlKey].getVisibility(this, controlKey);\n    },\n\n    /**\n     * Sets the visibility of the specified control.\n     * @param {String} controlKey The key of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @param {Boolean} visible true to set the specified control visible, false otherwise\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlVisible: function(controlKey, visible) {\n      if (!this._controlsVisibility) {\n        this._controlsVisibility = {};\n      }\n      this._controlsVisibility[controlKey] = visible;\n      return this;\n    },\n\n    /**\n     * Sets the visibility state of object controls.\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.bl] true to enable the bottom-left control, false to disable it\n     * @param {Boolean} [options.br] true to enable the bottom-right control, false to disable it\n     * @param {Boolean} [options.mb] true to enable the middle-bottom control, false to disable it\n     * @param {Boolean} [options.ml] true to enable the middle-left control, false to disable it\n     * @param {Boolean} [options.mr] true to enable the middle-right control, false to disable it\n     * @param {Boolean} [options.mt] true to enable the middle-top control, false to disable it\n     * @param {Boolean} [options.tl] true to enable the top-left control, false to disable it\n     * @param {Boolean} [options.tr] true to enable the top-right control, false to disable it\n     * @param {Boolean} [options.mtr] true to enable the middle-top-rotate control, false to disable it\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlsVisibility: function(options) {\n      options || (options = { });\n\n      for (var p in options) {\n        this.setControlVisible(p, options[p]);\n      }\n      return this;\n    },\n\n\n    /**\n     * This callback function is called every time _discardActiveObject or _setActiveObject\n     * try to to deselect this object. If the function returns true, the process is cancelled\n     * @param {Object} [options] options sent from the upper functions\n     * @param {Event} [options.e] event if the process is generated by an event\n     */\n    onDeselect: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n\n    /**\n     * This callback function is called every time _discardActiveObject or _setActiveObject\n     * try to to select this object. If the function returns true, the process is cancelled\n     * @param {Object} [options] options sent from the upper functions\n     * @param {Event} [options.e] event if the process is generated by an event\n     */\n    onSelect: function() {\n      // implemented by sub-classes, as needed.\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Animation duration (in ms) for fx* methods\n   * @type Number\n   * @default\n   */\n  FX_DURATION: 500,\n\n  /**\n   * Centers object horizontally with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxCenterObjectH: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.left,\n      endValue: this.getCenter().left,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('left', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Centers object vertically with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxCenterObjectV: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.top,\n      endValue: this.getCenter().top,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('top', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Same as `fabric.Canvas#remove` but animated\n   * @param {fabric.Object} object Object to remove\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxRemove: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.opacity,\n      endValue: 0,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('opacity', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function () {\n        _this.remove(object);\n        onComplete();\n      }\n    });\n\n    return this;\n  }\n});\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n  /**\n   * Animates object's properties\n   * @param {String|Object} property Property to animate (if string) or properties to animate (if object)\n   * @param {Number|Object} value Value to animate property to (if string was given first) or options object\n   * @return {fabric.Object} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#animation}\n   * @chainable\n   *\n   * As object — multiple properties\n   *\n   * object.animate({ left: ..., top: ... });\n   * object.animate({ left: ..., top: ... }, { duration: ... });\n   *\n   * As string — one property\n   *\n   * object.animate('left', ...);\n   * object.animate('left', { duration: ... });\n   *\n   */\n  animate: function() {\n    if (arguments[0] && typeof arguments[0] === 'object') {\n      var propsToAnimate = [], prop, skipCallbacks;\n      for (prop in arguments[0]) {\n        propsToAnimate.push(prop);\n      }\n      for (var i = 0, len = propsToAnimate.length; i < len; i++) {\n        prop = propsToAnimate[i];\n        skipCallbacks = i !== len - 1;\n        this._animate(prop, arguments[0][prop], arguments[1], skipCallbacks);\n      }\n    }\n    else {\n      this._animate.apply(this, arguments);\n    }\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to animate\n   * @param {String} to Value to animate to\n   * @param {Object} [options] Options object\n   * @param {Boolean} [skipCallbacks] When true, callbacks like onchange and oncomplete are not invoked\n   */\n  _animate: function(property, to, options, skipCallbacks) {\n    var _this = this, propPair;\n\n    to = to.toString();\n\n    if (!options) {\n      options = { };\n    }\n    else {\n      options = fabric.util.object.clone(options);\n    }\n\n    if (~property.indexOf('.')) {\n      propPair = property.split('.');\n    }\n\n    var propIsColor =\n      _this.colorProperties.indexOf(property) > -1 ||\n      (propPair && _this.colorProperties.indexOf(propPair[1]) > -1);\n\n    var currentValue = propPair\n      ? this.get(propPair[0])[propPair[1]]\n      : this.get(property);\n\n    if (!('from' in options)) {\n      options.from = currentValue;\n    }\n\n    if (!propIsColor) {\n      if (~to.indexOf('=')) {\n        to = currentValue + parseFloat(to.replace('=', ''));\n      }\n      else {\n        to = parseFloat(to);\n      }\n    }\n\n    var _options = {\n      startValue: options.from,\n      endValue: to,\n      byValue: options.by,\n      easing: options.easing,\n      duration: options.duration,\n      abort: options.abort && function () {\n        return options.abort.call(_this);\n      },\n      onChange: function (value, valueProgress, timeProgress) {\n        if (propPair) {\n          _this[propPair[0]][propPair[1]] = value;\n        }\n        else {\n          _this.set(property, value);\n        }\n        if (skipCallbacks) {\n          return;\n        }\n        options.onChange && options.onChange(value, valueProgress, timeProgress);\n      },\n      onComplete: function (value, valueProgress, timeProgress) {\n        if (skipCallbacks) {\n          return;\n        }\n\n        _this.setCoords();\n        options.onComplete && options.onComplete(value, valueProgress, timeProgress);\n      }\n    };\n\n    if (propIsColor) {\n      fabric.util.animateColor(_options.startValue, _options.endValue, _options.duration, _options);\n    }\n    else {\n      fabric.util.animate(_options);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      coordProps = { x1: 1, x2: 1, y1: 1, y2: 1 },\n      supportsLineDash = fabric.StaticCanvas.supports('setLineDash');\n\n  if (fabric.Line) {\n    fabric.warn('fabric.Line is already defined');\n    return;\n  }\n\n  /**\n   * Line class\n   * @class fabric.Line\n   * @extends fabric.Object\n   * @see {@link fabric.Line#initialize} for constructor definition\n   */\n  fabric.Line = fabric.util.createClass(fabric.Object, /** @lends fabric.Line.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'line',\n\n    /**\n     * x value or first line edge\n     * @type Number\n     * @default\n     */\n    x1: 0,\n\n    /**\n     * y value or first line edge\n     * @type Number\n     * @default\n     */\n    y1: 0,\n\n    /**\n     * x value or second line edge\n     * @type Number\n     * @default\n     */\n    x2: 0,\n\n    /**\n     * y value or second line edge\n     * @type Number\n     * @default\n     */\n    y2: 0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('x1', 'x2', 'y1', 'y2'),\n\n    /**\n     * Constructor\n     * @param {Array} [points] Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Line} thisArg\n     */\n    initialize: function(points, options) {\n      if (!points) {\n        points = [0, 0, 0, 0];\n      }\n\n      this.callSuper('initialize', options);\n\n      this.set('x1', points[0]);\n      this.set('y1', points[1]);\n      this.set('x2', points[2]);\n      this.set('y2', points[3]);\n\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n\n      this.width = Math.abs(this.x2 - this.x1);\n      this.height = Math.abs(this.y2 - this.y1);\n\n      this.left = 'left' in options\n        ? options.left\n        : this._getLeftToOriginX();\n\n      this.top = 'top' in options\n        ? options.top\n        : this._getTopToOriginY();\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      if (typeof coordProps[key] !== 'undefined') {\n        this._setWidthHeight();\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @return {Number} leftToOriginX Distance from left edge of canvas to originX of Line.\n     */\n    _getLeftToOriginX: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originX',\n        axis1: 'x1',\n        axis2: 'x2',\n        dimension: 'width'\n      },\n      { // possible values of origin\n        nearest: 'left',\n        center: 'center',\n        farthest: 'right'\n      }\n    ),\n\n    /**\n     * @private\n     * @return {Number} topToOriginY Distance from top edge of canvas to originY of Line.\n     */\n    _getTopToOriginY: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originY',\n        axis1: 'y1',\n        axis2: 'y2',\n        dimension: 'height'\n      },\n      { // possible values of origin\n        nearest: 'top',\n        center: 'center',\n        farthest: 'bottom'\n      }\n    ),\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n\n      if (!this.strokeDashArray || this.strokeDashArray && supportsLineDash) {\n        // move from center (of virtual box) to its left/top corner\n        // we can't assume x1, y1 is top left and x2, y2 is bottom right\n        var p = this.calcLinePoints();\n        ctx.moveTo(p.x1, p.y1);\n        ctx.lineTo(p.x2, p.y2);\n      }\n\n      ctx.lineWidth = this.strokeWidth;\n\n      // TODO: test this\n      // make sure setting \"fill\" changes color of a line\n      // (by copying fillStyle to strokeStyle, since line is stroked, not filled)\n      var origStrokeStyle = ctx.strokeStyle;\n      ctx.strokeStyle = this.stroke || ctx.fillStyle;\n      this.stroke && this._renderStroke(ctx);\n      ctx.strokeStyle = origStrokeStyle;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var p = this.calcLinePoints();\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, p.x1, p.y1, p.x2, p.y2, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /**\n     * This function is an helper for svg import. it returns the center of the object in the svg\n     * untransformed coordinates\n     * @private\n     * @return {Object} center point from element coordinates\n     */\n    _findCenterFromElement: function() {\n      return {\n        x: (this.x1 + this.x2) / 2,\n        y: (this.y1 + this.y2) / 2,\n      };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), this.calcLinePoints());\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     */\n    _getNonTransformedDimensions: function() {\n      var dim = this.callSuper('_getNonTransformedDimensions');\n      if (this.strokeLineCap === 'butt') {\n        if (this.width === 0) {\n          dim.y -= this.strokeWidth;\n        }\n        if (this.height === 0) {\n          dim.x -= this.strokeWidth;\n        }\n      }\n      return dim;\n    },\n\n    /**\n     * Recalculates line points given width and height\n     * @private\n     */\n    calcLinePoints: function() {\n      var xMult = this.x1 <= this.x2 ? -1 : 1,\n          yMult = this.y1 <= this.y2 ? -1 : 1,\n          x1 = (xMult * this.width * 0.5),\n          y1 = (yMult * this.height * 0.5),\n          x2 = (xMult * this.width * -0.5),\n          y2 = (yMult * this.height * -0.5);\n\n      return {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var p = this.calcLinePoints();\n      return [\n        '<line ', 'COMMON_PARTS',\n        'x1=\"', p.x1,\n        '\" y1=\"', p.y1,\n        '\" x2=\"', p.x2,\n        '\" y2=\"', p.y2,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Line.fromElement})\n   * @static\n   * @memberOf fabric.Line\n   * @see http://www.w3.org/TR/SVG/shapes.html#LineElement\n   */\n  fabric.Line.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x1 y1 x2 y2'.split(' '));\n\n  /**\n   * Returns fabric.Line instance from an SVG element\n   * @static\n   * @memberOf fabric.Line\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @param {Function} [callback] callback function invoked after parsing\n   */\n  fabric.Line.fromElement = function(element, callback, options) {\n    options = options || { };\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Line.ATTRIBUTE_NAMES),\n        points = [\n          parsedAttributes.x1 || 0,\n          parsedAttributes.y1 || 0,\n          parsedAttributes.x2 || 0,\n          parsedAttributes.y2 || 0\n        ];\n    callback(new fabric.Line(points, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Line instance from an object representation\n   * @static\n   * @memberOf fabric.Line\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   */\n  fabric.Line.fromObject = function(object, callback) {\n    function _callback(instance) {\n      delete instance.points;\n      callback && callback(instance);\n    };\n    var options = clone(object, true);\n    options.points = [object.x1, object.y1, object.x2, object.y2];\n    fabric.Object._fromObject('Line', options, _callback, 'points');\n  };\n\n  /**\n   * Produces a function that calculates distance from canvas edge to Line origin.\n   */\n  function makeEdgeToOriginGetter(propertyNames, originValues) {\n    var origin = propertyNames.origin,\n        axis1 = propertyNames.axis1,\n        axis2 = propertyNames.axis2,\n        dimension = propertyNames.dimension,\n        nearest = originValues.nearest,\n        center = originValues.center,\n        farthest = originValues.farthest;\n\n    return function() {\n      switch (this.get(origin)) {\n        case nearest:\n          return Math.min(this.get(axis1), this.get(axis2));\n        case center:\n          return Math.min(this.get(axis1), this.get(axis2)) + (0.5 * this.get(dimension));\n        case farthest:\n          return Math.max(this.get(axis1), this.get(axis2));\n      }\n    };\n\n  }\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      pi = Math.PI;\n\n  if (fabric.Circle) {\n    fabric.warn('fabric.Circle is already defined.');\n    return;\n  }\n\n  /**\n   * Circle class\n   * @class fabric.Circle\n   * @extends fabric.Object\n   * @see {@link fabric.Circle#initialize} for constructor definition\n   */\n  fabric.Circle = fabric.util.createClass(fabric.Object, /** @lends fabric.Circle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'circle',\n\n    /**\n     * Radius of this circle\n     * @type Number\n     * @default\n     */\n    radius: 0,\n\n    /**\n     * Start angle of the circle, moving clockwise\n     * deprecated type, this should be in degree, this was an oversight.\n     * probably will change to degrees in next major version\n     * @type Number\n     * @default 0\n     */\n    startAngle: 0,\n\n    /**\n     * End angle of the circle\n     * deprecated type, this should be in degree, this was an oversight.\n     * probably will change to degrees in next major version\n     * @type Number\n     * @default 2Pi\n     */\n    endAngle: pi * 2,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('radius', 'startAngle', 'endAngle'),\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Circle} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n\n      if (key === 'radius') {\n        this.setRadius(value);\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['radius', 'startAngle', 'endAngle'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var svgString, x = 0, y = 0,\n          angle = (this.endAngle - this.startAngle) % ( 2 * pi);\n\n      if (angle === 0) {\n        svgString = [\n          '<circle ', 'COMMON_PARTS',\n          'cx=\"' + x + '\" cy=\"' + y + '\" ',\n          'r=\"', this.radius,\n          '\" />\\n'\n        ];\n      }\n      else {\n        var startX = fabric.util.cos(this.startAngle) * this.radius,\n            startY = fabric.util.sin(this.startAngle) * this.radius,\n            endX = fabric.util.cos(this.endAngle) * this.radius,\n            endY = fabric.util.sin(this.endAngle) * this.radius,\n            largeFlag = angle > pi ? '1' : '0';\n        svgString = [\n          '<path d=\"M ' + startX + ' ' + startY,\n          ' A ' + this.radius + ' ' + this.radius,\n          ' 0 ', +largeFlag + ' 1', ' ' + endX + ' ' + endY,\n          '\" ', 'COMMON_PARTS', ' />\\n'\n        ];\n      }\n      return svgString;\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n      ctx.arc(\n        0,\n        0,\n        this.radius,\n        this.startAngle,\n        this.endAngle, false);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusX: function() {\n      return this.get('radius') * this.get('scaleX');\n    },\n\n    /**\n     * Returns vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusY: function() {\n      return this.get('radius') * this.get('scaleY');\n    },\n\n    /**\n     * Sets radius of an object (and updates width accordingly)\n     * @return {fabric.Circle} thisArg\n     */\n    setRadius: function(value) {\n      this.radius = value;\n      return this.set('width', value * 2).set('height', value * 2);\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Circle.fromElement})\n   * @static\n   * @memberOf fabric.Circle\n   * @see: http://www.w3.org/TR/SVG/shapes.html#CircleElement\n   */\n  fabric.Circle.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy r'.split(' '));\n\n  /**\n   * Returns {@link fabric.Circle} instance from an SVG element\n   * @static\n   * @memberOf fabric.Circle\n   * @param {SVGElement} element Element to parse\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   * @param {Object} [options] Options object\n   * @throws {Error} If value of `r` attribute is missing or invalid\n   */\n  fabric.Circle.fromElement = function(element, callback) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Circle.ATTRIBUTE_NAMES);\n\n    if (!isValidRadius(parsedAttributes)) {\n      throw new Error('value of `r` attribute is required and can not be negative');\n    }\n\n    parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.radius;\n    parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.radius;\n    callback(new fabric.Circle(parsedAttributes));\n  };\n\n  /**\n   * @private\n   */\n  function isValidRadius(attributes) {\n    return (('radius' in attributes) && (attributes.radius >= 0));\n  }\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Circle} instance from an object representation\n   * @static\n   * @memberOf fabric.Circle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {Object} Instance of fabric.Circle\n   */\n  fabric.Circle.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Circle', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Triangle) {\n    fabric.warn('fabric.Triangle is already defined');\n    return;\n  }\n\n  /**\n   * Triangle class\n   * @class fabric.Triangle\n   * @extends fabric.Object\n   * @return {fabric.Triangle} thisArg\n   * @see {@link fabric.Triangle#initialize} for constructor definition\n   */\n  fabric.Triangle = fabric.util.createClass(fabric.Object, /** @lends fabric.Triangle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'triangle',\n\n    /**\n     * Width is set to 100 to compensate the old initialize code that was setting it to 100\n     * @type Number\n     * @default\n     */\n    width: 100,\n\n    /**\n     * Height is set to 100 to compensate the old initialize code that was setting it to 100\n     * @type Number\n     * @default\n     */\n    height: 100,\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      ctx.moveTo(-widthBy2, heightBy2);\n      ctx.lineTo(0, -heightBy2);\n      ctx.lineTo(widthBy2, heightBy2);\n      ctx.closePath();\n\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, -widthBy2, heightBy2, 0, -heightBy2, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, 0, -heightBy2, widthBy2, heightBy2, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, widthBy2, heightBy2, -widthBy2, heightBy2, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2,\n          points = [\n            -widthBy2 + ' ' + heightBy2,\n            '0 ' + -heightBy2,\n            widthBy2 + ' ' + heightBy2\n          ].join(',');\n      return [\n        '<polygon ', 'COMMON_PARTS',\n        'points=\"', points,\n        '\" />'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /**\n   * Returns {@link fabric.Triangle} instance from an object representation\n   * @static\n   * @memberOf fabric.Triangle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   */\n  fabric.Triangle.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Triangle', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      piBy2   = Math.PI * 2;\n\n  if (fabric.Ellipse) {\n    fabric.warn('fabric.Ellipse is already defined.');\n    return;\n  }\n\n  /**\n   * Ellipse class\n   * @class fabric.Ellipse\n   * @extends fabric.Object\n   * @return {fabric.Ellipse} thisArg\n   * @see {@link fabric.Ellipse#initialize} for constructor definition\n   */\n  fabric.Ellipse = fabric.util.createClass(fabric.Object, /** @lends fabric.Ellipse.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'ellipse',\n\n    /**\n     * Horizontal radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('rx', 'ry'),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {fabric.Ellipse} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this.set('rx', options && options.rx || 0);\n      this.set('ry', options && options.ry || 0);\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Ellipse} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      switch (key) {\n\n        case 'rx':\n          this.rx = value;\n          this.set('width', value * 2);\n          break;\n\n        case 'ry':\n          this.ry = value;\n          this.set('height', value * 2);\n          break;\n\n      }\n      return this;\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRx: function() {\n      return this.get('rx') * this.get('scaleX');\n    },\n\n    /**\n     * Returns Vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRy: function() {\n      return this.get('ry') * this.get('scaleY');\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      return [\n        '<ellipse ', 'COMMON_PARTS',\n        'cx=\"0\" cy=\"0\" ',\n        'rx=\"', this.rx,\n        '\" ry=\"', this.ry,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n      ctx.save();\n      ctx.transform(1, 0, 0, this.ry / this.rx, 0, 0);\n      ctx.arc(\n        0,\n        0,\n        this.rx,\n        0,\n        piBy2,\n        false);\n      ctx.restore();\n      this._renderPaintInOrder(ctx);\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Ellipse.fromElement})\n   * @static\n   * @memberOf fabric.Ellipse\n   * @see http://www.w3.org/TR/SVG/shapes.html#EllipseElement\n   */\n  fabric.Ellipse.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy rx ry'.split(' '));\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an SVG element\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {SVGElement} element Element to parse\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromElement = function(element, callback) {\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Ellipse.ATTRIBUTE_NAMES);\n\n    parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.rx;\n    parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.ry;\n    callback(new fabric.Ellipse(parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an object representation\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Ellipse', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend;\n\n  if (fabric.Rect) {\n    fabric.warn('fabric.Rect is already defined');\n    return;\n  }\n\n  /**\n   * Rectangle class\n   * @class fabric.Rect\n   * @extends fabric.Object\n   * @return {fabric.Rect} thisArg\n   * @see {@link fabric.Rect#initialize} for constructor definition\n   */\n  fabric.Rect = fabric.util.createClass(fabric.Object, /** @lends fabric.Rect.prototype */ {\n\n    /**\n     * List of properties to consider when checking if state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat('rx', 'ry'),\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'rect',\n\n    /**\n     * Horizontal border radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical border radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('rx', 'ry'),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this._initRxRy();\n    },\n\n    /**\n     * Initializes rx/ry attributes\n     * @private\n     */\n    _initRxRy: function() {\n      if (this.rx && !this.ry) {\n        this.ry = this.rx;\n      }\n      else if (this.ry && !this.rx) {\n        this.rx = this.ry;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n\n      // 1x1 case (used in spray brush) optimization was removed because\n      // with caching and higher zoom level this makes more damage than help\n\n      var rx = this.rx ? Math.min(this.rx, this.width / 2) : 0,\n          ry = this.ry ? Math.min(this.ry, this.height / 2) : 0,\n          w = this.width,\n          h = this.height,\n          x = -this.width / 2,\n          y = -this.height / 2,\n          isRounded = rx !== 0 || ry !== 0,\n          /* \"magic number\" for bezier approximations of arcs (http://itc.ktu.lt/itc354/Riskus354.pdf) */\n          k = 1 - 0.5522847498;\n      ctx.beginPath();\n\n      ctx.moveTo(x + rx, y);\n\n      ctx.lineTo(x + w - rx, y);\n      isRounded && ctx.bezierCurveTo(x + w - k * rx, y, x + w, y + k * ry, x + w, y + ry);\n\n      ctx.lineTo(x + w, y + h - ry);\n      isRounded && ctx.bezierCurveTo(x + w, y + h - k * ry, x + w - k * rx, y + h, x + w - rx, y + h);\n\n      ctx.lineTo(x + rx, y + h);\n      isRounded && ctx.bezierCurveTo(x + k * rx, y + h, x, y + h - k * ry, x, y + h - ry);\n\n      ctx.lineTo(x, y + ry);\n      isRounded && ctx.bezierCurveTo(x, y + k * ry, x + k * rx, y, x + rx, y);\n\n      ctx.closePath();\n\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var x = -this.width / 2,\n          y = -this.height / 2,\n          w = this.width,\n          h = this.height;\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, x, y, x + w, y, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y, x + w, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y + h, x, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x, y + h, x, y, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var x = -this.width / 2, y = -this.height / 2;\n      return [\n        '<rect ', 'COMMON_PARTS',\n        'x=\"', x, '\" y=\"', y,\n        '\" rx=\"', this.rx, '\" ry=\"', this.ry,\n        '\" width=\"', this.width, '\" height=\"', this.height,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Rect.fromElement`)\n   * @static\n   * @memberOf fabric.Rect\n   * @see: http://www.w3.org/TR/SVG/shapes.html#RectElement\n   */\n  fabric.Rect.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x y rx ry width height'.split(' '));\n\n  /**\n   * Returns {@link fabric.Rect} instance from an SVG element\n   * @static\n   * @memberOf fabric.Rect\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Rect.fromElement = function(element, callback, options) {\n    if (!element) {\n      return callback(null);\n    }\n    options = options || { };\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Rect.ATTRIBUTE_NAMES);\n    parsedAttributes.left = parsedAttributes.left || 0;\n    parsedAttributes.top  = parsedAttributes.top  || 0;\n    parsedAttributes.height  = parsedAttributes.height || 0;\n    parsedAttributes.width  = parsedAttributes.width || 0;\n    var rect = new fabric.Rect(extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n    rect.visible = rect.visible && rect.width > 0 && rect.height > 0;\n    callback(rect);\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Rect} instance from an object representation\n   * @static\n   * @memberOf fabric.Rect\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Rect instance is created\n   */\n  fabric.Rect.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Rect', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Polyline) {\n    fabric.warn('fabric.Polyline is already defined');\n    return;\n  }\n\n  /**\n   * Polyline class\n   * @class fabric.Polyline\n   * @extends fabric.Object\n   * @see {@link fabric.Polyline#initialize} for constructor definition\n   */\n  fabric.Polyline = fabric.util.createClass(fabric.Object, /** @lends fabric.Polyline.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polyline',\n\n    /**\n     * Points array\n     * @type Array\n     * @default\n     */\n    points: null,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('points'),\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points (where each point is an object with x and y)\n     * @param {Object} [options] Options object\n     * @return {fabric.Polyline} thisArg\n     * @example\n     * var poly = new fabric.Polyline([\n     *     { x: 10, y: 10 },\n     *     { x: 50, y: 30 },\n     *     { x: 40, y: 70 },\n     *     { x: 60, y: 50 },\n     *     { x: 100, y: 150 },\n     *     { x: 40, y: 100 }\n     *   ], {\n     *   stroke: 'red',\n     *   left: 100,\n     *   top: 100\n     * });\n     */\n    initialize: function(points, options) {\n      options = options || {};\n      this.points = points || [];\n      this.callSuper('initialize', options);\n      this._setPositionDimensions(options);\n    },\n\n    _setPositionDimensions: function(options) {\n      var calcDim = this._calcDimensions(options), correctLeftTop;\n      this.width = calcDim.width;\n      this.height = calcDim.height;\n      if (!options.fromSVG) {\n        correctLeftTop = this.translateToGivenOrigin(\n          { x: calcDim.left - this.strokeWidth / 2, y: calcDim.top - this.strokeWidth / 2 },\n          'left',\n          'top',\n          this.originX,\n          this.originY\n        );\n      }\n      if (typeof options.left === 'undefined') {\n        this.left = options.fromSVG ? calcDim.left : correctLeftTop.x;\n      }\n      if (typeof options.top === 'undefined') {\n        this.top = options.fromSVG ? calcDim.top : correctLeftTop.y;\n      }\n      this.pathOffset = {\n        x: calcDim.left + this.width / 2,\n        y: calcDim.top + this.height / 2\n      };\n    },\n\n    /**\n     * Calculate the polygon min and max point from points array,\n     * returning an object with left, top, width, height to measure the\n     * polygon size\n     * @return {Object} object.left X coordinate of the polygon leftmost point\n     * @return {Object} object.top Y coordinate of the polygon topmost point\n     * @return {Object} object.width distance between X coordinates of the polygon leftmost and rightmost point\n     * @return {Object} object.height distance between Y coordinates of the polygon topmost and bottommost point\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var points = this.points,\n          minX = min(points, 'x') || 0,\n          minY = min(points, 'y') || 0,\n          maxX = max(points, 'x') || 0,\n          maxY = max(points, 'y') || 0,\n          width = (maxX - minX),\n          height = (maxY - minY);\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height\n      };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        points: this.points.concat()\n      });\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var points = [], diffX = this.pathOffset.x, diffY = this.pathOffset.y,\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        points.push(\n          toFixed(this.points[i].x - diffX, NUM_FRACTION_DIGITS), ',',\n          toFixed(this.points[i].y - diffY, NUM_FRACTION_DIGITS), ' '\n        );\n      }\n      return [\n        '<' + this.type + ' ', 'COMMON_PARTS',\n        'points=\"', points.join(''),\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    commonRender: function(ctx) {\n      var point, len = this.points.length,\n          x = this.pathOffset.x,\n          y = this.pathOffset.y;\n\n      if (!len || isNaN(this.points[len - 1].y)) {\n        // do not draw if no points or odd points\n        // NaN comes from parseFloat of a empty string in parser\n        return false;\n      }\n      ctx.beginPath();\n      ctx.moveTo(this.points[0].x - x, this.points[0].y - y);\n      for (var i = 0; i < len; i++) {\n        point = this.points[i];\n        ctx.lineTo(point.x - x, point.y - y);\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      if (!this.commonRender(ctx)) {\n        return;\n      }\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var p1, p2;\n\n      ctx.beginPath();\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        p1 = this.points[i];\n        p2 = this.points[i + 1] || p1;\n        fabric.util.drawDashedLine(ctx, p1.x, p1.y, p2.x, p2.y, this.strokeDashArray);\n      }\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.get('points').length;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Polyline.fromElement})\n   * @static\n   * @memberOf fabric.Polyline\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolylineElement\n   */\n  fabric.Polyline.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns fabric.Polyline instance from an SVG element\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {SVGElement} element Element to parser\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Polyline.fromElementGenerator = function(_class) {\n    return function(element, callback, options) {\n      if (!element) {\n        return callback(null);\n      }\n      options || (options = { });\n\n      var points = fabric.parsePointsAttribute(element.getAttribute('points')),\n          parsedAttributes = fabric.parseAttributes(element, fabric[_class].ATTRIBUTE_NAMES);\n      parsedAttributes.fromSVG = true;\n      callback(new fabric[_class](points, extend(parsedAttributes, options)));\n    };\n  };\n\n  fabric.Polyline.fromElement = fabric.Polyline.fromElementGenerator('Polyline');\n\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polyline instance from an object representation\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Polyline.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Polyline', object, callback, 'points');\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Polygon) {\n    fabric.warn('fabric.Polygon is already defined');\n    return;\n  }\n\n  /**\n   * Polygon class\n   * @class fabric.Polygon\n   * @extends fabric.Polyline\n   * @see {@link fabric.Polygon#initialize} for constructor definition\n   */\n  fabric.Polygon = fabric.util.createClass(fabric.Polyline, /** @lends fabric.Polygon.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polygon',\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      if (!this.commonRender(ctx)) {\n        return;\n      }\n      ctx.closePath();\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      this.callSuper('_renderDashedStroke', ctx);\n      ctx.closePath();\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Polygon.fromElement`)\n   * @static\n   * @memberOf fabric.Polygon\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolygonElement\n   */\n  fabric.Polygon.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns {@link fabric.Polygon} instance from an SVG element\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Polygon.fromElement = fabric.Polyline.fromElementGenerator('Polygon');\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Polygon.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Polygon', object, callback, 'points');\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      extend = fabric.util.object.extend,\n      _toString = Object.prototype.toString,\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Path) {\n    fabric.warn('fabric.Path is already defined');\n    return;\n  }\n\n  /**\n   * Path class\n   * @class fabric.Path\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#path_and_pathgroup}\n   * @see {@link fabric.Path#initialize} for constructor definition\n   */\n  fabric.Path = fabric.util.createClass(fabric.Object, /** @lends fabric.Path.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'path',\n\n    /**\n     * Array of path points\n     * @type Array\n     * @default\n     */\n    path: null,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('path', 'fillRule'),\n\n    stateProperties: fabric.Object.prototype.stateProperties.concat('path'),\n\n    /**\n     * Constructor\n     * @param {Array|String} path Path data (sequence of coordinates and corresponding \"command\" tokens)\n     * @param {Object} [options] Options object\n     * @return {fabric.Path} thisArg\n     */\n    initialize: function(path, options) {\n      options = options || { };\n      this.callSuper('initialize', options);\n      if (!path) {\n        path = [];\n      }\n\n      var fromArray = _toString.call(path) === '[object Array]';\n\n      this.path = fromArray\n        ? fabric.util.makePathSimpler(path)\n\n        : fabric.util.makePathSimpler(\n          fabric.util.parsePath(path)\n        );\n\n      if (!this.path) {\n        return;\n      }\n      fabric.Polyline.prototype._setPositionDimensions.call(this, options);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _renderPathCommands: function(ctx) {\n      var current, // current instruction\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          controlX = 0, // current control point x\n          controlY = 0, // current control point y\n          l = -this.pathOffset.x,\n          t = -this.pathOffset.y;\n\n      ctx.beginPath();\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            ctx.moveTo(x + l, y + t);\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            x = current[5];\n            y = current[6];\n            controlX = current[3];\n            controlY = current[4];\n            ctx.bezierCurveTo(\n              current[1] + l,\n              current[2] + t,\n              controlX + l,\n              controlY + t,\n              x + l,\n              y + t\n            );\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            ctx.quadraticCurveTo(\n              current[1] + l,\n              current[2] + t,\n              current[3] + l,\n              current[4] + t\n            );\n            x = current[3];\n            y = current[4];\n            controlX = current[1];\n            controlY = current[2];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            ctx.closePath();\n            break;\n        }\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _render: function(ctx) {\n      this._renderPathCommands(ctx);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Path (' + this.complexity() +\n        '): { \"top\": ' + this.top + ', \"left\": ' + this.left + ' }>';\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        path: this.path.map(function(item) { return item.slice(); }),\n      });\n    },\n\n    /**\n     * Returns dataless object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var o = this.toObject(['sourcePath'].concat(propertiesToInclude));\n      if (o.sourcePath) {\n        delete o.path;\n      }\n      return o;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var path = this.path.map(function(path) {\n        return path.join(' ');\n      }).join(' ');\n      return [\n        '<path ', 'COMMON_PARTS',\n        'd=\"', path,\n        '\" stroke-linecap=\"round\" ',\n        '/>\\n'\n      ];\n    },\n\n    _getOffsetTransform: function() {\n      var digits = fabric.Object.NUM_FRACTION_DIGITS;\n      return ' translate(' + toFixed(-this.pathOffset.x, digits) + ', ' +\n          toFixed(-this.pathOffset.y, digits) + ')';\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      var additionalTransform = this._getOffsetTransform();\n      return '\\t' + this._createBaseClipPathSVGMarkup(\n        this._toSVG(), { reviver: reviver, additionalTransform: additionalTransform }\n      );\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var additionalTransform = this._getOffsetTransform();\n      return this._createBaseSVGMarkup(this._toSVG(), { reviver: reviver, additionalTransform: additionalTransform  });\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns number representation of an instance complexity\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.path.length;\n    },\n\n    /**\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var aX = [],\n          aY = [],\n          current, // current instruction\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          bounds;\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            bounds = [];\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            bounds = [];\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6]\n            );\n            x = current[5];\n            y = current[6];\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              current[1],\n              current[2],\n              current[3],\n              current[4]\n            );\n            x = current[3];\n            y = current[4];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            break;\n        }\n        bounds.forEach(function (point) {\n          aX.push(point.x);\n          aY.push(point.y);\n        });\n        aX.push(x);\n        aY.push(y);\n      }\n\n      var minX = min(aX) || 0,\n          minY = min(aY) || 0,\n          maxX = max(aX) || 0,\n          maxY = max(aY) || 0,\n          deltaX = maxX - minX,\n          deltaY = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: deltaX,\n        height: deltaY\n      };\n    }\n  });\n\n  /**\n   * Creates an instance of fabric.Path from an object\n   * @static\n   * @memberOf fabric.Path\n   * @param {Object} object\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Path.fromObject = function(object, callback) {\n    if (typeof object.sourcePath === 'string') {\n      var pathUrl = object.sourcePath;\n      fabric.loadSVGFromURL(pathUrl, function (elements) {\n        var path = elements[0];\n        path.setOptions(object);\n        callback && callback(path);\n      });\n    }\n    else {\n      fabric.Object._fromObject('Path', object, callback, 'path');\n    }\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Path.fromElement`)\n   * @static\n   * @memberOf fabric.Path\n   * @see http://www.w3.org/TR/SVG/paths.html#PathElement\n   */\n  fabric.Path.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(['d']);\n\n  /**\n   * Creates an instance of fabric.Path from an SVG <path> element\n   * @static\n   * @memberOf fabric.Path\n   * @param {SVGElement} element to parse\n   * @param {Function} callback Callback to invoke when an fabric.Path instance is created\n   * @param {Object} [options] Options object\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   */\n  fabric.Path.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Path.ATTRIBUTE_NAMES);\n    parsedAttributes.fromSVG = true;\n    callback(new fabric.Path(parsedAttributes.d, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max;\n\n  if (fabric.Group) {\n    return;\n  }\n\n  /**\n   * Group class\n   * @class fabric.Group\n   * @extends fabric.Object\n   * @mixes fabric.Collection\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.Group#initialize} for constructor definition\n   */\n  fabric.Group = fabric.util.createClass(fabric.Object, fabric.Collection, /** @lends fabric.Group.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'group',\n\n    /**\n     * Width of stroke\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * Indicates if click, mouseover, mouseout events & hoverCursor should also check for subtargets\n     * @type Boolean\n     * @default\n     */\n    subTargetCheck: false,\n\n    /**\n     * Groups are container, do not render anything on theyr own, ence no cache properties\n     * @type Array\n     * @default\n     */\n    cacheProperties: [],\n\n    /**\n     * setOnGroup is a method used for TextBox that is no more used since 2.0.0 The behavior is still\n     * available setting this boolean to true.\n     * @type Boolean\n     * @since 2.0.0\n     * @default\n     */\n    useSetOnGroup: false,\n\n    /**\n     * Constructor\n     * @param {Object} objects Group objects\n     * @param {Object} [options] Options object\n     * @param {Boolean} [isAlreadyGrouped] if true, objects have been grouped already.\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options, isAlreadyGrouped) {\n      options = options || {};\n      this._objects = [];\n      // if objects enclosed in a group have been grouped already,\n      // we cannot change properties of objects.\n      // Thus we need to set options to group without objects,\n      isAlreadyGrouped && this.callSuper('initialize', options);\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      if (!isAlreadyGrouped) {\n        var center = options && options.centerPoint;\n        // we want to set origins before calculating the bounding box.\n        // so that the topleft can be set with that in mind.\n        // if specific top and left are passed, are overwritten later\n        // with the callSuper('initialize', options)\n        if (options.originX !== undefined) {\n          this.originX = options.originX;\n        }\n        if (options.originY !== undefined) {\n          this.originY = options.originY;\n        }\n        // if coming from svg i do not want to calc bounds.\n        // i assume width and height are passed along options\n        center || this._calcBounds();\n        this._updateObjectsCoords(center);\n        delete options.centerPoint;\n        this.callSuper('initialize', options);\n      }\n      else {\n        this._updateObjectsACoords();\n      }\n\n      this.setCoords();\n    },\n\n    /**\n     * @private\n     */\n    _updateObjectsACoords: function() {\n      var skipControls = true;\n      for (var i = this._objects.length; i--; ){\n        this._objects[i].setCoords(skipControls);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Boolean} [skipCoordsChange] if true, coordinates of objects enclosed in a group do not change\n     */\n    _updateObjectsCoords: function(center) {\n      var center = center || this.getCenterPoint();\n      for (var i = this._objects.length; i--; ){\n        this._updateObjectCoords(this._objects[i], center);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     * @param {fabric.Point} center, current center of group.\n     */\n    _updateObjectCoords: function(object, center) {\n      var objectLeft = object.left,\n          objectTop = object.top,\n          skipControls = true;\n\n      object.set({\n        left: objectLeft - center.x,\n        top: objectTop - center.y\n      });\n      object.group = this;\n      object.setCoords(skipControls);\n    },\n\n    /**\n     * Returns string represenation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.Group: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Adds an object to a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    addWithUpdate: function(object) {\n      var nested = !!this.group;\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n      if (object) {\n        if (nested) {\n          // if this group is inside another group, we need to pre transform the object\n          fabric.util.removeTransformFromObject(object, this.group.calcTransformMatrix());\n        }\n        this._objects.push(object);\n        object.group = this;\n        object._set('canvas', this.canvas);\n      }\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.dirty = true;\n      if (nested) {\n        this.group.addWithUpdate();\n      }\n      else {\n        this.setCoords();\n      }\n      return this;\n    },\n\n    /**\n     * Removes an object from a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    removeWithUpdate: function(object) {\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n\n      this.remove(object);\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.setCoords();\n      this.dirty = true;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _onObjectAdded: function(object) {\n      this.dirty = true;\n      object.group = this;\n      object._set('canvas', this.canvas);\n    },\n\n    /**\n     * @private\n     */\n    _onObjectRemoved: function(object) {\n      this.dirty = true;\n      delete object.group;\n    },\n\n    /**\n     * @private\n     */\n    _set: function(key, value) {\n      var i = this._objects.length;\n      if (this.useSetOnGroup) {\n        while (i--) {\n          this._objects[i].setOnGroup(key, value);\n        }\n      }\n      if (key === 'canvas') {\n        while (i--) {\n          this._objects[i]._set(key, value);\n        }\n      }\n      fabric.Object.prototype._set.call(this, key, value);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var _includeDefaultValues = this.includeDefaultValues;\n      var objsToObject = this._objects.map(function(obj) {\n        var originalDefaults = obj.includeDefaultValues;\n        obj.includeDefaultValues = _includeDefaultValues;\n        var _obj = obj.toObject(propertiesToInclude);\n        obj.includeDefaultValues = originalDefaults;\n        return _obj;\n      });\n      var obj = fabric.Object.prototype.toObject.call(this, propertiesToInclude);\n      obj.objects = objsToObject;\n      return obj;\n    },\n\n    /**\n     * Returns object representation of an instance, in dataless mode.\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var objsToObject, sourcePath = this.sourcePath;\n      if (sourcePath) {\n        objsToObject = sourcePath;\n      }\n      else {\n        var _includeDefaultValues = this.includeDefaultValues;\n        objsToObject = this._objects.map(function(obj) {\n          var originalDefaults = obj.includeDefaultValues;\n          obj.includeDefaultValues = _includeDefaultValues;\n          var _obj = obj.toDatalessObject(propertiesToInclude);\n          obj.includeDefaultValues = originalDefaults;\n          return _obj;\n        });\n      }\n      var obj = fabric.Object.prototype.toDatalessObject.call(this, propertiesToInclude);\n      obj.objects = objsToObject;\n      return obj;\n    },\n\n    /**\n     * Renders instance on a given context\n     * @param {CanvasRenderingContext2D} ctx context to render instance on\n     */\n    render: function(ctx) {\n      this._transformDone = true;\n      this.callSuper('render', ctx);\n      this._transformDone = false;\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group is already cached.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      var ownCache = fabric.Object.prototype.shouldCache.call(this);\n      if (ownCache) {\n        for (var i = 0, len = this._objects.length; i < len; i++) {\n          if (this._objects[i].willDrawShadow()) {\n            this.ownCaching = false;\n            return false;\n          }\n        }\n      }\n      return ownCache;\n    },\n\n    /**\n     * Check if this object or a child object will cast a shadow\n     * @return {Boolean}\n     */\n    willDrawShadow: function() {\n      if (fabric.Object.prototype.willDrawShadow.call(this)) {\n        return true;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].willDrawShadow()) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Check if this group or its parent group are caching, recursively up\n     * @return {Boolean}\n     */\n    isOnACache: function() {\n      return this.ownCaching || (this.group && this.group.isOnACache());\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawObject: function(ctx) {\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i].render(ctx);\n      }\n      this._drawClipPath(ctx);\n    },\n\n    /**\n     * Check if cache is dirty\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (this.callSuper('isCacheDirty', skipCanvas)) {\n        return true;\n      }\n      if (!this.statefullCache) {\n        return false;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].isCacheDirty(true)) {\n          if (this._cacheCanvas) {\n            // if this group has not a cache canvas there is nothing to clean\n            var x = this.cacheWidth / this.zoomX, y = this.cacheHeight / this.zoomY;\n            this._cacheContext.clearRect(-x / 2, -y / 2, x, y);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Restores original state of each of group objects (original state is that which was before group was created).\n     * if the nested boolean is true, the original state will be restored just for the\n     * first group and not for all the group chain\n     * @private\n     * @param {Boolean} nested tell the function to restore object state up to the parent group and not more\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    _restoreObjectsState: function() {\n      var groupMatrix = this.calcOwnMatrix();\n      this._objects.forEach(function(object) {\n        // instead of using _this = this;\n        fabric.util.addTransformToObject(object, groupMatrix);\n        delete object.group;\n        object.setCoords();\n      });\n      return this;\n    },\n\n    /**\n     * Realises the transform from this group onto the supplied object\n     * i.e. it tells you what would happen if the supplied object was in\n     * the group, and then the group was destroyed. It mutates the supplied\n     * object.\n     * Warning: this method is not useful anymore, it has been kept to no break the api.\n     * is not used in the fabricJS codebase\n     * this method will be reduced to using the utility.\n     * @private\n     * @deprecated\n     * @param {fabric.Object} object\n     * @param {Array} parentMatrix parent transformation\n     * @return {fabric.Object} transformedObject\n     */\n    realizeTransform: function(object, parentMatrix) {\n      fabric.util.addTransformToObject(object, parentMatrix);\n      return object;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    destroy: function() {\n      // when group is destroyed objects needs to get a repaint to be eventually\n      // displayed on canvas.\n      this._objects.forEach(function(object) {\n        object.set('dirty', true);\n      });\n      return this._restoreObjectsState();\n    },\n\n    /**\n     * make a group an active selection, remove the group from canvas\n     * the group has to be on canvas for this to work.\n     * @return {fabric.ActiveSelection} thisArg\n     * @chainable\n     */\n    toActiveSelection: function() {\n      if (!this.canvas) {\n        return;\n      }\n      var objects = this._objects, canvas = this.canvas;\n      this._objects = [];\n      var options = this.toObject();\n      delete options.objects;\n      var activeSelection = new fabric.ActiveSelection([]);\n      activeSelection.set(options);\n      activeSelection.type = 'activeSelection';\n      canvas.remove(this);\n      objects.forEach(function(object) {\n        object.group = activeSelection;\n        object.dirty = true;\n        canvas.add(object);\n      });\n      activeSelection.canvas = canvas;\n      activeSelection._objects = objects;\n      canvas._activeObject = activeSelection;\n      activeSelection.setCoords();\n      return activeSelection;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    ungroupOnCanvas: function() {\n      return this._restoreObjectsState();\n    },\n\n    /**\n     * Sets coordinates of all objects inside group\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    setObjectsCoords: function() {\n      var skipControls = true;\n      this.forEachObject(function(object) {\n        object.setCoords(skipControls);\n      });\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _calcBounds: function(onlyWidthHeight) {\n      var aX = [],\n          aY = [],\n          o, prop, coords,\n          props = ['tr', 'br', 'bl', 'tl'],\n          i = 0, iLen = this._objects.length,\n          j, jLen = props.length;\n\n      for ( ; i < iLen; ++i) {\n        o = this._objects[i];\n        coords = o.calcACoords();\n        for (j = 0; j < jLen; j++) {\n          prop = props[j];\n          aX.push(coords[prop].x);\n          aY.push(coords[prop].y);\n        }\n        o.aCoords = coords;\n      }\n\n      this._getBounds(aX, aY, onlyWidthHeight);\n    },\n\n    /**\n     * @private\n     */\n    _getBounds: function(aX, aY, onlyWidthHeight) {\n      var minXY = new fabric.Point(min(aX), min(aY)),\n          maxXY = new fabric.Point(max(aX), max(aY)),\n          top = minXY.y || 0, left = minXY.x || 0,\n          width = (maxXY.x - minXY.x) || 0,\n          height = (maxXY.y - minXY.y) || 0;\n      this.width = width;\n      this.height = height;\n      if (!onlyWidthHeight) {\n        // the bounding box always finds the topleft most corner.\n        // whatever is the group origin, we set up here the left/top position.\n        this.setPositionByOrigin({ x: left, y: top }, 'left', 'top');\n      }\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    _toSVG: function(reviver) {\n      var svgString = ['<g ', 'COMMON_PARTS', ' >\\n'];\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        svgString.push('\\t\\t', this._objects[i].toSVG(reviver));\n      }\n      svgString.push('</g>\\n');\n      return svgString;\n    },\n\n    /**\n     * Returns styles-string for svg-export, specific version for group\n     * @return {String}\n     */\n    getSvgStyles: function() {\n      var opacity = typeof this.opacity !== 'undefined' && this.opacity !== 1 ?\n            'opacity: ' + this.opacity + ';' : '',\n          visibility = this.visible ? '' : ' visibility: hidden;';\n      return [\n        opacity,\n        this.getSvgFilter(),\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      var svgString = [];\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        svgString.push('\\t', this._objects[i].toClipPathSVG(reviver));\n      }\n\n      return this._createBaseClipPathSVGMarkup(svgString, { reviver: reviver });\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /**\n   * Returns {@link fabric.Group} instance from an object representation\n   * @static\n   * @memberOf fabric.Group\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an group instance is created\n   */\n  fabric.Group.fromObject = function(object, callback) {\n    var objects = object.objects,\n        options = fabric.util.object.clone(object, true);\n    delete options.objects;\n    if (typeof objects === 'string') {\n      // it has to be an url or something went wrong.\n      fabric.loadSVGFromURL(objects, function (elements) {\n        var group = fabric.util.groupSVGElements(elements, object, objects);\n        group.set(options);\n        callback && callback(group);\n      });\n      return;\n    }\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\n      fabric.util.enlivenObjects([object.clipPath], function(enlivedClipPath) {\n        var options = fabric.util.object.clone(object, true);\n        options.clipPath = enlivedClipPath[0];\n        delete options.objects;\n        callback && callback(new fabric.Group(enlivenedObjects, options, true));\n      });\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.ActiveSelection) {\n    return;\n  }\n\n  /**\n   * Group class\n   * @class fabric.ActiveSelection\n   * @extends fabric.Group\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.ActiveSelection#initialize} for constructor definition\n   */\n  fabric.ActiveSelection = fabric.util.createClass(fabric.Group, /** @lends fabric.ActiveSelection.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'activeSelection',\n\n    /**\n     * Constructor\n     * @param {Object} objects ActiveSelection objects\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options) {\n      options = options || {};\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      if (options.originX) {\n        this.originX = options.originX;\n      }\n      if (options.originY) {\n        this.originY = options.originY;\n      }\n      this._calcBounds();\n      this._updateObjectsCoords();\n      fabric.Object.prototype.initialize.call(this, options);\n      this.setCoords();\n    },\n\n    /**\n     * Change te activeSelection to a normal group,\n     * High level function that automatically adds it to canvas as\n     * active object. no events fired.\n     * @since 2.0.0\n     * @return {fabric.Group}\n     */\n    toGroup: function() {\n      var objects = this._objects.concat();\n      this._objects = [];\n      var options = fabric.Object.prototype.toObject.call(this);\n      var newGroup = new fabric.Group([]);\n      delete options.type;\n      newGroup.set(options);\n      objects.forEach(function(object) {\n        object.canvas.remove(object);\n        object.group = newGroup;\n      });\n      newGroup._objects = objects;\n      if (!this.canvas) {\n        return newGroup;\n      }\n      var canvas = this.canvas;\n      canvas.add(newGroup);\n      canvas._activeObject = newGroup;\n      newGroup.setCoords();\n      return newGroup;\n    },\n\n    /**\n     * If returns true, deselection is cancelled.\n     * @since 2.0.0\n     * @return {Boolean} [cancel]\n     */\n    onDeselect: function() {\n      this.destroy();\n      return false;\n    },\n\n    /**\n     * Returns string representation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.ActiveSelection: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * objectCaching is a global flag, wins over everything\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      return false;\n    },\n\n    /**\n     * Check if this group or its parent group are caching, recursively up\n     * @return {Boolean}\n     */\n    isOnACache: function() {\n      return false;\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [styleOverride] properties to override the object style\n     * @param {Object} [childrenOverride] properties to override the children overrides\n     */\n    _renderControls: function(ctx, styleOverride, childrenOverride) {\n      ctx.save();\n      ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      this.callSuper('_renderControls', ctx, styleOverride);\n      childrenOverride = childrenOverride || { };\n      if (typeof childrenOverride.hasControls === 'undefined') {\n        childrenOverride.hasControls = false;\n      }\n      childrenOverride.forActiveSelection = true;\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i]._renderControls(ctx, childrenOverride);\n      }\n      ctx.restore();\n    },\n  });\n\n  /**\n   * Returns {@link fabric.ActiveSelection} instance from an object representation\n   * @static\n   * @memberOf fabric.ActiveSelection\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an ActiveSelection instance is created\n   */\n  fabric.ActiveSelection.fromObject = function(object, callback) {\n    fabric.util.enlivenObjects(object.objects, function(enlivenedObjects) {\n      delete object.objects;\n      callback && callback(new fabric.ActiveSelection(enlivenedObjects, object, true));\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var extend = fabric.util.object.extend;\n\n  if (!global.fabric) {\n    global.fabric = { };\n  }\n\n  if (global.fabric.Image) {\n    fabric.warn('fabric.Image is already defined.');\n    return;\n  }\n\n  /**\n   * Image class\n   * @class fabric.Image\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#images}\n   * @see {@link fabric.Image#initialize} for constructor definition\n   */\n  fabric.Image = fabric.util.createClass(fabric.Object, /** @lends fabric.Image.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'image',\n\n    /**\n     * Width of a stroke.\n     * For image quality a stroke multiple of 2 gives better results.\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * When calling {@link fabric.Image.getSrc}, return value from element src with `element.getAttribute('src')`.\n     * This allows for relative urls as image src.\n     * @since 2.7.0\n     * @type Boolean\n     * @default\n     */\n    srcFromAttribute: false,\n\n    /**\n     * private\n     * contains last value of scaleX to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleX: 1,\n\n    /**\n     * private\n     * contains last value of scaleY to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleY: 1,\n\n    /**\n     * private\n     * contains last value of scaling applied by the apply filter chain\n     * @type Number\n     */\n    _filterScalingX: 1,\n\n    /**\n     * private\n     * contains last value of scaling applied by the apply filter chain\n     * @type Number\n     */\n    _filterScalingY: 1,\n\n    /**\n     * minimum scale factor under which any resizeFilter is triggered to resize the image\n     * 0 will disable the automatic resize. 1 will trigger automatically always.\n     * number bigger than 1 are not implemented yet.\n     * @type Number\n     */\n    minimumScaleTrigger: 0.5,\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat('cropX', 'cropY'),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * Those properties are checked by statefullCache ON ( or lazy mode if we want ) or from single\n     * calls to Object.set(key, value). If the key is in this list, the object is marked as dirty\n     * and refreshed at the next render\n     * @type Array\n     */\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('cropX', 'cropY'),\n\n    /**\n     * key used to retrieve the texture representing this image\n     * @since 2.0.0\n     * @type String\n     * @default\n     */\n    cacheKey: '',\n\n    /**\n     * Image crop in pixels from original image size.\n     * @since 2.0.0\n     * @type Number\n     * @default\n     */\n    cropX: 0,\n\n    /**\n     * Image crop in pixels from original image size.\n     * @since 2.0.0\n     * @type Number\n     * @default\n     */\n    cropY: 0,\n\n    /**\n     * Indicates whether this canvas will use image smoothing when painting this image.\n     * Also influence if the cacheCanvas for this image uses imageSmoothing\n     * @since 4.0.0-beta.11\n     * @type Boolean\n     * @default\n     */\n    imageSmoothing: true,\n\n    /**\n     * Constructor\n     * Image can be initialized with any canvas drawable or a string.\n     * The string should be a url and will be loaded as an image.\n     * Canvas and Image element work out of the box, while videos require extra code to work.\n     * Please check video element events for seeking.\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} element Image element\n     * @param {Object} [options] Options object\n     * @param {function} [callback] callback function to call after eventual filters applied.\n     * @return {fabric.Image} thisArg\n     */\n    initialize: function(element, options) {\n      options || (options = { });\n      this.filters = [];\n      this.cacheKey = 'texture' + fabric.Object.__uid++;\n      this.callSuper('initialize', options);\n      this._initElement(element, options);\n    },\n\n    /**\n     * Returns image element which this instance if based on\n     * @return {HTMLImageElement} Image element\n     */\n    getElement: function() {\n      return this._element || {};\n    },\n\n    /**\n     * Sets image element for this instance to a specified one.\n     * If filters defined they are applied to new image.\n     * You might need to call `canvas.renderAll` and `object.setCoords` after replacing, to render new image and update controls area.\n     * @param {HTMLImageElement} element\n     * @param {Object} [options] Options object\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setElement: function(element, options) {\n      this.removeTexture(this.cacheKey);\n      this.removeTexture(this.cacheKey + '_filtered');\n      this._element = element;\n      this._originalElement = element;\n      this._initConfig(options);\n      if (this.filters.length !== 0) {\n        this.applyFilters();\n      }\n      // resizeFilters work on the already filtered copy.\n      // we need to apply resizeFilters AFTER normal filters.\n      // applyResizeFilters is run more often than normal filters\n      // and is triggered by user interactions rather than dev code\n      if (this.resizeFilter) {\n        this.applyResizeFilters();\n      }\n      return this;\n    },\n\n    /**\n     * Delete a single texture if in webgl mode\n     */\n    removeTexture: function(key) {\n      var backend = fabric.filterBackend;\n      if (backend && backend.evictCachesForKey) {\n        backend.evictCachesForKey(key);\n      }\n    },\n\n    /**\n     * Delete textures, reference to elements and eventually JSDOM cleanup\n     */\n    dispose: function() {\n      this.removeTexture(this.cacheKey);\n      this.removeTexture(this.cacheKey + '_filtered');\n      this._cacheContext = undefined;\n      ['_originalElement', '_element', '_filteredEl', '_cacheCanvas'].forEach((function(element) {\n        fabric.util.cleanUpJsdomNode(this[element]);\n        this[element] = undefined;\n      }).bind(this));\n    },\n\n    /**\n     * Get the crossOrigin value (of the corresponding image element)\n     */\n    getCrossOrigin: function() {\n      return this._originalElement && (this._originalElement.crossOrigin || null);\n    },\n\n    /**\n     * Returns original size of an image\n     * @return {Object} Object with \"width\" and \"height\" properties\n     */\n    getOriginalSize: function() {\n      var element = this.getElement();\n      return {\n        width: element.naturalWidth || element.width,\n        height: element.naturalHeight || element.height\n      };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _stroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n      var w = this.width / 2, h = this.height / 2;\n      ctx.beginPath();\n      ctx.moveTo(-w, -h);\n      ctx.lineTo(w, -h);\n      ctx.lineTo(w, h);\n      ctx.lineTo(-w, h);\n      ctx.lineTo(-w, -h);\n      ctx.closePath();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var x = -this.width / 2,\n          y = -this.height / 2,\n          w = this.width,\n          h = this.height;\n\n      ctx.save();\n      this._setStrokeStyles(ctx, this);\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, x, y, x + w, y, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y, x + w, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y + h, x, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x, y + h, x, y, this.strokeDashArray);\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var filters = [];\n\n      this.filters.forEach(function(filterObj) {\n        if (filterObj) {\n          filters.push(filterObj.toObject());\n        }\n      });\n      var object = extend(\n        this.callSuper(\n          'toObject',\n          ['cropX', 'cropY'].concat(propertiesToInclude)\n        ), {\n          src: this.getSrc(),\n          crossOrigin: this.getCrossOrigin(),\n          filters: filters,\n        });\n      if (this.resizeFilter) {\n        object.resizeFilter = this.resizeFilter.toObject();\n      }\n      return object;\n    },\n\n    /**\n     * Returns true if an image has crop applied, inspecting values of cropX,cropY,width,height.\n     * @return {Boolean}\n     */\n    hasCrop: function() {\n      return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var svgString = [], imageMarkup = [], strokeSvg, element = this._element,\n          x = -this.width / 2, y = -this.height / 2, clipPath = '', imageRendering = '';\n      if (!element) {\n        return [];\n      }\n      if (this.hasCrop()) {\n        var clipPathId = fabric.Object.__uid++;\n        svgString.push(\n          '<clipPath id=\"imageCrop_' + clipPathId + '\">\\n',\n          '\\t<rect x=\"' + x + '\" y=\"' + y + '\" width=\"' + this.width + '\" height=\"' + this.height + '\" />\\n',\n          '</clipPath>\\n'\n        );\n        clipPath = ' clip-path=\"url(#imageCrop_' + clipPathId + ')\" ';\n      }\n      if (!this.imageSmoothing) {\n        imageRendering = '\" image-rendering=\"optimizeSpeed';\n      }\n      imageMarkup.push('\\t<image ', 'COMMON_PARTS', 'xlink:href=\"', this.getSvgSrc(true),\n        '\" x=\"', x - this.cropX, '\" y=\"', y - this.cropY,\n        // we're essentially moving origin of transformation from top/left corner to the center of the shape\n        // by wrapping it in container <g> element with actual transformation, then offsetting object to the top/left\n        // so that object's center aligns with container's left/top\n        '\" width=\"', element.width || element.naturalWidth,\n        '\" height=\"', element.height || element.height,\n        imageRendering,\n        '\"', clipPath,\n        '></image>\\n');\n\n      if (this.stroke || this.strokeDashArray) {\n        var origFill = this.fill;\n        this.fill = null;\n        strokeSvg = [\n          '\\t<rect ',\n          'x=\"', x, '\" y=\"', y,\n          '\" width=\"', this.width, '\" height=\"', this.height,\n          '\" style=\"', this.getSvgStyles(),\n          '\"/>\\n'\n        ];\n        this.fill = origFill;\n      }\n      if (this.paintFirst !== 'fill') {\n        svgString = svgString.concat(strokeSvg, imageMarkup);\n      }\n      else {\n        svgString = svgString.concat(imageMarkup, strokeSvg);\n      }\n      return svgString;\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns source of an image\n     * @param {Boolean} filtered indicates if the src is needed for svg\n     * @return {String} Source of an image\n     */\n    getSrc: function(filtered) {\n      var element = filtered ? this._element : this._originalElement;\n      if (element) {\n        if (element.toDataURL) {\n          return element.toDataURL();\n        }\n\n        if (this.srcFromAttribute) {\n          return element.getAttribute('src');\n        }\n        else {\n          return element.src;\n        }\n      }\n      else {\n        return this.src || '';\n      }\n    },\n\n    /**\n     * Sets source of an image\n     * @param {String} src Source string (URL)\n     * @param {Function} [callback] Callback is invoked when image has been loaded (and all filters have been applied)\n     * @param {Object} [options] Options object\n     * @param {String} [options.crossOrigin] crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setSrc: function(src, callback, options) {\n      fabric.util.loadImage(src, function(img, isError) {\n        this.setElement(img, options);\n        this._setWidthHeight();\n        callback && callback(this, isError);\n      }, this, options && options.crossOrigin);\n      return this;\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Image: { src: \"' + this.getSrc() + '\" }>';\n    },\n\n    applyResizeFilters: function() {\n      var filter = this.resizeFilter,\n          minimumScale = this.minimumScaleTrigger,\n          objectScale = this.getTotalObjectScaling(),\n          scaleX = objectScale.scaleX,\n          scaleY = objectScale.scaleY,\n          elementToFilter = this._filteredEl || this._originalElement;\n      if (this.group) {\n        this.set('dirty', true);\n      }\n      if (!filter || (scaleX > minimumScale && scaleY > minimumScale)) {\n        this._element = elementToFilter;\n        this._filterScalingX = 1;\n        this._filterScalingY = 1;\n        this._lastScaleX = scaleX;\n        this._lastScaleY = scaleY;\n        return;\n      }\n      if (!fabric.filterBackend) {\n        fabric.filterBackend = fabric.initFilterBackend();\n      }\n      var canvasEl = fabric.util.createCanvasElement(),\n          cacheKey = this._filteredEl ? (this.cacheKey + '_filtered') : this.cacheKey,\n          sourceWidth = elementToFilter.width, sourceHeight = elementToFilter.height;\n      canvasEl.width = sourceWidth;\n      canvasEl.height = sourceHeight;\n      this._element = canvasEl;\n      this._lastScaleX = filter.scaleX = scaleX;\n      this._lastScaleY = filter.scaleY = scaleY;\n      fabric.filterBackend.applyFilters(\n        [filter], elementToFilter, sourceWidth, sourceHeight, this._element, cacheKey);\n      this._filterScalingX = canvasEl.width / this._originalElement.width;\n      this._filterScalingY = canvasEl.height / this._originalElement.height;\n    },\n\n    /**\n     * Applies filters assigned to this image (from \"filters\" array) or from filter param\n     * @method applyFilters\n     * @param {Array} filters to be applied\n     * @param {Boolean} forResizing specify if the filter operation is a resize operation\n     * @return {thisArg} return the fabric.Image object\n     * @chainable\n     */\n    applyFilters: function(filters) {\n\n      filters = filters || this.filters || [];\n      filters = filters.filter(function(filter) { return filter && !filter.isNeutralState(); });\n      this.set('dirty', true);\n\n      // needs to clear out or WEBGL will not resize correctly\n      this.removeTexture(this.cacheKey + '_filtered');\n\n      if (filters.length === 0) {\n        this._element = this._originalElement;\n        this._filteredEl = null;\n        this._filterScalingX = 1;\n        this._filterScalingY = 1;\n        return this;\n      }\n\n      var imgElement = this._originalElement,\n          sourceWidth = imgElement.naturalWidth || imgElement.width,\n          sourceHeight = imgElement.naturalHeight || imgElement.height;\n\n      if (this._element === this._originalElement) {\n        // if the element is the same we need to create a new element\n        var canvasEl = fabric.util.createCanvasElement();\n        canvasEl.width = sourceWidth;\n        canvasEl.height = sourceHeight;\n        this._element = canvasEl;\n        this._filteredEl = canvasEl;\n      }\n      else {\n        // clear the existing element to get new filter data\n        // also dereference the eventual resized _element\n        this._element = this._filteredEl;\n        this._filteredEl.getContext('2d').clearRect(0, 0, sourceWidth, sourceHeight);\n        // we also need to resize again at next renderAll, so remove saved _lastScaleX/Y\n        this._lastScaleX = 1;\n        this._lastScaleY = 1;\n      }\n      if (!fabric.filterBackend) {\n        fabric.filterBackend = fabric.initFilterBackend();\n      }\n      fabric.filterBackend.applyFilters(\n        filters, this._originalElement, sourceWidth, sourceHeight, this._element, this.cacheKey);\n      if (this._originalElement.width !== this._element.width ||\n        this._originalElement.height !== this._element.height) {\n        this._filterScalingX = this._element.width / this._originalElement.width;\n        this._filterScalingY = this._element.height / this._originalElement.height;\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothing);\n      if (this.isMoving !== true && this.resizeFilter && this._needsResize()) {\n        this.applyResizeFilters();\n      }\n      this._stroke(ctx);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * it will set the imageSmoothing for the draw operation\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothing);\n      fabric.Object.prototype.drawCacheOnCanvas.call(this, ctx);\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * This is the special image version where we would like to avoid caching where possible.\n     * Essentially images do not benefit from caching. They may require caching, and in that\n     * case we do it. Also caching an image usually ends in a loss of details.\n     * A full performance audit should be done.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      return this.needsItsOwnCache();\n    },\n\n    _renderFill: function(ctx) {\n      var elementToDraw = this._element;\n      if (!elementToDraw) {\n        return;\n      }\n      var scaleX = this._filterScalingX, scaleY = this._filterScalingY,\n          w = this.width, h = this.height, min = Math.min, max = Math.max,\n          // crop values cannot be lesser than 0.\n          cropX = max(this.cropX, 0), cropY = max(this.cropY, 0),\n          elWidth = elementToDraw.naturalWidth || elementToDraw.width,\n          elHeight = elementToDraw.naturalHeight || elementToDraw.height,\n          sX = cropX * scaleX,\n          sY = cropY * scaleY,\n          // the width height cannot exceed element width/height, starting from the crop offset.\n          sW = min(w * scaleX, elWidth - sX),\n          sH = min(h * scaleY, elHeight - sY),\n          x = -w / 2, y = -h / 2,\n          maxDestW = min(w, elWidth / scaleX - cropX),\n          maxDestH = min(h, elHeight / scaleY - cropY);\n\n      elementToDraw && ctx.drawImage(elementToDraw, sX, sY, sW, sH, x, y, maxDestW, maxDestH);\n    },\n\n    /**\n     * needed to check if image needs resize\n     * @private\n     */\n    _needsResize: function() {\n      var scale = this.getTotalObjectScaling();\n      return (scale.scaleX !== this._lastScaleX || scale.scaleY !== this._lastScaleY);\n    },\n\n    /**\n     * @private\n     */\n    _resetWidthHeight: function() {\n      this.set(this.getOriginalSize());\n    },\n\n    /**\n     * The Image class's initialization method. This method is automatically\n     * called by the constructor.\n     * @private\n     * @param {HTMLImageElement|String} element The element representing the image\n     * @param {Object} [options] Options object\n     */\n    _initElement: function(element, options) {\n      this.setElement(fabric.util.getById(element), options);\n      fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initConfig: function(options) {\n      options || (options = { });\n      this.setOptions(options);\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Array} filters to be initialized\n     * @param {Function} callback Callback to invoke when all fabric.Image.filters instances are created\n     */\n    _initFilters: function(filters, callback) {\n      if (filters && filters.length) {\n        fabric.util.enlivenObjects(filters, function(enlivenedObjects) {\n          callback && callback(enlivenedObjects);\n        }, 'fabric.Image.filters');\n      }\n      else {\n        callback && callback();\n      }\n    },\n\n    /**\n     * @private\n     * Set the width and the height of the image object, using the element or the\n     * options.\n     * @param {Object} [options] Object with width/height properties\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n      var el = this.getElement();\n      this.width = options.width || el.naturalWidth || el.width || 0;\n      this.height = options.height || el.naturalHeight || el.height || 0;\n    },\n\n    /**\n     * Calculate offset for center and scale factor for the image in order to respect\n     * the preserveAspectRatio attribute\n     * @private\n     * @return {Object}\n     */\n    parsePreserveAspectRatioAttribute: function() {\n      var pAR = fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ''),\n          rWidth = this._element.width, rHeight = this._element.height,\n          scaleX = 1, scaleY = 1, offsetLeft = 0, offsetTop = 0, cropX = 0, cropY = 0,\n          offset, pWidth = this.width, pHeight = this.height, parsedAttributes = { width: pWidth, height: pHeight };\n      if (pAR && (pAR.alignX !== 'none' || pAR.alignY !== 'none')) {\n        if (pAR.meetOrSlice === 'meet') {\n          scaleX = scaleY = fabric.util.findScaleToFit(this._element, parsedAttributes);\n          offset = (pWidth - rWidth * scaleX) / 2;\n          if (pAR.alignX === 'Min') {\n            offsetLeft = -offset;\n          }\n          if (pAR.alignX === 'Max') {\n            offsetLeft = offset;\n          }\n          offset = (pHeight - rHeight * scaleY) / 2;\n          if (pAR.alignY === 'Min') {\n            offsetTop = -offset;\n          }\n          if (pAR.alignY === 'Max') {\n            offsetTop = offset;\n          }\n        }\n        if (pAR.meetOrSlice === 'slice') {\n          scaleX = scaleY = fabric.util.findScaleToCover(this._element, parsedAttributes);\n          offset = rWidth - pWidth / scaleX;\n          if (pAR.alignX === 'Mid') {\n            cropX = offset / 2;\n          }\n          if (pAR.alignX === 'Max') {\n            cropX = offset;\n          }\n          offset = rHeight - pHeight / scaleY;\n          if (pAR.alignY === 'Mid') {\n            cropY = offset / 2;\n          }\n          if (pAR.alignY === 'Max') {\n            cropY = offset;\n          }\n          rWidth = pWidth / scaleX;\n          rHeight = pHeight / scaleY;\n        }\n      }\n      else {\n        scaleX = pWidth / rWidth;\n        scaleY = pHeight / rHeight;\n      }\n      return {\n        width: rWidth,\n        height: rHeight,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        offsetLeft: offsetLeft,\n        offsetTop: offsetTop,\n        cropX: cropX,\n        cropY: cropY\n      };\n    }\n  });\n\n  /**\n   * Default CSS class name for canvas\n   * @static\n   * @type String\n   * @default\n   */\n  fabric.Image.CSS_CANVAS = 'canvas-img';\n\n  /**\n   * Alias for getSrc\n   * @static\n   */\n  fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc;\n\n  /**\n   * Creates an instance of fabric.Image from its object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} callback Callback to invoke when an image instance is created\n   */\n  fabric.Image.fromObject = function(_object, callback) {\n    var object = fabric.util.object.clone(_object);\n    fabric.util.loadImage(object.src, function(img, isError) {\n      if (isError) {\n        callback && callback(null, true);\n        return;\n      }\n      fabric.Image.prototype._initFilters.call(object, object.filters, function(filters) {\n        object.filters = filters || [];\n        fabric.Image.prototype._initFilters.call(object, [object.resizeFilter], function(resizeFilters) {\n          object.resizeFilter = resizeFilters[0];\n          fabric.util.enlivenObjects([object.clipPath], function(enlivedProps) {\n            object.clipPath = enlivedProps[0];\n            var image = new fabric.Image(img, object);\n            callback(image, false);\n          });\n        });\n      });\n    }, null, object.crossOrigin);\n  };\n\n  /**\n   * Creates an instance of fabric.Image from an URL string\n   * @static\n   * @param {String} url URL to create an image from\n   * @param {Function} [callback] Callback to invoke when image is created (newly created image is passed as a first argument). Second argument is a boolean indicating if an error occurred or not.\n   * @param {Object} [imgOptions] Options object\n   */\n  fabric.Image.fromURL = function(url, callback, imgOptions) {\n    fabric.util.loadImage(url, function(img, isError) {\n      callback && callback(new fabric.Image(img, imgOptions), isError);\n    }, null, imgOptions && imgOptions.crossOrigin);\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Image.fromElement})\n   * @static\n   * @see {@link http://www.w3.org/TR/SVG/struct.html#ImageElement}\n   */\n  fabric.Image.ATTRIBUTE_NAMES =\n    fabric.SHARED_ATTRIBUTES.concat(\n      'x y width height preserveAspectRatio xlink:href crossOrigin image-rendering'.split(' ')\n    );\n\n  /**\n   * Returns {@link fabric.Image} instance from an SVG element\n   * @static\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @param {Function} callback Callback to execute when fabric.Image object is created\n   * @return {fabric.Image} Instance of fabric.Image\n   */\n  fabric.Image.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Image.ATTRIBUTE_NAMES);\n    fabric.Image.fromURL(parsedAttributes['xlink:href'], callback,\n      extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * @private\n   * @return {Number} angle value\n   */\n  _getAngleValueForStraighten: function() {\n    var angle = this.angle % 360;\n    if (angle > 0) {\n      return Math.round((angle - 1) / 90) * 90;\n    }\n    return Math.round(angle / 90) * 90;\n  },\n\n  /**\n   * Straightens an object (rotating it from current angle to one of 0, 90, 180, 270, etc. depending on which is closer)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  straighten: function() {\n    this.rotate(this._getAngleValueForStraighten());\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Object.prototype.straighten} but with animation\n   * @param {Object} callbacks Object with callback functions\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  fxStraighten: function(callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: this.get('angle'),\n      endValue: this._getAngleValueForStraighten(),\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        _this.rotate(value);\n        onChange();\n      },\n      onComplete: function() {\n        _this.setCoords();\n        onComplete();\n      },\n    });\n\n    return this;\n  }\n});\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Straightens object, then rerenders canvas\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  straightenObject: function (object) {\n    object.straighten();\n    this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Canvas.prototype.straightenObject}, but animated\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxStraightenObject: function (object) {\n    object.fxStraighten({\n      onChange: this.requestRenderAllBound\n    });\n    return this;\n  }\n});\n\n\n(function() {\n\n  'use strict';\n\n  /**\n   * Tests if webgl supports certain precision\n   * @param {WebGL} Canvas WebGL context to test on\n   * @param {String} Precision to test can be any of following: 'lowp', 'mediump', 'highp'\n   * @returns {Boolean} Whether the user's browser WebGL supports given precision.\n   */\n  function testPrecision(gl, precision){\n    var fragmentSource = 'precision ' + precision + ' float;\\nvoid main(){}';\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentSource);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Indicate whether this filtering backend is supported by the user's browser.\n   * @param {Number} tileSize check if the tileSize is supported\n   * @returns {Boolean} Whether the user's browser supports WebGL.\n   */\n  fabric.isWebglSupported = function(tileSize) {\n    if (fabric.isLikelyNode) {\n      return false;\n    }\n    tileSize = tileSize || fabric.WebglFilterBackend.prototype.tileSize;\n    var canvas = document.createElement('canvas');\n    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    var isSupported = false;\n    // eslint-disable-next-line\n    if (gl) {\n      fabric.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n      isSupported = fabric.maxTextureSize >= tileSize;\n      var precisions = ['highp', 'mediump', 'lowp'];\n      for (var i = 0; i < 3; i++){\n        if (testPrecision(gl, precisions[i])){\n          fabric.webGlPrecision = precisions[i];\n          break;\n        };\n      }\n    }\n    this.isSupported = isSupported;\n    return isSupported;\n  };\n\n  fabric.WebglFilterBackend = WebglFilterBackend;\n\n  /**\n   * WebGL filter backend.\n   */\n  function WebglFilterBackend(options) {\n    if (options && options.tileSize) {\n      this.tileSize = options.tileSize;\n    }\n    this.setupGLContext(this.tileSize, this.tileSize);\n    this.captureGPUInfo();\n  };\n\n  WebglFilterBackend.prototype = /** @lends fabric.WebglFilterBackend.prototype */ {\n\n    tileSize: 2048,\n\n    /**\n     * Experimental. This object is a sort of repository of help layers used to avoid\n     * of recreating them during frequent filtering. If you are previewing a filter with\n     * a slider you probably do not want to create help layers every filter step.\n     * in this object there will be appended some canvases, created once, resized sometimes\n     * cleared never. Clearing is left to the developer.\n     **/\n    resources: {\n\n    },\n\n    /**\n     * Setup a WebGL context suitable for filtering, and bind any needed event handlers.\n     */\n    setupGLContext: function(width, height) {\n      this.dispose();\n      this.createWebGLCanvas(width, height);\n      // eslint-disable-next-line\n      this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]);\n      this.chooseFastestCopyGLTo2DMethod(width, height);\n    },\n\n    /**\n     * Pick a method to copy data from GL context to 2d canvas.  In some browsers using\n     * putImageData is faster than drawImage for that specific operation.\n     */\n    chooseFastestCopyGLTo2DMethod: function(width, height) {\n      var canMeasurePerf = typeof window.performance !== 'undefined', canUseImageData;\n      try {\n        new ImageData(1, 1);\n        canUseImageData = true;\n      }\n      catch (e) {\n        canUseImageData = false;\n      }\n      // eslint-disable-next-line no-undef\n      var canUseArrayBuffer = typeof ArrayBuffer !== 'undefined';\n      // eslint-disable-next-line no-undef\n      var canUseUint8Clamped = typeof Uint8ClampedArray !== 'undefined';\n\n      if (!(canMeasurePerf && canUseImageData && canUseArrayBuffer && canUseUint8Clamped)) {\n        return;\n      }\n\n      var targetCanvas = fabric.util.createCanvasElement();\n      // eslint-disable-next-line no-undef\n      var imageBuffer = new ArrayBuffer(width * height * 4);\n      if (fabric.forceGLPutImageData) {\n        this.imageBuffer = imageBuffer;\n        this.copyGLTo2D = copyGLTo2DPutImageData;\n        return;\n      }\n      var testContext = {\n        imageBuffer: imageBuffer,\n        destinationWidth: width,\n        destinationHeight: height,\n        targetCanvas: targetCanvas\n      };\n      var startTime, drawImageTime, putImageDataTime;\n      targetCanvas.width = width;\n      targetCanvas.height = height;\n\n      startTime = window.performance.now();\n      copyGLTo2DDrawImage.call(testContext, this.gl, testContext);\n      drawImageTime = window.performance.now() - startTime;\n\n      startTime = window.performance.now();\n      copyGLTo2DPutImageData.call(testContext, this.gl, testContext);\n      putImageDataTime = window.performance.now() - startTime;\n\n      if (drawImageTime > putImageDataTime) {\n        this.imageBuffer = imageBuffer;\n        this.copyGLTo2D = copyGLTo2DPutImageData;\n      }\n      else {\n        this.copyGLTo2D = copyGLTo2DDrawImage;\n      }\n    },\n\n    /**\n     * Create a canvas element and associated WebGL context and attaches them as\n     * class properties to the GLFilterBackend class.\n     */\n    createWebGLCanvas: function(width, height) {\n      var canvas = fabric.util.createCanvasElement();\n      canvas.width = width;\n      canvas.height = height;\n      var glOptions = {\n            alpha: true,\n            premultipliedAlpha: false,\n            depth: false,\n            stencil: false,\n            antialias: false\n          },\n          gl = canvas.getContext('webgl', glOptions);\n      if (!gl) {\n        gl = canvas.getContext('experimental-webgl', glOptions);\n      }\n      if (!gl) {\n        return;\n      }\n      gl.clearColor(0, 0, 0, 0);\n      // this canvas can fire webglcontextlost and webglcontextrestored\n      this.canvas = canvas;\n      this.gl = gl;\n    },\n\n    /**\n     * Attempts to apply the requested filters to the source provided, drawing the filtered output\n     * to the provided target canvas.\n     *\n     * @param {Array} filters The filters to apply.\n     * @param {HTMLImageElement|HTMLCanvasElement} source The source to be filtered.\n     * @param {Number} width The width of the source input.\n     * @param {Number} height The height of the source input.\n     * @param {HTMLCanvasElement} targetCanvas The destination for filtered output to be drawn.\n     * @param {String|undefined} cacheKey A key used to cache resources related to the source. If\n     * omitted, caching will be skipped.\n     */\n    applyFilters: function(filters, source, width, height, targetCanvas, cacheKey) {\n      var gl = this.gl;\n      var cachedTexture;\n      if (cacheKey) {\n        cachedTexture = this.getCachedTexture(cacheKey, source);\n      }\n      var pipelineState = {\n        originalWidth: source.width || source.originalWidth,\n        originalHeight: source.height || source.originalHeight,\n        sourceWidth: width,\n        sourceHeight: height,\n        destinationWidth: width,\n        destinationHeight: height,\n        context: gl,\n        sourceTexture: this.createTexture(gl, width, height, !cachedTexture && source),\n        targetTexture: this.createTexture(gl, width, height),\n        originalTexture: cachedTexture ||\n          this.createTexture(gl, width, height, !cachedTexture && source),\n        passes: filters.length,\n        webgl: true,\n        aPosition: this.aPosition,\n        programCache: this.programCache,\n        pass: 0,\n        filterBackend: this,\n        targetCanvas: targetCanvas\n      };\n      var tempFbo = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, tempFbo);\n      filters.forEach(function(filter) { filter && filter.applyTo(pipelineState); });\n      resizeCanvasIfNeeded(pipelineState);\n      this.copyGLTo2D(gl, pipelineState);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      gl.deleteTexture(pipelineState.sourceTexture);\n      gl.deleteTexture(pipelineState.targetTexture);\n      gl.deleteFramebuffer(tempFbo);\n      targetCanvas.getContext('2d').setTransform(1, 0, 0, 1, 0, 0);\n      return pipelineState;\n    },\n\n    /**\n     * Detach event listeners, remove references, and clean up caches.\n     */\n    dispose: function() {\n      if (this.canvas) {\n        this.canvas = null;\n        this.gl = null;\n      }\n      this.clearWebGLCaches();\n    },\n\n    /**\n     * Wipe out WebGL-related caches.\n     */\n    clearWebGLCaches: function() {\n      this.programCache = {};\n      this.textureCache = {};\n    },\n\n    /**\n     * Create a WebGL texture object.\n     *\n     * Accepts specific dimensions to initialize the texture to or a source image.\n     *\n     * @param {WebGLRenderingContext} gl The GL context to use for creating the texture.\n     * @param {Number} width The width to initialize the texture at.\n     * @param {Number} height The height to initialize the texture.\n     * @param {HTMLImageElement|HTMLCanvasElement} textureImageSource A source for the texture data.\n     * @returns {WebGLTexture}\n     */\n    createTexture: function(gl, width, height, textureImageSource) {\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      if (textureImageSource) {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureImageSource);\n      }\n      else {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n      }\n      return texture;\n    },\n\n    /**\n     * Can be optionally used to get a texture from the cache array\n     *\n     * If an existing texture is not found, a new texture is created and cached.\n     *\n     * @param {String} uniqueId A cache key to use to find an existing texture.\n     * @param {HTMLImageElement|HTMLCanvasElement} textureImageSource A source to use to create the\n     * texture cache entry if one does not already exist.\n     */\n    getCachedTexture: function(uniqueId, textureImageSource) {\n      if (this.textureCache[uniqueId]) {\n        return this.textureCache[uniqueId];\n      }\n      else {\n        var texture = this.createTexture(\n          this.gl, textureImageSource.width, textureImageSource.height, textureImageSource);\n        this.textureCache[uniqueId] = texture;\n        return texture;\n      }\n    },\n\n    /**\n     * Clear out cached resources related to a source image that has been\n     * filtered previously.\n     *\n     * @param {String} cacheKey The cache key provided when the source image was filtered.\n     */\n    evictCachesForKey: function(cacheKey) {\n      if (this.textureCache[cacheKey]) {\n        this.gl.deleteTexture(this.textureCache[cacheKey]);\n        delete this.textureCache[cacheKey];\n      }\n    },\n\n    copyGLTo2D: copyGLTo2DDrawImage,\n\n    /**\n     * Attempt to extract GPU information strings from a WebGL context.\n     *\n     * Useful information when debugging or blacklisting specific GPUs.\n     *\n     * @returns {Object} A GPU info object with renderer and vendor strings.\n     */\n    captureGPUInfo: function() {\n      if (this.gpuInfo) {\n        return this.gpuInfo;\n      }\n      var gl = this.gl, gpuInfo = { renderer: '', vendor: '' };\n      if (!gl) {\n        return gpuInfo;\n      }\n      var ext = gl.getExtension('WEBGL_debug_renderer_info');\n      if (ext) {\n        var renderer = gl.getParameter(ext.UNMASKED_RENDERER_WEBGL);\n        var vendor = gl.getParameter(ext.UNMASKED_VENDOR_WEBGL);\n        if (renderer) {\n          gpuInfo.renderer = renderer.toLowerCase();\n        }\n        if (vendor) {\n          gpuInfo.vendor = vendor.toLowerCase();\n        }\n      }\n      this.gpuInfo = gpuInfo;\n      return gpuInfo;\n    },\n  };\n})();\n\nfunction resizeCanvasIfNeeded(pipelineState) {\n  var targetCanvas = pipelineState.targetCanvas,\n      width = targetCanvas.width, height = targetCanvas.height,\n      dWidth = pipelineState.destinationWidth,\n      dHeight = pipelineState.destinationHeight;\n\n  if (width !== dWidth || height !== dHeight) {\n    targetCanvas.width = dWidth;\n    targetCanvas.height = dHeight;\n  }\n}\n\n/**\n * Copy an input WebGL canvas on to an output 2D canvas.\n *\n * The WebGL canvas is assumed to be upside down, with the top-left pixel of the\n * desired output image appearing in the bottom-left corner of the WebGL canvas.\n *\n * @param {WebGLRenderingContext} sourceContext The WebGL context to copy from.\n * @param {HTMLCanvasElement} targetCanvas The 2D target canvas to copy on to.\n * @param {Object} pipelineState The 2D target canvas to copy on to.\n */\nfunction copyGLTo2DDrawImage(gl, pipelineState) {\n  var glCanvas = gl.canvas, targetCanvas = pipelineState.targetCanvas,\n      ctx = targetCanvas.getContext('2d');\n  ctx.translate(0, targetCanvas.height); // move it down again\n  ctx.scale(1, -1); // vertical flip\n  // where is my image on the big glcanvas?\n  var sourceY = glCanvas.height - targetCanvas.height;\n  ctx.drawImage(glCanvas, 0, sourceY, targetCanvas.width, targetCanvas.height, 0, 0,\n    targetCanvas.width, targetCanvas.height);\n}\n\n/**\n * Copy an input WebGL canvas on to an output 2D canvas using 2d canvas' putImageData\n * API. Measurably faster than using ctx.drawImage in Firefox (version 54 on OSX Sierra).\n *\n * @param {WebGLRenderingContext} sourceContext The WebGL context to copy from.\n * @param {HTMLCanvasElement} targetCanvas The 2D target canvas to copy on to.\n * @param {Object} pipelineState The 2D target canvas to copy on to.\n */\nfunction copyGLTo2DPutImageData(gl, pipelineState) {\n  var targetCanvas = pipelineState.targetCanvas, ctx = targetCanvas.getContext('2d'),\n      dWidth = pipelineState.destinationWidth,\n      dHeight = pipelineState.destinationHeight,\n      numBytes = dWidth * dHeight * 4;\n\n  // eslint-disable-next-line no-undef\n  var u8 = new Uint8Array(this.imageBuffer, 0, numBytes);\n  // eslint-disable-next-line no-undef\n  var u8Clamped = new Uint8ClampedArray(this.imageBuffer, 0, numBytes);\n\n  gl.readPixels(0, 0, dWidth, dHeight, gl.RGBA, gl.UNSIGNED_BYTE, u8);\n  var imgData = new ImageData(u8Clamped, dWidth, dHeight);\n  ctx.putImageData(imgData, 0, 0);\n}\n\n\n(function() {\n\n  'use strict';\n\n  var noop = function() {};\n\n  fabric.Canvas2dFilterBackend = Canvas2dFilterBackend;\n\n  /**\n   * Canvas 2D filter backend.\n   */\n  function Canvas2dFilterBackend() {};\n\n  Canvas2dFilterBackend.prototype = /** @lends fabric.Canvas2dFilterBackend.prototype */ {\n    evictCachesForKey: noop,\n    dispose: noop,\n    clearWebGLCaches: noop,\n\n    /**\n     * Experimental. This object is a sort of repository of help layers used to avoid\n     * of recreating them during frequent filtering. If you are previewing a filter with\n     * a slider you probably do not want to create help layers every filter step.\n     * in this object there will be appended some canvases, created once, resized sometimes\n     * cleared never. Clearing is left to the developer.\n     **/\n    resources: {\n\n    },\n\n    /**\n     * Apply a set of filters against a source image and draw the filtered output\n     * to the provided destination canvas.\n     *\n     * @param {EnhancedFilter} filters The filter to apply.\n     * @param {HTMLImageElement|HTMLCanvasElement} sourceElement The source to be filtered.\n     * @param {Number} sourceWidth The width of the source input.\n     * @param {Number} sourceHeight The height of the source input.\n     * @param {HTMLCanvasElement} targetCanvas The destination for filtered output to be drawn.\n     */\n    applyFilters: function(filters, sourceElement, sourceWidth, sourceHeight, targetCanvas) {\n      var ctx = targetCanvas.getContext('2d');\n      ctx.drawImage(sourceElement, 0, 0, sourceWidth, sourceHeight);\n      var imageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);\n      var originalImageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);\n      var pipelineState = {\n        sourceWidth: sourceWidth,\n        sourceHeight: sourceHeight,\n        imageData: imageData,\n        originalEl: sourceElement,\n        originalImageData: originalImageData,\n        canvasEl: targetCanvas,\n        ctx: ctx,\n        filterBackend: this,\n      };\n      filters.forEach(function(filter) { filter.applyTo(pipelineState); });\n      if (pipelineState.imageData.width !== sourceWidth || pipelineState.imageData.height !== sourceHeight) {\n        targetCanvas.width = pipelineState.imageData.width;\n        targetCanvas.height = pipelineState.imageData.height;\n      }\n      ctx.putImageData(pipelineState.imageData, 0, 0);\n      return pipelineState;\n    },\n\n  };\n})();\n\n\n/**\n * @namespace fabric.Image.filters\n * @memberOf fabric.Image\n * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#image_filters}\n * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n */\nfabric.Image = fabric.Image || { };\nfabric.Image.filters = fabric.Image.filters || { };\n\n/**\n * Root filter class from which all filter classes inherit from\n * @class fabric.Image.filters.BaseFilter\n * @memberOf fabric.Image.filters\n */\nfabric.Image.filters.BaseFilter = fabric.util.createClass(/** @lends fabric.Image.filters.BaseFilter.prototype */ {\n\n  /**\n   * Filter type\n   * @param {String} type\n   * @default\n   */\n  type: 'BaseFilter',\n\n  /**\n   * Array of attributes to send with buffers. do not modify\n   * @private\n   */\n\n  vertexSource: 'attribute vec2 aPosition;\\n' +\n    'varying vec2 vTexCoord;\\n' +\n    'void main() {\\n' +\n      'vTexCoord = aPosition;\\n' +\n      'gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n' +\n    '}',\n\n  fragmentSource: 'precision highp float;\\n' +\n    'varying vec2 vTexCoord;\\n' +\n    'uniform sampler2D uTexture;\\n' +\n    'void main() {\\n' +\n      'gl_FragColor = texture2D(uTexture, vTexCoord);\\n' +\n    '}',\n\n  /**\n   * Constructor\n   * @param {Object} [options] Options object\n   */\n  initialize: function(options) {\n    if (options) {\n      this.setOptions(options);\n    }\n  },\n\n  /**\n   * Sets filter's properties from options\n   * @param {Object} [options] Options object\n   */\n  setOptions: function(options) {\n    for (var prop in options) {\n      this[prop] = options[prop];\n    }\n  },\n\n  /**\n   * Compile this filter's shader program.\n   *\n   * @param {WebGLRenderingContext} gl The GL canvas context to use for shader compilation.\n   * @param {String} fragmentSource fragmentShader source for compilation\n   * @param {String} vertexSource vertexShader source for compilation\n   */\n  createProgram: function(gl, fragmentSource, vertexSource) {\n    fragmentSource = fragmentSource || this.fragmentSource;\n    vertexSource = vertexSource || this.vertexSource;\n    if (fabric.webGlPrecision !== 'highp'){\n      fragmentSource = fragmentSource.replace(\n        /precision highp float/g,\n        'precision ' + fabric.webGlPrecision + ' float'\n      );\n    }\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexSource);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Vertex shader compile error for ' + this.type + ': ' +\n        gl.getShaderInfoLog(vertexShader)\n      );\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentSource);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Fragment shader compile error for ' + this.type + ': ' +\n        gl.getShaderInfoLog(fragmentShader)\n      );\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Shader link error for \"${this.type}\" ' +\n        gl.getProgramInfoLog(program)\n      );\n    }\n\n    var attributeLocations = this.getAttributeLocations(gl, program);\n    var uniformLocations = this.getUniformLocations(gl, program) || { };\n    uniformLocations.uStepW = gl.getUniformLocation(program, 'uStepW');\n    uniformLocations.uStepH = gl.getUniformLocation(program, 'uStepH');\n    return {\n      program: program,\n      attributeLocations: attributeLocations,\n      uniformLocations: uniformLocations\n    };\n  },\n\n  /**\n   * Return a map of attribute names to WebGLAttributeLocation objects.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {WebGLShaderProgram} program The shader program from which to take attribute locations.\n   * @returns {Object} A map of attribute names to attribute locations.\n   */\n  getAttributeLocations: function(gl, program) {\n    return {\n      aPosition: gl.getAttribLocation(program, 'aPosition'),\n    };\n  },\n\n  /**\n   * Return a map of uniform names to WebGLUniformLocation objects.\n   *\n   * Intended to be overridden by subclasses.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {WebGLShaderProgram} program The shader program from which to take uniform locations.\n   * @returns {Object} A map of uniform names to uniform locations.\n   */\n  getUniformLocations: function (/* gl, program */) {\n    // in case i do not need any special uniform i need to return an empty object\n    return { };\n  },\n\n  /**\n   * Send attribute data from this filter to its shader program on the GPU.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {Object} attributeLocations A map of shader attribute names to their locations.\n   */\n  sendAttributeData: function(gl, attributeLocations, aPositionData) {\n    var attributeLocation = attributeLocations.aPosition;\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.enableVertexAttribArray(attributeLocation);\n    gl.vertexAttribPointer(attributeLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.bufferData(gl.ARRAY_BUFFER, aPositionData, gl.STATIC_DRAW);\n  },\n\n  _setupFrameBuffer: function(options) {\n    var gl = options.context, width, height;\n    if (options.passes > 1) {\n      width = options.destinationWidth;\n      height = options.destinationHeight;\n      if (options.sourceWidth !== width || options.sourceHeight !== height) {\n        gl.deleteTexture(options.targetTexture);\n        options.targetTexture = options.filterBackend.createTexture(gl, width, height);\n      }\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        options.targetTexture, 0);\n    }\n    else {\n      // draw last filter on canvas and not to framebuffer.\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      gl.finish();\n    }\n  },\n\n  _swapTextures: function(options) {\n    options.passes--;\n    options.pass++;\n    var temp = options.targetTexture;\n    options.targetTexture = options.sourceTexture;\n    options.sourceTexture = temp;\n  },\n\n  /**\n   * Generic isNeutral implementation for one parameter based filters.\n   * Used only in image applyFilters to discard filters that will not have an effect\n   * on the image\n   * Other filters may need their own version ( ColorMatrix, HueRotation, gamma, ComposedFilter )\n   * @param {Object} options\n   **/\n  isNeutralState: function(/* options */) {\n    var main = this.mainParameter,\n        _class = fabric.Image.filters[this.type].prototype;\n    if (main) {\n      if (Array.isArray(_class[main])) {\n        for (var i = _class[main].length; i--;) {\n          if (this[main][i] !== _class[main][i]) {\n            return false;\n          }\n        }\n        return true;\n      }\n      else {\n        return _class[main] === this[main];\n      }\n    }\n    else {\n      return false;\n    }\n  },\n\n  /**\n   * Apply this filter to the input image data provided.\n   *\n   * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n   *\n   * @param {Object} options\n   * @param {Number} options.passes The number of filters remaining to be executed\n   * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n   * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n   * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  applyTo: function(options) {\n    if (options.webgl) {\n      this._setupFrameBuffer(options);\n      this.applyToWebGL(options);\n      this._swapTextures(options);\n    }\n    else {\n      this.applyTo2d(options);\n    }\n  },\n\n  /**\n   * Retrieves the cached shader.\n   * @param {Object} options\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  retrieveShader: function(options) {\n    if (!options.programCache.hasOwnProperty(this.type)) {\n      options.programCache[this.type] = this.createProgram(options.context);\n    }\n    return options.programCache[this.type];\n  },\n\n  /**\n   * Apply this filter using webgl.\n   *\n   * @param {Object} options\n   * @param {Number} options.passes The number of filters remaining to be executed\n   * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n   * @param {WebGLTexture} options.originalTexture The texture of the original input image.\n   * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n   * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  applyToWebGL: function(options) {\n    var gl = options.context;\n    var shader = this.retrieveShader(options);\n    if (options.pass === 0 && options.originalTexture) {\n      gl.bindTexture(gl.TEXTURE_2D, options.originalTexture);\n    }\n    else {\n      gl.bindTexture(gl.TEXTURE_2D, options.sourceTexture);\n    }\n    gl.useProgram(shader.program);\n    this.sendAttributeData(gl, shader.attributeLocations, options.aPosition);\n\n    gl.uniform1f(shader.uniformLocations.uStepW, 1 / options.sourceWidth);\n    gl.uniform1f(shader.uniformLocations.uStepH, 1 / options.sourceHeight);\n\n    this.sendUniformData(gl, shader.uniformLocations);\n    gl.viewport(0, 0, options.destinationWidth, options.destinationHeight);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  },\n\n  bindAdditionalTexture: function(gl, texture, textureUnit) {\n    gl.activeTexture(textureUnit);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    // reset active texture to 0 as usual\n    gl.activeTexture(gl.TEXTURE0);\n  },\n\n  unbindAdditionalTexture: function(gl, textureUnit) {\n    gl.activeTexture(textureUnit);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.activeTexture(gl.TEXTURE0);\n  },\n\n  getMainParameter: function() {\n    return this[this.mainParameter];\n  },\n\n  setMainParameter: function(value) {\n    this[this.mainParameter] = value;\n  },\n\n  /**\n   * Send uniform data from this filter to its shader program on the GPU.\n   *\n   * Intended to be overridden by subclasses.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {Object} uniformLocations A map of shader uniform names to their locations.\n   */\n  sendUniformData: function(/* gl, uniformLocations */) {\n    // Intentionally left blank.  Override me in subclasses.\n  },\n\n  /**\n   * If needed by a 2d filter, this functions can create an helper canvas to be used\n   * remember that options.targetCanvas is available for use till end of chain.\n   */\n  createHelpLayer: function(options) {\n    if (!options.helpLayer) {\n      var helpLayer = document.createElement('canvas');\n      helpLayer.width = options.sourceWidth;\n      helpLayer.height = options.sourceHeight;\n      options.helpLayer = helpLayer;\n    }\n  },\n\n  /**\n   * Returns object representation of an instance\n   * @return {Object} Object representation of an instance\n   */\n  toObject: function() {\n    var object = { type: this.type }, mainP = this.mainParameter;\n    if (mainP) {\n      object[mainP] = this[mainP];\n    }\n    return object;\n  },\n\n  /**\n   * Returns a JSON representation of an instance\n   * @return {Object} JSON\n   */\n  toJSON: function() {\n    // delegate, not alias\n    return this.toObject();\n  }\n});\n\nfabric.Image.filters.BaseFilter.fromObject = function(object, callback) {\n  var filter = new fabric.Image.filters[object.type](object);\n  callback && callback(filter);\n  return filter;\n};\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Matrix filter class\n   * @class fabric.Image.filters.ColorMatrix\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.ColorMatrix#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @see {@Link http://www.webwasp.co.uk/tutorials/219/Color_Matrix_Filter.php}\n   * @see {@Link http://phoboslab.org/log/2013/11/fast-image-filters-with-webgl}\n   * @example <caption>Kodachrome filter</caption>\n   * var filter = new fabric.Image.filters.ColorMatrix({\n   *  matrix: [\n       1.1285582396593525, -0.3967382283601348, -0.03992559172921793, 0, 63.72958762196502,\n       -0.16404339962244616, 1.0835251566291304, -0.05498805115633132, 0, 24.732407896706203,\n       -0.16786010706155763, -0.5603416277695248, 1.6014850761964943, 0, 35.62982807460946,\n       0, 0, 0, 1, 0\n      ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.ColorMatrix = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.ColorMatrix.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'ColorMatrix',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'uniform mat4 uColorMatrix;\\n' +\n      'uniform vec4 uConstants;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color *= uColorMatrix;\\n' +\n        'color += uConstants;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Colormatrix for pixels.\n     * array of 20 floats. Numbers in positions 4, 9, 14, 19 loose meaning\n     * outside the -1, 1 range.\n     * 0.0039215686 is the part of 1 that get translated to 1 in 2d\n     * @param {Array} matrix array of 20 numbers.\n     * @default\n     */\n    matrix: [\n      1, 0, 0, 0, 0,\n      0, 1, 0, 0, 0,\n      0, 0, 1, 0, 0,\n      0, 0, 0, 1, 0\n    ],\n\n    mainParameter: 'matrix',\n\n    /**\n     * Lock the colormatrix on the color part, skipping alpha, manly for non webgl scenario\n     * to save some calculation\n     */\n    colorsOnly: true,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      // create a new array instead mutating the prototype with push\n      this.matrix = this.matrix.slice(0);\n    },\n\n    /**\n     * Apply the ColorMatrix operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          iLen = data.length,\n          m = this.matrix,\n          r, g, b, a, i, colorsOnly = this.colorsOnly;\n\n      for (i = 0; i < iLen; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        if (colorsOnly) {\n          data[i] = r * m[0] + g * m[1] + b * m[2] + m[4] * 255;\n          data[i + 1] = r * m[5] + g * m[6] + b * m[7] + m[9] * 255;\n          data[i + 2] = r * m[10] + g * m[11] + b * m[12] + m[14] * 255;\n        }\n        else {\n          a = data[i + 3];\n          data[i] = r * m[0] + g * m[1] + b * m[2] + a * m[3] + m[4] * 255;\n          data[i + 1] = r * m[5] + g * m[6] + b * m[7] + a * m[8] + m[9] * 255;\n          data[i + 2] = r * m[10] + g * m[11] + b * m[12] + a * m[13] + m[14] * 255;\n          data[i + 3] = r * m[15] + g * m[16] + b * m[17] + a * m[18] + m[19] * 255;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uColorMatrix: gl.getUniformLocation(program, 'uColorMatrix'),\n        uConstants: gl.getUniformLocation(program, 'uConstants'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var m = this.matrix,\n          matrix = [\n            m[0], m[1], m[2], m[3],\n            m[5], m[6], m[7], m[8],\n            m[10], m[11], m[12], m[13],\n            m[15], m[16], m[17], m[18]\n          ],\n          constants = [m[4], m[9], m[14], m[19]];\n      gl.uniformMatrix4fv(uniformLocations.uColorMatrix, false, matrix);\n      gl.uniform4fv(uniformLocations.uConstants, constants);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] function to invoke after filter creation\n   * @return {fabric.Image.filters.ColorMatrix} Instance of fabric.Image.filters.ColorMatrix\n   */\n  fabric.Image.filters.ColorMatrix.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Brightness filter class\n   * @class fabric.Image.filters.Brightness\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Brightness#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Brightness({\n   *   brightness: 0.05\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Brightness = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Brightness.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Brightness',\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uBrightness;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color.rgb += uBrightness;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Brightness value, from -1 to 1.\n     * translated to -255 to 255 for 2d\n     * 0.0039215686 is the part of 1 that get translated to 1 in 2d\n     * @param {Number} brightness\n     * @default\n     */\n    brightness: 0,\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'brightness',\n\n    /**\n    * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n    *\n    * @param {Object} options\n    * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n    */\n    applyTo2d: function(options) {\n      if (this.brightness === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, i, len = data.length,\n          brightness = Math.round(this.brightness * 255);\n      for (i = 0; i < len; i += 4) {\n        data[i] = data[i] + brightness;\n        data[i + 1] = data[i + 1] + brightness;\n        data[i + 2] = data[i + 2] + brightness;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uBrightness: gl.getUniformLocation(program, 'uBrightness'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uBrightness, this.brightness);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Brightness} Instance of fabric.Image.filters.Brightness\n   */\n  fabric.Image.filters.Brightness.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Adapted from <a href=\"http://www.html5rocks.com/en/tutorials/canvas/imagefilters/\">html5rocks article</a>\n   * @class fabric.Image.filters.Convolute\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Convolute#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example <caption>Sharpen filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 0, -1,  0,\n   *            -1,  5, -1,\n   *             0, -1,  0 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Blur filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Emboss filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Emboss filter with opaqueness</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   opaque: true,\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Convolute = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Convolute.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Convolute',\n\n    /*\n     * Opaque value (true/false)\n     */\n    opaque: false,\n\n    /*\n     * matrix for the filter, max 9x9\n     */\n    matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: {\n      Convolute_3_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[9];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 3.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 3.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_3_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[9];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 3.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 3.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_5_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[25];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 5.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 5.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_5_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[25];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 5.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 5.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_7_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[49];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 7.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 7.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_7_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[49];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 7.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 7.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_9_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[81];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 9.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 9.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_9_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[81];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 9.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 9.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n    },\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Convolute.prototype\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.opaque=false] Opaque value (true/false)\n     * @param {Array} [options.matrix] Filter matrix\n     */\n\n\n    /**\n    * Retrieves the cached shader.\n    * @param {Object} options\n    * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n    * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n    */\n    retrieveShader: function(options) {\n      var size = Math.sqrt(this.matrix.length);\n      var cacheKey = this.type + '_' + size + '_' + (this.opaque ? 1 : 0);\n      var shaderSource = this.fragmentSource[cacheKey];\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          weights = this.matrix,\n          side = Math.round(Math.sqrt(weights.length)),\n          halfSide = Math.floor(side / 2),\n          sw = imageData.width,\n          sh = imageData.height,\n          output = options.ctx.createImageData(sw, sh),\n          dst = output.data,\n          // go through the destination image pixels\n          alphaFac = this.opaque ? 1 : 0,\n          r, g, b, a, dstOff,\n          scx, scy, srcOff, wt,\n          x, y, cx, cy;\n\n      for (y = 0; y < sh; y++) {\n        for (x = 0; x < sw; x++) {\n          dstOff = (y * sw + x) * 4;\n          // calculate the weighed sum of the source image pixels that\n          // fall under the convolution matrix\n          r = 0; g = 0; b = 0; a = 0;\n\n          for (cy = 0; cy < side; cy++) {\n            for (cx = 0; cx < side; cx++) {\n              scy = y + cy - halfSide;\n              scx = x + cx - halfSide;\n\n              // eslint-disable-next-line max-depth\n              if (scy < 0 || scy >= sh || scx < 0 || scx >= sw) {\n                continue;\n              }\n\n              srcOff = (scy * sw + scx) * 4;\n              wt = weights[cy * side + cx];\n\n              r += data[srcOff] * wt;\n              g += data[srcOff + 1] * wt;\n              b += data[srcOff + 2] * wt;\n              // eslint-disable-next-line max-depth\n              if (!alphaFac) {\n                a += data[srcOff + 3] * wt;\n              }\n            }\n          }\n          dst[dstOff] = r;\n          dst[dstOff + 1] = g;\n          dst[dstOff + 2] = b;\n          if (!alphaFac) {\n            dst[dstOff + 3] = a;\n          }\n          else {\n            dst[dstOff + 3] = data[dstOff + 3];\n          }\n        }\n      }\n      options.imageData = output;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uMatrix: gl.getUniformLocation(program, 'uMatrix'),\n        uOpaque: gl.getUniformLocation(program, 'uOpaque'),\n        uHalfSize: gl.getUniformLocation(program, 'uHalfSize'),\n        uSize: gl.getUniformLocation(program, 'uSize'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1fv(uniformLocations.uMatrix, this.matrix);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        opaque: this.opaque,\n        matrix: this.matrix\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Convolute} Instance of fabric.Image.filters.Convolute\n   */\n  fabric.Image.filters.Convolute.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Grayscale image filter class\n   * @class fabric.Image.filters.Grayscale\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Grayscale();\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Grayscale = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Grayscale.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Grayscale',\n\n    fragmentSource: {\n      average: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = (color.r + color.b + color.g) / 3.0;\\n' +\n          'gl_FragColor = vec4(average, average, average, color.a);\\n' +\n        '}',\n      lightness: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform int uMode;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 col = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\n' +\n          'gl_FragColor = vec4(average, average, average, col.a);\\n' +\n        '}',\n      luminosity: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform int uMode;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 col = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\n' +\n          'gl_FragColor = vec4(average, average, average, col.a);\\n' +\n        '}',\n    },\n\n\n    /**\n     * Grayscale mode, between 'average', 'lightness', 'luminosity'\n     * @param {String} type\n     * @default\n     */\n    mode: 'average',\n\n    mainParameter: 'mode',\n\n    /**\n     * Apply the Grayscale operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          len = data.length, value,\n          mode = this.mode;\n      for (i = 0; i < len; i += 4) {\n        if (mode === 'average') {\n          value = (data[i] + data[i + 1] + data[i + 2]) / 3;\n        }\n        else if (mode === 'lightness') {\n          value = (Math.min(data[i], data[i + 1], data[i + 2]) +\n            Math.max(data[i], data[i + 1], data[i + 2])) / 2;\n        }\n        else if (mode === 'luminosity') {\n          value = 0.21 * data[i] + 0.72 * data[i + 1] + 0.07 * data[i + 2];\n        }\n        data[i] = value;\n        data[i + 1] = value;\n        data[i + 2] = value;\n      }\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        var shaderSource = this.fragmentSource[this.mode];\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uMode: gl.getUniformLocation(program, 'uMode'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      // default average mode.\n      var mode = 1;\n      gl.uniform1i(uniformLocations.uMode, mode);\n    },\n\n    /**\n     * Grayscale filter isNeutralState implementation\n     * The filter is never neutral\n     * on the image\n     **/\n    isNeutralState: function() {\n      return false;\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Grayscale} Instance of fabric.Image.filters.Grayscale\n   */\n  fabric.Image.filters.Grayscale.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Invert filter class\n   * @class fabric.Image.filters.Invert\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Invert();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Invert = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Invert.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Invert',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform int uInvert;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'if (uInvert == 1) {\\n' +\n          'gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n' +\n        '} else {\\n' +\n          'gl_FragColor = color;\\n' +\n        '}\\n' +\n      '}',\n\n    /**\n     * Filter invert. if false, does nothing\n     * @param {Boolean} invert\n     * @default\n     */\n    invert: true,\n\n    mainParameter: 'invert',\n\n    /**\n     * Apply the Invert operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          len = data.length;\n      for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n      }\n    },\n\n    /**\n     * Invert filter isNeutralState implementation\n     * Used only in image applyFilters to discard filters that will not have an effect\n     * on the image\n     * @param {Object} options\n     **/\n    isNeutralState: function() {\n      return !this.invert;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uInvert: gl.getUniformLocation(program, 'uInvert'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1i(uniformLocations.uInvert, this.invert);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Invert} Instance of fabric.Image.filters.Invert\n   */\n  fabric.Image.filters.Invert.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Noise filter class\n   * @class fabric.Image.filters.Noise\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Noise#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Noise({\n   *   noise: 700\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Noise = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Noise.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Noise',\n\n    /**\n     * Fragment source for the noise program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uStepH;\\n' +\n      'uniform float uNoise;\\n' +\n      'uniform float uSeed;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'float rand(vec2 co, float seed, float vScale) {\\n' +\n        'return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n' +\n      '}\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'noise',\n\n    /**\n     * Noise value, from\n     * @param {Number} noise\n     * @default\n     */\n    noise: 0,\n\n    /**\n     * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.noise === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, i, len = data.length,\n          noise = this.noise, rand;\n\n      for (i = 0, len = data.length; i < len; i += 4) {\n\n        rand = (0.5 - Math.random()) * noise;\n\n        data[i] += rand;\n        data[i + 1] += rand;\n        data[i + 2] += rand;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uNoise: gl.getUniformLocation(program, 'uNoise'),\n        uSeed: gl.getUniformLocation(program, 'uSeed'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uNoise, this.noise / 255);\n      gl.uniform1f(uniformLocations.uSeed, Math.random());\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        noise: this.noise\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Noise} Instance of fabric.Image.filters.Noise\n   */\n  fabric.Image.filters.Noise.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Pixelate filter class\n   * @class fabric.Image.filters.Pixelate\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Pixelate#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Pixelate({\n   *   blocksize: 8\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Pixelate = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Pixelate.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Pixelate',\n\n    blocksize: 4,\n\n    mainParameter: 'blocksize',\n\n    /**\n     * Fragment source for the Pixelate program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uBlocksize;\\n' +\n      'uniform float uStepW;\\n' +\n      'uniform float uStepH;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'float blockW = uBlocksize * uStepW;\\n' +\n        'float blockH = uBlocksize * uStepW;\\n' +\n        'int posX = int(vTexCoord.x / blockW);\\n' +\n        'int posY = int(vTexCoord.y / blockH);\\n' +\n        'float fposX = float(posX);\\n' +\n        'float fposY = float(posY);\\n' +\n        'vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\n' +\n        'vec4 color = texture2D(uTexture, squareCoords);\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Apply the Pixelate operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          iLen = imageData.height,\n          jLen = imageData.width,\n          index, i, j, r, g, b, a,\n          _i, _j, _iLen, _jLen;\n\n      for (i = 0; i < iLen; i += this.blocksize) {\n        for (j = 0; j < jLen; j += this.blocksize) {\n\n          index = (i * 4) * jLen + (j * 4);\n\n          r = data[index];\n          g = data[index + 1];\n          b = data[index + 2];\n          a = data[index + 3];\n\n          _iLen = Math.min(i + this.blocksize, iLen);\n          _jLen = Math.min(j + this.blocksize, jLen);\n          for (_i = i; _i < _iLen; _i++) {\n            for (_j = j; _j < _jLen; _j++) {\n              index = (_i * 4) * jLen + (_j * 4);\n              data[index] = r;\n              data[index + 1] = g;\n              data[index + 2] = b;\n              data[index + 3] = a;\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Indicate when the filter is not gonna apply changes to the image\n     **/\n    isNeutralState: function() {\n      return this.blocksize === 1;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uBlocksize: gl.getUniformLocation(program, 'uBlocksize'),\n        uStepW: gl.getUniformLocation(program, 'uStepW'),\n        uStepH: gl.getUniformLocation(program, 'uStepH'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uBlocksize, this.blocksize);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Pixelate} Instance of fabric.Image.filters.Pixelate\n   */\n  fabric.Image.filters.Pixelate.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Remove white filter class\n   * @class fabric.Image.filters.RemoveColor\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.RemoveColor#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.RemoveColor({\n   *   threshold: 0.2,\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.RemoveColor = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.RemoveColor.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'RemoveColor',\n\n    /**\n     * Color to remove, in any format understood by fabric.Color.\n     * @param {String} type\n     * @default\n     */\n    color: '#FFFFFF',\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec4 uLow;\\n' +\n      'uniform vec4 uHigh;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'gl_FragColor = texture2D(uTexture, vTexCoord);\\n' +\n        'if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\n' +\n          'gl_FragColor.a = 0.0;\\n' +\n        '}\\n' +\n      '}',\n\n    /**\n     * distance to actual color, as value up or down from each r,g,b\n     * between 0 and 1\n     **/\n    distance: 0.02,\n\n    /**\n     * For color to remove inside distance, use alpha channel for a smoother deletion\n     * NOT IMPLEMENTED YET\n     **/\n    useAlpha: false,\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.RemoveWhite.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.color=#RRGGBB] Threshold value\n     * @param {Number} [options.distance=10] Distance value\n     */\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          distance = this.distance * 255,\n          r, g, b,\n          source = new fabric.Color(this.color).getSource(),\n          lowC = [\n            source[0] - distance,\n            source[1] - distance,\n            source[2] - distance,\n          ],\n          highC = [\n            source[0] + distance,\n            source[1] + distance,\n            source[2] + distance,\n          ];\n\n\n      for (i = 0; i < data.length; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        if (r > lowC[0] &&\n            g > lowC[1] &&\n            b > lowC[2] &&\n            r < highC[0] &&\n            g < highC[1] &&\n            b < highC[2]) {\n          data[i + 3] = 0;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uLow: gl.getUniformLocation(program, 'uLow'),\n        uHigh: gl.getUniformLocation(program, 'uHigh'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var source = new fabric.Color(this.color).getSource(),\n          distance = parseFloat(this.distance),\n          lowC = [\n            0 + source[0] / 255 - distance,\n            0 + source[1] / 255 - distance,\n            0 + source[2] / 255 - distance,\n            1\n          ],\n          highC = [\n            source[0] / 255 + distance,\n            source[1] / 255 + distance,\n            source[2] / 255 + distance,\n            1\n          ];\n      gl.uniform4fv(uniformLocations.uLow, lowC);\n      gl.uniform4fv(uniformLocations.uHigh, highC);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        color: this.color,\n        distance: this.distance\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.RemoveColor} Instance of fabric.Image.filters.RemoveWhite\n   */\n  fabric.Image.filters.RemoveColor.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  var matrices = {\n    Brownie: [\n      0.59970,0.34553,-0.27082,0,0.186,\n      -0.03770,0.86095,0.15059,0,-0.1449,\n      0.24113,-0.07441,0.44972,0,-0.02965,\n      0,0,0,1,0\n    ],\n    Vintage: [\n      0.62793,0.32021,-0.03965,0,0.03784,\n      0.02578,0.64411,0.03259,0,0.02926,\n      0.04660,-0.08512,0.52416,0,0.02023,\n      0,0,0,1,0\n    ],\n    Kodachrome: [\n      1.12855,-0.39673,-0.03992,0,0.24991,\n      -0.16404,1.08352,-0.05498,0,0.09698,\n      -0.16786,-0.56034,1.60148,0,0.13972,\n      0,0,0,1,0\n    ],\n    Technicolor: [\n      1.91252,-0.85453,-0.09155,0,0.04624,\n      -0.30878,1.76589,-0.10601,0,-0.27589,\n      -0.23110,-0.75018,1.84759,0,0.12137,\n      0,0,0,1,0\n    ],\n    Polaroid: [\n      1.438,-0.062,-0.062,0,0,\n      -0.122,1.378,-0.122,0,0,\n      -0.016,-0.016,1.483,0,0,\n      0,0,0,1,0\n    ],\n    Sepia: [\n      0.393, 0.769, 0.189, 0, 0,\n      0.349, 0.686, 0.168, 0, 0,\n      0.272, 0.534, 0.131, 0, 0,\n      0, 0, 0, 1, 0\n    ],\n    BlackWhite: [\n      1.5, 1.5, 1.5, 0, -1,\n      1.5, 1.5, 1.5, 0, -1,\n      1.5, 1.5, 1.5, 0, -1,\n      0, 0, 0, 1, 0,\n    ]\n  };\n\n  for (var key in matrices) {\n    filters[key] = createClass(filters.ColorMatrix, /** @lends fabric.Image.filters.Sepia.prototype */ {\n\n      /**\n       * Filter type\n       * @param {String} type\n       * @default\n       */\n      type: key,\n\n      /**\n       * Colormatrix for the effect\n       * array of 20 floats. Numbers in positions 4, 9, 14, 19 loose meaning\n       * outside the -1, 1 range.\n       * @param {Array} matrix array of 20 numbers.\n       * @default\n       */\n      matrix: matrices[key],\n\n      /**\n       * Lock the matrix export for this kind of static, parameter less filters.\n       */\n      mainParameter: false,\n      /**\n       * Lock the colormatrix on the color part, skipping alpha\n       */\n      colorsOnly: true,\n\n    });\n    fabric.Image.filters[key].fromObject = fabric.Image.filters.BaseFilter.fromObject;\n  }\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Blend filter class\n   * @class fabric.Image.filter.BlendColor\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.BlendColor({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.BlendImage({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n\n  filters.BlendColor = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blend.prototype */ {\n    type: 'BlendColor',\n\n    /**\n     * Color to make the blend operation with. default to a reddish color since black or white\n     * gives always strong result.\n     **/\n    color: '#F95C63',\n\n    /**\n     * Blend mode for the filter: one of multiply, add, diff, screen, subtract,\n     * darken, lighten, overlay, exclusion, tint.\n     **/\n    mode: 'multiply',\n\n    /**\n     * alpha value. represent the strength of the blend color operation.\n     **/\n    alpha: 1,\n\n    /**\n     * Fragment source for the Multiply program\n     */\n    fragmentSource: {\n      multiply: 'gl_FragColor.rgb *= uColor.rgb;\\n',\n      screen: 'gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n',\n      add: 'gl_FragColor.rgb += uColor.rgb;\\n',\n      diff: 'gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n',\n      subtract: 'gl_FragColor.rgb -= uColor.rgb;\\n',\n      lighten: 'gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n',\n      darken: 'gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n',\n      exclusion: 'gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n',\n      overlay: 'if (uColor.r < 0.5) {\\n' +\n          'gl_FragColor.r *= 2.0 * uColor.r;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n' +\n        '}\\n' +\n        'if (uColor.g < 0.5) {\\n' +\n          'gl_FragColor.g *= 2.0 * uColor.g;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n' +\n        '}\\n' +\n        'if (uColor.b < 0.5) {\\n' +\n          'gl_FragColor.b *= 2.0 * uColor.b;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n' +\n        '}\\n',\n      tint: 'gl_FragColor.rgb *= (1.0 - uColor.a);\\n' +\n        'gl_FragColor.rgb += uColor.rgb;\\n',\n    },\n\n    /**\n     * build the fragment source for the filters, joining the common part with\n     * the specific one.\n     * @param {String} mode the mode of the filter, a key of this.fragmentSource\n     * @return {String} the source to be compiled\n     * @private\n     */\n    buildSource: function(mode) {\n      return 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'gl_FragColor = color;\\n' +\n          'if (color.a > 0.0) {\\n' +\n            this.fragmentSource[mode] +\n          '}\\n' +\n        '}';\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode, shaderSource;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        shaderSource = this.buildSource(this.mode);\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Apply the Blend operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, iLen = data.length,\n          tr, tg, tb,\n          r, g, b,\n          source, alpha1 = 1 - this.alpha;\n\n      source = new fabric.Color(this.color).getSource();\n      tr = source[0] * this.alpha;\n      tg = source[1] * this.alpha;\n      tb = source[2] * this.alpha;\n\n      for (var i = 0; i < iLen; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            break;\n          case 'screen':\n            data[i] = 255 - (255 - r) * (255 - tr) / 255;\n            data[i + 1] = 255 - (255 - g) * (255 - tg) / 255;\n            data[i + 2] = 255 - (255 - b) * (255 - tb) / 255;\n            break;\n          case 'add':\n            data[i] = r + tr;\n            data[i + 1] = g + tg;\n            data[i + 2] = b + tb;\n            break;\n          case 'diff':\n          case 'difference':\n            data[i] = Math.abs(r - tr);\n            data[i + 1] = Math.abs(g - tg);\n            data[i + 2] = Math.abs(b - tb);\n            break;\n          case 'subtract':\n            data[i] = r - tr;\n            data[i + 1] = g - tg;\n            data[i + 2] = b - tb;\n            break;\n          case 'darken':\n            data[i] = Math.min(r, tr);\n            data[i + 1] = Math.min(g, tg);\n            data[i + 2] = Math.min(b, tb);\n            break;\n          case 'lighten':\n            data[i] = Math.max(r, tr);\n            data[i + 1] = Math.max(g, tg);\n            data[i + 2] = Math.max(b, tb);\n            break;\n          case 'overlay':\n            data[i] = tr < 128 ? (2 * r * tr / 255) : (255 - 2 * (255 - r) * (255 - tr) / 255);\n            data[i + 1] = tg < 128 ? (2 * g * tg / 255) : (255 - 2 * (255 - g) * (255 - tg) / 255);\n            data[i + 2] = tb < 128 ? (2 * b * tb / 255) : (255 - 2 * (255 - b) * (255 - tb) / 255);\n            break;\n          case 'exclusion':\n            data[i] = tr + r - ((2 * tr * r) / 255);\n            data[i + 1] = tg + g - ((2 * tg * g) / 255);\n            data[i + 2] = tb + b - ((2 * tb * b) / 255);\n            break;\n          case 'tint':\n            data[i] = tr + r * alpha1;\n            data[i + 1] = tg + g * alpha1;\n            data[i + 2] = tb + b * alpha1;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uColor: gl.getUniformLocation(program, 'uColor'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var source = new fabric.Color(this.color).getSource();\n      source[0] = this.alpha * source[0] / 255;\n      source[1] = this.alpha * source[1] / 255;\n      source[2] = this.alpha * source[2] / 255;\n      source[3] = this.alpha;\n      gl.uniform4fv(uniformLocations.uColor, source);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        color: this.color,\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.BlendColor} Instance of fabric.Image.filters.BlendColor\n   */\n  fabric.Image.filters.BlendColor.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Image Blend filter class\n   * @class fabric.Image.filter.BlendImage\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.BlendColor({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.BlendImage({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n\n  filters.BlendImage = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.BlendImage.prototype */ {\n    type: 'BlendImage',\n\n    /**\n     * Color to make the blend operation with. default to a reddish color since black or white\n     * gives always strong result.\n     **/\n    image: null,\n\n    /**\n     * Blend mode for the filter: one of multiply, add, diff, screen, subtract,\n     * darken, lighten, overlay, exclusion, tint.\n     **/\n    mode: 'multiply',\n\n    /**\n     * alpha value. represent the strength of the blend image operation.\n     * not implemented.\n     **/\n    alpha: 1,\n\n    vertexSource: 'attribute vec2 aPosition;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'varying vec2 vTexCoord2;\\n' +\n      'uniform mat3 uTransformMatrix;\\n' +\n      'void main() {\\n' +\n        'vTexCoord = aPosition;\\n' +\n        'vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\n' +\n        'gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n' +\n      '}',\n\n    /**\n     * Fragment source for the Multiply program\n     */\n    fragmentSource: {\n      multiply: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform sampler2D uImage;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'varying vec2 vTexCoord2;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'vec4 color2 = texture2D(uImage, vTexCoord2);\\n' +\n          'color.rgba *= color2.rgba;\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      mask: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform sampler2D uImage;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'varying vec2 vTexCoord2;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'vec4 color2 = texture2D(uImage, vTexCoord2);\\n' +\n          'color.a = color2.a;\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode;\n      var shaderSource = this.fragmentSource[this.mode];\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    applyToWebGL: function(options) {\n      // load texture to blend.\n      var gl = options.context,\n          texture = this.createTexture(options.filterBackend, this.image);\n      this.bindAdditionalTexture(gl, texture, gl.TEXTURE1);\n      this.callSuper('applyToWebGL', options);\n      this.unbindAdditionalTexture(gl, gl.TEXTURE1);\n    },\n\n    createTexture: function(backend, image) {\n      return backend.getCachedTexture(image.cacheKey, image._element);\n    },\n\n    /**\n     * Calculate a transformMatrix to adapt the image to blend over\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    calculateMatrix: function() {\n      var image = this.image,\n          width = image._element.width,\n          height = image._element.height;\n      return [\n        1 / image.scaleX, 0, 0,\n        0, 1 / image.scaleY, 0,\n        -image.left / width, -image.top / height, 1\n      ];\n    },\n\n    /**\n     * Apply the Blend operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          resources = options.filterBackend.resources,\n          data = imageData.data, iLen = data.length,\n          width = imageData.width,\n          height = imageData.height,\n          tr, tg, tb, ta,\n          r, g, b, a,\n          canvas1, context, image = this.image, blendData;\n\n      if (!resources.blendImage) {\n        resources.blendImage = fabric.util.createCanvasElement();\n      }\n      canvas1 = resources.blendImage;\n      context = canvas1.getContext('2d');\n      if (canvas1.width !== width || canvas1.height !== height) {\n        canvas1.width = width;\n        canvas1.height = height;\n      }\n      else {\n        context.clearRect(0, 0, width, height);\n      }\n      context.setTransform(image.scaleX, 0, 0, image.scaleY, image.left, image.top);\n      context.drawImage(image._element, 0, 0, width, height);\n      blendData = context.getImageData(0, 0, width, height).data;\n      for (var i = 0; i < iLen; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n\n        tr = blendData[i];\n        tg = blendData[i + 1];\n        tb = blendData[i + 2];\n        ta = blendData[i + 3];\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            data[i + 3] = a * ta / 255;\n            break;\n          case 'mask':\n            data[i + 3] = ta;\n            break;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uTransformMatrix: gl.getUniformLocation(program, 'uTransformMatrix'),\n        uImage: gl.getUniformLocation(program, 'uImage'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var matrix = this.calculateMatrix();\n      gl.uniform1i(uniformLocations.uImage, 1); // texture unit 1.\n      gl.uniformMatrix3fv(uniformLocations.uTransformMatrix, false, matrix);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        image: this.image && this.image.toObject(),\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} callback to be invoked after filter creation\n   * @return {fabric.Image.filters.BlendImage} Instance of fabric.Image.filters.BlendImage\n   */\n  fabric.Image.filters.BlendImage.fromObject = function(object, callback) {\n    fabric.Image.fromObject(object.image, function(image) {\n      var options = fabric.util.object.clone(object);\n      options.image = image;\n      callback(new fabric.Image.filters.BlendImage(options));\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }), pow = Math.pow, floor = Math.floor,\n      sqrt = Math.sqrt, abs = Math.abs, round = Math.round, sin = Math.sin,\n      ceil = Math.ceil,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Resize image filter class\n   * @class fabric.Image.filters.Resize\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Resize();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Resize = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Resize.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Resize',\n\n    /**\n     * Resize type\n     * for webgl resizeType is just lanczos, for canvas2d can be:\n     * bilinear, hermite, sliceHack, lanczos.\n     * @param {String} resizeType\n     * @default\n     */\n    resizeType: 'hermite',\n\n    /**\n     * Scale factor for resizing, x axis\n     * @param {Number} scaleX\n     * @default\n     */\n    scaleX: 1,\n\n    /**\n     * Scale factor for resizing, y axis\n     * @param {Number} scaleY\n     * @default\n     */\n    scaleY: 1,\n\n    /**\n     * LanczosLobes parameter for lanczos filter, valid for resizeType lanczos\n     * @param {Number} lanczosLobes\n     * @default\n     */\n    lanczosLobes: 3,\n\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uDelta: gl.getUniformLocation(program, 'uDelta'),\n        uTaps: gl.getUniformLocation(program, 'uTaps'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform2fv(uniformLocations.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]);\n      gl.uniform1fv(uniformLocations.uTaps, this.taps);\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var filterWindow = this.getFilterWindow(), cacheKey = this.type + '_' + filterWindow;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        var fragmentShader = this.generateShader(filterWindow);\n        options.programCache[cacheKey] = this.createProgram(options.context, fragmentShader);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    getFilterWindow: function() {\n      var scale = this.tempScale;\n      return Math.ceil(this.lanczosLobes / scale);\n    },\n\n    getTaps: function() {\n      var lobeFunction = this.lanczosCreate(this.lanczosLobes), scale = this.tempScale,\n          filterWindow = this.getFilterWindow(), taps = new Array(filterWindow);\n      for (var i = 1; i <= filterWindow; i++) {\n        taps[i - 1] = lobeFunction(i * scale);\n      }\n      return taps;\n    },\n\n    /**\n     * Generate vertex and shader sources from the necessary steps numbers\n     * @param {Number} filterWindow\n     */\n    generateShader: function(filterWindow) {\n      var offsets = new Array(filterWindow),\n          fragmentShader = this.fragmentSourceTOP, filterWindow;\n\n      for (var i = 1; i <= filterWindow; i++) {\n        offsets[i - 1] = i + '.0 * uDelta';\n      }\n\n      fragmentShader += 'uniform float uTaps[' + filterWindow + '];\\n';\n      fragmentShader += 'void main() {\\n';\n      fragmentShader += '  vec4 color = texture2D(uTexture, vTexCoord);\\n';\n      fragmentShader += '  float sum = 1.0;\\n';\n\n      offsets.forEach(function(offset, i) {\n        fragmentShader += '  color += texture2D(uTexture, vTexCoord + ' + offset + ') * uTaps[' + i + '];\\n';\n        fragmentShader += '  color += texture2D(uTexture, vTexCoord - ' + offset + ') * uTaps[' + i + '];\\n';\n        fragmentShader += '  sum += 2.0 * uTaps[' + i + '];\\n';\n      });\n      fragmentShader += '  gl_FragColor = color / sum;\\n';\n      fragmentShader += '}';\n      return fragmentShader;\n    },\n\n    fragmentSourceTOP: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec2 uDelta;\\n' +\n      'varying vec2 vTexCoord;\\n',\n\n    /**\n     * Apply the resize filter to the image\n     * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be executed\n     * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n     * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n     * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    applyTo: function(options) {\n      if (options.webgl) {\n        options.passes++;\n        this.width = options.sourceWidth;\n        this.horizontal = true;\n        this.dW = Math.round(this.width * this.scaleX);\n        this.dH = options.sourceHeight;\n        this.tempScale = this.dW / this.width;\n        this.taps = this.getTaps();\n        options.destinationWidth = this.dW;\n        this._setupFrameBuffer(options);\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        options.sourceWidth = options.destinationWidth;\n\n        this.height = options.sourceHeight;\n        this.horizontal = false;\n        this.dH = Math.round(this.height * this.scaleY);\n        this.tempScale = this.dH / this.height;\n        this.taps = this.getTaps();\n        options.destinationHeight = this.dH;\n        this._setupFrameBuffer(options);\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        options.sourceHeight = options.destinationHeight;\n      }\n      else {\n        this.applyTo2d(options);\n      }\n    },\n\n    isNeutralState: function() {\n      return this.scaleX === 1 && this.scaleY === 1;\n    },\n\n    lanczosCreate: function(lobes) {\n      return function(x) {\n        if (x >= lobes || x <= -lobes) {\n          return 0.0;\n        }\n        if (x < 1.19209290E-07 && x > -1.19209290E-07) {\n          return 1.0;\n        }\n        x *= Math.PI;\n        var xx = x / lobes;\n        return (sin(x) / x) * sin(xx) / xx;\n      };\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Resize.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} scaleX\n     * @param {Number} scaleY\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          scaleX = this.scaleX,\n          scaleY = this.scaleY;\n\n      this.rcpScaleX = 1 / scaleX;\n      this.rcpScaleY = 1 / scaleY;\n\n      var oW = imageData.width, oH = imageData.height,\n          dW = round(oW * scaleX), dH = round(oH * scaleY),\n          newData;\n\n      if (this.resizeType === 'sliceHack') {\n        newData = this.sliceByTwo(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'hermite') {\n        newData = this.hermiteFastResize(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'bilinear') {\n        newData = this.bilinearFiltering(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'lanczos') {\n        newData = this.lanczosResize(options, oW, oH, dW, dH);\n      }\n      options.imageData = newData;\n    },\n\n    /**\n     * Filter sliceByTwo\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    sliceByTwo: function(options, oW, oH, dW, dH) {\n      var imageData = options.imageData,\n          mult = 0.5, doneW = false, doneH = false, stepW = oW * mult,\n          stepH = oH * mult, resources = fabric.filterBackend.resources,\n          tmpCanvas, ctx, sX = 0, sY = 0, dX = oW, dY = 0;\n      if (!resources.sliceByTwo) {\n        resources.sliceByTwo = document.createElement('canvas');\n      }\n      tmpCanvas = resources.sliceByTwo;\n      if (tmpCanvas.width < oW * 1.5 || tmpCanvas.height < oH) {\n        tmpCanvas.width = oW * 1.5;\n        tmpCanvas.height = oH;\n      }\n      ctx = tmpCanvas.getContext('2d');\n      ctx.clearRect(0, 0, oW * 1.5, oH);\n      ctx.putImageData(imageData, 0, 0);\n\n      dW = floor(dW);\n      dH = floor(dH);\n\n      while (!doneW || !doneH) {\n        oW = stepW;\n        oH = stepH;\n        if (dW < floor(stepW * mult)) {\n          stepW = floor(stepW * mult);\n        }\n        else {\n          stepW = dW;\n          doneW = true;\n        }\n        if (dH < floor(stepH * mult)) {\n          stepH = floor(stepH * mult);\n        }\n        else {\n          stepH = dH;\n          doneH = true;\n        }\n        ctx.drawImage(tmpCanvas, sX, sY, oW, oH, dX, dY, stepW, stepH);\n        sX = dX;\n        sY = dY;\n        dY += stepH;\n      }\n      return ctx.getImageData(sX, sY, dW, dH);\n    },\n\n    /**\n     * Filter lanczosResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    lanczosResize: function(options, oW, oH, dW, dH) {\n\n      function process(u) {\n        var v, i, weight, idx, a, red, green,\n            blue, alpha, fX, fY;\n        center.x = (u + 0.5) * ratioX;\n        icenter.x = floor(center.x);\n        for (v = 0; v < dH; v++) {\n          center.y = (v + 0.5) * ratioY;\n          icenter.y = floor(center.y);\n          a = 0; red = 0; green = 0; blue = 0; alpha = 0;\n          for (i = icenter.x - range2X; i <= icenter.x + range2X; i++) {\n            if (i < 0 || i >= oW) {\n              continue;\n            }\n            fX = floor(1000 * abs(i - center.x));\n            if (!cacheLanc[fX]) {\n              cacheLanc[fX] = { };\n            }\n            for (var j = icenter.y - range2Y; j <= icenter.y + range2Y; j++) {\n              if (j < 0 || j >= oH) {\n                continue;\n              }\n              fY = floor(1000 * abs(j - center.y));\n              if (!cacheLanc[fX][fY]) {\n                cacheLanc[fX][fY] = lanczos(sqrt(pow(fX * rcpRatioX, 2) + pow(fY * rcpRatioY, 2)) / 1000);\n              }\n              weight = cacheLanc[fX][fY];\n              if (weight > 0) {\n                idx = (j * oW + i) * 4;\n                a += weight;\n                red += weight * srcData[idx];\n                green += weight * srcData[idx + 1];\n                blue += weight * srcData[idx + 2];\n                alpha += weight * srcData[idx + 3];\n              }\n            }\n          }\n          idx = (v * dW + u) * 4;\n          destData[idx] = red / a;\n          destData[idx + 1] = green / a;\n          destData[idx + 2] = blue / a;\n          destData[idx + 3] = alpha / a;\n        }\n\n        if (++u < dW) {\n          return process(u);\n        }\n        else {\n          return destImg;\n        }\n      }\n\n      var srcData = options.imageData.data,\n          destImg = options.ctx.createImageData(dW, dH),\n          destData = destImg.data,\n          lanczos = this.lanczosCreate(this.lanczosLobes),\n          ratioX = this.rcpScaleX, ratioY = this.rcpScaleY,\n          rcpRatioX = 2 / this.rcpScaleX, rcpRatioY = 2 / this.rcpScaleY,\n          range2X = ceil(ratioX * this.lanczosLobes / 2),\n          range2Y = ceil(ratioY * this.lanczosLobes / 2),\n          cacheLanc = { }, center = { }, icenter = { };\n\n      return process(0);\n    },\n\n    /**\n     * bilinearFiltering\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    bilinearFiltering: function(options, oW, oH, dW, dH) {\n      var a, b, c, d, x, y, i, j, xDiff, yDiff, chnl,\n          color, offset = 0, origPix, ratioX = this.rcpScaleX,\n          ratioY = this.rcpScaleY,\n          w4 = 4 * (oW - 1), img = options.imageData,\n          pixels = img.data, destImage = options.ctx.createImageData(dW, dH),\n          destPixels = destImage.data;\n      for (i = 0; i < dH; i++) {\n        for (j = 0; j < dW; j++) {\n          x = floor(ratioX * j);\n          y = floor(ratioY * i);\n          xDiff = ratioX * j - x;\n          yDiff = ratioY * i - y;\n          origPix = 4 * (y * oW + x);\n\n          for (chnl = 0; chnl < 4; chnl++) {\n            a = pixels[origPix + chnl];\n            b = pixels[origPix + 4 + chnl];\n            c = pixels[origPix + w4 + chnl];\n            d = pixels[origPix + w4 + 4 + chnl];\n            color = a * (1 - xDiff) * (1 - yDiff) + b * xDiff * (1 - yDiff) +\n                    c * yDiff * (1 - xDiff) + d * xDiff * yDiff;\n            destPixels[offset++] = color;\n          }\n        }\n      }\n      return destImage;\n    },\n\n    /**\n     * hermiteFastResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    hermiteFastResize: function(options, oW, oH, dW, dH) {\n      var ratioW = this.rcpScaleX, ratioH = this.rcpScaleY,\n          ratioWHalf = ceil(ratioW / 2),\n          ratioHHalf = ceil(ratioH / 2),\n          img = options.imageData, data = img.data,\n          img2 = options.ctx.createImageData(dW, dH), data2 = img2.data;\n      for (var j = 0; j < dH; j++) {\n        for (var i = 0; i < dW; i++) {\n          var x2 = (i + j * dW) * 4, weight = 0, weights = 0, weightsAlpha = 0,\n              gxR = 0, gxG = 0, gxB = 0, gxA = 0, centerY = (j + 0.5) * ratioH;\n          for (var yy = floor(j * ratioH); yy < (j + 1) * ratioH; yy++) {\n            var dy = abs(centerY - (yy + 0.5)) / ratioHHalf,\n                centerX = (i + 0.5) * ratioW, w0 = dy * dy;\n            for (var xx = floor(i * ratioW); xx < (i + 1) * ratioW; xx++) {\n              var dx = abs(centerX - (xx + 0.5)) / ratioWHalf,\n                  w = sqrt(w0 + dx * dx);\n              /* eslint-disable max-depth */\n              if (w > 1 && w < -1) {\n                continue;\n              }\n              //hermite filter\n              weight = 2 * w * w * w - 3 * w * w + 1;\n              if (weight > 0) {\n                dx = 4 * (xx + yy * oW);\n                //alpha\n                gxA += weight * data[dx + 3];\n                weightsAlpha += weight;\n                //colors\n                if (data[dx + 3] < 255) {\n                  weight = weight * data[dx + 3] / 250;\n                }\n                gxR += weight * data[dx];\n                gxG += weight * data[dx + 1];\n                gxB += weight * data[dx + 2];\n                weights += weight;\n              }\n              /* eslint-enable max-depth */\n            }\n          }\n          data2[x2] = gxR / weights;\n          data2[x2 + 1] = gxG / weights;\n          data2[x2 + 2] = gxB / weights;\n          data2[x2 + 3] = gxA / weightsAlpha;\n        }\n      }\n      return img2;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        resizeType: this.resizeType,\n        lanczosLobes: this.lanczosLobes\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Resize} Instance of fabric.Image.filters.Resize\n   */\n  fabric.Image.filters.Resize.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Contrast filter class\n   * @class fabric.Image.filters.Contrast\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Contrast#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Contrast({\n   *   contrast: 0.25\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Contrast = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Contrast.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Contrast',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uContrast;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\n' +\n        'color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * contrast value, range from -1 to 1.\n     * @param {Number} contrast\n     * @default 0\n     */\n    contrast: 0,\n\n    mainParameter: 'contrast',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Contrast.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.contrast=0] Value to contrast the image up (-1...1)\n     */\n\n    /**\n      * Apply the Contrast operation to a Uint8Array representing the pixels of an image.\n      *\n      * @param {Object} options\n      * @param {ImageData} options.imageData The Uint8Array to be filtered.\n      */\n    applyTo2d: function(options) {\n      if (this.contrast === 0) {\n        return;\n      }\n      var imageData = options.imageData, i, len,\n          data = imageData.data, len = data.length,\n          contrast = Math.floor(this.contrast * 255),\n          contrastF = 259 * (contrast + 255) / (255 * (259 - contrast));\n\n      for (i = 0; i < len; i += 4) {\n        data[i] = contrastF * (data[i] - 128) + 128;\n        data[i + 1] = contrastF * (data[i + 1] - 128) + 128;\n        data[i + 2] = contrastF * (data[i + 2] - 128) + 128;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uContrast: gl.getUniformLocation(program, 'uContrast'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uContrast, this.contrast);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Contrast} Instance of fabric.Image.filters.Contrast\n   */\n  fabric.Image.filters.Contrast.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Saturate filter class\n   * @class fabric.Image.filters.Saturation\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Saturation#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Saturation({\n   *   saturation: 100\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Saturation = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Saturation.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Saturation',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uSaturation;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float rgMax = max(color.r, color.g);\\n' +\n        'float rgbMax = max(rgMax, color.b);\\n' +\n        'color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\n' +\n        'color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\n' +\n        'color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    saturation: 0,\n\n    mainParameter: 'saturation',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Saturate.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.saturate=0] Value to saturate the image (-1...1)\n     */\n\n    /**\n     * Apply the Saturation operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.saturation === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, len = data.length,\n          adjust = -this.saturation, i, max;\n\n      for (i = 0; i < len; i += 4) {\n        max = Math.max(data[i], data[i + 1], data[i + 2]);\n        data[i] += max !== data[i] ? (max - data[i]) * adjust : 0;\n        data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * adjust : 0;\n        data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * adjust : 0;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uSaturation: gl.getUniformLocation(program, 'uSaturation'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uSaturation, -this.saturation);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Saturation} Instance of fabric.Image.filters.Saturate\n   */\n  fabric.Image.filters.Saturation.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Blur filter class\n   * @class fabric.Image.filters.Blur\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Blur#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Blur({\n   *   blur: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Blur = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blur.prototype */ {\n\n    type: 'Blur',\n\n    /*\n'gl_FragColor = vec4(0.0);',\n'gl_FragColor += texture2D(texture, vTexCoord + -7 * uDelta)*0.0044299121055113265;',\n'gl_FragColor += texture2D(texture, vTexCoord + -6 * uDelta)*0.00895781211794;',\n'gl_FragColor += texture2D(texture, vTexCoord + -5 * uDelta)*0.0215963866053;',\n'gl_FragColor += texture2D(texture, vTexCoord + -4 * uDelta)*0.0443683338718;',\n'gl_FragColor += texture2D(texture, vTexCoord + -3 * uDelta)*0.0776744219933;',\n'gl_FragColor += texture2D(texture, vTexCoord + -2 * uDelta)*0.115876621105;',\n'gl_FragColor += texture2D(texture, vTexCoord + -1 * uDelta)*0.147308056121;',\n'gl_FragColor += texture2D(texture, vTexCoord              )*0.159576912161;',\n'gl_FragColor += texture2D(texture, vTexCoord + 1 * uDelta)*0.147308056121;',\n'gl_FragColor += texture2D(texture, vTexCoord + 2 * uDelta)*0.115876621105;',\n'gl_FragColor += texture2D(texture, vTexCoord + 3 * uDelta)*0.0776744219933;',\n'gl_FragColor += texture2D(texture, vTexCoord + 4 * uDelta)*0.0443683338718;',\n'gl_FragColor += texture2D(texture, vTexCoord + 5 * uDelta)*0.0215963866053;',\n'gl_FragColor += texture2D(texture, vTexCoord + 6 * uDelta)*0.00895781211794;',\n'gl_FragColor += texture2D(texture, vTexCoord + 7 * uDelta)*0.0044299121055113265;',\n*/\n\n    /* eslint-disable max-len */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec2 uDelta;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'const float nSamples = 15.0;\\n' +\n      'vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\n' +\n      'float random(vec3 scale) {\\n' +\n        /* use the fragment position for a different seed per-pixel */\n        'return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n' +\n      '}\\n' +\n      'void main() {\\n' +\n        'vec4 color = vec4(0.0);\\n' +\n        'float total = 0.0;\\n' +\n        'float offset = random(v3offset);\\n' +\n        'for (float t = -nSamples; t <= nSamples; t++) {\\n' +\n          'float percent = (t + offset - 0.5) / nSamples;\\n' +\n          'float weight = 1.0 - abs(percent);\\n' +\n          'color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\n' +\n          'total += weight;\\n' +\n        '}\\n' +\n        'gl_FragColor = color / total;\\n' +\n      '}',\n    /* eslint-enable max-len */\n\n    /**\n     * blur value, in percentage of image dimensions.\n     * specific to keep the image blur constant at different resolutions\n     * range between 0 and 1.\n     */\n    blur: 0,\n\n    mainParameter: 'blur',\n\n    applyTo: function(options) {\n      if (options.webgl) {\n        // this aspectRatio is used to give the same blur to vertical and horizontal\n        this.aspectRatio = options.sourceWidth / options.sourceHeight;\n        options.passes++;\n        this._setupFrameBuffer(options);\n        this.horizontal = true;\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        this._setupFrameBuffer(options);\n        this.horizontal = false;\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n      }\n      else {\n        this.applyTo2d(options);\n      }\n    },\n\n    applyTo2d: function(options) {\n      // paint canvasEl with current image data.\n      //options.ctx.putImageData(options.imageData, 0, 0);\n      options.imageData = this.simpleBlur(options);\n    },\n\n    simpleBlur: function(options) {\n      var resources = options.filterBackend.resources, canvas1, canvas2,\n          width = options.imageData.width,\n          height = options.imageData.height;\n\n      if (!resources.blurLayer1) {\n        resources.blurLayer1 = fabric.util.createCanvasElement();\n        resources.blurLayer2 = fabric.util.createCanvasElement();\n      }\n      canvas1 = resources.blurLayer1;\n      canvas2 = resources.blurLayer2;\n      if (canvas1.width !== width || canvas1.height !== height) {\n        canvas2.width = canvas1.width = width;\n        canvas2.height = canvas1.height = height;\n      }\n      var ctx1 = canvas1.getContext('2d'),\n          ctx2 = canvas2.getContext('2d'),\n          nSamples = 15,\n          random, percent, j, i,\n          blur = this.blur * 0.06 * 0.5;\n\n      // load first canvas\n      ctx1.putImageData(options.imageData, 0, 0);\n      ctx2.clearRect(0, 0, width, height);\n\n      for (i = -nSamples; i <= nSamples; i++) {\n        random = (Math.random() - 0.5) / 4;\n        percent = i / nSamples;\n        j = blur * percent * width + random;\n        ctx2.globalAlpha = 1 - Math.abs(percent);\n        ctx2.drawImage(canvas1, j, random);\n        ctx1.drawImage(canvas2, 0, 0);\n        ctx2.globalAlpha = 1;\n        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      }\n      for (i = -nSamples; i <= nSamples; i++) {\n        random = (Math.random() - 0.5) / 4;\n        percent = i / nSamples;\n        j = blur * percent * height + random;\n        ctx2.globalAlpha = 1 - Math.abs(percent);\n        ctx2.drawImage(canvas1, random, j);\n        ctx1.drawImage(canvas2, 0, 0);\n        ctx2.globalAlpha = 1;\n        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      }\n      options.ctx.drawImage(canvas1, 0, 0);\n      var newImageData = options.ctx.getImageData(0, 0, canvas1.width, canvas1.height);\n      ctx1.globalAlpha = 1;\n      ctx1.clearRect(0, 0, canvas1.width, canvas1.height);\n      return newImageData;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        delta: gl.getUniformLocation(program, 'uDelta'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var delta = this.chooseRightDelta();\n      gl.uniform2fv(uniformLocations.delta, delta);\n    },\n\n    /**\n     * choose right value of image percentage to blur with\n     * @returns {Array} a numeric array with delta values\n     */\n    chooseRightDelta: function() {\n      var blurScale = 1, delta = [0, 0], blur;\n      if (this.horizontal) {\n        if (this.aspectRatio > 1) {\n          // image is wide, i want to shrink radius horizontal\n          blurScale = 1 / this.aspectRatio;\n        }\n      }\n      else {\n        if (this.aspectRatio < 1) {\n          // image is tall, i want to shrink radius vertical\n          blurScale = this.aspectRatio;\n        }\n      }\n      blur = blurScale * this.blur * 0.12;\n      if (this.horizontal) {\n        delta[0] = blur;\n      }\n      else {\n        delta[1] = blur;\n      }\n      return delta;\n    },\n  });\n\n  /**\n   * Deserialize a JSON definition of a BlurFilter into a concrete instance.\n   */\n  filters.Blur.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Gamma filter class\n   * @class fabric.Image.filters.Gamma\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Gamma#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Gamma({\n   *   gamma: [1, 0.5, 2.1]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Gamma = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Gamma.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Gamma',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec3 uGamma;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'vec3 correction = (1.0 / uGamma);\\n' +\n        'color.r = pow(color.r, correction.r);\\n' +\n        'color.g = pow(color.g, correction.g);\\n' +\n        'color.b = pow(color.b, correction.b);\\n' +\n        'gl_FragColor = color;\\n' +\n        'gl_FragColor.rgb *= color.a;\\n' +\n      '}',\n\n    /**\n     * Gamma array value, from 0.01 to 2.2.\n     * @param {Array} gamma\n     * @default\n     */\n    gamma: [1, 1, 1],\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'gamma',\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.gamma = [1, 1, 1];\n      filters.BaseFilter.prototype.initialize.call(this, options);\n    },\n\n    /**\n     * Apply the Gamma operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData, data = imageData.data,\n          gamma = this.gamma, len = data.length,\n          rInv = 1 / gamma[0], gInv = 1 / gamma[1],\n          bInv = 1 / gamma[2], i;\n\n      if (!this.rVals) {\n        // eslint-disable-next-line\n        this.rVals = new Uint8Array(256);\n        // eslint-disable-next-line\n        this.gVals = new Uint8Array(256);\n        // eslint-disable-next-line\n        this.bVals = new Uint8Array(256);\n      }\n\n      // This is an optimization - pre-compute a look-up table for each color channel\n      // instead of performing these pow calls for each pixel in the image.\n      for (i = 0, len = 256; i < len; i++) {\n        this.rVals[i] = Math.pow(i / 255, rInv) * 255;\n        this.gVals[i] = Math.pow(i / 255, gInv) * 255;\n        this.bVals[i] = Math.pow(i / 255, bInv) * 255;\n      }\n      for (i = 0, len = data.length; i < len; i += 4) {\n        data[i] = this.rVals[data[i]];\n        data[i + 1] = this.gVals[data[i + 1]];\n        data[i + 2] = this.bVals[data[i + 2]];\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uGamma: gl.getUniformLocation(program, 'uGamma'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform3fv(uniformLocations.uGamma, this.gamma);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Gamma} Instance of fabric.Image.filters.Gamma\n   */\n  fabric.Image.filters.Gamma.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * A container class that knows how to apply a sequence of filters to an input image.\n   */\n  filters.Composed = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Composed.prototype */ {\n\n    type: 'Composed',\n\n    /**\n     * A non sparse array of filters to apply\n     */\n    subFilters: [],\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      // create a new array instead mutating the prototype with push\n      this.subFilters = this.subFilters.slice(0);\n    },\n\n    /**\n     * Apply this container's filters to the input image provided.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be applied.\n     */\n    applyTo: function(options) {\n      options.passes += this.subFilters.length - 1;\n      this.subFilters.forEach(function(filter) {\n        filter.applyTo(options);\n      });\n    },\n\n    /**\n     * Serialize this filter into JSON.\n     *\n     * @returns {Object} A JSON representation of this filter.\n     */\n    toObject: function() {\n      return fabric.util.object.extend(this.callSuper('toObject'), {\n        subFilters: this.subFilters.map(function(filter) { return filter.toObject(); }),\n      });\n    },\n\n    isNeutralState: function() {\n      return !this.subFilters.some(function(filter) { return !filter.isNeutralState(); });\n    }\n  });\n\n  /**\n   * Deserialize a JSON definition of a ComposedFilter into a concrete instance.\n   */\n  fabric.Image.filters.Composed.fromObject = function(object, callback) {\n    var filters = object.subFilters || [],\n        subFilters = filters.map(function(filter) {\n          return new fabric.Image.filters[filter.type](filter);\n        }),\n        instance = new fabric.Image.filters.Composed({ subFilters: subFilters });\n    callback && callback(instance);\n    return instance;\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * HueRotation filter class\n   * @class fabric.Image.filters.HueRotation\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.HueRotation#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.HueRotation({\n   *   rotation: -0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.HueRotation = createClass(filters.ColorMatrix, /** @lends fabric.Image.filters.HueRotation.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'HueRotation',\n\n    /**\n     * HueRotation value, from -1 to 1.\n     * the unit is radians\n     * @param {Number} myParameter\n     * @default\n     */\n    rotation: 0,\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'rotation',\n\n    calculateMatrix: function() {\n      var rad = this.rotation * Math.PI, cos = fabric.util.cos(rad), sin = fabric.util.sin(rad),\n          aThird = 1 / 3, aThirdSqtSin = Math.sqrt(aThird) * sin, OneMinusCos = 1 - cos;\n      this.matrix = [\n        1, 0, 0, 0, 0,\n        0, 1, 0, 0, 0,\n        0, 0, 1, 0, 0,\n        0, 0, 0, 1, 0\n      ];\n      this.matrix[0] = cos + OneMinusCos / 3;\n      this.matrix[1] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[2] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[5] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[6] = cos + aThird * OneMinusCos;\n      this.matrix[7] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[10] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[11] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[12] = cos + aThird * OneMinusCos;\n    },\n\n    /**\n     * HueRotation isNeutralState implementation\n     * Used only in image applyFilters to discard filters that will not have an effect\n     * on the image\n     * @param {Object} options\n     **/\n    isNeutralState: function(options) {\n      this.calculateMatrix();\n      return filters.BaseFilter.prototype.isNeutralState.call(this, options);\n    },\n\n    /**\n     * Apply this filter to the input image data provided.\n     *\n     * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be executed\n     * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n     * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n     * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    applyTo: function(options) {\n      this.calculateMatrix();\n      filters.BaseFilter.prototype.applyTo.call(this, options);\n    },\n\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.HueRotation} Instance of fabric.Image.filters.HueRotation\n   */\n  fabric.Image.filters.HueRotation.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      clone = fabric.util.object.clone;\n\n  if (fabric.Text) {\n    fabric.warn('fabric.Text is already defined');\n    return;\n  }\n\n  var additionalProps =\n    ('fontFamily fontWeight fontSize text underline overline linethrough' +\n    ' textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path').split(' ');\n\n  /**\n   * Text class\n   * @class fabric.Text\n   * @extends fabric.Object\n   * @return {fabric.Text} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#text}\n   * @see {@link fabric.Text#initialize} for constructor definition\n   */\n  fabric.Text = fabric.util.createClass(fabric.Object, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Array\n     * @private\n     */\n    _dimensionAffectingProps: [\n      'fontSize',\n      'fontWeight',\n      'fontFamily',\n      'fontStyle',\n      'lineHeight',\n      'text',\n      'charSpacing',\n      'textAlign',\n      'styles',\n      'path'\n    ],\n\n    /**\n     * @private\n     */\n    _reNewline: /\\r?\\n/,\n\n    /**\n     * Use this regular expression to filter for whitespaces that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpacesAndTabs: /[ \\t\\r]/g,\n\n    /**\n     * Use this regular expression to filter for whitespace that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpaceAndTab: /[ \\t\\r]/,\n\n    /**\n     * Use this regular expression to filter consecutive groups of non spaces.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reWords: /\\S+/g,\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type:                 'text',\n\n    /**\n     * Font size (in pixels)\n     * @type Number\n     * @default\n     */\n    fontSize:             40,\n\n    /**\n     * Font weight (e.g. bold, normal, 400, 600, 800)\n     * @type {(Number|String)}\n     * @default\n     */\n    fontWeight:           'normal',\n\n    /**\n     * Font family\n     * @type String\n     * @default\n     */\n    fontFamily:           'Times New Roman',\n\n    /**\n     * Text decoration underline.\n     * @type Boolean\n     * @default\n     */\n    underline:       false,\n\n    /**\n     * Text decoration overline.\n     * @type Boolean\n     * @default\n     */\n    overline:       false,\n\n    /**\n     * Text decoration linethrough.\n     * @type Boolean\n     * @default\n     */\n    linethrough:       false,\n\n    /**\n     * Text alignment. Possible values: \"left\", \"center\", \"right\", \"justify\",\n     * \"justify-left\", \"justify-center\" or \"justify-right\".\n     * @type String\n     * @default\n     */\n    textAlign:            'left',\n\n    /**\n     * Font style . Possible values: \"\", \"normal\", \"italic\" or \"oblique\".\n     * @type String\n     * @default\n     */\n    fontStyle:            'normal',\n\n    /**\n     * Line height\n     * @type Number\n     * @default\n     */\n    lineHeight:           1.16,\n\n    /**\n     * Superscript schema object (minimum overlap)\n     * @type {Object}\n     * @default\n     */\n    superscript: {\n      size:      0.60, // fontSize factor\n      baseline: -0.35  // baseline-shift factor (upwards)\n    },\n\n    /**\n     * Subscript schema object (minimum overlap)\n     * @type {Object}\n     * @default\n     */\n    subscript: {\n      size:      0.60, // fontSize factor\n      baseline:  0.11  // baseline-shift factor (downwards)\n    },\n\n    /**\n     * Background color of text lines\n     * @type String\n     * @default\n     */\n    textBackgroundColor:  '',\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat(additionalProps),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * @type Array\n     */\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat(additionalProps),\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color.\n     * <b>Backwards incompatibility note:</b> This property was named \"strokeStyle\" until v1.1.6\n     * @type String\n     * @default\n     */\n    stroke:               null,\n\n    /**\n     * Shadow object representing shadow of this shape.\n     * <b>Backwards incompatibility note:</b> This property was named \"textShadow\" (String) until v1.2.11\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:               null,\n\n    /**\n     * fabric.Path that the text can follow.\n     * This feature is in BETA.\n     * @type fabric.Path\n     * @default\n     */\n    path:               null,\n\n    /**\n     * @private\n     */\n    _fontSizeFraction: 0.222,\n\n    /**\n     * @private\n     */\n    offsets: {\n      underline: 0.10,\n      linethrough: -0.315,\n      overline: -0.88\n    },\n\n    /**\n     * Text Line proportion to font Size (in pixels)\n     * @type Number\n     * @default\n     */\n    _fontSizeMult:             1.13,\n\n    /**\n     * additional space between characters\n     * expressed in thousands of em unit\n     * @type Number\n     * @default\n     */\n    charSpacing:             0,\n\n    /**\n     * Object containing character styles - top-level properties -> line numbers,\n     * 2nd-level properties - character numbers\n     * @type Object\n     * @default\n     */\n    styles: null,\n\n    /**\n     * Reference to a context to measure text char or couple of chars\n     * the cacheContext of the canvas will be used or a freshly created one if the object is not on canvas\n     * once created it will be referenced on fabric._measuringContext to avoid creating a canvas for every\n     * text object created.\n     * @type {CanvasRenderingContext2D}\n     * @default\n     */\n    _measuringContext: null,\n\n    /**\n     * Baseline shift, styles only, keep at 0 for the main text object\n     * @type {Number}\n     * @default\n     */\n    deltaY: 0,\n\n    /**\n     * Array of properties that define a style unit (of 'styles').\n     * @type {Array}\n     * @default\n     */\n    _styleProperties: [\n      'stroke',\n      'strokeWidth',\n      'fill',\n      'fontFamily',\n      'fontSize',\n      'fontWeight',\n      'fontStyle',\n      'underline',\n      'overline',\n      'linethrough',\n      'deltaY',\n      'textBackgroundColor',\n    ],\n\n    /**\n     * contains characters bounding boxes\n     */\n    __charBounds: [],\n\n    /**\n     * use this size when measuring text. To avoid IE11 rounding errors\n     * @type {Number}\n     * @default\n     * @readonly\n     * @private\n     */\n    CACHE_FONT_SIZE: 400,\n\n    /**\n     * contains the min text width to avoid getting 0\n     * @type {Number}\n     * @default\n     */\n    MIN_TEXT_WIDTH: 2,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    initialize: function(text, options) {\n      this.styles = options ? (options.styles || { }) : { };\n      this.text = text;\n      this.__skipDimension = true;\n      this.callSuper('initialize', options);\n      if (this.path) {\n        this.setPathInfo();\n      }\n      this.__skipDimension = false;\n      this.initDimensions();\n      this.setCoords();\n      this.setupState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * If text has a path, it will add the extra information needed\n     * for path and text calculations\n     * @return {fabric.Text} thisArg\n     */\n    setPathInfo: function() {\n      var path = this.path;\n      if (path) {\n        path.segmentsInfo = fabric.util.getPathSegmentsInfo(path.path);\n      }\n    },\n\n    /**\n     * Return a context for measurement of text string.\n     * if created it gets stored for reuse\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    getMeasuringContext: function() {\n      // if we did not return we have to measure something.\n      if (!fabric._measuringContext) {\n        fabric._measuringContext = this.canvas && this.canvas.contextCache ||\n          fabric.util.createCanvasElement().getContext('2d');\n      }\n      return fabric._measuringContext;\n    },\n\n    /**\n     * @private\n     * Divides text into lines of text and lines of graphemes.\n     */\n    _splitText: function() {\n      var newLines = this._splitTextIntoLines(this.text);\n      this.textLines = newLines.lines;\n      this._textLines = newLines.graphemeLines;\n      this._unwrappedTextLines = newLines._unwrappedLines;\n      this._text = newLines.graphemeText;\n      return newLines;\n    },\n\n    /**\n     * Initialize or update text dimensions.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     */\n    initDimensions: function() {\n      if (this.__skipDimension) {\n        return;\n      }\n      this._splitText();\n      this._clearCache();\n      if (this.path) {\n        this.width = this.path.width;\n        this.height = this.path.height;\n      }\n      else {\n        this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH;\n        this.height = this.calcTextHeight();\n      }\n      if (this.textAlign.indexOf('justify') !== -1) {\n        // once text is measured we need to make space fatter to make justified text.\n        this.enlargeSpaces();\n      }\n      this.saveState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Enlarge space boxes and shift the others\n     */\n    enlargeSpaces: function() {\n      var diffSpace, currentLineWidth, numberOfSpaces, accumulatedSpace, line, charBound, spaces;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        if (this.textAlign !== 'justify' && (i === len - 1 || this.isEndOfWrapping(i))) {\n          continue;\n        }\n        accumulatedSpace = 0;\n        line = this._textLines[i];\n        currentLineWidth = this.getLineWidth(i);\n        if (currentLineWidth < this.width && (spaces = this.textLines[i].match(this._reSpacesAndTabs))) {\n          numberOfSpaces = spaces.length;\n          diffSpace = (this.width - currentLineWidth) / numberOfSpaces;\n          for (var j = 0, jlen = line.length; j <= jlen; j++) {\n            charBound = this.__charBounds[i][j];\n            if (this._reSpaceAndTab.test(line[j])) {\n              charBound.width += diffSpace;\n              charBound.kernedWidth += diffSpace;\n              charBound.left += accumulatedSpace;\n              accumulatedSpace += diffSpace;\n            }\n            else {\n              charBound.left += accumulatedSpace;\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Detect if the text line is ended with an hard break\n     * text and itext do not have wrapping, return false\n     * @return {Boolean}\n     */\n    isEndOfWrapping: function(lineIndex) {\n      return lineIndex === this._textLines.length - 1;\n    },\n\n    /**\n     * Detect if a line has a linebreak and so we need to account for it when moving\n     * and counting style.\n     * It return always for text and Itext.\n     * @return Number\n     */\n    missingNewlineOffset: function() {\n      return 1;\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of text object\n     */\n    toString: function() {\n      return '#<fabric.Text (' + this.complexity() +\n        '): { \"text\": \"' + this.text + '\", \"fontFamily\": \"' + this.fontFamily + '\" }>';\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @param {Object} dim.x width of object to be cached\n     * @param {Object} dim.y height of object to be cached\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var dims = this.callSuper('_getCacheCanvasDimensions');\n      var fontSize = this.fontSize;\n      dims.width += fontSize * dims.zoomX;\n      dims.height += fontSize * dims.zoomY;\n      return dims;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this._setTextStyles(ctx);\n      this._renderTextLinesBackground(ctx);\n      this._renderTextDecoration(ctx, 'underline');\n      this._renderText(ctx);\n      this._renderTextDecoration(ctx, 'overline');\n      this._renderTextDecoration(ctx, 'linethrough');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderText: function(ctx) {\n      if (this.paintFirst === 'stroke') {\n        this._renderTextStroke(ctx);\n        this._renderTextFill(ctx);\n      }\n      else {\n        this._renderTextFill(ctx);\n        this._renderTextStroke(ctx);\n      }\n    },\n\n    /**\n     * Set the font parameter of the context with the object properties or with charStyle\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [charStyle] object with font style properties\n     * @param {String} [charStyle.fontFamily] Font Family\n     * @param {Number} [charStyle.fontSize] Font size in pixels. ( without px suffix )\n     * @param {String} [charStyle.fontWeight] Font weight\n     * @param {String} [charStyle.fontStyle] Font style (italic|normal)\n     */\n    _setTextStyles: function(ctx, charStyle, forMeasuring) {\n      ctx.textBaseline = 'alphabetic';\n      ctx.font = this._getFontDeclaration(charStyle, forMeasuring);\n    },\n\n    /**\n     * calculate and return the text Width measuring each line.\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {Number} Maximum width of fabric.Text object\n     */\n    calcTextWidth: function() {\n      var maxWidth = this.getLineWidth(0);\n\n      for (var i = 1, len = this._textLines.length; i < len; i++) {\n        var currentLineWidth = this.getLineWidth(i);\n        if (currentLineWidth > maxWidth) {\n          maxWidth = currentLineWidth;\n        }\n      }\n      return maxWidth;\n    },\n\n    /**\n     * @private\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line Text to render\n     * @param {Number} left Left position of text\n     * @param {Number} top Top position of text\n     * @param {Number} lineIndex Index of a line in a text\n     */\n    _renderTextLine: function(method, ctx, line, left, top, lineIndex) {\n      this._renderChars(method, ctx, line, left, top, lineIndex);\n    },\n\n    /**\n     * Renders the text background for lines, taking care of style\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextLinesBackground: function(ctx) {\n      if (!this.textBackgroundColor && !this.styleHas('textBackgroundColor')) {\n        return;\n      }\n      var heightOfLine,\n          lineLeftOffset, originalFill = ctx.fillStyle,\n          line, lastColor,\n          leftOffset = this._getLeftOffset(),\n          lineTopOffset = this._getTopOffset(),\n          boxStart = 0, boxWidth = 0, charBox, currentColor, path = this.path;\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this.getHeightOfLine(i);\n        if (!this.textBackgroundColor && !this.styleHas('textBackgroundColor', i)) {\n          lineTopOffset += heightOfLine;\n          continue;\n        }\n        line = this._textLines[i];\n        lineLeftOffset = this._getLineLeftOffset(i);\n        boxWidth = 0;\n        boxStart = 0;\n        lastColor = this.getValueOfPropertyAt(i, 0, 'textBackgroundColor');\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          charBox = this.__charBounds[i][j];\n          currentColor = this.getValueOfPropertyAt(i, j, 'textBackgroundColor');\n          if (path) {\n            ctx.save();\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            ctx.fillStyle = currentColor;\n            currentColor && ctx.fillRect(\n              -charBox.width / 2,\n              -heightOfLine / this.lineHeight * (1 - this._fontSizeFraction),\n              charBox.width,\n              heightOfLine / this.lineHeight\n            );\n            ctx.restore();\n          }\n          else if (currentColor !== lastColor) {\n            ctx.fillStyle = lastColor;\n            lastColor && ctx.fillRect(\n              leftOffset + lineLeftOffset + boxStart,\n              lineTopOffset,\n              boxWidth,\n              heightOfLine / this.lineHeight\n            );\n            boxStart = charBox.left;\n            boxWidth = charBox.width;\n            lastColor = currentColor;\n          }\n          else {\n            boxWidth += charBox.kernedWidth;\n          }\n        }\n        if (currentColor && !path) {\n          ctx.fillStyle = currentColor;\n          ctx.fillRect(\n            leftOffset + lineLeftOffset + boxStart,\n            lineTopOffset,\n            boxWidth,\n            heightOfLine / this.lineHeight\n          );\n        }\n        lineTopOffset += heightOfLine;\n      }\n      ctx.fillStyle = originalFill;\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {Object} decl style declaration for cache\n     * @param {String} decl.fontFamily fontFamily\n     * @param {String} decl.fontStyle fontStyle\n     * @param {String} decl.fontWeight fontWeight\n     * @return {Object} reference to cache\n     */\n    getFontCache: function(decl) {\n      var fontFamily = decl.fontFamily.toLowerCase();\n      if (!fabric.charWidthsCache[fontFamily]) {\n        fabric.charWidthsCache[fontFamily] = { };\n      }\n      var cache = fabric.charWidthsCache[fontFamily],\n          cacheProp = decl.fontStyle.toLowerCase() + '_' + (decl.fontWeight + '').toLowerCase();\n      if (!cache[cacheProp]) {\n        cache[cacheProp] = { };\n      }\n      return cache[cacheProp];\n    },\n\n    /**\n     * measure and return the width of a single character.\n     * possibly overridden to accommodate different measure logic or\n     * to hook some external lib for character measurement\n     * @private\n     * @param {String} _char, char to be measured\n     * @param {Object} charStyle style of char to be measured\n     * @param {String} [previousChar] previous char\n     * @param {Object} [prevCharStyle] style of previous char\n     */\n    _measureChar: function(_char, charStyle, previousChar, prevCharStyle) {\n      // first i try to return from cache\n      var fontCache = this.getFontCache(charStyle), fontDeclaration = this._getFontDeclaration(charStyle),\n          previousFontDeclaration = this._getFontDeclaration(prevCharStyle), couple = previousChar + _char,\n          stylesAreEqual = fontDeclaration === previousFontDeclaration, width, coupleWidth, previousWidth,\n          fontMultiplier = charStyle.fontSize / this.CACHE_FONT_SIZE, kernedWidth;\n\n      if (previousChar && fontCache[previousChar] !== undefined) {\n        previousWidth = fontCache[previousChar];\n      }\n      if (fontCache[_char] !== undefined) {\n        kernedWidth = width = fontCache[_char];\n      }\n      if (stylesAreEqual && fontCache[couple] !== undefined) {\n        coupleWidth = fontCache[couple];\n        kernedWidth = coupleWidth - previousWidth;\n      }\n      if (width === undefined || previousWidth === undefined || coupleWidth === undefined) {\n        var ctx = this.getMeasuringContext();\n        // send a TRUE to specify measuring font size CACHE_FONT_SIZE\n        this._setTextStyles(ctx, charStyle, true);\n      }\n      if (width === undefined) {\n        kernedWidth = width = ctx.measureText(_char).width;\n        fontCache[_char] = width;\n      }\n      if (previousWidth === undefined && stylesAreEqual && previousChar) {\n        previousWidth = ctx.measureText(previousChar).width;\n        fontCache[previousChar] = previousWidth;\n      }\n      if (stylesAreEqual && coupleWidth === undefined) {\n        // we can measure the kerning couple and subtract the width of the previous character\n        coupleWidth = ctx.measureText(couple).width;\n        fontCache[couple] = coupleWidth;\n        kernedWidth = coupleWidth - previousWidth;\n      }\n      return { width: width * fontMultiplier, kernedWidth: kernedWidth * fontMultiplier };\n    },\n\n    /**\n     * Computes height of character at given position\n     * @param {Number} line the line index number\n     * @param {Number} _char the character index number\n     * @return {Number} fontSize of the character\n     */\n    getHeightOfChar: function(line, _char) {\n      return this.getValueOfPropertyAt(line, _char, 'fontSize');\n    },\n\n    /**\n     * measure a text line measuring all characters.\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    measureLine: function(lineIndex) {\n      var lineInfo = this._measureLine(lineIndex);\n      if (this.charSpacing !== 0) {\n        lineInfo.width -= this._getWidthOfCharSpacing();\n      }\n      if (lineInfo.width < 0) {\n        lineInfo.width = 0;\n      }\n      return lineInfo;\n    },\n\n    /**\n     * measure every grapheme of a line, populating __charBounds\n     * @param {Number} lineIndex\n     * @return {Object} object.width total width of characters\n     * @return {Object} object.widthOfSpaces length of chars that match this._reSpacesAndTabs\n     */\n    _measureLine: function(lineIndex) {\n      var width = 0, i, grapheme, line = this._textLines[lineIndex], prevGrapheme,\n          graphemeInfo, numOfSpaces = 0, lineBounds = new Array(line.length),\n          positionInPath = 0, startingPoint, totalPathLength, path = this.path;\n\n      this.__charBounds[lineIndex] = lineBounds;\n      if (path) {\n        startingPoint = fabric.util.getPointOnPath(path.path, 0, path.segmentsInfo);\n        totalPathLength = path.segmentsInfo[path.segmentsInfo.length - 1].length;\n        startingPoint.x += path.pathOffset.x;\n        startingPoint.y += path.pathOffset.y;\n      }\n      for (i = 0; i < line.length; i++) {\n        grapheme = line[i];\n        graphemeInfo = this._getGraphemeBox(grapheme, lineIndex, i, prevGrapheme);\n        if (path) {\n          if (positionInPath > totalPathLength) {\n            positionInPath %= totalPathLength;\n          }\n          // it would probably much fater to send all the grapheme position for a line\n          // and calculate path position/angle at once.\n          this._setGraphemeOnPath(positionInPath, graphemeInfo, startingPoint);\n        }\n        lineBounds[i] = graphemeInfo;\n        width += graphemeInfo.kernedWidth;\n        positionInPath += graphemeInfo.kernedWidth;\n        prevGrapheme = grapheme;\n      }\n      // this latest bound box represent the last character of the line\n      // to simplify cursor handling in interactive mode.\n      lineBounds[i] = {\n        left: graphemeInfo ? graphemeInfo.left + graphemeInfo.width : 0,\n        width: 0,\n        kernedWidth: 0,\n        height: this.fontSize\n      };\n      return { width: width, numOfSpaces: numOfSpaces };\n    },\n\n    /**\n     * Calculate the angle  and the left,top position of the char that follow a path.\n     * It appends it to graphemeInfo to be reused later at rendering\n     * @private\n     * @param {Number} positionInPath to be measured\n     * @param {Object} graphemeInfo current grapheme box information\n     * @param {Object} startingPoint position of the point\n     */\n    _setGraphemeOnPath: function(positionInPath, graphemeInfo, startingPoint) {\n      var centerPosition = positionInPath + graphemeInfo.kernedWidth / 2,\n          path = this.path;\n\n      // we are at currentPositionOnPath. we want to know what point on the path is.\n      var info = fabric.util.getPointOnPath(path.path, centerPosition, path.segmentsInfo);\n      graphemeInfo.renderLeft = info.x - startingPoint.x;\n      graphemeInfo.renderTop = info.y - startingPoint.y;\n      graphemeInfo.angle = info.angle;\n    },\n\n    /**\n     * Measure and return the info of a single grapheme.\n     * needs the the info of previous graphemes already filled\n     * @private\n     * @param {String} grapheme to be measured\n     * @param {Number} lineIndex index of the line where the char is\n     * @param {Number} charIndex position in the line\n     * @param {String} [prevGrapheme] character preceding the one to be measured\n     */\n    _getGraphemeBox: function(grapheme, lineIndex, charIndex, prevGrapheme, skipLeft) {\n      var style = this.getCompleteStyleDeclaration(lineIndex, charIndex),\n          prevStyle = prevGrapheme ? this.getCompleteStyleDeclaration(lineIndex, charIndex - 1) : { },\n          info = this._measureChar(grapheme, style, prevGrapheme, prevStyle),\n          kernedWidth = info.kernedWidth,\n          width = info.width, charSpacing;\n\n      if (this.charSpacing !== 0) {\n        charSpacing = this._getWidthOfCharSpacing();\n        width += charSpacing;\n        kernedWidth += charSpacing;\n      }\n\n      var box = {\n        width: width,\n        left: 0,\n        height: style.fontSize,\n        kernedWidth: kernedWidth,\n        deltaY: style.deltaY,\n      };\n      if (charIndex > 0 && !skipLeft) {\n        var previousBox = this.__charBounds[lineIndex][charIndex - 1];\n        box.left = previousBox.left + previousBox.width + info.kernedWidth - info.width;\n      }\n      return box;\n    },\n\n    /**\n     * Calculate height of line at 'lineIndex'\n     * @param {Number} lineIndex index of line to calculate\n     * @return {Number}\n     */\n    getHeightOfLine: function(lineIndex) {\n      if (this.__lineHeights[lineIndex]) {\n        return this.__lineHeights[lineIndex];\n      }\n\n      var line = this._textLines[lineIndex],\n          // char 0 is measured before the line cycle because it nneds to char\n          // emptylines\n          maxHeight = this.getHeightOfChar(lineIndex, 0);\n      for (var i = 1, len = line.length; i < len; i++) {\n        maxHeight = Math.max(this.getHeightOfChar(lineIndex, i), maxHeight);\n      }\n\n      return this.__lineHeights[lineIndex] = maxHeight * this.lineHeight * this._fontSizeMult;\n    },\n\n    /**\n     * Calculate text box height\n     */\n    calcTextHeight: function() {\n      var lineHeight, height = 0;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineHeight = this.getHeightOfLine(i);\n        height += (i === len - 1 ? lineHeight / this.lineHeight : lineHeight);\n      }\n      return height;\n    },\n\n    /**\n     * @private\n     * @return {Number} Left offset\n     */\n    _getLeftOffset: function() {\n      return -this.width / 2;\n    },\n\n    /**\n     * @private\n     * @return {Number} Top offset\n     */\n    _getTopOffset: function() {\n      return -this.height / 2;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     */\n    _renderTextCommon: function(ctx, method) {\n      ctx.save();\n      var lineHeights = 0, left = this._getLeftOffset(), top = this._getTopOffset();\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        var heightOfLine = this.getHeightOfLine(i),\n            maxHeight = heightOfLine / this.lineHeight,\n            leftOffset = this._getLineLeftOffset(i);\n        this._renderTextLine(\n          method,\n          ctx,\n          this._textLines[i],\n          left + leftOffset,\n          top + lineHeights + maxHeight,\n          i\n        );\n        lineHeights += heightOfLine;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextFill: function(ctx) {\n      if (!this.fill && !this.styleHas('fill')) {\n        return;\n      }\n\n      this._renderTextCommon(ctx, 'fillText');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextStroke: function(ctx) {\n      if ((!this.stroke || this.strokeWidth === 0) && this.isEmptyStyles()) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      this._setLineDash(ctx, this.strokeDashArray);\n      ctx.beginPath();\n      this._renderTextCommon(ctx, 'strokeText');\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {String} method fillText or strokeText.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} line Content of the line, splitted in an array by grapheme\n     * @param {Number} left\n     * @param {Number} top\n     * @param {Number} lineIndex\n     */\n    _renderChars: function(method, ctx, line, left, top, lineIndex) {\n      // set proper line offset\n      var lineHeight = this.getHeightOfLine(lineIndex),\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          actualStyle,\n          nextStyle,\n          charsToRender = '',\n          charBox,\n          boxWidth = 0,\n          timeToRender,\n          path = this.path,\n          shortCut = !isJustify && this.charSpacing === 0 && this.isEmptyStyles(lineIndex) && !path;\n\n      ctx.save();\n      top -= lineHeight * this._fontSizeFraction / this.lineHeight;\n      if (shortCut) {\n        // render all the line in one pass without checking\n        this._renderChar(method, ctx, lineIndex, 0, line.join(''), left, top, lineHeight);\n        ctx.restore();\n        return;\n      }\n      for (var i = 0, len = line.length - 1; i <= len; i++) {\n        timeToRender = i === len || this.charSpacing || path;\n        charsToRender += line[i];\n        charBox = this.__charBounds[lineIndex][i];\n        if (boxWidth === 0) {\n          left += charBox.kernedWidth - charBox.width;\n          boxWidth += charBox.width;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n        if (isJustify && !timeToRender) {\n          if (this._reSpaceAndTab.test(line[i])) {\n            timeToRender = true;\n          }\n        }\n        if (!timeToRender) {\n          // if we have charSpacing, we render char by char\n          actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);\n          nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);\n          timeToRender = this._hasStyleChanged(actualStyle, nextStyle);\n        }\n        if (timeToRender) {\n          if (path) {\n            ctx.save();\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            this._renderChar(method, ctx, lineIndex, i, charsToRender, -boxWidth / 2, 0, lineHeight);\n            ctx.restore();\n          }\n          else {\n            this._renderChar(method, ctx, lineIndex, i, charsToRender, left, top, lineHeight);\n          }\n          charsToRender = '';\n          actualStyle = nextStyle;\n          left += boxWidth;\n          boxWidth = 0;\n        }\n      }\n      ctx.restore();\n    },\n\n    /**\n     * This function try to patch the missing gradientTransform on canvas gradients.\n     * transforming a context to transform the gradient, is going to transform the stroke too.\n     * we want to transform the gradient but not the stroke operation, so we create\n     * a transformed gradient on a pattern and then we use the pattern instead of the gradient.\n     * this method has drawbacks: is slow, is in low resolution, needs a patch for when the size\n     * is limited.\n     * @private\n     * @param {fabric.Gradient} filler a fabric gradient instance\n     * @return {CanvasPattern} a pattern to use as fill/stroke style\n     */\n    _applyPatternGradientTransformText: function(filler) {\n      var pCanvas = fabric.util.createCanvasElement(), pCtx,\n          // TODO: verify compatibility with strokeUniform\n          width = this.width + this.strokeWidth, height = this.height + this.strokeWidth;\n      pCanvas.width = width;\n      pCanvas.height = height;\n      pCtx = pCanvas.getContext('2d');\n      pCtx.beginPath(); pCtx.moveTo(0, 0); pCtx.lineTo(width, 0); pCtx.lineTo(width, height);\n      pCtx.lineTo(0, height); pCtx.closePath();\n      pCtx.translate(width / 2, height / 2);\n      pCtx.fillStyle = filler.toLive(pCtx);\n      this._applyPatternGradientTransform(pCtx, filler);\n      pCtx.fill();\n      return pCtx.createPattern(pCanvas, 'no-repeat');\n    },\n\n    handleFiller: function(ctx, property, filler) {\n      var offsetX, offsetY;\n      if (filler.toLive) {\n        if (filler.gradientUnits === 'percentage' || filler.gradientTrasnform || filler.patternTransform) {\n          // need to transform gradient in a pattern.\n          // this is a slow process. If you are hitting this codepath, and the object\n          // is not using caching, you should consider switching it on.\n          // we need a canvas as big as the current object caching canvas.\n          offsetX = -this.width / 2;\n          offsetY = -this.height / 2;\n          ctx.translate(offsetX, offsetY);\n          ctx[property] = this._applyPatternGradientTransformText(filler);\n          return { offsetX: offsetX, offsetY: offsetY };\n        }\n        else {\n          // is a simple gradient or pattern\n          ctx[property] = filler.toLive(ctx, this);\n          return this._applyPatternGradientTransform(ctx, filler);\n        }\n      }\n      else {\n        // is a color\n        ctx[property] = filler;\n      }\n      return { offsetX: 0, offsetY: 0 };\n    },\n\n    _setStrokeStyles: function(ctx, decl) {\n      ctx.lineWidth = decl.strokeWidth;\n      ctx.lineCap = this.strokeLineCap;\n      ctx.lineDashOffset = this.strokeDashOffset;\n      ctx.lineJoin = this.strokeLineJoin;\n      ctx.miterLimit = this.strokeMiterLimit;\n      return this.handleFiller(ctx, 'strokeStyle', decl.stroke);\n    },\n\n    _setFillStyles: function(ctx, decl) {\n      return this.handleFiller(ctx, 'fillStyle', decl.fill);\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {String} _char\n     * @param {Number} left Left coordinate\n     * @param {Number} top Top coordinate\n     * @param {Number} lineHeight Height of the line\n     */\n    _renderChar: function(method, ctx, lineIndex, charIndex, _char, left, top) {\n      var decl = this._getStyleDeclaration(lineIndex, charIndex),\n          fullDecl = this.getCompleteStyleDeclaration(lineIndex, charIndex),\n          shouldFill = method === 'fillText' && fullDecl.fill,\n          shouldStroke = method === 'strokeText' && fullDecl.stroke && fullDecl.strokeWidth,\n          fillOffsets, strokeOffsets;\n\n      if (!shouldStroke && !shouldFill) {\n        return;\n      }\n      ctx.save();\n\n      shouldFill && (fillOffsets = this._setFillStyles(ctx, fullDecl));\n      shouldStroke && (strokeOffsets = this._setStrokeStyles(ctx, fullDecl));\n\n      ctx.font = this._getFontDeclaration(fullDecl);\n\n\n      if (decl && decl.textBackgroundColor) {\n        this._removeShadow(ctx);\n      }\n      if (decl && decl.deltaY) {\n        top += decl.deltaY;\n      }\n      shouldFill && ctx.fillText(_char, left - fillOffsets.offsetX, top - fillOffsets.offsetY);\n      shouldStroke && ctx.strokeText(_char, left - strokeOffsets.offsetX, top - strokeOffsets.offsetY);\n      ctx.restore();\n    },\n\n    /**\n     * Turns the character into a 'superior figure' (i.e. 'superscript')\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    setSuperscript: function(start, end) {\n      return this._setScript(start, end, this.superscript);\n    },\n\n    /**\n     * Turns the character into an 'inferior figure' (i.e. 'subscript')\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    setSubscript: function(start, end) {\n      return this._setScript(start, end, this.subscript);\n    },\n\n    /**\n     * Applies 'schema' at given position\n     * @private\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @param {Number} schema\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    _setScript: function(start, end, schema) {\n      var loc = this.get2DCursorLocation(start, true),\n          fontSize = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, 'fontSize'),\n          dy = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, 'deltaY'),\n          style = { fontSize: fontSize * schema.size, deltaY: dy + fontSize * schema.baseline };\n      this.setSelectionStyles(style, start, end);\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChanged: function(prevStyle, thisStyle) {\n      return prevStyle.fill !== thisStyle.fill ||\n              prevStyle.stroke !== thisStyle.stroke ||\n              prevStyle.strokeWidth !== thisStyle.strokeWidth ||\n              prevStyle.fontSize !== thisStyle.fontSize ||\n              prevStyle.fontFamily !== thisStyle.fontFamily ||\n              prevStyle.fontWeight !== thisStyle.fontWeight ||\n              prevStyle.fontStyle !== thisStyle.fontStyle ||\n              prevStyle.deltaY !== thisStyle.deltaY;\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChangedForSvg: function(prevStyle, thisStyle) {\n      return this._hasStyleChanged(prevStyle, thisStyle) ||\n        prevStyle.overline !== thisStyle.overline ||\n        prevStyle.underline !== thisStyle.underline ||\n        prevStyle.linethrough !== thisStyle.linethrough;\n    },\n\n    /**\n     * @private\n     * @param {Number} lineIndex index text line\n     * @return {Number} Line left offset\n     */\n    _getLineLeftOffset: function(lineIndex) {\n      var lineWidth = this.getLineWidth(lineIndex);\n      if (this.textAlign === 'center') {\n        return (this.width - lineWidth) / 2;\n      }\n      if (this.textAlign === 'right') {\n        return this.width - lineWidth;\n      }\n      if (this.textAlign === 'justify-center' && this.isEndOfWrapping(lineIndex)) {\n        return (this.width - lineWidth) / 2;\n      }\n      if (this.textAlign === 'justify-right' && this.isEndOfWrapping(lineIndex)) {\n        return this.width - lineWidth;\n      }\n      return 0;\n    },\n\n    /**\n     * @private\n     */\n    _clearCache: function() {\n      this.__lineWidths = [];\n      this.__lineHeights = [];\n      this.__charBounds = [];\n    },\n\n    /**\n     * @private\n     */\n    _shouldClearDimensionCache: function() {\n      var shouldClear = this._forceClearCache;\n      shouldClear || (shouldClear = this.hasStateChanged('_dimensionAffectingProps'));\n      if (shouldClear) {\n        this.dirty = true;\n        this._forceClearCache = false;\n      }\n      return shouldClear;\n    },\n\n    /**\n     * Measure a single line given its index. Used to calculate the initial\n     * text bounding box. The values are calculated and stored in __lineWidths cache.\n     * @private\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    getLineWidth: function(lineIndex) {\n      if (this.__lineWidths[lineIndex]) {\n        return this.__lineWidths[lineIndex];\n      }\n\n      var width, line = this._textLines[lineIndex], lineInfo;\n\n      if (line === '') {\n        width = 0;\n      }\n      else {\n        lineInfo = this.measureLine(lineIndex);\n        width = lineInfo.width;\n      }\n      this.__lineWidths[lineIndex] = width;\n      return width;\n    },\n\n    _getWidthOfCharSpacing: function() {\n      if (this.charSpacing !== 0) {\n        return this.fontSize * this.charSpacing / 1000;\n      }\n      return 0;\n    },\n\n    /**\n     * Retrieves the value of property at given character position\n     * @param {Number} lineIndex the line number\n     * @param {Number} charIndex the character number\n     * @param {String} property the property name\n     * @returns the value of 'property'\n     */\n    getValueOfPropertyAt: function(lineIndex, charIndex, property) {\n      var charStyle = this._getStyleDeclaration(lineIndex, charIndex);\n      if (charStyle && typeof charStyle[property] !== 'undefined') {\n        return charStyle[property];\n      }\n      return this[property];\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextDecoration: function(ctx, type) {\n      if (!this[type] && !this.styleHas(type)) {\n        return;\n      }\n      var heightOfLine, size, _size,\n          lineLeftOffset, dy, _dy,\n          line, lastDecoration,\n          leftOffset = this._getLeftOffset(),\n          topOffset = this._getTopOffset(), top,\n          boxStart, boxWidth, charBox, currentDecoration,\n          maxHeight, currentFill, lastFill, path = this.path,\n          charSpacing = this._getWidthOfCharSpacing();\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this.getHeightOfLine(i);\n        if (!this[type] && !this.styleHas(type, i)) {\n          topOffset += heightOfLine;\n          continue;\n        }\n        line = this._textLines[i];\n        maxHeight = heightOfLine / this.lineHeight;\n        lineLeftOffset = this._getLineLeftOffset(i);\n        boxStart = 0;\n        boxWidth = 0;\n        lastDecoration = this.getValueOfPropertyAt(i, 0, type);\n        lastFill = this.getValueOfPropertyAt(i, 0, 'fill');\n        top = topOffset + maxHeight * (1 - this._fontSizeFraction);\n        size = this.getHeightOfChar(i, 0);\n        dy = this.getValueOfPropertyAt(i, 0, 'deltaY');\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          charBox = this.__charBounds[i][j];\n          currentDecoration = this.getValueOfPropertyAt(i, j, type);\n          currentFill = this.getValueOfPropertyAt(i, j, 'fill');\n          _size = this.getHeightOfChar(i, j);\n          _dy = this.getValueOfPropertyAt(i, j, 'deltaY');\n          if (path && currentDecoration && currentFill) {\n            ctx.save();\n            ctx.fillStyle = lastFill;\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            ctx.fillRect(\n              -charBox.kernedWidth / 2,\n              this.offsets[type] * _size + _dy,\n              charBox.kernedWidth,\n              this.fontSize / 15\n            );\n            ctx.restore();\n          }\n          else if (\n            (currentDecoration !== lastDecoration || currentFill !== lastFill || _size !== size || _dy !== dy)\n            && boxWidth > 0\n          ) {\n            if (lastDecoration && lastFill) {\n              ctx.fillStyle = lastFill;\n              ctx.fillRect(\n                leftOffset + lineLeftOffset + boxStart,\n                top + this.offsets[type] * size + dy,\n                boxWidth,\n                this.fontSize / 15\n              );\n            }\n            boxStart = charBox.left;\n            boxWidth = charBox.width;\n            lastDecoration = currentDecoration;\n            lastFill = currentFill;\n            size = _size;\n            dy = _dy;\n          }\n          else {\n            boxWidth += charBox.kernedWidth;\n          }\n        }\n        ctx.fillStyle = currentFill;\n        currentDecoration && currentFill && ctx.fillRect(\n          leftOffset + lineLeftOffset + boxStart,\n          top + this.offsets[type] * size + dy,\n          boxWidth - charSpacing,\n          this.fontSize / 15\n        );\n        topOffset += heightOfLine;\n      }\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * return font declaration string for canvas context\n     * @param {Object} [styleObject] object\n     * @returns {String} font declaration formatted for canvas context.\n     */\n    _getFontDeclaration: function(styleObject, forMeasuring) {\n      var style = styleObject || this, family = this.fontFamily,\n          fontIsGeneric = fabric.Text.genericFonts.indexOf(family.toLowerCase()) > -1;\n      var fontFamily = family === undefined ||\n      family.indexOf('\\'') > -1 || family.indexOf(',') > -1 ||\n      family.indexOf('\"') > -1 || fontIsGeneric\n        ? style.fontFamily : '\"' + style.fontFamily + '\"';\n      return [\n        // node-canvas needs \"weight style\", while browsers need \"style weight\"\n        // verify if this can be fixed in JSDOM\n        (fabric.isLikelyNode ? style.fontWeight : style.fontStyle),\n        (fabric.isLikelyNode ? style.fontStyle : style.fontWeight),\n        forMeasuring ? this.CACHE_FONT_SIZE + 'px' : style.fontSize + 'px',\n        fontFamily\n      ].join(' ');\n    },\n\n    /**\n     * Renders text instance on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      // do not render if object is not visible\n      if (!this.visible) {\n        return;\n      }\n      if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {\n        return;\n      }\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n      }\n      this.callSuper('render', ctx);\n    },\n\n    /**\n     * Returns the text as an array of lines.\n     * @param {String} text text to split\n     * @returns {Array} Lines in the text\n     */\n    _splitTextIntoLines: function(text) {\n      var lines = text.split(this._reNewline),\n          newLines = new Array(lines.length),\n          newLine = ['\\n'],\n          newText = [];\n      for (var i = 0; i < lines.length; i++) {\n        newLines[i] = fabric.util.string.graphemeSplit(lines[i]);\n        newText = newText.concat(newLines[i], newLine);\n      }\n      newText.pop();\n      return { _unwrappedLines: newLines, lines: lines, graphemeText: newText, graphemeLines: newLines };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var additionalProperties = [\n        'text',\n        'fontSize',\n        'fontWeight',\n        'fontFamily',\n        'fontStyle',\n        'lineHeight',\n        'underline',\n        'overline',\n        'linethrough',\n        'textAlign',\n        'textBackgroundColor',\n        'charSpacing',\n        'path'\n      ].concat(propertiesToInclude);\n      var obj = this.callSuper('toObject', additionalProperties);\n      obj.styles = clone(this.styles, true);\n      obj.path = this.path && this.path.toObject();\n      return obj;\n    },\n\n    /**\n     * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n     * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n     * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    set: function(key, value) {\n      this.callSuper('set', key, value);\n      var needsDims = false;\n      var isAddingPath = false;\n      if (typeof key === 'object') {\n        for (var _key in key) {\n          if (_key === 'path') {\n            this.setPathInfo();\n          }\n          needsDims = needsDims || this._dimensionAffectingProps.indexOf(_key) !== -1;\n          isAddingPath = isAddingPath || _key === 'path';\n        }\n      }\n      else {\n        needsDims = this._dimensionAffectingProps.indexOf(key) !== -1;\n        isAddingPath = key === 'path';\n      }\n      if (isAddingPath) {\n        this.setPathInfo();\n      }\n      if (needsDims) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      return this;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Text.fromElement})\n   * @static\n   * @memberOf fabric.Text\n   * @see: http://www.w3.org/TR/SVG/text.html#TextElement\n   */\n  fabric.Text.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(\n    'x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor'.split(' '));\n\n  /**\n   * Default SVG font size\n   * @static\n   * @memberOf fabric.Text\n   */\n  fabric.Text.DEFAULT_SVG_FONT_SIZE = 16;\n\n  /**\n   * Returns fabric.Text instance from an SVG element (<b>not yet implemented</b>)\n   * @static\n   * @memberOf fabric.Text\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Text.fromElement = function(element, callback, options) {\n    if (!element) {\n      return callback(null);\n    }\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Text.ATTRIBUTE_NAMES),\n        parsedAnchor = parsedAttributes.textAnchor || 'left';\n    options = fabric.util.object.extend((options ? clone(options) : { }), parsedAttributes);\n\n    options.top = options.top || 0;\n    options.left = options.left || 0;\n    if (parsedAttributes.textDecoration) {\n      var textDecoration = parsedAttributes.textDecoration;\n      if (textDecoration.indexOf('underline') !== -1) {\n        options.underline = true;\n      }\n      if (textDecoration.indexOf('overline') !== -1) {\n        options.overline = true;\n      }\n      if (textDecoration.indexOf('line-through') !== -1) {\n        options.linethrough = true;\n      }\n      delete options.textDecoration;\n    }\n    if ('dx' in parsedAttributes) {\n      options.left += parsedAttributes.dx;\n    }\n    if ('dy' in parsedAttributes) {\n      options.top += parsedAttributes.dy;\n    }\n    if (!('fontSize' in options)) {\n      options.fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n    }\n\n    var textContent = '';\n\n    // The XML is not properly parsed in IE9 so a workaround to get\n    // textContent is through firstChild.data. Another workaround would be\n    // to convert XML loaded from a file to be converted using DOMParser (same way loadSVGFromString() does)\n    if (!('textContent' in element)) {\n      if ('firstChild' in element && element.firstChild !== null) {\n        if ('data' in element.firstChild && element.firstChild.data !== null) {\n          textContent = element.firstChild.data;\n        }\n      }\n    }\n    else {\n      textContent = element.textContent;\n    }\n\n    textContent = textContent.replace(/^\\s+|\\s+$|\\n+/g, '').replace(/\\s+/g, ' ');\n    var originalStrokeWidth = options.strokeWidth;\n    options.strokeWidth = 0;\n\n    var text = new fabric.Text(textContent, options),\n        textHeightScaleFactor = text.getScaledHeight() / text.height,\n        lineHeightDiff = (text.height + text.strokeWidth) * text.lineHeight - text.height,\n        scaledDiff = lineHeightDiff * textHeightScaleFactor,\n        textHeight = text.getScaledHeight() + scaledDiff,\n        offX = 0;\n    /*\n      Adjust positioning:\n        x/y attributes in SVG correspond to the bottom-left corner of text bounding box\n        fabric output by default at top, left.\n    */\n    if (parsedAnchor === 'center') {\n      offX = text.getScaledWidth() / 2;\n    }\n    if (parsedAnchor === 'right') {\n      offX = text.getScaledWidth();\n    }\n    text.set({\n      left: text.left - offX,\n      top: text.top - (textHeight - text.fontSize * (0.07 + text._fontSizeFraction)) / text.lineHeight,\n      strokeWidth: typeof originalStrokeWidth !== 'undefined' ? originalStrokeWidth : 1,\n    });\n    callback(text);\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Text instance from an object representation\n   * @static\n   * @memberOf fabric.Text\n   * @param {Object} object plain js Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Text instance is created\n   */\n  fabric.Text.fromObject = function(object, callback) {\n    var objectCopy = clone(object), path = object.path;\n    delete objectCopy.path;\n    return fabric.Object._fromObject('Text', objectCopy, function(textInstance) {\n      if (path) {\n        fabric.Object._fromObject('Path', path, function(pathInstance) {\n          textInstance.set('path', pathInstance);\n          callback(textInstance);\n        }, 'path');\n      }\n      else {\n        callback(textInstance);\n      }\n    }, 'text');\n  };\n\n  fabric.Text.genericFonts = ['sans-serif', 'serif', 'cursive', 'fantasy', 'monospace'];\n\n  fabric.util.createAccessors && fabric.util.createAccessors(fabric.Text);\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n  fabric.util.object.extend(fabric.Text.prototype, /** @lends fabric.Text.prototype */ {\n    /**\n     * Returns true if object has no styling or no styling in a line\n     * @param {Number} lineIndex , lineIndex is on wrapped lines.\n     * @return {Boolean}\n     */\n    isEmptyStyles: function(lineIndex) {\n      if (!this.styles) {\n        return true;\n      }\n      if (typeof lineIndex !== 'undefined' && !this.styles[lineIndex]) {\n        return true;\n      }\n      var obj = typeof lineIndex === 'undefined' ? this.styles : { line: this.styles[lineIndex] };\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          // eslint-disable-next-line no-unused-vars\n          for (var p3 in obj[p1][p2]) {\n            return false;\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Returns true if object has a style property or has it ina specified line\n     * This function is used to detect if a text will use a particular property or not.\n     * @param {String} property to check for\n     * @param {Number} lineIndex to check the style on\n     * @return {Boolean}\n     */\n    styleHas: function(property, lineIndex) {\n      if (!this.styles || !property || property === '') {\n        return false;\n      }\n      if (typeof lineIndex !== 'undefined' && !this.styles[lineIndex]) {\n        return false;\n      }\n      var obj = typeof lineIndex === 'undefined' ? this.styles : { 0: this.styles[lineIndex] };\n      // eslint-disable-next-line\n      for (var p1 in obj) {\n        // eslint-disable-next-line\n        for (var p2 in obj[p1]) {\n          if (typeof obj[p1][p2][property] !== 'undefined') {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Check if characters in a text have a value for a property\n     * whose value matches the textbox's value for that property.  If so,\n     * the character-level property is deleted.  If the character\n     * has no other properties, then it is also deleted.  Finally,\n     * if the line containing that character has no other characters\n     * then it also is deleted.\n     *\n     * @param {string} property The property to compare between characters and text.\n     */\n    cleanStyle: function(property) {\n      if (!this.styles || !property || property === '') {\n        return false;\n      }\n      var obj = this.styles, stylesCount = 0, letterCount, stylePropertyValue,\n          allStyleObjectPropertiesMatch = true, graphemeCount = 0, styleObject;\n      // eslint-disable-next-line\n      for (var p1 in obj) {\n        letterCount = 0;\n        // eslint-disable-next-line\n        for (var p2 in obj[p1]) {\n          var styleObject = obj[p1][p2],\n              stylePropertyHasBeenSet = styleObject.hasOwnProperty(property);\n\n          stylesCount++;\n\n          if (stylePropertyHasBeenSet) {\n            if (!stylePropertyValue) {\n              stylePropertyValue = styleObject[property];\n            }\n            else if (styleObject[property] !== stylePropertyValue) {\n              allStyleObjectPropertiesMatch = false;\n            }\n\n            if (styleObject[property] === this[property]) {\n              delete styleObject[property];\n            }\n          }\n          else {\n            allStyleObjectPropertiesMatch = false;\n          }\n\n          if (Object.keys(styleObject).length !== 0) {\n            letterCount++;\n          }\n          else {\n            delete obj[p1][p2];\n          }\n        }\n\n        if (letterCount === 0) {\n          delete obj[p1];\n        }\n      }\n      // if every grapheme has the same style set then\n      // delete those styles and set it on the parent\n      for (var i = 0; i < this._textLines.length; i++) {\n        graphemeCount += this._textLines[i].length;\n      }\n      if (allStyleObjectPropertiesMatch && stylesCount === graphemeCount) {\n        this[property] = stylePropertyValue;\n        this.removeStyle(property);\n      }\n    },\n\n    /**\n     * Remove a style property or properties from all individual character styles\n     * in a text object.  Deletes the character style object if it contains no other style\n     * props.  Deletes a line style object if it contains no other character styles.\n     *\n     * @param {String} props The property to remove from character styles.\n     */\n    removeStyle: function(property) {\n      if (!this.styles || !property || property === '') {\n        return;\n      }\n      var obj = this.styles, line, lineNum, charNum;\n      for (lineNum in obj) {\n        line = obj[lineNum];\n        for (charNum in line) {\n          delete line[charNum][property];\n          if (Object.keys(line[charNum]).length === 0) {\n            delete line[charNum];\n          }\n        }\n        if (Object.keys(line).length === 0) {\n          delete obj[lineNum];\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _extendStyles: function(index, styles) {\n      var loc = this.get2DCursorLocation(index);\n\n      if (!this._getLineStyle(loc.lineIndex)) {\n        this._setLineStyle(loc.lineIndex);\n      }\n\n      if (!this._getStyleDeclaration(loc.lineIndex, loc.charIndex)) {\n        this._setStyleDeclaration(loc.lineIndex, loc.charIndex, {});\n      }\n\n      fabric.util.object.extend(this._getStyleDeclaration(loc.lineIndex, loc.charIndex), styles);\n    },\n\n    /**\n     * Returns 2d representation (lineIndex and charIndex) of cursor (or selection start)\n     * @param {Number} [selectionStart] Optional index. When not given, current selectionStart is used.\n     * @param {Boolean} [skipWrapping] consider the location for unwrapped lines. useful to manage styles.\n     */\n    get2DCursorLocation: function(selectionStart, skipWrapping) {\n      if (typeof selectionStart === 'undefined') {\n        selectionStart = this.selectionStart;\n      }\n      var lines = skipWrapping ? this._unwrappedTextLines : this._textLines,\n          len = lines.length;\n      for (var i = 0; i < len; i++) {\n        if (selectionStart <= lines[i].length) {\n          return {\n            lineIndex: i,\n            charIndex: selectionStart\n          };\n        }\n        selectionStart -= lines[i].length + this.missingNewlineOffset(i);\n      }\n      return {\n        lineIndex: i - 1,\n        charIndex: lines[i - 1].length < selectionStart ? lines[i - 1].length : selectionStart\n      };\n    },\n\n    /**\n     * Gets style of a current selection/cursor (at the start position)\n     * if startIndex or endIndex are not provided, selectionStart or selectionEnd will be used.\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at, if not specified selectionEnd or startIndex + 1\n     * @param {Boolean} [complete] get full style or not\n     * @return {Array} styles an array with one, zero or more Style objects\n     */\n    getSelectionStyles: function(startIndex, endIndex, complete) {\n      if (typeof startIndex === 'undefined') {\n        startIndex = this.selectionStart || 0;\n      }\n      if (typeof endIndex === 'undefined') {\n        endIndex = this.selectionEnd || startIndex;\n      }\n      var styles = [];\n      for (var i = startIndex; i < endIndex; i++) {\n        styles.push(this.getStyleAtPosition(i, complete));\n      }\n      return styles;\n    },\n\n    /**\n     * Gets style of a current selection/cursor position\n     * @param {Number} position  to get styles at\n     * @param {Boolean} [complete] full style if true\n     * @return {Object} style Style object at a specified index\n     * @private\n     */\n    getStyleAtPosition: function(position, complete) {\n      var loc = this.get2DCursorLocation(position),\n          style = complete ? this.getCompleteStyleDeclaration(loc.lineIndex, loc.charIndex) :\n            this._getStyleDeclaration(loc.lineIndex, loc.charIndex);\n      return style || {};\n    },\n\n    /**\n     * Sets style of a current selection, if no selection exist, do not set anything.\n     * @param {Object} [styles] Styles object\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at, if not specified selectionEnd or startIndex + 1\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    setSelectionStyles: function(styles, startIndex, endIndex) {\n      if (typeof startIndex === 'undefined') {\n        startIndex = this.selectionStart || 0;\n      }\n      if (typeof endIndex === 'undefined') {\n        endIndex = this.selectionEnd || startIndex;\n      }\n      for (var i = startIndex; i < endIndex; i++) {\n        this._extendStyles(i, styles);\n      }\n      /* not included in _extendStyles to avoid clearing cache more than once */\n      this._forceClearCache = true;\n      return this;\n    },\n\n    /**\n     * get the reference, not a clone, of the style object for a given character\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @return {Object} style object\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex) {\n      var lineStyle = this.styles && this.styles[lineIndex];\n      if (!lineStyle) {\n        return null;\n      }\n      return lineStyle[charIndex];\n    },\n\n    /**\n     * return a new object that contains all the style property for a character\n     * the object returned is newly created\n     * @param {Number} lineIndex of the line where the character is\n     * @param {Number} charIndex position of the character on the line\n     * @return {Object} style object\n     */\n    getCompleteStyleDeclaration: function(lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex) || { },\n          styleObject = { }, prop;\n      for (var i = 0; i < this._styleProperties.length; i++) {\n        prop = this._styleProperties[i];\n        styleObject[prop] = typeof style[prop] === 'undefined' ? this[prop] : style[prop];\n      }\n      return styleObject;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     *\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @return {Boolean} if the line exists or not\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      return !!this.styles[lineIndex];\n    },\n\n    /**\n     * Set the line style to an empty object so that is initialized\n     * @param {Number} lineIndex\n     * @private\n     */\n    _setLineStyle: function(lineIndex) {\n      this.styles[lineIndex] = {};\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _deleteLineStyle: function(lineIndex) {\n      delete this.styles[lineIndex];\n    }\n  });\n})();\n\n\n(function() {\n\n  function parseDecoration(object) {\n    if (object.textDecoration) {\n      object.textDecoration.indexOf('underline') > -1 && (object.underline = true);\n      object.textDecoration.indexOf('line-through') > -1 && (object.linethrough = true);\n      object.textDecoration.indexOf('overline') > -1 && (object.overline = true);\n      delete object.textDecoration;\n    }\n  }\n\n  /**\n   * IText class (introduced in <b>v1.4</b>) Events are also fired with \"text:\"\n   * prefix when observing canvas.\n   * @class fabric.IText\n   * @extends fabric.Text\n   * @mixes fabric.Observable\n   *\n   * @fires changed\n   * @fires selection:changed\n   * @fires editing:entered\n   * @fires editing:exited\n   *\n   * @return {fabric.IText} thisArg\n   * @see {@link fabric.IText#initialize} for constructor definition\n   *\n   * <p>Supported key combinations:</p>\n   * <pre>\n   *   Move cursor:                    left, right, up, down\n   *   Select character:               shift + left, shift + right\n   *   Select text vertically:         shift + up, shift + down\n   *   Move cursor by word:            alt + left, alt + right\n   *   Select words:                   shift + alt + left, shift + alt + right\n   *   Move cursor to line start/end:  cmd + left, cmd + right or home, end\n   *   Select till start/end of line:  cmd + shift + left, cmd + shift + right or shift + home, shift + end\n   *   Jump to start/end of text:      cmd + up, cmd + down\n   *   Select till start/end of text:  cmd + shift + up, cmd + shift + down or shift + pgUp, shift + pgDown\n   *   Delete character:               backspace\n   *   Delete word:                    alt + backspace\n   *   Delete line:                    cmd + backspace\n   *   Forward delete:                 delete\n   *   Copy text:                      ctrl/cmd + c\n   *   Paste text:                     ctrl/cmd + v\n   *   Cut text:                       ctrl/cmd + x\n   *   Select entire text:             ctrl/cmd + a\n   *   Quit editing                    tab or esc\n   * </pre>\n   *\n   * <p>Supported mouse/touch combination</p>\n   * <pre>\n   *   Position cursor:                click/touch\n   *   Create selection:               click/touch & drag\n   *   Create selection:               click & shift + click\n   *   Select word:                    double click\n   *   Select line:                    triple click\n   * </pre>\n   */\n  fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'i-text',\n\n    /**\n     * Index where text selection starts (or where cursor is when there is no selection)\n     * @type Number\n     * @default\n     */\n    selectionStart: 0,\n\n    /**\n     * Index where text selection ends\n     * @type Number\n     * @default\n     */\n    selectionEnd: 0,\n\n    /**\n     * Color of text selection\n     * @type String\n     * @default\n     */\n    selectionColor: 'rgba(17,119,255,0.3)',\n\n    /**\n     * Indicates whether text is in editing mode\n     * @type Boolean\n     * @default\n     */\n    isEditing: false,\n\n    /**\n     * Indicates whether a text can be edited\n     * @type Boolean\n     * @default\n     */\n    editable: true,\n\n    /**\n     * Border color of text object while it's in editing mode\n     * @type String\n     * @default\n     */\n    editingBorderColor: 'rgba(102,153,255,0.25)',\n\n    /**\n     * Width of cursor (in px)\n     * @type Number\n     * @default\n     */\n    cursorWidth: 2,\n\n    /**\n     * Color of text cursor color in editing mode.\n     * if not set (default) will take color from the text.\n     * if set to a color value that fabric can understand, it will\n     * be used instead of the color of the text at the current position.\n     * @type String\n     * @default\n     */\n    cursorColor: '',\n\n    /**\n     * Delay between cursor blink (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDelay: 1000,\n\n    /**\n     * Duration of cursor fadein (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDuration: 600,\n\n    /**\n     * Indicates whether internal text char widths can be cached\n     * @type Boolean\n     * @default\n     */\n    caching: true,\n\n    /**\n     * @private\n     */\n    _reSpace: /\\s|\\n/,\n\n    /**\n     * @private\n     */\n    _currentCursorOpacity: 0,\n\n    /**\n     * @private\n     */\n    _selectionDirection: null,\n\n    /**\n     * @private\n     */\n    _abortCursorAnimation: false,\n\n    /**\n     * @private\n     */\n    __widthOfSpace: [],\n\n    /**\n     * Helps determining when the text is in composition, so that the cursor\n     * rendering is altered.\n     */\n    inCompositionMode: false,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.IText} thisArg\n     */\n    initialize: function(text, options) {\n      this.callSuper('initialize', text, options);\n      this.initBehavior();\n    },\n\n    /**\n     * Sets selection start (left boundary of a selection)\n     * @param {Number} index Index to set selection start to\n     */\n    setSelectionStart: function(index) {\n      index = Math.max(index, 0);\n      this._updateAndFire('selectionStart', index);\n    },\n\n    /**\n     * Sets selection end (right boundary of a selection)\n     * @param {Number} index Index to set selection end to\n     */\n    setSelectionEnd: function(index) {\n      index = Math.min(index, this.text.length);\n      this._updateAndFire('selectionEnd', index);\n    },\n\n    /**\n     * @private\n     * @param {String} property 'selectionStart' or 'selectionEnd'\n     * @param {Number} index new position of property\n     */\n    _updateAndFire: function(property, index) {\n      if (this[property] !== index) {\n        this._fireSelectionChanged();\n        this[property] = index;\n      }\n      this._updateTextarea();\n    },\n\n    /**\n     * Fires the even of selection changed\n     * @private\n     */\n    _fireSelectionChanged: function() {\n      this.fire('selection:changed');\n      this.canvas && this.canvas.fire('text:selection:changed', { target: this });\n    },\n\n    /**\n     * Initialize text dimensions. Render all text on given context\n     * or on a offscreen canvas to get the text width with measureText.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     * @private\n     */\n    initDimensions: function() {\n      this.isEditing && this.initDelayedCursor();\n      this.clearContextTop();\n      this.callSuper('initDimensions');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      this.clearContextTop();\n      this.callSuper('render', ctx);\n      // clear the cursorOffsetCache, so we ensure to calculate once per renderCursor\n      // the correct position but not at every cursor animation.\n      this.cursorOffsetCache = { };\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this.callSuper('_render', ctx);\n    },\n\n    /**\n     * Prepare and clean the contextTop\n     */\n    clearContextTop: function(skipRestore) {\n      if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {\n        return;\n      }\n      var ctx = this.canvas.contextTop, v = this.canvas.viewportTransform;\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      this.transform(ctx);\n      this._clearTextArea(ctx);\n      skipRestore || ctx.restore();\n    },\n    /**\n     * Renders cursor or selection (depending on what exists)\n     * it does on the contextTop. If contextTop is not available, do nothing.\n     */\n    renderCursorOrSelection: function() {\n      if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {\n        return;\n      }\n      var boundaries = this._getCursorBoundaries(),\n          ctx = this.canvas.contextTop;\n      this.clearContextTop(true);\n      if (this.selectionStart === this.selectionEnd) {\n        this.renderCursor(boundaries, ctx);\n      }\n      else {\n        this.renderSelection(boundaries, ctx);\n      }\n      ctx.restore();\n    },\n\n    _clearTextArea: function(ctx) {\n      // we add 4 pixel, to be sure to do not leave any pixel out\n      var width = this.width + 4, height = this.height + 4;\n      ctx.clearRect(-width / 2, -height / 2, width, height);\n    },\n\n    /**\n     * Returns cursor boundaries (left, top, leftOffset, topOffset)\n     * @private\n     * @param {Array} chars Array of characters\n     * @param {String} typeOfBoundaries\n     */\n    _getCursorBoundaries: function(position) {\n\n      // left/top are left/top of entire text box\n      // leftOffset/topOffset are offset from that left/top point of a text box\n\n      if (typeof position === 'undefined') {\n        position = this.selectionStart;\n      }\n\n      var left = this._getLeftOffset(),\n          top = this._getTopOffset(),\n          offsets = this._getCursorBoundariesOffsets(position);\n\n      return {\n        left: left,\n        top: top,\n        leftOffset: offsets.left,\n        topOffset: offsets.top\n      };\n    },\n\n    /**\n     * @private\n     */\n    _getCursorBoundariesOffsets: function(position) {\n      if (this.cursorOffsetCache && 'top' in this.cursorOffsetCache) {\n        return this.cursorOffsetCache;\n      }\n      var lineLeftOffset,\n          lineIndex,\n          charIndex,\n          topOffset = 0,\n          leftOffset = 0,\n          boundaries,\n          cursorPosition = this.get2DCursorLocation(position);\n      charIndex = cursorPosition.charIndex;\n      lineIndex = cursorPosition.lineIndex;\n      for (var i = 0; i < lineIndex; i++) {\n        topOffset += this.getHeightOfLine(i);\n      }\n      lineLeftOffset = this._getLineLeftOffset(lineIndex);\n      var bound = this.__charBounds[lineIndex][charIndex];\n      bound && (leftOffset = bound.left);\n      if (this.charSpacing !== 0 && charIndex === this._textLines[lineIndex].length) {\n        leftOffset -= this._getWidthOfCharSpacing();\n      }\n      boundaries = {\n        top: topOffset,\n        left: lineLeftOffset + (leftOffset > 0 ? leftOffset : 0),\n      };\n      this.cursorOffsetCache = boundaries;\n      return this.cursorOffsetCache;\n    },\n\n    /**\n     * Renders cursor\n     * @param {Object} boundaries\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderCursor: function(boundaries, ctx) {\n      var cursorLocation = this.get2DCursorLocation(),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex > 0 ? cursorLocation.charIndex - 1 : 0,\n          charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, 'fontSize'),\n          multiplier = this.scaleX * this.canvas.getZoom(),\n          cursorWidth = this.cursorWidth / multiplier,\n          topOffset = boundaries.topOffset,\n          dy = this.getValueOfPropertyAt(lineIndex, charIndex, 'deltaY');\n\n      topOffset += (1 - this._fontSizeFraction) * this.getHeightOfLine(lineIndex) / this.lineHeight\n        - charHeight * (1 - this._fontSizeFraction);\n\n      if (this.inCompositionMode) {\n        this.renderSelection(boundaries, ctx);\n      }\n\n      ctx.fillStyle = this.cursorColor || this.getValueOfPropertyAt(lineIndex, charIndex, 'fill');\n      ctx.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity;\n      ctx.fillRect(\n        boundaries.left + boundaries.leftOffset - cursorWidth / 2,\n        topOffset + boundaries.top + dy,\n        cursorWidth,\n        charHeight);\n    },\n\n    /**\n     * Renders text selection\n     * @param {Object} boundaries Object with left/top/leftOffset/topOffset\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderSelection: function(boundaries, ctx) {\n\n      var selectionStart = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart,\n          selectionEnd = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd,\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          start = this.get2DCursorLocation(selectionStart),\n          end = this.get2DCursorLocation(selectionEnd),\n          startLine = start.lineIndex,\n          endLine = end.lineIndex,\n          startChar = start.charIndex < 0 ? 0 : start.charIndex,\n          endChar = end.charIndex < 0 ? 0 : end.charIndex;\n\n      for (var i = startLine; i <= endLine; i++) {\n        var lineOffset = this._getLineLeftOffset(i) || 0,\n            lineHeight = this.getHeightOfLine(i),\n            realLineHeight = 0, boxStart = 0, boxEnd = 0;\n\n        if (i === startLine) {\n          boxStart = this.__charBounds[startLine][startChar].left;\n        }\n        if (i >= startLine && i < endLine) {\n          boxEnd = isJustify && !this.isEndOfWrapping(i) ? this.width : this.getLineWidth(i) || 5; // WTF is this 5?\n        }\n        else if (i === endLine) {\n          if (endChar === 0) {\n            boxEnd = this.__charBounds[endLine][endChar].left;\n          }\n          else {\n            var charSpacing = this._getWidthOfCharSpacing();\n            boxEnd = this.__charBounds[endLine][endChar - 1].left\n              + this.__charBounds[endLine][endChar - 1].width - charSpacing;\n          }\n        }\n        realLineHeight = lineHeight;\n        if (this.lineHeight < 1 || (i === endLine && this.lineHeight > 1)) {\n          lineHeight /= this.lineHeight;\n        }\n        if (this.inCompositionMode) {\n          ctx.fillStyle = this.compositionColor || 'black';\n          ctx.fillRect(\n            boundaries.left + lineOffset + boxStart,\n            boundaries.top + boundaries.topOffset + lineHeight,\n            boxEnd - boxStart,\n            1);\n        }\n        else {\n          ctx.fillStyle = this.selectionColor;\n          ctx.fillRect(\n            boundaries.left + lineOffset + boxStart,\n            boundaries.top + boundaries.topOffset,\n            boxEnd - boxStart,\n            lineHeight);\n        }\n\n\n        boundaries.topOffset += realLineHeight;\n      }\n    },\n\n    /**\n     * High level function to know the height of the cursor.\n     * the currentChar is the one that precedes the cursor\n     * Returns fontSize of char at the current cursor\n     * Unused from the library, is for the end user\n     * @return {Number} Character font size\n     */\n    getCurrentCharFontSize: function() {\n      var cp = this._getCurrentCharIndex();\n      return this.getValueOfPropertyAt(cp.l, cp.c, 'fontSize');\n    },\n\n    /**\n     * High level function to know the color of the cursor.\n     * the currentChar is the one that precedes the cursor\n     * Returns color (fill) of char at the current cursor\n     * if the text object has a pattern or gradient for filler, it will return that.\n     * Unused by the library, is for the end user\n     * @return {String | fabric.Gradient | fabric.Pattern} Character color (fill)\n     */\n    getCurrentCharColor: function() {\n      var cp = this._getCurrentCharIndex();\n      return this.getValueOfPropertyAt(cp.l, cp.c, 'fill');\n    },\n\n    /**\n     * Returns the cursor position for the getCurrent.. functions\n     * @private\n     */\n    _getCurrentCharIndex: function() {\n      var cursorPosition = this.get2DCursorLocation(this.selectionStart, true),\n          charIndex = cursorPosition.charIndex > 0 ? cursorPosition.charIndex - 1 : 0;\n      return { l: cursorPosition.lineIndex, c: charIndex };\n    }\n  });\n\n  /**\n   * Returns fabric.IText instance from an object representation\n   * @static\n   * @memberOf fabric.IText\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as argument\n   */\n  fabric.IText.fromObject = function(object, callback) {\n    parseDecoration(object);\n    if (object.styles) {\n      for (var i in object.styles) {\n        for (var j in object.styles[i]) {\n          parseDecoration(object.styles[i][j]);\n        }\n      }\n    }\n    fabric.Object._fromObject('IText', object, callback, 'text');\n  };\n})();\n\n\n(function() {\n\n  var clone = fabric.util.object.clone;\n\n  fabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Initializes all the interactive behavior of IText\n     */\n    initBehavior: function() {\n      this.initAddedHandler();\n      this.initRemovedHandler();\n      this.initCursorSelectionHandlers();\n      this.initDoubleClickSimulation();\n      this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\n    },\n\n    onDeselect: function() {\n      this.isEditing && this.exitEditing();\n      this.selected = false;\n    },\n\n    /**\n     * Initializes \"added\" event handler\n     */\n    initAddedHandler: function() {\n      var _this = this;\n      this.on('added', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          if (!canvas._hasITextHandlers) {\n            canvas._hasITextHandlers = true;\n            _this._initCanvasHandlers(canvas);\n          }\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          canvas._iTextInstances.push(_this);\n        }\n      });\n    },\n\n    initRemovedHandler: function() {\n      var _this = this;\n      this.on('removed', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          fabric.util.removeFromArray(canvas._iTextInstances, _this);\n          if (canvas._iTextInstances.length === 0) {\n            canvas._hasITextHandlers = false;\n            _this._removeCanvasHandlers(canvas);\n          }\n        }\n      });\n    },\n\n    /**\n     * register canvas event to manage exiting on other instances\n     * @private\n     */\n    _initCanvasHandlers: function(canvas) {\n      canvas._mouseUpITextHandler = function() {\n        if (canvas._iTextInstances) {\n          canvas._iTextInstances.forEach(function(obj) {\n            obj.__isMousedown = false;\n          });\n        }\n      };\n      canvas.on('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * remove canvas event to manage exiting on other instances\n     * @private\n     */\n    _removeCanvasHandlers: function(canvas) {\n      canvas.off('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * @private\n     */\n    _tick: function() {\n      this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, '_onTickComplete');\n    },\n\n    /**\n     * @private\n     */\n    _animateCursor: function(obj, targetOpacity, duration, completeMethod) {\n\n      var tickState;\n\n      tickState = {\n        isAborted: false,\n        abort: function() {\n          this.isAborted = true;\n        },\n      };\n\n      obj.animate('_currentCursorOpacity', targetOpacity, {\n        duration: duration,\n        onComplete: function() {\n          if (!tickState.isAborted) {\n            obj[completeMethod]();\n          }\n        },\n        onChange: function() {\n          // we do not want to animate a selection, only cursor\n          if (obj.canvas && obj.selectionStart === obj.selectionEnd) {\n            obj.renderCursorOrSelection();\n          }\n        },\n        abort: function() {\n          return tickState.isAborted;\n        }\n      });\n      return tickState;\n    },\n\n    /**\n     * @private\n     */\n    _onTickComplete: function() {\n\n      var _this = this;\n\n      if (this._cursorTimeout1) {\n        clearTimeout(this._cursorTimeout1);\n      }\n      this._cursorTimeout1 = setTimeout(function() {\n        _this._currentTickCompleteState = _this._animateCursor(_this, 0, this.cursorDuration / 2, '_tick');\n      }, 100);\n    },\n\n    /**\n     * Initializes delayed cursor\n     */\n    initDelayedCursor: function(restart) {\n      var _this = this,\n          delay = restart ? 0 : this.cursorDelay;\n\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this._cursorTimeout2 = setTimeout(function() {\n        _this._tick();\n      }, delay);\n    },\n\n    /**\n     * Aborts cursor animation and clears all timeouts\n     */\n    abortCursorAnimation: function() {\n      var shouldClear = this._currentTickState || this._currentTickCompleteState,\n          canvas = this.canvas;\n      this._currentTickState && this._currentTickState.abort();\n      this._currentTickCompleteState && this._currentTickCompleteState.abort();\n\n      clearTimeout(this._cursorTimeout1);\n      clearTimeout(this._cursorTimeout2);\n\n      this._currentCursorOpacity = 0;\n      // to clear just itext area we need to transform the context\n      // it may not be worth it\n      if (shouldClear && canvas) {\n        canvas.clearContext(canvas.contextTop || canvas.contextContainer);\n      }\n\n    },\n\n    /**\n     * Selects entire text\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    selectAll: function() {\n      this.selectionStart = 0;\n      this.selectionEnd = this._text.length;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      return this;\n    },\n\n    /**\n     * Returns selected text\n     * @return {String}\n     */\n    getSelectedText: function() {\n      return this._text.slice(this.selectionStart, this.selectionEnd).join('');\n    },\n\n    /**\n     * Find new selection index representing start of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      // remove space before cursor first\n      if (this._reSpace.test(this._text[index])) {\n        while (this._reSpace.test(this._text[index])) {\n          offset++;\n          index--;\n        }\n      }\n      while (/\\S/.test(this._text[index]) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      // remove space after cursor first\n      if (this._reSpace.test(this._text[index])) {\n        while (this._reSpace.test(this._text[index])) {\n          offset++;\n          index++;\n        }\n      }\n      while (/\\S/.test(this._text[index]) && index < this._text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Find new selection index representing start of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      while (!/\\n/.test(this._text[index]) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      while (!/\\n/.test(this._text[index]) && index < this._text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Finds index corresponding to beginning or end of a word\n     * @param {Number} selectionStart Index of a character\n     * @param {Number} direction 1 or -1\n     * @return {Number} Index of the beginning or end of a word\n     */\n    searchWordBoundary: function(selectionStart, direction) {\n      var text = this._text,\n          index     = this._reSpace.test(text[selectionStart]) ? selectionStart - 1 : selectionStart,\n          _char     = text[index],\n          // wrong\n          reNonWord = fabric.reNonWord;\n\n      while (!reNonWord.test(_char) && index > 0 && index < text.length) {\n        index += direction;\n        _char = text[index];\n      }\n      if (reNonWord.test(_char)) {\n        index += direction === 1 ? 0 : 1;\n      }\n      return index;\n    },\n\n    /**\n     * Selects a word based on the index\n     * @param {Number} selectionStart Index of a character\n     */\n    selectWord: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.searchWordBoundary(selectionStart, -1), /* search backwards */\n          newSelectionEnd = this.searchWordBoundary(selectionStart, 1); /* search forward */\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * Selects a line based on the index\n     * @param {Number} selectionStart Index of a character\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    selectLine: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.findLineBoundaryLeft(selectionStart),\n          newSelectionEnd = this.findLineBoundaryRight(selectionStart);\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      return this;\n    },\n\n    /**\n     * Enters editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    enterEditing: function(e) {\n      if (this.isEditing || !this.editable) {\n        return;\n      }\n\n      if (this.canvas) {\n        this.canvas.calcOffset();\n        this.exitEditingOnOthers(this.canvas);\n      }\n\n      this.isEditing = true;\n\n      this.initHiddenTextarea(e);\n      this.hiddenTextarea.focus();\n      this.hiddenTextarea.value = this.text;\n      this._updateTextarea();\n      this._saveEditingProps();\n      this._setEditingProps();\n      this._textBeforeEdit = this.text;\n\n      this._tick();\n      this.fire('editing:entered');\n      this._fireSelectionChanged();\n      if (!this.canvas) {\n        return this;\n      }\n      this.canvas.fire('text:editing:entered', { target: this });\n      this.initMouseMoveHandler();\n      this.canvas.requestRenderAll();\n      return this;\n    },\n\n    exitEditingOnOthers: function(canvas) {\n      if (canvas._iTextInstances) {\n        canvas._iTextInstances.forEach(function(obj) {\n          obj.selected = false;\n          if (obj.isEditing) {\n            obj.exitEditing();\n          }\n        });\n      }\n    },\n\n    /**\n     * Initializes \"mousemove\" event handler\n     */\n    initMouseMoveHandler: function() {\n      this.canvas.on('mouse:move', this.mouseMoveHandler);\n    },\n\n    /**\n     * @private\n     */\n    mouseMoveHandler: function(options) {\n      if (!this.__isMousedown || !this.isEditing) {\n        return;\n      }\n\n      var newSelectionStart = this.getSelectionStartFromPointer(options.e),\n          currentStart = this.selectionStart,\n          currentEnd = this.selectionEnd;\n      if (\n        (newSelectionStart !== this.__selectionStartOnMouseDown || currentStart === currentEnd)\n        &&\n        (currentStart === newSelectionStart || currentEnd === newSelectionStart)\n      ) {\n        return;\n      }\n      if (newSelectionStart > this.__selectionStartOnMouseDown) {\n        this.selectionStart = this.__selectionStartOnMouseDown;\n        this.selectionEnd = newSelectionStart;\n      }\n      else {\n        this.selectionStart = newSelectionStart;\n        this.selectionEnd = this.__selectionStartOnMouseDown;\n      }\n      if (this.selectionStart !== currentStart || this.selectionEnd !== currentEnd) {\n        this.restartCursorIfNeeded();\n        this._fireSelectionChanged();\n        this._updateTextarea();\n        this.renderCursorOrSelection();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setEditingProps: function() {\n      this.hoverCursor = 'text';\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this.canvas.moveCursor = 'text';\n      }\n\n      this.borderColor = this.editingBorderColor;\n      this.hasControls = this.selectable = false;\n      this.lockMovementX = this.lockMovementY = true;\n    },\n\n    /**\n     * convert from textarea to grapheme indexes\n     */\n    fromStringToGraphemeSelection: function(start, end, text) {\n      var smallerTextStart = text.slice(0, start),\n          graphemeStart = fabric.util.string.graphemeSplit(smallerTextStart).length;\n      if (start === end) {\n        return { selectionStart: graphemeStart, selectionEnd: graphemeStart };\n      }\n      var smallerTextEnd = text.slice(start, end),\n          graphemeEnd = fabric.util.string.graphemeSplit(smallerTextEnd).length;\n      return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };\n    },\n\n    /**\n     * convert from fabric to textarea values\n     */\n    fromGraphemeToStringSelection: function(start, end, _text) {\n      var smallerTextStart = _text.slice(0, start),\n          graphemeStart = smallerTextStart.join('').length;\n      if (start === end) {\n        return { selectionStart: graphemeStart, selectionEnd: graphemeStart };\n      }\n      var smallerTextEnd = _text.slice(start, end),\n          graphemeEnd = smallerTextEnd.join('').length;\n      return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };\n    },\n\n    /**\n     * @private\n     */\n    _updateTextarea: function() {\n      this.cursorOffsetCache = { };\n      if (!this.hiddenTextarea) {\n        return;\n      }\n      if (!this.inCompositionMode) {\n        var newSelection = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);\n        this.hiddenTextarea.selectionStart = newSelection.selectionStart;\n        this.hiddenTextarea.selectionEnd = newSelection.selectionEnd;\n      }\n      this.updateTextareaPosition();\n    },\n\n    /**\n     * @private\n     */\n    updateFromTextArea: function() {\n      if (!this.hiddenTextarea) {\n        return;\n      }\n      this.cursorOffsetCache = { };\n      this.text = this.hiddenTextarea.value;\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      var newSelection = this.fromStringToGraphemeSelection(\n        this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);\n      this.selectionEnd = this.selectionStart = newSelection.selectionEnd;\n      if (!this.inCompositionMode) {\n        this.selectionStart = newSelection.selectionStart;\n      }\n      this.updateTextareaPosition();\n    },\n\n    /**\n     * @private\n     */\n    updateTextareaPosition: function() {\n      if (this.selectionStart === this.selectionEnd) {\n        var style = this._calcTextareaPosition();\n        this.hiddenTextarea.style.left = style.left;\n        this.hiddenTextarea.style.top = style.top;\n      }\n    },\n\n    /**\n     * @private\n     * @return {Object} style contains style for hiddenTextarea\n     */\n    _calcTextareaPosition: function() {\n      if (!this.canvas) {\n        return { x: 1, y: 1 };\n      }\n      var desiredPosition = this.inCompositionMode ? this.compositionStart : this.selectionStart,\n          boundaries = this._getCursorBoundaries(desiredPosition),\n          cursorLocation = this.get2DCursorLocation(desiredPosition),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex,\n          charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, 'fontSize') * this.lineHeight,\n          leftOffset = boundaries.leftOffset,\n          m = this.calcTransformMatrix(),\n          p = {\n            x: boundaries.left + leftOffset,\n            y: boundaries.top + boundaries.topOffset + charHeight\n          },\n          retinaScaling = this.canvas.getRetinaScaling(),\n          upperCanvas = this.canvas.upperCanvasEl,\n          upperCanvasWidth = upperCanvas.width / retinaScaling,\n          upperCanvasHeight = upperCanvas.height / retinaScaling,\n          maxWidth = upperCanvasWidth - charHeight,\n          maxHeight = upperCanvasHeight - charHeight,\n          scaleX = upperCanvas.clientWidth / upperCanvasWidth,\n          scaleY = upperCanvas.clientHeight / upperCanvasHeight;\n\n      p = fabric.util.transformPoint(p, m);\n      p = fabric.util.transformPoint(p, this.canvas.viewportTransform);\n      p.x *= scaleX;\n      p.y *= scaleY;\n      if (p.x < 0) {\n        p.x = 0;\n      }\n      if (p.x > maxWidth) {\n        p.x = maxWidth;\n      }\n      if (p.y < 0) {\n        p.y = 0;\n      }\n      if (p.y > maxHeight) {\n        p.y = maxHeight;\n      }\n\n      // add canvas offset on document\n      p.x += this.canvas._offset.left;\n      p.y += this.canvas._offset.top;\n\n      return { left: p.x + 'px', top: p.y + 'px', fontSize: charHeight + 'px', charHeight: charHeight };\n    },\n\n    /**\n     * @private\n     */\n    _saveEditingProps: function() {\n      this._savedProps = {\n        hasControls: this.hasControls,\n        borderColor: this.borderColor,\n        lockMovementX: this.lockMovementX,\n        lockMovementY: this.lockMovementY,\n        hoverCursor: this.hoverCursor,\n        selectable: this.selectable,\n        defaultCursor: this.canvas && this.canvas.defaultCursor,\n        moveCursor: this.canvas && this.canvas.moveCursor\n      };\n    },\n\n    /**\n     * @private\n     */\n    _restoreEditingProps: function() {\n      if (!this._savedProps) {\n        return;\n      }\n\n      this.hoverCursor = this._savedProps.hoverCursor;\n      this.hasControls = this._savedProps.hasControls;\n      this.borderColor = this._savedProps.borderColor;\n      this.selectable = this._savedProps.selectable;\n      this.lockMovementX = this._savedProps.lockMovementX;\n      this.lockMovementY = this._savedProps.lockMovementY;\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this._savedProps.defaultCursor;\n        this.canvas.moveCursor = this._savedProps.moveCursor;\n      }\n    },\n\n    /**\n     * Exits from editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    exitEditing: function() {\n      var isTextChanged = (this._textBeforeEdit !== this.text);\n      var hiddenTextarea = this.hiddenTextarea;\n      this.selected = false;\n      this.isEditing = false;\n\n      this.selectionEnd = this.selectionStart;\n\n      if (hiddenTextarea) {\n        hiddenTextarea.blur && hiddenTextarea.blur();\n        hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);\n      }\n      this.hiddenTextarea = null;\n      this.abortCursorAnimation();\n      this._restoreEditingProps();\n      this._currentCursorOpacity = 0;\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      this.fire('editing:exited');\n      isTextChanged && this.fire('modified');\n      if (this.canvas) {\n        this.canvas.off('mouse:move', this.mouseMoveHandler);\n        this.canvas.fire('text:editing:exited', { target: this });\n        isTextChanged && this.canvas.fire('object:modified', { target: this });\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _removeExtraneousStyles: function() {\n      for (var prop in this.styles) {\n        if (!this._textLines[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * remove and reflow a style block from start to end.\n     * @param {Number} start linear start position for removal (included in removal)\n     * @param {Number} end linear end position for removal ( excluded from removal )\n     */\n    removeStyleFromTo: function(start, end) {\n      var cursorStart = this.get2DCursorLocation(start, true),\n          cursorEnd = this.get2DCursorLocation(end, true),\n          lineStart = cursorStart.lineIndex,\n          charStart = cursorStart.charIndex,\n          lineEnd = cursorEnd.lineIndex,\n          charEnd = cursorEnd.charIndex,\n          i, styleObj;\n      if (lineStart !== lineEnd) {\n        // step1 remove the trailing of lineStart\n        if (this.styles[lineStart]) {\n          for (i = charStart; i < this._unwrappedTextLines[lineStart].length; i++) {\n            delete this.styles[lineStart][i];\n          }\n        }\n        // step2 move the trailing of lineEnd to lineStart if needed\n        if (this.styles[lineEnd]) {\n          for (i = charEnd; i < this._unwrappedTextLines[lineEnd].length; i++) {\n            styleObj = this.styles[lineEnd][i];\n            if (styleObj) {\n              this.styles[lineStart] || (this.styles[lineStart] = { });\n              this.styles[lineStart][charStart + i - charEnd] = styleObj;\n            }\n          }\n        }\n        // step3 detects lines will be completely removed.\n        for (i = lineStart + 1; i <= lineEnd; i++) {\n          delete this.styles[i];\n        }\n        // step4 shift remaining lines.\n        this.shiftLineStyles(lineEnd, lineStart - lineEnd);\n      }\n      else {\n        // remove and shift left on the same line\n        if (this.styles[lineStart]) {\n          styleObj = this.styles[lineStart];\n          var diff = charEnd - charStart, numericChar, _char;\n          for (i = charStart; i < charEnd; i++) {\n            delete styleObj[i];\n          }\n          for (_char in this.styles[lineStart]) {\n            numericChar = parseInt(_char, 10);\n            if (numericChar >= charEnd) {\n              styleObj[numericChar - diff] = styleObj[_char];\n              delete styleObj[_char];\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Shifts line styles up or down\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} offset Can any number?\n     */\n    shiftLineStyles: function(lineIndex, offset) {\n      // shift all line styles by offset upward or downward\n      // do not clone deep. we need new array, not new style objects\n      var clonedStyles = clone(this.styles);\n      for (var line in this.styles) {\n        var numericLine = parseInt(line, 10);\n        if (numericLine > lineIndex) {\n          this.styles[numericLine + offset] = clonedStyles[numericLine];\n          if (!clonedStyles[numericLine - offset]) {\n            delete this.styles[numericLine];\n          }\n        }\n      }\n    },\n\n    restartCursorIfNeeded: function() {\n      if (!this._currentTickState || this._currentTickState.isAborted\n        || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted\n      ) {\n        this.initDelayedCursor();\n      }\n    },\n\n    /**\n     * Handle insertion of more consecutive style lines for when one or more\n     * newlines gets added to the text. Since current style needs to be shifted\n     * first we shift the current style of the number lines needed, then we add\n     * new lines from the last to the first.\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Number} qty number of lines to add\n     * @param {Array} copiedStyle Array of objects styles\n     */\n    insertNewlineStyleObject: function(lineIndex, charIndex, qty, copiedStyle) {\n      var currentCharStyle,\n          newLineStyles = {},\n          somethingAdded = false,\n          isEndOfLine = this._unwrappedTextLines[lineIndex].length === charIndex;\n\n      qty || (qty = 1);\n      this.shiftLineStyles(lineIndex, qty);\n      if (this.styles[lineIndex]) {\n        currentCharStyle = this.styles[lineIndex][charIndex === 0 ? charIndex : charIndex - 1];\n      }\n      // we clone styles of all chars\n      // after cursor onto the current line\n      for (var index in this.styles[lineIndex]) {\n        var numIndex = parseInt(index, 10);\n        if (numIndex >= charIndex) {\n          somethingAdded = true;\n          newLineStyles[numIndex - charIndex] = this.styles[lineIndex][index];\n          // remove lines from the previous line since they're on a new line now\n          if (!(isEndOfLine && charIndex === 0)) {\n            delete this.styles[lineIndex][index];\n          }\n        }\n      }\n      var styleCarriedOver = false;\n      if (somethingAdded && !isEndOfLine) {\n        // if is end of line, the extra style we copied\n        // is probably not something we want\n        this.styles[lineIndex + qty] = newLineStyles;\n        styleCarriedOver = true;\n      }\n      if (styleCarriedOver) {\n        // skip the last line of since we already prepared it.\n        qty--;\n      }\n      // for the all the lines or all the other lines\n      // we clone current char style onto the next (otherwise empty) line\n      while (qty > 0) {\n        if (copiedStyle && copiedStyle[qty - 1]) {\n          this.styles[lineIndex + qty] = { 0: clone(copiedStyle[qty - 1]) };\n        }\n        else if (currentCharStyle) {\n          this.styles[lineIndex + qty] = { 0: clone(currentCharStyle) };\n        }\n        else {\n          delete this.styles[lineIndex + qty];\n        }\n        qty--;\n      }\n      this._forceClearCache = true;\n    },\n\n    /**\n     * Inserts style object for a given line/char index\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Number} quantity number Style object to insert, if given\n     * @param {Array} copiedStyle array of style objects\n     */\n    insertCharStyleObject: function(lineIndex, charIndex, quantity, copiedStyle) {\n      if (!this.styles) {\n        this.styles = {};\n      }\n      var currentLineStyles       = this.styles[lineIndex],\n          currentLineStylesCloned = currentLineStyles ? clone(currentLineStyles) : {};\n\n      quantity || (quantity = 1);\n      // shift all char styles by quantity forward\n      // 0,1,2,3 -> (charIndex=2) -> 0,1,3,4 -> (insert 2) -> 0,1,2,3,4\n      for (var index in currentLineStylesCloned) {\n        var numericIndex = parseInt(index, 10);\n        if (numericIndex >= charIndex) {\n          currentLineStyles[numericIndex + quantity] = currentLineStylesCloned[numericIndex];\n          // only delete the style if there was nothing moved there\n          if (!currentLineStylesCloned[numericIndex - quantity]) {\n            delete currentLineStyles[numericIndex];\n          }\n        }\n      }\n      this._forceClearCache = true;\n      if (copiedStyle) {\n        while (quantity--) {\n          if (!Object.keys(copiedStyle[quantity]).length) {\n            continue;\n          }\n          if (!this.styles[lineIndex]) {\n            this.styles[lineIndex] = {};\n          }\n          this.styles[lineIndex][charIndex + quantity] = clone(copiedStyle[quantity]);\n        }\n        return;\n      }\n      if (!currentLineStyles) {\n        return;\n      }\n      var newStyle = currentLineStyles[charIndex ? charIndex - 1 : 1];\n      while (newStyle && quantity--) {\n        this.styles[lineIndex][charIndex + quantity] = clone(newStyle);\n      }\n    },\n\n    /**\n     * Inserts style object(s)\n     * @param {Array} insertedText Characters at the location where style is inserted\n     * @param {Number} start cursor index for inserting style\n     * @param {Array} [copiedStyle] array of style objects to insert.\n     */\n    insertNewStyleBlock: function(insertedText, start, copiedStyle) {\n      var cursorLoc = this.get2DCursorLocation(start, true),\n          addedLines = [0], linesLength = 0;\n      // get an array of how many char per lines are being added.\n      for (var i = 0; i < insertedText.length; i++) {\n        if (insertedText[i] === '\\n') {\n          linesLength++;\n          addedLines[linesLength] = 0;\n        }\n        else {\n          addedLines[linesLength]++;\n        }\n      }\n      // for the first line copy the style from the current char position.\n      if (addedLines[0] > 0) {\n        this.insertCharStyleObject(cursorLoc.lineIndex, cursorLoc.charIndex, addedLines[0], copiedStyle);\n        copiedStyle = copiedStyle && copiedStyle.slice(addedLines[0] + 1);\n      }\n      linesLength && this.insertNewlineStyleObject(\n        cursorLoc.lineIndex, cursorLoc.charIndex + addedLines[0], linesLength);\n      for (var i = 1; i < linesLength; i++) {\n        if (addedLines[i] > 0) {\n          this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);\n        }\n        else if (copiedStyle) {\n          this.styles[cursorLoc.lineIndex + i][0] = copiedStyle[0];\n        }\n        copiedStyle = copiedStyle && copiedStyle.slice(addedLines[i] + 1);\n      }\n      // we use i outside the loop to get it like linesLength\n      if (addedLines[i] > 0) {\n        this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);\n      }\n    },\n\n    /**\n     * Set the selectionStart and selectionEnd according to the new position of cursor\n     * mimic the key - mouse navigation when shift is pressed.\n     */\n    setSelectionStartEndWithShift: function(start, end, newSelection) {\n      if (newSelection <= start) {\n        if (end === start) {\n          this._selectionDirection = 'left';\n        }\n        else if (this._selectionDirection === 'right') {\n          this._selectionDirection = 'left';\n          this.selectionEnd = start;\n        }\n        this.selectionStart = newSelection;\n      }\n      else if (newSelection > start && newSelection < end) {\n        if (this._selectionDirection === 'right') {\n          this.selectionEnd = newSelection;\n        }\n        else {\n          this.selectionStart = newSelection;\n        }\n      }\n      else {\n        // newSelection is > selection start and end\n        if (end === start) {\n          this._selectionDirection = 'right';\n        }\n        else if (this._selectionDirection === 'left') {\n          this._selectionDirection = 'right';\n          this.selectionStart = end;\n        }\n        this.selectionEnd = newSelection;\n      }\n    },\n\n    setSelectionInBoundaries: function() {\n      var length = this.text.length;\n      if (this.selectionStart > length) {\n        this.selectionStart = length;\n      }\n      else if (this.selectionStart < 0) {\n        this.selectionStart = 0;\n      }\n      if (this.selectionEnd > length) {\n        this.selectionEnd = length;\n      }\n      else if (this.selectionEnd < 0) {\n        this.selectionEnd = 0;\n      }\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n  /**\n   * Initializes \"dbclick\" event handler\n   */\n  initDoubleClickSimulation: function() {\n\n    // for double click\n    this.__lastClickTime = +new Date();\n\n    // for triple click\n    this.__lastLastClickTime = +new Date();\n\n    this.__lastPointer = { };\n\n    this.on('mousedown', this.onMouseDown);\n  },\n\n  /**\n   * Default event handler to simulate triple click\n   * @private\n   */\n  onMouseDown: function(options) {\n    if (!this.canvas) {\n      return;\n    }\n    this.__newClickTime = +new Date();\n    var newPointer = options.pointer;\n    if (this.isTripleClick(newPointer)) {\n      this.fire('tripleclick', options);\n      this._stopEvent(options.e);\n    }\n    this.__lastLastClickTime = this.__lastClickTime;\n    this.__lastClickTime = this.__newClickTime;\n    this.__lastPointer = newPointer;\n    this.__lastIsEditing = this.isEditing;\n    this.__lastSelected = this.selected;\n  },\n\n  isTripleClick: function(newPointer) {\n    return this.__newClickTime - this.__lastClickTime < 500 &&\n        this.__lastClickTime - this.__lastLastClickTime < 500 &&\n        this.__lastPointer.x === newPointer.x &&\n        this.__lastPointer.y === newPointer.y;\n  },\n\n  /**\n   * @private\n   */\n  _stopEvent: function(e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n  },\n\n  /**\n   * Initializes event handlers related to cursor or selection\n   */\n  initCursorSelectionHandlers: function() {\n    this.initMousedownHandler();\n    this.initMouseupHandler();\n    this.initClicks();\n  },\n\n  /**\n   * Default handler for double click, select a word\n   */\n  doubleClickHandler: function(options) {\n    if (!this.isEditing) {\n      return;\n    }\n    this.selectWord(this.getSelectionStartFromPointer(options.e));\n  },\n\n  /**\n   * Default handler for triple click, select a line\n   */\n  tripleClickHandler: function(options) {\n    if (!this.isEditing) {\n      return;\n    }\n    this.selectLine(this.getSelectionStartFromPointer(options.e));\n  },\n\n  /**\n   * Initializes double and triple click event handlers\n   */\n  initClicks: function() {\n    this.on('mousedblclick', this.doubleClickHandler);\n    this.on('tripleclick', this.tripleClickHandler);\n  },\n\n  /**\n   * Default event handler for the basic functionalities needed on _mouseDown\n   * can be overridden to do something different.\n   * Scope of this implementation is: find the click position, set selectionStart\n   * find selectionEnd, initialize the drawing of either cursor or selection area\n   * initializing a mousedDown on a text area will cancel fabricjs knowledge of\n   * current compositionMode. It will be set to false.\n   */\n  _mouseDownHandler: function(options) {\n    if (!this.canvas || !this.editable || (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n\n    this.__isMousedown = true;\n\n    if (this.selected) {\n      this.inCompositionMode = false;\n      this.setCursorByClick(options.e);\n    }\n\n    if (this.isEditing) {\n      this.__selectionStartOnMouseDown = this.selectionStart;\n      if (this.selectionStart === this.selectionEnd) {\n        this.abortCursorAnimation();\n      }\n      this.renderCursorOrSelection();\n    }\n  },\n\n  /**\n   * Default event handler for the basic functionalities needed on mousedown:before\n   * can be overridden to do something different.\n   * Scope of this implementation is: verify the object is already selected when mousing down\n   */\n  _mouseDownHandlerBefore: function(options) {\n    if (!this.canvas || !this.editable || (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n    // we want to avoid that an object that was selected and then becomes unselectable,\n    // may trigger editing mode in some way.\n    this.selected = this === this.canvas._activeObject;\n  },\n\n  /**\n   * Initializes \"mousedown\" event handler\n   */\n  initMousedownHandler: function() {\n    this.on('mousedown', this._mouseDownHandler);\n    this.on('mousedown:before', this._mouseDownHandlerBefore);\n  },\n\n  /**\n   * Initializes \"mouseup\" event handler\n   */\n  initMouseupHandler: function() {\n    this.on('mouseup', this.mouseUpHandler);\n  },\n\n  /**\n   * standard handler for mouse up, overridable\n   * @private\n   */\n  mouseUpHandler: function(options) {\n    this.__isMousedown = false;\n    if (!this.editable || this.group ||\n      (options.transform && options.transform.actionPerformed) ||\n      (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n\n    if (this.canvas) {\n      var currentActive = this.canvas._activeObject;\n      if (currentActive && currentActive !== this) {\n        // avoid running this logic when there is an active object\n        // this because is possible with shift click and fast clicks,\n        // to rapidly deselect and reselect this object and trigger an enterEdit\n        return;\n      }\n    }\n\n    if (this.__lastSelected && !this.__corner) {\n      this.selected = false;\n      this.__lastSelected = false;\n      this.enterEditing(options.e);\n      if (this.selectionStart === this.selectionEnd) {\n        this.initDelayedCursor(true);\n      }\n      else {\n        this.renderCursorOrSelection();\n      }\n    }\n    else {\n      this.selected = true;\n    }\n  },\n\n  /**\n   * Changes cursor location in a text depending on passed pointer (x/y) object\n   * @param {Event} e Event object\n   */\n  setCursorByClick: function(e) {\n    var newSelection = this.getSelectionStartFromPointer(e),\n        start = this.selectionStart, end = this.selectionEnd;\n    if (e.shiftKey) {\n      this.setSelectionStartEndWithShift(start, end, newSelection);\n    }\n    else {\n      this.selectionStart = newSelection;\n      this.selectionEnd = newSelection;\n    }\n    if (this.isEditing) {\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Returns index of a character corresponding to where an object was clicked\n   * @param {Event} e Event object\n   * @return {Number} Index of a character\n   */\n  getSelectionStartFromPointer: function(e) {\n    var mouseOffset = this.getLocalPointer(e),\n        prevWidth = 0,\n        width = 0,\n        height = 0,\n        charIndex = 0,\n        lineIndex = 0,\n        lineLeftOffset,\n        line;\n\n    for (var i = 0, len = this._textLines.length; i < len; i++) {\n      if (height <= mouseOffset.y) {\n        height += this.getHeightOfLine(i) * this.scaleY;\n        lineIndex = i;\n        if (i > 0) {\n          charIndex += this._textLines[i - 1].length + this.missingNewlineOffset(i - 1);\n        }\n      }\n      else {\n        break;\n      }\n    }\n    lineLeftOffset = this._getLineLeftOffset(lineIndex);\n    width = lineLeftOffset * this.scaleX;\n    line = this._textLines[lineIndex];\n    for (var j = 0, jlen = line.length; j < jlen; j++) {\n      prevWidth = width;\n      // i removed something about flipX here, check.\n      width += this.__charBounds[lineIndex][j].kernedWidth * this.scaleX;\n      if (width <= mouseOffset.x) {\n        charIndex++;\n      }\n      else {\n        break;\n      }\n    }\n    return this._getNewSelectionStartFromOffset(mouseOffset, prevWidth, width, charIndex, jlen);\n  },\n\n  /**\n   * @private\n   */\n  _getNewSelectionStartFromOffset: function(mouseOffset, prevWidth, width, index, jlen) {\n    // we need Math.abs because when width is after the last char, the offset is given as 1, while is 0\n    var distanceBtwLastCharAndCursor = mouseOffset.x - prevWidth,\n        distanceBtwNextCharAndCursor = width - mouseOffset.x,\n        offset = distanceBtwNextCharAndCursor > distanceBtwLastCharAndCursor ||\n          distanceBtwNextCharAndCursor < 0 ? 0 : 1,\n        newSelectionStart = index + offset;\n    // if object is horizontally flipped, mirror cursor location from the end\n    if (this.flipX) {\n      newSelectionStart = jlen - newSelectionStart;\n    }\n\n    if (newSelectionStart > this._text.length) {\n      newSelectionStart = this._text.length;\n    }\n\n    return newSelectionStart;\n  }\n});\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n  /**\n   * Initializes hidden textarea (needed to bring up keyboard in iOS)\n   */\n  initHiddenTextarea: function() {\n    this.hiddenTextarea = fabric.document.createElement('textarea');\n    this.hiddenTextarea.setAttribute('autocapitalize', 'off');\n    this.hiddenTextarea.setAttribute('autocorrect', 'off');\n    this.hiddenTextarea.setAttribute('autocomplete', 'off');\n    this.hiddenTextarea.setAttribute('spellcheck', 'false');\n    this.hiddenTextarea.setAttribute('data-fabric-hiddentextarea', '');\n    this.hiddenTextarea.setAttribute('wrap', 'off');\n    var style = this._calcTextareaPosition();\n    // line-height: 1px; was removed from the style to fix this:\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=870966\n    this.hiddenTextarea.style.cssText = 'position: absolute; top: ' + style.top +\n    '; left: ' + style.left + '; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px;' +\n    ' paddingｰtop: ' + style.fontSize + ';';\n    fabric.document.body.appendChild(this.hiddenTextarea);\n\n    fabric.util.addListener(this.hiddenTextarea, 'keydown', this.onKeyDown.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'keyup', this.onKeyUp.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'input', this.onInput.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'copy', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'cut', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'paste', this.paste.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionstart', this.onCompositionStart.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionupdate', this.onCompositionUpdate.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionend', this.onCompositionEnd.bind(this));\n\n    if (!this._clickHandlerInitialized && this.canvas) {\n      fabric.util.addListener(this.canvas.upperCanvasEl, 'click', this.onClick.bind(this));\n      this._clickHandlerInitialized = true;\n    }\n  },\n\n  /**\n   * For functionalities on keyDown\n   * Map a special key to a function of the instance/prototype\n   * If you need different behaviour for ESC or TAB or arrows, you have to change\n   * this map setting the name of a function that you build on the fabric.Itext or\n   * your prototype.\n   * the map change will affect all Instances unless you need for only some text Instances\n   * in that case you have to clone this object and assign your Instance.\n   * this.keysMap = fabric.util.object.clone(this.keysMap);\n   * The function must be in fabric.Itext.prototype.myFunction And will receive event as args[0]\n   */\n  keysMap: {\n    9:  'exitEditing',\n    27: 'exitEditing',\n    33: 'moveCursorUp',\n    34: 'moveCursorDown',\n    35: 'moveCursorRight',\n    36: 'moveCursorLeft',\n    37: 'moveCursorLeft',\n    38: 'moveCursorUp',\n    39: 'moveCursorRight',\n    40: 'moveCursorDown',\n  },\n\n  /**\n   * For functionalities on keyUp + ctrl || cmd\n   */\n  ctrlKeysMapUp: {\n    67: 'copy',\n    88: 'cut'\n  },\n\n  /**\n   * For functionalities on keyDown + ctrl || cmd\n   */\n  ctrlKeysMapDown: {\n    65: 'selectAll'\n  },\n\n  onClick: function() {\n    // No need to trigger click event here, focus is enough to have the keyboard appear on Android\n    this.hiddenTextarea && this.hiddenTextarea.focus();\n  },\n\n  /**\n   * Handles keydown event\n   * only used for arrows and combination of modifier keys.\n   * @param {Event} e Event object\n   */\n  onKeyDown: function(e) {\n    if (!this.isEditing) {\n      return;\n    }\n    if (e.keyCode in this.keysMap) {\n      this[this.keysMap[e.keyCode]](e);\n    }\n    else if ((e.keyCode in this.ctrlKeysMapDown) && (e.ctrlKey || e.metaKey)) {\n      this[this.ctrlKeysMapDown[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    if (e.keyCode >= 33 && e.keyCode <= 40) {\n      // if i press an arrow key just update selection\n      this.inCompositionMode = false;\n      this.clearContextTop();\n      this.renderCursorOrSelection();\n    }\n    else {\n      this.canvas && this.canvas.requestRenderAll();\n    }\n  },\n\n  /**\n   * Handles keyup event\n   * We handle KeyUp because ie11 and edge have difficulties copy/pasting\n   * if a copy/cut event fired, keyup is dismissed\n   * @param {Event} e Event object\n   */\n  onKeyUp: function(e) {\n    if (!this.isEditing || this._copyDone || this.inCompositionMode) {\n      this._copyDone = false;\n      return;\n    }\n    if ((e.keyCode in this.ctrlKeysMapUp) && (e.ctrlKey || e.metaKey)) {\n      this[this.ctrlKeysMapUp[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    this.canvas && this.canvas.requestRenderAll();\n  },\n\n  /**\n   * Handles onInput event\n   * @param {Event} e Event object\n   */\n  onInput: function(e) {\n    var fromPaste = this.fromPaste;\n    this.fromPaste = false;\n    e && e.stopPropagation();\n    if (!this.isEditing) {\n      return;\n    }\n    // decisions about style changes.\n    var nextText = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,\n        charCount = this._text.length,\n        nextCharCount = nextText.length,\n        removedText, insertedText,\n        charDiff = nextCharCount - charCount,\n        selectionStart = this.selectionStart, selectionEnd = this.selectionEnd,\n        selection = selectionStart !== selectionEnd,\n        copiedStyle, removeFrom, removeTo;\n    if (this.hiddenTextarea.value === '') {\n      this.styles = { };\n      this.updateFromTextArea();\n      this.fire('changed');\n      if (this.canvas) {\n        this.canvas.fire('text:changed', { target: this });\n        this.canvas.requestRenderAll();\n      }\n      return;\n    }\n\n    var textareaSelection = this.fromStringToGraphemeSelection(\n      this.hiddenTextarea.selectionStart,\n      this.hiddenTextarea.selectionEnd,\n      this.hiddenTextarea.value\n    );\n    var backDelete = selectionStart > textareaSelection.selectionStart;\n\n    if (selection) {\n      removedText = this._text.slice(selectionStart, selectionEnd);\n      charDiff += selectionEnd - selectionStart;\n    }\n    else if (nextCharCount < charCount) {\n      if (backDelete) {\n        removedText = this._text.slice(selectionEnd + charDiff, selectionEnd);\n      }\n      else {\n        removedText = this._text.slice(selectionStart, selectionStart - charDiff);\n      }\n    }\n    insertedText = nextText.slice(textareaSelection.selectionEnd - charDiff, textareaSelection.selectionEnd);\n    if (removedText && removedText.length) {\n      if (insertedText.length) {\n        // let's copy some style before deleting.\n        // we want to copy the style before the cursor OR the style at the cursor if selection\n        // is bigger than 0.\n        copiedStyle = this.getSelectionStyles(selectionStart, selectionStart + 1, false);\n        // now duplicate the style one for each inserted text.\n        copiedStyle = insertedText.map(function() {\n          // this return an array of references, but that is fine since we are\n          // copying the style later.\n          return copiedStyle[0];\n        });\n      }\n      if (selection) {\n        removeFrom = selectionStart;\n        removeTo = selectionEnd;\n      }\n      else if (backDelete) {\n        // detect differences between forwardDelete and backDelete\n        removeFrom = selectionEnd - removedText.length;\n        removeTo = selectionEnd;\n      }\n      else {\n        removeFrom = selectionEnd;\n        removeTo = selectionEnd + removedText.length;\n      }\n      this.removeStyleFromTo(removeFrom, removeTo);\n    }\n    if (insertedText.length) {\n      if (fromPaste && insertedText.join('') === fabric.copiedText && !fabric.disableStyleCopyPaste) {\n        copiedStyle = fabric.copiedTextStyle;\n      }\n      this.insertNewStyleBlock(insertedText, selectionStart, copiedStyle);\n    }\n    this.updateFromTextArea();\n    this.fire('changed');\n    if (this.canvas) {\n      this.canvas.fire('text:changed', { target: this });\n      this.canvas.requestRenderAll();\n    }\n  },\n  /**\n   * Composition start\n   */\n  onCompositionStart: function() {\n    this.inCompositionMode = true;\n  },\n\n  /**\n   * Composition end\n   */\n  onCompositionEnd: function() {\n    this.inCompositionMode = false;\n  },\n\n  // /**\n  //  * Composition update\n  //  */\n  onCompositionUpdate: function(e) {\n    this.compositionStart = e.target.selectionStart;\n    this.compositionEnd = e.target.selectionEnd;\n    this.updateTextareaPosition();\n  },\n\n  /**\n   * Copies selected text\n   * @param {Event} e Event object\n   */\n  copy: function() {\n    if (this.selectionStart === this.selectionEnd) {\n      //do not cut-copy if no selection\n      return;\n    }\n\n    fabric.copiedText = this.getSelectedText();\n    if (!fabric.disableStyleCopyPaste) {\n      fabric.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, true);\n    }\n    else {\n      fabric.copiedTextStyle = null;\n    }\n    this._copyDone = true;\n  },\n\n  /**\n   * Pastes text\n   * @param {Event} e Event object\n   */\n  paste: function() {\n    this.fromPaste = true;\n  },\n\n  /**\n   * @private\n   * @param {Event} e Event object\n   * @return {Object} Clipboard data object\n   */\n  _getClipboardData: function(e) {\n    return (e && e.clipboardData) || fabric.window.clipboardData;\n  },\n\n  /**\n   * Finds the width in pixels before the cursor on the same line\n   * @private\n   * @param {Number} lineIndex\n   * @param {Number} charIndex\n   * @return {Number} widthBeforeCursor width before cursor\n   */\n  _getWidthBeforeCursor: function(lineIndex, charIndex) {\n    var widthBeforeCursor = this._getLineLeftOffset(lineIndex), bound;\n\n    if (charIndex > 0) {\n      bound = this.__charBounds[lineIndex][charIndex - 1];\n      widthBeforeCursor += bound.left + bound.width;\n    }\n    return widthBeforeCursor;\n  },\n\n  /**\n   * Gets start offset of a selection\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getDownCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    // if on last line, down cursor goes to end of line\n    if (lineIndex === this._textLines.length - 1 || e.metaKey || e.keyCode === 34) {\n      // move to the end of a text\n      return this._text.length - selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex + 1, widthBeforeCursor),\n        textAfterCursor = this._textLines[lineIndex].slice(charIndex);\n    return textAfterCursor.length + indexOnOtherLine + 1 + this.missingNewlineOffset(lineIndex);\n  },\n\n  /**\n   * private\n   * Helps finding if the offset should be counted from Start or End\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  _getSelectionForOffset: function(e, isRight) {\n    if (e.shiftKey && this.selectionStart !== this.selectionEnd && isRight) {\n      return this.selectionEnd;\n    }\n    else {\n      return this.selectionStart;\n    }\n  },\n\n  /**\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getUpCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    if (lineIndex === 0 || e.metaKey || e.keyCode === 33) {\n      // if on first line, up cursor goes to start of line\n      return -selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex - 1, widthBeforeCursor),\n        textBeforeCursor = this._textLines[lineIndex].slice(0, charIndex),\n        missingNewlineOffset = this.missingNewlineOffset(lineIndex - 1);\n    // return a negative offset\n    return -this._textLines[lineIndex - 1].length\n     + indexOnOtherLine - textBeforeCursor.length + (1 - missingNewlineOffset);\n  },\n\n  /**\n   * for a given width it founds the matching character.\n   * @private\n   */\n  _getIndexOnLine: function(lineIndex, width) {\n\n    var line = this._textLines[lineIndex],\n        lineLeftOffset = this._getLineLeftOffset(lineIndex),\n        widthOfCharsOnLine = lineLeftOffset,\n        indexOnLine = 0, charWidth, foundMatch;\n\n    for (var j = 0, jlen = line.length; j < jlen; j++) {\n      charWidth = this.__charBounds[lineIndex][j].width;\n      widthOfCharsOnLine += charWidth;\n      if (widthOfCharsOnLine > width) {\n        foundMatch = true;\n        var leftEdge = widthOfCharsOnLine - charWidth,\n            rightEdge = widthOfCharsOnLine,\n            offsetFromLeftEdge = Math.abs(leftEdge - width),\n            offsetFromRightEdge = Math.abs(rightEdge - width);\n\n        indexOnLine = offsetFromRightEdge < offsetFromLeftEdge ? j : (j - 1);\n        break;\n      }\n    }\n\n    // reached end\n    if (!foundMatch) {\n      indexOnLine = line.length - 1;\n    }\n\n    return indexOnLine;\n  },\n\n\n  /**\n   * Moves cursor down\n   * @param {Event} e Event object\n   */\n  moveCursorDown: function(e) {\n    if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {\n      return;\n    }\n    this._moveCursorUpOrDown('Down', e);\n  },\n\n  /**\n   * Moves cursor up\n   * @param {Event} e Event object\n   */\n  moveCursorUp: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorUpOrDown('Up', e);\n  },\n\n  /**\n   * Moves cursor up or down, fires the events\n   * @param {String} direction 'Up' or 'Down'\n   * @param {Event} e Event object\n   */\n  _moveCursorUpOrDown: function(direction, e) {\n    // getUpCursorOffset\n    // getDownCursorOffset\n    var action = 'get' + direction + 'CursorOffset',\n        offset = this[action](e, this._selectionDirection === 'right');\n    if (e.shiftKey) {\n      this.moveCursorWithShift(offset);\n    }\n    else {\n      this.moveCursorWithoutShift(offset);\n    }\n    if (offset !== 0) {\n      this.setSelectionInBoundaries();\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor with shift\n   * @param {Number} offset\n   */\n  moveCursorWithShift: function(offset) {\n    var newSelection = this._selectionDirection === 'left'\n      ? this.selectionStart + offset\n      : this.selectionEnd + offset;\n    this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, newSelection);\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor up without shift\n   * @param {Number} offset\n   */\n  moveCursorWithoutShift: function(offset) {\n    if (offset < 0) {\n      this.selectionStart += offset;\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionEnd += offset;\n      this.selectionStart = this.selectionEnd;\n    }\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor left\n   * @param {Event} e Event object\n   */\n  moveCursorLeft: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Left', e);\n  },\n\n  /**\n   * @private\n   * @return {Boolean} true if a change happened\n   */\n  _move: function(e, prop, direction) {\n    var newValue;\n    if (e.altKey) {\n      newValue = this['findWordBoundary' + direction](this[prop]);\n    }\n    else if (e.metaKey || e.keyCode === 35 ||  e.keyCode === 36 ) {\n      newValue = this['findLineBoundary' + direction](this[prop]);\n    }\n    else {\n      this[prop] += direction === 'Left' ? -1 : 1;\n      return true;\n    }\n    if (typeof newValue !== undefined && this[prop] !== newValue) {\n      this[prop] = newValue;\n      return true;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _moveLeft: function(e, prop) {\n    return this._move(e, prop, 'Left');\n  },\n\n  /**\n   * @private\n   */\n  _moveRight: function(e, prop) {\n    return this._move(e, prop, 'Right');\n  },\n\n  /**\n   * Moves cursor left without keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithoutShift: function(e) {\n    var change = true;\n    this._selectionDirection = 'left';\n\n    // only move cursor when there is no selection,\n    // otherwise we discard it, and leave cursor on same place\n    if (this.selectionEnd === this.selectionStart && this.selectionStart !== 0) {\n      change = this._moveLeft(e, 'selectionStart');\n\n    }\n    this.selectionEnd = this.selectionStart;\n    return change;\n  },\n\n  /**\n   * Moves cursor left while keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithShift: function(e) {\n    if (this._selectionDirection === 'right' && this.selectionStart !== this.selectionEnd) {\n      return this._moveLeft(e, 'selectionEnd');\n    }\n    else if (this.selectionStart !== 0){\n      this._selectionDirection = 'left';\n      return this._moveLeft(e, 'selectionStart');\n    }\n  },\n\n  /**\n   * Moves cursor right\n   * @param {Event} e Event object\n   */\n  moveCursorRight: function(e) {\n    if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Right', e);\n  },\n\n  /**\n   * Moves cursor right or Left, fires event\n   * @param {String} direction 'Left', 'Right'\n   * @param {Event} e Event object\n   */\n  _moveCursorLeftOrRight: function(direction, e) {\n    var actionName = 'moveCursor' + direction + 'With';\n    this._currentCursorOpacity = 1;\n\n    if (e.shiftKey) {\n      actionName += 'Shift';\n    }\n    else {\n      actionName += 'outShift';\n    }\n    if (this[actionName](e)) {\n      this.abortCursorAnimation();\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor right while keeping selection\n   * @param {Event} e\n   */\n  moveCursorRightWithShift: function(e) {\n    if (this._selectionDirection === 'left' && this.selectionStart !== this.selectionEnd) {\n      return this._moveRight(e, 'selectionStart');\n    }\n    else if (this.selectionEnd !== this._text.length) {\n      this._selectionDirection = 'right';\n      return this._moveRight(e, 'selectionEnd');\n    }\n  },\n\n  /**\n   * Moves cursor right without keeping selection\n   * @param {Event} e Event object\n   */\n  moveCursorRightWithoutShift: function(e) {\n    var changed = true;\n    this._selectionDirection = 'right';\n\n    if (this.selectionStart === this.selectionEnd) {\n      changed = this._moveRight(e, 'selectionStart');\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionStart = this.selectionEnd;\n    }\n    return changed;\n  },\n\n  /**\n   * Removes characters from start/end\n   * start/end ar per grapheme position in _text array.\n   *\n   * @param {Number} start\n   * @param {Number} end default to start + 1\n   */\n  removeChars: function(start, end) {\n    if (typeof end === 'undefined') {\n      end = start + 1;\n    }\n    this.removeStyleFromTo(start, end);\n    this._text.splice(start, end - start);\n    this.text = this._text.join('');\n    this.set('dirty', true);\n    if (this._shouldClearDimensionCache()) {\n      this.initDimensions();\n      this.setCoords();\n    }\n    this._removeExtraneousStyles();\n  },\n\n  /**\n   * insert characters at start position, before start position.\n   * start  equal 1 it means the text get inserted between actual grapheme 0 and 1\n   * if style array is provided, it must be as the same length of text in graphemes\n   * if end is provided and is bigger than start, old text is replaced.\n   * start/end ar per grapheme position in _text array.\n   *\n   * @param {String} text text to insert\n   * @param {Array} style array of style objects\n   * @param {Number} start\n   * @param {Number} end default to start + 1\n   */\n  insertChars: function(text, style, start, end) {\n    if (typeof end === 'undefined') {\n      end = start;\n    }\n    if (end > start) {\n      this.removeStyleFromTo(start, end);\n    }\n    var graphemes = fabric.util.string.graphemeSplit(text);\n    this.insertNewStyleBlock(graphemes, start, style);\n    this._text = [].concat(this._text.slice(0, start), graphemes, this._text.slice(end));\n    this.text = this._text.join('');\n    this.set('dirty', true);\n    if (this._shouldClearDimensionCache()) {\n      this.initDimensions();\n      this.setCoords();\n    }\n    this._removeExtraneousStyles();\n  },\n\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  var toFixed = fabric.util.toFixed,\n      multipleSpacesRegex = /  +/g;\n\n  fabric.util.object.extend(fabric.Text.prototype, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    _toSVG: function() {\n      var offsets = this._getSVGLeftTopOffsets(),\n          textAndBg = this._getSVGTextAndBg(offsets.textTop, offsets.textLeft);\n      return this._wrapSVGTextAndBg(textAndBg);\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return this._createBaseSVGMarkup(\n        this._toSVG(),\n        { reviver: reviver, noStyle: true, withShadow: true }\n      );\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLeftTopOffsets: function() {\n      return {\n        textLeft: -this.width / 2,\n        textTop: -this.height / 2,\n        lineTop: this.getHeightOfLine(0)\n      };\n    },\n\n    /**\n     * @private\n     */\n    _wrapSVGTextAndBg: function(textAndBg) {\n      var noShadow = true,\n          textDecoration = this.getSvgTextDecoration(this);\n      return [\n        textAndBg.textBgRects.join(''),\n        '\\t\\t<text xml:space=\"preserve\" ',\n        (this.fontFamily ? 'font-family=\"' + this.fontFamily.replace(/\"/g, '\\'') + '\" ' : ''),\n        (this.fontSize ? 'font-size=\"' + this.fontSize + '\" ' : ''),\n        (this.fontStyle ? 'font-style=\"' + this.fontStyle + '\" ' : ''),\n        (this.fontWeight ? 'font-weight=\"' + this.fontWeight + '\" ' : ''),\n        (textDecoration ? 'text-decoration=\"' + textDecoration + '\" ' : ''),\n        'style=\"', this.getSvgStyles(noShadow), '\"', this.addPaintOrder(), ' >',\n        textAndBg.textSpans.join(''),\n        '</text>\\n'\n      ];\n    },\n\n    /**\n     * @private\n     * @param {Number} textTopOffset Text top offset\n     * @param {Number} textLeftOffset Text left offset\n     * @return {Object}\n     */\n    _getSVGTextAndBg: function(textTopOffset, textLeftOffset) {\n      var textSpans = [],\n          textBgRects = [],\n          height = textTopOffset, lineOffset;\n      // bounding-box background\n      this._setSVGBg(textBgRects);\n\n      // text and text-background\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineOffset = this._getLineLeftOffset(i);\n        if (this.textBackgroundColor || this.styleHas('textBackgroundColor', i)) {\n          this._setSVGTextLineBg(textBgRects, i, textLeftOffset + lineOffset, height);\n        }\n        this._setSVGTextLineText(textSpans, i, textLeftOffset + lineOffset, height);\n        height += this.getHeightOfLine(i);\n      }\n\n      return {\n        textSpans: textSpans,\n        textBgRects: textBgRects\n      };\n    },\n\n    /**\n     * @private\n     */\n    _createTextCharSpan: function(_char, styleDecl, left, top) {\n      var shouldUseWhitespace = _char !== _char.trim() || _char.match(multipleSpacesRegex),\n          styleProps = this.getSvgSpanStyles(styleDecl, shouldUseWhitespace),\n          fillStyles = styleProps ? 'style=\"' + styleProps + '\"' : '',\n          dy = styleDecl.deltaY, dySpan = '',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n      if (dy) {\n        dySpan = ' dy=\"' + toFixed(dy, NUM_FRACTION_DIGITS) + '\" ';\n      }\n      return [\n        '<tspan x=\"', toFixed(left, NUM_FRACTION_DIGITS), '\" y=\"',\n        toFixed(top, NUM_FRACTION_DIGITS), '\" ', dySpan,\n        fillStyles, '>',\n        fabric.util.string.escapeXml(_char),\n        '</tspan>'\n      ].join('');\n    },\n\n    _setSVGTextLineText: function(textSpans, lineIndex, textLeftOffset, textTopOffset) {\n      // set proper line offset\n      var lineHeight = this.getHeightOfLine(lineIndex),\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          actualStyle,\n          nextStyle,\n          charsToRender = '',\n          charBox, style,\n          boxWidth = 0,\n          line = this._textLines[lineIndex],\n          timeToRender;\n\n      textTopOffset += lineHeight * (1 - this._fontSizeFraction) / this.lineHeight;\n      for (var i = 0, len = line.length - 1; i <= len; i++) {\n        timeToRender = i === len || this.charSpacing;\n        charsToRender += line[i];\n        charBox = this.__charBounds[lineIndex][i];\n        if (boxWidth === 0) {\n          textLeftOffset += charBox.kernedWidth - charBox.width;\n          boxWidth += charBox.width;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n        if (isJustify && !timeToRender) {\n          if (this._reSpaceAndTab.test(line[i])) {\n            timeToRender = true;\n          }\n        }\n        if (!timeToRender) {\n          // if we have charSpacing, we render char by char\n          actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);\n          nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);\n          timeToRender = this._hasStyleChangedForSvg(actualStyle, nextStyle);\n        }\n        if (timeToRender) {\n          style = this._getStyleDeclaration(lineIndex, i) || { };\n          textSpans.push(this._createTextCharSpan(charsToRender, style, textLeftOffset, textTopOffset));\n          charsToRender = '';\n          actualStyle = nextStyle;\n          textLeftOffset += boxWidth;\n          boxWidth = 0;\n        }\n      }\n    },\n\n    _pushTextBgRect: function(textBgRects, color, left, top, width, height) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n      textBgRects.push(\n        '\\t\\t<rect ',\n        this._getFillAttributes(color),\n        ' x=\"',\n        toFixed(left, NUM_FRACTION_DIGITS),\n        '\" y=\"',\n        toFixed(top, NUM_FRACTION_DIGITS),\n        '\" width=\"',\n        toFixed(width, NUM_FRACTION_DIGITS),\n        '\" height=\"',\n        toFixed(height, NUM_FRACTION_DIGITS),\n        '\"></rect>\\n');\n    },\n\n    _setSVGTextLineBg: function(textBgRects, i, leftOffset, textTopOffset) {\n      var line = this._textLines[i],\n          heightOfLine = this.getHeightOfLine(i) / this.lineHeight,\n          boxWidth = 0,\n          boxStart = 0,\n          charBox, currentColor,\n          lastColor = this.getValueOfPropertyAt(i, 0, 'textBackgroundColor');\n      for (var j = 0, jlen = line.length; j < jlen; j++) {\n        charBox = this.__charBounds[i][j];\n        currentColor = this.getValueOfPropertyAt(i, j, 'textBackgroundColor');\n        if (currentColor !== lastColor) {\n          lastColor && this._pushTextBgRect(textBgRects, lastColor, leftOffset + boxStart,\n            textTopOffset, boxWidth, heightOfLine);\n          boxStart = charBox.left;\n          boxWidth = charBox.width;\n          lastColor = currentColor;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n      }\n      currentColor && this._pushTextBgRect(textBgRects, currentColor, leftOffset + boxStart,\n        textTopOffset, boxWidth, heightOfLine);\n    },\n\n    /**\n     * Adobe Illustrator (at least CS5) is unable to render rgba()-based fill values\n     * we work around it by \"moving\" alpha channel into opacity attribute and setting fill's alpha to 1\n     *\n     * @private\n     * @param {*} value\n     * @return {String}\n     */\n    _getFillAttributes: function(value) {\n      var fillColor = (value && typeof value === 'string') ? new fabric.Color(value) : '';\n      if (!fillColor || !fillColor.getSource() || fillColor.getAlpha() === 1) {\n        return 'fill=\"' + value + '\"';\n      }\n      return 'opacity=\"' + fillColor.getAlpha() + '\" fill=\"' + fillColor.setAlpha(1).toRgb() + '\"';\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLineTopOffset: function(lineIndex) {\n      var lineTopOffset = 0, lastHeight = 0;\n      for (var j = 0; j < lineIndex; j++) {\n        lineTopOffset += this.getHeightOfLine(j);\n      }\n      lastHeight = this.getHeightOfLine(j);\n      return {\n        lineTop: lineTopOffset,\n        offset: (this._fontSizeMult - this._fontSizeFraction) * lastHeight / (this.lineHeight * this._fontSizeMult)\n      };\n    },\n\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n      var svgStyle = fabric.Object.prototype.getSvgStyles.call(this, skipShadow);\n      return svgStyle + ' white-space: pre;';\n    },\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {});\n\n  /**\n   * Textbox class, based on IText, allows the user to resize the text rectangle\n   * and wraps lines automatically. Textboxes have their Y scaling locked, the\n   * user can only change width. Height is adjusted automatically based on the\n   * wrapping of lines.\n   * @class fabric.Textbox\n   * @extends fabric.IText\n   * @mixes fabric.Observable\n   * @return {fabric.Textbox} thisArg\n   * @see {@link fabric.Textbox#initialize} for constructor definition\n   */\n  fabric.Textbox = fabric.util.createClass(fabric.IText, fabric.Observable, {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'textbox',\n\n    /**\n     * Minimum width of textbox, in pixels.\n     * @type Number\n     * @default\n     */\n    minWidth: 20,\n\n    /**\n     * Minimum calculated width of a textbox, in pixels.\n     * fixed to 2 so that an empty textbox cannot go to 0\n     * and is still selectable without text.\n     * @type Number\n     * @default\n     */\n    dynamicMinWidth: 2,\n\n    /**\n     * Cached array of text wrapping.\n     * @type Array\n     */\n    __cachedLines: null,\n\n    /**\n     * Override standard Object class values\n     */\n    lockScalingFlip: true,\n\n    /**\n     * Override standard Object class values\n     * Textbox needs this on false\n     */\n    noScaleCache: false,\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Object\n     * @private\n     */\n    _dimensionAffectingProps: fabric.Text.prototype._dimensionAffectingProps.concat('width'),\n\n    /**\n     * Use this regular expression to split strings in breakable lines\n     * @private\n     */\n    _wordJoiners: /[ \\t\\r]/,\n\n    /**\n     * Use this boolean property in order to split strings that have no white space concept.\n     * this is a cheap way to help with chinese/japanese\n     * @type Boolean\n     * @since 2.6.0\n     */\n    splitByGrapheme: false,\n\n    /**\n     * Unlike superclass's version of this function, Textbox does not update\n     * its width.\n     * @private\n     * @override\n     */\n    initDimensions: function() {\n      if (this.__skipDimension) {\n        return;\n      }\n      this.isEditing && this.initDelayedCursor();\n      this.clearContextTop();\n      this._clearCache();\n      // clear dynamicMinWidth as it will be different after we re-wrap line\n      this.dynamicMinWidth = 0;\n      // wrap lines\n      this._styleMap = this._generateStyleMap(this._splitText());\n      // if after wrapping, the width is smaller than dynamicMinWidth, change the width and re-wrap\n      if (this.dynamicMinWidth > this.width) {\n        this._set('width', this.dynamicMinWidth);\n      }\n      if (this.textAlign.indexOf('justify') !== -1) {\n        // once text is measured we need to make space fatter to make justified text.\n        this.enlargeSpaces();\n      }\n      // clear cache and re-calculate height\n      this.height = this.calcTextHeight();\n      this.saveState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Generate an object that translates the style object so that it is\n     * broken up by visual lines (new lines and automatic wrapping).\n     * The original text styles object is broken up by actual lines (new lines only),\n     * which is only sufficient for Text / IText\n     * @private\n     */\n    _generateStyleMap: function(textInfo) {\n      var realLineCount     = 0,\n          realLineCharCount = 0,\n          charCount         = 0,\n          map               = {};\n\n      for (var i = 0; i < textInfo.graphemeLines.length; i++) {\n        if (textInfo.graphemeText[charCount] === '\\n' && i > 0) {\n          realLineCharCount = 0;\n          charCount++;\n          realLineCount++;\n        }\n        else if (!this.splitByGrapheme && this._reSpaceAndTab.test(textInfo.graphemeText[charCount]) && i > 0) {\n          // this case deals with space's that are removed from end of lines when wrapping\n          realLineCharCount++;\n          charCount++;\n        }\n\n        map[i] = { line: realLineCount, offset: realLineCharCount };\n\n        charCount += textInfo.graphemeLines[i].length;\n        realLineCharCount += textInfo.graphemeLines[i].length;\n      }\n\n      return map;\n    },\n\n    /**\n     * Returns true if object has a style property or has it on a specified line\n     * @param {Number} lineIndex\n     * @return {Boolean}\n     */\n    styleHas: function(property, lineIndex) {\n      if (this._styleMap && !this.isWrapping) {\n        var map = this._styleMap[lineIndex];\n        if (map) {\n          lineIndex = map.line;\n        }\n      }\n      return fabric.Text.prototype.styleHas.call(this, property, lineIndex);\n    },\n\n    /**\n     * Returns true if object has no styling or no styling in a line\n     * @param {Number} lineIndex , lineIndex is on wrapped lines.\n     * @return {Boolean}\n     */\n    isEmptyStyles: function(lineIndex) {\n      if (!this.styles) {\n        return true;\n      }\n      var offset = 0, nextLineIndex = lineIndex + 1, nextOffset, obj, shouldLimit = false,\n          map = this._styleMap[lineIndex], mapNextLine = this._styleMap[lineIndex + 1];\n      if (map) {\n        lineIndex = map.line;\n        offset = map.offset;\n      }\n      if (mapNextLine) {\n        nextLineIndex = mapNextLine.line;\n        shouldLimit = nextLineIndex === lineIndex;\n        nextOffset = mapNextLine.offset;\n      }\n      obj = typeof lineIndex === 'undefined' ? this.styles : { line: this.styles[lineIndex] };\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          if (p2 >= offset && (!shouldLimit || p2 < nextOffset)) {\n            // eslint-disable-next-line no-unused-vars\n            for (var p3 in obj[p1][p2]) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex) {\n      if (this._styleMap && !this.isWrapping) {\n        var map = this._styleMap[lineIndex];\n        if (!map) {\n          return null;\n        }\n        lineIndex = map.line;\n        charIndex = map.offset + charIndex;\n      }\n      return this.callSuper('_getStyleDeclaration', lineIndex, charIndex);\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * probably broken need a fix\n     * Returns the real style line that correspond to the wrapped lineIndex line\n     * Used just to verify if the line does exist or not.\n     * @param {Number} lineIndex\n     * @returns {Boolean} if the line exists or not\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      return !!this.styles[map.line];\n    },\n\n    /**\n     * Set the line style to an empty object so that is initialized\n     * @param {Number} lineIndex\n     * @param {Object} style\n     * @private\n     */\n    _setLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      this.styles[map.line] = {};\n    },\n\n    /**\n     * Wraps text using the 'width' property of Textbox. First this function\n     * splits text on newlines, so we preserve newlines entered by the user.\n     * Then it wraps each line using the width of the Textbox by calling\n     * _wrapLine().\n     * @param {Array} lines The string array of text that is split into lines\n     * @param {Number} desiredWidth width you want to wrap to\n     * @returns {Array} Array of lines\n     */\n    _wrapText: function(lines, desiredWidth) {\n      var wrapped = [], i;\n      this.isWrapping = true;\n      for (i = 0; i < lines.length; i++) {\n        wrapped = wrapped.concat(this._wrapLine(lines[i], i, desiredWidth));\n      }\n      this.isWrapping = false;\n      return wrapped;\n    },\n\n    /**\n     * Helper function to measure a string of text, given its lineIndex and charIndex offset\n     * it gets called when charBounds are not available yet.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {String} text\n     * @param {number} lineIndex\n     * @param {number} charOffset\n     * @returns {number}\n     * @private\n     */\n    _measureWord: function(word, lineIndex, charOffset) {\n      var width = 0, prevGrapheme, skipLeft = true;\n      charOffset = charOffset || 0;\n      for (var i = 0, len = word.length; i < len; i++) {\n        var box = this._getGraphemeBox(word[i], lineIndex, i + charOffset, prevGrapheme, skipLeft);\n        width += box.kernedWidth;\n        prevGrapheme = word[i];\n      }\n      return width;\n    },\n\n    /**\n     * Wraps a line of text using the width of the Textbox and a context.\n     * @param {Array} line The grapheme array that represent the line\n     * @param {Number} lineIndex\n     * @param {Number} desiredWidth width you want to wrap the line to\n     * @param {Number} reservedSpace space to remove from wrapping for custom functionalities\n     * @returns {Array} Array of line(s) into which the given text is wrapped\n     * to.\n     */\n    _wrapLine: function(_line, lineIndex, desiredWidth, reservedSpace) {\n      var lineWidth = 0,\n          splitByGrapheme = this.splitByGrapheme,\n          graphemeLines = [],\n          line = [],\n          // spaces in different languages?\n          words = splitByGrapheme ? fabric.util.string.graphemeSplit(_line) : _line.split(this._wordJoiners),\n          word = '',\n          offset = 0,\n          infix = splitByGrapheme ? '' : ' ',\n          wordWidth = 0,\n          infixWidth = 0,\n          largestWordWidth = 0,\n          lineJustStarted = true,\n          additionalSpace = this._getWidthOfCharSpacing(),\n          reservedSpace = reservedSpace || 0;\n      // fix a difference between split and graphemeSplit\n      if (words.length === 0) {\n        words.push([]);\n      }\n      desiredWidth -= reservedSpace;\n      for (var i = 0; i < words.length; i++) {\n        // if using splitByGrapheme words are already in graphemes.\n        word = splitByGrapheme ? words[i] : fabric.util.string.graphemeSplit(words[i]);\n        wordWidth = this._measureWord(word, lineIndex, offset);\n        offset += word.length;\n\n        lineWidth += infixWidth + wordWidth - additionalSpace;\n        if (lineWidth > desiredWidth && !lineJustStarted) {\n          graphemeLines.push(line);\n          line = [];\n          lineWidth = wordWidth;\n          lineJustStarted = true;\n        }\n        else {\n          lineWidth += additionalSpace;\n        }\n\n        if (!lineJustStarted && !splitByGrapheme) {\n          line.push(infix);\n        }\n        line = line.concat(word);\n\n        infixWidth = splitByGrapheme ? 0 : this._measureWord([infix], lineIndex, offset);\n        offset++;\n        lineJustStarted = false;\n        // keep track of largest word\n        if (wordWidth > largestWordWidth) {\n          largestWordWidth = wordWidth;\n        }\n      }\n\n      i && graphemeLines.push(line);\n\n      if (largestWordWidth + reservedSpace > this.dynamicMinWidth) {\n        this.dynamicMinWidth = largestWordWidth - additionalSpace + reservedSpace;\n      }\n      return graphemeLines;\n    },\n\n    /**\n     * Detect if the text line is ended with an hard break\n     * text and itext do not have wrapping, return false\n     * @param {Number} lineIndex text to split\n     * @return {Boolean}\n     */\n    isEndOfWrapping: function(lineIndex) {\n      if (!this._styleMap[lineIndex + 1]) {\n        // is last line, return true;\n        return true;\n      }\n      if (this._styleMap[lineIndex + 1].line !== this._styleMap[lineIndex].line) {\n        // this is last line before a line break, return true;\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Detect if a line has a linebreak and so we need to account for it when moving\n     * and counting style.\n     * @return Number\n     */\n    missingNewlineOffset: function(lineIndex) {\n      if (this.splitByGrapheme) {\n        return this.isEndOfWrapping(lineIndex) ? 1 : 0;\n      }\n      return 1;\n    },\n\n    /**\n    * Gets lines of text to render in the Textbox. This function calculates\n    * text wrapping on the fly every time it is called.\n    * @param {String} text text to split\n    * @returns {Array} Array of lines in the Textbox.\n    * @override\n    */\n    _splitTextIntoLines: function(text) {\n      var newText = fabric.Text.prototype._splitTextIntoLines.call(this, text),\n          graphemeLines = this._wrapText(newText.lines, this.width),\n          lines = new Array(graphemeLines.length);\n      for (var i = 0; i < graphemeLines.length; i++) {\n        lines[i] = graphemeLines[i].join('');\n      }\n      newText.lines = lines;\n      newText.graphemeLines = graphemeLines;\n      return newText;\n    },\n\n    getMinWidth: function() {\n      return Math.max(this.minWidth, this.dynamicMinWidth);\n    },\n\n    _removeExtraneousStyles: function() {\n      var linesToKeep = {};\n      for (var prop in this._styleMap) {\n        if (this._textLines[prop]) {\n          linesToKeep[this._styleMap[prop].line] = 1;\n        }\n      }\n      for (var prop in this.styles) {\n        if (!linesToKeep[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['minWidth', 'splitByGrapheme'].concat(propertiesToInclude));\n    }\n  });\n\n  /**\n   * Returns fabric.Textbox instance from an object representation\n   * @static\n   * @memberOf fabric.Textbox\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Textbox instance is created\n   */\n  fabric.Textbox.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Textbox', object, callback, 'text');\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var controlsUtils = fabric.controlsUtils,\n      scaleSkewStyleHandler = controlsUtils.scaleSkewCursorStyleHandler,\n      scaleStyleHandler = controlsUtils.scaleCursorStyleHandler,\n      scalingEqually = controlsUtils.scalingEqually,\n      scalingYOrSkewingX = controlsUtils.scalingYOrSkewingX,\n      scalingXOrSkewingY = controlsUtils.scalingXOrSkewingY,\n      scaleOrSkewActionName = controlsUtils.scaleOrSkewActionName,\n      objectControls = fabric.Object.prototype.controls;\n\n  objectControls.ml = new fabric.Control({\n    x: -0.5,\n    y: 0,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingXOrSkewingY,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mr = new fabric.Control({\n    x: 0.5,\n    y: 0,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingXOrSkewingY,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mb = new fabric.Control({\n    x: 0,\n    y: 0.5,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingYOrSkewingX,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mt = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingYOrSkewingX,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.tl = new fabric.Control({\n    x: -0.5,\n    y: -0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.tr = new fabric.Control({\n    x: 0.5,\n    y: -0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.bl = new fabric.Control({\n    x: -0.5,\n    y: 0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.br = new fabric.Control({\n    x: 0.5,\n    y: 0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.mtr = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    actionHandler: controlsUtils.rotationWithSnapping,\n    cursorStyleHandler: controlsUtils.rotationStyleHandler,\n    offsetY: -40,\n    withConnection: true,\n    actionName: 'rotate',\n  });\n\n  if (fabric.Textbox) {\n    // this is breaking the prototype inheritance, no time / ideas to fix it.\n    // is important to document that if you want to have all objects to have a\n    // specific custom control, you have to add it to Object prototype and to Textbox\n    // prototype. The controls are shared as references. So changes to control `tr`\n    // can still apply to all objects if needed.\n    var textBoxControls = fabric.Textbox.prototype.controls = { };\n\n    textBoxControls.mtr = objectControls.mtr;\n    textBoxControls.tr = objectControls.tr;\n    textBoxControls.br = objectControls.br;\n    textBoxControls.tl = objectControls.tl;\n    textBoxControls.bl = objectControls.bl;\n    textBoxControls.mt = objectControls.mt;\n    textBoxControls.mb = objectControls.mb;\n\n    textBoxControls.mr = new fabric.Control({\n      x: 0.5,\n      y: 0,\n      actionHandler: controlsUtils.changeWidth,\n      cursorStyleHandler: scaleSkewStyleHandler,\n      actionName: 'resizing',\n    });\n\n    textBoxControls.ml = new fabric.Control({\n      x: -0.5,\n      y: 0,\n      actionHandler: controlsUtils.changeWidth,\n      cursorStyleHandler: scaleSkewStyleHandler,\n      actionName: 'resizing',\n    });\n  }\n})();\n\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*!\n * jQuery JavaScript Library v3.6.0\n * https://jquery.com/\n *\n * Includes Sizzle.js\n * https://sizzlejs.com/\n *\n * Copyright OpenJS Foundation and other contributors\n * Released under the MIT license\n * https://jquery.org/license\n *\n * Date: 2021-03-02T17:08Z\n */\n( function( global, factory ) {\n\n\t\"use strict\";\n\n\tif ( typeof module === \"object\" && typeof module.exports === \"object\" ) {\n\n\t\t// For CommonJS and CommonJS-like environments where a proper `window`\n\t\t// is present, execute the factory and get jQuery.\n\t\t// For environments that do not have a `window` with a `document`\n\t\t// (such as Node.js), expose a factory as module.exports.\n\t\t// This accentuates the need for the creation of a real `window`.\n\t\t// e.g. var jQuery = require(\"jquery\")(window);\n\t\t// See ticket #14549 for more info.\n\t\tmodule.exports = global.document ?\n\t\t\tfactory( global, true ) :\n\t\t\tfunction( w ) {\n\t\t\t\tif ( !w.document ) {\n\t\t\t\t\tthrow new Error( \"jQuery requires a window with a document\" );\n\t\t\t\t}\n\t\t\t\treturn factory( w );\n\t\t\t};\n\t} else {\n\t\tfactory( global );\n\t}\n\n// Pass this if window is not defined yet\n} )( typeof window !== \"undefined\" ? window : this, function( window, noGlobal ) {\n\n// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1\n// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode\n// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common\n// enough that all such attempts are guarded in a try block.\n\"use strict\";\n\nvar arr = [];\n\nvar getProto = Object.getPrototypeOf;\n\nvar slice = arr.slice;\n\nvar flat = arr.flat ? function( array ) {\n\treturn arr.flat.call( array );\n} : function( array ) {\n\treturn arr.concat.apply( [], array );\n};\n\n\nvar push = arr.push;\n\nvar indexOf = arr.indexOf;\n\nvar class2type = {};\n\nvar toString = class2type.toString;\n\nvar hasOwn = class2type.hasOwnProperty;\n\nvar fnToString = hasOwn.toString;\n\nvar ObjectFunctionString = fnToString.call( Object );\n\nvar support = {};\n\nvar isFunction = function isFunction( obj ) {\n\n\t\t// Support: Chrome <=57, Firefox <=52\n\t\t// In some browsers, typeof returns \"function\" for HTML <object> elements\n\t\t// (i.e., `typeof document.createElement( \"object\" ) === \"function\"`).\n\t\t// We don't want to classify *any* DOM node as a function.\n\t\t// Support: QtWeb <=3.8.5, WebKit <=534.34, wkhtmltopdf tool <=0.12.5\n\t\t// Plus for old WebKit, typeof returns \"function\" for HTML collections\n\t\t// (e.g., `typeof document.getElementsByTagName(\"div\") === \"function\"`). (gh-4756)\n\t\treturn typeof obj === \"function\" && typeof obj.nodeType !== \"number\" &&\n\t\t\ttypeof obj.item !== \"function\";\n\t};\n\n\nvar isWindow = function isWindow( obj ) {\n\t\treturn obj != null && obj === obj.window;\n\t};\n\n\nvar document = window.document;\n\n\n\n\tvar preservedScriptAttributes = {\n\t\ttype: true,\n\t\tsrc: true,\n\t\tnonce: true,\n\t\tnoModule: true\n\t};\n\n\tfunction DOMEval( code, node, doc ) {\n\t\tdoc = doc || document;\n\n\t\tvar i, val,\n\t\t\tscript = doc.createElement( \"script\" );\n\n\t\tscript.text = code;\n\t\tif ( node ) {\n\t\t\tfor ( i in preservedScriptAttributes ) {\n\n\t\t\t\t// Support: Firefox 64+, Edge 18+\n\t\t\t\t// Some browsers don't support the \"nonce\" property on scripts.\n\t\t\t\t// On the other hand, just using `getAttribute` is not enough as\n\t\t\t\t// the `nonce` attribute is reset to an empty string whenever it\n\t\t\t\t// becomes browsing-context connected.\n\t\t\t\t// See https://github.com/whatwg/html/issues/2369\n\t\t\t\t// See https://html.spec.whatwg.org/#nonce-attributes\n\t\t\t\t// The `node.getAttribute` check was added for the sake of\n\t\t\t\t// `jQuery.globalEval` so that it can fake a nonce-containing node\n\t\t\t\t// via an object.\n\t\t\t\tval = node[ i ] || node.getAttribute && node.getAttribute( i );\n\t\t\t\tif ( val ) {\n\t\t\t\t\tscript.setAttribute( i, val );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdoc.head.appendChild( script ).parentNode.removeChild( script );\n\t}\n\n\nfunction toType( obj ) {\n\tif ( obj == null ) {\n\t\treturn obj + \"\";\n\t}\n\n\t// Support: Android <=2.3 only (functionish RegExp)\n\treturn typeof obj === \"object\" || typeof obj === \"function\" ?\n\t\tclass2type[ toString.call( obj ) ] || \"object\" :\n\t\ttypeof obj;\n}\n/* global Symbol */\n// Defining this global in .eslintrc.json would create a danger of using the global\n// unguarded in another place, it seems safer to define global only for this module\n\n\n\nvar\n\tversion = \"3.6.0\",\n\n\t// Define a local copy of jQuery\n\tjQuery = function( selector, context ) {\n\n\t\t// The jQuery object is actually just the init constructor 'enhanced'\n\t\t// Need init if jQuery is called (just allow error to be thrown if not included)\n\t\treturn new jQuery.fn.init( selector, context );\n\t};\n\njQuery.fn = jQuery.prototype = {\n\n\t// The current version of jQuery being used\n\tjquery: version,\n\n\tconstructor: jQuery,\n\n\t// The default length of a jQuery object is 0\n\tlength: 0,\n\n\ttoArray: function() {\n\t\treturn slice.call( this );\n\t},\n\n\t// Get the Nth element in the matched element set OR\n\t// Get the whole matched element set as a clean array\n\tget: function( num ) {\n\n\t\t// Return all the elements in a clean array\n\t\tif ( num == null ) {\n\t\t\treturn slice.call( this );\n\t\t}\n\n\t\t// Return just the one element from the set\n\t\treturn num < 0 ? this[ num + this.length ] : this[ num ];\n\t},\n\n\t// Take an array of elements and push it onto the stack\n\t// (returning the new matched element set)\n\tpushStack: function( elems ) {\n\n\t\t// Build a new jQuery matched element set\n\t\tvar ret = jQuery.merge( this.constructor(), elems );\n\n\t\t// Add the old object onto the stack (as a reference)\n\t\tret.prevObject = this;\n\n\t\t// Return the newly-formed element set\n\t\treturn ret;\n\t},\n\n\t// Execute a callback for every element in the matched set.\n\teach: function( callback ) {\n\t\treturn jQuery.each( this, callback );\n\t},\n\n\tmap: function( callback ) {\n\t\treturn this.pushStack( jQuery.map( this, function( elem, i ) {\n\t\t\treturn callback.call( elem, i, elem );\n\t\t} ) );\n\t},\n\n\tslice: function() {\n\t\treturn this.pushStack( slice.apply( this, arguments ) );\n\t},\n\n\tfirst: function() {\n\t\treturn this.eq( 0 );\n\t},\n\n\tlast: function() {\n\t\treturn this.eq( -1 );\n\t},\n\n\teven: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn ( i + 1 ) % 2;\n\t\t} ) );\n\t},\n\n\todd: function() {\n\t\treturn this.pushStack( jQuery.grep( this, function( _elem, i ) {\n\t\t\treturn i % 2;\n\t\t} ) );\n\t},\n\n\teq: function( i ) {\n\t\tvar len = this.length,\n\t\t\tj = +i + ( i < 0 ? len : 0 );\n\t\treturn this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );\n\t},\n\n\tend: function() {\n\t\treturn this.prevObject || this.constructor();\n\t},\n\n\t// For internal use only.\n\t// Behaves like an Array's method, not like a jQuery method.\n\tpush: push,\n\tsort: arr.sort,\n\tsplice: arr.splice\n};\n\njQuery.extend = jQuery.fn.extend = function() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[ 0 ] || {},\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif ( typeof target === \"boolean\" ) {\n\t\tdeep = target;\n\n\t\t// Skip the boolean and the target\n\t\ttarget = arguments[ i ] || {};\n\t\ti++;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif ( typeof target !== \"object\" && !isFunction( target ) ) {\n\t\ttarget = {};\n\t}\n\n\t// Extend jQuery itself if only one argument is passed\n\tif ( i === length ) {\n\t\ttarget = this;\n\t\ti--;\n\t}\n\n\tfor ( ; i < length; i++ ) {\n\n\t\t// Only deal with non-null/undefined values\n\t\tif ( ( options = arguments[ i ] ) != null ) {\n\n\t\t\t// Extend the base object\n\t\t\tfor ( name in options ) {\n\t\t\t\tcopy = options[ name ];\n\n\t\t\t\t// Prevent Object.prototype pollution\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif ( name === \"__proto__\" || target === copy ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\tif ( deep && copy && ( jQuery.isPlainObject( copy ) ||\n\t\t\t\t\t( copyIsArray = Array.isArray( copy ) ) ) ) {\n\t\t\t\t\tsrc = target[ name ];\n\n\t\t\t\t\t// Ensure proper type for the source value\n\t\t\t\t\tif ( copyIsArray && !Array.isArray( src ) ) {\n\t\t\t\t\t\tclone = [];\n\t\t\t\t\t} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {\n\t\t\t\t\t\tclone = {};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src;\n\t\t\t\t\t}\n\t\t\t\t\tcopyIsArray = false;\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[ name ] = jQuery.extend( deep, clone, copy );\n\n\t\t\t\t// Don't bring in undefined values\n\t\t\t\t} else if ( copy !== undefined ) {\n\t\t\t\t\ttarget[ name ] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\njQuery.extend( {\n\n\t// Unique for each copy of jQuery on the page\n\texpando: \"jQuery\" + ( version + Math.random() ).replace( /\\D/g, \"\" ),\n\n\t// Assume jQuery is ready without the ready module\n\tisReady: true,\n\n\terror: function( msg ) {\n\t\tthrow new Error( msg );\n\t},\n\n\tnoop: function() {},\n\n\tisPlainObject: function( obj ) {\n\t\tvar proto, Ctor;\n\n\t\t// Detect obvious negatives\n\t\t// Use toString instead of jQuery.type to catch host objects\n\t\tif ( !obj || toString.call( obj ) !== \"[object Object]\" ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tproto = getProto( obj );\n\n\t\t// Objects with no prototype (e.g., `Object.create( null )`) are plain\n\t\tif ( !proto ) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Objects with prototype are plain iff they were constructed by a global Object function\n\t\tCtor = hasOwn.call( proto, \"constructor\" ) && proto.constructor;\n\t\treturn typeof Ctor === \"function\" && fnToString.call( Ctor ) === ObjectFunctionString;\n\t},\n\n\tisEmptyObject: function( obj ) {\n\t\tvar name;\n\n\t\tfor ( name in obj ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\n\t// Evaluates a script in a provided context; falls back to the global one\n\t// if not specified.\n\tglobalEval: function( code, options, doc ) {\n\t\tDOMEval( code, { nonce: options && options.nonce }, doc );\n\t},\n\n\teach: function( obj, callback ) {\n\t\tvar length, i = 0;\n\n\t\tif ( isArrayLike( obj ) ) {\n\t\t\tlength = obj.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor ( i in obj ) {\n\t\t\t\tif ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn obj;\n\t},\n\n\t// results is for internal usage only\n\tmakeArray: function( arr, results ) {\n\t\tvar ret = results || [];\n\n\t\tif ( arr != null ) {\n\t\t\tif ( isArrayLike( Object( arr ) ) ) {\n\t\t\t\tjQuery.merge( ret,\n\t\t\t\t\ttypeof arr === \"string\" ?\n\t\t\t\t\t\t[ arr ] : arr\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tpush.call( ret, arr );\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tinArray: function( elem, arr, i ) {\n\t\treturn arr == null ? -1 : indexOf.call( arr, elem, i );\n\t},\n\n\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t// push.apply(_, arraylike) throws on ancient WebKit\n\tmerge: function( first, second ) {\n\t\tvar len = +second.length,\n\t\t\tj = 0,\n\t\t\ti = first.length;\n\n\t\tfor ( ; j < len; j++ ) {\n\t\t\tfirst[ i++ ] = second[ j ];\n\t\t}\n\n\t\tfirst.length = i;\n\n\t\treturn first;\n\t},\n\n\tgrep: function( elems, callback, invert ) {\n\t\tvar callbackInverse,\n\t\t\tmatches = [],\n\t\t\ti = 0,\n\t\t\tlength = elems.length,\n\t\t\tcallbackExpect = !invert;\n\n\t\t// Go through the array, only saving the items\n\t\t// that pass the validator function\n\t\tfor ( ; i < length; i++ ) {\n\t\t\tcallbackInverse = !callback( elems[ i ], i );\n\t\t\tif ( callbackInverse !== callbackExpect ) {\n\t\t\t\tmatches.push( elems[ i ] );\n\t\t\t}\n\t\t}\n\n\t\treturn matches;\n\t},\n\n\t// arg is for internal usage only\n\tmap: function( elems, callback, arg ) {\n\t\tvar length, value,\n\t\t\ti = 0,\n\t\t\tret = [];\n\n\t\t// Go through the array, translating each of the items to their new values\n\t\tif ( isArrayLike( elems ) ) {\n\t\t\tlength = elems.length;\n\t\t\tfor ( ; i < length; i++ ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Go through every key on the object,\n\t\t} else {\n\t\t\tfor ( i in elems ) {\n\t\t\t\tvalue = callback( elems[ i ], i, arg );\n\n\t\t\t\tif ( value != null ) {\n\t\t\t\t\tret.push( value );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Flatten any nested arrays\n\t\treturn flat( ret );\n\t},\n\n\t// A global GUID counter for objects\n\tguid: 1,\n\n\t// jQuery.support is not used in Core but other projects attach their\n\t// properties to it so it needs to exist.\n\tsupport: support\n} );\n\nif ( typeof Symbol === \"function\" ) {\n\tjQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];\n}\n\n// Populate the class2type map\njQuery.each( \"Boolean Number String Function Array Date RegExp Object Error Symbol\".split( \" \" ),\n\tfunction( _i, name ) {\n\t\tclass2type[ \"[object \" + name + \"]\" ] = name.toLowerCase();\n\t} );\n\nfunction isArrayLike( obj ) {\n\n\t// Support: real iOS 8.2 only (not reproducible in simulator)\n\t// `in` check used to prevent JIT error (gh-2145)\n\t// hasOwn isn't used here due to false negatives\n\t// regarding Nodelist length in IE\n\tvar length = !!obj && \"length\" in obj && obj.length,\n\t\ttype = toType( obj );\n\n\tif ( isFunction( obj ) || isWindow( obj ) ) {\n\t\treturn false;\n\t}\n\n\treturn type === \"array\" || length === 0 ||\n\t\ttypeof length === \"number\" && length > 0 && ( length - 1 ) in obj;\n}\nvar Sizzle =\n/*!\n * Sizzle CSS Selector Engine v2.3.6\n * https://sizzlejs.com/\n *\n * Copyright JS Foundation and other contributors\n * Released under the MIT license\n * https://js.foundation/\n *\n * Date: 2021-02-16\n */\n( function( window ) {\nvar i,\n\tsupport,\n\tExpr,\n\tgetText,\n\tisXML,\n\ttokenize,\n\tcompile,\n\tselect,\n\toutermostContext,\n\tsortInput,\n\thasDuplicate,\n\n\t// Local document vars\n\tsetDocument,\n\tdocument,\n\tdocElem,\n\tdocumentIsHTML,\n\trbuggyQSA,\n\trbuggyMatches,\n\tmatches,\n\tcontains,\n\n\t// Instance-specific data\n\texpando = \"sizzle\" + 1 * new Date(),\n\tpreferredDoc = window.document,\n\tdirruns = 0,\n\tdone = 0,\n\tclassCache = createCache(),\n\ttokenCache = createCache(),\n\tcompilerCache = createCache(),\n\tnonnativeSelectorCache = createCache(),\n\tsortOrder = function( a, b ) {\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t}\n\t\treturn 0;\n\t},\n\n\t// Instance methods\n\thasOwn = ( {} ).hasOwnProperty,\n\tarr = [],\n\tpop = arr.pop,\n\tpushNative = arr.push,\n\tpush = arr.push,\n\tslice = arr.slice,\n\n\t// Use a stripped-down indexOf as it's faster than native\n\t// https://jsperf.com/thor-indexof-vs-for/5\n\tindexOf = function( list, elem ) {\n\t\tvar i = 0,\n\t\t\tlen = list.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tif ( list[ i ] === elem ) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t},\n\n\tbooleans = \"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|\" +\n\t\t\"ismap|loop|multiple|open|readonly|required|scoped\",\n\n\t// Regular expressions\n\n\t// http://www.w3.org/TR/css3-selectors/#whitespace\n\twhitespace = \"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",\n\n\t// https://www.w3.org/TR/css-syntax-3/#ident-token-diagram\n\tidentifier = \"(?:\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace +\n\t\t\"?|\\\\\\\\[^\\\\r\\\\n\\\\f]|[\\\\w-]|[^\\0-\\\\x7f])+\",\n\n\t// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors\n\tattributes = \"\\\\[\" + whitespace + \"*(\" + identifier + \")(?:\" + whitespace +\n\n\t\t// Operator (capture 2)\n\t\t\"*([*^$|!~]?=)\" + whitespace +\n\n\t\t// \"Attribute values must be CSS identifiers [capture 5]\n\t\t// or strings [capture 3 or capture 4]\"\n\t\t\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\" + identifier + \"))|)\" +\n\t\twhitespace + \"*\\\\]\",\n\n\tpseudos = \":(\" + identifier + \")(?:\\\\((\" +\n\n\t\t// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:\n\t\t// 1. quoted (capture 3; capture 4 or capture 5)\n\t\t\"('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|\" +\n\n\t\t// 2. simple (capture 6)\n\t\t\"((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\" + attributes + \")*)|\" +\n\n\t\t// 3. anything else (capture 2)\n\t\t\".*\" +\n\t\t\")\\\\)|)\",\n\n\t// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter\n\trwhitespace = new RegExp( whitespace + \"+\", \"g\" ),\n\trtrim = new RegExp( \"^\" + whitespace + \"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\" +\n\t\twhitespace + \"+$\", \"g\" ),\n\n\trcomma = new RegExp( \"^\" + whitespace + \"*,\" + whitespace + \"*\" ),\n\trcombinators = new RegExp( \"^\" + whitespace + \"*([>+~]|\" + whitespace + \")\" + whitespace +\n\t\t\"*\" ),\n\trdescend = new RegExp( whitespace + \"|>\" ),\n\n\trpseudo = new RegExp( pseudos ),\n\tridentifier = new RegExp( \"^\" + identifier + \"$\" ),\n\n\tmatchExpr = {\n\t\t\"ID\": new RegExp( \"^#(\" + identifier + \")\" ),\n\t\t\"CLASS\": new RegExp( \"^\\\\.(\" + identifier + \")\" ),\n\t\t\"TAG\": new RegExp( \"^(\" + identifier + \"|[*])\" ),\n\t\t\"ATTR\": new RegExp( \"^\" + attributes ),\n\t\t\"PSEUDO\": new RegExp( \"^\" + pseudos ),\n\t\t\"CHILD\": new RegExp( \"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\" +\n\t\t\twhitespace + \"*(even|odd|(([+-]|)(\\\\d*)n|)\" + whitespace + \"*(?:([+-]|)\" +\n\t\t\twhitespace + \"*(\\\\d+)|))\" + whitespace + \"*\\\\)|)\", \"i\" ),\n\t\t\"bool\": new RegExp( \"^(?:\" + booleans + \")$\", \"i\" ),\n\n\t\t// For use in libraries implementing .is()\n\t\t// We use this for POS matching in `select`\n\t\t\"needsContext\": new RegExp( \"^\" + whitespace +\n\t\t\t\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\" + whitespace +\n\t\t\t\"*((?:-\\\\d)?\\\\d*)\" + whitespace + \"*\\\\)|)(?=[^-]|$)\", \"i\" )\n\t},\n\n\trhtml = /HTML$/i,\n\trinputs = /^(?:input|select|textarea|button)$/i,\n\trheader = /^h\\d$/i,\n\n\trnative = /^[^{]+\\{\\s*\\[native \\w/,\n\n\t// Easily-parseable/retrievable ID or TAG or CLASS selectors\n\trquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,\n\n\trsibling = /[+~]/,\n\n\t// CSS escapes\n\t// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters\n\trunescape = new RegExp( \"\\\\\\\\[\\\\da-fA-F]{1,6}\" + whitespace + \"?|\\\\\\\\([^\\\\r\\\\n\\\\f])\", \"g\" ),\n\tfunescape = function( escape, nonHex ) {\n\t\tvar high = \"0x\" + escape.slice( 1 ) - 0x10000;\n\n\t\treturn nonHex ?\n\n\t\t\t// Strip the backslash prefix from a non-hex escape sequence\n\t\t\tnonHex :\n\n\t\t\t// Replace a hexadecimal escape sequence with the encoded Unicode code point\n\t\t\t// Support: IE <=11+\n\t\t\t// For values outside the Basic Multilingual Plane (BMP), manually construct a\n\t\t\t// surrogate pair\n\t\t\thigh < 0 ?\n\t\t\t\tString.fromCharCode( high + 0x10000 ) :\n\t\t\t\tString.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );\n\t},\n\n\t// CSS string/identifier serialization\n\t// https://drafts.csswg.org/cssom/#common-serializing-idioms\n\trcssescape = /([\\0-\\x1f\\x7f]|^-?\\d)|^-$|[^\\0-\\x1f\\x7f-\\uFFFF\\w-]/g,\n\tfcssescape = function( ch, asCodePoint ) {\n\t\tif ( asCodePoint ) {\n\n\t\t\t// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER\n\t\t\tif ( ch === \"\\0\" ) {\n\t\t\t\treturn \"\\uFFFD\";\n\t\t\t}\n\n\t\t\t// Control characters and (dependent upon position) numbers get escaped as code points\n\t\t\treturn ch.slice( 0, -1 ) + \"\\\\\" +\n\t\t\t\tch.charCodeAt( ch.length - 1 ).toString( 16 ) + \" \";\n\t\t}\n\n\t\t// Other potentially-special ASCII characters get backslash-escaped\n\t\treturn \"\\\\\" + ch;\n\t},\n\n\t// Used for iframes\n\t// See setDocument()\n\t// Removing the function wrapper causes a \"Permission Denied\"\n\t// error in IE\n\tunloadHandler = function() {\n\t\tsetDocument();\n\t},\n\n\tinDisabledFieldset = addCombinator(\n\t\tfunction( elem ) {\n\t\t\treturn elem.disabled === true && elem.nodeName.toLowerCase() === \"fieldset\";\n\t\t},\n\t\t{ dir: \"parentNode\", next: \"legend\" }\n\t);\n\n// Optimize for push.apply( _, NodeList )\ntry {\n\tpush.apply(\n\t\t( arr = slice.call( preferredDoc.childNodes ) ),\n\t\tpreferredDoc.childNodes\n\t);\n\n\t// Support: Android<4.0\n\t// Detect silently failing push.apply\n\t// eslint-disable-next-line no-unused-expressions\n\tarr[ preferredDoc.childNodes.length ].nodeType;\n} catch ( e ) {\n\tpush = { apply: arr.length ?\n\n\t\t// Leverage slice if possible\n\t\tfunction( target, els ) {\n\t\t\tpushNative.apply( target, slice.call( els ) );\n\t\t} :\n\n\t\t// Support: IE<9\n\t\t// Otherwise append directly\n\t\tfunction( target, els ) {\n\t\t\tvar j = target.length,\n\t\t\t\ti = 0;\n\n\t\t\t// Can't trust NodeList.length\n\t\t\twhile ( ( target[ j++ ] = els[ i++ ] ) ) {}\n\t\t\ttarget.length = j - 1;\n\t\t}\n\t};\n}\n\nfunction Sizzle( selector, context, results, seed ) {\n\tvar m, i, elem, nid, match, groups, newSelector,\n\t\tnewContext = context && context.ownerDocument,\n\n\t\t// nodeType defaults to 9, since context defaults to document\n\t\tnodeType = context ? context.nodeType : 9;\n\n\tresults = results || [];\n\n\t// Return early from calls with invalid selector or context\n\tif ( typeof selector !== \"string\" || !selector ||\n\t\tnodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {\n\n\t\treturn results;\n\t}\n\n\t// Try to shortcut find operations (as opposed to filters) in HTML documents\n\tif ( !seed ) {\n\t\tsetDocument( context );\n\t\tcontext = context || document;\n\n\t\tif ( documentIsHTML ) {\n\n\t\t\t// If the selector is sufficiently simple, try using a \"get*By*\" DOM method\n\t\t\t// (excepting DocumentFragment context, where the methods don't exist)\n\t\t\tif ( nodeType !== 11 && ( match = rquickExpr.exec( selector ) ) ) {\n\n\t\t\t\t// ID selector\n\t\t\t\tif ( ( m = match[ 1 ] ) ) {\n\n\t\t\t\t\t// Document context\n\t\t\t\t\tif ( nodeType === 9 ) {\n\t\t\t\t\t\tif ( ( elem = context.getElementById( m ) ) ) {\n\n\t\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\t\tif ( elem.id === m ) {\n\t\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t// Element context\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Support: IE, Opera, Webkit\n\t\t\t\t\t\t// TODO: identify versions\n\t\t\t\t\t\t// getElementById can match elements by name instead of ID\n\t\t\t\t\t\tif ( newContext && ( elem = newContext.getElementById( m ) ) &&\n\t\t\t\t\t\t\tcontains( context, elem ) &&\n\t\t\t\t\t\t\telem.id === m ) {\n\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\treturn results;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t// Type selector\n\t\t\t\t} else if ( match[ 2 ] ) {\n\t\t\t\t\tpush.apply( results, context.getElementsByTagName( selector ) );\n\t\t\t\t\treturn results;\n\n\t\t\t\t// Class selector\n\t\t\t\t} else if ( ( m = match[ 3 ] ) && support.getElementsByClassName &&\n\t\t\t\t\tcontext.getElementsByClassName ) {\n\n\t\t\t\t\tpush.apply( results, context.getElementsByClassName( m ) );\n\t\t\t\t\treturn results;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Take advantage of querySelectorAll\n\t\t\tif ( support.qsa &&\n\t\t\t\t!nonnativeSelectorCache[ selector + \" \" ] &&\n\t\t\t\t( !rbuggyQSA || !rbuggyQSA.test( selector ) ) &&\n\n\t\t\t\t// Support: IE 8 only\n\t\t\t\t// Exclude object elements\n\t\t\t\t( nodeType !== 1 || context.nodeName.toLowerCase() !== \"object\" ) ) {\n\n\t\t\t\tnewSelector = selector;\n\t\t\t\tnewContext = context;\n\n\t\t\t\t// qSA considers elements outside a scoping root when evaluating child or\n\t\t\t\t// descendant combinators, which is not what we want.\n\t\t\t\t// In such cases, we work around the behavior by prefixing every selector in the\n\t\t\t\t// list with an ID selector referencing the scope context.\n\t\t\t\t// The technique has to be used as well when a leading combinator is used\n\t\t\t\t// as such selectors are not recognized by querySelectorAll.\n\t\t\t\t// Thanks to Andrew Dupont for this technique.\n\t\t\t\tif ( nodeType === 1 &&\n\t\t\t\t\t( rdescend.test( selector ) || rcombinators.test( selector ) ) ) {\n\n\t\t\t\t\t// Expand context for sibling selectors\n\t\t\t\t\tnewContext = rsibling.test( selector ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext;\n\n\t\t\t\t\t// We can use :scope instead of the ID hack if the browser\n\t\t\t\t\t// supports it & if we're not changing the context.\n\t\t\t\t\tif ( newContext !== context || !support.scope ) {\n\n\t\t\t\t\t\t// Capture the context ID, setting it first if necessary\n\t\t\t\t\t\tif ( ( nid = context.getAttribute( \"id\" ) ) ) {\n\t\t\t\t\t\t\tnid = nid.replace( rcssescape, fcssescape );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontext.setAttribute( \"id\", ( nid = expando ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prefix every selector in the list\n\t\t\t\t\tgroups = tokenize( selector );\n\t\t\t\t\ti = groups.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tgroups[ i ] = ( nid ? \"#\" + nid : \":scope\" ) + \" \" +\n\t\t\t\t\t\t\ttoSelector( groups[ i ] );\n\t\t\t\t\t}\n\t\t\t\t\tnewSelector = groups.join( \",\" );\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tpush.apply( results,\n\t\t\t\t\t\tnewContext.querySelectorAll( newSelector )\n\t\t\t\t\t);\n\t\t\t\t\treturn results;\n\t\t\t\t} catch ( qsaError ) {\n\t\t\t\t\tnonnativeSelectorCache( selector, true );\n\t\t\t\t} finally {\n\t\t\t\t\tif ( nid === expando ) {\n\t\t\t\t\t\tcontext.removeAttribute( \"id\" );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// All others\n\treturn select( selector.replace( rtrim, \"$1\" ), context, results, seed );\n}\n\n/**\n * Create key-value caches of limited size\n * @returns {function(string, object)} Returns the Object data after storing it on itself with\n *\tproperty name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)\n *\tdeleting the oldest entry\n */\nfunction createCache() {\n\tvar keys = [];\n\n\tfunction cache( key, value ) {\n\n\t\t// Use (key + \" \") to avoid collision with native prototype properties (see Issue #157)\n\t\tif ( keys.push( key + \" \" ) > Expr.cacheLength ) {\n\n\t\t\t// Only keep the most recent entries\n\t\t\tdelete cache[ keys.shift() ];\n\t\t}\n\t\treturn ( cache[ key + \" \" ] = value );\n\t}\n\treturn cache;\n}\n\n/**\n * Mark a function for special use by Sizzle\n * @param {Function} fn The function to mark\n */\nfunction markFunction( fn ) {\n\tfn[ expando ] = true;\n\treturn fn;\n}\n\n/**\n * Support testing using an element\n * @param {Function} fn Passed the created element and returns a boolean result\n */\nfunction assert( fn ) {\n\tvar el = document.createElement( \"fieldset\" );\n\n\ttry {\n\t\treturn !!fn( el );\n\t} catch ( e ) {\n\t\treturn false;\n\t} finally {\n\n\t\t// Remove from its parent by default\n\t\tif ( el.parentNode ) {\n\t\t\tel.parentNode.removeChild( el );\n\t\t}\n\n\t\t// release memory in IE\n\t\tel = null;\n\t}\n}\n\n/**\n * Adds the same handler for all of the specified attrs\n * @param {String} attrs Pipe-separated list of attributes\n * @param {Function} handler The method that will be applied\n */\nfunction addHandle( attrs, handler ) {\n\tvar arr = attrs.split( \"|\" ),\n\t\ti = arr.length;\n\n\twhile ( i-- ) {\n\t\tExpr.attrHandle[ arr[ i ] ] = handler;\n\t}\n}\n\n/**\n * Checks document order of two siblings\n * @param {Element} a\n * @param {Element} b\n * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b\n */\nfunction siblingCheck( a, b ) {\n\tvar cur = b && a,\n\t\tdiff = cur && a.nodeType === 1 && b.nodeType === 1 &&\n\t\t\ta.sourceIndex - b.sourceIndex;\n\n\t// Use IE sourceIndex if available on both nodes\n\tif ( diff ) {\n\t\treturn diff;\n\t}\n\n\t// Check if b follows a\n\tif ( cur ) {\n\t\twhile ( ( cur = cur.nextSibling ) ) {\n\t\t\tif ( cur === b ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn a ? 1 : -1;\n}\n\n/**\n * Returns a function to use in pseudos for input types\n * @param {String} type\n */\nfunction createInputPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn name === \"input\" && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for buttons\n * @param {String} type\n */\nfunction createButtonPseudo( type ) {\n\treturn function( elem ) {\n\t\tvar name = elem.nodeName.toLowerCase();\n\t\treturn ( name === \"input\" || name === \"button\" ) && elem.type === type;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for :enabled/:disabled\n * @param {Boolean} disabled true for :disabled; false for :enabled\n */\nfunction createDisabledPseudo( disabled ) {\n\n\t// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable\n\treturn function( elem ) {\n\n\t\t// Only certain elements can match :enabled or :disabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled\n\t\t// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled\n\t\tif ( \"form\" in elem ) {\n\n\t\t\t// Check for inherited disabledness on relevant non-disabled elements:\n\t\t\t// * listed form-associated elements in a disabled fieldset\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#category-listed\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled\n\t\t\t// * option elements in a disabled optgroup\n\t\t\t//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled\n\t\t\t// All such elements have a \"form\" property.\n\t\t\tif ( elem.parentNode && elem.disabled === false ) {\n\n\t\t\t\t// Option elements defer to a parent optgroup if present\n\t\t\t\tif ( \"label\" in elem ) {\n\t\t\t\t\tif ( \"label\" in elem.parentNode ) {\n\t\t\t\t\t\treturn elem.parentNode.disabled === disabled;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn elem.disabled === disabled;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Support: IE 6 - 11\n\t\t\t\t// Use the isDisabled shortcut property to check for disabled fieldset ancestors\n\t\t\t\treturn elem.isDisabled === disabled ||\n\n\t\t\t\t\t// Where there is no isDisabled, check manually\n\t\t\t\t\t/* jshint -W018 */\n\t\t\t\t\telem.isDisabled !== !disabled &&\n\t\t\t\t\tinDisabledFieldset( elem ) === disabled;\n\t\t\t}\n\n\t\t\treturn elem.disabled === disabled;\n\n\t\t// Try to winnow out elements that can't be disabled before trusting the disabled property.\n\t\t// Some victims get caught in our net (label, legend, menu, track), but it shouldn't\n\t\t// even exist on them, let alone have a boolean value.\n\t\t} else if ( \"label\" in elem ) {\n\t\t\treturn elem.disabled === disabled;\n\t\t}\n\n\t\t// Remaining elements are neither :enabled nor :disabled\n\t\treturn false;\n\t};\n}\n\n/**\n * Returns a function to use in pseudos for positionals\n * @param {Function} fn\n */\nfunction createPositionalPseudo( fn ) {\n\treturn markFunction( function( argument ) {\n\t\targument = +argument;\n\t\treturn markFunction( function( seed, matches ) {\n\t\t\tvar j,\n\t\t\t\tmatchIndexes = fn( [], seed.length, argument ),\n\t\t\t\ti = matchIndexes.length;\n\n\t\t\t// Match elements found at the specified indexes\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( seed[ ( j = matchIndexes[ i ] ) ] ) {\n\t\t\t\t\tseed[ j ] = !( matches[ j ] = seed[ j ] );\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t} );\n}\n\n/**\n * Checks a node for validity as a Sizzle context\n * @param {Element|Object=} context\n * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value\n */\nfunction testContext( context ) {\n\treturn context && typeof context.getElementsByTagName !== \"undefined\" && context;\n}\n\n// Expose support vars for convenience\nsupport = Sizzle.support = {};\n\n/**\n * Detects XML nodes\n * @param {Element|Object} elem An element or a document\n * @returns {Boolean} True iff elem is a non-HTML XML node\n */\nisXML = Sizzle.isXML = function( elem ) {\n\tvar namespace = elem && elem.namespaceURI,\n\t\tdocElem = elem && ( elem.ownerDocument || elem ).documentElement;\n\n\t// Support: IE <=8\n\t// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes\n\t// https://bugs.jquery.com/ticket/4833\n\treturn !rhtml.test( namespace || docElem && docElem.nodeName || \"HTML\" );\n};\n\n/**\n * Sets document-related variables once based on the current document\n * @param {Element|Object} [doc] An element or document object to use to set the document\n * @returns {Object} Returns the current document\n */\nsetDocument = Sizzle.setDocument = function( node ) {\n\tvar hasCompare, subWindow,\n\t\tdoc = node ? node.ownerDocument || node : preferredDoc;\n\n\t// Return early if doc is invalid or already selected\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( doc == document || doc.nodeType !== 9 || !doc.documentElement ) {\n\t\treturn document;\n\t}\n\n\t// Update global variables\n\tdocument = doc;\n\tdocElem = document.documentElement;\n\tdocumentIsHTML = !isXML( document );\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+\n\t// Accessing iframe documents after unload throws \"permission denied\" errors (jQuery #13936)\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( preferredDoc != document &&\n\t\t( subWindow = document.defaultView ) && subWindow.top !== subWindow ) {\n\n\t\t// Support: IE 11, Edge\n\t\tif ( subWindow.addEventListener ) {\n\t\t\tsubWindow.addEventListener( \"unload\", unloadHandler, false );\n\n\t\t// Support: IE 9 - 10 only\n\t\t} else if ( subWindow.attachEvent ) {\n\t\t\tsubWindow.attachEvent( \"onunload\", unloadHandler );\n\t\t}\n\t}\n\n\t// Support: IE 8 - 11+, Edge 12 - 18+, Chrome <=16 - 25 only, Firefox <=3.6 - 31 only,\n\t// Safari 4 - 5 only, Opera <=11.6 - 12.x only\n\t// IE/Edge & older browsers don't support the :scope pseudo-class.\n\t// Support: Safari 6.0 only\n\t// Safari 6.0 supports :scope but it's an alias of :root there.\n\tsupport.scope = assert( function( el ) {\n\t\tdocElem.appendChild( el ).appendChild( document.createElement( \"div\" ) );\n\t\treturn typeof el.querySelectorAll !== \"undefined\" &&\n\t\t\t!el.querySelectorAll( \":scope fieldset div\" ).length;\n\t} );\n\n\t/* Attributes\n\t---------------------------------------------------------------------- */\n\n\t// Support: IE<8\n\t// Verify that getAttribute really returns attributes and not properties\n\t// (excepting IE8 booleans)\n\tsupport.attributes = assert( function( el ) {\n\t\tel.className = \"i\";\n\t\treturn !el.getAttribute( \"className\" );\n\t} );\n\n\t/* getElement(s)By*\n\t---------------------------------------------------------------------- */\n\n\t// Check if getElementsByTagName(\"*\") returns only elements\n\tsupport.getElementsByTagName = assert( function( el ) {\n\t\tel.appendChild( document.createComment( \"\" ) );\n\t\treturn !el.getElementsByTagName( \"*\" ).length;\n\t} );\n\n\t// Support: IE<9\n\tsupport.getElementsByClassName = rnative.test( document.getElementsByClassName );\n\n\t// Support: IE<10\n\t// Check if getElementById returns elements by name\n\t// The broken getElementById methods don't pick up programmatically-set names,\n\t// so use a roundabout getElementsByName test\n\tsupport.getById = assert( function( el ) {\n\t\tdocElem.appendChild( el ).id = expando;\n\t\treturn !document.getElementsByName || !document.getElementsByName( expando ).length;\n\t} );\n\n\t// ID filter and find\n\tif ( support.getById ) {\n\t\tExpr.filter[ \"ID\" ] = function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn elem.getAttribute( \"id\" ) === attrId;\n\t\t\t};\n\t\t};\n\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar elem = context.getElementById( id );\n\t\t\t\treturn elem ? [ elem ] : [];\n\t\t\t}\n\t\t};\n\t} else {\n\t\tExpr.filter[ \"ID\" ] =  function( id ) {\n\t\t\tvar attrId = id.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\tvar node = typeof elem.getAttributeNode !== \"undefined\" &&\n\t\t\t\t\telem.getAttributeNode( \"id\" );\n\t\t\t\treturn node && node.value === attrId;\n\t\t\t};\n\t\t};\n\n\t\t// Support: IE 6 - 7 only\n\t\t// getElementById is not reliable as a find shortcut\n\t\tExpr.find[ \"ID\" ] = function( id, context ) {\n\t\t\tif ( typeof context.getElementById !== \"undefined\" && documentIsHTML ) {\n\t\t\t\tvar node, i, elems,\n\t\t\t\t\telem = context.getElementById( id );\n\n\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t// Verify the id attribute\n\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fall back on getElementsByName\n\t\t\t\t\telems = context.getElementsByName( id );\n\t\t\t\t\ti = 0;\n\t\t\t\t\twhile ( ( elem = elems[ i++ ] ) ) {\n\t\t\t\t\t\tnode = elem.getAttributeNode( \"id\" );\n\t\t\t\t\t\tif ( node && node.value === id ) {\n\t\t\t\t\t\t\treturn [ elem ];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn [];\n\t\t\t}\n\t\t};\n\t}\n\n\t// Tag\n\tExpr.find[ \"TAG\" ] = support.getElementsByTagName ?\n\t\tfunction( tag, context ) {\n\t\t\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\t\t\treturn context.getElementsByTagName( tag );\n\n\t\t\t// DocumentFragment nodes don't have gEBTN\n\t\t\t} else if ( support.qsa ) {\n\t\t\t\treturn context.querySelectorAll( tag );\n\t\t\t}\n\t\t} :\n\n\t\tfunction( tag, context ) {\n\t\t\tvar elem,\n\t\t\t\ttmp = [],\n\t\t\t\ti = 0,\n\n\t\t\t\t// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too\n\t\t\t\tresults = context.getElementsByTagName( tag );\n\n\t\t\t// Filter out possible comments\n\t\t\tif ( tag === \"*\" ) {\n\t\t\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\ttmp.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn tmp;\n\t\t\t}\n\t\t\treturn results;\n\t\t};\n\n\t// Class\n\tExpr.find[ \"CLASS\" ] = support.getElementsByClassName && function( className, context ) {\n\t\tif ( typeof context.getElementsByClassName !== \"undefined\" && documentIsHTML ) {\n\t\t\treturn context.getElementsByClassName( className );\n\t\t}\n\t};\n\n\t/* QSA/matchesSelector\n\t---------------------------------------------------------------------- */\n\n\t// QSA and matchesSelector support\n\n\t// matchesSelector(:active) reports false when true (IE9/Opera 11.5)\n\trbuggyMatches = [];\n\n\t// qSa(:focus) reports false when true (Chrome 21)\n\t// We allow this because of a bug in IE8/9 that throws an error\n\t// whenever `document.activeElement` is accessed on an iframe\n\t// So, we allow :focus to pass through QSA all the time to avoid the IE error\n\t// See https://bugs.jquery.com/ticket/13378\n\trbuggyQSA = [];\n\n\tif ( ( support.qsa = rnative.test( document.querySelectorAll ) ) ) {\n\n\t\t// Build QSA regex\n\t\t// Regex strategy adopted from Diego Perini\n\t\tassert( function( el ) {\n\n\t\t\tvar input;\n\n\t\t\t// Select is set to empty string on purpose\n\t\t\t// This is to test IE's treatment of not explicitly\n\t\t\t// setting a boolean content attribute,\n\t\t\t// since its presence should be enough\n\t\t\t// https://bugs.jquery.com/ticket/12359\n\t\t\tdocElem.appendChild( el ).innerHTML = \"<a id='\" + expando + \"'></a>\" +\n\t\t\t\t\"<select id='\" + expando + \"-\\r\\\\' msallowcapture=''>\" +\n\t\t\t\t\"<option selected=''></option></select>\";\n\n\t\t\t// Support: IE8, Opera 11-12.16\n\t\t\t// Nothing should be selected when empty strings follow ^= or $= or *=\n\t\t\t// The test attribute must be unknown in Opera but \"safe\" for WinRT\n\t\t\t// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section\n\t\t\tif ( el.querySelectorAll( \"[msallowcapture^='']\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"[*^$]=\" + whitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Support: IE8\n\t\t\t// Boolean attributes and \"value\" are not treated correctly\n\t\t\tif ( !el.querySelectorAll( \"[selected]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*(?:value|\" + booleans + \")\" );\n\t\t\t}\n\n\t\t\t// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+\n\t\t\tif ( !el.querySelectorAll( \"[id~=\" + expando + \"-]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"~=\" );\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 15 - 18+\n\t\t\t// IE 11/Edge don't find elements on a `[name='']` query in some cases.\n\t\t\t// Adding a temporary attribute to the document before the selection works\n\t\t\t// around the issue.\n\t\t\t// Interestingly, IE 10 & older don't seem to have the issue.\n\t\t\tinput = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"name\", \"\" );\n\t\t\tel.appendChild( input );\n\t\t\tif ( !el.querySelectorAll( \"[name='']\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"\\\\[\" + whitespace + \"*name\" + whitespace + \"*=\" +\n\t\t\t\t\twhitespace + \"*(?:''|\\\"\\\")\" );\n\t\t\t}\n\n\t\t\t// Webkit/Opera - :checked should return selected option elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( !el.querySelectorAll( \":checked\" ).length ) {\n\t\t\t\trbuggyQSA.push( \":checked\" );\n\t\t\t}\n\n\t\t\t// Support: Safari 8+, iOS 8+\n\t\t\t// https://bugs.webkit.org/show_bug.cgi?id=136851\n\t\t\t// In-page `selector#id sibling-combinator selector` fails\n\t\t\tif ( !el.querySelectorAll( \"a#\" + expando + \"+*\" ).length ) {\n\t\t\t\trbuggyQSA.push( \".#.+[+~]\" );\n\t\t\t}\n\n\t\t\t// Support: Firefox <=3.6 - 5 only\n\t\t\t// Old Firefox doesn't throw on a badly-escaped identifier.\n\t\t\tel.querySelectorAll( \"\\\\\\f\" );\n\t\t\trbuggyQSA.push( \"[\\\\r\\\\n\\\\f]\" );\n\t\t} );\n\n\t\tassert( function( el ) {\n\t\t\tel.innerHTML = \"<a href='' disabled='disabled'></a>\" +\n\t\t\t\t\"<select disabled='disabled'><option/></select>\";\n\n\t\t\t// Support: Windows 8 Native Apps\n\t\t\t// The type and name attributes are restricted during .innerHTML assignment\n\t\t\tvar input = document.createElement( \"input\" );\n\t\t\tinput.setAttribute( \"type\", \"hidden\" );\n\t\t\tel.appendChild( input ).setAttribute( \"name\", \"D\" );\n\n\t\t\t// Support: IE8\n\t\t\t// Enforce case-sensitivity of name attribute\n\t\t\tif ( el.querySelectorAll( \"[name=d]\" ).length ) {\n\t\t\t\trbuggyQSA.push( \"name\" + whitespace + \"*[*^$|!~]?=\" );\n\t\t\t}\n\n\t\t\t// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)\n\t\t\t// IE8 throws error here and will not see later tests\n\t\t\tif ( el.querySelectorAll( \":enabled\" ).length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: IE9-11+\n\t\t\t// IE's :disabled selector does not pick up the children of disabled fieldsets\n\t\t\tdocElem.appendChild( el ).disabled = true;\n\t\t\tif ( el.querySelectorAll( \":disabled\" ).length !== 2 ) {\n\t\t\t\trbuggyQSA.push( \":enabled\", \":disabled\" );\n\t\t\t}\n\n\t\t\t// Support: Opera 10 - 11 only\n\t\t\t// Opera 10-11 does not throw on post-comma invalid pseudos\n\t\t\tel.querySelectorAll( \"*,:x\" );\n\t\t\trbuggyQSA.push( \",.*:\" );\n\t\t} );\n\t}\n\n\tif ( ( support.matchesSelector = rnative.test( ( matches = docElem.matches ||\n\t\tdocElem.webkitMatchesSelector ||\n\t\tdocElem.mozMatchesSelector ||\n\t\tdocElem.oMatchesSelector ||\n\t\tdocElem.msMatchesSelector ) ) ) ) {\n\n\t\tassert( function( el ) {\n\n\t\t\t// Check to see if it's possible to do matchesSelector\n\t\t\t// on a disconnected node (IE 9)\n\t\t\tsupport.disconnectedMatch = matches.call( el, \"*\" );\n\n\t\t\t// This should fail with an exception\n\t\t\t// Gecko does not error, returns false instead\n\t\t\tmatches.call( el, \"[s!='']:x\" );\n\t\t\trbuggyMatches.push( \"!=\", pseudos );\n\t\t} );\n\t}\n\n\trbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join( \"|\" ) );\n\trbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join( \"|\" ) );\n\n\t/* Contains\n\t---------------------------------------------------------------------- */\n\thasCompare = rnative.test( docElem.compareDocumentPosition );\n\n\t// Element contains another\n\t// Purposefully self-exclusive\n\t// As in, an element does not contain itself\n\tcontains = hasCompare || rnative.test( docElem.contains ) ?\n\t\tfunction( a, b ) {\n\t\t\tvar adown = a.nodeType === 9 ? a.documentElement : a,\n\t\t\t\tbup = b && b.parentNode;\n\t\t\treturn a === bup || !!( bup && bup.nodeType === 1 && (\n\t\t\t\tadown.contains ?\n\t\t\t\t\tadown.contains( bup ) :\n\t\t\t\t\ta.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16\n\t\t\t) );\n\t\t} :\n\t\tfunction( a, b ) {\n\t\t\tif ( b ) {\n\t\t\t\twhile ( ( b = b.parentNode ) ) {\n\t\t\t\t\tif ( b === a ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t/* Sorting\n\t---------------------------------------------------------------------- */\n\n\t// Document order sorting\n\tsortOrder = hasCompare ?\n\tfunction( a, b ) {\n\n\t\t// Flag for duplicate removal\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Sort on method existence if only one input has compareDocumentPosition\n\t\tvar compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n\t\tif ( compare ) {\n\t\t\treturn compare;\n\t\t}\n\n\t\t// Calculate position if both inputs belong to the same document\n\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t// two documents; shallow comparisons work.\n\t\t// eslint-disable-next-line eqeqeq\n\t\tcompare = ( a.ownerDocument || a ) == ( b.ownerDocument || b ) ?\n\t\t\ta.compareDocumentPosition( b ) :\n\n\t\t\t// Otherwise we know they are disconnected\n\t\t\t1;\n\n\t\t// Disconnected nodes\n\t\tif ( compare & 1 ||\n\t\t\t( !support.sortDetached && b.compareDocumentPosition( a ) === compare ) ) {\n\n\t\t\t// Choose the first element that is related to our preferred document\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( a == document || a.ownerDocument == preferredDoc &&\n\t\t\t\tcontains( preferredDoc, a ) ) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\tif ( b == document || b.ownerDocument == preferredDoc &&\n\t\t\t\tcontains( preferredDoc, b ) ) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\t// Maintain original order\n\t\t\treturn sortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\t\t}\n\n\t\treturn compare & 4 ? -1 : 1;\n\t} :\n\tfunction( a, b ) {\n\n\t\t// Exit early if the nodes are identical\n\t\tif ( a === b ) {\n\t\t\thasDuplicate = true;\n\t\t\treturn 0;\n\t\t}\n\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\taup = a.parentNode,\n\t\t\tbup = b.parentNode,\n\t\t\tap = [ a ],\n\t\t\tbp = [ b ];\n\n\t\t// Parentless nodes are either documents or disconnected\n\t\tif ( !aup || !bup ) {\n\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\treturn a == document ? -1 :\n\t\t\t\tb == document ? 1 :\n\t\t\t\t/* eslint-enable eqeqeq */\n\t\t\t\taup ? -1 :\n\t\t\t\tbup ? 1 :\n\t\t\t\tsortInput ?\n\t\t\t\t( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :\n\t\t\t\t0;\n\n\t\t// If the nodes are siblings, we can do a quick check\n\t\t} else if ( aup === bup ) {\n\t\t\treturn siblingCheck( a, b );\n\t\t}\n\n\t\t// Otherwise we need full lists of their ancestors for comparison\n\t\tcur = a;\n\t\twhile ( ( cur = cur.parentNode ) ) {\n\t\t\tap.unshift( cur );\n\t\t}\n\t\tcur = b;\n\t\twhile ( ( cur = cur.parentNode ) ) {\n\t\t\tbp.unshift( cur );\n\t\t}\n\n\t\t// Walk down the tree looking for a discrepancy\n\t\twhile ( ap[ i ] === bp[ i ] ) {\n\t\t\ti++;\n\t\t}\n\n\t\treturn i ?\n\n\t\t\t// Do a sibling check if the nodes have a common ancestor\n\t\t\tsiblingCheck( ap[ i ], bp[ i ] ) :\n\n\t\t\t// Otherwise nodes in our document sort first\n\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t// two documents; shallow comparisons work.\n\t\t\t/* eslint-disable eqeqeq */\n\t\t\tap[ i ] == preferredDoc ? -1 :\n\t\t\tbp[ i ] == preferredDoc ? 1 :\n\t\t\t/* eslint-enable eqeqeq */\n\t\t\t0;\n\t};\n\n\treturn document;\n};\n\nSizzle.matches = function( expr, elements ) {\n\treturn Sizzle( expr, null, null, elements );\n};\n\nSizzle.matchesSelector = function( elem, expr ) {\n\tsetDocument( elem );\n\n\tif ( support.matchesSelector && documentIsHTML &&\n\t\t!nonnativeSelectorCache[ expr + \" \" ] &&\n\t\t( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&\n\t\t( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {\n\n\t\ttry {\n\t\t\tvar ret = matches.call( elem, expr );\n\n\t\t\t// IE 9's matchesSelector returns false on disconnected nodes\n\t\t\tif ( ret || support.disconnectedMatch ||\n\n\t\t\t\t// As well, disconnected nodes are said to be in a document\n\t\t\t\t// fragment in IE 9\n\t\t\t\telem.document && elem.document.nodeType !== 11 ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t} catch ( e ) {\n\t\t\tnonnativeSelectorCache( expr, true );\n\t\t}\n\t}\n\n\treturn Sizzle( expr, document, null, [ elem ] ).length > 0;\n};\n\nSizzle.contains = function( context, elem ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( context.ownerDocument || context ) != document ) {\n\t\tsetDocument( context );\n\t}\n\treturn contains( context, elem );\n};\n\nSizzle.attr = function( elem, name ) {\n\n\t// Set document vars if needed\n\t// Support: IE 11+, Edge 17 - 18+\n\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t// two documents; shallow comparisons work.\n\t// eslint-disable-next-line eqeqeq\n\tif ( ( elem.ownerDocument || elem ) != document ) {\n\t\tsetDocument( elem );\n\t}\n\n\tvar fn = Expr.attrHandle[ name.toLowerCase() ],\n\n\t\t// Don't get fooled by Object.prototype properties (jQuery #13807)\n\t\tval = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?\n\t\t\tfn( elem, name, !documentIsHTML ) :\n\t\t\tundefined;\n\n\treturn val !== undefined ?\n\t\tval :\n\t\tsupport.attributes || !documentIsHTML ?\n\t\t\telem.getAttribute( name ) :\n\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n\t\t\t\tval.value :\n\t\t\t\tnull;\n};\n\nSizzle.escape = function( sel ) {\n\treturn ( sel + \"\" ).replace( rcssescape, fcssescape );\n};\n\nSizzle.error = function( msg ) {\n\tthrow new Error( \"Syntax error, unrecognized expression: \" + msg );\n};\n\n/**\n * Document sorting and removing duplicates\n * @param {ArrayLike} results\n */\nSizzle.uniqueSort = function( results ) {\n\tvar elem,\n\t\tduplicates = [],\n\t\tj = 0,\n\t\ti = 0;\n\n\t// Unless we *know* we can detect duplicates, assume their presence\n\thasDuplicate = !support.detectDuplicates;\n\tsortInput = !support.sortStable && results.slice( 0 );\n\tresults.sort( sortOrder );\n\n\tif ( hasDuplicate ) {\n\t\twhile ( ( elem = results[ i++ ] ) ) {\n\t\t\tif ( elem === results[ i ] ) {\n\t\t\t\tj = duplicates.push( i );\n\t\t\t}\n\t\t}\n\t\twhile ( j-- ) {\n\t\t\tresults.splice( duplicates[ j ], 1 );\n\t\t}\n\t}\n\n\t// Clear input after sorting to release objects\n\t// See https://github.com/jquery/sizzle/pull/225\n\tsortInput = null;\n\n\treturn results;\n};\n\n/**\n * Utility function for retrieving the text value of an array of DOM nodes\n * @param {Array|Element} elem\n */\ngetText = Sizzle.getText = function( elem ) {\n\tvar node,\n\t\tret = \"\",\n\t\ti = 0,\n\t\tnodeType = elem.nodeType;\n\n\tif ( !nodeType ) {\n\n\t\t// If no nodeType, this is expected to be an array\n\t\twhile ( ( node = elem[ i++ ] ) ) {\n\n\t\t\t// Do not traverse comment nodes\n\t\t\tret += getText( node );\n\t\t}\n\t} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {\n\n\t\t// Use textContent for elements\n\t\t// innerText usage removed for consistency of new lines (jQuery #11153)\n\t\tif ( typeof elem.textContent === \"string\" ) {\n\t\t\treturn elem.textContent;\n\t\t} else {\n\n\t\t\t// Traverse its children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tret += getText( elem );\n\t\t\t}\n\t\t}\n\t} else if ( nodeType === 3 || nodeType === 4 ) {\n\t\treturn elem.nodeValue;\n\t}\n\n\t// Do not include comment or processing instruction nodes\n\n\treturn ret;\n};\n\nExpr = Sizzle.selectors = {\n\n\t// Can be adjusted by the user\n\tcacheLength: 50,\n\n\tcreatePseudo: markFunction,\n\n\tmatch: matchExpr,\n\n\tattrHandle: {},\n\n\tfind: {},\n\n\trelative: {\n\t\t\">\": { dir: \"parentNode\", first: true },\n\t\t\" \": { dir: \"parentNode\" },\n\t\t\"+\": { dir: \"previousSibling\", first: true },\n\t\t\"~\": { dir: \"previousSibling\" }\n\t},\n\n\tpreFilter: {\n\t\t\"ATTR\": function( match ) {\n\t\t\tmatch[ 1 ] = match[ 1 ].replace( runescape, funescape );\n\n\t\t\t// Move the given value to match[3] whether quoted or unquoted\n\t\t\tmatch[ 3 ] = ( match[ 3 ] || match[ 4 ] ||\n\t\t\t\tmatch[ 5 ] || \"\" ).replace( runescape, funescape );\n\n\t\t\tif ( match[ 2 ] === \"~=\" ) {\n\t\t\t\tmatch[ 3 ] = \" \" + match[ 3 ] + \" \";\n\t\t\t}\n\n\t\t\treturn match.slice( 0, 4 );\n\t\t},\n\n\t\t\"CHILD\": function( match ) {\n\n\t\t\t/* matches from matchExpr[\"CHILD\"]\n\t\t\t\t1 type (only|nth|...)\n\t\t\t\t2 what (child|of-type)\n\t\t\t\t3 argument (even|odd|\\d*|\\d*n([+-]\\d+)?|...)\n\t\t\t\t4 xn-component of xn+y argument ([+-]?\\d*n|)\n\t\t\t\t5 sign of xn-component\n\t\t\t\t6 x of xn-component\n\t\t\t\t7 sign of y-component\n\t\t\t\t8 y of y-component\n\t\t\t*/\n\t\t\tmatch[ 1 ] = match[ 1 ].toLowerCase();\n\n\t\t\tif ( match[ 1 ].slice( 0, 3 ) === \"nth\" ) {\n\n\t\t\t\t// nth-* requires argument\n\t\t\t\tif ( !match[ 3 ] ) {\n\t\t\t\t\tSizzle.error( match[ 0 ] );\n\t\t\t\t}\n\n\t\t\t\t// numeric x and y parameters for Expr.filter.CHILD\n\t\t\t\t// remember that false/true cast respectively to 0/1\n\t\t\t\tmatch[ 4 ] = +( match[ 4 ] ?\n\t\t\t\t\tmatch[ 5 ] + ( match[ 6 ] || 1 ) :\n\t\t\t\t\t2 * ( match[ 3 ] === \"even\" || match[ 3 ] === \"odd\" ) );\n\t\t\t\tmatch[ 5 ] = +( ( match[ 7 ] + match[ 8 ] ) || match[ 3 ] === \"odd\" );\n\n\t\t\t\t// other types prohibit arguments\n\t\t\t} else if ( match[ 3 ] ) {\n\t\t\t\tSizzle.error( match[ 0 ] );\n\t\t\t}\n\n\t\t\treturn match;\n\t\t},\n\n\t\t\"PSEUDO\": function( match ) {\n\t\t\tvar excess,\n\t\t\t\tunquoted = !match[ 6 ] && match[ 2 ];\n\n\t\t\tif ( matchExpr[ \"CHILD\" ].test( match[ 0 ] ) ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\t// Accept quoted arguments as-is\n\t\t\tif ( match[ 3 ] ) {\n\t\t\t\tmatch[ 2 ] = match[ 4 ] || match[ 5 ] || \"\";\n\n\t\t\t// Strip excess characters from unquoted arguments\n\t\t\t} else if ( unquoted && rpseudo.test( unquoted ) &&\n\n\t\t\t\t// Get excess from tokenize (recursively)\n\t\t\t\t( excess = tokenize( unquoted, true ) ) &&\n\n\t\t\t\t// advance to the next closing parenthesis\n\t\t\t\t( excess = unquoted.indexOf( \")\", unquoted.length - excess ) - unquoted.length ) ) {\n\n\t\t\t\t// excess is a negative index\n\t\t\t\tmatch[ 0 ] = match[ 0 ].slice( 0, excess );\n\t\t\t\tmatch[ 2 ] = unquoted.slice( 0, excess );\n\t\t\t}\n\n\t\t\t// Return only captures needed by the pseudo filter method (type and argument)\n\t\t\treturn match.slice( 0, 3 );\n\t\t}\n\t},\n\n\tfilter: {\n\n\t\t\"TAG\": function( nodeNameSelector ) {\n\t\t\tvar nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn nodeNameSelector === \"*\" ?\n\t\t\t\tfunction() {\n\t\t\t\t\treturn true;\n\t\t\t\t} :\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n\t\t\t\t};\n\t\t},\n\n\t\t\"CLASS\": function( className ) {\n\t\t\tvar pattern = classCache[ className + \" \" ];\n\n\t\t\treturn pattern ||\n\t\t\t\t( pattern = new RegExp( \"(^|\" + whitespace +\n\t\t\t\t\t\")\" + className + \"(\" + whitespace + \"|$)\" ) ) && classCache(\n\t\t\t\t\t\tclassName, function( elem ) {\n\t\t\t\t\t\t\treturn pattern.test(\n\t\t\t\t\t\t\t\ttypeof elem.className === \"string\" && elem.className ||\n\t\t\t\t\t\t\t\ttypeof elem.getAttribute !== \"undefined\" &&\n\t\t\t\t\t\t\t\t\telem.getAttribute( \"class\" ) ||\n\t\t\t\t\t\t\t\t\"\"\n\t\t\t\t\t\t\t);\n\t\t\t\t} );\n\t\t},\n\n\t\t\"ATTR\": function( name, operator, check ) {\n\t\t\treturn function( elem ) {\n\t\t\t\tvar result = Sizzle.attr( elem, name );\n\n\t\t\t\tif ( result == null ) {\n\t\t\t\t\treturn operator === \"!=\";\n\t\t\t\t}\n\t\t\t\tif ( !operator ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tresult += \"\";\n\n\t\t\t\t/* eslint-disable max-len */\n\n\t\t\t\treturn operator === \"=\" ? result === check :\n\t\t\t\t\toperator === \"!=\" ? result !== check :\n\t\t\t\t\toperator === \"^=\" ? check && result.indexOf( check ) === 0 :\n\t\t\t\t\toperator === \"*=\" ? check && result.indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"$=\" ? check && result.slice( -check.length ) === check :\n\t\t\t\t\toperator === \"~=\" ? ( \" \" + result.replace( rwhitespace, \" \" ) + \" \" ).indexOf( check ) > -1 :\n\t\t\t\t\toperator === \"|=\" ? result === check || result.slice( 0, check.length + 1 ) === check + \"-\" :\n\t\t\t\t\tfalse;\n\t\t\t\t/* eslint-enable max-len */\n\n\t\t\t};\n\t\t},\n\n\t\t\"CHILD\": function( type, what, _argument, first, last ) {\n\t\t\tvar simple = type.slice( 0, 3 ) !== \"nth\",\n\t\t\t\tforward = type.slice( -4 ) !== \"last\",\n\t\t\t\tofType = what === \"of-type\";\n\n\t\t\treturn first === 1 && last === 0 ?\n\n\t\t\t\t// Shortcut for :nth-*(n)\n\t\t\t\tfunction( elem ) {\n\t\t\t\t\treturn !!elem.parentNode;\n\t\t\t\t} :\n\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tvar cache, uniqueCache, outerCache, node, nodeIndex, start,\n\t\t\t\t\t\tdir = simple !== forward ? \"nextSibling\" : \"previousSibling\",\n\t\t\t\t\t\tparent = elem.parentNode,\n\t\t\t\t\t\tname = ofType && elem.nodeName.toLowerCase(),\n\t\t\t\t\t\tuseCache = !xml && !ofType,\n\t\t\t\t\t\tdiff = false;\n\n\t\t\t\t\tif ( parent ) {\n\n\t\t\t\t\t\t// :(first|last|only)-(child|of-type)\n\t\t\t\t\t\tif ( simple ) {\n\t\t\t\t\t\t\twhile ( dir ) {\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\twhile ( ( node = node[ dir ] ) ) {\n\t\t\t\t\t\t\t\t\tif ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) {\n\n\t\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// Reverse direction for :only-* (if we haven't yet done so)\n\t\t\t\t\t\t\t\tstart = dir = type === \"only\" && !start && \"nextSibling\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstart = [ forward ? parent.firstChild : parent.lastChild ];\n\n\t\t\t\t\t\t// non-xml :nth-child(...) stores cache data on `parent`\n\t\t\t\t\t\tif ( forward && useCache ) {\n\n\t\t\t\t\t\t\t// Seek `elem` from a previously-cached index\n\n\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\tnode = parent;\n\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\tdiff = nodeIndex && cache[ 2 ];\n\t\t\t\t\t\t\tnode = nodeIndex && parent.childNodes[ nodeIndex ];\n\n\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\n\t\t\t\t\t\t\t\t// Fallback to seeking `elem` from the start\n\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t// When found, cache indexes on `parent` and break\n\t\t\t\t\t\t\t\tif ( node.nodeType === 1 && ++diff && node === elem ) {\n\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, nodeIndex, diff ];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Use previously-cached element index if available\n\t\t\t\t\t\t\tif ( useCache ) {\n\n\t\t\t\t\t\t\t\t// ...in a gzip-friendly way\n\t\t\t\t\t\t\t\tnode = elem;\n\t\t\t\t\t\t\t\touterCache = node[ expando ] || ( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\t\tcache = uniqueCache[ type ] || [];\n\t\t\t\t\t\t\t\tnodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];\n\t\t\t\t\t\t\t\tdiff = nodeIndex;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// xml :nth-child(...)\n\t\t\t\t\t\t\t// or :nth-last-child(...) or :nth(-last)?-of-type(...)\n\t\t\t\t\t\t\tif ( diff === false ) {\n\n\t\t\t\t\t\t\t\t// Use the same loop as above to seek `elem` from the start\n\t\t\t\t\t\t\t\twhile ( ( node = ++nodeIndex && node && node[ dir ] ||\n\t\t\t\t\t\t\t\t\t( diff = nodeIndex = 0 ) || start.pop() ) ) {\n\n\t\t\t\t\t\t\t\t\tif ( ( ofType ?\n\t\t\t\t\t\t\t\t\t\tnode.nodeName.toLowerCase() === name :\n\t\t\t\t\t\t\t\t\t\tnode.nodeType === 1 ) &&\n\t\t\t\t\t\t\t\t\t\t++diff ) {\n\n\t\t\t\t\t\t\t\t\t\t// Cache the index of each encountered element\n\t\t\t\t\t\t\t\t\t\tif ( useCache ) {\n\t\t\t\t\t\t\t\t\t\t\touterCache = node[ expando ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( node[ expando ] = {} );\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache = outerCache[ node.uniqueID ] ||\n\t\t\t\t\t\t\t\t\t\t\t\t( outerCache[ node.uniqueID ] = {} );\n\n\t\t\t\t\t\t\t\t\t\t\tuniqueCache[ type ] = [ dirruns, diff ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif ( node === elem ) {\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Incorporate the offset, then check against cycle size\n\t\t\t\t\t\tdiff -= last;\n\t\t\t\t\t\treturn diff === first || ( diff % first === 0 && diff / first >= 0 );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t},\n\n\t\t\"PSEUDO\": function( pseudo, argument ) {\n\n\t\t\t// pseudo-class names are case-insensitive\n\t\t\t// http://www.w3.org/TR/selectors/#pseudo-classes\n\t\t\t// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters\n\t\t\t// Remember that setFilters inherits from pseudos\n\t\t\tvar args,\n\t\t\t\tfn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||\n\t\t\t\t\tSizzle.error( \"unsupported pseudo: \" + pseudo );\n\n\t\t\t// The user may use createPseudo to indicate that\n\t\t\t// arguments are needed to create the filter function\n\t\t\t// just as Sizzle does\n\t\t\tif ( fn[ expando ] ) {\n\t\t\t\treturn fn( argument );\n\t\t\t}\n\n\t\t\t// But maintain support for old signatures\n\t\t\tif ( fn.length > 1 ) {\n\t\t\t\targs = [ pseudo, pseudo, \"\", argument ];\n\t\t\t\treturn Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?\n\t\t\t\t\tmarkFunction( function( seed, matches ) {\n\t\t\t\t\t\tvar idx,\n\t\t\t\t\t\t\tmatched = fn( seed, argument ),\n\t\t\t\t\t\t\ti = matched.length;\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tidx = indexOf( seed, matched[ i ] );\n\t\t\t\t\t\t\tseed[ idx ] = !( matches[ idx ] = matched[ i ] );\n\t\t\t\t\t\t}\n\t\t\t\t\t} ) :\n\t\t\t\t\tfunction( elem ) {\n\t\t\t\t\t\treturn fn( elem, 0, args );\n\t\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn fn;\n\t\t}\n\t},\n\n\tpseudos: {\n\n\t\t// Potentially complex pseudos\n\t\t\"not\": markFunction( function( selector ) {\n\n\t\t\t// Trim the selector passed to compile\n\t\t\t// to avoid treating leading and trailing\n\t\t\t// spaces as combinators\n\t\t\tvar input = [],\n\t\t\t\tresults = [],\n\t\t\t\tmatcher = compile( selector.replace( rtrim, \"$1\" ) );\n\n\t\t\treturn matcher[ expando ] ?\n\t\t\t\tmarkFunction( function( seed, matches, _context, xml ) {\n\t\t\t\t\tvar elem,\n\t\t\t\t\t\tunmatched = matcher( seed, null, xml, [] ),\n\t\t\t\t\t\ti = seed.length;\n\n\t\t\t\t\t// Match elements unmatched by `matcher`\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\t\t\t\t\tseed[ i ] = !( matches[ i ] = elem );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} ) :\n\t\t\t\tfunction( elem, _context, xml ) {\n\t\t\t\t\tinput[ 0 ] = elem;\n\t\t\t\t\tmatcher( input, null, xml, results );\n\n\t\t\t\t\t// Don't keep the element (issue #299)\n\t\t\t\t\tinput[ 0 ] = null;\n\t\t\t\t\treturn !results.pop();\n\t\t\t\t};\n\t\t} ),\n\n\t\t\"has\": markFunction( function( selector ) {\n\t\t\treturn function( elem ) {\n\t\t\t\treturn Sizzle( selector, elem ).length > 0;\n\t\t\t};\n\t\t} ),\n\n\t\t\"contains\": markFunction( function( text ) {\n\t\t\ttext = text.replace( runescape, funescape );\n\t\t\treturn function( elem ) {\n\t\t\t\treturn ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;\n\t\t\t};\n\t\t} ),\n\n\t\t// \"Whether an element is represented by a :lang() selector\n\t\t// is based solely on the element's language value\n\t\t// being equal to the identifier C,\n\t\t// or beginning with the identifier C immediately followed by \"-\".\n\t\t// The matching of C against the element's language value is performed case-insensitively.\n\t\t// The identifier C does not have to be a valid language name.\"\n\t\t// http://www.w3.org/TR/selectors/#lang-pseudo\n\t\t\"lang\": markFunction( function( lang ) {\n\n\t\t\t// lang value must be a valid identifier\n\t\t\tif ( !ridentifier.test( lang || \"\" ) ) {\n\t\t\t\tSizzle.error( \"unsupported lang: \" + lang );\n\t\t\t}\n\t\t\tlang = lang.replace( runescape, funescape ).toLowerCase();\n\t\t\treturn function( elem ) {\n\t\t\t\tvar elemLang;\n\t\t\t\tdo {\n\t\t\t\t\tif ( ( elemLang = documentIsHTML ?\n\t\t\t\t\t\telem.lang :\n\t\t\t\t\t\telem.getAttribute( \"xml:lang\" ) || elem.getAttribute( \"lang\" ) ) ) {\n\n\t\t\t\t\t\telemLang = elemLang.toLowerCase();\n\t\t\t\t\t\treturn elemLang === lang || elemLang.indexOf( lang + \"-\" ) === 0;\n\t\t\t\t\t}\n\t\t\t\t} while ( ( elem = elem.parentNode ) && elem.nodeType === 1 );\n\t\t\t\treturn false;\n\t\t\t};\n\t\t} ),\n\n\t\t// Miscellaneous\n\t\t\"target\": function( elem ) {\n\t\t\tvar hash = window.location && window.location.hash;\n\t\t\treturn hash && hash.slice( 1 ) === elem.id;\n\t\t},\n\n\t\t\"root\": function( elem ) {\n\t\t\treturn elem === docElem;\n\t\t},\n\n\t\t\"focus\": function( elem ) {\n\t\t\treturn elem === document.activeElement &&\n\t\t\t\t( !document.hasFocus || document.hasFocus() ) &&\n\t\t\t\t!!( elem.type || elem.href || ~elem.tabIndex );\n\t\t},\n\n\t\t// Boolean properties\n\t\t\"enabled\": createDisabledPseudo( false ),\n\t\t\"disabled\": createDisabledPseudo( true ),\n\n\t\t\"checked\": function( elem ) {\n\n\t\t\t// In CSS3, :checked should return both checked and selected elements\n\t\t\t// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked\n\t\t\tvar nodeName = elem.nodeName.toLowerCase();\n\t\t\treturn ( nodeName === \"input\" && !!elem.checked ) ||\n\t\t\t\t( nodeName === \"option\" && !!elem.selected );\n\t\t},\n\n\t\t\"selected\": function( elem ) {\n\n\t\t\t// Accessing this property makes selected-by-default\n\t\t\t// options in Safari work properly\n\t\t\tif ( elem.parentNode ) {\n\t\t\t\t// eslint-disable-next-line no-unused-expressions\n\t\t\t\telem.parentNode.selectedIndex;\n\t\t\t}\n\n\t\t\treturn elem.selected === true;\n\t\t},\n\n\t\t// Contents\n\t\t\"empty\": function( elem ) {\n\n\t\t\t// http://www.w3.org/TR/selectors/#empty-pseudo\n\t\t\t// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),\n\t\t\t//   but not by others (comment: 8; processing instruction: 7; etc.)\n\t\t\t// nodeType < 6 works because attributes (2) do not appear as children\n\t\t\tfor ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {\n\t\t\t\tif ( elem.nodeType < 6 ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\n\t\t\"parent\": function( elem ) {\n\t\t\treturn !Expr.pseudos[ \"empty\" ]( elem );\n\t\t},\n\n\t\t// Element/input types\n\t\t\"header\": function( elem ) {\n\t\t\treturn rheader.test( elem.nodeName );\n\t\t},\n\n\t\t\"input\": function( elem ) {\n\t\t\treturn rinputs.test( elem.nodeName );\n\t\t},\n\n\t\t\"button\": function( elem ) {\n\t\t\tvar name = elem.nodeName.toLowerCase();\n\t\t\treturn name === \"input\" && elem.type === \"button\" || name === \"button\";\n\t\t},\n\n\t\t\"text\": function( elem ) {\n\t\t\tvar attr;\n\t\t\treturn elem.nodeName.toLowerCase() === \"input\" &&\n\t\t\t\telem.type === \"text\" &&\n\n\t\t\t\t// Support: IE<8\n\t\t\t\t// New HTML5 attribute values (e.g., \"search\") appear with elem.type === \"text\"\n\t\t\t\t( ( attr = elem.getAttribute( \"type\" ) ) == null ||\n\t\t\t\t\tattr.toLowerCase() === \"text\" );\n\t\t},\n\n\t\t// Position-in-collection\n\t\t\"first\": createPositionalPseudo( function() {\n\t\t\treturn [ 0 ];\n\t\t} ),\n\n\t\t\"last\": createPositionalPseudo( function( _matchIndexes, length ) {\n\t\t\treturn [ length - 1 ];\n\t\t} ),\n\n\t\t\"eq\": createPositionalPseudo( function( _matchIndexes, length, argument ) {\n\t\t\treturn [ argument < 0 ? argument + length : argument ];\n\t\t} ),\n\n\t\t\"even\": createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"odd\": createPositionalPseudo( function( matchIndexes, length ) {\n\t\t\tvar i = 1;\n\t\t\tfor ( ; i < length; i += 2 ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"lt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ?\n\t\t\t\targument + length :\n\t\t\t\targument > length ?\n\t\t\t\t\tlength :\n\t\t\t\t\targument;\n\t\t\tfor ( ; --i >= 0; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} ),\n\n\t\t\"gt\": createPositionalPseudo( function( matchIndexes, length, argument ) {\n\t\t\tvar i = argument < 0 ? argument + length : argument;\n\t\t\tfor ( ; ++i < length; ) {\n\t\t\t\tmatchIndexes.push( i );\n\t\t\t}\n\t\t\treturn matchIndexes;\n\t\t} )\n\t}\n};\n\nExpr.pseudos[ \"nth\" ] = Expr.pseudos[ \"eq\" ];\n\n// Add button/input type pseudos\nfor ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {\n\tExpr.pseudos[ i ] = createInputPseudo( i );\n}\nfor ( i in { submit: true, reset: true } ) {\n\tExpr.pseudos[ i ] = createButtonPseudo( i );\n}\n\n// Easy API for creating new setFilters\nfunction setFilters() {}\nsetFilters.prototype = Expr.filters = Expr.pseudos;\nExpr.setFilters = new setFilters();\n\ntokenize = Sizzle.tokenize = function( selector, parseOnly ) {\n\tvar matched, match, tokens, type,\n\t\tsoFar, groups, preFilters,\n\t\tcached = tokenCache[ selector + \" \" ];\n\n\tif ( cached ) {\n\t\treturn parseOnly ? 0 : cached.slice( 0 );\n\t}\n\n\tsoFar = selector;\n\tgroups = [];\n\tpreFilters = Expr.preFilter;\n\n\twhile ( soFar ) {\n\n\t\t// Comma and first run\n\t\tif ( !matched || ( match = rcomma.exec( soFar ) ) ) {\n\t\t\tif ( match ) {\n\n\t\t\t\t// Don't consume trailing commas as valid\n\t\t\t\tsoFar = soFar.slice( match[ 0 ].length ) || soFar;\n\t\t\t}\n\t\t\tgroups.push( ( tokens = [] ) );\n\t\t}\n\n\t\tmatched = false;\n\n\t\t// Combinators\n\t\tif ( ( match = rcombinators.exec( soFar ) ) ) {\n\t\t\tmatched = match.shift();\n\t\t\ttokens.push( {\n\t\t\t\tvalue: matched,\n\n\t\t\t\t// Cast descendant combinators to space\n\t\t\t\ttype: match[ 0 ].replace( rtrim, \" \" )\n\t\t\t} );\n\t\t\tsoFar = soFar.slice( matched.length );\n\t\t}\n\n\t\t// Filters\n\t\tfor ( type in Expr.filter ) {\n\t\t\tif ( ( match = matchExpr[ type ].exec( soFar ) ) && ( !preFilters[ type ] ||\n\t\t\t\t( match = preFilters[ type ]( match ) ) ) ) {\n\t\t\t\tmatched = match.shift();\n\t\t\t\ttokens.push( {\n\t\t\t\t\tvalue: matched,\n\t\t\t\t\ttype: type,\n\t\t\t\t\tmatches: match\n\t\t\t\t} );\n\t\t\t\tsoFar = soFar.slice( matched.length );\n\t\t\t}\n\t\t}\n\n\t\tif ( !matched ) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t// Return the length of the invalid excess\n\t// if we're just parsing\n\t// Otherwise, throw an error or return tokens\n\treturn parseOnly ?\n\t\tsoFar.length :\n\t\tsoFar ?\n\t\t\tSizzle.error( selector ) :\n\n\t\t\t// Cache the tokens\n\t\t\ttokenCache( selector, groups ).slice( 0 );\n};\n\nfunction toSelector( tokens ) {\n\tvar i = 0,\n\t\tlen = tokens.length,\n\t\tselector = \"\";\n\tfor ( ; i < len; i++ ) {\n\t\tselector += tokens[ i ].value;\n\t}\n\treturn selector;\n}\n\nfunction addCombinator( matcher, combinator, base ) {\n\tvar dir = combinator.dir,\n\t\tskip = combinator.next,\n\t\tkey = skip || dir,\n\t\tcheckNonElements = base && key === \"parentNode\",\n\t\tdoneName = done++;\n\n\treturn combinator.first ?\n\n\t\t// Check against closest ancestor/preceding element\n\t\tfunction( elem, context, xml ) {\n\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\treturn matcher( elem, context, xml );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t} :\n\n\t\t// Check against all ancestor/preceding elements\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar oldCache, uniqueCache, outerCache,\n\t\t\t\tnewCache = [ dirruns, doneName ];\n\n\t\t\t// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching\n\t\t\tif ( xml ) {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\tif ( matcher( elem, context, xml ) ) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\twhile ( ( elem = elem[ dir ] ) ) {\n\t\t\t\t\tif ( elem.nodeType === 1 || checkNonElements ) {\n\t\t\t\t\t\touterCache = elem[ expando ] || ( elem[ expando ] = {} );\n\n\t\t\t\t\t\t// Support: IE <9 only\n\t\t\t\t\t\t// Defend against cloned attroperties (jQuery gh-1709)\n\t\t\t\t\t\tuniqueCache = outerCache[ elem.uniqueID ] ||\n\t\t\t\t\t\t\t( outerCache[ elem.uniqueID ] = {} );\n\n\t\t\t\t\t\tif ( skip && skip === elem.nodeName.toLowerCase() ) {\n\t\t\t\t\t\t\telem = elem[ dir ] || elem;\n\t\t\t\t\t\t} else if ( ( oldCache = uniqueCache[ key ] ) &&\n\t\t\t\t\t\t\toldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {\n\n\t\t\t\t\t\t\t// Assign to newCache so results back-propagate to previous elements\n\t\t\t\t\t\t\treturn ( newCache[ 2 ] = oldCache[ 2 ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Reuse newcache so results back-propagate to previous elements\n\t\t\t\t\t\t\tuniqueCache[ key ] = newCache;\n\n\t\t\t\t\t\t\t// A match means we're done; a fail means we have to keep checking\n\t\t\t\t\t\t\tif ( ( newCache[ 2 ] = matcher( elem, context, xml ) ) ) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n}\n\nfunction elementMatcher( matchers ) {\n\treturn matchers.length > 1 ?\n\t\tfunction( elem, context, xml ) {\n\t\t\tvar i = matchers.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( !matchers[ i ]( elem, context, xml ) ) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t} :\n\t\tmatchers[ 0 ];\n}\n\nfunction multipleContexts( selector, contexts, results ) {\n\tvar i = 0,\n\t\tlen = contexts.length;\n\tfor ( ; i < len; i++ ) {\n\t\tSizzle( selector, contexts[ i ], results );\n\t}\n\treturn results;\n}\n\nfunction condense( unmatched, map, filter, context, xml ) {\n\tvar elem,\n\t\tnewUnmatched = [],\n\t\ti = 0,\n\t\tlen = unmatched.length,\n\t\tmapped = map != null;\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( elem = unmatched[ i ] ) ) {\n\t\t\tif ( !filter || filter( elem, context, xml ) ) {\n\t\t\t\tnewUnmatched.push( elem );\n\t\t\t\tif ( mapped ) {\n\t\t\t\t\tmap.push( i );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn newUnmatched;\n}\n\nfunction setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {\n\tif ( postFilter && !postFilter[ expando ] ) {\n\t\tpostFilter = setMatcher( postFilter );\n\t}\n\tif ( postFinder && !postFinder[ expando ] ) {\n\t\tpostFinder = setMatcher( postFinder, postSelector );\n\t}\n\treturn markFunction( function( seed, results, context, xml ) {\n\t\tvar temp, i, elem,\n\t\t\tpreMap = [],\n\t\t\tpostMap = [],\n\t\t\tpreexisting = results.length,\n\n\t\t\t// Get initial elements from seed or context\n\t\t\telems = seed || multipleContexts(\n\t\t\t\tselector || \"*\",\n\t\t\t\tcontext.nodeType ? [ context ] : context,\n\t\t\t\t[]\n\t\t\t),\n\n\t\t\t// Prefilter to get matcher input, preserving a map for seed-results synchronization\n\t\t\tmatcherIn = preFilter && ( seed || !selector ) ?\n\t\t\t\tcondense( elems, preMap, preFilter, context, xml ) :\n\t\t\t\telems,\n\n\t\t\tmatcherOut = matcher ?\n\n\t\t\t\t// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,\n\t\t\t\tpostFinder || ( seed ? preFilter : preexisting || postFilter ) ?\n\n\t\t\t\t\t// ...intermediate processing is necessary\n\t\t\t\t\t[] :\n\n\t\t\t\t\t// ...otherwise use results directly\n\t\t\t\t\tresults :\n\t\t\t\tmatcherIn;\n\n\t\t// Find primary matches\n\t\tif ( matcher ) {\n\t\t\tmatcher( matcherIn, matcherOut, context, xml );\n\t\t}\n\n\t\t// Apply postFilter\n\t\tif ( postFilter ) {\n\t\t\ttemp = condense( matcherOut, postMap );\n\t\t\tpostFilter( temp, [], context, xml );\n\n\t\t\t// Un-match failing elements by moving them back to matcherIn\n\t\t\ti = temp.length;\n\t\t\twhile ( i-- ) {\n\t\t\t\tif ( ( elem = temp[ i ] ) ) {\n\t\t\t\t\tmatcherOut[ postMap[ i ] ] = !( matcherIn[ postMap[ i ] ] = elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ( seed ) {\n\t\t\tif ( postFinder || preFilter ) {\n\t\t\t\tif ( postFinder ) {\n\n\t\t\t\t\t// Get the final matcherOut by condensing this intermediate into postFinder contexts\n\t\t\t\t\ttemp = [];\n\t\t\t\t\ti = matcherOut.length;\n\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) ) {\n\n\t\t\t\t\t\t\t// Restore matcherIn since elem is not yet a final match\n\t\t\t\t\t\t\ttemp.push( ( matcherIn[ i ] = elem ) );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpostFinder( null, ( matcherOut = [] ), temp, xml );\n\t\t\t\t}\n\n\t\t\t\t// Move matched elements from seed to results to keep them synchronized\n\t\t\t\ti = matcherOut.length;\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\tif ( ( elem = matcherOut[ i ] ) &&\n\t\t\t\t\t\t( temp = postFinder ? indexOf( seed, elem ) : preMap[ i ] ) > -1 ) {\n\n\t\t\t\t\t\tseed[ temp ] = !( results[ temp ] = elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Add elements to results, through postFinder if defined\n\t\t} else {\n\t\t\tmatcherOut = condense(\n\t\t\t\tmatcherOut === results ?\n\t\t\t\t\tmatcherOut.splice( preexisting, matcherOut.length ) :\n\t\t\t\t\tmatcherOut\n\t\t\t);\n\t\t\tif ( postFinder ) {\n\t\t\t\tpostFinder( null, results, matcherOut, xml );\n\t\t\t} else {\n\t\t\t\tpush.apply( results, matcherOut );\n\t\t\t}\n\t\t}\n\t} );\n}\n\nfunction matcherFromTokens( tokens ) {\n\tvar checkContext, matcher, j,\n\t\tlen = tokens.length,\n\t\tleadingRelative = Expr.relative[ tokens[ 0 ].type ],\n\t\timplicitRelative = leadingRelative || Expr.relative[ \" \" ],\n\t\ti = leadingRelative ? 1 : 0,\n\n\t\t// The foundational matcher ensures that elements are reachable from top-level context(s)\n\t\tmatchContext = addCombinator( function( elem ) {\n\t\t\treturn elem === checkContext;\n\t\t}, implicitRelative, true ),\n\t\tmatchAnyContext = addCombinator( function( elem ) {\n\t\t\treturn indexOf( checkContext, elem ) > -1;\n\t\t}, implicitRelative, true ),\n\t\tmatchers = [ function( elem, context, xml ) {\n\t\t\tvar ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (\n\t\t\t\t( checkContext = context ).nodeType ?\n\t\t\t\t\tmatchContext( elem, context, xml ) :\n\t\t\t\t\tmatchAnyContext( elem, context, xml ) );\n\n\t\t\t// Avoid hanging onto element (issue #299)\n\t\t\tcheckContext = null;\n\t\t\treturn ret;\n\t\t} ];\n\n\tfor ( ; i < len; i++ ) {\n\t\tif ( ( matcher = Expr.relative[ tokens[ i ].type ] ) ) {\n\t\t\tmatchers = [ addCombinator( elementMatcher( matchers ), matcher ) ];\n\t\t} else {\n\t\t\tmatcher = Expr.filter[ tokens[ i ].type ].apply( null, tokens[ i ].matches );\n\n\t\t\t// Return special upon seeing a positional matcher\n\t\t\tif ( matcher[ expando ] ) {\n\n\t\t\t\t// Find the next relative operator (if any) for proper handling\n\t\t\t\tj = ++i;\n\t\t\t\tfor ( ; j < len; j++ ) {\n\t\t\t\t\tif ( Expr.relative[ tokens[ j ].type ] ) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn setMatcher(\n\t\t\t\t\ti > 1 && elementMatcher( matchers ),\n\t\t\t\t\ti > 1 && toSelector(\n\n\t\t\t\t\t// If the preceding token was a descendant combinator, insert an implicit any-element `*`\n\t\t\t\t\ttokens\n\t\t\t\t\t\t.slice( 0, i - 1 )\n\t\t\t\t\t\t.concat( { value: tokens[ i - 2 ].type === \" \" ? \"*\" : \"\" } )\n\t\t\t\t\t).replace( rtrim, \"$1\" ),\n\t\t\t\t\tmatcher,\n\t\t\t\t\ti < j && matcherFromTokens( tokens.slice( i, j ) ),\n\t\t\t\t\tj < len && matcherFromTokens( ( tokens = tokens.slice( j ) ) ),\n\t\t\t\t\tj < len && toSelector( tokens )\n\t\t\t\t);\n\t\t\t}\n\t\t\tmatchers.push( matcher );\n\t\t}\n\t}\n\n\treturn elementMatcher( matchers );\n}\n\nfunction matcherFromGroupMatchers( elementMatchers, setMatchers ) {\n\tvar bySet = setMatchers.length > 0,\n\t\tbyElement = elementMatchers.length > 0,\n\t\tsuperMatcher = function( seed, context, xml, results, outermost ) {\n\t\t\tvar elem, j, matcher,\n\t\t\t\tmatchedCount = 0,\n\t\t\t\ti = \"0\",\n\t\t\t\tunmatched = seed && [],\n\t\t\t\tsetMatched = [],\n\t\t\t\tcontextBackup = outermostContext,\n\n\t\t\t\t// We must always have either seed elements or outermost context\n\t\t\t\telems = seed || byElement && Expr.find[ \"TAG\" ]( \"*\", outermost ),\n\n\t\t\t\t// Use integer dirruns iff this is the outermost matcher\n\t\t\t\tdirrunsUnique = ( dirruns += contextBackup == null ? 1 : Math.random() || 0.1 ),\n\t\t\t\tlen = elems.length;\n\n\t\t\tif ( outermost ) {\n\n\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\toutermostContext = context == document || context || outermost;\n\t\t\t}\n\n\t\t\t// Add elements passing elementMatchers directly to results\n\t\t\t// Support: IE<9, Safari\n\t\t\t// Tolerate NodeList properties (IE: \"length\"; Safari: <number>) matching elements by id\n\t\t\tfor ( ; i !== len && ( elem = elems[ i ] ) != null; i++ ) {\n\t\t\t\tif ( byElement && elem ) {\n\t\t\t\t\tj = 0;\n\n\t\t\t\t\t// Support: IE 11+, Edge 17 - 18+\n\t\t\t\t\t// IE/Edge sometimes throw a \"Permission denied\" error when strict-comparing\n\t\t\t\t\t// two documents; shallow comparisons work.\n\t\t\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\t\t\tif ( !context && elem.ownerDocument != document ) {\n\t\t\t\t\t\tsetDocument( elem );\n\t\t\t\t\t\txml = !documentIsHTML;\n\t\t\t\t\t}\n\t\t\t\t\twhile ( ( matcher = elementMatchers[ j++ ] ) ) {\n\t\t\t\t\t\tif ( matcher( elem, context || document, xml ) ) {\n\t\t\t\t\t\t\tresults.push( elem );\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( outermost ) {\n\t\t\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Track unmatched elements for set filters\n\t\t\t\tif ( bySet ) {\n\n\t\t\t\t\t// They will have gone through all possible matchers\n\t\t\t\t\tif ( ( elem = !matcher && elem ) ) {\n\t\t\t\t\t\tmatchedCount--;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Lengthen the array for every element, matched or not\n\t\t\t\t\tif ( seed ) {\n\t\t\t\t\t\tunmatched.push( elem );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// `i` is now the count of elements visited above, and adding it to `matchedCount`\n\t\t\t// makes the latter nonnegative.\n\t\t\tmatchedCount += i;\n\n\t\t\t// Apply set filters to unmatched elements\n\t\t\t// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`\n\t\t\t// equals `i`), unless we didn't visit _any_ elements in the above loop because we have\n\t\t\t// no element matchers and no seed.\n\t\t\t// Incrementing an initially-string \"0\" `i` allows `i` to remain a string only in that\n\t\t\t// case, which will result in a \"00\" `matchedCount` that differs from `i` but is also\n\t\t\t// numerically zero.\n\t\t\tif ( bySet && i !== matchedCount ) {\n\t\t\t\tj = 0;\n\t\t\t\twhile ( ( matcher = setMatchers[ j++ ] ) ) {\n\t\t\t\t\tmatcher( unmatched, setMatched, context, xml );\n\t\t\t\t}\n\n\t\t\t\tif ( seed ) {\n\n\t\t\t\t\t// Reintegrate element matches to eliminate the need for sorting\n\t\t\t\t\tif ( matchedCount > 0 ) {\n\t\t\t\t\t\twhile ( i-- ) {\n\t\t\t\t\t\t\tif ( !( unmatched[ i ] || setMatched[ i ] ) ) {\n\t\t\t\t\t\t\t\tsetMatched[ i ] = pop.call( results );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Discard index placeholder values to get only actual matches\n\t\t\t\t\tsetMatched = condense( setMatched );\n\t\t\t\t}\n\n\t\t\t\t// Add matches to results\n\t\t\t\tpush.apply( results, setMatched );\n\n\t\t\t\t// Seedless set matches succeeding multiple successful matchers stipulate sorting\n\t\t\t\tif ( outermost && !seed && setMatched.length > 0 &&\n\t\t\t\t\t( matchedCount + setMatchers.length ) > 1 ) {\n\n\t\t\t\t\tSizzle.uniqueSort( results );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Override manipulation of globals by nested matchers\n\t\t\tif ( outermost ) {\n\t\t\t\tdirruns = dirrunsUnique;\n\t\t\t\toutermostContext = contextBackup;\n\t\t\t}\n\n\t\t\treturn unmatched;\n\t\t};\n\n\treturn bySet ?\n\t\tmarkFunction( superMatcher ) :\n\t\tsuperMatcher;\n}\n\ncompile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {\n\tvar i,\n\t\tsetMatchers = [],\n\t\telementMatchers = [],\n\t\tcached = compilerCache[ selector + \" \" ];\n\n\tif ( !cached ) {\n\n\t\t// Generate a function of recursive functions that can be used to check each element\n\t\tif ( !match ) {\n\t\t\tmatch = tokenize( selector );\n\t\t}\n\t\ti = match.length;\n\t\twhile ( i-- ) {\n\t\t\tcached = matcherFromTokens( match[ i ] );\n\t\t\tif ( cached[ expando ] ) {\n\t\t\t\tsetMatchers.push( cached );\n\t\t\t} else {\n\t\t\t\telementMatchers.push( cached );\n\t\t\t}\n\t\t}\n\n\t\t// Cache the compiled function\n\t\tcached = compilerCache(\n\t\t\tselector,\n\t\t\tmatcherFromGroupMatchers( elementMatchers, setMatchers )\n\t\t);\n\n\t\t// Save selector and tokenization\n\t\tcached.selector = selector;\n\t}\n\treturn cached;\n};\n\n/**\n * A low-level selection function that works with Sizzle's compiled\n *  selector functions\n * @param {String|Function} selector A selector or a pre-compiled\n *  selector function built with Sizzle.compile\n * @param {Element} context\n * @param {Array} [results]\n * @param {Array} [seed] A set of elements to match against\n */\nselect = Sizzle.select = function( selector, context, results, seed ) {\n\tvar i, tokens, token, type, find,\n\t\tcompiled = typeof selector === \"function\" && selector,\n\t\tmatch = !seed && tokenize( ( selector = compiled.selector || selector ) );\n\n\tresults = results || [];\n\n\t// Try to minimize operations if there is only one selector in the list and no seed\n\t// (the latter of which guarantees us context)\n\tif ( match.length === 1 ) {\n\n\t\t// Reduce context if the leading compound selector is an ID\n\t\ttokens = match[ 0 ] = match[ 0 ].slice( 0 );\n\t\tif ( tokens.length > 2 && ( token = tokens[ 0 ] ).type === \"ID\" &&\n\t\t\tcontext.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[ 1 ].type ] ) {\n\n\t\t\tcontext = ( Expr.find[ \"ID\" ]( token.matches[ 0 ]\n\t\t\t\t.replace( runescape, funescape ), context ) || [] )[ 0 ];\n\t\t\tif ( !context ) {\n\t\t\t\treturn results;\n\n\t\t\t// Precompiled matchers will still verify ancestry, so step up a level\n\t\t\t} else if ( compiled ) {\n\t\t\t\tcontext = context.parentNode;\n\t\t\t}\n\n\t\t\tselector = selector.slice( tokens.shift().value.length );\n\t\t}\n\n\t\t// Fetch a seed set for right-to-left matching\n\t\ti = matchExpr[ \"needsContext\" ].test( selector ) ? 0 : tokens.length;\n\t\twhile ( i-- ) {\n\t\t\ttoken = tokens[ i ];\n\n\t\t\t// Abort if we hit a combinator\n\t\t\tif ( Expr.relative[ ( type = token.type ) ] ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( ( find = Expr.find[ type ] ) ) {\n\n\t\t\t\t// Search, expanding context for leading sibling combinators\n\t\t\t\tif ( ( seed = find(\n\t\t\t\t\ttoken.matches[ 0 ].replace( runescape, funescape ),\n\t\t\t\t\trsibling.test( tokens[ 0 ].type ) && testContext( context.parentNode ) ||\n\t\t\t\t\t\tcontext\n\t\t\t\t) ) ) {\n\n\t\t\t\t\t// If seed is empty or no tokens remain, we can return early\n\t\t\t\t\ttokens.splice( i, 1 );\n\t\t\t\t\tselector = seed.length && toSelector( tokens );\n\t\t\t\t\tif ( !selector ) {\n\t\t\t\t\t\tpush.apply( results, seed );\n\t\t\t\t\t\treturn results;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Compile and execute a filtering function if one is not provided\n\t// Provide `match` to avoid retokenization if we modified the selector above\n\t( compiled || compile( selector, match ) )(\n\t\tseed,\n\t\tcontext,\n\t\t!documentIsHTML,\n\t\tresults,\n\t\t!context || rsibling.test( selector ) && testContext( context.parentNode ) || context\n\t);\n\treturn results;\n};\n\n// One-time assignments\n\n// Sort stability\nsupport.sortStable = expando.split( \"\" ).sort( sortOrder ).join( \"\" ) === expando;\n\n// Support: Chrome 14-35+\n// Always assume duplicates if they aren't passed to the comparison function\nsupport.detectDuplicates = !!hasDuplicate;\n\n// Initialize against the default document\nsetDocument();\n\n// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)\n// Detached nodes confoundingly follow *each other*\nsupport.sortDetached = assert( function( el ) {\n\n\t// Should return 1, but returns 4 (following)\n\treturn el.compareDocumentPosition( document.createElement( \"fieldset\" ) ) & 1;\n} );\n\n// Support: IE<8\n// Prevent attribute/property \"interpolation\"\n// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx\nif ( !assert( function( el ) {\n\tel.innerHTML = \"<a href='#'></a>\";\n\treturn el.firstChild.getAttribute( \"href\" ) === \"#\";\n} ) ) {\n\taddHandle( \"type|href|height|width\", function( elem, name, isXML ) {\n\t\tif ( !isXML ) {\n\t\t\treturn elem.getAttribute( name, name.toLowerCase() === \"type\" ? 1 : 2 );\n\t\t}\n\t} );\n}\n\n// Support: IE<9\n// Use defaultValue in place of getAttribute(\"value\")\nif ( !support.attributes || !assert( function( el ) {\n\tel.innerHTML = \"<input/>\";\n\tel.firstChild.setAttribute( \"value\", \"\" );\n\treturn el.firstChild.getAttribute( \"value\" ) === \"\";\n} ) ) {\n\taddHandle( \"value\", function( elem, _name, isXML ) {\n\t\tif ( !isXML && elem.nodeName.toLowerCase() === \"input\" ) {\n\t\t\treturn elem.defaultValue;\n\t\t}\n\t} );\n}\n\n// Support: IE<9\n// Use getAttributeNode to fetch booleans when getAttribute lies\nif ( !assert( function( el ) {\n\treturn el.getAttribute( \"disabled\" ) == null;\n} ) ) {\n\taddHandle( booleans, function( elem, name, isXML ) {\n\t\tvar val;\n\t\tif ( !isXML ) {\n\t\t\treturn elem[ name ] === true ? name.toLowerCase() :\n\t\t\t\t( val = elem.getAttributeNode( name ) ) && val.specified ?\n\t\t\t\t\tval.value :\n\t\t\t\t\tnull;\n\t\t}\n\t} );\n}\n\nreturn Sizzle;\n\n} )( window );\n\n\n\njQuery.find = Sizzle;\njQuery.expr = Sizzle.selectors;\n\n// Deprecated\njQuery.expr[ \":\" ] = jQuery.expr.pseudos;\njQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;\njQuery.text = Sizzle.getText;\njQuery.isXMLDoc = Sizzle.isXML;\njQuery.contains = Sizzle.contains;\njQuery.escapeSelector = Sizzle.escape;\n\n\n\n\nvar dir = function( elem, dir, until ) {\n\tvar matched = [],\n\t\ttruncate = until !== undefined;\n\n\twhile ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {\n\t\tif ( elem.nodeType === 1 ) {\n\t\t\tif ( truncate && jQuery( elem ).is( until ) ) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tmatched.push( elem );\n\t\t}\n\t}\n\treturn matched;\n};\n\n\nvar siblings = function( n, elem ) {\n\tvar matched = [];\n\n\tfor ( ; n; n = n.nextSibling ) {\n\t\tif ( n.nodeType === 1 && n !== elem ) {\n\t\t\tmatched.push( n );\n\t\t}\n\t}\n\n\treturn matched;\n};\n\n\nvar rneedsContext = jQuery.expr.match.needsContext;\n\n\n\nfunction nodeName( elem, name ) {\n\n\treturn elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();\n\n}\nvar rsingleTag = ( /^<([a-z][^\\/\\0>:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?>(?:<\\/\\1>|)$/i );\n\n\n\n// Implement the identical functionality for filter and not\nfunction winnow( elements, qualifier, not ) {\n\tif ( isFunction( qualifier ) ) {\n\t\treturn jQuery.grep( elements, function( elem, i ) {\n\t\t\treturn !!qualifier.call( elem, i, elem ) !== not;\n\t\t} );\n\t}\n\n\t// Single element\n\tif ( qualifier.nodeType ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( elem === qualifier ) !== not;\n\t\t} );\n\t}\n\n\t// Arraylike of elements (jQuery, arguments, Array)\n\tif ( typeof qualifier !== \"string\" ) {\n\t\treturn jQuery.grep( elements, function( elem ) {\n\t\t\treturn ( indexOf.call( qualifier, elem ) > -1 ) !== not;\n\t\t} );\n\t}\n\n\t// Filtered directly for both simple and complex selectors\n\treturn jQuery.filter( qualifier, elements, not );\n}\n\njQuery.filter = function( expr, elems, not ) {\n\tvar elem = elems[ 0 ];\n\n\tif ( not ) {\n\t\texpr = \":not(\" + expr + \")\";\n\t}\n\n\tif ( elems.length === 1 && elem.nodeType === 1 ) {\n\t\treturn jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];\n\t}\n\n\treturn jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {\n\t\treturn elem.nodeType === 1;\n\t} ) );\n};\n\njQuery.fn.extend( {\n\tfind: function( selector ) {\n\t\tvar i, ret,\n\t\t\tlen = this.length,\n\t\t\tself = this;\n\n\t\tif ( typeof selector !== \"string\" ) {\n\t\t\treturn this.pushStack( jQuery( selector ).filter( function() {\n\t\t\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\t\t\tif ( jQuery.contains( self[ i ], this ) ) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} ) );\n\t\t}\n\n\t\tret = this.pushStack( [] );\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tjQuery.find( selector, self[ i ], ret );\n\t\t}\n\n\t\treturn len > 1 ? jQuery.uniqueSort( ret ) : ret;\n\t},\n\tfilter: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], false ) );\n\t},\n\tnot: function( selector ) {\n\t\treturn this.pushStack( winnow( this, selector || [], true ) );\n\t},\n\tis: function( selector ) {\n\t\treturn !!winnow(\n\t\t\tthis,\n\n\t\t\t// If this is a positional/relative selector, check membership in the returned set\n\t\t\t// so $(\"p:first\").is(\"p:last\") won't return true for a doc with two \"p\".\n\t\t\ttypeof selector === \"string\" && rneedsContext.test( selector ) ?\n\t\t\t\tjQuery( selector ) :\n\t\t\t\tselector || [],\n\t\t\tfalse\n\t\t).length;\n\t}\n} );\n\n\n// Initialize a jQuery object\n\n\n// A central reference to the root jQuery(document)\nvar rootjQuery,\n\n\t// A simple way to check for HTML strings\n\t// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)\n\t// Strict HTML recognition (#11290: must start with <)\n\t// Shortcut simple #id case for speed\n\trquickExpr = /^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]+))$/,\n\n\tinit = jQuery.fn.init = function( selector, context, root ) {\n\t\tvar match, elem;\n\n\t\t// HANDLE: $(\"\"), $(null), $(undefined), $(false)\n\t\tif ( !selector ) {\n\t\t\treturn this;\n\t\t}\n\n\t\t// Method init() accepts an alternate rootjQuery\n\t\t// so migrate can support jQuery.sub (gh-2101)\n\t\troot = root || rootjQuery;\n\n\t\t// Handle HTML strings\n\t\tif ( typeof selector === \"string\" ) {\n\t\t\tif ( selector[ 0 ] === \"<\" &&\n\t\t\t\tselector[ selector.length - 1 ] === \">\" &&\n\t\t\t\tselector.length >= 3 ) {\n\n\t\t\t\t// Assume that strings that start and end with <> are HTML and skip the regex check\n\t\t\t\tmatch = [ null, selector, null ];\n\n\t\t\t} else {\n\t\t\t\tmatch = rquickExpr.exec( selector );\n\t\t\t}\n\n\t\t\t// Match html or make sure no context is specified for #id\n\t\t\tif ( match && ( match[ 1 ] || !context ) ) {\n\n\t\t\t\t// HANDLE: $(html) -> $(array)\n\t\t\t\tif ( match[ 1 ] ) {\n\t\t\t\t\tcontext = context instanceof jQuery ? context[ 0 ] : context;\n\n\t\t\t\t\t// Option to run scripts is true for back-compat\n\t\t\t\t\t// Intentionally let the error be thrown if parseHTML is not present\n\t\t\t\t\tjQuery.merge( this, jQuery.parseHTML(\n\t\t\t\t\t\tmatch[ 1 ],\n\t\t\t\t\t\tcontext && context.nodeType ? context.ownerDocument || context : document,\n\t\t\t\t\t\ttrue\n\t\t\t\t\t) );\n\n\t\t\t\t\t// HANDLE: $(html, props)\n\t\t\t\t\tif ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {\n\t\t\t\t\t\tfor ( match in context ) {\n\n\t\t\t\t\t\t\t// Properties of context are called as methods if possible\n\t\t\t\t\t\t\tif ( isFunction( this[ match ] ) ) {\n\t\t\t\t\t\t\t\tthis[ match ]( context[ match ] );\n\n\t\t\t\t\t\t\t// ...and otherwise set as attributes\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthis.attr( match, context[ match ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this;\n\n\t\t\t\t// HANDLE: $(#id)\n\t\t\t\t} else {\n\t\t\t\t\telem = document.getElementById( match[ 2 ] );\n\n\t\t\t\t\tif ( elem ) {\n\n\t\t\t\t\t\t// Inject the element directly into the jQuery object\n\t\t\t\t\t\tthis[ 0 ] = elem;\n\t\t\t\t\t\tthis.length = 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t// HANDLE: $(expr, $(...))\n\t\t\t} else if ( !context || context.jquery ) {\n\t\t\t\treturn ( context || root ).find( selector );\n\n\t\t\t// HANDLE: $(expr, context)\n\t\t\t// (which is just equivalent to: $(context).find(expr)\n\t\t\t} else {\n\t\t\t\treturn this.constructor( context ).find( selector );\n\t\t\t}\n\n\t\t// HANDLE: $(DOMElement)\n\t\t} else if ( selector.nodeType ) {\n\t\t\tthis[ 0 ] = selector;\n\t\t\tthis.length = 1;\n\t\t\treturn this;\n\n\t\t// HANDLE: $(function)\n\t\t// Shortcut for document ready\n\t\t} else if ( isFunction( selector ) ) {\n\t\t\treturn root.ready !== undefined ?\n\t\t\t\troot.ready( selector ) :\n\n\t\t\t\t// Execute immediately if ready is not present\n\t\t\t\tselector( jQuery );\n\t\t}\n\n\t\treturn jQuery.makeArray( selector, this );\n\t};\n\n// Give the init function the jQuery prototype for later instantiation\ninit.prototype = jQuery.fn;\n\n// Initialize central reference\nrootjQuery = jQuery( document );\n\n\nvar rparentsprev = /^(?:parents|prev(?:Until|All))/,\n\n\t// Methods guaranteed to produce a unique set when starting from a unique set\n\tguaranteedUnique = {\n\t\tchildren: true,\n\t\tcontents: true,\n\t\tnext: true,\n\t\tprev: true\n\t};\n\njQuery.fn.extend( {\n\thas: function( target ) {\n\t\tvar targets = jQuery( target, this ),\n\t\t\tl = targets.length;\n\n\t\treturn this.filter( function() {\n\t\t\tvar i = 0;\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tif ( jQuery.contains( this, targets[ i ] ) ) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\tclosest: function( selectors, context ) {\n\t\tvar cur,\n\t\t\ti = 0,\n\t\t\tl = this.length,\n\t\t\tmatched = [],\n\t\t\ttargets = typeof selectors !== \"string\" && jQuery( selectors );\n\n\t\t// Positional selectors never match, since there's no _selection_ context\n\t\tif ( !rneedsContext.test( selectors ) ) {\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tfor ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {\n\n\t\t\t\t\t// Always skip document fragments\n\t\t\t\t\tif ( cur.nodeType < 11 && ( targets ?\n\t\t\t\t\t\ttargets.index( cur ) > -1 :\n\n\t\t\t\t\t\t// Don't pass non-elements to Sizzle\n\t\t\t\t\t\tcur.nodeType === 1 &&\n\t\t\t\t\t\t\tjQuery.find.matchesSelector( cur, selectors ) ) ) {\n\n\t\t\t\t\t\tmatched.push( cur );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );\n\t},\n\n\t// Determine the position of an element within the set\n\tindex: function( elem ) {\n\n\t\t// No argument, return index in parent\n\t\tif ( !elem ) {\n\t\t\treturn ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;\n\t\t}\n\n\t\t// Index in selector\n\t\tif ( typeof elem === \"string\" ) {\n\t\t\treturn indexOf.call( jQuery( elem ), this[ 0 ] );\n\t\t}\n\n\t\t// Locate the position of the desired element\n\t\treturn indexOf.call( this,\n\n\t\t\t// If it receives a jQuery object, the first element is used\n\t\t\telem.jquery ? elem[ 0 ] : elem\n\t\t);\n\t},\n\n\tadd: function( selector, context ) {\n\t\treturn this.pushStack(\n\t\t\tjQuery.uniqueSort(\n\t\t\t\tjQuery.merge( this.get(), jQuery( selector, context ) )\n\t\t\t)\n\t\t);\n\t},\n\n\taddBack: function( selector ) {\n\t\treturn this.add( selector == null ?\n\t\t\tthis.prevObject : this.prevObject.filter( selector )\n\t\t);\n\t}\n} );\n\nfunction sibling( cur, dir ) {\n\twhile ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}\n\treturn cur;\n}\n\njQuery.each( {\n\tparent: function( elem ) {\n\t\tvar parent = elem.parentNode;\n\t\treturn parent && parent.nodeType !== 11 ? parent : null;\n\t},\n\tparents: function( elem ) {\n\t\treturn dir( elem, \"parentNode\" );\n\t},\n\tparentsUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"parentNode\", until );\n\t},\n\tnext: function( elem ) {\n\t\treturn sibling( elem, \"nextSibling\" );\n\t},\n\tprev: function( elem ) {\n\t\treturn sibling( elem, \"previousSibling\" );\n\t},\n\tnextAll: function( elem ) {\n\t\treturn dir( elem, \"nextSibling\" );\n\t},\n\tprevAll: function( elem ) {\n\t\treturn dir( elem, \"previousSibling\" );\n\t},\n\tnextUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"nextSibling\", until );\n\t},\n\tprevUntil: function( elem, _i, until ) {\n\t\treturn dir( elem, \"previousSibling\", until );\n\t},\n\tsiblings: function( elem ) {\n\t\treturn siblings( ( elem.parentNode || {} ).firstChild, elem );\n\t},\n\tchildren: function( elem ) {\n\t\treturn siblings( elem.firstChild );\n\t},\n\tcontents: function( elem ) {\n\t\tif ( elem.contentDocument != null &&\n\n\t\t\t// Support: IE 11+\n\t\t\t// <object> elements with no `data` attribute has an object\n\t\t\t// `contentDocument` with a `null` prototype.\n\t\t\tgetProto( elem.contentDocument ) ) {\n\n\t\t\treturn elem.contentDocument;\n\t\t}\n\n\t\t// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only\n\t\t// Treat the template element as a regular one in browsers that\n\t\t// don't support it.\n\t\tif ( nodeName( elem, \"template\" ) ) {\n\t\t\telem = elem.content || elem;\n\t\t}\n\n\t\treturn jQuery.merge( [], elem.childNodes );\n\t}\n}, function( name, fn ) {\n\tjQuery.fn[ name ] = function( until, selector ) {\n\t\tvar matched = jQuery.map( this, fn, until );\n\n\t\tif ( name.slice( -5 ) !== \"Until\" ) {\n\t\t\tselector = until;\n\t\t}\n\n\t\tif ( selector && typeof selector === \"string\" ) {\n\t\t\tmatched = jQuery.filter( selector, matched );\n\t\t}\n\n\t\tif ( this.length > 1 ) {\n\n\t\t\t// Remove duplicates\n\t\t\tif ( !guaranteedUnique[ name ] ) {\n\t\t\t\tjQuery.uniqueSort( matched );\n\t\t\t}\n\n\t\t\t// Reverse order for parents* and prev-derivatives\n\t\t\tif ( rparentsprev.test( name ) ) {\n\t\t\t\tmatched.reverse();\n\t\t\t}\n\t\t}\n\n\t\treturn this.pushStack( matched );\n\t};\n} );\nvar rnothtmlwhite = ( /[^\\x20\\t\\r\\n\\f]+/g );\n\n\n\n// Convert String-formatted options into Object-formatted ones\nfunction createOptions( options ) {\n\tvar object = {};\n\tjQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {\n\t\tobject[ flag ] = true;\n\t} );\n\treturn object;\n}\n\n/*\n * Create a callback list using the following parameters:\n *\n *\toptions: an optional list of space-separated options that will change how\n *\t\t\tthe callback list behaves or a more traditional option object\n *\n * By default a callback list will act like an event callback list and can be\n * \"fired\" multiple times.\n *\n * Possible options:\n *\n *\tonce:\t\t\twill ensure the callback list can only be fired once (like a Deferred)\n *\n *\tmemory:\t\t\twill keep track of previous values and will call any callback added\n *\t\t\t\t\tafter the list has been fired right away with the latest \"memorized\"\n *\t\t\t\t\tvalues (like a Deferred)\n *\n *\tunique:\t\t\twill ensure a callback can only be added once (no duplicate in the list)\n *\n *\tstopOnFalse:\tinterrupt callings when a callback returns false\n *\n */\njQuery.Callbacks = function( options ) {\n\n\t// Convert options from String-formatted to Object-formatted if needed\n\t// (we check in cache first)\n\toptions = typeof options === \"string\" ?\n\t\tcreateOptions( options ) :\n\t\tjQuery.extend( {}, options );\n\n\tvar // Flag to know if list is currently firing\n\t\tfiring,\n\n\t\t// Last fire value for non-forgettable lists\n\t\tmemory,\n\n\t\t// Flag to know if list was already fired\n\t\tfired,\n\n\t\t// Flag to prevent firing\n\t\tlocked,\n\n\t\t// Actual callback list\n\t\tlist = [],\n\n\t\t// Queue of execution data for repeatable lists\n\t\tqueue = [],\n\n\t\t// Index of currently firing callback (modified by add/remove as needed)\n\t\tfiringIndex = -1,\n\n\t\t// Fire callbacks\n\t\tfire = function() {\n\n\t\t\t// Enforce single-firing\n\t\t\tlocked = locked || options.once;\n\n\t\t\t// Execute callbacks for all pending executions,\n\t\t\t// respecting firingIndex overrides and runtime changes\n\t\t\tfired = firing = true;\n\t\t\tfor ( ; queue.length; firingIndex = -1 ) {\n\t\t\t\tmemory = queue.shift();\n\t\t\t\twhile ( ++firingIndex < list.length ) {\n\n\t\t\t\t\t// Run callback and check for early termination\n\t\t\t\t\tif ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&\n\t\t\t\t\t\toptions.stopOnFalse ) {\n\n\t\t\t\t\t\t// Jump to end and forget the data so .add doesn't re-fire\n\t\t\t\t\t\tfiringIndex = list.length;\n\t\t\t\t\t\tmemory = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Forget the data if we're done with it\n\t\t\tif ( !options.memory ) {\n\t\t\t\tmemory = false;\n\t\t\t}\n\n\t\t\tfiring = false;\n\n\t\t\t// Clean up if we're done firing for good\n\t\t\tif ( locked ) {\n\n\t\t\t\t// Keep an empty list if we have data for future add calls\n\t\t\t\tif ( memory ) {\n\t\t\t\t\tlist = [];\n\n\t\t\t\t// Otherwise, this object is spent\n\t\t\t\t} else {\n\t\t\t\t\tlist = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// Actual Callbacks object\n\t\tself = {\n\n\t\t\t// Add a callback or a collection of callbacks to the list\n\t\t\tadd: function() {\n\t\t\t\tif ( list ) {\n\n\t\t\t\t\t// If we have memory from a past run, we should fire after adding\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfiringIndex = list.length - 1;\n\t\t\t\t\t\tqueue.push( memory );\n\t\t\t\t\t}\n\n\t\t\t\t\t( function add( args ) {\n\t\t\t\t\t\tjQuery.each( args, function( _, arg ) {\n\t\t\t\t\t\t\tif ( isFunction( arg ) ) {\n\t\t\t\t\t\t\t\tif ( !options.unique || !self.has( arg ) ) {\n\t\t\t\t\t\t\t\t\tlist.push( arg );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if ( arg && arg.length && toType( arg ) !== \"string\" ) {\n\n\t\t\t\t\t\t\t\t// Inspect recursively\n\t\t\t\t\t\t\t\tadd( arg );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\t\t\t\t\t} )( arguments );\n\n\t\t\t\t\tif ( memory && !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Remove a callback from the list\n\t\t\tremove: function() {\n\t\t\t\tjQuery.each( arguments, function( _, arg ) {\n\t\t\t\t\tvar index;\n\t\t\t\t\twhile ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {\n\t\t\t\t\t\tlist.splice( index, 1 );\n\n\t\t\t\t\t\t// Handle firing indexes\n\t\t\t\t\t\tif ( index <= firingIndex ) {\n\t\t\t\t\t\t\tfiringIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Check if a given callback is in the list.\n\t\t\t// If no argument is given, return whether or not list has callbacks attached.\n\t\t\thas: function( fn ) {\n\t\t\t\treturn fn ?\n\t\t\t\t\tjQuery.inArray( fn, list ) > -1 :\n\t\t\t\t\tlist.length > 0;\n\t\t\t},\n\n\t\t\t// Remove all callbacks from the list\n\t\t\tempty: function() {\n\t\t\t\tif ( list ) {\n\t\t\t\t\tlist = [];\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Disable .fire and .add\n\t\t\t// Abort any current/pending executions\n\t\t\t// Clear all callbacks and values\n\t\t\tdisable: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tlist = memory = \"\";\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tdisabled: function() {\n\t\t\t\treturn !list;\n\t\t\t},\n\n\t\t\t// Disable .fire\n\t\t\t// Also disable .add unless we have memory (since it would have no effect)\n\t\t\t// Abort any pending executions\n\t\t\tlock: function() {\n\t\t\t\tlocked = queue = [];\n\t\t\t\tif ( !memory && !firing ) {\n\t\t\t\t\tlist = memory = \"\";\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\t\t\tlocked: function() {\n\t\t\t\treturn !!locked;\n\t\t\t},\n\n\t\t\t// Call all callbacks with the given context and arguments\n\t\t\tfireWith: function( context, args ) {\n\t\t\t\tif ( !locked ) {\n\t\t\t\t\targs = args || [];\n\t\t\t\t\targs = [ context, args.slice ? args.slice() : args ];\n\t\t\t\t\tqueue.push( args );\n\t\t\t\t\tif ( !firing ) {\n\t\t\t\t\t\tfire();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// Call all the callbacks with the given arguments\n\t\t\tfire: function() {\n\t\t\t\tself.fireWith( this, arguments );\n\t\t\t\treturn this;\n\t\t\t},\n\n\t\t\t// To know if the callbacks have already been called at least once\n\t\t\tfired: function() {\n\t\t\t\treturn !!fired;\n\t\t\t}\n\t\t};\n\n\treturn self;\n};\n\n\nfunction Identity( v ) {\n\treturn v;\n}\nfunction Thrower( ex ) {\n\tthrow ex;\n}\n\nfunction adoptValue( value, resolve, reject, noValue ) {\n\tvar method;\n\n\ttry {\n\n\t\t// Check for promise aspect first to privilege synchronous behavior\n\t\tif ( value && isFunction( ( method = value.promise ) ) ) {\n\t\t\tmethod.call( value ).done( resolve ).fail( reject );\n\n\t\t// Other thenables\n\t\t} else if ( value && isFunction( ( method = value.then ) ) ) {\n\t\t\tmethod.call( value, resolve, reject );\n\n\t\t// Other non-thenables\n\t\t} else {\n\n\t\t\t// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:\n\t\t\t// * false: [ value ].slice( 0 ) => resolve( value )\n\t\t\t// * true: [ value ].slice( 1 ) => resolve()\n\t\t\tresolve.apply( undefined, [ value ].slice( noValue ) );\n\t\t}\n\n\t// For Promises/A+, convert exceptions into rejections\n\t// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in\n\t// Deferred#then to conditionally suppress rejection.\n\t} catch ( value ) {\n\n\t\t// Support: Android 4.0 only\n\t\t// Strict mode functions invoked without .call/.apply get global-object context\n\t\treject.apply( undefined, [ value ] );\n\t}\n}\n\njQuery.extend( {\n\n\tDeferred: function( func ) {\n\t\tvar tuples = [\n\n\t\t\t\t// action, add listener, callbacks,\n\t\t\t\t// ... .then handlers, argument index, [final state]\n\t\t\t\t[ \"notify\", \"progress\", jQuery.Callbacks( \"memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"memory\" ), 2 ],\n\t\t\t\t[ \"resolve\", \"done\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 0, \"resolved\" ],\n\t\t\t\t[ \"reject\", \"fail\", jQuery.Callbacks( \"once memory\" ),\n\t\t\t\t\tjQuery.Callbacks( \"once memory\" ), 1, \"rejected\" ]\n\t\t\t],\n\t\t\tstate = \"pending\",\n\t\t\tpromise = {\n\t\t\t\tstate: function() {\n\t\t\t\t\treturn state;\n\t\t\t\t},\n\t\t\t\talways: function() {\n\t\t\t\t\tdeferred.done( arguments ).fail( arguments );\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\t\"catch\": function( fn ) {\n\t\t\t\t\treturn promise.then( null, fn );\n\t\t\t\t},\n\n\t\t\t\t// Keep pipe for back-compat\n\t\t\t\tpipe: function( /* fnDone, fnFail, fnProgress */ ) {\n\t\t\t\t\tvar fns = arguments;\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\t\t\t\t\t\tjQuery.each( tuples, function( _i, tuple ) {\n\n\t\t\t\t\t\t\t// Map tuples (progress, done, fail) to arguments (done, fail, progress)\n\t\t\t\t\t\t\tvar fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];\n\n\t\t\t\t\t\t\t// deferred.progress(function() { bind to newDefer or newDefer.notify })\n\t\t\t\t\t\t\t// deferred.done(function() { bind to newDefer or newDefer.resolve })\n\t\t\t\t\t\t\t// deferred.fail(function() { bind to newDefer or newDefer.reject })\n\t\t\t\t\t\t\tdeferred[ tuple[ 1 ] ]( function() {\n\t\t\t\t\t\t\t\tvar returned = fn && fn.apply( this, arguments );\n\t\t\t\t\t\t\t\tif ( returned && isFunction( returned.promise ) ) {\n\t\t\t\t\t\t\t\t\treturned.promise()\n\t\t\t\t\t\t\t\t\t\t.progress( newDefer.notify )\n\t\t\t\t\t\t\t\t\t\t.done( newDefer.resolve )\n\t\t\t\t\t\t\t\t\t\t.fail( newDefer.reject );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tnewDefer[ tuple[ 0 ] + \"With\" ](\n\t\t\t\t\t\t\t\t\t\tthis,\n\t\t\t\t\t\t\t\t\t\tfn ? [ returned ] : arguments\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t} );\n\t\t\t\t\t\tfns = null;\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\t\t\t\tthen: function( onFulfilled, onRejected, onProgress ) {\n\t\t\t\t\tvar maxDepth = 0;\n\t\t\t\t\tfunction resolve( depth, deferred, handler, special ) {\n\t\t\t\t\t\treturn function() {\n\t\t\t\t\t\t\tvar that = this,\n\t\t\t\t\t\t\t\targs = arguments,\n\t\t\t\t\t\t\t\tmightThrow = function() {\n\t\t\t\t\t\t\t\t\tvar returned, then;\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.3\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-59\n\t\t\t\t\t\t\t\t\t// Ignore double-resolution attempts\n\t\t\t\t\t\t\t\t\tif ( depth < maxDepth ) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturned = handler.apply( that, args );\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.1\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-48\n\t\t\t\t\t\t\t\t\tif ( returned === deferred.promise() ) {\n\t\t\t\t\t\t\t\t\t\tthrow new TypeError( \"Thenable self-resolution\" );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Support: Promises/A+ sections 2.3.3.1, 3.5\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-54\n\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-75\n\t\t\t\t\t\t\t\t\t// Retrieve `then` only once\n\t\t\t\t\t\t\t\t\tthen = returned &&\n\n\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.4\n\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-64\n\t\t\t\t\t\t\t\t\t\t// Only check objects and functions for thenability\n\t\t\t\t\t\t\t\t\t\t( typeof returned === \"object\" ||\n\t\t\t\t\t\t\t\t\t\t\ttypeof returned === \"function\" ) &&\n\t\t\t\t\t\t\t\t\t\treturned.then;\n\n\t\t\t\t\t\t\t\t\t// Handle a returned thenable\n\t\t\t\t\t\t\t\t\tif ( isFunction( then ) ) {\n\n\t\t\t\t\t\t\t\t\t\t// Special processors (notify) just wait for resolution\n\t\t\t\t\t\t\t\t\t\tif ( special ) {\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special )\n\t\t\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t\t\t// Normal processors (resolve) also hook into progress\n\t\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t\t// ...and disregard older resolution values\n\t\t\t\t\t\t\t\t\t\t\tmaxDepth++;\n\n\t\t\t\t\t\t\t\t\t\t\tthen.call(\n\t\t\t\t\t\t\t\t\t\t\t\treturned,\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Thrower, special ),\n\t\t\t\t\t\t\t\t\t\t\t\tresolve( maxDepth, deferred, Identity,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdeferred.notifyWith )\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Handle all other returned values\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\tif ( handler !== Identity ) {\n\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\targs = [ returned ];\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t// Process the value(s)\n\t\t\t\t\t\t\t\t\t\t// Default process is resolve\n\t\t\t\t\t\t\t\t\t\t( special || deferred.resolveWith )( that, args );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\n\t\t\t\t\t\t\t\t// Only normal processors (resolve) catch and reject exceptions\n\t\t\t\t\t\t\t\tprocess = special ?\n\t\t\t\t\t\t\t\t\tmightThrow :\n\t\t\t\t\t\t\t\t\tfunction() {\n\t\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\t\tmightThrow();\n\t\t\t\t\t\t\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t\t\t\t\t\t\tif ( jQuery.Deferred.exceptionHook ) {\n\t\t\t\t\t\t\t\t\t\t\t\tjQuery.Deferred.exceptionHook( e,\n\t\t\t\t\t\t\t\t\t\t\t\t\tprocess.stackTrace );\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.4.1\n\t\t\t\t\t\t\t\t\t\t\t// https://promisesaplus.com/#point-61\n\t\t\t\t\t\t\t\t\t\t\t// Ignore post-resolution exceptions\n\t\t\t\t\t\t\t\t\t\t\tif ( depth + 1 >= maxDepth ) {\n\n\t\t\t\t\t\t\t\t\t\t\t\t// Only substitute handlers pass on context\n\t\t\t\t\t\t\t\t\t\t\t\t// and multiple values (non-spec behavior)\n\t\t\t\t\t\t\t\t\t\t\t\tif ( handler !== Thrower ) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tthat = undefined;\n\t\t\t\t\t\t\t\t\t\t\t\t\targs = [ e ];\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\tdeferred.rejectWith( that, args );\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Support: Promises/A+ section 2.3.3.3.1\n\t\t\t\t\t\t\t// https://promisesaplus.com/#point-57\n\t\t\t\t\t\t\t// Re-resolve promises immediately to dodge false rejection from\n\t\t\t\t\t\t\t// subsequent errors\n\t\t\t\t\t\t\tif ( depth ) {\n\t\t\t\t\t\t\t\tprocess();\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Call an optional hook to record the stack, in case of exception\n\t\t\t\t\t\t\t\t// since it's otherwise lost when execution goes async\n\t\t\t\t\t\t\t\tif ( jQuery.Deferred.getStackHook ) {\n\t\t\t\t\t\t\t\t\tprocess.stackTrace = jQuery.Deferred.getStackHook();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\twindow.setTimeout( process );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn jQuery.Deferred( function( newDefer ) {\n\n\t\t\t\t\t\t// progress_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 0 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onProgress ) ?\n\t\t\t\t\t\t\t\t\tonProgress :\n\t\t\t\t\t\t\t\t\tIdentity,\n\t\t\t\t\t\t\t\tnewDefer.notifyWith\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// fulfilled_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 1 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onFulfilled ) ?\n\t\t\t\t\t\t\t\t\tonFulfilled :\n\t\t\t\t\t\t\t\t\tIdentity\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// rejected_handlers.add( ... )\n\t\t\t\t\t\ttuples[ 2 ][ 3 ].add(\n\t\t\t\t\t\t\tresolve(\n\t\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t\tnewDefer,\n\t\t\t\t\t\t\t\tisFunction( onRejected ) ?\n\t\t\t\t\t\t\t\t\tonRejected :\n\t\t\t\t\t\t\t\t\tThrower\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\t\t\t\t\t} ).promise();\n\t\t\t\t},\n\n\t\t\t\t// Get a promise for this deferred\n\t\t\t\t// If obj is provided, the promise aspect is added to the object\n\t\t\t\tpromise: function( obj ) {\n\t\t\t\t\treturn obj != null ? jQuery.extend( obj, promise ) : promise;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeferred = {};\n\n\t\t// Add list-specific methods\n\t\tjQuery.each( tuples, function( i, tuple ) {\n\t\t\tvar list = tuple[ 2 ],\n\t\t\t\tstateString = tuple[ 5 ];\n\n\t\t\t// promise.progress = list.add\n\t\t\t// promise.done = list.add\n\t\t\t// promise.fail = list.add\n\t\t\tpromise[ tuple[ 1 ] ] = list.add;\n\n\t\t\t// Handle state\n\t\t\tif ( stateString ) {\n\t\t\t\tlist.add(\n\t\t\t\t\tfunction() {\n\n\t\t\t\t\t\t// state = \"resolved\" (i.e., fulfilled)\n\t\t\t\t\t\t// state = \"rejected\"\n\t\t\t\t\t\tstate = stateString;\n\t\t\t\t\t},\n\n\t\t\t\t\t// rejected_callbacks.disable\n\t\t\t\t\t// fulfilled_callbacks.disable\n\t\t\t\t\ttuples[ 3 - i ][ 2 ].disable,\n\n\t\t\t\t\t// rejected_handlers.disable\n\t\t\t\t\t// fulfilled_handlers.disable\n\t\t\t\t\ttuples[ 3 - i ][ 3 ].disable,\n\n\t\t\t\t\t// progress_callbacks.lock\n\t\t\t\t\ttuples[ 0 ][ 2 ].lock,\n\n\t\t\t\t\t// progress_handlers.lock\n\t\t\t\t\ttuples[ 0 ][ 3 ].lock\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// progress_handlers.fire\n\t\t\t// fulfilled_handlers.fire\n\t\t\t// rejected_handlers.fire\n\t\t\tlist.add( tuple[ 3 ].fire );\n\n\t\t\t// deferred.notify = function() { deferred.notifyWith(...) }\n\t\t\t// deferred.resolve = function() { deferred.resolveWith(...) }\n\t\t\t// deferred.reject = function() { deferred.rejectWith(...) }\n\t\t\tdeferred[ tuple[ 0 ] ] = function() {\n\t\t\t\tdeferred[ tuple[ 0 ] + \"With\" ]( this === deferred ? undefined : this, arguments );\n\t\t\t\treturn this;\n\t\t\t};\n\n\t\t\t// deferred.notifyWith = list.fireWith\n\t\t\t// deferred.resolveWith = list.fireWith\n\t\t\t// deferred.rejectWith = list.fireWith\n\t\t\tdeferred[ tuple[ 0 ] + \"With\" ] = list.fireWith;\n\t\t} );\n\n\t\t// Make the deferred a promise\n\t\tpromise.promise( deferred );\n\n\t\t// Call given func if any\n\t\tif ( func ) {\n\t\t\tfunc.call( deferred, deferred );\n\t\t}\n\n\t\t// All done!\n\t\treturn deferred;\n\t},\n\n\t// Deferred helper\n\twhen: function( singleValue ) {\n\t\tvar\n\n\t\t\t// count of uncompleted subordinates\n\t\t\tremaining = arguments.length,\n\n\t\t\t// count of unprocessed arguments\n\t\t\ti = remaining,\n\n\t\t\t// subordinate fulfillment data\n\t\t\tresolveContexts = Array( i ),\n\t\t\tresolveValues = slice.call( arguments ),\n\n\t\t\t// the primary Deferred\n\t\t\tprimary = jQuery.Deferred(),\n\n\t\t\t// subordinate callback factory\n\t\t\tupdateFunc = function( i ) {\n\t\t\t\treturn function( value ) {\n\t\t\t\t\tresolveContexts[ i ] = this;\n\t\t\t\t\tresolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;\n\t\t\t\t\tif ( !( --remaining ) ) {\n\t\t\t\t\t\tprimary.resolveWith( resolveContexts, resolveValues );\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t};\n\n\t\t// Single- and empty arguments are adopted like Promise.resolve\n\t\tif ( remaining <= 1 ) {\n\t\t\tadoptValue( singleValue, primary.done( updateFunc( i ) ).resolve, primary.reject,\n\t\t\t\t!remaining );\n\n\t\t\t// Use .then() to unwrap secondary thenables (cf. gh-3000)\n\t\t\tif ( primary.state() === \"pending\" ||\n\t\t\t\tisFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {\n\n\t\t\t\treturn primary.then();\n\t\t\t}\n\t\t}\n\n\t\t// Multiple arguments are aggregated like Promise.all array elements\n\t\twhile ( i-- ) {\n\t\t\tadoptValue( resolveValues[ i ], updateFunc( i ), primary.reject );\n\t\t}\n\n\t\treturn primary.promise();\n\t}\n} );\n\n\n// These usually indicate a programmer mistake during development,\n// warn about them ASAP rather than swallowing them by default.\nvar rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;\n\njQuery.Deferred.exceptionHook = function( error, stack ) {\n\n\t// Support: IE 8 - 9 only\n\t// Console exists when dev tools are open, which can happen at any time\n\tif ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {\n\t\twindow.console.warn( \"jQuery.Deferred exception: \" + error.message, error.stack, stack );\n\t}\n};\n\n\n\n\njQuery.readyException = function( error ) {\n\twindow.setTimeout( function() {\n\t\tthrow error;\n\t} );\n};\n\n\n\n\n// The deferred used on DOM ready\nvar readyList = jQuery.Deferred();\n\njQuery.fn.ready = function( fn ) {\n\n\treadyList\n\t\t.then( fn )\n\n\t\t// Wrap jQuery.readyException in a function so that the lookup\n\t\t// happens at the time of error handling instead of callback\n\t\t// registration.\n\t\t.catch( function( error ) {\n\t\t\tjQuery.readyException( error );\n\t\t} );\n\n\treturn this;\n};\n\njQuery.extend( {\n\n\t// Is the DOM ready to be used? Set to true once it occurs.\n\tisReady: false,\n\n\t// A counter to track how many items to wait for before\n\t// the ready event fires. See #6781\n\treadyWait: 1,\n\n\t// Handle when the DOM is ready\n\tready: function( wait ) {\n\n\t\t// Abort if there are pending holds or we're already ready\n\t\tif ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remember that the DOM is ready\n\t\tjQuery.isReady = true;\n\n\t\t// If a normal DOM Ready event fired, decrement, and wait if need be\n\t\tif ( wait !== true && --jQuery.readyWait > 0 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there are functions bound, to execute\n\t\treadyList.resolveWith( document, [ jQuery ] );\n\t}\n} );\n\njQuery.ready.then = readyList.then;\n\n// The ready event handler and self cleanup method\nfunction completed() {\n\tdocument.removeEventListener( \"DOMContentLoaded\", completed );\n\twindow.removeEventListener( \"load\", completed );\n\tjQuery.ready();\n}\n\n// Catch cases where $(document).ready() is called\n// after the browser event has already occurred.\n// Support: IE <=9 - 10 only\n// Older IE sometimes signals \"interactive\" too soon\nif ( document.readyState === \"complete\" ||\n\t( document.readyState !== \"loading\" && !document.documentElement.doScroll ) ) {\n\n\t// Handle it asynchronously to allow scripts the opportunity to delay ready\n\twindow.setTimeout( jQuery.ready );\n\n} else {\n\n\t// Use the handy event callback\n\tdocument.addEventListener( \"DOMContentLoaded\", completed );\n\n\t// A fallback to window.onload, that will always work\n\twindow.addEventListener( \"load\", completed );\n}\n\n\n\n\n// Multifunctional method to get and set values of a collection\n// The value/s can optionally be executed if it's a function\nvar access = function( elems, fn, key, value, chainable, emptyGet, raw ) {\n\tvar i = 0,\n\t\tlen = elems.length,\n\t\tbulk = key == null;\n\n\t// Sets many values\n\tif ( toType( key ) === \"object\" ) {\n\t\tchainable = true;\n\t\tfor ( i in key ) {\n\t\t\taccess( elems, fn, i, key[ i ], true, emptyGet, raw );\n\t\t}\n\n\t// Sets one value\n\t} else if ( value !== undefined ) {\n\t\tchainable = true;\n\n\t\tif ( !isFunction( value ) ) {\n\t\t\traw = true;\n\t\t}\n\n\t\tif ( bulk ) {\n\n\t\t\t// Bulk operations run against the entire set\n\t\t\tif ( raw ) {\n\t\t\t\tfn.call( elems, value );\n\t\t\t\tfn = null;\n\n\t\t\t// ...except when executing function values\n\t\t\t} else {\n\t\t\t\tbulk = fn;\n\t\t\t\tfn = function( elem, _key, value ) {\n\t\t\t\t\treturn bulk.call( jQuery( elem ), value );\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif ( fn ) {\n\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\tfn(\n\t\t\t\t\telems[ i ], key, raw ?\n\t\t\t\t\t\tvalue :\n\t\t\t\t\t\tvalue.call( elems[ i ], i, fn( elems[ i ], key ) )\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( chainable ) {\n\t\treturn elems;\n\t}\n\n\t// Gets\n\tif ( bulk ) {\n\t\treturn fn.call( elems );\n\t}\n\n\treturn len ? fn( elems[ 0 ], key ) : emptyGet;\n};\n\n\n// Matches dashed string for camelizing\nvar rmsPrefix = /^-ms-/,\n\trdashAlpha = /-([a-z])/g;\n\n// Used by camelCase as callback to replace()\nfunction fcamelCase( _all, letter ) {\n\treturn letter.toUpperCase();\n}\n\n// Convert dashed to camelCase; used by the css and data modules\n// Support: IE <=9 - 11, Edge 12 - 15\n// Microsoft forgot to hump their vendor prefix (#9572)\nfunction camelCase( string ) {\n\treturn string.replace( rmsPrefix, \"ms-\" ).replace( rdashAlpha, fcamelCase );\n}\nvar acceptData = function( owner ) {\n\n\t// Accepts only:\n\t//  - Node\n\t//    - Node.ELEMENT_NODE\n\t//    - Node.DOCUMENT_NODE\n\t//  - Object\n\t//    - Any\n\treturn owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );\n};\n\n\n\n\nfunction Data() {\n\tthis.expando = jQuery.expando + Data.uid++;\n}\n\nData.uid = 1;\n\nData.prototype = {\n\n\tcache: function( owner ) {\n\n\t\t// Check if the owner object already has a cache\n\t\tvar value = owner[ this.expando ];\n\n\t\t// If not, create one\n\t\tif ( !value ) {\n\t\t\tvalue = {};\n\n\t\t\t// We can accept data for non-element nodes in modern browsers,\n\t\t\t// but we should not, see #8335.\n\t\t\t// Always return an empty object.\n\t\t\tif ( acceptData( owner ) ) {\n\n\t\t\t\t// If it is a node unlikely to be stringify-ed or looped over\n\t\t\t\t// use plain assignment\n\t\t\t\tif ( owner.nodeType ) {\n\t\t\t\t\towner[ this.expando ] = value;\n\n\t\t\t\t// Otherwise secure it in a non-enumerable property\n\t\t\t\t// configurable must be true to allow the property to be\n\t\t\t\t// deleted when data is removed\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty( owner, this.expando, {\n\t\t\t\t\t\tvalue: value,\n\t\t\t\t\t\tconfigurable: true\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t},\n\tset: function( owner, data, value ) {\n\t\tvar prop,\n\t\t\tcache = this.cache( owner );\n\n\t\t// Handle: [ owner, key, value ] args\n\t\t// Always use camelCase key (gh-2257)\n\t\tif ( typeof data === \"string\" ) {\n\t\t\tcache[ camelCase( data ) ] = value;\n\n\t\t// Handle: [ owner, { properties } ] args\n\t\t} else {\n\n\t\t\t// Copy the properties one-by-one to the cache object\n\t\t\tfor ( prop in data ) {\n\t\t\t\tcache[ camelCase( prop ) ] = data[ prop ];\n\t\t\t}\n\t\t}\n\t\treturn cache;\n\t},\n\tget: function( owner, key ) {\n\t\treturn key === undefined ?\n\t\t\tthis.cache( owner ) :\n\n\t\t\t// Always use camelCase key (gh-2257)\n\t\t\towner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];\n\t},\n\taccess: function( owner, key, value ) {\n\n\t\t// In cases where either:\n\t\t//\n\t\t//   1. No key was specified\n\t\t//   2. A string key was specified, but no value provided\n\t\t//\n\t\t// Take the \"read\" path and allow the get method to determine\n\t\t// which value to return, respectively either:\n\t\t//\n\t\t//   1. The entire cache object\n\t\t//   2. The data stored at the key\n\t\t//\n\t\tif ( key === undefined ||\n\t\t\t\t( ( key && typeof key === \"string\" ) && value === undefined ) ) {\n\n\t\t\treturn this.get( owner, key );\n\t\t}\n\n\t\t// When the key is not a string, or both a key and value\n\t\t// are specified, set or extend (existing objects) with either:\n\t\t//\n\t\t//   1. An object of properties\n\t\t//   2. A key and value\n\t\t//\n\t\tthis.set( owner, key, value );\n\n\t\t// Since the \"set\" path can have two possible entry points\n\t\t// return the expected data based on which path was taken[*]\n\t\treturn value !== undefined ? value : key;\n\t},\n\tremove: function( owner, key ) {\n\t\tvar i,\n\t\t\tcache = owner[ this.expando ];\n\n\t\tif ( cache === undefined ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( key !== undefined ) {\n\n\t\t\t// Support array or space separated string of keys\n\t\t\tif ( Array.isArray( key ) ) {\n\n\t\t\t\t// If key is an array of keys...\n\t\t\t\t// We always set camelCase keys, so remove that.\n\t\t\t\tkey = key.map( camelCase );\n\t\t\t} else {\n\t\t\t\tkey = camelCase( key );\n\n\t\t\t\t// If a key with the spaces exists, use it.\n\t\t\t\t// Otherwise, create an array by matching non-whitespace\n\t\t\t\tkey = key in cache ?\n\t\t\t\t\t[ key ] :\n\t\t\t\t\t( key.match( rnothtmlwhite ) || [] );\n\t\t\t}\n\n\t\t\ti = key.length;\n\n\t\t\twhile ( i-- ) {\n\t\t\t\tdelete cache[ key[ i ] ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove the expando if there's no more data\n\t\tif ( key === undefined || jQuery.isEmptyObject( cache ) ) {\n\n\t\t\t// Support: Chrome <=35 - 45\n\t\t\t// Webkit & Blink performance suffers when deleting properties\n\t\t\t// from DOM nodes, so set to undefined instead\n\t\t\t// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)\n\t\t\tif ( owner.nodeType ) {\n\t\t\t\towner[ this.expando ] = undefined;\n\t\t\t} else {\n\t\t\t\tdelete owner[ this.expando ];\n\t\t\t}\n\t\t}\n\t},\n\thasData: function( owner ) {\n\t\tvar cache = owner[ this.expando ];\n\t\treturn cache !== undefined && !jQuery.isEmptyObject( cache );\n\t}\n};\nvar dataPriv = new Data();\n\nvar dataUser = new Data();\n\n\n\n//\tImplementation Summary\n//\n//\t1. Enforce API surface and semantic compatibility with 1.9.x branch\n//\t2. Improve the module's maintainability by reducing the storage\n//\t\tpaths to a single mechanism.\n//\t3. Use the same single mechanism to support \"private\" and \"user\" data.\n//\t4. _Never_ expose \"private\" data to user code (TODO: Drop _data, _removeData)\n//\t5. Avoid exposing implementation details on user objects (eg. expando properties)\n//\t6. Provide a clear path for implementation upgrade to WeakMap in 2014\n\nvar rbrace = /^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,\n\trmultiDash = /[A-Z]/g;\n\nfunction getData( data ) {\n\tif ( data === \"true\" ) {\n\t\treturn true;\n\t}\n\n\tif ( data === \"false\" ) {\n\t\treturn false;\n\t}\n\n\tif ( data === \"null\" ) {\n\t\treturn null;\n\t}\n\n\t// Only convert to a number if it doesn't change the string\n\tif ( data === +data + \"\" ) {\n\t\treturn +data;\n\t}\n\n\tif ( rbrace.test( data ) ) {\n\t\treturn JSON.parse( data );\n\t}\n\n\treturn data;\n}\n\nfunction dataAttr( elem, key, data ) {\n\tvar name;\n\n\t// If nothing was found internally, try to fetch any\n\t// data from the HTML5 data-* attribute\n\tif ( data === undefined && elem.nodeType === 1 ) {\n\t\tname = \"data-\" + key.replace( rmultiDash, \"-$&\" ).toLowerCase();\n\t\tdata = elem.getAttribute( name );\n\n\t\tif ( typeof data === \"string\" ) {\n\t\t\ttry {\n\t\t\t\tdata = getData( data );\n\t\t\t} catch ( e ) {}\n\n\t\t\t// Make sure we set the data so it isn't changed later\n\t\t\tdataUser.set( elem, key, data );\n\t\t} else {\n\t\t\tdata = undefined;\n\t\t}\n\t}\n\treturn data;\n}\n\njQuery.extend( {\n\thasData: function( elem ) {\n\t\treturn dataUser.hasData( elem ) || dataPriv.hasData( elem );\n\t},\n\n\tdata: function( elem, name, data ) {\n\t\treturn dataUser.access( elem, name, data );\n\t},\n\n\tremoveData: function( elem, name ) {\n\t\tdataUser.remove( elem, name );\n\t},\n\n\t// TODO: Now that all calls to _data and _removeData have been replaced\n\t// with direct calls to dataPriv methods, these can be deprecated.\n\t_data: function( elem, name, data ) {\n\t\treturn dataPriv.access( elem, name, data );\n\t},\n\n\t_removeData: function( elem, name ) {\n\t\tdataPriv.remove( elem, name );\n\t}\n} );\n\njQuery.fn.extend( {\n\tdata: function( key, value ) {\n\t\tvar i, name, data,\n\t\t\telem = this[ 0 ],\n\t\t\tattrs = elem && elem.attributes;\n\n\t\t// Gets all values\n\t\tif ( key === undefined ) {\n\t\t\tif ( this.length ) {\n\t\t\t\tdata = dataUser.get( elem );\n\n\t\t\t\tif ( elem.nodeType === 1 && !dataPriv.get( elem, \"hasDataAttrs\" ) ) {\n\t\t\t\t\ti = attrs.length;\n\t\t\t\t\twhile ( i-- ) {\n\n\t\t\t\t\t\t// Support: IE 11 only\n\t\t\t\t\t\t// The attrs elements can be null (#14894)\n\t\t\t\t\t\tif ( attrs[ i ] ) {\n\t\t\t\t\t\t\tname = attrs[ i ].name;\n\t\t\t\t\t\t\tif ( name.indexOf( \"data-\" ) === 0 ) {\n\t\t\t\t\t\t\t\tname = camelCase( name.slice( 5 ) );\n\t\t\t\t\t\t\t\tdataAttr( elem, name, data[ name ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tdataPriv.set( elem, \"hasDataAttrs\", true );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn data;\n\t\t}\n\n\t\t// Sets multiple values\n\t\tif ( typeof key === \"object\" ) {\n\t\t\treturn this.each( function() {\n\t\t\t\tdataUser.set( this, key );\n\t\t\t} );\n\t\t}\n\n\t\treturn access( this, function( value ) {\n\t\t\tvar data;\n\n\t\t\t// The calling jQuery object (element matches) is not empty\n\t\t\t// (and therefore has an element appears at this[ 0 ]) and the\n\t\t\t// `value` parameter was not undefined. An empty jQuery object\n\t\t\t// will result in `undefined` for elem = this[ 0 ] which will\n\t\t\t// throw an exception if an attempt to read a data cache is made.\n\t\t\tif ( elem && value === undefined ) {\n\n\t\t\t\t// Attempt to get data from the cache\n\t\t\t\t// The key will always be camelCased in Data\n\t\t\t\tdata = dataUser.get( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// Attempt to \"discover\" the data in\n\t\t\t\t// HTML5 custom data-* attrs\n\t\t\t\tdata = dataAttr( elem, key );\n\t\t\t\tif ( data !== undefined ) {\n\t\t\t\t\treturn data;\n\t\t\t\t}\n\n\t\t\t\t// We tried really hard, but the data doesn't exist.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Set the data...\n\t\t\tthis.each( function() {\n\n\t\t\t\t// We always store the camelCased key\n\t\t\t\tdataUser.set( this, key, value );\n\t\t\t} );\n\t\t}, null, value, arguments.length > 1, null, true );\n\t},\n\n\tremoveData: function( key ) {\n\t\treturn this.each( function() {\n\t\t\tdataUser.remove( this, key );\n\t\t} );\n\t}\n} );\n\n\njQuery.extend( {\n\tqueue: function( elem, type, data ) {\n\t\tvar queue;\n\n\t\tif ( elem ) {\n\t\t\ttype = ( type || \"fx\" ) + \"queue\";\n\t\t\tqueue = dataPriv.get( elem, type );\n\n\t\t\t// Speed up dequeue by getting out quickly if this is just a lookup\n\t\t\tif ( data ) {\n\t\t\t\tif ( !queue || Array.isArray( data ) ) {\n\t\t\t\t\tqueue = dataPriv.access( elem, type, jQuery.makeArray( data ) );\n\t\t\t\t} else {\n\t\t\t\t\tqueue.push( data );\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn queue || [];\n\t\t}\n\t},\n\n\tdequeue: function( elem, type ) {\n\t\ttype = type || \"fx\";\n\n\t\tvar queue = jQuery.queue( elem, type ),\n\t\t\tstartLength = queue.length,\n\t\t\tfn = queue.shift(),\n\t\t\thooks = jQuery._queueHooks( elem, type ),\n\t\t\tnext = function() {\n\t\t\t\tjQuery.dequeue( elem, type );\n\t\t\t};\n\n\t\t// If the fx queue is dequeued, always remove the progress sentinel\n\t\tif ( fn === \"inprogress\" ) {\n\t\t\tfn = queue.shift();\n\t\t\tstartLength--;\n\t\t}\n\n\t\tif ( fn ) {\n\n\t\t\t// Add a progress sentinel to prevent the fx queue from being\n\t\t\t// automatically dequeued\n\t\t\tif ( type === \"fx\" ) {\n\t\t\t\tqueue.unshift( \"inprogress\" );\n\t\t\t}\n\n\t\t\t// Clear up the last queue stop function\n\t\t\tdelete hooks.stop;\n\t\t\tfn.call( elem, next, hooks );\n\t\t}\n\n\t\tif ( !startLength && hooks ) {\n\t\t\thooks.empty.fire();\n\t\t}\n\t},\n\n\t// Not public - generate a queueHooks object, or return the current one\n\t_queueHooks: function( elem, type ) {\n\t\tvar key = type + \"queueHooks\";\n\t\treturn dataPriv.get( elem, key ) || dataPriv.access( elem, key, {\n\t\t\tempty: jQuery.Callbacks( \"once memory\" ).add( function() {\n\t\t\t\tdataPriv.remove( elem, [ type + \"queue\", key ] );\n\t\t\t} )\n\t\t} );\n\t}\n} );\n\njQuery.fn.extend( {\n\tqueue: function( type, data ) {\n\t\tvar setter = 2;\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tdata = type;\n\t\t\ttype = \"fx\";\n\t\t\tsetter--;\n\t\t}\n\n\t\tif ( arguments.length < setter ) {\n\t\t\treturn jQuery.queue( this[ 0 ], type );\n\t\t}\n\n\t\treturn data === undefined ?\n\t\t\tthis :\n\t\t\tthis.each( function() {\n\t\t\t\tvar queue = jQuery.queue( this, type, data );\n\n\t\t\t\t// Ensure a hooks for this queue\n\t\t\t\tjQuery._queueHooks( this, type );\n\n\t\t\t\tif ( type === \"fx\" && queue[ 0 ] !== \"inprogress\" ) {\n\t\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t\t}\n\t\t\t} );\n\t},\n\tdequeue: function( type ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.dequeue( this, type );\n\t\t} );\n\t},\n\tclearQueue: function( type ) {\n\t\treturn this.queue( type || \"fx\", [] );\n\t},\n\n\t// Get a promise resolved when queues of a certain type\n\t// are emptied (fx is the type by default)\n\tpromise: function( type, obj ) {\n\t\tvar tmp,\n\t\t\tcount = 1,\n\t\t\tdefer = jQuery.Deferred(),\n\t\t\telements = this,\n\t\t\ti = this.length,\n\t\t\tresolve = function() {\n\t\t\t\tif ( !( --count ) ) {\n\t\t\t\t\tdefer.resolveWith( elements, [ elements ] );\n\t\t\t\t}\n\t\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tobj = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\ttype = type || \"fx\";\n\n\t\twhile ( i-- ) {\n\t\t\ttmp = dataPriv.get( elements[ i ], type + \"queueHooks\" );\n\t\t\tif ( tmp && tmp.empty ) {\n\t\t\t\tcount++;\n\t\t\t\ttmp.empty.add( resolve );\n\t\t\t}\n\t\t}\n\t\tresolve();\n\t\treturn defer.promise( obj );\n\t}\n} );\nvar pnum = ( /[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/ ).source;\n\nvar rcssNum = new RegExp( \"^(?:([+-])=|)(\" + pnum + \")([a-z%]*)$\", \"i\" );\n\n\nvar cssExpand = [ \"Top\", \"Right\", \"Bottom\", \"Left\" ];\n\nvar documentElement = document.documentElement;\n\n\n\n\tvar isAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem );\n\t\t},\n\t\tcomposed = { composed: true };\n\n\t// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only\n\t// Check attachment across shadow DOM boundaries when possible (gh-3504)\n\t// Support: iOS 10.0-10.2 only\n\t// Early iOS 10 versions support `attachShadow` but not `getRootNode`,\n\t// leading to errors. We need to check for `getRootNode`.\n\tif ( documentElement.getRootNode ) {\n\t\tisAttached = function( elem ) {\n\t\t\treturn jQuery.contains( elem.ownerDocument, elem ) ||\n\t\t\t\telem.getRootNode( composed ) === elem.ownerDocument;\n\t\t};\n\t}\nvar isHiddenWithinTree = function( elem, el ) {\n\n\t\t// isHiddenWithinTree might be called from jQuery#filter function;\n\t\t// in that case, element will be second argument\n\t\telem = el || elem;\n\n\t\t// Inline style trumps all\n\t\treturn elem.style.display === \"none\" ||\n\t\t\telem.style.display === \"\" &&\n\n\t\t\t// Otherwise, check computed style\n\t\t\t// Support: Firefox <=43 - 45\n\t\t\t// Disconnected elements can have computed display: none, so first confirm that elem is\n\t\t\t// in the document.\n\t\t\tisAttached( elem ) &&\n\n\t\t\tjQuery.css( elem, \"display\" ) === \"none\";\n\t};\n\n\n\nfunction adjustCSS( elem, prop, valueParts, tween ) {\n\tvar adjusted, scale,\n\t\tmaxIterations = 20,\n\t\tcurrentValue = tween ?\n\t\t\tfunction() {\n\t\t\t\treturn tween.cur();\n\t\t\t} :\n\t\t\tfunction() {\n\t\t\t\treturn jQuery.css( elem, prop, \"\" );\n\t\t\t},\n\t\tinitial = currentValue(),\n\t\tunit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" ),\n\n\t\t// Starting value computation is required for potential unit mismatches\n\t\tinitialInUnit = elem.nodeType &&\n\t\t\t( jQuery.cssNumber[ prop ] || unit !== \"px\" && +initial ) &&\n\t\t\trcssNum.exec( jQuery.css( elem, prop ) );\n\n\tif ( initialInUnit && initialInUnit[ 3 ] !== unit ) {\n\n\t\t// Support: Firefox <=54\n\t\t// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)\n\t\tinitial = initial / 2;\n\n\t\t// Trust units reported by jQuery.css\n\t\tunit = unit || initialInUnit[ 3 ];\n\n\t\t// Iteratively approximate from a nonzero starting point\n\t\tinitialInUnit = +initial || 1;\n\n\t\twhile ( maxIterations-- ) {\n\n\t\t\t// Evaluate and update our best guess (doubling guesses that zero out).\n\t\t\t// Finish if the scale equals or crosses 1 (making the old*new product non-positive).\n\t\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\t\t\tif ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {\n\t\t\t\tmaxIterations = 0;\n\t\t\t}\n\t\t\tinitialInUnit = initialInUnit / scale;\n\n\t\t}\n\n\t\tinitialInUnit = initialInUnit * 2;\n\t\tjQuery.style( elem, prop, initialInUnit + unit );\n\n\t\t// Make sure we update the tween properties later on\n\t\tvalueParts = valueParts || [];\n\t}\n\n\tif ( valueParts ) {\n\t\tinitialInUnit = +initialInUnit || +initial || 0;\n\n\t\t// Apply relative offset (+=/-=) if specified\n\t\tadjusted = valueParts[ 1 ] ?\n\t\t\tinitialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :\n\t\t\t+valueParts[ 2 ];\n\t\tif ( tween ) {\n\t\t\ttween.unit = unit;\n\t\t\ttween.start = initialInUnit;\n\t\t\ttween.end = adjusted;\n\t\t}\n\t}\n\treturn adjusted;\n}\n\n\nvar defaultDisplayMap = {};\n\nfunction getDefaultDisplay( elem ) {\n\tvar temp,\n\t\tdoc = elem.ownerDocument,\n\t\tnodeName = elem.nodeName,\n\t\tdisplay = defaultDisplayMap[ nodeName ];\n\n\tif ( display ) {\n\t\treturn display;\n\t}\n\n\ttemp = doc.body.appendChild( doc.createElement( nodeName ) );\n\tdisplay = jQuery.css( temp, \"display\" );\n\n\ttemp.parentNode.removeChild( temp );\n\n\tif ( display === \"none\" ) {\n\t\tdisplay = \"block\";\n\t}\n\tdefaultDisplayMap[ nodeName ] = display;\n\n\treturn display;\n}\n\nfunction showHide( elements, show ) {\n\tvar display, elem,\n\t\tvalues = [],\n\t\tindex = 0,\n\t\tlength = elements.length;\n\n\t// Determine new display value for elements that need to change\n\tfor ( ; index < length; index++ ) {\n\t\telem = elements[ index ];\n\t\tif ( !elem.style ) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdisplay = elem.style.display;\n\t\tif ( show ) {\n\n\t\t\t// Since we force visibility upon cascade-hidden elements, an immediate (and slow)\n\t\t\t// check is required in this first loop unless we have a nonempty display value (either\n\t\t\t// inline or about-to-be-restored)\n\t\t\tif ( display === \"none\" ) {\n\t\t\t\tvalues[ index ] = dataPriv.get( elem, \"display\" ) || null;\n\t\t\t\tif ( !values[ index ] ) {\n\t\t\t\t\telem.style.display = \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif ( elem.style.display === \"\" && isHiddenWithinTree( elem ) ) {\n\t\t\t\tvalues[ index ] = getDefaultDisplay( elem );\n\t\t\t}\n\t\t} else {\n\t\t\tif ( display !== \"none\" ) {\n\t\t\t\tvalues[ index ] = \"none\";\n\n\t\t\t\t// Remember what we're overwriting\n\t\t\t\tdataPriv.set( elem, \"display\", display );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Set the display of the elements in a second loop to avoid constant reflow\n\tfor ( index = 0; index < length; index++ ) {\n\t\tif ( values[ index ] != null ) {\n\t\t\telements[ index ].style.display = values[ index ];\n\t\t}\n\t}\n\n\treturn elements;\n}\n\njQuery.fn.extend( {\n\tshow: function() {\n\t\treturn showHide( this, true );\n\t},\n\thide: function() {\n\t\treturn showHide( this );\n\t},\n\ttoggle: function( state ) {\n\t\tif ( typeof state === \"boolean\" ) {\n\t\t\treturn state ? this.show() : this.hide();\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tif ( isHiddenWithinTree( this ) ) {\n\t\t\t\tjQuery( this ).show();\n\t\t\t} else {\n\t\t\t\tjQuery( this ).hide();\n\t\t\t}\n\t\t} );\n\t}\n} );\nvar rcheckableType = ( /^(?:checkbox|radio)$/i );\n\nvar rtagName = ( /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i );\n\nvar rscriptType = ( /^$|^module$|\\/(?:java|ecma)script/i );\n\n\n\n( function() {\n\tvar fragment = document.createDocumentFragment(),\n\t\tdiv = fragment.appendChild( document.createElement( \"div\" ) ),\n\t\tinput = document.createElement( \"input\" );\n\n\t// Support: Android 4.0 - 4.3 only\n\t// Check state lost if the name is set (#11217)\n\t// Support: Windows Web Apps (WWA)\n\t// `name` and `type` must use .setAttribute for WWA (#14901)\n\tinput.setAttribute( \"type\", \"radio\" );\n\tinput.setAttribute( \"checked\", \"checked\" );\n\tinput.setAttribute( \"name\", \"t\" );\n\n\tdiv.appendChild( input );\n\n\t// Support: Android <=4.1 only\n\t// Older WebKit doesn't clone checked state correctly in fragments\n\tsupport.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;\n\n\t// Support: IE <=11 only\n\t// Make sure textarea (and checkbox) defaultValue is properly cloned\n\tdiv.innerHTML = \"<textarea>x</textarea>\";\n\tsupport.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;\n\n\t// Support: IE <=9 only\n\t// IE <=9 replaces <option> tags with their contents when inserted outside of\n\t// the select element.\n\tdiv.innerHTML = \"<option></option>\";\n\tsupport.option = !!div.lastChild;\n} )();\n\n\n// We have to close these tags to support XHTML (#13200)\nvar wrapMap = {\n\n\t// XHTML parsers do not magically insert elements in the\n\t// same way that tag soup parsers do. So we cannot shorten\n\t// this by omitting <tbody> or other required elements.\n\tthead: [ 1, \"<table>\", \"</table>\" ],\n\tcol: [ 2, \"<table><colgroup>\", \"</colgroup></table>\" ],\n\ttr: [ 2, \"<table><tbody>\", \"</tbody></table>\" ],\n\ttd: [ 3, \"<table><tbody><tr>\", \"</tr></tbody></table>\" ],\n\n\t_default: [ 0, \"\", \"\" ]\n};\n\nwrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;\nwrapMap.th = wrapMap.td;\n\n// Support: IE <=9 only\nif ( !support.option ) {\n\twrapMap.optgroup = wrapMap.option = [ 1, \"<select multiple='multiple'>\", \"</select>\" ];\n}\n\n\nfunction getAll( context, tag ) {\n\n\t// Support: IE <=9 - 11 only\n\t// Use typeof to avoid zero-argument method invocation on host objects (#15151)\n\tvar ret;\n\n\tif ( typeof context.getElementsByTagName !== \"undefined\" ) {\n\t\tret = context.getElementsByTagName( tag || \"*\" );\n\n\t} else if ( typeof context.querySelectorAll !== \"undefined\" ) {\n\t\tret = context.querySelectorAll( tag || \"*\" );\n\n\t} else {\n\t\tret = [];\n\t}\n\n\tif ( tag === undefined || tag && nodeName( context, tag ) ) {\n\t\treturn jQuery.merge( [ context ], ret );\n\t}\n\n\treturn ret;\n}\n\n\n// Mark scripts as having already been evaluated\nfunction setGlobalEval( elems, refElements ) {\n\tvar i = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\tdataPriv.set(\n\t\t\telems[ i ],\n\t\t\t\"globalEval\",\n\t\t\t!refElements || dataPriv.get( refElements[ i ], \"globalEval\" )\n\t\t);\n\t}\n}\n\n\nvar rhtml = /<|&#?\\w+;/;\n\nfunction buildFragment( elems, context, scripts, selection, ignored ) {\n\tvar elem, tmp, tag, wrap, attached, j,\n\t\tfragment = context.createDocumentFragment(),\n\t\tnodes = [],\n\t\ti = 0,\n\t\tl = elems.length;\n\n\tfor ( ; i < l; i++ ) {\n\t\telem = elems[ i ];\n\n\t\tif ( elem || elem === 0 ) {\n\n\t\t\t// Add nodes directly\n\t\t\tif ( toType( elem ) === \"object\" ) {\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );\n\n\t\t\t// Convert non-html into a text node\n\t\t\t} else if ( !rhtml.test( elem ) ) {\n\t\t\t\tnodes.push( context.createTextNode( elem ) );\n\n\t\t\t// Convert html into DOM nodes\n\t\t\t} else {\n\t\t\t\ttmp = tmp || fragment.appendChild( context.createElement( \"div\" ) );\n\n\t\t\t\t// Deserialize a standard representation\n\t\t\t\ttag = ( rtagName.exec( elem ) || [ \"\", \"\" ] )[ 1 ].toLowerCase();\n\t\t\t\twrap = wrapMap[ tag ] || wrapMap._default;\n\t\t\t\ttmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];\n\n\t\t\t\t// Descend through wrappers to the right content\n\t\t\t\tj = wrap[ 0 ];\n\t\t\t\twhile ( j-- ) {\n\t\t\t\t\ttmp = tmp.lastChild;\n\t\t\t\t}\n\n\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\tjQuery.merge( nodes, tmp.childNodes );\n\n\t\t\t\t// Remember the top-level container\n\t\t\t\ttmp = fragment.firstChild;\n\n\t\t\t\t// Ensure the created nodes are orphaned (#12392)\n\t\t\t\ttmp.textContent = \"\";\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove wrapper from fragment\n\tfragment.textContent = \"\";\n\n\ti = 0;\n\twhile ( ( elem = nodes[ i++ ] ) ) {\n\n\t\t// Skip elements already in the context collection (trac-4087)\n\t\tif ( selection && jQuery.inArray( elem, selection ) > -1 ) {\n\t\t\tif ( ignored ) {\n\t\t\t\tignored.push( elem );\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tattached = isAttached( elem );\n\n\t\t// Append to fragment\n\t\ttmp = getAll( fragment.appendChild( elem ), \"script\" );\n\n\t\t// Preserve script evaluation history\n\t\tif ( attached ) {\n\t\t\tsetGlobalEval( tmp );\n\t\t}\n\n\t\t// Capture executables\n\t\tif ( scripts ) {\n\t\t\tj = 0;\n\t\t\twhile ( ( elem = tmp[ j++ ] ) ) {\n\t\t\t\tif ( rscriptType.test( elem.type || \"\" ) ) {\n\t\t\t\t\tscripts.push( elem );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn fragment;\n}\n\n\nvar rtypenamespace = /^([^.]*)(?:\\.(.+)|)/;\n\nfunction returnTrue() {\n\treturn true;\n}\n\nfunction returnFalse() {\n\treturn false;\n}\n\n// Support: IE <=9 - 11+\n// focus() and blur() are asynchronous, except when they are no-op.\n// So expect focus to be synchronous when the element is already active,\n// and blur to be synchronous when the element is not already active.\n// (focus and blur are always synchronous in other supported browsers,\n// this just defines when we can count on it).\nfunction expectSync( elem, type ) {\n\treturn ( elem === safeActiveElement() ) === ( type === \"focus\" );\n}\n\n// Support: IE <=9 only\n// Accessing document.activeElement can throw unexpectedly\n// https://bugs.jquery.com/ticket/13393\nfunction safeActiveElement() {\n\ttry {\n\t\treturn document.activeElement;\n\t} catch ( err ) { }\n}\n\nfunction on( elem, types, selector, data, fn, one ) {\n\tvar origFn, type;\n\n\t// Types can be a map of types/handlers\n\tif ( typeof types === \"object\" ) {\n\n\t\t// ( types-Object, selector, data )\n\t\tif ( typeof selector !== \"string\" ) {\n\n\t\t\t// ( types-Object, data )\n\t\t\tdata = data || selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tfor ( type in types ) {\n\t\t\ton( elem, type, selector, data, types[ type ], one );\n\t\t}\n\t\treturn elem;\n\t}\n\n\tif ( data == null && fn == null ) {\n\n\t\t// ( types, fn )\n\t\tfn = selector;\n\t\tdata = selector = undefined;\n\t} else if ( fn == null ) {\n\t\tif ( typeof selector === \"string\" ) {\n\n\t\t\t// ( types, selector, fn )\n\t\t\tfn = data;\n\t\t\tdata = undefined;\n\t\t} else {\n\n\t\t\t// ( types, data, fn )\n\t\t\tfn = data;\n\t\t\tdata = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t}\n\tif ( fn === false ) {\n\t\tfn = returnFalse;\n\t} else if ( !fn ) {\n\t\treturn elem;\n\t}\n\n\tif ( one === 1 ) {\n\t\torigFn = fn;\n\t\tfn = function( event ) {\n\n\t\t\t// Can use an empty set, since event contains the info\n\t\t\tjQuery().off( event );\n\t\t\treturn origFn.apply( this, arguments );\n\t\t};\n\n\t\t// Use same guid so caller can remove using origFn\n\t\tfn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );\n\t}\n\treturn elem.each( function() {\n\t\tjQuery.event.add( this, types, fn, data, selector );\n\t} );\n}\n\n/*\n * Helper functions for managing events -- not part of the public interface.\n * Props to Dean Edwards' addEvent library for many of the ideas.\n */\njQuery.event = {\n\n\tglobal: {},\n\n\tadd: function( elem, types, handler, data, selector ) {\n\n\t\tvar handleObjIn, eventHandle, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.get( elem );\n\n\t\t// Only attach events to objects that accept data\n\t\tif ( !acceptData( elem ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Caller can pass in an object of custom data in lieu of the handler\n\t\tif ( handler.handler ) {\n\t\t\thandleObjIn = handler;\n\t\t\thandler = handleObjIn.handler;\n\t\t\tselector = handleObjIn.selector;\n\t\t}\n\n\t\t// Ensure that invalid selectors throw exceptions at attach time\n\t\t// Evaluate against documentElement in case elem is a non-element node (e.g., document)\n\t\tif ( selector ) {\n\t\t\tjQuery.find.matchesSelector( documentElement, selector );\n\t\t}\n\n\t\t// Make sure that the handler has a unique ID, used to find/remove it later\n\t\tif ( !handler.guid ) {\n\t\t\thandler.guid = jQuery.guid++;\n\t\t}\n\n\t\t// Init the element's event structure and main handler, if this is the first\n\t\tif ( !( events = elemData.events ) ) {\n\t\t\tevents = elemData.events = Object.create( null );\n\t\t}\n\t\tif ( !( eventHandle = elemData.handle ) ) {\n\t\t\teventHandle = elemData.handle = function( e ) {\n\n\t\t\t\t// Discard the second event of a jQuery.event.trigger() and\n\t\t\t\t// when an event is called after a page has unloaded\n\t\t\t\treturn typeof jQuery !== \"undefined\" && jQuery.event.triggered !== e.type ?\n\t\t\t\t\tjQuery.event.dispatch.apply( elem, arguments ) : undefined;\n\t\t\t};\n\t\t}\n\n\t\t// Handle multiple events separated by a space\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// There *must* be a type, no attaching namespace-only handlers\n\t\t\tif ( !type ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If event changes its type, use the special event handlers for the changed type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// If selector defined, determine special event api type, otherwise given type\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\n\t\t\t// Update special based on newly reset type\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\n\t\t\t// handleObj is passed to all event handlers\n\t\t\thandleObj = jQuery.extend( {\n\t\t\t\ttype: type,\n\t\t\t\torigType: origType,\n\t\t\t\tdata: data,\n\t\t\t\thandler: handler,\n\t\t\t\tguid: handler.guid,\n\t\t\t\tselector: selector,\n\t\t\t\tneedsContext: selector && jQuery.expr.match.needsContext.test( selector ),\n\t\t\t\tnamespace: namespaces.join( \".\" )\n\t\t\t}, handleObjIn );\n\n\t\t\t// Init the event handler queue if we're the first\n\t\t\tif ( !( handlers = events[ type ] ) ) {\n\t\t\t\thandlers = events[ type ] = [];\n\t\t\t\thandlers.delegateCount = 0;\n\n\t\t\t\t// Only use addEventListener if the special events handler returns false\n\t\t\t\tif ( !special.setup ||\n\t\t\t\t\tspecial.setup.call( elem, data, namespaces, eventHandle ) === false ) {\n\n\t\t\t\t\tif ( elem.addEventListener ) {\n\t\t\t\t\t\telem.addEventListener( type, eventHandle );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( special.add ) {\n\t\t\t\tspecial.add.call( elem, handleObj );\n\n\t\t\t\tif ( !handleObj.handler.guid ) {\n\t\t\t\t\thandleObj.handler.guid = handler.guid;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add to the element's handler list, delegates in front\n\t\t\tif ( selector ) {\n\t\t\t\thandlers.splice( handlers.delegateCount++, 0, handleObj );\n\t\t\t} else {\n\t\t\t\thandlers.push( handleObj );\n\t\t\t}\n\n\t\t\t// Keep track of which events have ever been used, for event optimization\n\t\t\tjQuery.event.global[ type ] = true;\n\t\t}\n\n\t},\n\n\t// Detach an event or set of events from an element\n\tremove: function( elem, types, handler, selector, mappedTypes ) {\n\n\t\tvar j, origCount, tmp,\n\t\t\tevents, t, handleObj,\n\t\t\tspecial, handlers, type, namespaces, origType,\n\t\t\telemData = dataPriv.hasData( elem ) && dataPriv.get( elem );\n\n\t\tif ( !elemData || !( events = elemData.events ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Once for each type.namespace in types; type may be omitted\n\t\ttypes = ( types || \"\" ).match( rnothtmlwhite ) || [ \"\" ];\n\t\tt = types.length;\n\t\twhile ( t-- ) {\n\t\t\ttmp = rtypenamespace.exec( types[ t ] ) || [];\n\t\t\ttype = origType = tmp[ 1 ];\n\t\t\tnamespaces = ( tmp[ 2 ] || \"\" ).split( \".\" ).sort();\n\n\t\t\t// Unbind all events (on this namespace, if provided) for the element\n\t\t\tif ( !type ) {\n\t\t\t\tfor ( type in events ) {\n\t\t\t\t\tjQuery.event.remove( elem, type + types[ t ], handler, selector, true );\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tspecial = jQuery.event.special[ type ] || {};\n\t\t\ttype = ( selector ? special.delegateType : special.bindType ) || type;\n\t\t\thandlers = events[ type ] || [];\n\t\t\ttmp = tmp[ 2 ] &&\n\t\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" );\n\n\t\t\t// Remove matching events\n\t\t\torigCount = j = handlers.length;\n\t\t\twhile ( j-- ) {\n\t\t\t\thandleObj = handlers[ j ];\n\n\t\t\t\tif ( ( mappedTypes || origType === handleObj.origType ) &&\n\t\t\t\t\t( !handler || handler.guid === handleObj.guid ) &&\n\t\t\t\t\t( !tmp || tmp.test( handleObj.namespace ) ) &&\n\t\t\t\t\t( !selector || selector === handleObj.selector ||\n\t\t\t\t\t\tselector === \"**\" && handleObj.selector ) ) {\n\t\t\t\t\thandlers.splice( j, 1 );\n\n\t\t\t\t\tif ( handleObj.selector ) {\n\t\t\t\t\t\thandlers.delegateCount--;\n\t\t\t\t\t}\n\t\t\t\t\tif ( special.remove ) {\n\t\t\t\t\t\tspecial.remove.call( elem, handleObj );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove generic event handler if we removed something and no more handlers exist\n\t\t\t// (avoids potential for endless recursion during removal of special event handlers)\n\t\t\tif ( origCount && !handlers.length ) {\n\t\t\t\tif ( !special.teardown ||\n\t\t\t\t\tspecial.teardown.call( elem, namespaces, elemData.handle ) === false ) {\n\n\t\t\t\t\tjQuery.removeEvent( elem, type, elemData.handle );\n\t\t\t\t}\n\n\t\t\t\tdelete events[ type ];\n\t\t\t}\n\t\t}\n\n\t\t// Remove data and the expando if it's no longer used\n\t\tif ( jQuery.isEmptyObject( events ) ) {\n\t\t\tdataPriv.remove( elem, \"handle events\" );\n\t\t}\n\t},\n\n\tdispatch: function( nativeEvent ) {\n\n\t\tvar i, j, ret, matched, handleObj, handlerQueue,\n\t\t\targs = new Array( arguments.length ),\n\n\t\t\t// Make a writable jQuery.Event from the native event object\n\t\t\tevent = jQuery.event.fix( nativeEvent ),\n\n\t\t\thandlers = (\n\t\t\t\tdataPriv.get( this, \"events\" ) || Object.create( null )\n\t\t\t)[ event.type ] || [],\n\t\t\tspecial = jQuery.event.special[ event.type ] || {};\n\n\t\t// Use the fix-ed jQuery.Event rather than the (read-only) native event\n\t\targs[ 0 ] = event;\n\n\t\tfor ( i = 1; i < arguments.length; i++ ) {\n\t\t\targs[ i ] = arguments[ i ];\n\t\t}\n\n\t\tevent.delegateTarget = this;\n\n\t\t// Call the preDispatch hook for the mapped type, and let it bail if desired\n\t\tif ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine handlers\n\t\thandlerQueue = jQuery.event.handlers.call( this, event, handlers );\n\n\t\t// Run delegates first; they may want to stop propagation beneath us\n\t\ti = 0;\n\t\twhile ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tevent.currentTarget = matched.elem;\n\n\t\t\tj = 0;\n\t\t\twhile ( ( handleObj = matched.handlers[ j++ ] ) &&\n\t\t\t\t!event.isImmediatePropagationStopped() ) {\n\n\t\t\t\t// If the event is namespaced, then each handler is only invoked if it is\n\t\t\t\t// specially universal or its namespaces are a superset of the event's.\n\t\t\t\tif ( !event.rnamespace || handleObj.namespace === false ||\n\t\t\t\t\tevent.rnamespace.test( handleObj.namespace ) ) {\n\n\t\t\t\t\tevent.handleObj = handleObj;\n\t\t\t\t\tevent.data = handleObj.data;\n\n\t\t\t\t\tret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||\n\t\t\t\t\t\thandleObj.handler ).apply( matched.elem, args );\n\n\t\t\t\t\tif ( ret !== undefined ) {\n\t\t\t\t\t\tif ( ( event.result = ret ) === false ) {\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Call the postDispatch hook for the mapped type\n\t\tif ( special.postDispatch ) {\n\t\t\tspecial.postDispatch.call( this, event );\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\thandlers: function( event, handlers ) {\n\t\tvar i, handleObj, sel, matchedHandlers, matchedSelectors,\n\t\t\thandlerQueue = [],\n\t\t\tdelegateCount = handlers.delegateCount,\n\t\t\tcur = event.target;\n\n\t\t// Find delegate handlers\n\t\tif ( delegateCount &&\n\n\t\t\t// Support: IE <=9\n\t\t\t// Black-hole SVG <use> instance trees (trac-13180)\n\t\t\tcur.nodeType &&\n\n\t\t\t// Support: Firefox <=42\n\t\t\t// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)\n\t\t\t// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click\n\t\t\t// Support: IE 11 only\n\t\t\t// ...but not arrow key \"clicks\" of radio inputs, which can have `button` -1 (gh-2343)\n\t\t\t!( event.type === \"click\" && event.button >= 1 ) ) {\n\n\t\t\tfor ( ; cur !== this; cur = cur.parentNode || this ) {\n\n\t\t\t\t// Don't check non-elements (#13208)\n\t\t\t\t// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)\n\t\t\t\tif ( cur.nodeType === 1 && !( event.type === \"click\" && cur.disabled === true ) ) {\n\t\t\t\t\tmatchedHandlers = [];\n\t\t\t\t\tmatchedSelectors = {};\n\t\t\t\t\tfor ( i = 0; i < delegateCount; i++ ) {\n\t\t\t\t\t\thandleObj = handlers[ i ];\n\n\t\t\t\t\t\t// Don't conflict with Object.prototype properties (#13203)\n\t\t\t\t\t\tsel = handleObj.selector + \" \";\n\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] === undefined ) {\n\t\t\t\t\t\t\tmatchedSelectors[ sel ] = handleObj.needsContext ?\n\t\t\t\t\t\t\t\tjQuery( sel, this ).index( cur ) > -1 :\n\t\t\t\t\t\t\t\tjQuery.find( sel, this, null, [ cur ] ).length;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ( matchedSelectors[ sel ] ) {\n\t\t\t\t\t\t\tmatchedHandlers.push( handleObj );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif ( matchedHandlers.length ) {\n\t\t\t\t\t\thandlerQueue.push( { elem: cur, handlers: matchedHandlers } );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add the remaining (directly-bound) handlers\n\t\tcur = this;\n\t\tif ( delegateCount < handlers.length ) {\n\t\t\thandlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );\n\t\t}\n\n\t\treturn handlerQueue;\n\t},\n\n\taddProp: function( name, hook ) {\n\t\tObject.defineProperty( jQuery.Event.prototype, name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\n\t\t\tget: isFunction( hook ) ?\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn hook( this.originalEvent );\n\t\t\t\t\t}\n\t\t\t\t} :\n\t\t\t\tfunction() {\n\t\t\t\t\tif ( this.originalEvent ) {\n\t\t\t\t\t\treturn this.originalEvent[ name ];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\tset: function( value ) {\n\t\t\t\tObject.defineProperty( this, name, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: value\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tfix: function( originalEvent ) {\n\t\treturn originalEvent[ jQuery.expando ] ?\n\t\t\toriginalEvent :\n\t\t\tnew jQuery.Event( originalEvent );\n\t},\n\n\tspecial: {\n\t\tload: {\n\n\t\t\t// Prevent triggered image.load events from bubbling to window.load\n\t\t\tnoBubble: true\n\t\t},\n\t\tclick: {\n\n\t\t\t// Utilize native event to ensure correct state for checkable inputs\n\t\t\tsetup: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Claim the first handler\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\t// dataPriv.set( el, \"click\", ... )\n\t\t\t\t\tleverageNative( el, \"click\", returnTrue );\n\t\t\t\t}\n\n\t\t\t\t// Return false to allow normal processing in the caller\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\ttrigger: function( data ) {\n\n\t\t\t\t// For mutual compressibility with _default, replace `this` access with a local var.\n\t\t\t\t// `|| data` is dead code meant only to preserve the variable through minification.\n\t\t\t\tvar el = this || data;\n\n\t\t\t\t// Force setup before triggering a click\n\t\t\t\tif ( rcheckableType.test( el.type ) &&\n\t\t\t\t\tel.click && nodeName( el, \"input\" ) ) {\n\n\t\t\t\t\tleverageNative( el, \"click\" );\n\t\t\t\t}\n\n\t\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\t// For cross-browser consistency, suppress native .click() on links\n\t\t\t// Also prevent it if we're currently inside a leveraged native-event stack\n\t\t\t_default: function( event ) {\n\t\t\t\tvar target = event.target;\n\t\t\t\treturn rcheckableType.test( target.type ) &&\n\t\t\t\t\ttarget.click && nodeName( target, \"input\" ) &&\n\t\t\t\t\tdataPriv.get( target, \"click\" ) ||\n\t\t\t\t\tnodeName( target, \"a\" );\n\t\t\t}\n\t\t},\n\n\t\tbeforeunload: {\n\t\t\tpostDispatch: function( event ) {\n\n\t\t\t\t// Support: Firefox 20+\n\t\t\t\t// Firefox doesn't alert if the returnValue field is not set.\n\t\t\t\tif ( event.result !== undefined && event.originalEvent ) {\n\t\t\t\t\tevent.originalEvent.returnValue = event.result;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Ensure the presence of an event listener that handles manually-triggered\n// synthetic events by interrupting progress until reinvoked in response to\n// *native* events that it fires directly, ensuring that state changes have\n// already occurred before other listeners are invoked.\nfunction leverageNative( el, type, expectSync ) {\n\n\t// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add\n\tif ( !expectSync ) {\n\t\tif ( dataPriv.get( el, type ) === undefined ) {\n\t\t\tjQuery.event.add( el, type, returnTrue );\n\t\t}\n\t\treturn;\n\t}\n\n\t// Register the controller as a special universal handler for all event namespaces\n\tdataPriv.set( el, type, false );\n\tjQuery.event.add( el, type, {\n\t\tnamespace: false,\n\t\thandler: function( event ) {\n\t\t\tvar notAsync, result,\n\t\t\t\tsaved = dataPriv.get( this, type );\n\n\t\t\tif ( ( event.isTrigger & 1 ) && this[ type ] ) {\n\n\t\t\t\t// Interrupt processing of the outer synthetic .trigger()ed event\n\t\t\t\t// Saved data should be false in such cases, but might be a leftover capture object\n\t\t\t\t// from an async native handler (gh-4350)\n\t\t\t\tif ( !saved.length ) {\n\n\t\t\t\t\t// Store arguments for use when handling the inner native event\n\t\t\t\t\t// There will always be at least one argument (an event object), so this array\n\t\t\t\t\t// will not be confused with a leftover capture object.\n\t\t\t\t\tsaved = slice.call( arguments );\n\t\t\t\t\tdataPriv.set( this, type, saved );\n\n\t\t\t\t\t// Trigger the native event and capture its result\n\t\t\t\t\t// Support: IE <=9 - 11+\n\t\t\t\t\t// focus() and blur() are asynchronous\n\t\t\t\t\tnotAsync = expectSync( this, type );\n\t\t\t\t\tthis[ type ]();\n\t\t\t\t\tresult = dataPriv.get( this, type );\n\t\t\t\t\tif ( saved !== result || notAsync ) {\n\t\t\t\t\t\tdataPriv.set( this, type, false );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult = {};\n\t\t\t\t\t}\n\t\t\t\t\tif ( saved !== result ) {\n\n\t\t\t\t\t\t// Cancel the outer synthetic event\n\t\t\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t\t\t\tevent.preventDefault();\n\n\t\t\t\t\t\t// Support: Chrome 86+\n\t\t\t\t\t\t// In Chrome, if an element having a focusout handler is blurred by\n\t\t\t\t\t\t// clicking outside of it, it invokes the handler synchronously. If\n\t\t\t\t\t\t// that handler calls `.remove()` on the element, the data is cleared,\n\t\t\t\t\t\t// leaving `result` undefined. We need to guard against this.\n\t\t\t\t\t\treturn result && result.value;\n\t\t\t\t\t}\n\n\t\t\t\t// If this is an inner synthetic event for an event with a bubbling surrogate\n\t\t\t\t// (focus or blur), assume that the surrogate already propagated from triggering the\n\t\t\t\t// native event and prevent that from happening again here.\n\t\t\t\t// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the\n\t\t\t\t// bubbling surrogate propagates *after* the non-bubbling base), but that seems\n\t\t\t\t// less bad than duplication.\n\t\t\t\t} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\n\t\t\t// If this is a native event triggered above, everything is now in order\n\t\t\t// Fire an inner synthetic event with the original arguments\n\t\t\t} else if ( saved.length ) {\n\n\t\t\t\t// ...and capture the result\n\t\t\t\tdataPriv.set( this, type, {\n\t\t\t\t\tvalue: jQuery.event.trigger(\n\n\t\t\t\t\t\t// Support: IE <=9 - 11+\n\t\t\t\t\t\t// Extend with the prototype to reset the above stopImmediatePropagation()\n\t\t\t\t\t\tjQuery.extend( saved[ 0 ], jQuery.Event.prototype ),\n\t\t\t\t\t\tsaved.slice( 1 ),\n\t\t\t\t\t\tthis\n\t\t\t\t\t)\n\t\t\t\t} );\n\n\t\t\t\t// Abort handling of the native event\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t}\n\t\t}\n\t} );\n}\n\njQuery.removeEvent = function( elem, type, handle ) {\n\n\t// This \"if\" is needed for plain objects\n\tif ( elem.removeEventListener ) {\n\t\telem.removeEventListener( type, handle );\n\t}\n};\n\njQuery.Event = function( src, props ) {\n\n\t// Allow instantiation without the 'new' keyword\n\tif ( !( this instanceof jQuery.Event ) ) {\n\t\treturn new jQuery.Event( src, props );\n\t}\n\n\t// Event object\n\tif ( src && src.type ) {\n\t\tthis.originalEvent = src;\n\t\tthis.type = src.type;\n\n\t\t// Events bubbling up the document may have been marked as prevented\n\t\t// by a handler lower down the tree; reflect the correct value.\n\t\tthis.isDefaultPrevented = src.defaultPrevented ||\n\t\t\t\tsrc.defaultPrevented === undefined &&\n\n\t\t\t\t// Support: Android <=2.3 only\n\t\t\t\tsrc.returnValue === false ?\n\t\t\treturnTrue :\n\t\t\treturnFalse;\n\n\t\t// Create target properties\n\t\t// Support: Safari <=6 - 7 only\n\t\t// Target should not be a text node (#504, #13143)\n\t\tthis.target = ( src.target && src.target.nodeType === 3 ) ?\n\t\t\tsrc.target.parentNode :\n\t\t\tsrc.target;\n\n\t\tthis.currentTarget = src.currentTarget;\n\t\tthis.relatedTarget = src.relatedTarget;\n\n\t// Event type\n\t} else {\n\t\tthis.type = src;\n\t}\n\n\t// Put explicitly provided properties onto the event object\n\tif ( props ) {\n\t\tjQuery.extend( this, props );\n\t}\n\n\t// Create a timestamp if incoming event doesn't have one\n\tthis.timeStamp = src && src.timeStamp || Date.now();\n\n\t// Mark it as fixed\n\tthis[ jQuery.expando ] = true;\n};\n\n// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding\n// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html\njQuery.Event.prototype = {\n\tconstructor: jQuery.Event,\n\tisDefaultPrevented: returnFalse,\n\tisPropagationStopped: returnFalse,\n\tisImmediatePropagationStopped: returnFalse,\n\tisSimulated: false,\n\n\tpreventDefault: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isDefaultPrevented = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.preventDefault();\n\t\t}\n\t},\n\tstopPropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isPropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopPropagation();\n\t\t}\n\t},\n\tstopImmediatePropagation: function() {\n\t\tvar e = this.originalEvent;\n\n\t\tthis.isImmediatePropagationStopped = returnTrue;\n\n\t\tif ( e && !this.isSimulated ) {\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\n\t\tthis.stopPropagation();\n\t}\n};\n\n// Includes all common event props including KeyEvent and MouseEvent specific props\njQuery.each( {\n\taltKey: true,\n\tbubbles: true,\n\tcancelable: true,\n\tchangedTouches: true,\n\tctrlKey: true,\n\tdetail: true,\n\teventPhase: true,\n\tmetaKey: true,\n\tpageX: true,\n\tpageY: true,\n\tshiftKey: true,\n\tview: true,\n\t\"char\": true,\n\tcode: true,\n\tcharCode: true,\n\tkey: true,\n\tkeyCode: true,\n\tbutton: true,\n\tbuttons: true,\n\tclientX: true,\n\tclientY: true,\n\toffsetX: true,\n\toffsetY: true,\n\tpointerId: true,\n\tpointerType: true,\n\tscreenX: true,\n\tscreenY: true,\n\ttargetTouches: true,\n\ttoElement: true,\n\ttouches: true,\n\twhich: true\n}, jQuery.event.addProp );\n\njQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( type, delegateType ) {\n\tjQuery.event.special[ type ] = {\n\n\t\t// Utilize native event if possible so blur/focus sequence is correct\n\t\tsetup: function() {\n\n\t\t\t// Claim the first handler\n\t\t\t// dataPriv.set( this, \"focus\", ... )\n\t\t\t// dataPriv.set( this, \"blur\", ... )\n\t\t\tleverageNative( this, type, expectSync );\n\n\t\t\t// Return false to allow normal processing in the caller\n\t\t\treturn false;\n\t\t},\n\t\ttrigger: function() {\n\n\t\t\t// Force setup before trigger\n\t\t\tleverageNative( this, type );\n\n\t\t\t// Return non-false to allow normal event-path propagation\n\t\t\treturn true;\n\t\t},\n\n\t\t// Suppress native focus or blur as it's already being fired\n\t\t// in leverageNative.\n\t\t_default: function() {\n\t\t\treturn true;\n\t\t},\n\n\t\tdelegateType: delegateType\n\t};\n} );\n\n// Create mouseenter/leave events using mouseover/out and event-time checks\n// so that event delegation works in jQuery.\n// Do the same for pointerenter/pointerleave and pointerover/pointerout\n//\n// Support: Safari 7 only\n// Safari sends mouseenter too often; see:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=470258\n// for the description of the bug (it existed in older Chrome versions as well).\njQuery.each( {\n\tmouseenter: \"mouseover\",\n\tmouseleave: \"mouseout\",\n\tpointerenter: \"pointerover\",\n\tpointerleave: \"pointerout\"\n}, function( orig, fix ) {\n\tjQuery.event.special[ orig ] = {\n\t\tdelegateType: fix,\n\t\tbindType: fix,\n\n\t\thandle: function( event ) {\n\t\t\tvar ret,\n\t\t\t\ttarget = this,\n\t\t\t\trelated = event.relatedTarget,\n\t\t\t\thandleObj = event.handleObj;\n\n\t\t\t// For mouseenter/leave call the handler if related is outside the target.\n\t\t\t// NB: No relatedTarget if the mouse left/entered the browser window\n\t\t\tif ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {\n\t\t\t\tevent.type = handleObj.origType;\n\t\t\t\tret = handleObj.handler.apply( this, arguments );\n\t\t\t\tevent.type = fix;\n\t\t\t}\n\t\t\treturn ret;\n\t\t}\n\t};\n} );\n\njQuery.fn.extend( {\n\n\ton: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn );\n\t},\n\tone: function( types, selector, data, fn ) {\n\t\treturn on( this, types, selector, data, fn, 1 );\n\t},\n\toff: function( types, selector, fn ) {\n\t\tvar handleObj, type;\n\t\tif ( types && types.preventDefault && types.handleObj ) {\n\n\t\t\t// ( event )  dispatched jQuery.Event\n\t\t\thandleObj = types.handleObj;\n\t\t\tjQuery( types.delegateTarget ).off(\n\t\t\t\thandleObj.namespace ?\n\t\t\t\t\thandleObj.origType + \".\" + handleObj.namespace :\n\t\t\t\t\thandleObj.origType,\n\t\t\t\thandleObj.selector,\n\t\t\t\thandleObj.handler\n\t\t\t);\n\t\t\treturn this;\n\t\t}\n\t\tif ( typeof types === \"object\" ) {\n\n\t\t\t// ( types-object [, selector] )\n\t\t\tfor ( type in types ) {\n\t\t\t\tthis.off( type, selector, types[ type ] );\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t\tif ( selector === false || typeof selector === \"function\" ) {\n\n\t\t\t// ( types [, fn] )\n\t\t\tfn = selector;\n\t\t\tselector = undefined;\n\t\t}\n\t\tif ( fn === false ) {\n\t\t\tfn = returnFalse;\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.remove( this, types, fn, selector );\n\t\t} );\n\t}\n} );\n\n\nvar\n\n\t// Support: IE <=10 - 11, Edge 12 - 13 only\n\t// In IE/Edge using regex groups here causes severe slowdowns.\n\t// See https://connect.microsoft.com/IE/feedback/details/1736512/\n\trnoInnerhtml = /<script|<style|<link/i,\n\n\t// checked=\"checked\" or checked\n\trchecked = /checked\\s*(?:[^=]|=\\s*.checked.)/i,\n\trcleanScript = /^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g;\n\n// Prefer a tbody over its parent table for containing new rows\nfunction manipulationTarget( elem, content ) {\n\tif ( nodeName( elem, \"table\" ) &&\n\t\tnodeName( content.nodeType !== 11 ? content : content.firstChild, \"tr\" ) ) {\n\n\t\treturn jQuery( elem ).children( \"tbody\" )[ 0 ] || elem;\n\t}\n\n\treturn elem;\n}\n\n// Replace/restore the type attribute of script elements for safe DOM manipulation\nfunction disableScript( elem ) {\n\telem.type = ( elem.getAttribute( \"type\" ) !== null ) + \"/\" + elem.type;\n\treturn elem;\n}\nfunction restoreScript( elem ) {\n\tif ( ( elem.type || \"\" ).slice( 0, 5 ) === \"true/\" ) {\n\t\telem.type = elem.type.slice( 5 );\n\t} else {\n\t\telem.removeAttribute( \"type\" );\n\t}\n\n\treturn elem;\n}\n\nfunction cloneCopyEvent( src, dest ) {\n\tvar i, l, type, pdataOld, udataOld, udataCur, events;\n\n\tif ( dest.nodeType !== 1 ) {\n\t\treturn;\n\t}\n\n\t// 1. Copy private data: events, handlers, etc.\n\tif ( dataPriv.hasData( src ) ) {\n\t\tpdataOld = dataPriv.get( src );\n\t\tevents = pdataOld.events;\n\n\t\tif ( events ) {\n\t\t\tdataPriv.remove( dest, \"handle events\" );\n\n\t\t\tfor ( type in events ) {\n\t\t\t\tfor ( i = 0, l = events[ type ].length; i < l; i++ ) {\n\t\t\t\t\tjQuery.event.add( dest, type, events[ type ][ i ] );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// 2. Copy user data\n\tif ( dataUser.hasData( src ) ) {\n\t\tudataOld = dataUser.access( src );\n\t\tudataCur = jQuery.extend( {}, udataOld );\n\n\t\tdataUser.set( dest, udataCur );\n\t}\n}\n\n// Fix IE bugs, see support tests\nfunction fixInput( src, dest ) {\n\tvar nodeName = dest.nodeName.toLowerCase();\n\n\t// Fails to persist the checked state of a cloned checkbox or radio button.\n\tif ( nodeName === \"input\" && rcheckableType.test( src.type ) ) {\n\t\tdest.checked = src.checked;\n\n\t// Fails to return the selected option to the default selected state when cloning options\n\t} else if ( nodeName === \"input\" || nodeName === \"textarea\" ) {\n\t\tdest.defaultValue = src.defaultValue;\n\t}\n}\n\nfunction domManip( collection, args, callback, ignored ) {\n\n\t// Flatten any nested arrays\n\targs = flat( args );\n\n\tvar fragment, first, scripts, hasScripts, node, doc,\n\t\ti = 0,\n\t\tl = collection.length,\n\t\tiNoClone = l - 1,\n\t\tvalue = args[ 0 ],\n\t\tvalueIsFunction = isFunction( value );\n\n\t// We can't cloneNode fragments that contain checked, in WebKit\n\tif ( valueIsFunction ||\n\t\t\t( l > 1 && typeof value === \"string\" &&\n\t\t\t\t!support.checkClone && rchecked.test( value ) ) ) {\n\t\treturn collection.each( function( index ) {\n\t\t\tvar self = collection.eq( index );\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\targs[ 0 ] = value.call( this, index, self.html() );\n\t\t\t}\n\t\t\tdomManip( self, args, callback, ignored );\n\t\t} );\n\t}\n\n\tif ( l ) {\n\t\tfragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );\n\t\tfirst = fragment.firstChild;\n\n\t\tif ( fragment.childNodes.length === 1 ) {\n\t\t\tfragment = first;\n\t\t}\n\n\t\t// Require either new content or an interest in ignored elements to invoke the callback\n\t\tif ( first || ignored ) {\n\t\t\tscripts = jQuery.map( getAll( fragment, \"script\" ), disableScript );\n\t\t\thasScripts = scripts.length;\n\n\t\t\t// Use the original fragment for the last item\n\t\t\t// instead of the first because it can end up\n\t\t\t// being emptied incorrectly in certain situations (#8070).\n\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\tnode = fragment;\n\n\t\t\t\tif ( i !== iNoClone ) {\n\t\t\t\t\tnode = jQuery.clone( node, true, true );\n\n\t\t\t\t\t// Keep references to cloned scripts for later restoration\n\t\t\t\t\tif ( hasScripts ) {\n\n\t\t\t\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t\t\t\t// push.apply(_, arraylike) throws on ancient WebKit\n\t\t\t\t\t\tjQuery.merge( scripts, getAll( node, \"script\" ) );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tcallback.call( collection[ i ], node, i );\n\t\t\t}\n\n\t\t\tif ( hasScripts ) {\n\t\t\t\tdoc = scripts[ scripts.length - 1 ].ownerDocument;\n\n\t\t\t\t// Reenable scripts\n\t\t\t\tjQuery.map( scripts, restoreScript );\n\n\t\t\t\t// Evaluate executable scripts on first document insertion\n\t\t\t\tfor ( i = 0; i < hasScripts; i++ ) {\n\t\t\t\t\tnode = scripts[ i ];\n\t\t\t\t\tif ( rscriptType.test( node.type || \"\" ) &&\n\t\t\t\t\t\t!dataPriv.access( node, \"globalEval\" ) &&\n\t\t\t\t\t\tjQuery.contains( doc, node ) ) {\n\n\t\t\t\t\t\tif ( node.src && ( node.type || \"\" ).toLowerCase()  !== \"module\" ) {\n\n\t\t\t\t\t\t\t// Optional AJAX dependency, but won't run scripts if not present\n\t\t\t\t\t\t\tif ( jQuery._evalUrl && !node.noModule ) {\n\t\t\t\t\t\t\t\tjQuery._evalUrl( node.src, {\n\t\t\t\t\t\t\t\t\tnonce: node.nonce || node.getAttribute( \"nonce\" )\n\t\t\t\t\t\t\t\t}, doc );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tDOMEval( node.textContent.replace( rcleanScript, \"\" ), node, doc );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn collection;\n}\n\nfunction remove( elem, selector, keepData ) {\n\tvar node,\n\t\tnodes = selector ? jQuery.filter( selector, elem ) : elem,\n\t\ti = 0;\n\n\tfor ( ; ( node = nodes[ i ] ) != null; i++ ) {\n\t\tif ( !keepData && node.nodeType === 1 ) {\n\t\t\tjQuery.cleanData( getAll( node ) );\n\t\t}\n\n\t\tif ( node.parentNode ) {\n\t\t\tif ( keepData && isAttached( node ) ) {\n\t\t\t\tsetGlobalEval( getAll( node, \"script\" ) );\n\t\t\t}\n\t\t\tnode.parentNode.removeChild( node );\n\t\t}\n\t}\n\n\treturn elem;\n}\n\njQuery.extend( {\n\thtmlPrefilter: function( html ) {\n\t\treturn html;\n\t},\n\n\tclone: function( elem, dataAndEvents, deepDataAndEvents ) {\n\t\tvar i, l, srcElements, destElements,\n\t\t\tclone = elem.cloneNode( true ),\n\t\t\tinPage = isAttached( elem );\n\n\t\t// Fix IE cloning issues\n\t\tif ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&\n\t\t\t\t!jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2\n\t\t\tdestElements = getAll( clone );\n\t\t\tsrcElements = getAll( elem );\n\n\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\tfixInput( srcElements[ i ], destElements[ i ] );\n\t\t\t}\n\t\t}\n\n\t\t// Copy the events from the original to the clone\n\t\tif ( dataAndEvents ) {\n\t\t\tif ( deepDataAndEvents ) {\n\t\t\t\tsrcElements = srcElements || getAll( elem );\n\t\t\t\tdestElements = destElements || getAll( clone );\n\n\t\t\t\tfor ( i = 0, l = srcElements.length; i < l; i++ ) {\n\t\t\t\t\tcloneCopyEvent( srcElements[ i ], destElements[ i ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcloneCopyEvent( elem, clone );\n\t\t\t}\n\t\t}\n\n\t\t// Preserve script evaluation history\n\t\tdestElements = getAll( clone, \"script\" );\n\t\tif ( destElements.length > 0 ) {\n\t\t\tsetGlobalEval( destElements, !inPage && getAll( elem, \"script\" ) );\n\t\t}\n\n\t\t// Return the cloned set\n\t\treturn clone;\n\t},\n\n\tcleanData: function( elems ) {\n\t\tvar data, elem, type,\n\t\t\tspecial = jQuery.event.special,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {\n\t\t\tif ( acceptData( elem ) ) {\n\t\t\t\tif ( ( data = elem[ dataPriv.expando ] ) ) {\n\t\t\t\t\tif ( data.events ) {\n\t\t\t\t\t\tfor ( type in data.events ) {\n\t\t\t\t\t\t\tif ( special[ type ] ) {\n\t\t\t\t\t\t\t\tjQuery.event.remove( elem, type );\n\n\t\t\t\t\t\t\t// This is a shortcut to avoid jQuery.event.remove's overhead\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tjQuery.removeEvent( elem, type, data.handle );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataPriv.expando ] = undefined;\n\t\t\t\t}\n\t\t\t\tif ( elem[ dataUser.expando ] ) {\n\n\t\t\t\t\t// Support: Chrome <=35 - 45+\n\t\t\t\t\t// Assign undefined instead of using delete, see Data#remove\n\t\t\t\t\telem[ dataUser.expando ] = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n} );\n\njQuery.fn.extend( {\n\tdetach: function( selector ) {\n\t\treturn remove( this, selector, true );\n\t},\n\n\tremove: function( selector ) {\n\t\treturn remove( this, selector );\n\t},\n\n\ttext: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\treturn value === undefined ?\n\t\t\t\tjQuery.text( this ) :\n\t\t\t\tthis.empty().each( function() {\n\t\t\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\t\t\tthis.textContent = value;\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t}, null, value, arguments.length );\n\t},\n\n\tappend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.appendChild( elem );\n\t\t\t}\n\t\t} );\n\t},\n\n\tprepend: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {\n\t\t\t\tvar target = manipulationTarget( this, elem );\n\t\t\t\ttarget.insertBefore( elem, target.firstChild );\n\t\t\t}\n\t\t} );\n\t},\n\n\tbefore: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this );\n\t\t\t}\n\t\t} );\n\t},\n\n\tafter: function() {\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tif ( this.parentNode ) {\n\t\t\t\tthis.parentNode.insertBefore( elem, this.nextSibling );\n\t\t\t}\n\t\t} );\n\t},\n\n\tempty: function() {\n\t\tvar elem,\n\t\t\ti = 0;\n\n\t\tfor ( ; ( elem = this[ i ] ) != null; i++ ) {\n\t\t\tif ( elem.nodeType === 1 ) {\n\n\t\t\t\t// Prevent memory leaks\n\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\n\t\t\t\t// Remove any remaining nodes\n\t\t\t\telem.textContent = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tclone: function( dataAndEvents, deepDataAndEvents ) {\n\t\tdataAndEvents = dataAndEvents == null ? false : dataAndEvents;\n\t\tdeepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;\n\n\t\treturn this.map( function() {\n\t\t\treturn jQuery.clone( this, dataAndEvents, deepDataAndEvents );\n\t\t} );\n\t},\n\n\thtml: function( value ) {\n\t\treturn access( this, function( value ) {\n\t\t\tvar elem = this[ 0 ] || {},\n\t\t\t\ti = 0,\n\t\t\t\tl = this.length;\n\n\t\t\tif ( value === undefined && elem.nodeType === 1 ) {\n\t\t\t\treturn elem.innerHTML;\n\t\t\t}\n\n\t\t\t// See if we can take a shortcut and just use innerHTML\n\t\t\tif ( typeof value === \"string\" && !rnoInnerhtml.test( value ) &&\n\t\t\t\t!wrapMap[ ( rtagName.exec( value ) || [ \"\", \"\" ] )[ 1 ].toLowerCase() ] ) {\n\n\t\t\t\tvalue = jQuery.htmlPrefilter( value );\n\n\t\t\t\ttry {\n\t\t\t\t\tfor ( ; i < l; i++ ) {\n\t\t\t\t\t\telem = this[ i ] || {};\n\n\t\t\t\t\t\t// Remove element nodes and prevent memory leaks\n\t\t\t\t\t\tif ( elem.nodeType === 1 ) {\n\t\t\t\t\t\t\tjQuery.cleanData( getAll( elem, false ) );\n\t\t\t\t\t\t\telem.innerHTML = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\telem = 0;\n\n\t\t\t\t// If using innerHTML throws an exception, use the fallback method\n\t\t\t\t} catch ( e ) {}\n\t\t\t}\n\n\t\t\tif ( elem ) {\n\t\t\t\tthis.empty().append( value );\n\t\t\t}\n\t\t}, null, value, arguments.length );\n\t},\n\n\treplaceWith: function() {\n\t\tvar ignored = [];\n\n\t\t// Make the changes, replacing each non-ignored context element with the new content\n\t\treturn domManip( this, arguments, function( elem ) {\n\t\t\tvar parent = this.parentNode;\n\n\t\t\tif ( jQuery.inArray( this, ignored ) < 0 ) {\n\t\t\t\tjQuery.cleanData( getAll( this ) );\n\t\t\t\tif ( parent ) {\n\t\t\t\t\tparent.replaceChild( elem, this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t// Force callback invocation\n\t\t}, ignored );\n\t}\n} );\n\njQuery.each( {\n\tappendTo: \"append\",\n\tprependTo: \"prepend\",\n\tinsertBefore: \"before\",\n\tinsertAfter: \"after\",\n\treplaceAll: \"replaceWith\"\n}, function( name, original ) {\n\tjQuery.fn[ name ] = function( selector ) {\n\t\tvar elems,\n\t\t\tret = [],\n\t\t\tinsert = jQuery( selector ),\n\t\t\tlast = insert.length - 1,\n\t\t\ti = 0;\n\n\t\tfor ( ; i <= last; i++ ) {\n\t\t\telems = i === last ? this : this.clone( true );\n\t\t\tjQuery( insert[ i ] )[ original ]( elems );\n\n\t\t\t// Support: Android <=4.0 only, PhantomJS 1 only\n\t\t\t// .get() because push.apply(_, arraylike) throws on ancient WebKit\n\t\t\tpush.apply( ret, elems.get() );\n\t\t}\n\n\t\treturn this.pushStack( ret );\n\t};\n} );\nvar rnumnonpx = new RegExp( \"^(\" + pnum + \")(?!px)[a-z%]+$\", \"i\" );\n\nvar getStyles = function( elem ) {\n\n\t\t// Support: IE <=11 only, Firefox <=30 (#15098, #14150)\n\t\t// IE throws on elements created in popups\n\t\t// FF meanwhile throws on frame elements through \"defaultView.getComputedStyle\"\n\t\tvar view = elem.ownerDocument.defaultView;\n\n\t\tif ( !view || !view.opener ) {\n\t\t\tview = window;\n\t\t}\n\n\t\treturn view.getComputedStyle( elem );\n\t};\n\nvar swap = function( elem, options, callback ) {\n\tvar ret, name,\n\t\told = {};\n\n\t// Remember the old values, and insert the new ones\n\tfor ( name in options ) {\n\t\told[ name ] = elem.style[ name ];\n\t\telem.style[ name ] = options[ name ];\n\t}\n\n\tret = callback.call( elem );\n\n\t// Revert the old values\n\tfor ( name in options ) {\n\t\telem.style[ name ] = old[ name ];\n\t}\n\n\treturn ret;\n};\n\n\nvar rboxStyle = new RegExp( cssExpand.join( \"|\" ), \"i\" );\n\n\n\n( function() {\n\n\t// Executing both pixelPosition & boxSizingReliable tests require only one layout\n\t// so they're executed at the same time to save the second computation.\n\tfunction computeStyleTests() {\n\n\t\t// This is a singleton, we need to execute it only once\n\t\tif ( !div ) {\n\t\t\treturn;\n\t\t}\n\n\t\tcontainer.style.cssText = \"position:absolute;left:-11111px;width:60px;\" +\n\t\t\t\"margin-top:1px;padding:0;border:0\";\n\t\tdiv.style.cssText =\n\t\t\t\"position:relative;display:block;box-sizing:border-box;overflow:scroll;\" +\n\t\t\t\"margin:auto;border:1px;padding:1px;\" +\n\t\t\t\"width:60%;top:1%\";\n\t\tdocumentElement.appendChild( container ).appendChild( div );\n\n\t\tvar divStyle = window.getComputedStyle( div );\n\t\tpixelPositionVal = divStyle.top !== \"1%\";\n\n\t\t// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44\n\t\treliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;\n\n\t\t// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3\n\t\t// Some styles come back with percentage values, even though they shouldn't\n\t\tdiv.style.right = \"60%\";\n\t\tpixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;\n\n\t\t// Support: IE 9 - 11 only\n\t\t// Detect misreporting of content dimensions for box-sizing:border-box elements\n\t\tboxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;\n\n\t\t// Support: IE 9 only\n\t\t// Detect overflow:scroll screwiness (gh-3699)\n\t\t// Support: Chrome <=64\n\t\t// Don't get tricked when zoom affects offsetWidth (gh-4029)\n\t\tdiv.style.position = \"absolute\";\n\t\tscrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;\n\n\t\tdocumentElement.removeChild( container );\n\n\t\t// Nullify the div so it wouldn't be stored in the memory and\n\t\t// it will also be a sign that checks already performed\n\t\tdiv = null;\n\t}\n\n\tfunction roundPixelMeasures( measure ) {\n\t\treturn Math.round( parseFloat( measure ) );\n\t}\n\n\tvar pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,\n\t\treliableTrDimensionsVal, reliableMarginLeftVal,\n\t\tcontainer = document.createElement( \"div\" ),\n\t\tdiv = document.createElement( \"div\" );\n\n\t// Finish early in limited (non-browser) environments\n\tif ( !div.style ) {\n\t\treturn;\n\t}\n\n\t// Support: IE <=9 - 11 only\n\t// Style of cloned element affects source element cloned (#8908)\n\tdiv.style.backgroundClip = \"content-box\";\n\tdiv.cloneNode( true ).style.backgroundClip = \"\";\n\tsupport.clearCloneStyle = div.style.backgroundClip === \"content-box\";\n\n\tjQuery.extend( support, {\n\t\tboxSizingReliable: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn boxSizingReliableVal;\n\t\t},\n\t\tpixelBoxStyles: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelBoxStylesVal;\n\t\t},\n\t\tpixelPosition: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn pixelPositionVal;\n\t\t},\n\t\treliableMarginLeft: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn reliableMarginLeftVal;\n\t\t},\n\t\tscrollboxSize: function() {\n\t\t\tcomputeStyleTests();\n\t\t\treturn scrollboxSizeVal;\n\t\t},\n\n\t\t// Support: IE 9 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Behavior in IE 9 is more subtle than in newer versions & it passes\n\t\t// some versions of this test; make sure not to make it pass there!\n\t\t//\n\t\t// Support: Firefox 70+\n\t\t// Only Firefox includes border widths\n\t\t// in computed dimensions. (gh-4529)\n\t\treliableTrDimensions: function() {\n\t\t\tvar table, tr, trChild, trStyle;\n\t\t\tif ( reliableTrDimensionsVal == null ) {\n\t\t\t\ttable = document.createElement( \"table\" );\n\t\t\t\ttr = document.createElement( \"tr\" );\n\t\t\t\ttrChild = document.createElement( \"div\" );\n\n\t\t\t\ttable.style.cssText = \"position:absolute;left:-11111px;border-collapse:separate\";\n\t\t\t\ttr.style.cssText = \"border:1px solid\";\n\n\t\t\t\t// Support: Chrome 86+\n\t\t\t\t// Height set through cssText does not get applied.\n\t\t\t\t// Computed height then comes back as 0.\n\t\t\t\ttr.style.height = \"1px\";\n\t\t\t\ttrChild.style.height = \"9px\";\n\n\t\t\t\t// Support: Android 8 Chrome 86+\n\t\t\t\t// In our bodyBackground.html iframe,\n\t\t\t\t// display for all div elements is set to \"inline\",\n\t\t\t\t// which causes a problem only in Android 8 Chrome 86.\n\t\t\t\t// Ensuring the div is display: block\n\t\t\t\t// gets around this issue.\n\t\t\t\ttrChild.style.display = \"block\";\n\n\t\t\t\tdocumentElement\n\t\t\t\t\t.appendChild( table )\n\t\t\t\t\t.appendChild( tr )\n\t\t\t\t\t.appendChild( trChild );\n\n\t\t\t\ttrStyle = window.getComputedStyle( tr );\n\t\t\t\treliableTrDimensionsVal = ( parseInt( trStyle.height, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderTopWidth, 10 ) +\n\t\t\t\t\tparseInt( trStyle.borderBottomWidth, 10 ) ) === tr.offsetHeight;\n\n\t\t\t\tdocumentElement.removeChild( table );\n\t\t\t}\n\t\t\treturn reliableTrDimensionsVal;\n\t\t}\n\t} );\n} )();\n\n\nfunction curCSS( elem, name, computed ) {\n\tvar width, minWidth, maxWidth, ret,\n\n\t\t// Support: Firefox 51+\n\t\t// Retrieving style before computed somehow\n\t\t// fixes an issue with getting wrong values\n\t\t// on detached elements\n\t\tstyle = elem.style;\n\n\tcomputed = computed || getStyles( elem );\n\n\t// getPropertyValue is needed for:\n\t//   .css('filter') (IE 9 only, #12537)\n\t//   .css('--customProperty) (#3144)\n\tif ( computed ) {\n\t\tret = computed.getPropertyValue( name ) || computed[ name ];\n\n\t\tif ( ret === \"\" && !isAttached( elem ) ) {\n\t\t\tret = jQuery.style( elem, name );\n\t\t}\n\n\t\t// A tribute to the \"awesome hack by Dean Edwards\"\n\t\t// Android Browser returns percentage for some values,\n\t\t// but width seems to be reliably pixels.\n\t\t// This is against the CSSOM draft spec:\n\t\t// https://drafts.csswg.org/cssom/#resolved-values\n\t\tif ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {\n\n\t\t\t// Remember the original values\n\t\t\twidth = style.width;\n\t\t\tminWidth = style.minWidth;\n\t\t\tmaxWidth = style.maxWidth;\n\n\t\t\t// Put in the new values to get a computed value out\n\t\t\tstyle.minWidth = style.maxWidth = style.width = ret;\n\t\t\tret = computed.width;\n\n\t\t\t// Revert the changed values\n\t\t\tstyle.width = width;\n\t\t\tstyle.minWidth = minWidth;\n\t\t\tstyle.maxWidth = maxWidth;\n\t\t}\n\t}\n\n\treturn ret !== undefined ?\n\n\t\t// Support: IE <=9 - 11 only\n\t\t// IE returns zIndex value as an integer.\n\t\tret + \"\" :\n\t\tret;\n}\n\n\nfunction addGetHookIf( conditionFn, hookFn ) {\n\n\t// Define the hook, we'll check on the first run if it's really needed.\n\treturn {\n\t\tget: function() {\n\t\t\tif ( conditionFn() ) {\n\n\t\t\t\t// Hook not needed (or it's not possible to use it due\n\t\t\t\t// to missing dependency), remove it.\n\t\t\t\tdelete this.get;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Hook needed; redefine it so that the support test is not executed again.\n\t\t\treturn ( this.get = hookFn ).apply( this, arguments );\n\t\t}\n\t};\n}\n\n\nvar cssPrefixes = [ \"Webkit\", \"Moz\", \"ms\" ],\n\temptyStyle = document.createElement( \"div\" ).style,\n\tvendorProps = {};\n\n// Return a vendor-prefixed property or undefined\nfunction vendorPropName( name ) {\n\n\t// Check for vendor prefixed names\n\tvar capName = name[ 0 ].toUpperCase() + name.slice( 1 ),\n\t\ti = cssPrefixes.length;\n\n\twhile ( i-- ) {\n\t\tname = cssPrefixes[ i ] + capName;\n\t\tif ( name in emptyStyle ) {\n\t\t\treturn name;\n\t\t}\n\t}\n}\n\n// Return a potentially-mapped jQuery.cssProps or vendor prefixed property\nfunction finalPropName( name ) {\n\tvar final = jQuery.cssProps[ name ] || vendorProps[ name ];\n\n\tif ( final ) {\n\t\treturn final;\n\t}\n\tif ( name in emptyStyle ) {\n\t\treturn name;\n\t}\n\treturn vendorProps[ name ] = vendorPropName( name ) || name;\n}\n\n\nvar\n\n\t// Swappable if display is none or starts with table\n\t// except \"table\", \"table-cell\", or \"table-caption\"\n\t// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display\n\trdisplayswap = /^(none|table(?!-c[ea]).+)/,\n\trcustomProp = /^--/,\n\tcssShow = { position: \"absolute\", visibility: \"hidden\", display: \"block\" },\n\tcssNormalTransform = {\n\t\tletterSpacing: \"0\",\n\t\tfontWeight: \"400\"\n\t};\n\nfunction setPositiveNumber( _elem, value, subtract ) {\n\n\t// Any relative (+/-) values have already been\n\t// normalized at this point\n\tvar matches = rcssNum.exec( value );\n\treturn matches ?\n\n\t\t// Guard against undefined \"subtract\", e.g., when used as in cssHooks\n\t\tMath.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || \"px\" ) :\n\t\tvalue;\n}\n\nfunction boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {\n\tvar i = dimension === \"width\" ? 1 : 0,\n\t\textra = 0,\n\t\tdelta = 0;\n\n\t// Adjustment may not be necessary\n\tif ( box === ( isBorderBox ? \"border\" : \"content\" ) ) {\n\t\treturn 0;\n\t}\n\n\tfor ( ; i < 4; i += 2 ) {\n\n\t\t// Both box models exclude margin\n\t\tif ( box === \"margin\" ) {\n\t\t\tdelta += jQuery.css( elem, box + cssExpand[ i ], true, styles );\n\t\t}\n\n\t\t// If we get here with a content-box, we're seeking \"padding\" or \"border\" or \"margin\"\n\t\tif ( !isBorderBox ) {\n\n\t\t\t// Add padding\n\t\t\tdelta += jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\n\t\t\t// For \"border\" or \"margin\", add border\n\t\t\tif ( box !== \"padding\" ) {\n\t\t\t\tdelta += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\n\t\t\t// But still keep track of it otherwise\n\t\t\t} else {\n\t\t\t\textra += jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\n\t\t// If we get here with a border-box (content + padding + border), we're seeking \"content\" or\n\t\t// \"padding\" or \"margin\"\n\t\t} else {\n\n\t\t\t// For \"content\", subtract padding\n\t\t\tif ( box === \"content\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"padding\" + cssExpand[ i ], true, styles );\n\t\t\t}\n\n\t\t\t// For \"content\" or \"padding\", subtract border\n\t\t\tif ( box !== \"margin\" ) {\n\t\t\t\tdelta -= jQuery.css( elem, \"border\" + cssExpand[ i ] + \"Width\", true, styles );\n\t\t\t}\n\t\t}\n\t}\n\n\t// Account for positive content-box scroll gutter when requested by providing computedVal\n\tif ( !isBorderBox && computedVal >= 0 ) {\n\n\t\t// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border\n\t\t// Assuming integer scroll gutter, subtract the rest and round down\n\t\tdelta += Math.max( 0, Math.ceil(\n\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\tcomputedVal -\n\t\t\tdelta -\n\t\t\textra -\n\t\t\t0.5\n\n\t\t// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter\n\t\t// Use an explicit zero to avoid NaN (gh-3964)\n\t\t) ) || 0;\n\t}\n\n\treturn delta;\n}\n\nfunction getWidthOrHeight( elem, dimension, extra ) {\n\n\t// Start with computed style\n\tvar styles = getStyles( elem ),\n\n\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).\n\t\t// Fake content-box until we know it's needed to know the true value.\n\t\tboxSizingNeeded = !support.boxSizingReliable() || extra,\n\t\tisBorderBox = boxSizingNeeded &&\n\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\tvalueIsBorderBox = isBorderBox,\n\n\t\tval = curCSS( elem, dimension, styles ),\n\t\toffsetProp = \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );\n\n\t// Support: Firefox <=54\n\t// Return a confounding non-pixel value or feign ignorance, as appropriate.\n\tif ( rnumnonpx.test( val ) ) {\n\t\tif ( !extra ) {\n\t\t\treturn val;\n\t\t}\n\t\tval = \"auto\";\n\t}\n\n\n\t// Support: IE 9 - 11 only\n\t// Use offsetWidth/offsetHeight for when box sizing is unreliable.\n\t// In those cases, the computed value can be trusted to be border-box.\n\tif ( ( !support.boxSizingReliable() && isBorderBox ||\n\n\t\t// Support: IE 10 - 11+, Edge 15 - 18+\n\t\t// IE/Edge misreport `getComputedStyle` of table rows with width/height\n\t\t// set in CSS while `offset*` properties report correct values.\n\t\t// Interestingly, in some cases IE 9 doesn't suffer from this issue.\n\t\t!support.reliableTrDimensions() && nodeName( elem, \"tr\" ) ||\n\n\t\t// Fall back to offsetWidth/offsetHeight when value is \"auto\"\n\t\t// This happens for inline elements with no explicit setting (gh-3571)\n\t\tval === \"auto\" ||\n\n\t\t// Support: Android <=4.1 - 4.3 only\n\t\t// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)\n\t\t!parseFloat( val ) && jQuery.css( elem, \"display\", false, styles ) === \"inline\" ) &&\n\n\t\t// Make sure the element is visible & connected\n\t\telem.getClientRects().length ) {\n\n\t\tisBorderBox = jQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\";\n\n\t\t// Where available, offsetWidth/offsetHeight approximate border box dimensions.\n\t\t// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the\n\t\t// retrieved value as a content box dimension.\n\t\tvalueIsBorderBox = offsetProp in elem;\n\t\tif ( valueIsBorderBox ) {\n\t\t\tval = elem[ offsetProp ];\n\t\t}\n\t}\n\n\t// Normalize \"\" and auto\n\tval = parseFloat( val ) || 0;\n\n\t// Adjust for the element's box model\n\treturn ( val +\n\t\tboxModelAdjustment(\n\t\t\telem,\n\t\t\tdimension,\n\t\t\textra || ( isBorderBox ? \"border\" : \"content\" ),\n\t\t\tvalueIsBorderBox,\n\t\t\tstyles,\n\n\t\t\t// Provide the current computed size to request scroll gutter calculation (gh-3589)\n\t\t\tval\n\t\t)\n\t) + \"px\";\n}\n\njQuery.extend( {\n\n\t// Add in style property hooks for overriding the default\n\t// behavior of getting and setting a style property\n\tcssHooks: {\n\t\topacity: {\n\t\t\tget: function( elem, computed ) {\n\t\t\t\tif ( computed ) {\n\n\t\t\t\t\t// We should always get a number back from opacity\n\t\t\t\t\tvar ret = curCSS( elem, \"opacity\" );\n\t\t\t\t\treturn ret === \"\" ? \"1\" : ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Don't automatically add \"px\" to these possibly-unitless properties\n\tcssNumber: {\n\t\t\"animationIterationCount\": true,\n\t\t\"columnCount\": true,\n\t\t\"fillOpacity\": true,\n\t\t\"flexGrow\": true,\n\t\t\"flexShrink\": true,\n\t\t\"fontWeight\": true,\n\t\t\"gridArea\": true,\n\t\t\"gridColumn\": true,\n\t\t\"gridColumnEnd\": true,\n\t\t\"gridColumnStart\": true,\n\t\t\"gridRow\": true,\n\t\t\"gridRowEnd\": true,\n\t\t\"gridRowStart\": true,\n\t\t\"lineHeight\": true,\n\t\t\"opacity\": true,\n\t\t\"order\": true,\n\t\t\"orphans\": true,\n\t\t\"widows\": true,\n\t\t\"zIndex\": true,\n\t\t\"zoom\": true\n\t},\n\n\t// Add in properties whose names you wish to fix before\n\t// setting or getting the value\n\tcssProps: {},\n\n\t// Get and set the style property on a DOM Node\n\tstyle: function( elem, name, value, extra ) {\n\n\t\t// Don't set styles on text and comment nodes\n\t\tif ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure that we're working with the right name\n\t\tvar ret, type, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name ),\n\t\t\tstyle = elem.style;\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to query the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Gets hook for the prefixed version, then unprefixed version\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// Check if we're setting a value\n\t\tif ( value !== undefined ) {\n\t\t\ttype = typeof value;\n\n\t\t\t// Convert \"+=\" or \"-=\" to relative numbers (#7345)\n\t\t\tif ( type === \"string\" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {\n\t\t\t\tvalue = adjustCSS( elem, name, ret );\n\n\t\t\t\t// Fixes bug #9237\n\t\t\t\ttype = \"number\";\n\t\t\t}\n\n\t\t\t// Make sure that null and NaN values aren't set (#7116)\n\t\t\tif ( value == null || value !== value ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If a number was passed in, add the unit (except for certain CSS properties)\n\t\t\t// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append\n\t\t\t// \"px\" to a few hardcoded values.\n\t\t\tif ( type === \"number\" && !isCustomProp ) {\n\t\t\t\tvalue += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? \"\" : \"px\" );\n\t\t\t}\n\n\t\t\t// background-* props affect original clone's values\n\t\t\tif ( !support.clearCloneStyle && value === \"\" && name.indexOf( \"background\" ) === 0 ) {\n\t\t\t\tstyle[ name ] = \"inherit\";\n\t\t\t}\n\n\t\t\t// If a hook was provided, use that value, otherwise just set the specified value\n\t\t\tif ( !hooks || !( \"set\" in hooks ) ||\n\t\t\t\t( value = hooks.set( elem, value, extra ) ) !== undefined ) {\n\n\t\t\t\tif ( isCustomProp ) {\n\t\t\t\t\tstyle.setProperty( name, value );\n\t\t\t\t} else {\n\t\t\t\t\tstyle[ name ] = value;\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// If a hook was provided get the non-computed value from there\n\t\t\tif ( hooks && \"get\" in hooks &&\n\t\t\t\t( ret = hooks.get( elem, false, extra ) ) !== undefined ) {\n\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\t// Otherwise just get the value from the style object\n\t\t\treturn style[ name ];\n\t\t}\n\t},\n\n\tcss: function( elem, name, extra, styles ) {\n\t\tvar val, num, hooks,\n\t\t\torigName = camelCase( name ),\n\t\t\tisCustomProp = rcustomProp.test( name );\n\n\t\t// Make sure that we're working with the right name. We don't\n\t\t// want to modify the value if it is a CSS custom property\n\t\t// since they are user-defined.\n\t\tif ( !isCustomProp ) {\n\t\t\tname = finalPropName( origName );\n\t\t}\n\n\t\t// Try prefixed name followed by the unprefixed name\n\t\thooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];\n\n\t\t// If a hook was provided get the computed value from there\n\t\tif ( hooks && \"get\" in hooks ) {\n\t\t\tval = hooks.get( elem, true, extra );\n\t\t}\n\n\t\t// Otherwise, if a way to get the computed value exists, use that\n\t\tif ( val === undefined ) {\n\t\t\tval = curCSS( elem, name, styles );\n\t\t}\n\n\t\t// Convert \"normal\" to computed value\n\t\tif ( val === \"normal\" && name in cssNormalTransform ) {\n\t\t\tval = cssNormalTransform[ name ];\n\t\t}\n\n\t\t// Make numeric if forced or a qualifier was provided and val looks numeric\n\t\tif ( extra === \"\" || extra ) {\n\t\t\tnum = parseFloat( val );\n\t\t\treturn extra === true || isFinite( num ) ? num || 0 : val;\n\t\t}\n\n\t\treturn val;\n\t}\n} );\n\njQuery.each( [ \"height\", \"width\" ], function( _i, dimension ) {\n\tjQuery.cssHooks[ dimension ] = {\n\t\tget: function( elem, computed, extra ) {\n\t\t\tif ( computed ) {\n\n\t\t\t\t// Certain elements can have dimension info if we invisibly show them\n\t\t\t\t// but it must have a current display style that would benefit\n\t\t\t\treturn rdisplayswap.test( jQuery.css( elem, \"display\" ) ) &&\n\n\t\t\t\t\t// Support: Safari 8+\n\t\t\t\t\t// Table columns in Safari have non-zero offsetWidth & zero\n\t\t\t\t\t// getBoundingClientRect().width unless display is changed.\n\t\t\t\t\t// Support: IE <=11 only\n\t\t\t\t\t// Running getBoundingClientRect on a disconnected node\n\t\t\t\t\t// in IE throws an error.\n\t\t\t\t\t( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?\n\t\t\t\t\tswap( elem, cssShow, function() {\n\t\t\t\t\t\treturn getWidthOrHeight( elem, dimension, extra );\n\t\t\t\t\t} ) :\n\t\t\t\t\tgetWidthOrHeight( elem, dimension, extra );\n\t\t\t}\n\t\t},\n\n\t\tset: function( elem, value, extra ) {\n\t\t\tvar matches,\n\t\t\t\tstyles = getStyles( elem ),\n\n\t\t\t\t// Only read styles.position if the test has a chance to fail\n\t\t\t\t// to avoid forcing a reflow.\n\t\t\t\tscrollboxSizeBuggy = !support.scrollboxSize() &&\n\t\t\t\t\tstyles.position === \"absolute\",\n\n\t\t\t\t// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)\n\t\t\t\tboxSizingNeeded = scrollboxSizeBuggy || extra,\n\t\t\t\tisBorderBox = boxSizingNeeded &&\n\t\t\t\t\tjQuery.css( elem, \"boxSizing\", false, styles ) === \"border-box\",\n\t\t\t\tsubtract = extra ?\n\t\t\t\t\tboxModelAdjustment(\n\t\t\t\t\t\telem,\n\t\t\t\t\t\tdimension,\n\t\t\t\t\t\textra,\n\t\t\t\t\t\tisBorderBox,\n\t\t\t\t\t\tstyles\n\t\t\t\t\t) :\n\t\t\t\t\t0;\n\n\t\t\t// Account for unreliable border-box dimensions by comparing offset* to computed and\n\t\t\t// faking a content-box to get border and padding (gh-3699)\n\t\t\tif ( isBorderBox && scrollboxSizeBuggy ) {\n\t\t\t\tsubtract -= Math.ceil(\n\t\t\t\t\telem[ \"offset\" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -\n\t\t\t\t\tparseFloat( styles[ dimension ] ) -\n\t\t\t\t\tboxModelAdjustment( elem, dimension, \"border\", false, styles ) -\n\t\t\t\t\t0.5\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Convert to pixels if value adjustment is needed\n\t\t\tif ( subtract && ( matches = rcssNum.exec( value ) ) &&\n\t\t\t\t( matches[ 3 ] || \"px\" ) !== \"px\" ) {\n\n\t\t\t\telem.style[ dimension ] = value;\n\t\t\t\tvalue = jQuery.css( elem, dimension );\n\t\t\t}\n\n\t\t\treturn setPositiveNumber( elem, value, subtract );\n\t\t}\n\t};\n} );\n\njQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,\n\tfunction( elem, computed ) {\n\t\tif ( computed ) {\n\t\t\treturn ( parseFloat( curCSS( elem, \"marginLeft\" ) ) ||\n\t\t\t\telem.getBoundingClientRect().left -\n\t\t\t\t\tswap( elem, { marginLeft: 0 }, function() {\n\t\t\t\t\t\treturn elem.getBoundingClientRect().left;\n\t\t\t\t\t} )\n\t\t\t) + \"px\";\n\t\t}\n\t}\n);\n\n// These hooks are used by animate to expand properties\njQuery.each( {\n\tmargin: \"\",\n\tpadding: \"\",\n\tborder: \"Width\"\n}, function( prefix, suffix ) {\n\tjQuery.cssHooks[ prefix + suffix ] = {\n\t\texpand: function( value ) {\n\t\t\tvar i = 0,\n\t\t\t\texpanded = {},\n\n\t\t\t\t// Assumes a single number if not a string\n\t\t\t\tparts = typeof value === \"string\" ? value.split( \" \" ) : [ value ];\n\n\t\t\tfor ( ; i < 4; i++ ) {\n\t\t\t\texpanded[ prefix + cssExpand[ i ] + suffix ] =\n\t\t\t\t\tparts[ i ] || parts[ i - 2 ] || parts[ 0 ];\n\t\t\t}\n\n\t\t\treturn expanded;\n\t\t}\n\t};\n\n\tif ( prefix !== \"margin\" ) {\n\t\tjQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;\n\t}\n} );\n\njQuery.fn.extend( {\n\tcss: function( name, value ) {\n\t\treturn access( this, function( elem, name, value ) {\n\t\t\tvar styles, len,\n\t\t\t\tmap = {},\n\t\t\t\ti = 0;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\t\t\t\tstyles = getStyles( elem );\n\t\t\t\tlen = name.length;\n\n\t\t\t\tfor ( ; i < len; i++ ) {\n\t\t\t\t\tmap[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );\n\t\t\t\t}\n\n\t\t\t\treturn map;\n\t\t\t}\n\n\t\t\treturn value !== undefined ?\n\t\t\t\tjQuery.style( elem, name, value ) :\n\t\t\t\tjQuery.css( elem, name );\n\t\t}, name, value, arguments.length > 1 );\n\t}\n} );\n\n\nfunction Tween( elem, options, prop, end, easing ) {\n\treturn new Tween.prototype.init( elem, options, prop, end, easing );\n}\njQuery.Tween = Tween;\n\nTween.prototype = {\n\tconstructor: Tween,\n\tinit: function( elem, options, prop, end, easing, unit ) {\n\t\tthis.elem = elem;\n\t\tthis.prop = prop;\n\t\tthis.easing = easing || jQuery.easing._default;\n\t\tthis.options = options;\n\t\tthis.start = this.now = this.cur();\n\t\tthis.end = end;\n\t\tthis.unit = unit || ( jQuery.cssNumber[ prop ] ? \"\" : \"px\" );\n\t},\n\tcur: function() {\n\t\tvar hooks = Tween.propHooks[ this.prop ];\n\n\t\treturn hooks && hooks.get ?\n\t\t\thooks.get( this ) :\n\t\t\tTween.propHooks._default.get( this );\n\t},\n\trun: function( percent ) {\n\t\tvar eased,\n\t\t\thooks = Tween.propHooks[ this.prop ];\n\n\t\tif ( this.options.duration ) {\n\t\t\tthis.pos = eased = jQuery.easing[ this.easing ](\n\t\t\t\tpercent, this.options.duration * percent, 0, 1, this.options.duration\n\t\t\t);\n\t\t} else {\n\t\t\tthis.pos = eased = percent;\n\t\t}\n\t\tthis.now = ( this.end - this.start ) * eased + this.start;\n\n\t\tif ( this.options.step ) {\n\t\t\tthis.options.step.call( this.elem, this.now, this );\n\t\t}\n\n\t\tif ( hooks && hooks.set ) {\n\t\t\thooks.set( this );\n\t\t} else {\n\t\t\tTween.propHooks._default.set( this );\n\t\t}\n\t\treturn this;\n\t}\n};\n\nTween.prototype.init.prototype = Tween.prototype;\n\nTween.propHooks = {\n\t_default: {\n\t\tget: function( tween ) {\n\t\t\tvar result;\n\n\t\t\t// Use a property on the element directly when it is not a DOM element,\n\t\t\t// or when there is no matching style property that exists.\n\t\t\tif ( tween.elem.nodeType !== 1 ||\n\t\t\t\ttween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {\n\t\t\t\treturn tween.elem[ tween.prop ];\n\t\t\t}\n\n\t\t\t// Passing an empty string as a 3rd parameter to .css will automatically\n\t\t\t// attempt a parseFloat and fallback to a string if the parse fails.\n\t\t\t// Simple values such as \"10px\" are parsed to Float;\n\t\t\t// complex values such as \"rotate(1rad)\" are returned as-is.\n\t\t\tresult = jQuery.css( tween.elem, tween.prop, \"\" );\n\n\t\t\t// Empty strings, null, undefined and \"auto\" are converted to 0.\n\t\t\treturn !result || result === \"auto\" ? 0 : result;\n\t\t},\n\t\tset: function( tween ) {\n\n\t\t\t// Use step hook for back compat.\n\t\t\t// Use cssHook if its there.\n\t\t\t// Use .style if available and use plain properties where available.\n\t\t\tif ( jQuery.fx.step[ tween.prop ] ) {\n\t\t\t\tjQuery.fx.step[ tween.prop ]( tween );\n\t\t\t} else if ( tween.elem.nodeType === 1 && (\n\t\t\t\tjQuery.cssHooks[ tween.prop ] ||\n\t\t\t\t\ttween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {\n\t\t\t\tjQuery.style( tween.elem, tween.prop, tween.now + tween.unit );\n\t\t\t} else {\n\t\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t\t}\n\t\t}\n\t}\n};\n\n// Support: IE <=9 only\n// Panic based approach to setting things on disconnected nodes\nTween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {\n\tset: function( tween ) {\n\t\tif ( tween.elem.nodeType && tween.elem.parentNode ) {\n\t\t\ttween.elem[ tween.prop ] = tween.now;\n\t\t}\n\t}\n};\n\njQuery.easing = {\n\tlinear: function( p ) {\n\t\treturn p;\n\t},\n\tswing: function( p ) {\n\t\treturn 0.5 - Math.cos( p * Math.PI ) / 2;\n\t},\n\t_default: \"swing\"\n};\n\njQuery.fx = Tween.prototype.init;\n\n// Back compat <1.8 extension point\njQuery.fx.step = {};\n\n\n\n\nvar\n\tfxNow, inProgress,\n\trfxtypes = /^(?:toggle|show|hide)$/,\n\trrun = /queueHooks$/;\n\nfunction schedule() {\n\tif ( inProgress ) {\n\t\tif ( document.hidden === false && window.requestAnimationFrame ) {\n\t\t\twindow.requestAnimationFrame( schedule );\n\t\t} else {\n\t\t\twindow.setTimeout( schedule, jQuery.fx.interval );\n\t\t}\n\n\t\tjQuery.fx.tick();\n\t}\n}\n\n// Animations created synchronously will run synchronously\nfunction createFxNow() {\n\twindow.setTimeout( function() {\n\t\tfxNow = undefined;\n\t} );\n\treturn ( fxNow = Date.now() );\n}\n\n// Generate parameters to create a standard animation\nfunction genFx( type, includeWidth ) {\n\tvar which,\n\t\ti = 0,\n\t\tattrs = { height: type };\n\n\t// If we include width, step value is 1 to do all cssExpand values,\n\t// otherwise step value is 2 to skip over Left and Right\n\tincludeWidth = includeWidth ? 1 : 0;\n\tfor ( ; i < 4; i += 2 - includeWidth ) {\n\t\twhich = cssExpand[ i ];\n\t\tattrs[ \"margin\" + which ] = attrs[ \"padding\" + which ] = type;\n\t}\n\n\tif ( includeWidth ) {\n\t\tattrs.opacity = attrs.width = type;\n\t}\n\n\treturn attrs;\n}\n\nfunction createTween( value, prop, animation ) {\n\tvar tween,\n\t\tcollection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ \"*\" ] ),\n\t\tindex = 0,\n\t\tlength = collection.length;\n\tfor ( ; index < length; index++ ) {\n\t\tif ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {\n\n\t\t\t// We're done with this property\n\t\t\treturn tween;\n\t\t}\n\t}\n}\n\nfunction defaultPrefilter( elem, props, opts ) {\n\tvar prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,\n\t\tisBox = \"width\" in props || \"height\" in props,\n\t\tanim = this,\n\t\torig = {},\n\t\tstyle = elem.style,\n\t\thidden = elem.nodeType && isHiddenWithinTree( elem ),\n\t\tdataShow = dataPriv.get( elem, \"fxshow\" );\n\n\t// Queue-skipping animations hijack the fx hooks\n\tif ( !opts.queue ) {\n\t\thooks = jQuery._queueHooks( elem, \"fx\" );\n\t\tif ( hooks.unqueued == null ) {\n\t\t\thooks.unqueued = 0;\n\t\t\toldfire = hooks.empty.fire;\n\t\t\thooks.empty.fire = function() {\n\t\t\t\tif ( !hooks.unqueued ) {\n\t\t\t\t\toldfire();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\thooks.unqueued++;\n\n\t\tanim.always( function() {\n\n\t\t\t// Ensure the complete handler is called before this completes\n\t\t\tanim.always( function() {\n\t\t\t\thooks.unqueued--;\n\t\t\t\tif ( !jQuery.queue( elem, \"fx\" ).length ) {\n\t\t\t\t\thooks.empty.fire();\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\t// Detect show/hide animations\n\tfor ( prop in props ) {\n\t\tvalue = props[ prop ];\n\t\tif ( rfxtypes.test( value ) ) {\n\t\t\tdelete props[ prop ];\n\t\t\ttoggle = toggle || value === \"toggle\";\n\t\t\tif ( value === ( hidden ? \"hide\" : \"show\" ) ) {\n\n\t\t\t\t// Pretend to be hidden if this is a \"show\" and\n\t\t\t\t// there is still data from a stopped show/hide\n\t\t\t\tif ( value === \"show\" && dataShow && dataShow[ prop ] !== undefined ) {\n\t\t\t\t\thidden = true;\n\n\t\t\t\t// Ignore all other no-op show/hide data\n\t\t\t\t} else {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\torig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );\n\t\t}\n\t}\n\n\t// Bail out if this is a no-op like .hide().hide()\n\tpropTween = !jQuery.isEmptyObject( props );\n\tif ( !propTween && jQuery.isEmptyObject( orig ) ) {\n\t\treturn;\n\t}\n\n\t// Restrict \"overflow\" and \"display\" styles during box animations\n\tif ( isBox && elem.nodeType === 1 ) {\n\n\t\t// Support: IE <=9 - 11, Edge 12 - 15\n\t\t// Record all 3 overflow attributes because IE does not infer the shorthand\n\t\t// from identically-valued overflowX and overflowY and Edge just mirrors\n\t\t// the overflowX value there.\n\t\topts.overflow = [ style.overflow, style.overflowX, style.overflowY ];\n\n\t\t// Identify a display type, preferring old show/hide data over the CSS cascade\n\t\trestoreDisplay = dataShow && dataShow.display;\n\t\tif ( restoreDisplay == null ) {\n\t\t\trestoreDisplay = dataPriv.get( elem, \"display\" );\n\t\t}\n\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\tif ( display === \"none\" ) {\n\t\t\tif ( restoreDisplay ) {\n\t\t\t\tdisplay = restoreDisplay;\n\t\t\t} else {\n\n\t\t\t\t// Get nonempty value(s) by temporarily forcing visibility\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t\trestoreDisplay = elem.style.display || restoreDisplay;\n\t\t\t\tdisplay = jQuery.css( elem, \"display\" );\n\t\t\t\tshowHide( [ elem ] );\n\t\t\t}\n\t\t}\n\n\t\t// Animate inline elements as inline-block\n\t\tif ( display === \"inline\" || display === \"inline-block\" && restoreDisplay != null ) {\n\t\t\tif ( jQuery.css( elem, \"float\" ) === \"none\" ) {\n\n\t\t\t\t// Restore the original display value at the end of pure show/hide animations\n\t\t\t\tif ( !propTween ) {\n\t\t\t\t\tanim.done( function() {\n\t\t\t\t\t\tstyle.display = restoreDisplay;\n\t\t\t\t\t} );\n\t\t\t\t\tif ( restoreDisplay == null ) {\n\t\t\t\t\t\tdisplay = style.display;\n\t\t\t\t\t\trestoreDisplay = display === \"none\" ? \"\" : display;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tstyle.display = \"inline-block\";\n\t\t\t}\n\t\t}\n\t}\n\n\tif ( opts.overflow ) {\n\t\tstyle.overflow = \"hidden\";\n\t\tanim.always( function() {\n\t\t\tstyle.overflow = opts.overflow[ 0 ];\n\t\t\tstyle.overflowX = opts.overflow[ 1 ];\n\t\t\tstyle.overflowY = opts.overflow[ 2 ];\n\t\t} );\n\t}\n\n\t// Implement show/hide animations\n\tpropTween = false;\n\tfor ( prop in orig ) {\n\n\t\t// General show/hide setup for this element animation\n\t\tif ( !propTween ) {\n\t\t\tif ( dataShow ) {\n\t\t\t\tif ( \"hidden\" in dataShow ) {\n\t\t\t\t\thidden = dataShow.hidden;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdataShow = dataPriv.access( elem, \"fxshow\", { display: restoreDisplay } );\n\t\t\t}\n\n\t\t\t// Store hidden/visible for toggle so `.stop().toggle()` \"reverses\"\n\t\t\tif ( toggle ) {\n\t\t\t\tdataShow.hidden = !hidden;\n\t\t\t}\n\n\t\t\t// Show elements before animating them\n\t\t\tif ( hidden ) {\n\t\t\t\tshowHide( [ elem ], true );\n\t\t\t}\n\n\t\t\t/* eslint-disable no-loop-func */\n\n\t\t\tanim.done( function() {\n\n\t\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\t// The final step of a \"hide\" animation is actually hiding the element\n\t\t\t\tif ( !hidden ) {\n\t\t\t\t\tshowHide( [ elem ] );\n\t\t\t\t}\n\t\t\t\tdataPriv.remove( elem, \"fxshow\" );\n\t\t\t\tfor ( prop in orig ) {\n\t\t\t\t\tjQuery.style( elem, prop, orig[ prop ] );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\t// Per-property setup\n\t\tpropTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );\n\t\tif ( !( prop in dataShow ) ) {\n\t\t\tdataShow[ prop ] = propTween.start;\n\t\t\tif ( hidden ) {\n\t\t\t\tpropTween.end = propTween.start;\n\t\t\t\tpropTween.start = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction propFilter( props, specialEasing ) {\n\tvar index, name, easing, value, hooks;\n\n\t// camelCase, specialEasing and expand cssHook pass\n\tfor ( index in props ) {\n\t\tname = camelCase( index );\n\t\teasing = specialEasing[ name ];\n\t\tvalue = props[ index ];\n\t\tif ( Array.isArray( value ) ) {\n\t\t\teasing = value[ 1 ];\n\t\t\tvalue = props[ index ] = value[ 0 ];\n\t\t}\n\n\t\tif ( index !== name ) {\n\t\t\tprops[ name ] = value;\n\t\t\tdelete props[ index ];\n\t\t}\n\n\t\thooks = jQuery.cssHooks[ name ];\n\t\tif ( hooks && \"expand\" in hooks ) {\n\t\t\tvalue = hooks.expand( value );\n\t\t\tdelete props[ name ];\n\n\t\t\t// Not quite $.extend, this won't overwrite existing keys.\n\t\t\t// Reusing 'index' because we have the correct \"name\"\n\t\t\tfor ( index in value ) {\n\t\t\t\tif ( !( index in props ) ) {\n\t\t\t\t\tprops[ index ] = value[ index ];\n\t\t\t\t\tspecialEasing[ index ] = easing;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tspecialEasing[ name ] = easing;\n\t\t}\n\t}\n}\n\nfunction Animation( elem, properties, options ) {\n\tvar result,\n\t\tstopped,\n\t\tindex = 0,\n\t\tlength = Animation.prefilters.length,\n\t\tdeferred = jQuery.Deferred().always( function() {\n\n\t\t\t// Don't match elem in the :animated selector\n\t\t\tdelete tick.elem;\n\t\t} ),\n\t\ttick = function() {\n\t\t\tif ( stopped ) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tvar currentTime = fxNow || createFxNow(),\n\t\t\t\tremaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),\n\n\t\t\t\t// Support: Android 2.3 only\n\t\t\t\t// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)\n\t\t\t\ttemp = remaining / animation.duration || 0,\n\t\t\t\tpercent = 1 - temp,\n\t\t\t\tindex = 0,\n\t\t\t\tlength = animation.tweens.length;\n\n\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\tanimation.tweens[ index ].run( percent );\n\t\t\t}\n\n\t\t\tdeferred.notifyWith( elem, [ animation, percent, remaining ] );\n\n\t\t\t// If there's more to do, yield\n\t\t\tif ( percent < 1 && length ) {\n\t\t\t\treturn remaining;\n\t\t\t}\n\n\t\t\t// If this was an empty animation, synthesize a final progress notification\n\t\t\tif ( !length ) {\n\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t}\n\n\t\t\t// Resolve the animation and report its conclusion\n\t\t\tdeferred.resolveWith( elem, [ animation ] );\n\t\t\treturn false;\n\t\t},\n\t\tanimation = deferred.promise( {\n\t\t\telem: elem,\n\t\t\tprops: jQuery.extend( {}, properties ),\n\t\t\topts: jQuery.extend( true, {\n\t\t\t\tspecialEasing: {},\n\t\t\t\teasing: jQuery.easing._default\n\t\t\t}, options ),\n\t\t\toriginalProperties: properties,\n\t\t\toriginalOptions: options,\n\t\t\tstartTime: fxNow || createFxNow(),\n\t\t\tduration: options.duration,\n\t\t\ttweens: [],\n\t\t\tcreateTween: function( prop, end ) {\n\t\t\t\tvar tween = jQuery.Tween( elem, animation.opts, prop, end,\n\t\t\t\t\tanimation.opts.specialEasing[ prop ] || animation.opts.easing );\n\t\t\t\tanimation.tweens.push( tween );\n\t\t\t\treturn tween;\n\t\t\t},\n\t\t\tstop: function( gotoEnd ) {\n\t\t\t\tvar index = 0,\n\n\t\t\t\t\t// If we are going to the end, we want to run all the tweens\n\t\t\t\t\t// otherwise we skip this part\n\t\t\t\t\tlength = gotoEnd ? animation.tweens.length : 0;\n\t\t\t\tif ( stopped ) {\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t\tstopped = true;\n\t\t\t\tfor ( ; index < length; index++ ) {\n\t\t\t\t\tanimation.tweens[ index ].run( 1 );\n\t\t\t\t}\n\n\t\t\t\t// Resolve when we played the last frame; otherwise, reject\n\t\t\t\tif ( gotoEnd ) {\n\t\t\t\t\tdeferred.notifyWith( elem, [ animation, 1, 0 ] );\n\t\t\t\t\tdeferred.resolveWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t} else {\n\t\t\t\t\tdeferred.rejectWith( elem, [ animation, gotoEnd ] );\n\t\t\t\t}\n\t\t\t\treturn this;\n\t\t\t}\n\t\t} ),\n\t\tprops = animation.props;\n\n\tpropFilter( props, animation.opts.specialEasing );\n\n\tfor ( ; index < length; index++ ) {\n\t\tresult = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );\n\t\tif ( result ) {\n\t\t\tif ( isFunction( result.stop ) ) {\n\t\t\t\tjQuery._queueHooks( animation.elem, animation.opts.queue ).stop =\n\t\t\t\t\tresult.stop.bind( result );\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t}\n\n\tjQuery.map( props, createTween, animation );\n\n\tif ( isFunction( animation.opts.start ) ) {\n\t\tanimation.opts.start.call( elem, animation );\n\t}\n\n\t// Attach callbacks from options\n\tanimation\n\t\t.progress( animation.opts.progress )\n\t\t.done( animation.opts.done, animation.opts.complete )\n\t\t.fail( animation.opts.fail )\n\t\t.always( animation.opts.always );\n\n\tjQuery.fx.timer(\n\t\tjQuery.extend( tick, {\n\t\t\telem: elem,\n\t\t\tanim: animation,\n\t\t\tqueue: animation.opts.queue\n\t\t} )\n\t);\n\n\treturn animation;\n}\n\njQuery.Animation = jQuery.extend( Animation, {\n\n\ttweeners: {\n\t\t\"*\": [ function( prop, value ) {\n\t\t\tvar tween = this.createTween( prop, value );\n\t\t\tadjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );\n\t\t\treturn tween;\n\t\t} ]\n\t},\n\n\ttweener: function( props, callback ) {\n\t\tif ( isFunction( props ) ) {\n\t\t\tcallback = props;\n\t\t\tprops = [ \"*\" ];\n\t\t} else {\n\t\t\tprops = props.match( rnothtmlwhite );\n\t\t}\n\n\t\tvar prop,\n\t\t\tindex = 0,\n\t\t\tlength = props.length;\n\n\t\tfor ( ; index < length; index++ ) {\n\t\t\tprop = props[ index ];\n\t\t\tAnimation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];\n\t\t\tAnimation.tweeners[ prop ].unshift( callback );\n\t\t}\n\t},\n\n\tprefilters: [ defaultPrefilter ],\n\n\tprefilter: function( callback, prepend ) {\n\t\tif ( prepend ) {\n\t\t\tAnimation.prefilters.unshift( callback );\n\t\t} else {\n\t\t\tAnimation.prefilters.push( callback );\n\t\t}\n\t}\n} );\n\njQuery.speed = function( speed, easing, fn ) {\n\tvar opt = speed && typeof speed === \"object\" ? jQuery.extend( {}, speed ) : {\n\t\tcomplete: fn || !fn && easing ||\n\t\t\tisFunction( speed ) && speed,\n\t\tduration: speed,\n\t\teasing: fn && easing || easing && !isFunction( easing ) && easing\n\t};\n\n\t// Go to the end state if fx are off\n\tif ( jQuery.fx.off ) {\n\t\topt.duration = 0;\n\n\t} else {\n\t\tif ( typeof opt.duration !== \"number\" ) {\n\t\t\tif ( opt.duration in jQuery.fx.speeds ) {\n\t\t\t\topt.duration = jQuery.fx.speeds[ opt.duration ];\n\n\t\t\t} else {\n\t\t\t\topt.duration = jQuery.fx.speeds._default;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Normalize opt.queue - true/undefined/null -> \"fx\"\n\tif ( opt.queue == null || opt.queue === true ) {\n\t\topt.queue = \"fx\";\n\t}\n\n\t// Queueing\n\topt.old = opt.complete;\n\n\topt.complete = function() {\n\t\tif ( isFunction( opt.old ) ) {\n\t\t\topt.old.call( this );\n\t\t}\n\n\t\tif ( opt.queue ) {\n\t\t\tjQuery.dequeue( this, opt.queue );\n\t\t}\n\t};\n\n\treturn opt;\n};\n\njQuery.fn.extend( {\n\tfadeTo: function( speed, to, easing, callback ) {\n\n\t\t// Show any hidden elements after setting opacity to 0\n\t\treturn this.filter( isHiddenWithinTree ).css( \"opacity\", 0 ).show()\n\n\t\t\t// Animate to the value specified\n\t\t\t.end().animate( { opacity: to }, speed, easing, callback );\n\t},\n\tanimate: function( prop, speed, easing, callback ) {\n\t\tvar empty = jQuery.isEmptyObject( prop ),\n\t\t\toptall = jQuery.speed( speed, easing, callback ),\n\t\t\tdoAnimation = function() {\n\n\t\t\t\t// Operate on a copy of prop so per-property easing won't be lost\n\t\t\t\tvar anim = Animation( this, jQuery.extend( {}, prop ), optall );\n\n\t\t\t\t// Empty animations, or finishing resolves immediately\n\t\t\t\tif ( empty || dataPriv.get( this, \"finish\" ) ) {\n\t\t\t\t\tanim.stop( true );\n\t\t\t\t}\n\t\t\t};\n\n\t\tdoAnimation.finish = doAnimation;\n\n\t\treturn empty || optall.queue === false ?\n\t\t\tthis.each( doAnimation ) :\n\t\t\tthis.queue( optall.queue, doAnimation );\n\t},\n\tstop: function( type, clearQueue, gotoEnd ) {\n\t\tvar stopQueue = function( hooks ) {\n\t\t\tvar stop = hooks.stop;\n\t\t\tdelete hooks.stop;\n\t\t\tstop( gotoEnd );\n\t\t};\n\n\t\tif ( typeof type !== \"string\" ) {\n\t\t\tgotoEnd = clearQueue;\n\t\t\tclearQueue = type;\n\t\t\ttype = undefined;\n\t\t}\n\t\tif ( clearQueue ) {\n\t\t\tthis.queue( type || \"fx\", [] );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar dequeue = true,\n\t\t\t\tindex = type != null && type + \"queueHooks\",\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tdata = dataPriv.get( this );\n\n\t\t\tif ( index ) {\n\t\t\t\tif ( data[ index ] && data[ index ].stop ) {\n\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor ( index in data ) {\n\t\t\t\t\tif ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {\n\t\t\t\t\t\tstopQueue( data[ index ] );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this &&\n\t\t\t\t\t( type == null || timers[ index ].queue === type ) ) {\n\n\t\t\t\t\ttimers[ index ].anim.stop( gotoEnd );\n\t\t\t\t\tdequeue = false;\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Start the next in the queue if the last step wasn't forced.\n\t\t\t// Timers currently will call their complete callbacks, which\n\t\t\t// will dequeue but only if they were gotoEnd.\n\t\t\tif ( dequeue || !gotoEnd ) {\n\t\t\t\tjQuery.dequeue( this, type );\n\t\t\t}\n\t\t} );\n\t},\n\tfinish: function( type ) {\n\t\tif ( type !== false ) {\n\t\t\ttype = type || \"fx\";\n\t\t}\n\t\treturn this.each( function() {\n\t\t\tvar index,\n\t\t\t\tdata = dataPriv.get( this ),\n\t\t\t\tqueue = data[ type + \"queue\" ],\n\t\t\t\thooks = data[ type + \"queueHooks\" ],\n\t\t\t\ttimers = jQuery.timers,\n\t\t\t\tlength = queue ? queue.length : 0;\n\n\t\t\t// Enable finishing flag on private data\n\t\t\tdata.finish = true;\n\n\t\t\t// Empty the queue first\n\t\t\tjQuery.queue( this, type, [] );\n\n\t\t\tif ( hooks && hooks.stop ) {\n\t\t\t\thooks.stop.call( this, true );\n\t\t\t}\n\n\t\t\t// Look for any active animations, and finish them\n\t\t\tfor ( index = timers.length; index--; ) {\n\t\t\t\tif ( timers[ index ].elem === this && timers[ index ].queue === type ) {\n\t\t\t\t\ttimers[ index ].anim.stop( true );\n\t\t\t\t\ttimers.splice( index, 1 );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Look for any animations in the old queue and finish them\n\t\t\tfor ( index = 0; index < length; index++ ) {\n\t\t\t\tif ( queue[ index ] && queue[ index ].finish ) {\n\t\t\t\t\tqueue[ index ].finish.call( this );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Turn off finishing flag\n\t\t\tdelete data.finish;\n\t\t} );\n\t}\n} );\n\njQuery.each( [ \"toggle\", \"show\", \"hide\" ], function( _i, name ) {\n\tvar cssFn = jQuery.fn[ name ];\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn speed == null || typeof speed === \"boolean\" ?\n\t\t\tcssFn.apply( this, arguments ) :\n\t\t\tthis.animate( genFx( name, true ), speed, easing, callback );\n\t};\n} );\n\n// Generate shortcuts for custom animations\njQuery.each( {\n\tslideDown: genFx( \"show\" ),\n\tslideUp: genFx( \"hide\" ),\n\tslideToggle: genFx( \"toggle\" ),\n\tfadeIn: { opacity: \"show\" },\n\tfadeOut: { opacity: \"hide\" },\n\tfadeToggle: { opacity: \"toggle\" }\n}, function( name, props ) {\n\tjQuery.fn[ name ] = function( speed, easing, callback ) {\n\t\treturn this.animate( props, speed, easing, callback );\n\t};\n} );\n\njQuery.timers = [];\njQuery.fx.tick = function() {\n\tvar timer,\n\t\ti = 0,\n\t\ttimers = jQuery.timers;\n\n\tfxNow = Date.now();\n\n\tfor ( ; i < timers.length; i++ ) {\n\t\ttimer = timers[ i ];\n\n\t\t// Run the timer and safely remove it when done (allowing for external removal)\n\t\tif ( !timer() && timers[ i ] === timer ) {\n\t\t\ttimers.splice( i--, 1 );\n\t\t}\n\t}\n\n\tif ( !timers.length ) {\n\t\tjQuery.fx.stop();\n\t}\n\tfxNow = undefined;\n};\n\njQuery.fx.timer = function( timer ) {\n\tjQuery.timers.push( timer );\n\tjQuery.fx.start();\n};\n\njQuery.fx.interval = 13;\njQuery.fx.start = function() {\n\tif ( inProgress ) {\n\t\treturn;\n\t}\n\n\tinProgress = true;\n\tschedule();\n};\n\njQuery.fx.stop = function() {\n\tinProgress = null;\n};\n\njQuery.fx.speeds = {\n\tslow: 600,\n\tfast: 200,\n\n\t// Default speed\n\t_default: 400\n};\n\n\n// Based off of the plugin by Clint Helfers, with permission.\n// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/\njQuery.fn.delay = function( time, type ) {\n\ttime = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;\n\ttype = type || \"fx\";\n\n\treturn this.queue( type, function( next, hooks ) {\n\t\tvar timeout = window.setTimeout( next, time );\n\t\thooks.stop = function() {\n\t\t\twindow.clearTimeout( timeout );\n\t\t};\n\t} );\n};\n\n\n( function() {\n\tvar input = document.createElement( \"input\" ),\n\t\tselect = document.createElement( \"select\" ),\n\t\topt = select.appendChild( document.createElement( \"option\" ) );\n\n\tinput.type = \"checkbox\";\n\n\t// Support: Android <=4.3 only\n\t// Default value for a checkbox should be \"on\"\n\tsupport.checkOn = input.value !== \"\";\n\n\t// Support: IE <=11 only\n\t// Must access selectedIndex to make default options select\n\tsupport.optSelected = opt.selected;\n\n\t// Support: IE <=11 only\n\t// An input loses its value after becoming a radio\n\tinput = document.createElement( \"input\" );\n\tinput.value = \"t\";\n\tinput.type = \"radio\";\n\tsupport.radioValue = input.value === \"t\";\n} )();\n\n\nvar boolHook,\n\tattrHandle = jQuery.expr.attrHandle;\n\njQuery.fn.extend( {\n\tattr: function( name, value ) {\n\t\treturn access( this, jQuery.attr, name, value, arguments.length > 1 );\n\t},\n\n\tremoveAttr: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.removeAttr( this, name );\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tattr: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set attributes on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Fallback to prop when attributes are not supported\n\t\tif ( typeof elem.getAttribute === \"undefined\" ) {\n\t\t\treturn jQuery.prop( elem, name, value );\n\t\t}\n\n\t\t// Attribute hooks are determined by the lowercase version\n\t\t// Grab necessary hook if one is defined\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\t\t\thooks = jQuery.attrHooks[ name.toLowerCase() ] ||\n\t\t\t\t( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( value === null ) {\n\t\t\t\tjQuery.removeAttr( elem, name );\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\telem.setAttribute( name, value + \"\" );\n\t\t\treturn value;\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tret = jQuery.find.attr( elem, name );\n\n\t\t// Non-existent attributes return null, we normalize to undefined\n\t\treturn ret == null ? undefined : ret;\n\t},\n\n\tattrHooks: {\n\t\ttype: {\n\t\t\tset: function( elem, value ) {\n\t\t\t\tif ( !support.radioValue && value === \"radio\" &&\n\t\t\t\t\tnodeName( elem, \"input\" ) ) {\n\t\t\t\t\tvar val = elem.value;\n\t\t\t\t\telem.setAttribute( \"type\", value );\n\t\t\t\t\tif ( val ) {\n\t\t\t\t\t\telem.value = val;\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremoveAttr: function( elem, value ) {\n\t\tvar name,\n\t\t\ti = 0,\n\n\t\t\t// Attribute names can contain non-HTML whitespace characters\n\t\t\t// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n\t\t\tattrNames = value && value.match( rnothtmlwhite );\n\n\t\tif ( attrNames && elem.nodeType === 1 ) {\n\t\t\twhile ( ( name = attrNames[ i++ ] ) ) {\n\t\t\t\telem.removeAttribute( name );\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Hooks for boolean attributes\nboolHook = {\n\tset: function( elem, value, name ) {\n\t\tif ( value === false ) {\n\n\t\t\t// Remove boolean attributes when set to false\n\t\t\tjQuery.removeAttr( elem, name );\n\t\t} else {\n\t\t\telem.setAttribute( name, name );\n\t\t}\n\t\treturn name;\n\t}\n};\n\njQuery.each( jQuery.expr.match.bool.source.match( /\\w+/g ), function( _i, name ) {\n\tvar getter = attrHandle[ name ] || jQuery.find.attr;\n\n\tattrHandle[ name ] = function( elem, name, isXML ) {\n\t\tvar ret, handle,\n\t\t\tlowercaseName = name.toLowerCase();\n\n\t\tif ( !isXML ) {\n\n\t\t\t// Avoid an infinite loop by temporarily removing this function from the getter\n\t\t\thandle = attrHandle[ lowercaseName ];\n\t\t\tattrHandle[ lowercaseName ] = ret;\n\t\t\tret = getter( elem, name, isXML ) != null ?\n\t\t\t\tlowercaseName :\n\t\t\t\tnull;\n\t\t\tattrHandle[ lowercaseName ] = handle;\n\t\t}\n\t\treturn ret;\n\t};\n} );\n\n\n\n\nvar rfocusable = /^(?:input|select|textarea|button)$/i,\n\trclickable = /^(?:a|area)$/i;\n\njQuery.fn.extend( {\n\tprop: function( name, value ) {\n\t\treturn access( this, jQuery.prop, name, value, arguments.length > 1 );\n\t},\n\n\tremoveProp: function( name ) {\n\t\treturn this.each( function() {\n\t\t\tdelete this[ jQuery.propFix[ name ] || name ];\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tprop: function( elem, name, value ) {\n\t\tvar ret, hooks,\n\t\t\tnType = elem.nodeType;\n\n\t\t// Don't get/set properties on text, comment and attribute nodes\n\t\tif ( nType === 3 || nType === 8 || nType === 2 ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {\n\n\t\t\t// Fix name and attach hooks\n\t\t\tname = jQuery.propFix[ name ] || name;\n\t\t\thooks = jQuery.propHooks[ name ];\n\t\t}\n\n\t\tif ( value !== undefined ) {\n\t\t\tif ( hooks && \"set\" in hooks &&\n\t\t\t\t( ret = hooks.set( elem, value, name ) ) !== undefined ) {\n\t\t\t\treturn ret;\n\t\t\t}\n\n\t\t\treturn ( elem[ name ] = value );\n\t\t}\n\n\t\tif ( hooks && \"get\" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {\n\t\t\treturn ret;\n\t\t}\n\n\t\treturn elem[ name ];\n\t},\n\n\tpropHooks: {\n\t\ttabIndex: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\t// Support: IE <=9 - 11 only\n\t\t\t\t// elem.tabIndex doesn't always return the\n\t\t\t\t// correct value when it hasn't been explicitly set\n\t\t\t\t// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/\n\t\t\t\t// Use proper attribute retrieval(#12072)\n\t\t\t\tvar tabindex = jQuery.find.attr( elem, \"tabindex\" );\n\n\t\t\t\tif ( tabindex ) {\n\t\t\t\t\treturn parseInt( tabindex, 10 );\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\trfocusable.test( elem.nodeName ) ||\n\t\t\t\t\trclickable.test( elem.nodeName ) &&\n\t\t\t\t\telem.href\n\t\t\t\t) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropFix: {\n\t\t\"for\": \"htmlFor\",\n\t\t\"class\": \"className\"\n\t}\n} );\n\n// Support: IE <=11 only\n// Accessing the selectedIndex property\n// forces the browser to respect setting selected\n// on the option\n// The getter ensures a default option is selected\n// when in an optgroup\n// eslint rule \"no-unused-expressions\" is disabled for this code\n// since it considers such accessions noop\nif ( !support.optSelected ) {\n\tjQuery.propHooks.selected = {\n\t\tget: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent && parent.parentNode ) {\n\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t}\n\t\t\treturn null;\n\t\t},\n\t\tset: function( elem ) {\n\n\t\t\t/* eslint no-unused-expressions: \"off\" */\n\n\t\t\tvar parent = elem.parentNode;\n\t\t\tif ( parent ) {\n\t\t\t\tparent.selectedIndex;\n\n\t\t\t\tif ( parent.parentNode ) {\n\t\t\t\t\tparent.parentNode.selectedIndex;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\njQuery.each( [\n\t\"tabIndex\",\n\t\"readOnly\",\n\t\"maxLength\",\n\t\"cellSpacing\",\n\t\"cellPadding\",\n\t\"rowSpan\",\n\t\"colSpan\",\n\t\"useMap\",\n\t\"frameBorder\",\n\t\"contentEditable\"\n], function() {\n\tjQuery.propFix[ this.toLowerCase() ] = this;\n} );\n\n\n\n\n\t// Strip and collapse whitespace according to HTML spec\n\t// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace\n\tfunction stripAndCollapse( value ) {\n\t\tvar tokens = value.match( rnothtmlwhite ) || [];\n\t\treturn tokens.join( \" \" );\n\t}\n\n\nfunction getClass( elem ) {\n\treturn elem.getAttribute && elem.getAttribute( \"class\" ) || \"\";\n}\n\nfunction classesToArray( value ) {\n\tif ( Array.isArray( value ) ) {\n\t\treturn value;\n\t}\n\tif ( typeof value === \"string\" ) {\n\t\treturn value.match( rnothtmlwhite ) || [];\n\t}\n\treturn [];\n}\n\njQuery.fn.extend( {\n\taddClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).addClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tclasses = classesToArray( value );\n\n\t\tif ( classes.length ) {\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\t\t\t\t\t\tif ( cur.indexOf( \" \" + clazz + \" \" ) < 0 ) {\n\t\t\t\t\t\t\tcur += clazz + \" \";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveClass: function( value ) {\n\t\tvar classes, elem, cur, curValue, clazz, j, finalValue,\n\t\t\ti = 0;\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( j ) {\n\t\t\t\tjQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( !arguments.length ) {\n\t\t\treturn this.attr( \"class\", \"\" );\n\t\t}\n\n\t\tclasses = classesToArray( value );\n\n\t\tif ( classes.length ) {\n\t\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\t\tcurValue = getClass( elem );\n\n\t\t\t\t// This expression is here for better compressibility (see addClass)\n\t\t\t\tcur = elem.nodeType === 1 && ( \" \" + stripAndCollapse( curValue ) + \" \" );\n\n\t\t\t\tif ( cur ) {\n\t\t\t\t\tj = 0;\n\t\t\t\t\twhile ( ( clazz = classes[ j++ ] ) ) {\n\n\t\t\t\t\t\t// Remove *all* instances\n\t\t\t\t\t\twhile ( cur.indexOf( \" \" + clazz + \" \" ) > -1 ) {\n\t\t\t\t\t\t\tcur = cur.replace( \" \" + clazz + \" \", \" \" );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Only assign if different to avoid unneeded rendering.\n\t\t\t\t\tfinalValue = stripAndCollapse( cur );\n\t\t\t\t\tif ( curValue !== finalValue ) {\n\t\t\t\t\t\telem.setAttribute( \"class\", finalValue );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\ttoggleClass: function( value, stateVal ) {\n\t\tvar type = typeof value,\n\t\t\tisValidValue = type === \"string\" || Array.isArray( value );\n\n\t\tif ( typeof stateVal === \"boolean\" && isValidValue ) {\n\t\t\treturn stateVal ? this.addClass( value ) : this.removeClass( value );\n\t\t}\n\n\t\tif ( isFunction( value ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).toggleClass(\n\t\t\t\t\tvalue.call( this, i, getClass( this ), stateVal ),\n\t\t\t\t\tstateVal\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar className, i, self, classNames;\n\n\t\t\tif ( isValidValue ) {\n\n\t\t\t\t// Toggle individual class names\n\t\t\t\ti = 0;\n\t\t\t\tself = jQuery( this );\n\t\t\t\tclassNames = classesToArray( value );\n\n\t\t\t\twhile ( ( className = classNames[ i++ ] ) ) {\n\n\t\t\t\t\t// Check each className given, space separated list\n\t\t\t\t\tif ( self.hasClass( className ) ) {\n\t\t\t\t\t\tself.removeClass( className );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.addClass( className );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Toggle whole class name\n\t\t\t} else if ( value === undefined || type === \"boolean\" ) {\n\t\t\t\tclassName = getClass( this );\n\t\t\t\tif ( className ) {\n\n\t\t\t\t\t// Store className if set\n\t\t\t\t\tdataPriv.set( this, \"__className__\", className );\n\t\t\t\t}\n\n\t\t\t\t// If the element has a class name or if we're passed `false`,\n\t\t\t\t// then remove the whole classname (if there was one, the above saved it).\n\t\t\t\t// Otherwise bring back whatever was previously saved (if anything),\n\t\t\t\t// falling back to the empty string if nothing was stored.\n\t\t\t\tif ( this.setAttribute ) {\n\t\t\t\t\tthis.setAttribute( \"class\",\n\t\t\t\t\t\tclassName || value === false ?\n\t\t\t\t\t\t\t\"\" :\n\t\t\t\t\t\t\tdataPriv.get( this, \"__className__\" ) || \"\"\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t},\n\n\thasClass: function( selector ) {\n\t\tvar className, elem,\n\t\t\ti = 0;\n\n\t\tclassName = \" \" + selector + \" \";\n\t\twhile ( ( elem = this[ i++ ] ) ) {\n\t\t\tif ( elem.nodeType === 1 &&\n\t\t\t\t( \" \" + stripAndCollapse( getClass( elem ) ) + \" \" ).indexOf( className ) > -1 ) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n} );\n\n\n\n\nvar rreturn = /\\r/g;\n\njQuery.fn.extend( {\n\tval: function( value ) {\n\t\tvar hooks, ret, valueIsFunction,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !arguments.length ) {\n\t\t\tif ( elem ) {\n\t\t\t\thooks = jQuery.valHooks[ elem.type ] ||\n\t\t\t\t\tjQuery.valHooks[ elem.nodeName.toLowerCase() ];\n\n\t\t\t\tif ( hooks &&\n\t\t\t\t\t\"get\" in hooks &&\n\t\t\t\t\t( ret = hooks.get( elem, \"value\" ) ) !== undefined\n\t\t\t\t) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\n\t\t\t\tret = elem.value;\n\n\t\t\t\t// Handle most common string cases\n\t\t\t\tif ( typeof ret === \"string\" ) {\n\t\t\t\t\treturn ret.replace( rreturn, \"\" );\n\t\t\t\t}\n\n\t\t\t\t// Handle cases where value is null/undef or number\n\t\t\t\treturn ret == null ? \"\" : ret;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tvalueIsFunction = isFunction( value );\n\n\t\treturn this.each( function( i ) {\n\t\t\tvar val;\n\n\t\t\tif ( this.nodeType !== 1 ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( valueIsFunction ) {\n\t\t\t\tval = value.call( this, i, jQuery( this ).val() );\n\t\t\t} else {\n\t\t\t\tval = value;\n\t\t\t}\n\n\t\t\t// Treat null/undefined as \"\"; convert numbers to string\n\t\t\tif ( val == null ) {\n\t\t\t\tval = \"\";\n\n\t\t\t} else if ( typeof val === \"number\" ) {\n\t\t\t\tval += \"\";\n\n\t\t\t} else if ( Array.isArray( val ) ) {\n\t\t\t\tval = jQuery.map( val, function( value ) {\n\t\t\t\t\treturn value == null ? \"\" : value + \"\";\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\thooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];\n\n\t\t\t// If set returns undefined, fall back to normal setting\n\t\t\tif ( !hooks || !( \"set\" in hooks ) || hooks.set( this, val, \"value\" ) === undefined ) {\n\t\t\t\tthis.value = val;\n\t\t\t}\n\t\t} );\n\t}\n} );\n\njQuery.extend( {\n\tvalHooks: {\n\t\toption: {\n\t\t\tget: function( elem ) {\n\n\t\t\t\tvar val = jQuery.find.attr( elem, \"value\" );\n\t\t\t\treturn val != null ?\n\t\t\t\t\tval :\n\n\t\t\t\t\t// Support: IE <=10 - 11 only\n\t\t\t\t\t// option.text throws exceptions (#14686, #14858)\n\t\t\t\t\t// Strip and collapse whitespace\n\t\t\t\t\t// https://html.spec.whatwg.org/#strip-and-collapse-whitespace\n\t\t\t\t\tstripAndCollapse( jQuery.text( elem ) );\n\t\t\t}\n\t\t},\n\t\tselect: {\n\t\t\tget: function( elem ) {\n\t\t\t\tvar value, option, i,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tindex = elem.selectedIndex,\n\t\t\t\t\tone = elem.type === \"select-one\",\n\t\t\t\t\tvalues = one ? null : [],\n\t\t\t\t\tmax = one ? index + 1 : options.length;\n\n\t\t\t\tif ( index < 0 ) {\n\t\t\t\t\ti = max;\n\n\t\t\t\t} else {\n\t\t\t\t\ti = one ? index : 0;\n\t\t\t\t}\n\n\t\t\t\t// Loop through all the selected options\n\t\t\t\tfor ( ; i < max; i++ ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t// IE8-9 doesn't update selected after form reset (#2551)\n\t\t\t\t\tif ( ( option.selected || i === index ) &&\n\n\t\t\t\t\t\t\t// Don't return options that are disabled or in a disabled optgroup\n\t\t\t\t\t\t\t!option.disabled &&\n\t\t\t\t\t\t\t( !option.parentNode.disabled ||\n\t\t\t\t\t\t\t\t!nodeName( option.parentNode, \"optgroup\" ) ) ) {\n\n\t\t\t\t\t\t// Get the specific value for the option\n\t\t\t\t\t\tvalue = jQuery( option ).val();\n\n\t\t\t\t\t\t// We don't need an array for one selects\n\t\t\t\t\t\tif ( one ) {\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi-Selects return an array\n\t\t\t\t\t\tvalues.push( value );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t},\n\n\t\t\tset: function( elem, value ) {\n\t\t\t\tvar optionSet, option,\n\t\t\t\t\toptions = elem.options,\n\t\t\t\t\tvalues = jQuery.makeArray( value ),\n\t\t\t\t\ti = options.length;\n\n\t\t\t\twhile ( i-- ) {\n\t\t\t\t\toption = options[ i ];\n\n\t\t\t\t\t/* eslint-disable no-cond-assign */\n\n\t\t\t\t\tif ( option.selected =\n\t\t\t\t\t\tjQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1\n\t\t\t\t\t) {\n\t\t\t\t\t\toptionSet = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t/* eslint-enable no-cond-assign */\n\t\t\t\t}\n\n\t\t\t\t// Force browsers to behave consistently when non-matching value is set\n\t\t\t\tif ( !optionSet ) {\n\t\t\t\t\telem.selectedIndex = -1;\n\t\t\t\t}\n\t\t\t\treturn values;\n\t\t\t}\n\t\t}\n\t}\n} );\n\n// Radios and checkboxes getter/setter\njQuery.each( [ \"radio\", \"checkbox\" ], function() {\n\tjQuery.valHooks[ this ] = {\n\t\tset: function( elem, value ) {\n\t\t\tif ( Array.isArray( value ) ) {\n\t\t\t\treturn ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );\n\t\t\t}\n\t\t}\n\t};\n\tif ( !support.checkOn ) {\n\t\tjQuery.valHooks[ this ].get = function( elem ) {\n\t\t\treturn elem.getAttribute( \"value\" ) === null ? \"on\" : elem.value;\n\t\t};\n\t}\n} );\n\n\n\n\n// Return jQuery for attributes-only inclusion\n\n\nsupport.focusin = \"onfocusin\" in window;\n\n\nvar rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,\n\tstopPropagationCallback = function( e ) {\n\t\te.stopPropagation();\n\t};\n\njQuery.extend( jQuery.event, {\n\n\ttrigger: function( event, data, elem, onlyHandlers ) {\n\n\t\tvar i, cur, tmp, bubbleType, ontype, handle, special, lastElement,\n\t\t\teventPath = [ elem || document ],\n\t\t\ttype = hasOwn.call( event, \"type\" ) ? event.type : event,\n\t\t\tnamespaces = hasOwn.call( event, \"namespace\" ) ? event.namespace.split( \".\" ) : [];\n\n\t\tcur = lastElement = tmp = elem = elem || document;\n\n\t\t// Don't do events on text and comment nodes\n\t\tif ( elem.nodeType === 3 || elem.nodeType === 8 ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// focus/blur morphs to focusin/out; ensure we're not firing them right now\n\t\tif ( rfocusMorph.test( type + jQuery.event.triggered ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tif ( type.indexOf( \".\" ) > -1 ) {\n\n\t\t\t// Namespaced trigger; create a regexp to match event type in handle()\n\t\t\tnamespaces = type.split( \".\" );\n\t\t\ttype = namespaces.shift();\n\t\t\tnamespaces.sort();\n\t\t}\n\t\tontype = type.indexOf( \":\" ) < 0 && \"on\" + type;\n\n\t\t// Caller can pass in a jQuery.Event object, Object, or just an event type string\n\t\tevent = event[ jQuery.expando ] ?\n\t\t\tevent :\n\t\t\tnew jQuery.Event( type, typeof event === \"object\" && event );\n\n\t\t// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)\n\t\tevent.isTrigger = onlyHandlers ? 2 : 3;\n\t\tevent.namespace = namespaces.join( \".\" );\n\t\tevent.rnamespace = event.namespace ?\n\t\t\tnew RegExp( \"(^|\\\\.)\" + namespaces.join( \"\\\\.(?:.*\\\\.|)\" ) + \"(\\\\.|$)\" ) :\n\t\t\tnull;\n\n\t\t// Clean up the event in case it is being reused\n\t\tevent.result = undefined;\n\t\tif ( !event.target ) {\n\t\t\tevent.target = elem;\n\t\t}\n\n\t\t// Clone any incoming data and prepend the event, creating the handler arg list\n\t\tdata = data == null ?\n\t\t\t[ event ] :\n\t\t\tjQuery.makeArray( data, [ event ] );\n\n\t\t// Allow special events to draw outside the lines\n\t\tspecial = jQuery.event.special[ type ] || {};\n\t\tif ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Determine event propagation path in advance, per W3C events spec (#9951)\n\t\t// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)\n\t\tif ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {\n\n\t\t\tbubbleType = special.delegateType || type;\n\t\t\tif ( !rfocusMorph.test( bubbleType + type ) ) {\n\t\t\t\tcur = cur.parentNode;\n\t\t\t}\n\t\t\tfor ( ; cur; cur = cur.parentNode ) {\n\t\t\t\teventPath.push( cur );\n\t\t\t\ttmp = cur;\n\t\t\t}\n\n\t\t\t// Only add window if we got to document (e.g., not plain obj or detached DOM)\n\t\t\tif ( tmp === ( elem.ownerDocument || document ) ) {\n\t\t\t\teventPath.push( tmp.defaultView || tmp.parentWindow || window );\n\t\t\t}\n\t\t}\n\n\t\t// Fire handlers on the event path\n\t\ti = 0;\n\t\twhile ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {\n\t\t\tlastElement = cur;\n\t\t\tevent.type = i > 1 ?\n\t\t\t\tbubbleType :\n\t\t\t\tspecial.bindType || type;\n\n\t\t\t// jQuery handler\n\t\t\thandle = ( dataPriv.get( cur, \"events\" ) || Object.create( null ) )[ event.type ] &&\n\t\t\t\tdataPriv.get( cur, \"handle\" );\n\t\t\tif ( handle ) {\n\t\t\t\thandle.apply( cur, data );\n\t\t\t}\n\n\t\t\t// Native handler\n\t\t\thandle = ontype && cur[ ontype ];\n\t\t\tif ( handle && handle.apply && acceptData( cur ) ) {\n\t\t\t\tevent.result = handle.apply( cur, data );\n\t\t\t\tif ( event.result === false ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tevent.type = type;\n\n\t\t// If nobody prevented the default action, do it now\n\t\tif ( !onlyHandlers && !event.isDefaultPrevented() ) {\n\n\t\t\tif ( ( !special._default ||\n\t\t\t\tspecial._default.apply( eventPath.pop(), data ) === false ) &&\n\t\t\t\tacceptData( elem ) ) {\n\n\t\t\t\t// Call a native DOM method on the target with the same name as the event.\n\t\t\t\t// Don't do default actions on window, that's where global variables be (#6170)\n\t\t\t\tif ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {\n\n\t\t\t\t\t// Don't re-trigger an onFOO event when we call its FOO() method\n\t\t\t\t\ttmp = elem[ ontype ];\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = null;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Prevent re-triggering of the same event, since we already bubbled it above\n\t\t\t\t\tjQuery.event.triggered = type;\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.addEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\telem[ type ]();\n\n\t\t\t\t\tif ( event.isPropagationStopped() ) {\n\t\t\t\t\t\tlastElement.removeEventListener( type, stopPropagationCallback );\n\t\t\t\t\t}\n\n\t\t\t\t\tjQuery.event.triggered = undefined;\n\n\t\t\t\t\tif ( tmp ) {\n\t\t\t\t\t\telem[ ontype ] = tmp;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn event.result;\n\t},\n\n\t// Piggyback on a donor event to simulate a different one\n\t// Used only for `focus(in | out)` events\n\tsimulate: function( type, elem, event ) {\n\t\tvar e = jQuery.extend(\n\t\t\tnew jQuery.Event(),\n\t\t\tevent,\n\t\t\t{\n\t\t\t\ttype: type,\n\t\t\t\tisSimulated: true\n\t\t\t}\n\t\t);\n\n\t\tjQuery.event.trigger( e, null, elem );\n\t}\n\n} );\n\njQuery.fn.extend( {\n\n\ttrigger: function( type, data ) {\n\t\treturn this.each( function() {\n\t\t\tjQuery.event.trigger( type, data, this );\n\t\t} );\n\t},\n\ttriggerHandler: function( type, data ) {\n\t\tvar elem = this[ 0 ];\n\t\tif ( elem ) {\n\t\t\treturn jQuery.event.trigger( type, data, elem, true );\n\t\t}\n\t}\n} );\n\n\n// Support: Firefox <=44\n// Firefox doesn't have focus(in | out) events\n// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787\n//\n// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1\n// focus(in | out) events fire after focus & blur events,\n// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order\n// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857\nif ( !support.focusin ) {\n\tjQuery.each( { focus: \"focusin\", blur: \"focusout\" }, function( orig, fix ) {\n\n\t\t// Attach a single capturing handler on the document while someone wants focusin/focusout\n\t\tvar handler = function( event ) {\n\t\t\tjQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );\n\t\t};\n\n\t\tjQuery.event.special[ fix ] = {\n\t\t\tsetup: function() {\n\n\t\t\t\t// Handle: regular nodes (via `this.ownerDocument`), window\n\t\t\t\t// (via `this.document`) & document (via `this`).\n\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix );\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.addEventListener( orig, handler, true );\n\t\t\t\t}\n\t\t\t\tdataPriv.access( doc, fix, ( attaches || 0 ) + 1 );\n\t\t\t},\n\t\t\tteardown: function() {\n\t\t\t\tvar doc = this.ownerDocument || this.document || this,\n\t\t\t\t\tattaches = dataPriv.access( doc, fix ) - 1;\n\n\t\t\t\tif ( !attaches ) {\n\t\t\t\t\tdoc.removeEventListener( orig, handler, true );\n\t\t\t\t\tdataPriv.remove( doc, fix );\n\n\t\t\t\t} else {\n\t\t\t\t\tdataPriv.access( doc, fix, attaches );\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t} );\n}\nvar location = window.location;\n\nvar nonce = { guid: Date.now() };\n\nvar rquery = ( /\\?/ );\n\n\n\n// Cross-browser xml parsing\njQuery.parseXML = function( data ) {\n\tvar xml, parserErrorElem;\n\tif ( !data || typeof data !== \"string\" ) {\n\t\treturn null;\n\t}\n\n\t// Support: IE 9 - 11 only\n\t// IE throws on parseFromString with invalid input.\n\ttry {\n\t\txml = ( new window.DOMParser() ).parseFromString( data, \"text/xml\" );\n\t} catch ( e ) {}\n\n\tparserErrorElem = xml && xml.getElementsByTagName( \"parsererror\" )[ 0 ];\n\tif ( !xml || parserErrorElem ) {\n\t\tjQuery.error( \"Invalid XML: \" + (\n\t\t\tparserErrorElem ?\n\t\t\t\tjQuery.map( parserErrorElem.childNodes, function( el ) {\n\t\t\t\t\treturn el.textContent;\n\t\t\t\t} ).join( \"\\n\" ) :\n\t\t\t\tdata\n\t\t) );\n\t}\n\treturn xml;\n};\n\n\nvar\n\trbracket = /\\[\\]$/,\n\trCRLF = /\\r?\\n/g,\n\trsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,\n\trsubmittable = /^(?:input|select|textarea|keygen)/i;\n\nfunction buildParams( prefix, obj, traditional, add ) {\n\tvar name;\n\n\tif ( Array.isArray( obj ) ) {\n\n\t\t// Serialize array item.\n\t\tjQuery.each( obj, function( i, v ) {\n\t\t\tif ( traditional || rbracket.test( prefix ) ) {\n\n\t\t\t\t// Treat each array item as a scalar.\n\t\t\t\tadd( prefix, v );\n\n\t\t\t} else {\n\n\t\t\t\t// Item is non-scalar (array or object), encode its numeric index.\n\t\t\t\tbuildParams(\n\t\t\t\t\tprefix + \"[\" + ( typeof v === \"object\" && v != null ? i : \"\" ) + \"]\",\n\t\t\t\t\tv,\n\t\t\t\t\ttraditional,\n\t\t\t\t\tadd\n\t\t\t\t);\n\t\t\t}\n\t\t} );\n\n\t} else if ( !traditional && toType( obj ) === \"object\" ) {\n\n\t\t// Serialize object item.\n\t\tfor ( name in obj ) {\n\t\t\tbuildParams( prefix + \"[\" + name + \"]\", obj[ name ], traditional, add );\n\t\t}\n\n\t} else {\n\n\t\t// Serialize scalar item.\n\t\tadd( prefix, obj );\n\t}\n}\n\n// Serialize an array of form elements or a set of\n// key/values into a query string\njQuery.param = function( a, traditional ) {\n\tvar prefix,\n\t\ts = [],\n\t\tadd = function( key, valueOrFunction ) {\n\n\t\t\t// If value is a function, invoke it and use its return value\n\t\t\tvar value = isFunction( valueOrFunction ) ?\n\t\t\t\tvalueOrFunction() :\n\t\t\t\tvalueOrFunction;\n\n\t\t\ts[ s.length ] = encodeURIComponent( key ) + \"=\" +\n\t\t\t\tencodeURIComponent( value == null ? \"\" : value );\n\t\t};\n\n\tif ( a == null ) {\n\t\treturn \"\";\n\t}\n\n\t// If an array was passed in, assume that it is an array of form elements.\n\tif ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {\n\n\t\t// Serialize the form elements\n\t\tjQuery.each( a, function() {\n\t\t\tadd( this.name, this.value );\n\t\t} );\n\n\t} else {\n\n\t\t// If traditional, encode the \"old\" way (the way 1.3.2 or older\n\t\t// did it), otherwise encode params recursively.\n\t\tfor ( prefix in a ) {\n\t\t\tbuildParams( prefix, a[ prefix ], traditional, add );\n\t\t}\n\t}\n\n\t// Return the resulting serialization\n\treturn s.join( \"&\" );\n};\n\njQuery.fn.extend( {\n\tserialize: function() {\n\t\treturn jQuery.param( this.serializeArray() );\n\t},\n\tserializeArray: function() {\n\t\treturn this.map( function() {\n\n\t\t\t// Can add propHook for \"elements\" to filter or add form elements\n\t\t\tvar elements = jQuery.prop( this, \"elements\" );\n\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\n\t\t} ).filter( function() {\n\t\t\tvar type = this.type;\n\n\t\t\t// Use .is( \":disabled\" ) so that fieldset[disabled] works\n\t\t\treturn this.name && !jQuery( this ).is( \":disabled\" ) &&\n\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\n\t\t\t\t( this.checked || !rcheckableType.test( type ) );\n\t\t} ).map( function( _i, elem ) {\n\t\t\tvar val = jQuery( this ).val();\n\n\t\t\tif ( val == null ) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif ( Array.isArray( val ) ) {\n\t\t\t\treturn jQuery.map( val, function( val ) {\n\t\t\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\treturn { name: elem.name, value: val.replace( rCRLF, \"\\r\\n\" ) };\n\t\t} ).get();\n\t}\n} );\n\n\nvar\n\tr20 = /%20/g,\n\trhash = /#.*$/,\n\trantiCache = /([?&])_=[^&]*/,\n\trheaders = /^(.*?):[ \\t]*([^\\r\\n]*)$/mg,\n\n\t// #7653, #8125, #8152: local protocol detection\n\trlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,\n\trnoContent = /^(?:GET|HEAD)$/,\n\trprotocol = /^\\/\\//,\n\n\t/* Prefilters\n\t * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)\n\t * 2) These are called:\n\t *    - BEFORE asking for a transport\n\t *    - AFTER param serialization (s.data is a string if s.processData is true)\n\t * 3) key is the dataType\n\t * 4) the catchall symbol \"*\" can be used\n\t * 5) execution will start with transport dataType and THEN continue down to \"*\" if needed\n\t */\n\tprefilters = {},\n\n\t/* Transports bindings\n\t * 1) key is the dataType\n\t * 2) the catchall symbol \"*\" can be used\n\t * 3) selection will start with transport dataType and THEN go to \"*\" if needed\n\t */\n\ttransports = {},\n\n\t// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression\n\tallTypes = \"*/\".concat( \"*\" ),\n\n\t// Anchor tag for parsing the document origin\n\toriginAnchor = document.createElement( \"a\" );\n\noriginAnchor.href = location.href;\n\n// Base \"constructor\" for jQuery.ajaxPrefilter and jQuery.ajaxTransport\nfunction addToPrefiltersOrTransports( structure ) {\n\n\t// dataTypeExpression is optional and defaults to \"*\"\n\treturn function( dataTypeExpression, func ) {\n\n\t\tif ( typeof dataTypeExpression !== \"string\" ) {\n\t\t\tfunc = dataTypeExpression;\n\t\t\tdataTypeExpression = \"*\";\n\t\t}\n\n\t\tvar dataType,\n\t\t\ti = 0,\n\t\t\tdataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];\n\n\t\tif ( isFunction( func ) ) {\n\n\t\t\t// For each dataType in the dataTypeExpression\n\t\t\twhile ( ( dataType = dataTypes[ i++ ] ) ) {\n\n\t\t\t\t// Prepend if requested\n\t\t\t\tif ( dataType[ 0 ] === \"+\" ) {\n\t\t\t\t\tdataType = dataType.slice( 1 ) || \"*\";\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );\n\n\t\t\t\t// Otherwise append\n\t\t\t\t} else {\n\t\t\t\t\t( structure[ dataType ] = structure[ dataType ] || [] ).push( func );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\n// Base inspection function for prefilters and transports\nfunction inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {\n\n\tvar inspected = {},\n\t\tseekingTransport = ( structure === transports );\n\n\tfunction inspect( dataType ) {\n\t\tvar selected;\n\t\tinspected[ dataType ] = true;\n\t\tjQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {\n\t\t\tvar dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );\n\t\t\tif ( typeof dataTypeOrTransport === \"string\" &&\n\t\t\t\t!seekingTransport && !inspected[ dataTypeOrTransport ] ) {\n\n\t\t\t\toptions.dataTypes.unshift( dataTypeOrTransport );\n\t\t\t\tinspect( dataTypeOrTransport );\n\t\t\t\treturn false;\n\t\t\t} else if ( seekingTransport ) {\n\t\t\t\treturn !( selected = dataTypeOrTransport );\n\t\t\t}\n\t\t} );\n\t\treturn selected;\n\t}\n\n\treturn inspect( options.dataTypes[ 0 ] ) || !inspected[ \"*\" ] && inspect( \"*\" );\n}\n\n// A special extend for ajax options\n// that takes \"flat\" options (not to be deep extended)\n// Fixes #9887\nfunction ajaxExtend( target, src ) {\n\tvar key, deep,\n\t\tflatOptions = jQuery.ajaxSettings.flatOptions || {};\n\n\tfor ( key in src ) {\n\t\tif ( src[ key ] !== undefined ) {\n\t\t\t( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];\n\t\t}\n\t}\n\tif ( deep ) {\n\t\tjQuery.extend( true, target, deep );\n\t}\n\n\treturn target;\n}\n\n/* Handles responses to an ajax request:\n * - finds the right dataType (mediates between content-type and expected dataType)\n * - returns the corresponding response\n */\nfunction ajaxHandleResponses( s, jqXHR, responses ) {\n\n\tvar ct, type, finalDataType, firstDataType,\n\t\tcontents = s.contents,\n\t\tdataTypes = s.dataTypes;\n\n\t// Remove auto dataType and get content-type in the process\n\twhile ( dataTypes[ 0 ] === \"*\" ) {\n\t\tdataTypes.shift();\n\t\tif ( ct === undefined ) {\n\t\t\tct = s.mimeType || jqXHR.getResponseHeader( \"Content-Type\" );\n\t\t}\n\t}\n\n\t// Check if we're dealing with a known content-type\n\tif ( ct ) {\n\t\tfor ( type in contents ) {\n\t\t\tif ( contents[ type ] && contents[ type ].test( ct ) ) {\n\t\t\t\tdataTypes.unshift( type );\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Check to see if we have a response for the expected dataType\n\tif ( dataTypes[ 0 ] in responses ) {\n\t\tfinalDataType = dataTypes[ 0 ];\n\t} else {\n\n\t\t// Try convertible dataTypes\n\t\tfor ( type in responses ) {\n\t\t\tif ( !dataTypes[ 0 ] || s.converters[ type + \" \" + dataTypes[ 0 ] ] ) {\n\t\t\t\tfinalDataType = type;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif ( !firstDataType ) {\n\t\t\t\tfirstDataType = type;\n\t\t\t}\n\t\t}\n\n\t\t// Or just use first one\n\t\tfinalDataType = finalDataType || firstDataType;\n\t}\n\n\t// If we found a dataType\n\t// We add the dataType to the list if needed\n\t// and return the corresponding response\n\tif ( finalDataType ) {\n\t\tif ( finalDataType !== dataTypes[ 0 ] ) {\n\t\t\tdataTypes.unshift( finalDataType );\n\t\t}\n\t\treturn responses[ finalDataType ];\n\t}\n}\n\n/* Chain conversions given the request and the original response\n * Also sets the responseXXX fields on the jqXHR instance\n */\nfunction ajaxConvert( s, response, jqXHR, isSuccess ) {\n\tvar conv2, current, conv, tmp, prev,\n\t\tconverters = {},\n\n\t\t// Work with a copy of dataTypes in case we need to modify it for conversion\n\t\tdataTypes = s.dataTypes.slice();\n\n\t// Create converters map with lowercased keys\n\tif ( dataTypes[ 1 ] ) {\n\t\tfor ( conv in s.converters ) {\n\t\t\tconverters[ conv.toLowerCase() ] = s.converters[ conv ];\n\t\t}\n\t}\n\n\tcurrent = dataTypes.shift();\n\n\t// Convert to each sequential dataType\n\twhile ( current ) {\n\n\t\tif ( s.responseFields[ current ] ) {\n\t\t\tjqXHR[ s.responseFields[ current ] ] = response;\n\t\t}\n\n\t\t// Apply the dataFilter if provided\n\t\tif ( !prev && isSuccess && s.dataFilter ) {\n\t\t\tresponse = s.dataFilter( response, s.dataType );\n\t\t}\n\n\t\tprev = current;\n\t\tcurrent = dataTypes.shift();\n\n\t\tif ( current ) {\n\n\t\t\t// There's only work to do if current dataType is non-auto\n\t\t\tif ( current === \"*\" ) {\n\n\t\t\t\tcurrent = prev;\n\n\t\t\t// Convert response if prev dataType is non-auto and differs from current\n\t\t\t} else if ( prev !== \"*\" && prev !== current ) {\n\n\t\t\t\t// Seek a direct converter\n\t\t\t\tconv = converters[ prev + \" \" + current ] || converters[ \"* \" + current ];\n\n\t\t\t\t// If none found, seek a pair\n\t\t\t\tif ( !conv ) {\n\t\t\t\t\tfor ( conv2 in converters ) {\n\n\t\t\t\t\t\t// If conv2 outputs current\n\t\t\t\t\t\ttmp = conv2.split( \" \" );\n\t\t\t\t\t\tif ( tmp[ 1 ] === current ) {\n\n\t\t\t\t\t\t\t// If prev can be converted to accepted input\n\t\t\t\t\t\t\tconv = converters[ prev + \" \" + tmp[ 0 ] ] ||\n\t\t\t\t\t\t\t\tconverters[ \"* \" + tmp[ 0 ] ];\n\t\t\t\t\t\t\tif ( conv ) {\n\n\t\t\t\t\t\t\t\t// Condense equivalence converters\n\t\t\t\t\t\t\t\tif ( conv === true ) {\n\t\t\t\t\t\t\t\t\tconv = converters[ conv2 ];\n\n\t\t\t\t\t\t\t\t// Otherwise, insert the intermediate dataType\n\t\t\t\t\t\t\t\t} else if ( converters[ conv2 ] !== true ) {\n\t\t\t\t\t\t\t\t\tcurrent = tmp[ 0 ];\n\t\t\t\t\t\t\t\t\tdataTypes.unshift( tmp[ 1 ] );\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Apply converter (if not an equivalence)\n\t\t\t\tif ( conv !== true ) {\n\n\t\t\t\t\t// Unless errors are allowed to bubble, catch and return them\n\t\t\t\t\tif ( conv && s.throws ) {\n\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresponse = conv( response );\n\t\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tstate: \"parsererror\",\n\t\t\t\t\t\t\t\terror: conv ? e : \"No conversion from \" + prev + \" to \" + current\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { state: \"success\", data: response };\n}\n\njQuery.extend( {\n\n\t// Counter for holding the number of active queries\n\tactive: 0,\n\n\t// Last-Modified header cache for next request\n\tlastModified: {},\n\tetag: {},\n\n\tajaxSettings: {\n\t\turl: location.href,\n\t\ttype: \"GET\",\n\t\tisLocal: rlocalProtocol.test( location.protocol ),\n\t\tglobal: true,\n\t\tprocessData: true,\n\t\tasync: true,\n\t\tcontentType: \"application/x-www-form-urlencoded; charset=UTF-8\",\n\n\t\t/*\n\t\ttimeout: 0,\n\t\tdata: null,\n\t\tdataType: null,\n\t\tusername: null,\n\t\tpassword: null,\n\t\tcache: null,\n\t\tthrows: false,\n\t\ttraditional: false,\n\t\theaders: {},\n\t\t*/\n\n\t\taccepts: {\n\t\t\t\"*\": allTypes,\n\t\t\ttext: \"text/plain\",\n\t\t\thtml: \"text/html\",\n\t\t\txml: \"application/xml, text/xml\",\n\t\t\tjson: \"application/json, text/javascript\"\n\t\t},\n\n\t\tcontents: {\n\t\t\txml: /\\bxml\\b/,\n\t\t\thtml: /\\bhtml/,\n\t\t\tjson: /\\bjson\\b/\n\t\t},\n\n\t\tresponseFields: {\n\t\t\txml: \"responseXML\",\n\t\t\ttext: \"responseText\",\n\t\t\tjson: \"responseJSON\"\n\t\t},\n\n\t\t// Data converters\n\t\t// Keys separate source (or catchall \"*\") and destination types with a single space\n\t\tconverters: {\n\n\t\t\t// Convert anything to text\n\t\t\t\"* text\": String,\n\n\t\t\t// Text to html (true = no transformation)\n\t\t\t\"text html\": true,\n\n\t\t\t// Evaluate text as a json expression\n\t\t\t\"text json\": JSON.parse,\n\n\t\t\t// Parse text as xml\n\t\t\t\"text xml\": jQuery.parseXML\n\t\t},\n\n\t\t// For options that shouldn't be deep extended:\n\t\t// you can add your own custom options here if\n\t\t// and when you create one that shouldn't be\n\t\t// deep extended (see ajaxExtend)\n\t\tflatOptions: {\n\t\t\turl: true,\n\t\t\tcontext: true\n\t\t}\n\t},\n\n\t// Creates a full fledged settings object into target\n\t// with both ajaxSettings and settings fields.\n\t// If target is omitted, writes into ajaxSettings.\n\tajaxSetup: function( target, settings ) {\n\t\treturn settings ?\n\n\t\t\t// Building a settings object\n\t\t\tajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :\n\n\t\t\t// Extending ajaxSettings\n\t\t\tajaxExtend( jQuery.ajaxSettings, target );\n\t},\n\n\tajaxPrefilter: addToPrefiltersOrTransports( prefilters ),\n\tajaxTransport: addToPrefiltersOrTransports( transports ),\n\n\t// Main method\n\tajax: function( url, options ) {\n\n\t\t// If url is an object, simulate pre-1.5 signature\n\t\tif ( typeof url === \"object\" ) {\n\t\t\toptions = url;\n\t\t\turl = undefined;\n\t\t}\n\n\t\t// Force options to be an object\n\t\toptions = options || {};\n\n\t\tvar transport,\n\n\t\t\t// URL without anti-cache param\n\t\t\tcacheURL,\n\n\t\t\t// Response headers\n\t\t\tresponseHeadersString,\n\t\t\tresponseHeaders,\n\n\t\t\t// timeout handle\n\t\t\ttimeoutTimer,\n\n\t\t\t// Url cleanup var\n\t\t\turlAnchor,\n\n\t\t\t// Request state (becomes false upon send and true upon completion)\n\t\t\tcompleted,\n\n\t\t\t// To know if global events are to be dispatched\n\t\t\tfireGlobals,\n\n\t\t\t// Loop variable\n\t\t\ti,\n\n\t\t\t// uncached part of the url\n\t\t\tuncached,\n\n\t\t\t// Create the final options object\n\t\t\ts = jQuery.ajaxSetup( {}, options ),\n\n\t\t\t// Callbacks context\n\t\t\tcallbackContext = s.context || s,\n\n\t\t\t// Context for global events is callbackContext if it is a DOM node or jQuery collection\n\t\t\tglobalEventContext = s.context &&\n\t\t\t\t( callbackContext.nodeType || callbackContext.jquery ) ?\n\t\t\t\tjQuery( callbackContext ) :\n\t\t\t\tjQuery.event,\n\n\t\t\t// Deferreds\n\t\t\tdeferred = jQuery.Deferred(),\n\t\t\tcompleteDeferred = jQuery.Callbacks( \"once memory\" ),\n\n\t\t\t// Status-dependent callbacks\n\t\t\tstatusCode = s.statusCode || {},\n\n\t\t\t// Headers (they are sent all at once)\n\t\t\trequestHeaders = {},\n\t\t\trequestHeadersNames = {},\n\n\t\t\t// Default abort message\n\t\t\tstrAbort = \"canceled\",\n\n\t\t\t// Fake xhr\n\t\t\tjqXHR = {\n\t\t\t\treadyState: 0,\n\n\t\t\t\t// Builds headers hashtable if needed\n\t\t\t\tgetResponseHeader: function( key ) {\n\t\t\t\t\tvar match;\n\t\t\t\t\tif ( completed ) {\n\t\t\t\t\t\tif ( !responseHeaders ) {\n\t\t\t\t\t\t\tresponseHeaders = {};\n\t\t\t\t\t\t\twhile ( ( match = rheaders.exec( responseHeadersString ) ) ) {\n\t\t\t\t\t\t\t\tresponseHeaders[ match[ 1 ].toLowerCase() + \" \" ] =\n\t\t\t\t\t\t\t\t\t( responseHeaders[ match[ 1 ].toLowerCase() + \" \" ] || [] )\n\t\t\t\t\t\t\t\t\t\t.concat( match[ 2 ] );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatch = responseHeaders[ key.toLowerCase() + \" \" ];\n\t\t\t\t\t}\n\t\t\t\t\treturn match == null ? null : match.join( \", \" );\n\t\t\t\t},\n\n\t\t\t\t// Raw string\n\t\t\t\tgetAllResponseHeaders: function() {\n\t\t\t\t\treturn completed ? responseHeadersString : null;\n\t\t\t\t},\n\n\t\t\t\t// Caches the header\n\t\t\t\tsetRequestHeader: function( name, value ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\tname = requestHeadersNames[ name.toLowerCase() ] =\n\t\t\t\t\t\t\trequestHeadersNames[ name.toLowerCase() ] || name;\n\t\t\t\t\t\trequestHeaders[ name ] = value;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Overrides response content-type header\n\t\t\t\toverrideMimeType: function( type ) {\n\t\t\t\t\tif ( completed == null ) {\n\t\t\t\t\t\ts.mimeType = type;\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Status-dependent callbacks\n\t\t\t\tstatusCode: function( map ) {\n\t\t\t\t\tvar code;\n\t\t\t\t\tif ( map ) {\n\t\t\t\t\t\tif ( completed ) {\n\n\t\t\t\t\t\t\t// Execute the appropriate callbacks\n\t\t\t\t\t\t\tjqXHR.always( map[ jqXHR.status ] );\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// Lazy-add the new callbacks in a way that preserves old ones\n\t\t\t\t\t\t\tfor ( code in map ) {\n\t\t\t\t\t\t\t\tstatusCode[ code ] = [ statusCode[ code ], map[ code ] ];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\n\t\t\t\t// Cancel the request\n\t\t\t\tabort: function( statusText ) {\n\t\t\t\t\tvar finalText = statusText || strAbort;\n\t\t\t\t\tif ( transport ) {\n\t\t\t\t\t\ttransport.abort( finalText );\n\t\t\t\t\t}\n\t\t\t\t\tdone( 0, finalText );\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\t\t\t};\n\n\t\t// Attach deferreds\n\t\tdeferred.promise( jqXHR );\n\n\t\t// Add protocol if not provided (prefilters might expect it)\n\t\t// Handle falsy url in the settings object (#10093: consistency with old signature)\n\t\t// We also use the url parameter if available\n\t\ts.url = ( ( url || s.url || location.href ) + \"\" )\n\t\t\t.replace( rprotocol, location.protocol + \"//\" );\n\n\t\t// Alias method option to type as per ticket #12004\n\t\ts.type = options.method || options.type || s.method || s.type;\n\n\t\t// Extract dataTypes list\n\t\ts.dataTypes = ( s.dataType || \"*\" ).toLowerCase().match( rnothtmlwhite ) || [ \"\" ];\n\n\t\t// A cross-domain request is in order when the origin doesn't match the current origin.\n\t\tif ( s.crossDomain == null ) {\n\t\t\turlAnchor = document.createElement( \"a\" );\n\n\t\t\t// Support: IE <=8 - 11, Edge 12 - 15\n\t\t\t// IE throws exception on accessing the href property if url is malformed,\n\t\t\t// e.g. http://example.com:80x/\n\t\t\ttry {\n\t\t\t\turlAnchor.href = s.url;\n\n\t\t\t\t// Support: IE <=8 - 11 only\n\t\t\t\t// Anchor's host property isn't correctly set when s.url is relative\n\t\t\t\turlAnchor.href = urlAnchor.href;\n\t\t\t\ts.crossDomain = originAnchor.protocol + \"//\" + originAnchor.host !==\n\t\t\t\t\turlAnchor.protocol + \"//\" + urlAnchor.host;\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// If there is an error parsing the URL, assume it is crossDomain,\n\t\t\t\t// it can be rejected by the transport if it is invalid\n\t\t\t\ts.crossDomain = true;\n\t\t\t}\n\t\t}\n\n\t\t// Convert data if not already a string\n\t\tif ( s.data && s.processData && typeof s.data !== \"string\" ) {\n\t\t\ts.data = jQuery.param( s.data, s.traditional );\n\t\t}\n\n\t\t// Apply prefilters\n\t\tinspectPrefiltersOrTransports( prefilters, s, options, jqXHR );\n\n\t\t// If request was aborted inside a prefilter, stop there\n\t\tif ( completed ) {\n\t\t\treturn jqXHR;\n\t\t}\n\n\t\t// We can fire global events as of now if asked to\n\t\t// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)\n\t\tfireGlobals = jQuery.event && s.global;\n\n\t\t// Watch for a new set of requests\n\t\tif ( fireGlobals && jQuery.active++ === 0 ) {\n\t\t\tjQuery.event.trigger( \"ajaxStart\" );\n\t\t}\n\n\t\t// Uppercase the type\n\t\ts.type = s.type.toUpperCase();\n\n\t\t// Determine if request has content\n\t\ts.hasContent = !rnoContent.test( s.type );\n\n\t\t// Save the URL in case we're toying with the If-Modified-Since\n\t\t// and/or If-None-Match header later on\n\t\t// Remove hash to simplify url manipulation\n\t\tcacheURL = s.url.replace( rhash, \"\" );\n\n\t\t// More options handling for requests with no content\n\t\tif ( !s.hasContent ) {\n\n\t\t\t// Remember the hash so we can put it back\n\t\t\tuncached = s.url.slice( cacheURL.length );\n\n\t\t\t// If data is available and should be processed, append data to url\n\t\t\tif ( s.data && ( s.processData || typeof s.data === \"string\" ) ) {\n\t\t\t\tcacheURL += ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + s.data;\n\n\t\t\t\t// #9682: remove data so that it's not used in an eventual retry\n\t\t\t\tdelete s.data;\n\t\t\t}\n\n\t\t\t// Add or update anti-cache param if needed\n\t\t\tif ( s.cache === false ) {\n\t\t\t\tcacheURL = cacheURL.replace( rantiCache, \"$1\" );\n\t\t\t\tuncached = ( rquery.test( cacheURL ) ? \"&\" : \"?\" ) + \"_=\" + ( nonce.guid++ ) +\n\t\t\t\t\tuncached;\n\t\t\t}\n\n\t\t\t// Put hash and anti-cache on the URL that will be requested (gh-1732)\n\t\t\ts.url = cacheURL + uncached;\n\n\t\t// Change '%20' to '+' if this is encoded form body content (gh-2658)\n\t\t} else if ( s.data && s.processData &&\n\t\t\t( s.contentType || \"\" ).indexOf( \"application/x-www-form-urlencoded\" ) === 0 ) {\n\t\t\ts.data = s.data.replace( r20, \"+\" );\n\t\t}\n\n\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\tif ( s.ifModified ) {\n\t\t\tif ( jQuery.lastModified[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-Modified-Since\", jQuery.lastModified[ cacheURL ] );\n\t\t\t}\n\t\t\tif ( jQuery.etag[ cacheURL ] ) {\n\t\t\t\tjqXHR.setRequestHeader( \"If-None-Match\", jQuery.etag[ cacheURL ] );\n\t\t\t}\n\t\t}\n\n\t\t// Set the correct header, if data is being sent\n\t\tif ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {\n\t\t\tjqXHR.setRequestHeader( \"Content-Type\", s.contentType );\n\t\t}\n\n\t\t// Set the Accepts header for the server, depending on the dataType\n\t\tjqXHR.setRequestHeader(\n\t\t\t\"Accept\",\n\t\t\ts.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?\n\t\t\t\ts.accepts[ s.dataTypes[ 0 ] ] +\n\t\t\t\t\t( s.dataTypes[ 0 ] !== \"*\" ? \", \" + allTypes + \"; q=0.01\" : \"\" ) :\n\t\t\t\ts.accepts[ \"*\" ]\n\t\t);\n\n\t\t// Check for headers option\n\t\tfor ( i in s.headers ) {\n\t\t\tjqXHR.setRequestHeader( i, s.headers[ i ] );\n\t\t}\n\n\t\t// Allow custom headers/mimetypes and early abort\n\t\tif ( s.beforeSend &&\n\t\t\t( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {\n\n\t\t\t// Abort if not done already and return\n\t\t\treturn jqXHR.abort();\n\t\t}\n\n\t\t// Aborting is no longer a cancellation\n\t\tstrAbort = \"abort\";\n\n\t\t// Install callbacks on deferreds\n\t\tcompleteDeferred.add( s.complete );\n\t\tjqXHR.done( s.success );\n\t\tjqXHR.fail( s.error );\n\n\t\t// Get transport\n\t\ttransport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );\n\n\t\t// If no transport, we auto-abort\n\t\tif ( !transport ) {\n\t\t\tdone( -1, \"No Transport\" );\n\t\t} else {\n\t\t\tjqXHR.readyState = 1;\n\n\t\t\t// Send global event\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxSend\", [ jqXHR, s ] );\n\t\t\t}\n\n\t\t\t// If request was aborted inside ajaxSend, stop there\n\t\t\tif ( completed ) {\n\t\t\t\treturn jqXHR;\n\t\t\t}\n\n\t\t\t// Timeout\n\t\t\tif ( s.async && s.timeout > 0 ) {\n\t\t\t\ttimeoutTimer = window.setTimeout( function() {\n\t\t\t\t\tjqXHR.abort( \"timeout\" );\n\t\t\t\t}, s.timeout );\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tcompleted = false;\n\t\t\t\ttransport.send( requestHeaders, done );\n\t\t\t} catch ( e ) {\n\n\t\t\t\t// Rethrow post-completion exceptions\n\t\t\t\tif ( completed ) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\n\t\t\t\t// Propagate others as results\n\t\t\t\tdone( -1, e );\n\t\t\t}\n\t\t}\n\n\t\t// Callback for when everything is done\n\t\tfunction done( status, nativeStatusText, responses, headers ) {\n\t\t\tvar isSuccess, success, error, response, modified,\n\t\t\t\tstatusText = nativeStatusText;\n\n\t\t\t// Ignore repeat invocations\n\t\t\tif ( completed ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcompleted = true;\n\n\t\t\t// Clear timeout if it exists\n\t\t\tif ( timeoutTimer ) {\n\t\t\t\twindow.clearTimeout( timeoutTimer );\n\t\t\t}\n\n\t\t\t// Dereference transport for early garbage collection\n\t\t\t// (no matter how long the jqXHR object will be used)\n\t\t\ttransport = undefined;\n\n\t\t\t// Cache response headers\n\t\t\tresponseHeadersString = headers || \"\";\n\n\t\t\t// Set readyState\n\t\t\tjqXHR.readyState = status > 0 ? 4 : 0;\n\n\t\t\t// Determine if successful\n\t\t\tisSuccess = status >= 200 && status < 300 || status === 304;\n\n\t\t\t// Get response data\n\t\t\tif ( responses ) {\n\t\t\t\tresponse = ajaxHandleResponses( s, jqXHR, responses );\n\t\t\t}\n\n\t\t\t// Use a noop converter for missing script but not if jsonp\n\t\t\tif ( !isSuccess &&\n\t\t\t\tjQuery.inArray( \"script\", s.dataTypes ) > -1 &&\n\t\t\t\tjQuery.inArray( \"json\", s.dataTypes ) < 0 ) {\n\t\t\t\ts.converters[ \"text script\" ] = function() {};\n\t\t\t}\n\n\t\t\t// Convert no matter what (that way responseXXX fields are always set)\n\t\t\tresponse = ajaxConvert( s, response, jqXHR, isSuccess );\n\n\t\t\t// If successful, handle type chaining\n\t\t\tif ( isSuccess ) {\n\n\t\t\t\t// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.\n\t\t\t\tif ( s.ifModified ) {\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"Last-Modified\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.lastModified[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t\tmodified = jqXHR.getResponseHeader( \"etag\" );\n\t\t\t\t\tif ( modified ) {\n\t\t\t\t\t\tjQuery.etag[ cacheURL ] = modified;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if no content\n\t\t\t\tif ( status === 204 || s.type === \"HEAD\" ) {\n\t\t\t\t\tstatusText = \"nocontent\";\n\n\t\t\t\t// if not modified\n\t\t\t\t} else if ( status === 304 ) {\n\t\t\t\t\tstatusText = \"notmodified\";\n\n\t\t\t\t// If we have data, let's convert it\n\t\t\t\t} else {\n\t\t\t\t\tstatusText = response.state;\n\t\t\t\t\tsuccess = response.data;\n\t\t\t\t\terror = response.error;\n\t\t\t\t\tisSuccess = !error;\n\t\t\t\t}\n\t\t\t} else {\n\n\t\t\t\t// Extract error from statusText and normalize for non-aborts\n\t\t\t\terror = statusText;\n\t\t\t\tif ( status || !statusText ) {\n\t\t\t\t\tstatusText = \"error\";\n\t\t\t\t\tif ( status < 0 ) {\n\t\t\t\t\t\tstatus = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Set data for the fake xhr object\n\t\t\tjqXHR.status = status;\n\t\t\tjqXHR.statusText = ( nativeStatusText || statusText ) + \"\";\n\n\t\t\t// Success/Error\n\t\t\tif ( isSuccess ) {\n\t\t\t\tdeferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );\n\t\t\t} else {\n\t\t\t\tdeferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );\n\t\t\t}\n\n\t\t\t// Status-dependent callbacks\n\t\t\tjqXHR.statusCode( statusCode );\n\t\t\tstatusCode = undefined;\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( isSuccess ? \"ajaxSuccess\" : \"ajaxError\",\n\t\t\t\t\t[ jqXHR, s, isSuccess ? success : error ] );\n\t\t\t}\n\n\t\t\t// Complete\n\t\t\tcompleteDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );\n\n\t\t\tif ( fireGlobals ) {\n\t\t\t\tglobalEventContext.trigger( \"ajaxComplete\", [ jqXHR, s ] );\n\n\t\t\t\t// Handle the global AJAX counter\n\t\t\t\tif ( !( --jQuery.active ) ) {\n\t\t\t\t\tjQuery.event.trigger( \"ajaxStop\" );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn jqXHR;\n\t},\n\n\tgetJSON: function( url, data, callback ) {\n\t\treturn jQuery.get( url, data, callback, \"json\" );\n\t},\n\n\tgetScript: function( url, callback ) {\n\t\treturn jQuery.get( url, undefined, callback, \"script\" );\n\t}\n} );\n\njQuery.each( [ \"get\", \"post\" ], function( _i, method ) {\n\tjQuery[ method ] = function( url, data, callback, type ) {\n\n\t\t// Shift arguments if data argument was omitted\n\t\tif ( isFunction( data ) ) {\n\t\t\ttype = type || callback;\n\t\t\tcallback = data;\n\t\t\tdata = undefined;\n\t\t}\n\n\t\t// The url can be an options object (which then must have .url)\n\t\treturn jQuery.ajax( jQuery.extend( {\n\t\t\turl: url,\n\t\t\ttype: method,\n\t\t\tdataType: type,\n\t\t\tdata: data,\n\t\t\tsuccess: callback\n\t\t}, jQuery.isPlainObject( url ) && url ) );\n\t};\n} );\n\njQuery.ajaxPrefilter( function( s ) {\n\tvar i;\n\tfor ( i in s.headers ) {\n\t\tif ( i.toLowerCase() === \"content-type\" ) {\n\t\t\ts.contentType = s.headers[ i ] || \"\";\n\t\t}\n\t}\n} );\n\n\njQuery._evalUrl = function( url, options, doc ) {\n\treturn jQuery.ajax( {\n\t\turl: url,\n\n\t\t// Make this explicit, since user can override this through ajaxSetup (#11264)\n\t\ttype: \"GET\",\n\t\tdataType: \"script\",\n\t\tcache: true,\n\t\tasync: false,\n\t\tglobal: false,\n\n\t\t// Only evaluate the response if it is successful (gh-4126)\n\t\t// dataFilter is not invoked for failure responses, so using it instead\n\t\t// of the default converter is kludgy but it works.\n\t\tconverters: {\n\t\t\t\"text script\": function() {}\n\t\t},\n\t\tdataFilter: function( response ) {\n\t\t\tjQuery.globalEval( response, options, doc );\n\t\t}\n\t} );\n};\n\n\njQuery.fn.extend( {\n\twrapAll: function( html ) {\n\t\tvar wrap;\n\n\t\tif ( this[ 0 ] ) {\n\t\t\tif ( isFunction( html ) ) {\n\t\t\t\thtml = html.call( this[ 0 ] );\n\t\t\t}\n\n\t\t\t// The elements to wrap the target around\n\t\t\twrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );\n\n\t\t\tif ( this[ 0 ].parentNode ) {\n\t\t\t\twrap.insertBefore( this[ 0 ] );\n\t\t\t}\n\n\t\t\twrap.map( function() {\n\t\t\t\tvar elem = this;\n\n\t\t\t\twhile ( elem.firstElementChild ) {\n\t\t\t\t\telem = elem.firstElementChild;\n\t\t\t\t}\n\n\t\t\t\treturn elem;\n\t\t\t} ).append( this );\n\t\t}\n\n\t\treturn this;\n\t},\n\n\twrapInner: function( html ) {\n\t\tif ( isFunction( html ) ) {\n\t\t\treturn this.each( function( i ) {\n\t\t\t\tjQuery( this ).wrapInner( html.call( this, i ) );\n\t\t\t} );\n\t\t}\n\n\t\treturn this.each( function() {\n\t\t\tvar self = jQuery( this ),\n\t\t\t\tcontents = self.contents();\n\n\t\t\tif ( contents.length ) {\n\t\t\t\tcontents.wrapAll( html );\n\n\t\t\t} else {\n\t\t\t\tself.append( html );\n\t\t\t}\n\t\t} );\n\t},\n\n\twrap: function( html ) {\n\t\tvar htmlIsFunction = isFunction( html );\n\n\t\treturn this.each( function( i ) {\n\t\t\tjQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );\n\t\t} );\n\t},\n\n\tunwrap: function( selector ) {\n\t\tthis.parent( selector ).not( \"body\" ).each( function() {\n\t\t\tjQuery( this ).replaceWith( this.childNodes );\n\t\t} );\n\t\treturn this;\n\t}\n} );\n\n\njQuery.expr.pseudos.hidden = function( elem ) {\n\treturn !jQuery.expr.pseudos.visible( elem );\n};\njQuery.expr.pseudos.visible = function( elem ) {\n\treturn !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );\n};\n\n\n\n\njQuery.ajaxSettings.xhr = function() {\n\ttry {\n\t\treturn new window.XMLHttpRequest();\n\t} catch ( e ) {}\n};\n\nvar xhrSuccessStatus = {\n\n\t\t// File protocol always yields status code 0, assume 200\n\t\t0: 200,\n\n\t\t// Support: IE <=9 only\n\t\t// #1450: sometimes IE returns 1223 when it should be 204\n\t\t1223: 204\n\t},\n\txhrSupported = jQuery.ajaxSettings.xhr();\n\nsupport.cors = !!xhrSupported && ( \"withCredentials\" in xhrSupported );\nsupport.ajax = xhrSupported = !!xhrSupported;\n\njQuery.ajaxTransport( function( options ) {\n\tvar callback, errorCallback;\n\n\t// Cross domain only allowed if supported through XMLHttpRequest\n\tif ( support.cors || xhrSupported && !options.crossDomain ) {\n\t\treturn {\n\t\t\tsend: function( headers, complete ) {\n\t\t\t\tvar i,\n\t\t\t\t\txhr = options.xhr();\n\n\t\t\t\txhr.open(\n\t\t\t\t\toptions.type,\n\t\t\t\t\toptions.url,\n\t\t\t\t\toptions.async,\n\t\t\t\t\toptions.username,\n\t\t\t\t\toptions.password\n\t\t\t\t);\n\n\t\t\t\t// Apply custom fields if provided\n\t\t\t\tif ( options.xhrFields ) {\n\t\t\t\t\tfor ( i in options.xhrFields ) {\n\t\t\t\t\t\txhr[ i ] = options.xhrFields[ i ];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Override mime type if needed\n\t\t\t\tif ( options.mimeType && xhr.overrideMimeType ) {\n\t\t\t\t\txhr.overrideMimeType( options.mimeType );\n\t\t\t\t}\n\n\t\t\t\t// X-Requested-With header\n\t\t\t\t// For cross-domain requests, seeing as conditions for a preflight are\n\t\t\t\t// akin to a jigsaw puzzle, we simply never set it to be sure.\n\t\t\t\t// (it can always be set on a per-request basis or even using ajaxSetup)\n\t\t\t\t// For same-domain requests, won't change header if already provided.\n\t\t\t\tif ( !options.crossDomain && !headers[ \"X-Requested-With\" ] ) {\n\t\t\t\t\theaders[ \"X-Requested-With\" ] = \"XMLHttpRequest\";\n\t\t\t\t}\n\n\t\t\t\t// Set headers\n\t\t\t\tfor ( i in headers ) {\n\t\t\t\t\txhr.setRequestHeader( i, headers[ i ] );\n\t\t\t\t}\n\n\t\t\t\t// Callback\n\t\t\t\tcallback = function( type ) {\n\t\t\t\t\treturn function() {\n\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\tcallback = errorCallback = xhr.onload =\n\t\t\t\t\t\t\t\txhr.onerror = xhr.onabort = xhr.ontimeout =\n\t\t\t\t\t\t\t\t\txhr.onreadystatechange = null;\n\n\t\t\t\t\t\t\tif ( type === \"abort\" ) {\n\t\t\t\t\t\t\t\txhr.abort();\n\t\t\t\t\t\t\t} else if ( type === \"error\" ) {\n\n\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t// On a manual native abort, IE9 throws\n\t\t\t\t\t\t\t\t// errors on any property access that is not readyState\n\t\t\t\t\t\t\t\tif ( typeof xhr.status !== \"number\" ) {\n\t\t\t\t\t\t\t\t\tcomplete( 0, \"error\" );\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tcomplete(\n\n\t\t\t\t\t\t\t\t\t\t// File: protocol always yields status 0; see #8605, #14207\n\t\t\t\t\t\t\t\t\t\txhr.status,\n\t\t\t\t\t\t\t\t\t\txhr.statusText\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tcomplete(\n\t\t\t\t\t\t\t\t\txhrSuccessStatus[ xhr.status ] || xhr.status,\n\t\t\t\t\t\t\t\t\txhr.statusText,\n\n\t\t\t\t\t\t\t\t\t// Support: IE <=9 only\n\t\t\t\t\t\t\t\t\t// IE9 has no XHR2 but throws on binary (trac-11426)\n\t\t\t\t\t\t\t\t\t// For XHR2 non-text, let the caller handle it (gh-2498)\n\t\t\t\t\t\t\t\t\t( xhr.responseType || \"text\" ) !== \"text\"  ||\n\t\t\t\t\t\t\t\t\ttypeof xhr.responseText !== \"string\" ?\n\t\t\t\t\t\t\t\t\t\t{ binary: xhr.response } :\n\t\t\t\t\t\t\t\t\t\t{ text: xhr.responseText },\n\t\t\t\t\t\t\t\t\txhr.getAllResponseHeaders()\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t};\n\n\t\t\t\t// Listen to events\n\t\t\t\txhr.onload = callback();\n\t\t\t\terrorCallback = xhr.onerror = xhr.ontimeout = callback( \"error\" );\n\n\t\t\t\t// Support: IE 9 only\n\t\t\t\t// Use onreadystatechange to replace onabort\n\t\t\t\t// to handle uncaught aborts\n\t\t\t\tif ( xhr.onabort !== undefined ) {\n\t\t\t\t\txhr.onabort = errorCallback;\n\t\t\t\t} else {\n\t\t\t\t\txhr.onreadystatechange = function() {\n\n\t\t\t\t\t\t// Check readyState before timeout as it changes\n\t\t\t\t\t\tif ( xhr.readyState === 4 ) {\n\n\t\t\t\t\t\t\t// Allow onerror to be called first,\n\t\t\t\t\t\t\t// but that will not handle a native abort\n\t\t\t\t\t\t\t// Also, save errorCallback to a variable\n\t\t\t\t\t\t\t// as xhr.onerror cannot be accessed\n\t\t\t\t\t\t\twindow.setTimeout( function() {\n\t\t\t\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\t\t\t\terrorCallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\t// Create the abort callback\n\t\t\t\tcallback = callback( \"abort\" );\n\n\t\t\t\ttry {\n\n\t\t\t\t\t// Do send the request (this may raise an exception)\n\t\t\t\t\txhr.send( options.hasContent && options.data || null );\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t// #14683: Only rethrow if this hasn't been notified as an error yet\n\t\t\t\t\tif ( callback ) {\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\n// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)\njQuery.ajaxPrefilter( function( s ) {\n\tif ( s.crossDomain ) {\n\t\ts.contents.script = false;\n\t}\n} );\n\n// Install script dataType\njQuery.ajaxSetup( {\n\taccepts: {\n\t\tscript: \"text/javascript, application/javascript, \" +\n\t\t\t\"application/ecmascript, application/x-ecmascript\"\n\t},\n\tcontents: {\n\t\tscript: /\\b(?:java|ecma)script\\b/\n\t},\n\tconverters: {\n\t\t\"text script\": function( text ) {\n\t\t\tjQuery.globalEval( text );\n\t\t\treturn text;\n\t\t}\n\t}\n} );\n\n// Handle cache's special case and crossDomain\njQuery.ajaxPrefilter( \"script\", function( s ) {\n\tif ( s.cache === undefined ) {\n\t\ts.cache = false;\n\t}\n\tif ( s.crossDomain ) {\n\t\ts.type = \"GET\";\n\t}\n} );\n\n// Bind script tag hack transport\njQuery.ajaxTransport( \"script\", function( s ) {\n\n\t// This transport only deals with cross domain or forced-by-attrs requests\n\tif ( s.crossDomain || s.scriptAttrs ) {\n\t\tvar script, callback;\n\t\treturn {\n\t\t\tsend: function( _, complete ) {\n\t\t\t\tscript = jQuery( \"<script>\" )\n\t\t\t\t\t.attr( s.scriptAttrs || {} )\n\t\t\t\t\t.prop( { charset: s.scriptCharset, src: s.url } )\n\t\t\t\t\t.on( \"load error\", callback = function( evt ) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t\tcallback = null;\n\t\t\t\t\t\tif ( evt ) {\n\t\t\t\t\t\t\tcomplete( evt.type === \"error\" ? 404 : 200, evt.type );\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\n\t\t\t\t// Use native DOM manipulation to avoid our domManip AJAX trickery\n\t\t\t\tdocument.head.appendChild( script[ 0 ] );\n\t\t\t},\n\t\t\tabort: function() {\n\t\t\t\tif ( callback ) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n} );\n\n\n\n\nvar oldCallbacks = [],\n\trjsonp = /(=)\\?(?=&|$)|\\?\\?/;\n\n// Default jsonp settings\njQuery.ajaxSetup( {\n\tjsonp: \"callback\",\n\tjsonpCallback: function() {\n\t\tvar callback = oldCallbacks.pop() || ( jQuery.expando + \"_\" + ( nonce.guid++ ) );\n\t\tthis[ callback ] = true;\n\t\treturn callback;\n\t}\n} );\n\n// Detect, normalize options and install callbacks for jsonp requests\njQuery.ajaxPrefilter( \"json jsonp\", function( s, originalSettings, jqXHR ) {\n\n\tvar callbackName, overwritten, responseContainer,\n\t\tjsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?\n\t\t\t\"url\" :\n\t\t\ttypeof s.data === \"string\" &&\n\t\t\t\t( s.contentType || \"\" )\n\t\t\t\t\t.indexOf( \"application/x-www-form-urlencoded\" ) === 0 &&\n\t\t\t\trjsonp.test( s.data ) && \"data\"\n\t\t);\n\n\t// Handle iff the expected data type is \"jsonp\" or we have a parameter to set\n\tif ( jsonProp || s.dataTypes[ 0 ] === \"jsonp\" ) {\n\n\t\t// Get callback name, remembering preexisting value associated with it\n\t\tcallbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?\n\t\t\ts.jsonpCallback() :\n\t\t\ts.jsonpCallback;\n\n\t\t// Insert callback into url or form data\n\t\tif ( jsonProp ) {\n\t\t\ts[ jsonProp ] = s[ jsonProp ].replace( rjsonp, \"$1\" + callbackName );\n\t\t} else if ( s.jsonp !== false ) {\n\t\t\ts.url += ( rquery.test( s.url ) ? \"&\" : \"?\" ) + s.jsonp + \"=\" + callbackName;\n\t\t}\n\n\t\t// Use data converter to retrieve json after script execution\n\t\ts.converters[ \"script json\" ] = function() {\n\t\t\tif ( !responseContainer ) {\n\t\t\t\tjQuery.error( callbackName + \" was not called\" );\n\t\t\t}\n\t\t\treturn responseContainer[ 0 ];\n\t\t};\n\n\t\t// Force json dataType\n\t\ts.dataTypes[ 0 ] = \"json\";\n\n\t\t// Install callback\n\t\toverwritten = window[ callbackName ];\n\t\twindow[ callbackName ] = function() {\n\t\t\tresponseContainer = arguments;\n\t\t};\n\n\t\t// Clean-up function (fires after converters)\n\t\tjqXHR.always( function() {\n\n\t\t\t// If previous value didn't exist - remove it\n\t\t\tif ( overwritten === undefined ) {\n\t\t\t\tjQuery( window ).removeProp( callbackName );\n\n\t\t\t// Otherwise restore preexisting value\n\t\t\t} else {\n\t\t\t\twindow[ callbackName ] = overwritten;\n\t\t\t}\n\n\t\t\t// Save back as free\n\t\t\tif ( s[ callbackName ] ) {\n\n\t\t\t\t// Make sure that re-using the options doesn't screw things around\n\t\t\t\ts.jsonpCallback = originalSettings.jsonpCallback;\n\n\t\t\t\t// Save the callback name for future use\n\t\t\t\toldCallbacks.push( callbackName );\n\t\t\t}\n\n\t\t\t// Call if it was a function and we have a response\n\t\t\tif ( responseContainer && isFunction( overwritten ) ) {\n\t\t\t\toverwritten( responseContainer[ 0 ] );\n\t\t\t}\n\n\t\t\tresponseContainer = overwritten = undefined;\n\t\t} );\n\n\t\t// Delegate to script\n\t\treturn \"script\";\n\t}\n} );\n\n\n\n\n// Support: Safari 8 only\n// In Safari 8 documents created via document.implementation.createHTMLDocument\n// collapse sibling forms: the second one becomes a child of the first one.\n// Because of that, this security measure has to be disabled in Safari 8.\n// https://bugs.webkit.org/show_bug.cgi?id=137337\nsupport.createHTMLDocument = ( function() {\n\tvar body = document.implementation.createHTMLDocument( \"\" ).body;\n\tbody.innerHTML = \"<form></form><form></form>\";\n\treturn body.childNodes.length === 2;\n} )();\n\n\n// Argument \"data\" should be string of html\n// context (optional): If specified, the fragment will be created in this context,\n// defaults to document\n// keepScripts (optional): If true, will include scripts passed in the html string\njQuery.parseHTML = function( data, context, keepScripts ) {\n\tif ( typeof data !== \"string\" ) {\n\t\treturn [];\n\t}\n\tif ( typeof context === \"boolean\" ) {\n\t\tkeepScripts = context;\n\t\tcontext = false;\n\t}\n\n\tvar base, parsed, scripts;\n\n\tif ( !context ) {\n\n\t\t// Stop scripts or inline event handlers from being executed immediately\n\t\t// by using document.implementation\n\t\tif ( support.createHTMLDocument ) {\n\t\t\tcontext = document.implementation.createHTMLDocument( \"\" );\n\n\t\t\t// Set the base href for the created document\n\t\t\t// so any parsed elements with URLs\n\t\t\t// are based on the document's URL (gh-2965)\n\t\t\tbase = context.createElement( \"base\" );\n\t\t\tbase.href = document.location.href;\n\t\t\tcontext.head.appendChild( base );\n\t\t} else {\n\t\t\tcontext = document;\n\t\t}\n\t}\n\n\tparsed = rsingleTag.exec( data );\n\tscripts = !keepScripts && [];\n\n\t// Single tag\n\tif ( parsed ) {\n\t\treturn [ context.createElement( parsed[ 1 ] ) ];\n\t}\n\n\tparsed = buildFragment( [ data ], context, scripts );\n\n\tif ( scripts && scripts.length ) {\n\t\tjQuery( scripts ).remove();\n\t}\n\n\treturn jQuery.merge( [], parsed.childNodes );\n};\n\n\n/**\n * Load a url into a page\n */\njQuery.fn.load = function( url, params, callback ) {\n\tvar selector, type, response,\n\t\tself = this,\n\t\toff = url.indexOf( \" \" );\n\n\tif ( off > -1 ) {\n\t\tselector = stripAndCollapse( url.slice( off ) );\n\t\turl = url.slice( 0, off );\n\t}\n\n\t// If it's a function\n\tif ( isFunction( params ) ) {\n\n\t\t// We assume that it's the callback\n\t\tcallback = params;\n\t\tparams = undefined;\n\n\t// Otherwise, build a param string\n\t} else if ( params && typeof params === \"object\" ) {\n\t\ttype = \"POST\";\n\t}\n\n\t// If we have elements to modify, make the request\n\tif ( self.length > 0 ) {\n\t\tjQuery.ajax( {\n\t\t\turl: url,\n\n\t\t\t// If \"type\" variable is undefined, then \"GET\" method will be used.\n\t\t\t// Make value of this field explicit since\n\t\t\t// user can override it through ajaxSetup method\n\t\t\ttype: type || \"GET\",\n\t\t\tdataType: \"html\",\n\t\t\tdata: params\n\t\t} ).done( function( responseText ) {\n\n\t\t\t// Save response for use in complete callback\n\t\t\tresponse = arguments;\n\n\t\t\tself.html( selector ?\n\n\t\t\t\t// If a selector was specified, locate the right elements in a dummy div\n\t\t\t\t// Exclude scripts to avoid IE 'Permission Denied' errors\n\t\t\t\tjQuery( \"<div>\" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :\n\n\t\t\t\t// Otherwise use the full result\n\t\t\t\tresponseText );\n\n\t\t// If the request succeeds, this function gets \"data\", \"status\", \"jqXHR\"\n\t\t// but they are ignored because response was set above.\n\t\t// If it fails, this function gets \"jqXHR\", \"status\", \"error\"\n\t\t} ).always( callback && function( jqXHR, status ) {\n\t\t\tself.each( function() {\n\t\t\t\tcallback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );\n\t\t\t} );\n\t\t} );\n\t}\n\n\treturn this;\n};\n\n\n\n\njQuery.expr.pseudos.animated = function( elem ) {\n\treturn jQuery.grep( jQuery.timers, function( fn ) {\n\t\treturn elem === fn.elem;\n\t} ).length;\n};\n\n\n\n\njQuery.offset = {\n\tsetOffset: function( elem, options, i ) {\n\t\tvar curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,\n\t\t\tposition = jQuery.css( elem, \"position\" ),\n\t\t\tcurElem = jQuery( elem ),\n\t\t\tprops = {};\n\n\t\t// Set position first, in-case top/left are set even on static elem\n\t\tif ( position === \"static\" ) {\n\t\t\telem.style.position = \"relative\";\n\t\t}\n\n\t\tcurOffset = curElem.offset();\n\t\tcurCSSTop = jQuery.css( elem, \"top\" );\n\t\tcurCSSLeft = jQuery.css( elem, \"left\" );\n\t\tcalculatePosition = ( position === \"absolute\" || position === \"fixed\" ) &&\n\t\t\t( curCSSTop + curCSSLeft ).indexOf( \"auto\" ) > -1;\n\n\t\t// Need to be able to calculate position if either\n\t\t// top or left is auto and position is either absolute or fixed\n\t\tif ( calculatePosition ) {\n\t\t\tcurPosition = curElem.position();\n\t\t\tcurTop = curPosition.top;\n\t\t\tcurLeft = curPosition.left;\n\n\t\t} else {\n\t\t\tcurTop = parseFloat( curCSSTop ) || 0;\n\t\t\tcurLeft = parseFloat( curCSSLeft ) || 0;\n\t\t}\n\n\t\tif ( isFunction( options ) ) {\n\n\t\t\t// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)\n\t\t\toptions = options.call( elem, i, jQuery.extend( {}, curOffset ) );\n\t\t}\n\n\t\tif ( options.top != null ) {\n\t\t\tprops.top = ( options.top - curOffset.top ) + curTop;\n\t\t}\n\t\tif ( options.left != null ) {\n\t\t\tprops.left = ( options.left - curOffset.left ) + curLeft;\n\t\t}\n\n\t\tif ( \"using\" in options ) {\n\t\t\toptions.using.call( elem, props );\n\n\t\t} else {\n\t\t\tcurElem.css( props );\n\t\t}\n\t}\n};\n\njQuery.fn.extend( {\n\n\t// offset() relates an element's border box to the document origin\n\toffset: function( options ) {\n\n\t\t// Preserve chaining for setter\n\t\tif ( arguments.length ) {\n\t\t\treturn options === undefined ?\n\t\t\t\tthis :\n\t\t\t\tthis.each( function( i ) {\n\t\t\t\t\tjQuery.offset.setOffset( this, options, i );\n\t\t\t\t} );\n\t\t}\n\n\t\tvar rect, win,\n\t\t\telem = this[ 0 ];\n\n\t\tif ( !elem ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n\t\t// Support: IE <=11 only\n\t\t// Running getBoundingClientRect on a\n\t\t// disconnected node in IE throws an error\n\t\tif ( !elem.getClientRects().length ) {\n\t\t\treturn { top: 0, left: 0 };\n\t\t}\n\n\t\t// Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\t\trect = elem.getBoundingClientRect();\n\t\twin = elem.ownerDocument.defaultView;\n\t\treturn {\n\t\t\ttop: rect.top + win.pageYOffset,\n\t\t\tleft: rect.left + win.pageXOffset\n\t\t};\n\t},\n\n\t// position() relates an element's margin box to its offset parent's padding box\n\t// This corresponds to the behavior of CSS absolute positioning\n\tposition: function() {\n\t\tif ( !this[ 0 ] ) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar offsetParent, offset, doc,\n\t\t\telem = this[ 0 ],\n\t\t\tparentOffset = { top: 0, left: 0 };\n\n\t\t// position:fixed elements are offset from the viewport, which itself always has zero offset\n\t\tif ( jQuery.css( elem, \"position\" ) === \"fixed\" ) {\n\n\t\t\t// Assume position:fixed implies availability of getBoundingClientRect\n\t\t\toffset = elem.getBoundingClientRect();\n\n\t\t} else {\n\t\t\toffset = this.offset();\n\n\t\t\t// Account for the *real* offset parent, which can be the document or its root element\n\t\t\t// when a statically positioned element is identified\n\t\t\tdoc = elem.ownerDocument;\n\t\t\toffsetParent = elem.offsetParent || doc.documentElement;\n\t\t\twhile ( offsetParent &&\n\t\t\t\t( offsetParent === doc.body || offsetParent === doc.documentElement ) &&\n\t\t\t\tjQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\n\t\t\t\toffsetParent = offsetParent.parentNode;\n\t\t\t}\n\t\t\tif ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {\n\n\t\t\t\t// Incorporate borders into its offset, since they are outside its content origin\n\t\t\t\tparentOffset = jQuery( offsetParent ).offset();\n\t\t\t\tparentOffset.top += jQuery.css( offsetParent, \"borderTopWidth\", true );\n\t\t\t\tparentOffset.left += jQuery.css( offsetParent, \"borderLeftWidth\", true );\n\t\t\t}\n\t\t}\n\n\t\t// Subtract parent offsets and element margins\n\t\treturn {\n\t\t\ttop: offset.top - parentOffset.top - jQuery.css( elem, \"marginTop\", true ),\n\t\t\tleft: offset.left - parentOffset.left - jQuery.css( elem, \"marginLeft\", true )\n\t\t};\n\t},\n\n\t// This method will return documentElement in the following cases:\n\t// 1) For the element inside the iframe without offsetParent, this method will return\n\t//    documentElement of the parent window\n\t// 2) For the hidden or detached element\n\t// 3) For body or html element, i.e. in case of the html node - it will return itself\n\t//\n\t// but those exceptions were never presented as a real life use-cases\n\t// and might be considered as more preferable results.\n\t//\n\t// This logic, however, is not guaranteed and can change at any point in the future\n\toffsetParent: function() {\n\t\treturn this.map( function() {\n\t\t\tvar offsetParent = this.offsetParent;\n\n\t\t\twhile ( offsetParent && jQuery.css( offsetParent, \"position\" ) === \"static\" ) {\n\t\t\t\toffsetParent = offsetParent.offsetParent;\n\t\t\t}\n\n\t\t\treturn offsetParent || documentElement;\n\t\t} );\n\t}\n} );\n\n// Create scrollLeft and scrollTop methods\njQuery.each( { scrollLeft: \"pageXOffset\", scrollTop: \"pageYOffset\" }, function( method, prop ) {\n\tvar top = \"pageYOffset\" === prop;\n\n\tjQuery.fn[ method ] = function( val ) {\n\t\treturn access( this, function( elem, method, val ) {\n\n\t\t\t// Coalesce documents and windows\n\t\t\tvar win;\n\t\t\tif ( isWindow( elem ) ) {\n\t\t\t\twin = elem;\n\t\t\t} else if ( elem.nodeType === 9 ) {\n\t\t\t\twin = elem.defaultView;\n\t\t\t}\n\n\t\t\tif ( val === undefined ) {\n\t\t\t\treturn win ? win[ prop ] : elem[ method ];\n\t\t\t}\n\n\t\t\tif ( win ) {\n\t\t\t\twin.scrollTo(\n\t\t\t\t\t!top ? val : win.pageXOffset,\n\t\t\t\t\ttop ? val : win.pageYOffset\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\telem[ method ] = val;\n\t\t\t}\n\t\t}, method, val, arguments.length );\n\t};\n} );\n\n// Support: Safari <=7 - 9.1, Chrome <=37 - 49\n// Add the top/left cssHooks using jQuery.fn.position\n// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084\n// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347\n// getComputedStyle returns percent when specified for top/left/bottom/right;\n// rather than make the css module depend on the offset module, just check for it here\njQuery.each( [ \"top\", \"left\" ], function( _i, prop ) {\n\tjQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,\n\t\tfunction( elem, computed ) {\n\t\t\tif ( computed ) {\n\t\t\t\tcomputed = curCSS( elem, prop );\n\n\t\t\t\t// If curCSS returns percentage, fallback to offset\n\t\t\t\treturn rnumnonpx.test( computed ) ?\n\t\t\t\t\tjQuery( elem ).position()[ prop ] + \"px\" :\n\t\t\t\t\tcomputed;\n\t\t\t}\n\t\t}\n\t);\n} );\n\n\n// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods\njQuery.each( { Height: \"height\", Width: \"width\" }, function( name, type ) {\n\tjQuery.each( {\n\t\tpadding: \"inner\" + name,\n\t\tcontent: type,\n\t\t\"\": \"outer\" + name\n\t}, function( defaultExtra, funcName ) {\n\n\t\t// Margin is only for outerHeight, outerWidth\n\t\tjQuery.fn[ funcName ] = function( margin, value ) {\n\t\t\tvar chainable = arguments.length && ( defaultExtra || typeof margin !== \"boolean\" ),\n\t\t\t\textra = defaultExtra || ( margin === true || value === true ? \"margin\" : \"border\" );\n\n\t\t\treturn access( this, function( elem, type, value ) {\n\t\t\t\tvar doc;\n\n\t\t\t\tif ( isWindow( elem ) ) {\n\n\t\t\t\t\t// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)\n\t\t\t\t\treturn funcName.indexOf( \"outer\" ) === 0 ?\n\t\t\t\t\t\telem[ \"inner\" + name ] :\n\t\t\t\t\t\telem.document.documentElement[ \"client\" + name ];\n\t\t\t\t}\n\n\t\t\t\t// Get document width or height\n\t\t\t\tif ( elem.nodeType === 9 ) {\n\t\t\t\t\tdoc = elem.documentElement;\n\n\t\t\t\t\t// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],\n\t\t\t\t\t// whichever is greatest\n\t\t\t\t\treturn Math.max(\n\t\t\t\t\t\telem.body[ \"scroll\" + name ], doc[ \"scroll\" + name ],\n\t\t\t\t\t\telem.body[ \"offset\" + name ], doc[ \"offset\" + name ],\n\t\t\t\t\t\tdoc[ \"client\" + name ]\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\treturn value === undefined ?\n\n\t\t\t\t\t// Get width or height on the element, requesting but not forcing parseFloat\n\t\t\t\t\tjQuery.css( elem, type, extra ) :\n\n\t\t\t\t\t// Set width or height on the element\n\t\t\t\t\tjQuery.style( elem, type, value, extra );\n\t\t\t}, type, chainable ? margin : undefined, chainable );\n\t\t};\n\t} );\n} );\n\n\njQuery.each( [\n\t\"ajaxStart\",\n\t\"ajaxStop\",\n\t\"ajaxComplete\",\n\t\"ajaxError\",\n\t\"ajaxSuccess\",\n\t\"ajaxSend\"\n], function( _i, type ) {\n\tjQuery.fn[ type ] = function( fn ) {\n\t\treturn this.on( type, fn );\n\t};\n} );\n\n\n\n\njQuery.fn.extend( {\n\n\tbind: function( types, data, fn ) {\n\t\treturn this.on( types, null, data, fn );\n\t},\n\tunbind: function( types, fn ) {\n\t\treturn this.off( types, null, fn );\n\t},\n\n\tdelegate: function( selector, types, data, fn ) {\n\t\treturn this.on( types, selector, data, fn );\n\t},\n\tundelegate: function( selector, types, fn ) {\n\n\t\t// ( namespace ) or ( selector, types [, fn] )\n\t\treturn arguments.length === 1 ?\n\t\t\tthis.off( selector, \"**\" ) :\n\t\t\tthis.off( types, selector || \"**\", fn );\n\t},\n\n\thover: function( fnOver, fnOut ) {\n\t\treturn this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );\n\t}\n} );\n\njQuery.each(\n\t( \"blur focus focusin focusout resize scroll click dblclick \" +\n\t\"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave \" +\n\t\"change select submit keydown keypress keyup contextmenu\" ).split( \" \" ),\n\tfunction( _i, name ) {\n\n\t\t// Handle event binding\n\t\tjQuery.fn[ name ] = function( data, fn ) {\n\t\t\treturn arguments.length > 0 ?\n\t\t\t\tthis.on( name, null, data, fn ) :\n\t\t\t\tthis.trigger( name );\n\t\t};\n\t}\n);\n\n\n\n\n// Support: Android <=4.0 only\n// Make sure we trim BOM and NBSP\nvar rtrim = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g;\n\n// Bind a function to a context, optionally partially applying any\n// arguments.\n// jQuery.proxy is deprecated to promote standards (specifically Function#bind)\n// However, it is not slated for removal any time soon\njQuery.proxy = function( fn, context ) {\n\tvar tmp, args, proxy;\n\n\tif ( typeof context === \"string\" ) {\n\t\ttmp = fn[ context ];\n\t\tcontext = fn;\n\t\tfn = tmp;\n\t}\n\n\t// Quick check to determine if target is callable, in the spec\n\t// this throws a TypeError, but we will just return undefined.\n\tif ( !isFunction( fn ) ) {\n\t\treturn undefined;\n\t}\n\n\t// Simulated bind\n\targs = slice.call( arguments, 2 );\n\tproxy = function() {\n\t\treturn fn.apply( context || this, args.concat( slice.call( arguments ) ) );\n\t};\n\n\t// Set the guid of unique handler to the same of original handler, so it can be removed\n\tproxy.guid = fn.guid = fn.guid || jQuery.guid++;\n\n\treturn proxy;\n};\n\njQuery.holdReady = function( hold ) {\n\tif ( hold ) {\n\t\tjQuery.readyWait++;\n\t} else {\n\t\tjQuery.ready( true );\n\t}\n};\njQuery.isArray = Array.isArray;\njQuery.parseJSON = JSON.parse;\njQuery.nodeName = nodeName;\njQuery.isFunction = isFunction;\njQuery.isWindow = isWindow;\njQuery.camelCase = camelCase;\njQuery.type = toType;\n\njQuery.now = Date.now;\n\njQuery.isNumeric = function( obj ) {\n\n\t// As of jQuery 3.0, isNumeric is limited to\n\t// strings and numbers (primitives or objects)\n\t// that can be coerced to finite numbers (gh-2662)\n\tvar type = jQuery.type( obj );\n\treturn ( type === \"number\" || type === \"string\" ) &&\n\n\t\t// parseFloat NaNs numeric-cast false positives (\"\")\n\t\t// ...but misinterprets leading-number strings, particularly hex literals (\"0x...\")\n\t\t// subtraction forces infinities to NaN\n\t\t!isNaN( obj - parseFloat( obj ) );\n};\n\njQuery.trim = function( text ) {\n\treturn text == null ?\n\t\t\"\" :\n\t\t( text + \"\" ).replace( rtrim, \"\" );\n};\n\n\n\n// Register as a named AMD module, since jQuery can be concatenated with other\n// files that may use define, but not via a proper concatenation script that\n// understands anonymous AMD modules. A named AMD is safest and most robust\n// way to register. Lowercase jquery is used because AMD module names are\n// derived from file names, and jQuery is normally delivered in a lowercase\n// file name. Do this after creating the global so that if an AMD module wants\n// to call noConflict to hide this version of jQuery, it will work.\n\n// Note that for maximum portability, libraries that are not jQuery should\n// declare themselves as anonymous modules, and avoid setting a global if an\n// AMD loader is present. jQuery is a special case. For more information, see\n// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon\n\nif ( typeof define === \"function\" && define.amd ) {\n\tdefine( \"jquery\", [], function() {\n\t\treturn jQuery;\n\t} );\n}\n\n\n\n\nvar\n\n\t// Map over jQuery in case of overwrite\n\t_jQuery = window.jQuery,\n\n\t// Map over the $ in case of overwrite\n\t_$ = window.$;\n\njQuery.noConflict = function( deep ) {\n\tif ( window.$ === jQuery ) {\n\t\twindow.$ = _$;\n\t}\n\n\tif ( deep && window.jQuery === jQuery ) {\n\t\twindow.jQuery = _jQuery;\n\t}\n\n\treturn jQuery;\n};\n\n// Expose jQuery and $ identifiers, even in AMD\n// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)\n// and CommonJS for browser emulators (#13566)\nif ( typeof noGlobal === \"undefined\" ) {\n\twindow.jQuery = window.$ = jQuery;\n}\n\n\n\n\nreturn jQuery;\n} );\n"],"sourceRoot":""}